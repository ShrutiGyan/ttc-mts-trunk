(function(root){root.TQ=root.TQ?root.TQ:{};root.TQ.frameworkCoreVersion="undefined"})(this);!function(root,factory){"function"==typeof define&&define.amd?define([],factory):factory()}(this,function(){(function(){!function(root){var fn;return fn=function(){var Class,args,name,obj,subpackage,target;for(args=arguments[0],target=root;;){for(subpackage in args)obj=args[subpackage],target=target[subpackage]||(target[subpackage]={}),args=obj;if("object"!=typeof args)break}return Class=args,arguments[0].hasOwnProperty("global")&&(target=root),name=Class.toString().match(/^function\s(\w+)\(/)[1],target[name]=Class},root.namespace=fn,root.module=fn}("undefined"!=typeof global&&null!==global?global:window)}).call(this);var requirejs,require,define;!function(undef){function hasProp(obj,prop){return hasOwn.call(obj,prop)}function normalize(name,baseName){var nameParts,nameSegment,mapValue,foundMap,lastIndex,foundI,foundStarMap,starI,i,j,part,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"]||{};if(name&&"."===name.charAt(0))if(baseName){for(name=name.split("/"),lastIndex=name.length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),name=baseParts.slice(0,baseParts.length-1).concat(name),i=0;i<name.length;i+=1)if(part=name[i],"."===part)name.splice(i,1),i-=1;else if(".."===part){if(1===i&&(".."===name[2]||".."===name[0]))break;i>0&&(name.splice(i-1,2),i-=2)}name=name.join("/")}else 0===name.indexOf("./")&&(name=name.substring(2));if((baseParts||starMap)&&map){for(nameParts=name.split("/"),i=nameParts.length;i>0;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;j>0;j-=1)if(mapValue=map[baseParts.slice(0,j).join("/")],mapValue&&(mapValue=mapValue[nameSegment])){foundMap=mapValue,foundI=i;break}if(foundMap)break;!foundStarMap&&starMap&&starMap[nameSegment]&&(foundStarMap=starMap[nameSegment],starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return name}function makeRequire(relName,forceSync){return function(){var args=aps.call(arguments,0);return"string"!=typeof args[0]&&1===args.length&&args.push(null),req.apply(undef,args.concat([relName,forceSync]))}}function makeNormalize(relName){return function(name){return normalize(name,relName)}}function makeLoad(depName){return function(value){defined[depName]=value}}function callDep(name){if(hasProp(waiting,name)){var args=waiting[name];delete waiting[name],defining[name]=!0,main.apply(undef,args)}if(!hasProp(defined,name)&&!hasProp(defining,name))throw new Error("No "+name);return defined[name]}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return index>-1&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeConfig(name){return function(){return config&&config.config&&config.config[name]||{}}}var main,req,makeMap,handlers,defined={},waiting={},config={},defining={},hasOwn=Object.prototype.hasOwnProperty,aps=[].slice,jsSuffixRegExp=/\.js$/;makeMap=function(name,relName){var plugin,parts=splitPrefix(name),prefix=parts[0];return name=parts[1],prefix&&(prefix=normalize(prefix,relName),plugin=callDep(prefix)),prefix?name=plugin&&plugin.normalize?plugin.normalize(name,makeNormalize(relName)):normalize(name,relName):(name=normalize(name,relName),parts=splitPrefix(name),prefix=parts[0],name=parts[1],prefix&&(plugin=callDep(prefix))),{f:prefix?prefix+"!"+name:name,n:name,pr:prefix,p:plugin}},handlers={require:function(name){return makeRequire(name)},exports:function(name){var e=defined[name];return"undefined"!=typeof e?e:defined[name]={}},module:function(name){return{id:name,uri:"",exports:defined[name],config:makeConfig(name)}}},main=function(name,deps,callback,relName){var cjsModule,depName,ret,map,i,usingExports,args=[],callbackType=typeof callback;if(relName=relName||name,"undefined"===callbackType||"function"===callbackType){for(deps=!deps.length&&callback.length?["require","exports","module"]:deps,i=0;i<deps.length;i+=1)if(map=makeMap(deps[i],relName),depName=map.f,"require"===depName)args[i]=handlers.require(name);else if("exports"===depName)args[i]=handlers.exports(name),usingExports=!0;else if("module"===depName)cjsModule=args[i]=handlers.module(name);else if(hasProp(defined,depName)||hasProp(waiting,depName)||hasProp(defining,depName))args[i]=callDep(depName);else{if(!map.p)throw new Error(name+" missing "+depName);map.p.load(map.n,makeRequire(relName,!0),makeLoad(depName),{}),args[i]=defined[depName]}ret=callback?callback.apply(defined[name],args):void 0,name&&(cjsModule&&cjsModule.exports!==undef&&cjsModule.exports!==defined[name]?defined[name]=cjsModule.exports:ret===undef&&usingExports||(defined[name]=ret))}else name&&(defined[name]=callback)},requirejs=require=req=function(deps,callback,relName,forceSync,alt){if("string"==typeof deps)return handlers[deps]?handlers[deps](callback):callDep(makeMap(deps,callback).f);if(!deps.splice){if(config=deps,config.deps&&req(config.deps,config.callback),!callback)return;callback.splice?(deps=callback,callback=relName,relName=null):deps=undef}return callback=callback||function(){},"function"==typeof relName&&(relName=forceSync,forceSync=alt),forceSync?main(undef,deps,callback,relName):setTimeout(function(){main(undef,deps,callback,relName)},4),req},req.config=function(cfg){return req(cfg)},requirejs._defined=defined,define=function(name,deps,callback){if("string"!=typeof name)throw new Error("See almond README: incorrect module build, no module name");deps.splice||(callback=deps,deps=[]),hasProp(defined,name)||hasProp(waiting,name)||(waiting[name]=[name,deps,callback])},define.amd={jQuery:!0}}(),define("vendor/almond/almond.js",function(){}),function(window,document,undefined){"use strict";function minErr(module,ErrorConstructor){return ErrorConstructor=ErrorConstructor||Error,function(){var paramPrefix,i,SKIP_INDEXES=2,templateArgs=arguments,code=templateArgs[0],message="["+(module?module+":":"")+code+"] ",template=templateArgs[1];for(message+=template.replace(/\{\d+\}/g,function(match){var index=+match.slice(1,-1),shiftedIndex=index+SKIP_INDEXES;return shiftedIndex<templateArgs.length?toDebugString(templateArgs[shiftedIndex]):match}),message+="\nhttp://errors.angularjs.org/1.4.3/"+(module?module+"/":"")+code,i=SKIP_INDEXES,paramPrefix="?";i<templateArgs.length;i++,paramPrefix="&")message+=paramPrefix+"p"+(i-SKIP_INDEXES)+"="+encodeURIComponent(toDebugString(templateArgs[i]));return new ErrorConstructor(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;var length="length"in Object(obj)&&obj.length;return obj.nodeType===NODE_TYPE_ELEMENT&&length?!0:isString(obj)||isArray(obj)||0===length||"number"==typeof length&&length>0&&length-1 in obj}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;length>key;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else if(isBlankObject(obj))for(key in obj)iterator.call(context,obj[key],key,obj);else if("function"==typeof obj.hasOwnProperty)for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else for(key in obj)hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj);return obj}function forEachSorted(obj,iterator,context){for(var keys=Object.keys(obj).sort(),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function baseExtend(dst,objs,deep){for(var h=dst.$$hashKey,i=0,ii=objs.length;ii>i;++i){var obj=objs[i];if(isObject(obj)||isFunction(obj))for(var keys=Object.keys(obj),j=0,jj=keys.length;jj>j;j++){var key=keys[j],src=obj[key];deep&&isObject(src)?isDate(src)?dst[key]=new Date(src.valueOf()):(isObject(dst[key])||(dst[key]=isArray(src)?[]:{}),baseExtend(dst[key],[src],!0)):dst[key]=src}}return setHashKey(dst,h),dst}function extend(dst){return baseExtend(dst,slice.call(arguments,1),!1)}function merge(dst){return baseExtend(dst,slice.call(arguments,1),!0)}function toInt(str){return parseInt(str,10)}function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function hasCustomToString(obj){return isFunction(obj.toString)&&obj.toString!==Object.prototype.toString}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!==value&&"object"==typeof value}function isBlankObject(value){return null!==value&&"object"==typeof value&&!getPrototypeOf(value)}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isFormData(obj){return"[object FormData]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}function isTypedArray(value){return TYPED_ARRAY_REGEXP.test(toString.call(value))}function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function arrayRemove(array,value){var index=array.indexOf(value);return index>=0&&array.splice(index,1),index}function copy(source,destination,stackSource,stackDest){if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(isTypedArray(destination))throw ngMinErr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(destination){if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");stackSource=stackSource||[],stackDest=stackDest||[],isObject(source)&&(stackSource.push(source),stackDest.push(destination));var key;if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++)destination.push(copy(source[i],null,stackSource,stackDest))}else{var h=destination.$$hashKey;if(isArray(destination)?destination.length=0:forEach(destination,function(value,key){delete destination[key]}),isBlankObject(source))for(key in source)destination[key]=copy(source[key],null,stackSource,stackDest);else if(source&&"function"==typeof source.hasOwnProperty)for(key in source)source.hasOwnProperty(key)&&(destination[key]=copy(source[key],null,stackSource,stackDest));else for(key in source)hasOwnProperty.call(source,key)&&(destination[key]=copy(source[key],null,stackSource,stackDest));setHashKey(destination,h)}}else if(destination=source,isObject(source)){var index;if(stackSource&&-1!==(index=stackSource.indexOf(source)))return stackDest[index];if(isArray(source))return copy(source,[],stackSource,stackDest);if(isTypedArray(source))destination=new source.constructor(source);else if(isDate(source))destination=new Date(source.getTime());else{if(!isRegExp(source)){var emptyObject=Object.create(getPrototypeOf(source));return copy(source,emptyObject,stackSource,stackDest)}destination=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]),destination.lastIndex=source.lastIndex}stackDest&&(stackSource.push(source),stackDest.push(destination))}return destination}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;ii>i;i++)dst[i]=src[i]}else if(isObject(src)){dst=dst||{};for(var key in src)("$"!==key.charAt(0)||"$"!==key.charAt(1))&&(dst[key]=src[key])}return dst||src}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return isDate(o2)?equals(o1.getTime(),o2.getTime()):!1;if(isRegExp(o1))return isRegExp(o2)?o1.toString()==o2.toString():!1;if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return!1;keySet=createMap();for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!(key in keySet||"$"===key.charAt(0)||o2[key]===undefined||isFunction(o2[key])))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;length>key;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return"undefined"==typeof obj?undefined:(isNumber(pretty)||(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty))}function fromJson(json){return isString(json)?JSON.parse(json):json}function timezoneToOffset(timezone,fallback){var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return date=new Date(date.getTime()),date.setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var timezoneOffset=timezoneToOffset(timezone,date.getTimezoneOffset());return addDateMinutes(date,reverse*(timezoneOffset-date.getTimezoneOffset()))}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var key_value,key,obj={};return forEach((keyValue||"").split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.replace(/\+/g,"%20").split("="),key=tryDecodeURIComponent(key_value[0]),isDefined(key))){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(i=0;ii>i;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.getAttribute(attr)))return attr;return null}function angularInit(element,bootstrap){var appElement,module,config={};forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(appElement=element,module=element.getAttribute(name))}),forEach(ngAttrPrefixes,function(prefix){var candidate,name=prefix+"app";!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(appElement=candidate,module=candidate.getAttribute(name))}),appElement&&(config.strictDi=null!==getNgAttribute(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config))}function bootstrap(element,modules,config){isObject(config)||(config={});var defaultConfig={strictDi:!1};config=extend(defaultConfig,config);var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;return window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name)?doBootstrap():(window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),angular.resumeBootstrap=function(extraModules){return forEach(extraModules,function(module){modules.push(module)}),doBootstrap()},void(isFunction(angular.resumeDeferredBootstrap)&&angular.resumeDeferredBootstrap()))}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector)throw ngMinErr("test","no injector found for element argument to getTestability");return injector.get("$$testability")}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){var originalCleanData;if(!bindJQueryFired){var jqName=jq();jQuery=window.jQuery,isDefined(jqName)&&(jQuery=null===jqName?undefined:window[jqName]),jQuery&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),originalCleanData=jQuery.cleanData,jQuery.cleanData=function(elems){var events;if(skipDestroyOnNextJQueryCleanData)skipDestroyOnNextJQueryCleanData=!1;else for(var elem,i=0;null!=(elem=elems[i]);i++)events=jQuery._data(elem,"events"),events&&events.$destroy&&jQuery(elem).triggerHandler("$destroy");originalCleanData(elems)}):jqLite=JQLite,angular.element=jqLite,bindJQueryFired=!0}}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;len>i;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockNodes(nodes){var node=nodes[0],endNode=nodes[nodes.length-1],blockNodes=[node];do{if(node=node.nextSibling,!node)break;blockNodes.push(node)}while(node!==endNode);return jqLite(blockNodes)}function createMap(){return Object.create(null)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)};return assertNotHasOwnProperty(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}function invokeLaterAndSetModuleName(provider,method){return function(recipeName,factoryFunction){return factoryFunction&&isFunction(factoryFunction)&&(factoryFunction.$$moduleName=name),invokeQueue.push([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLaterAndSetModuleName("$provide","provider"),factory:invokeLaterAndSetModuleName("$provide","factory"),service:invokeLaterAndSetModuleName("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),decorator:invokeLaterAndSetModuleName("$provide","decorator"),animation:invokeLaterAndSetModuleName("$animateProvider","register"),filter:invokeLaterAndSetModuleName("$filterProvider","register"),controller:invokeLaterAndSetModuleName("$controllerProvider","register"),directive:invokeLaterAndSetModuleName("$compileProvider","directive"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function serializeObject(obj){var seen=[];return JSON.stringify(obj,function(key,val){if(val=toJsonReplacer(key,val),isObject(val)){if(seen.indexOf(val)>=0)return"<<already seen>>";seen.push(val)}return val})}function toDebugString(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof obj?"undefined":"string"!=typeof obj?serializeObject(obj):obj}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,merge:merge,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},getTestability:getTestability,$$minErr:minErr,$$csp:csp,reloadWithDebugInfo:reloadWithDebugInfo}),angularModule=setupModuleLoader(window);try{angularModule("ngLocale")}catch(e){angularModule("ngLocale",[]).provider("$locale",$LocaleProvider)}angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$$animateQueue:$$CoreAnimateQueueProvider,$$AnimateRunner:$$CoreAnimateRunnerProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$HashMap:$$HashMapProvider,$$cookieReader:$$CookieReaderProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}function jqLiteHasData(node){for(var key in jqCache[node.ng339])return!0;return!1}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,function(node){fragment.appendChild(node)}),fragment}function jqLiteParseHTML(html,context){context=context||document;var parsed;return(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[]}function JQLite(element){if(element instanceof JQLite)return element;var argIsString;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}argIsString?jqLiteAddNodes(this,jqLiteParseHTML(element)):jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){if(onlyDescendants||jqLiteRemoveData(element),element.querySelectorAll)for(var descendants=element.querySelectorAll("*"),i=0,l=descendants.length;l>i;i++)jqLiteRemoveData(descendants[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle)if(type)forEach(type.split(" "),function(type){if(isDefined(fn)){var listenerFns=events[type];if(arrayRemove(listenerFns||[],fn),listenerFns&&listenerFns.length>0)return}removeEventListenerFn(element,type,handle),delete events[type]});else for(type in events)"$destroy"!==type&&removeEventListenerFn(element,type,handle),delete events[type]}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name)return void delete expandoStore.data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=undefined}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={events:{},data:{},handle:undefined}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[key]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}}function jqLiteHasClass(element,selector){return element.getAttribute?(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1:!1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;length>i;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){
element.nodeType==NODE_TYPE_DOCUMENT&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;ii>i;i++)if((value=jqLite.data(element,names[i]))!==undefined)return value;element=element.parentNode||element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}function jqLiteDocumentLoaded(action,win){win=win||window,"complete"===win.document.readyState?win.setTimeout(action):jqLite(win).on("load",action)}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function getAliasedAttrName(element,name){var nodeName=element.nodeName;return("INPUT"===nodeName||"TEXTAREA"===nodeName)&&ALIASED_ATTR[name]}function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return event.immediatePropagationStopped===!0},eventFnsLength>1&&(eventFns=shallowCopy(eventFns));for(var i=0;eventFnsLength>i;i++)event.isImmediatePropagationStopped()||eventFns[i].call(element,event)}};return eventHandler.elem=element,eventHandler}function $$jqLiteProvider(){this.$get=function(){return extend(JQLite,{hasClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteHasClass(node,classes)},addClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteAddClass(node,classes)},removeClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"==objType||"object"==objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid}}forEach(array,this.put,this)}function anonFn(fn){var fnText=fn.toString().replace(STRIP_COMMENTS,""),args=fnText.match(FN_ARGS);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function annotate(fn,strictDi,name){var $inject,fnText,argDecl,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||anonFn(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);fnText=fn.toString().replace(STRIP_COMMENTS,""),argDecl=fnText.match(FN_ARGS),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject}function createInjector(modulesToLoad,strictDi){function supportObject(delegate){return function(key,value){return isObject(key)?void forEach(key,reverseParams(delegate)):delegate(key,value)}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function enforceReturnValue(name,factory){return function(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result))throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name);return result}}function factory(name,factoryFn,enforce){return provider(name,{$get:enforce!==!1?enforceReturnValue(name,factoryFn):factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val),!1)}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){var moduleFn,runBlocks=[];return forEach(modulesToLoad,function(module){function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;ii>i;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}if(!loadedModules.get(module)){loadedModules.put(module,!0);try{isString(module)?(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName,caller)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function invoke(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var length,i,key,args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName);for(i=0,length=$inject.length;length>i;i++){if(key=$inject[i],"string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return isArray(fn)&&(fn=fn[length]),fn.apply(self,args)}function instantiate(Type,locals,serviceName){var instance=Object.create((isArray(Type)?Type[Type.length-1]:Type).prototype||null),returnedValue=invoke(Type,instance,locals,serviceName);return isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}strictDi=strictDi===!0;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap([],!0),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){throw angular.isString(caller)&&path.push(caller),$injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,undefined,serviceName)});return forEach(loadModules(modulesToLoad),function(fn){fn&&instanceInjector.invoke(fn)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return Array.prototype.some.call(list,function(element){return"a"===nodeName_(element)?(result=element,!0):void 0}),result}function getYOffset(){var offset=scroll.yOffset;if(isFunction(offset))offset=offset();else if(isElement(offset)){var elem=offset[0],style=$window.getComputedStyle(elem);offset="fixed"!==style.position?0:elem.getBoundingClientRect().bottom}else isNumber(offset)||(offset=0);return offset}function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=getYOffset();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else $window.scrollTo(0,0)}function scroll(hash){hash=isString(hash)?hash:$location.hash();var elm;hash?(elm=document.getElementById(hash))?scrollTo(elm):(elm=getFirstAnchor(document.getElementsByName(hash)))?scrollTo(elm):"top"===hash&&scrollTo(null):scrollTo(null)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(newVal,oldVal){(newVal!==oldVal||""!==newVal)&&jqLiteDocumentLoaded(function(){$rootScope.$evalAsync(scroll)})}),scroll}]}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function extractElementNode(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE)return elm}}function splitClasses(classes){isString(classes)&&(classes=classes.split(" "));var obj=createMap();return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}function prepareAnimateOptions(options){return isObject(options)?options:{}}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(outstandingRequestCount--,0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function getHash(url){var index=url.indexOf("#");return-1===index?"":url.substr(index)}function cacheStateAndFireUrlChange(){cacheState(),fireUrlChange()}function getCurrentState(){try{return history.state}catch(e){}}function cacheState(){cachedState=getCurrentState(),cachedState=isUndefined(cachedState)?null:cachedState,equals(cachedState,lastCachedState)&&(cachedState=lastCachedState),lastCachedState=cachedState}function fireUrlChange(){(lastBrowserUrl!==self.url()||lastHistoryState!==cachedState)&&(lastBrowserUrl=self.url(),lastHistoryState=cachedState,forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)}))}var self=this,location=(document[0],window.location),history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),reloadLocation=null;cacheState(),lastHistoryState=cachedState,self.url=function(url,replace,state){if(isUndefined(state)&&(state=null),location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState))return self;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,lastHistoryState=state,!$sniffer.history||sameBase&&sameState?((!sameBase||reloadLocation)&&(reloadLocation=url),replace?location.replace(url):sameBase?location.hash=getHash(url):location.href=url):(history[replace?"replaceState":"pushState"](state,"",url),cacheState(),lastHistoryState=cachedState),self}return reloadLocation||location.href.replace(/%27/g,"'")},self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1,lastCachedState=null;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",cacheStateAndFireUrlChange),jqLite(window).on("hashchange",cacheStateAndFireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$applicationDestroyed=function(){jqLite(window).off("hashchange popstate",cacheStateAndFireUrlChange)},self.$$checkUrlChange=fireUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return pendingDeferIds[deferId]?(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0):!1}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=options&&options.capacity||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(!isUndefined(value)){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry)}return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value}},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}delete data[key],size--},removeAll:function(){data={},size=0,lruHash={},freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function $CompileProvider($provide,$$sanitizeUriProvider){function parseIsolateBindings(scope,directiveName,isController){var LOCAL_REGEXP=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,bindings={};return forEach(scope,function(definition,scopeName){var match=definition.match(LOCAL_REGEXP);if(!match)throw $compileMinErr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition,isController?"controller bindings definition":"isolate scope definition");bindings[scopeName]={mode:match[1][0],collection:"*"===match[2],optional:"?"===match[3],attrName:match[4]||scopeName}}),bindings}function parseDirectiveBindings(directive,directiveName){var bindings={isolateScope:null,bindToController:null};if(isObject(directive.scope)&&(directive.bindToController===!0?(bindings.bindToController=parseIsolateBindings(directive.scope,directiveName,!0),bindings.isolateScope={}):bindings.isolateScope=parseIsolateBindings(directive.scope,directiveName,!1)),isObject(directive.bindToController)&&(bindings.bindToController=parseIsolateBindings(directive.bindToController,directiveName,!0)),isObject(bindings.bindToController)){var controller=directive.controller,controllerAs=directive.controllerAs;if(!controller)throw $compileMinErr("noctrl","Cannot bind to controller without directive '{0}'s controller.",directiveName);if(!identifierForController(controller,controllerAs))throw $compileMinErr("noident","Cannot bind to controller without identifier for directive '{0}'.",directiveName)}return bindings}function assertValidDirectiveName(name){var letter=name.charAt(0);if(!letter||letter!==lowercase(letter))throw $compileMinErr("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",name);if(name!==name.trim())throw $compileMinErr("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",name)}var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w\-]+)(?:\:([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertValidDirectiveName(name),assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"EA";var bindings=directive.$$bindings=parseDirectiveBindings(directive,directive.name);isObject(bindings.isolateScope)&&(directive.$$isolateBindings=bindings.isolateScope),directive.$$moduleName=directiveFactory.$$moduleName,directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$document,$sce,$animate,$$sanitizeUri){function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes)),forEach($compileNodes,function(node,index){node.nodeType==NODE_TYPE_TEXT&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function(scope,cloneConnectFn,options){assertArg(scope,"scope"),options=options||{};var parentBoundTranscludeFn=options.parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude&&(parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude),namespace||(namespace=detectNamespaceForChildElements(futureParentElement));var $linkNode;if($linkNode="html"!==namespace?jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html())):cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),$linkNode}}function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];return node&&"foreignobject"!==nodeName_(node)&&node.toString().match(/SVG/)?"svg":"html"}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)idx=linkFns[i],stableNodeList[idx]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;ii>i;)if(node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn){if(nodeLinkFn.scope){childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope);var destroyBindings=nodeLinkFn.$$destroyBindings;destroyBindings&&(nodeLinkFn.$$destroyBindings=null,childScope.$on("$destroyed",destroyBindings))}else childScope=scope;childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn,nodeLinkFn)}else childLinkFn&&childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn)}for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,nodeLinkFn&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){var boundTranscludeFn=function(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){return transcludedScope||(transcludedScope=scope.$new(!1,containingScope),transcludedScope.$$transcluded=!0),transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})};return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case NODE_TYPE_ELEMENT:addDirective(directives,directiveNormalize(nodeName_(node)),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;jj>j;j++){var attrStartName=!1,attrEndName=!1;attr=nAttrs[j],name=attr.name,value=trim(attr.value),ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=name.replace(PREFIX_REGEXP,"").substr(8).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()}));var directiveNName=ngAttrName.replace(/(Start|End)$/,"");directiveIsMultiElement(directiveNName)&&ngAttrName===directiveNName+"Start"&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,(isNgAttr||!attrs.hasOwnProperty(nName))&&(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}if(className=node.className,isObject(className)&&(className=className.animVal),isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case NODE_TYPE_TEXT:if(11===msie)for(;node.parentNode&&node.nextSibling&&node.nextSibling.nodeType===NODE_TYPE_TEXT;)node.nodeValue=node.nodeValue+node.nextSibling.nodeValue,node.parentNode.removeChild(node.nextSibling);addTextInterpolateDirective(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),match&&(nName=directiveNormalize(match[1]),addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2])))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);node.nodeType==NODE_TYPE_ELEMENT&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function getControllers(directiveName,require,$element,elementControllers){var value;if(isString(require)){var match=require.match(REQUIRE_PREFIX_REGEXP),name=require.substring(match[0].length),inheritType=match[1]||match[3],optional="?"===match[2];if("^^"===inheritType?$element=$element.parent():(value=elementControllers&&elementControllers[name],value=value&&value.instance),!value){var dataName="$"+name+"Controller";value=inheritType?$element.inheritedData(dataName):$element.data(dataName)}if(!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",name,directiveName)}else if(isArray(require)){value=[];for(var i=0,ii=require.length;ii>i;i++)value[i]=getControllers(directiveName,require[i],$element,elementControllers)}return value||null}function setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope){var elementControllers=createMap();for(var controllerKey in controllerDirectives){var directive=controllerDirectives[controllerKey],locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn},controller=directive.controller;"@"==controller&&(controller=attrs[directive.name]);var controllerInstance=$controller(controller,locals,!0,directive.controllerAs);elementControllers[directive.name]=controllerInstance,hasElementTranscludeDirective||$element.data("$"+directive.name+"Controller",controllerInstance.instance)}return elementControllers}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn,thisLinkFn){function controllersBoundTransclude(scope,cloneAttachFn,futureParentElement){var transcludeControllers;return isScope(scope)||(futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=undefined),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element),boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild)}var i,ii,linkFn,controller,isolateScope,elementControllers,transcludeFn,$element,attrs;if(compileNode===linkNode?(attrs=templateAttrs,$element=templateAttrs.$$element):($element=jqLite(linkNode),attrs=new Attributes($element,templateAttrs)),newIsolateScopeDirective&&(isolateScope=scope.$new(!0)),boundTranscludeFn&&(transcludeFn=controllersBoundTransclude,transcludeFn.$$boundTransclude=boundTranscludeFn),controllerDirectives&&(elementControllers=setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope)),newIsolateScopeDirective&&(compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0),isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,initializeDirectiveBindings(scope,attrs,isolateScope,isolateScope.$$isolateBindings,newIsolateScopeDirective,isolateScope)),elementControllers){var bindings,controllerForBindings,scopeDirective=newIsolateScopeDirective||newScopeDirective;scopeDirective&&elementControllers[scopeDirective.name]&&(bindings=scopeDirective.$$bindings.bindToController,controller=elementControllers[scopeDirective.name],controller&&controller.identifier&&bindings&&(controllerForBindings=controller,thisLinkFn.$$destroyBindings=initializeDirectiveBindings(scope,attrs,controller.instance,bindings,scopeDirective)));for(i in elementControllers){controller=elementControllers[i];var controllerResult=controller();controllerResult!==controller.instance&&(controller.instance=controllerResult,$element.data("$"+i+"Controller",controllerResult),controller===controllerForBindings&&(thisLinkFn.$$destroyBindings(),thisLinkFn.$$destroyBindings=initializeDirectiveBindings(scope,attrs,controllerResult,bindings,scopeDirective)));
}}for(i=0,ii=preLinkFns.length;ii>i;i++)linkFn=preLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)linkFn=postLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}previousCompileContext=previousCompileContext||{};for(var directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,newScopeDirective=previousCompileContext.newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,i=0,ii=directives.length;ii>i;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||createMap(),assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),(directiveValue=directive.transclude)&&(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue?(hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" ")),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),childTranscludeFn=compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})):($template=jqLite(jqLiteClone(compileNode)).contents(),$compileNode.empty(),childTranscludeFn=compile($template,transcludeFn))),directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));newIsolateScopeDirective&&markDirectivesAsIsolate(templateDirectives),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newScopeDirective:newScopeDirective!==directive&&newScopeDirective,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn),isFunction(linkFn)?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn}function markDirectivesAsIsolate(directives){for(var j=0,jj=directives.length;jj>j;j++)directives[j]=inherit(directives[j],{$$isolateScope:!0})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)try{directive=directives[i],(maxPriority===undefined||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)&&(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),tDirectives.push(directive),match=directive)}catch(e){$exceptionHandler(e)}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)if(directive=directives[i],directive.multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&src[key]!==value&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst["class"]=(dst["class"]?dst["class"]+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest(templateUrl).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:removeComments(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectivesAsIsolate(templateDirectives),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(!scope.$$destroyed){if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn,afterTemplateNodeLinkFn)}}linkQueue=null}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;scope.$$destroyed||(linkQueue?linkQueue.push(scope,node,rootElement,childBoundTranscludeFn):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn,afterTemplateNodeLinkFn)))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){function wrapModuleNameIfDefined(moduleName){return moduleName?" (module: "+moduleName+")":""}if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",previousDirective.name,wrapModuleNameIfDefined(previousDirective.$$moduleName),directive.name,wrapModuleNameIfDefined(directive.$$moduleName),what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"form"==tag&&"action"==attrNormalizedName||"img"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name,allOrNothing){var trustedContext=getTrustedContext(node,name);allOrNothing=ALL_OR_NOTHING_ATTRS[name]||allOrNothing;var interpolateFn=$interpolate(value,!0,trustedContext,allOrNothing);if(interpolateFn){if("multiple"===name&&"select"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers={});if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var newValue=attr[name];newValue!==value&&(interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing),value=newValue),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;ii>i;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;jj>j;j++,j2++)jj>j2?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove),jqLite.hasData(firstElementToRemove)&&(jqLite(newNode).data(jqLite(firstElementToRemove).data()),jQuery?(skipDestroyOnNextJQueryCleanData=!0,jQuery.cleanData([firstElementToRemove])):delete jqLite.cache[firstElementToRemove[jqLite.expando]]);for(var k=1,kk=elementsToRemove.length;kk>k;k++){var element=elementsToRemove[k];jqLite(element).remove(),fragment.appendChild(element),delete elementsToRemove[k]}elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}function initializeDirectiveBindings(scope,attrs,destination,bindings,directive,newScope){var onNewScopeDestroyed;forEach(bindings,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,attrName=definition.attrName,optional=definition.optional,mode=definition.mode;switch(hasOwnProperty.call(attrs,attrName)||(attrs[attrName]=undefined),mode){case"@":attrs[attrName]||optional||(destination[scopeName]=undefined),attrs.$observe(attrName,function(value){destination[scopeName]=value}),attrs.$$observers[attrName].$$scope=scope,attrs[attrName]&&(destination[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(optional&&!attrs[attrName])return;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b||a!==a&&b!==b},parentSet=parentGet.assign||function(){throw lastValue=destination[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],directive.name)},lastValue=destination[scopeName]=parentGet(scope);var parentValueWatch=function(parentValue){return compare(parentValue,destination[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=destination[scopeName]):destination[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0;var unwatch;unwatch=definition.collection?scope.$watchCollection(attrs[attrName],parentValueWatch):scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal),onNewScopeDestroyed=onNewScopeDestroyed||[],onNewScopeDestroyed.push(unwatch);break;case"&":if(parentGet=$parse(attrs[attrName]),parentGet===noop&&optional)break;destination[scopeName]=function(locals){return parentGet(scope,locals)}}});var destroyBindings=onNewScopeDestroyed?function(){for(var i=0,ii=onNewScopeDestroyed.length;ii>i;++i)onNewScopeDestroyed[i]()}:noop;return newScope&&destroyBindings!==noop?(newScope.$on("$destroy",destroyBindings),noop):destroyBindings}var Attributes=function(element,attributesToCopy){if(attributesToCopy){var i,l,key,keys=Object.keys(attributesToCopy);for(i=0,l=keys.length;l>i;i++)key=keys[i],this[key]=attributesToCopy[key]}else this.$attr={};this.$$element=element};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,node=this.$$element[0],booleanKey=getBooleanAttrName(node,key),aliasedKey=getAliasedAttrName(node,key),observer=key;if(booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key],attrName||(this.$attr[key]=attrName=snake_case(key,"-"))),nodeName=nodeName_(this.$$element),"a"===nodeName&&"href"===key||"img"===nodeName&&"src"===key)this[key]=value=$$sanitizeUri(value,"src"===key);else if("img"===nodeName&&"srcset"===key){for(var result="",trimmedSrcset=trim(value),srcPattern=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,pattern=/\s/.test(trimmedSrcset)?srcPattern:/(,)/,rawUris=trimmedSrcset.split(pattern),nbrUrisWith2parts=Math.floor(rawUris.length/2),i=0;nbrUrisWith2parts>i;i++){var innerIdx=2*i;result+=$$sanitizeUri(trim(rawUris[innerIdx]),!0),result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[2*i]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),!0),2===lastTuple.length&&(result+=" "+trim(lastTuple[1])),this[key]=value=result}writeAttr!==!1&&(null===value||value===undefined?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){!listeners.$$inter&&attrs.hasOwnProperty(key)&&fn(attrs[key])}),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/;return compile.$$addBindingInfo=debugInfoEnabled?function($element,binding){var bindings=$element.data("$binding")||[];isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function removeComments(jqNodes){jqNodes=jqLite(jqNodes);var i=jqNodes.length;if(1>=i)return jqNodes;for(;i--;){var node=jqNodes[i];node.nodeType===NODE_TYPE_COMMENT&&splice.call(jqNodes,i,1)}return jqNodes}function identifierForController(controller,ident){if(ident&&isString(ident))return ident;if(isString(controller)){var match=CNTRL_REG.exec(controller);if(match)return match[3]}}function $ControllerProvider(){var controllers={},globals=!1;this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.allowGlobals=function(){globals=!0},this.$get=["$injector","$window",function($injector,$window){function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}return function(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=later===!0,ident&&isString(ident)&&(identifier=ident),isString(expression)){if(match=expression.match(CNTRL_REG),!match)throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",expression);constructor=match[1],identifier=identifier||match[3],expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||(globals?getter($window,constructor,!0):undefined),assertArgFn(expression,constructor,!0)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;instance=Object.create(controllerPrototype||null),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name);var instantiate;return instantiate=extend(function(){var result=$injector.invoke(expression,instance,locals,constructor);return result!==instance&&(isObject(result)||isFunction(result))&&(instance=result,identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name)),instance},{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}function serializeValue(v){return isObject(v)?isDate(v)?v.toISOString():toJson(v):v}function $HttpParamSerializerProvider(){this.$get=function(){return function(params){if(!params)return"";var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)?forEach(value,function(v,k){parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(v)))}):parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(value))))}),parts.join("&")}}}function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function(params){function serialize(toSerialize,prefix,topLevel){null===toSerialize||isUndefined(toSerialize)||(isArray(toSerialize)?forEach(toSerialize,function(value){serialize(value,prefix+"[]")}):isObject(toSerialize)&&!isDate(toSerialize)?forEachSorted(toSerialize,function(value,key){serialize(value,prefix+(topLevel?"":"[")+key+(topLevel?"":"]"))}):parts.push(encodeUriQuery(prefix)+"="+encodeUriQuery(serializeValue(toSerialize))))}if(!params)return"";var parts=[];return serialize(params,"",!0),parts.join("&")}}}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type");(contentType&&0===contentType.indexOf(APPLICATION_JSON)||isJsonLike(tempData))&&(data=fromJson(tempData))}}return data}function isJsonLike(str){var jsonStart=str.match(JSON_START);return jsonStart&&JSON_ENDS[jsonStart[0]].test(str)}function parseHeaders(headers){function fillInParsed(key,val){key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}var i,parsed=createMap();return isString(headers)?forEach(headers.split("\n"),function(line){i=line.indexOf(":"),fillInParsed(lowercase(trim(line.substr(0,i))),trim(line.substr(i+1)))}):isObject(headers)&&forEach(headers,function(headerVal,headerKey){fillInParsed(lowercase(headerKey),trim(headerVal))}),parsed}function headersGetter(headers){var headersObj;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}function transformData(data,headers,status,fns){return isFunction(fns)?fns(data,headers,status):(forEach(fns,function(fn){data=fn(data,headers,status)}),data)}function isSuccess(status){return status>=200&&300>status}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)||isFormData(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var interceptorFactories=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$$cookieReader,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response);return response.data?resp.data=transformData(response.data,response.headers,response.status,config.transformResponse):resp.data=response.data,isSuccess(response.status)?resp:$q.reject(resp)}function executeHeaderFns(headers,config){var headerContent,processedHeaders={};return forEach(headers,function(headerFn,header){isFunction(headerFn)?(headerContent=headerFn(config),null!=headerContent&&(processedHeaders[header]=headerContent)):processedHeaders[header]=headerFn}),processedHeaders}function mergeHeaders(config){var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return executeHeaderFns(reqHeaders,shallowCopy(config))}if(!angular.isObject(requestConfig))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig);var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse,paramSerializer:defaults.paramSerializer},requestConfig);config.headers=mergeHeaders(requestConfig),config.method=uppercase(config.method),config.paramSerializer=isString(config.paramSerializer)?$injector.get(config.paramSerializer):config.paramSerializer;var serverRequest=function(config){var headers=config.headers,reqData=transformData(config.data,headersGetter(headers),undefined,config.transformRequest);return isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData).then(transformResponse,transformResponse)},chain=[serverRequest,undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return promise.success=function(fn){return assertArgFn(fn,"fn"),promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return assertArgFn(fn,"fn"),promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise},promise}function createShortMethods(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend({},config||{},{method:name,url:url}))}})}function createShortMethodsWithData(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend({},config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData){function done(status,response,headersString,statusText){function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText)}cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())}function resolvePromise(response,status,headers,statusText){status=Math.max(status,0),(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,reqHeaders=config.headers,url=buildUrl(config.url,config.paramSerializer(config.params));if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||config.cache===!1||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache&&(cachedResp=cache.get(url),isDefined(cachedResp)?isPromiseLike(cachedResp)?cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult):isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK"):cache.put(url,promise)),isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$$cookieReader()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType)}return promise}function buildUrl(url,serializedParams){return serializedParams.length>0&&(url+=(-1==url.indexOf("?")?"?":"&")+serializedParams),url}var defaultCache=$cacheFactory("$http");defaults.paramSerializer=isString(defaults.paramSerializer)?$injector.get(defaults.paramSerializer):defaults.paramSerializer;
var reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put","patch"),$http.defaults=defaults,$http}]}function createXhr(){return new window.XMLHttpRequest}function $HttpBackendProvider(){this.$get=["$browser","$window","$document",function($browser,$window,$document){return createHttpBackend($browser,createXhr,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,callbackId,done){var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){removeEventListenerFn(script,"load",callback),removeEventListenerFn(script,"error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks[callbackId].called||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},addEventListenerFn(script,"load",callback),addEventListenerFn(script,"error",callback),rawDocument.body.appendChild(script),callback}return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){timeoutId!==undefined&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data,callbacks[callbackId].called=!0};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),callbackId,function(status,text){completeRequest(callback,status,callbacks[callbackId].data,"",text),callbacks[callbackId]=noop})}else{var xhr=createXhr();xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onload=function(){var statusText=xhr.statusText||"",response="response"in xhr?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:"file"==urlResolve(url).protocol?404:0),completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText)};var requestError=function(){completeRequest(callback,-1,null,null,"")};if(xhr.onerror=requestError,xhr.onabort=requestError,withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(post)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function escape(ch){return"\\\\\\"+ch}function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function stringify(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=toJson(value)}return value}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){function parseStringifyInterceptor(value){try{return value=getValue(value),allOrNothing&&!isDefined(value)?value:stringify(value)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}}allOrNothing=!!allOrNothing;for(var startIndex,endIndex,exp,index=0,expressions=[],parseFns=[],textLength=text.length,concat=[],expressionPositions=[];textLength>index;){if(-1==(startIndex=text.indexOf(startSymbol,index))||-1==(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),parseFns.push($parse(exp,parseStringifyInterceptor)),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}if(trustedContext&&concat.length>1&&$interpolateMinErr.throwNoconcat(text),!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;ii>i;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")},getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)};return extend(function(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;ii>i;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener){var lastValue;return scope.$watchGroup(parseFns,function(values,oldValues){var currValue=compute(values);isFunction(listener)&&listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue})}})}}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q",function($rootScope,$window,$q,$$q){function interval(fn,delay,count,invokeApply){var hasParams=arguments.length>4,args=hasParams?sliceArgs(arguments,4):[],setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=isDefined(count)?count:0,promise.then(null,null,hasParams?function(){fn.apply(null,args)}:fn),promise.$$intervalId=setInterval(function(){deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return promise&&promise.$$intervalId in intervals?(intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0):!1},interval}]}function $LocaleProvider(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(num){return 1===num?"one":"other"}}}}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=toInt(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){return 0===whole.indexOf(begin)?whole.substr(begin.length):void 0}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"";var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var appUrl,prevAppUrl,rewrittenUrl;return(appUrl=beginsWith(appBase,url))!==undefined?(prevAppUrl=appUrl,rewrittenUrl=(appUrl=beginsWith(basePrefix,appUrl))!==undefined?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl):(appUrl=beginsWith(appBaseNoFile,url))!==undefined?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile==url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl}}function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this),this.$$parse=function(url){function removeWindowsDriveName(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;return 0===url.indexOf(base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}var withoutHashUrl,withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url);isUndefined(withoutBaseUrl)||"#"!==withoutBaseUrl.charAt(0)?this.$$html5?withoutHashUrl=withoutBaseUrl:(withoutHashUrl="",isUndefined(withoutBaseUrl)&&(appBase=url,this.replace())):(withoutHashUrl=beginsWith(hashPrefix,withoutBaseUrl),isUndefined(withoutHashUrl)&&(withoutHashUrl=withoutBaseUrl)),parseAppUrl(withoutHashUrl,this),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$parseLinkUrl=function(url,relHref){return stripHash(appBase)==stripHash(url)?(this.$$parse(url),!0):!1}}function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var rewrittenUrl,appUrl;return appBase==stripHash(url)?rewrittenUrl=url:(appUrl=beginsWith(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isBoolean(mode)?(html5Mode.enabled=mode,this):isObject(mode)?(isBoolean(mode.enabled)&&(html5Mode.enabled=mode.enabled),isBoolean(mode.requireBase)&&(html5Mode.requireBase=mode.requireBase),isBoolean(mode.rewriteLinks)&&(html5Mode.rewriteLinks=mode.rewriteLinks),this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url(),oldState=$location.$$state;try{$browser.url(url,replace,state),$location.$$state=$browser.state()}catch(e){throw $location.url(oldUrl),$location.$$state=oldState,e}}function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;$location=new LocationMode(appBase,"#"+hashPrefix),$location.$$parseLinkUrl(initialUrl,initialUrl),$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;$rootElement.on("click",function(event){if(html5Mode.rewriteLinks&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&2!=event.which&&2!=event.button){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!=$browser.url()&&($rootScope.$apply(),$window.angular["ff-684208-preventDefault"]=!0))}}),trimEmptyHash($location.absUrl())!=trimEmptyHash(initialUrl)&&$browser.url($location.absUrl(),!0);var initializing=!0;return $browser.onUrlChange(function(newUrl,newState){$rootScope.$evalAsync(function(){var defaultPrevented,oldUrl=$location.absUrl(),oldState=$location.$$state;$location.$$parse(newUrl),$location.$$state=newState,defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented,$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState,setBrowserUrlWithFallback(oldUrl,!1,oldState)):(initializing=!1,afterLocationChange(oldUrl,oldState)))}),$rootScope.$$phase||$rootScope.$digest()}),$rootScope.$watch(function(){var oldUrl=trimEmptyHash($browser.url()),newUrl=trimEmptyHash($location.absUrl()),oldState=$browser.state(),currentReplace=$location.$$replace,urlOrStateChanged=oldUrl!==newUrl||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;(initializing||urlOrStateChanged)&&(initializing=!1,$rootScope.$evalAsync(function(){var newUrl=$location.absUrl(),defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState):(urlOrStateChanged&&setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state),afterLocationChange(oldUrl,oldState)))})),$location.$$replace=!1}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("__defineGetter__"===name||"__defineSetter__"===name||"__lookupGetter__"===name||"__lookupSetter__"===name||"__proto__"===name)throw $parseMinErr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",fullExpression);return name}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.window===obj)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===Object)throw $parseMinErr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===CALL||obj===APPLY||obj===BIND)throw $parseMinErr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",fullExpression)}}function ifDefined(v,d){return"undefined"!=typeof v?v:d}function plusFn(l,r){return"undefined"==typeof l?r:"undefined"==typeof r?l:l+r}function isStateless($filter,filterName){var fn=$filter(filterName);return!fn.$stateful}function findConstantAndWatchExpressions(ast,$filter){var allConstants,argsToWatch;switch(ast.type){case AST.Program:allConstants=!0,forEach(ast.body,function(expr){findConstantAndWatchExpressions(expr.expression,$filter),allConstants=allConstants&&expr.expression.constant}),ast.constant=allConstants;break;case AST.Literal:ast.constant=!0,ast.toWatch=[];break;case AST.UnaryExpression:findConstantAndWatchExpressions(ast.argument,$filter),ast.constant=ast.argument.constant,ast.toWatch=ast.argument.toWatch;break;case AST.BinaryExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.left.toWatch.concat(ast.right.toWatch);break;case AST.LogicalExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.ConditionalExpression:findConstantAndWatchExpressions(ast.test,$filter),findConstantAndWatchExpressions(ast.alternate,$filter),findConstantAndWatchExpressions(ast.consequent,$filter),ast.constant=ast.test.constant&&ast.alternate.constant&&ast.consequent.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.Identifier:ast.constant=!1,ast.toWatch=[ast];break;case AST.MemberExpression:findConstantAndWatchExpressions(ast.object,$filter),ast.computed&&findConstantAndWatchExpressions(ast.property,$filter),ast.constant=ast.object.constant&&(!ast.computed||ast.property.constant),ast.toWatch=[ast];break;case AST.CallExpression:allConstants=ast.filter?isStateless($filter,ast.callee.name):!1,argsToWatch=[],forEach(ast.arguments,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=ast.filter&&isStateless($filter,ast.callee.name)?argsToWatch:[ast];break;case AST.AssignmentExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=[ast];break;case AST.ArrayExpression:allConstants=!0,argsToWatch=[],forEach(ast.elements,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ObjectExpression:allConstants=!0,argsToWatch=[],forEach(ast.properties,function(property){findConstantAndWatchExpressions(property.value,$filter),allConstants=allConstants&&property.value.constant,property.value.constant||argsToWatch.push.apply(argsToWatch,property.value.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ThisExpression:ast.constant=!1,ast.toWatch=[]}}function getInputs(body){if(1==body.length){var lastExpression=body[0].expression,candidate=lastExpression.toWatch;return 1!==candidate.length?candidate:candidate[0]!==lastExpression?candidate:undefined}}function isAssignable(ast){return ast.type===AST.Identifier||ast.type===AST.MemberExpression}function assignableAST(ast){return 1===ast.body.length&&isAssignable(ast.body[0].expression)?{type:AST.AssignmentExpression,left:ast.body[0].expression,right:{type:AST.NGValueParameter},operator:"="}:void 0}function isLiteral(ast){return 0===ast.body.length||1===ast.body.length&&(ast.body[0].expression.type===AST.Literal||ast.body[0].expression.type===AST.ArrayExpression||ast.body[0].expression.type===AST.ObjectExpression)}function isConstant(ast){return ast.constant}function ASTCompiler(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}function ASTInterpreter(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}function setter(obj,path,setValue,fullExp){ensureSafeObject(obj,fullExp);for(var key,element=path.split("."),i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=ensureSafeObject(obj[key],fullExp);propertyObj||(propertyObj={},obj[key]=propertyObj),obj=propertyObj}return key=ensureSafeMemberName(element.shift(),fullExp),ensureSafeObject(obj[key],fullExp),obj[key]=setValue,setValue}function isPossiblyDangerousMemberName(name){return"constructor"==name}function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var cacheDefault=createMap(),cacheExpensive=createMap();this.$get=["$filter","$sniffer",function($filter,$sniffer){function expressionInputDirtyCheck(newValue,oldValueOfValue){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:"object"==typeof newValue&&(newValue=getValueOf(newValue),"object"==typeof newValue)?!1:newValue===oldValueOfValue||newValue!==newValue&&oldValueOfValue!==oldValueOfValue}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var lastResult,inputExpressions=parsedExpression.inputs;if(1===inputExpressions.length){var oldInputValueOf=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch(function(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValueOf)||(lastResult=parsedExpression(scope,undefined,undefined,[newInputValue]),oldInputValueOf=newInputValue&&getValueOf(newInputValue)),lastResult},listener,objectEquality,prettyPrintExpression)}for(var oldInputValueOfValues=[],oldInputValues=[],i=0,ii=inputExpressions.length;ii>i;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck,oldInputValues[i]=null;return scope.$watch(function(scope){for(var changed=!1,i=0,ii=inputExpressions.length;ii>i;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i])))&&(oldInputValues[i]=newInputValue,oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue))}return changed&&(lastResult=parsedExpression(scope,undefined,undefined,oldInputValues)),lastResult},listener,objectEquality,prettyPrintExpression)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.apply(this,arguments),isDefined(value)&&scope.$$postDigest(function(){isDefined(lastValue)&&unwatch()})},objectEquality)}function oneTimeLiteralWatchDelegate(scope,listener,objectEquality,parsedExpression){function isAllDefined(value){var allDefined=!0;return forEach(value,function(val){isDefined(val)||(allDefined=!1)}),allDefined}var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.call(this,value,old,scope),isAllDefined(value)&&scope.$$postDigest(function(){isAllDefined(lastValue)&&unwatch()})},objectEquality)}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){isFunction(listener)&&listener.apply(this,arguments),unwatch()},objectEquality)}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate,regularWatch=watchDelegate!==oneTimeLiteralWatchDelegate&&watchDelegate!==oneTimeWatchDelegate,fn=regularWatch?function(scope,locals,assign,inputs){var value=parsedExpression(scope,locals,assign,inputs);return interceptorFn(value,scope,locals)}:function(scope,locals,assign,inputs){var value=parsedExpression(scope,locals,assign,inputs),result=interceptorFn(value,scope,locals);return isDefined(value)?result:value};return parsedExpression.$$watchDelegate&&parsedExpression.$$watchDelegate!==inputsWatchDelegate?fn.$$watchDelegate=parsedExpression.$$watchDelegate:interceptorFn.$stateful||(fn.$$watchDelegate=inputsWatchDelegate,fn.inputs=parsedExpression.inputs?parsedExpression.inputs:[parsedExpression]),fn}var $parseOptions={csp:$sniffer.csp,expensiveChecks:!1},$parseOptionsExpensive={csp:$sniffer.csp,expensiveChecks:!0};return function(exp,interceptorFn,expensiveChecks){var parsedExpression,oneTime,cacheKey;switch(typeof exp){case"string":exp=exp.trim(),cacheKey=exp;var cache=expensiveChecks?cacheExpensive:cacheDefault;if(parsedExpression=cache[cacheKey],!parsedExpression){":"===exp.charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2));var parseOptions=expensiveChecks?$parseOptionsExpensive:$parseOptions,lexer=new Lexer(parseOptions),parser=new Parser(lexer,$filter,parseOptions);parsedExpression=parser.parse(exp),parsedExpression.constant?parsedExpression.$$watchDelegate=constantWatchDelegate:oneTime?parsedExpression.$$watchDelegate=parsedExpression.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate:parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),cache[cacheKey]=parsedExpression}return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return noop}}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function $$QProvider(){this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function callOnce(self,resolveFn,rejectFn){function wrap(fn){return function(value){called||(called=!0,fn.call(self,value))}}var called=!1;return[wrap(resolveFn),wrap(rejectFn)]}function Promise(){this.$$state={status:0}}function simpleBind(context,fn){return function(value){fn.call(context,value)}}function processQueue(state){var fn,deferred,pending;pending=state.pending,state.processScheduled=!1,state.pending=undefined;for(var i=0,ii=pending.length;ii>i;++i){deferred=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?deferred.resolve(fn(state.value)):1===state.status?deferred.resolve(state.value):deferred.reject(state.value)}catch(e){deferred.reject(e),exceptionHandler(e)}}}function scheduleProcessQueue(state){!state.processScheduled&&state.pending&&(state.processScheduled=!0,nextTick(function(){processQueue(state)}))}function Deferred(){this.promise=new Promise,this.resolve=simpleBind(this,this.resolve),this.reject=simpleBind(this,this.reject),this.notify=simpleBind(this,this.notify)}function all(promises){var deferred=new Deferred,counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,when(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise}var $qMinErr=minErr("$q",TypeError),defer=function(){return new Deferred};Promise.prototype={then:function(onFulfilled,onRejected,progressBack){var result=new Deferred;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),result.promise},catch:function(callback){return this.then(null,callback)},finally:function(callback,progressBack){return this.then(function(value){return handleCallback(value,!0,callback)},function(error){return handleCallback(error,!1,callback)},progressBack)}},Deferred.prototype={resolve:function(val){this.promise.$$state.status||(val===this.promise?this.$$reject($qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):this.$$resolve(val))},$$resolve:function(val){var then,fns;fns=callOnce(this,this.$$resolve,this.$$reject);try{(isObject(val)||isFunction(val))&&(then=val&&val.then),isFunction(then)?(this.promise.$$state.status=-1,then.call(val,fns[0],fns[1],this.notify)):(this.promise.$$state.value=val,this.promise.$$state.status=1,scheduleProcessQueue(this.promise.$$state))}catch(e){fns[1](e),exceptionHandler(e)}},reject:function(reason){this.promise.$$state.status||this.$$reject(reason)},$$reject:function(reason){this.promise.$$state.value=reason,this.promise.$$state.status=2,scheduleProcessQueue(this.promise.$$state)},notify:function(progress){var callbacks=this.promise.$$state.pending;this.promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick(function(){for(var callback,result,i=0,ii=callbacks.length;ii>i;i++){result=callbacks[i][0],callback=callbacks[i][3];try{result.notify(isFunction(callback)?callback(progress):progress)}catch(e){
exceptionHandler(e)}}})}};var reject=function(reason){var result=new Deferred;return result.reject(reason),result.promise},makePromise=function(value,resolved){var result=new Deferred;return resolved?result.resolve(value):result.reject(value),result.promise},handleCallback=function(value,isResolved,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return makePromise(e,!1)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)},when=function(value,callback,errback,progressBack){var result=new Deferred;return result.resolve(value),result.promise.then(callback,errback,progressBack)},resolve=when,$Q=function Q(resolver){function resolveFn(value){deferred.resolve(value)}function rejectFn(reason){deferred.reject(reason)}if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);if(!(this instanceof Q))return new Q(resolver);var deferred=new Deferred;return resolver(resolveFn,rejectFn),deferred.promise};return $Q.defer=defer,$Q.reject=reject,$Q.when=when,$Q.resolve=resolve,$Q.all=all,$Q}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){function flush(){for(var i=0;i<taskQueue.length;i++){var task=taskQueue[i];task&&(taskQueue[i]=null,task())}taskCount=taskQueue.length=0}function queueFn(asyncFn){var index=taskQueue.length;return taskCount++,taskQueue.push(asyncFn),0===index&&(cancelLastRAF=rafFn(flush)),function(){index>=0&&(taskQueue[index]=null,index=null,0===--taskCount&&cancelLastRAF&&(cancelLastRAF(),cancelLastRAF=null,taskQueue.length=0))}}var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,rafFn=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};queueFn.supported=rafSupported;var cancelLastRAF,taskCount=0,taskQueue=[];return queueFn}]}function $RootScopeProvider(){function createChildScopeClass(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=nextUid(),this.$$ChildScope=null}return ChildScope.prototype=parent,ChildScope}var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=!0}function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function incrementWatchersCount(current,count){do current.$$watchersCount+=count;while(current=current.$parent)}function decrementListenerCount(current,count,name){do current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name];while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){for(;applyAsyncQueue.length;)try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}function scheduleApplyAsync(){null===applyAsyncId&&(applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)}))}Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;return parent=parent||this,isolate?(child=new Scope,child.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=createChildScopeClass(this)),child=new this.$$ChildScope),child.$parent=parent,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child,(isolate||parent!=this)&&child.$on("$destroy",destroyChildScope),child},$watch:function(watchExp,listener,objectEquality,prettyPrintExpression){var get=$parse(watchExp);if(get.$$watchDelegate)return get.$$watchDelegate(this,listener,objectEquality,get,watchExp);var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:prettyPrintExpression||watchExp,eq:!!objectEquality};return lastDirtyWatch=null,isFunction(listener)||(watcher.fn=noop),array||(array=scope.$$watchers=[]),array.unshift(watcher),incrementWatchersCount(this,1),function(){arrayRemove(array,watcher)>=0&&incrementWatchersCount(scope,-1),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){function watchGroupAction(){changeReactionScheduled=!1,firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync(function(){shouldCall&&listener(newValues,newValues,self)}),function(){shouldCall=!1}}return 1===watchExpressions.length?this.$watch(watchExpressions[0],function(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope)}):(forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function(value,oldValue){newValues[i]=value,oldValues[i]=oldValue,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))});deregisterFns.push(unwatchFn)}),function(){for(;deregisterFns.length;)deregisterFns.shift()()})},$watchCollection:function(obj,listener){function $watchCollectionInterceptor(_value){newValue=_value;var newLength,key,bothNaN,newItem,oldItem;if(!isUndefined(newValue)){if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;newLength>i;i++)oldItem=oldValue[i],newItem=newValue[i],bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)newValue.hasOwnProperty(key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?(bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[key]=newItem)):(oldLength++,oldValue[key]=newItem,changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)newValue.hasOwnProperty(key)||(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}}function $watchCollectionAction(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else{veryOldValue={};for(var key in newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key])}else veryOldValue=newValue}$watchCollectionInterceptor.$stateful=!0;var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;return this.$watch(changeDetector,$watchCollectionAction)},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,asyncTask,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{for(dirty=!1,current=target;asyncQueue.length;){try{asyncTask=asyncQueue.shift(),asyncTask.scope.$eval(asyncTask.expression,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if((value=watch.get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,watch.fn(value,last===initWatchVal?value:last,current),5>ttl&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last}))}catch(e){$exceptionHandler(e)}if(!(next=current.$$watchersCount&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,watchLog)}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===$rootScope&&$browser.$$applicationDestroyed(),incrementWatchersCount(this,-this.$$watchersCount);for(var eventName in this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent&&parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent&&parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){$rootScope.$$phase||asyncQueue.length||$browser.defer(function(){asyncQueue.length&&$rootScope.$digest()}),asyncQueue.push({scope:this,expression:expr,locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{return beginPhase("$apply"),this.$eval(expr)}catch(e){$exceptionHandler(e)}finally{clearPhase();try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){function $applyAsyncExpression(){scope.$eval(expr)}var scope=this;expr&&applyAsyncQueue.push($applyAsyncExpression),scheduleApplyAsync()},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++;while(current=current.$parent);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);-1!==indexOfListener&&(namedListeners[indexOfListener]=null,decrementListenerCount(self,1,name))}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;length>i;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event.currentScope=null,event;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name,args){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!target.$$listenerCount[name])return event;for(var listeners,i,length,listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;length>i;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope,asyncQueue=$rootScope.$$asyncQueue=[],postDigestQueue=$rootScope.$$postDigestQueue=[],applyAsyncQueue=$rootScope.$$applyAsyncQueue=[];return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex)?uri:"unsafe:"+normalizedVal}}}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;n>i;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;n>i;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||trustedValue===undefined||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||maybeTrusted===undefined||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&8>msie)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,function(value){return sce.getTrusted(type,value)})};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=toInt((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},vendorRegex=/^(Moz|webkit|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0],vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(bodyStyle.webkitTransition),animations=isString(bodyStyle.webkitAnimation))}return{history:!(!$window.history||!$window.history.pushState||4>android||boxee),hasEvent:function(event){if("input"===event&&11>=msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android}}]}function $TemplateRequestProvider(){this.$get=["$templateCache","$http","$q","$sce",function($templateCache,$http,$q,$sce){function handleRequestFn(tpl,ignoreRequestError){function handleError(resp){if(!ignoreRequestError)throw $compileMinErr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",tpl,resp.status,resp.statusText);return $q.reject(resp)}handleRequestFn.totalPendingRequests++,isString(tpl)&&$templateCache.get(tpl)||(tpl=$sce.getTrustedResourceUrl(tpl));var transformResponse=$http.defaults&&$http.defaults.transformResponse;isArray(transformResponse)?transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform}):transformResponse===defaultHttpResponseTransform&&(transformResponse=null);var httpOptions={cache:$templateCache,transformResponse:transformResponse};return $http.get(tpl,httpOptions)["finally"](function(){handleRequestFn.totalPendingRequests--}).then(function(response){return $templateCache.put(tpl,response.data),response.data},handleError)}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={};return testability.findBindings=function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName("ng-binding"),matches=[];return forEach(bindings,function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,function(bindingName){if(opt_exactMatch){var matcher=new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)");matcher.test(bindingName)&&matches.push(binding)}else-1!=bindingName.indexOf(expression)&&matches.push(binding)})}),matches},testability.findModels=function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var attributeEquals=opt_exactMatch?"=":"*=",selector="["+prefixes[p]+"model"+attributeEquals+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},testability.getLocation=function(){return $location.url()},testability.setLocation=function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},testability.whenStable=function(callback){$browser.notifyWhenNoOutstandingRequests(callback)},testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){function timeout(fn,delay,invokeApply){isFunction(fn)||(invokeApply=delay,delay=fn,fn=noop);var timeoutId,args=sliceArgs(arguments,3),skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn.apply(null,args))}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return promise&&promise.$$timeoutId in deferreds?(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId)):!1},timeout}]}function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $$CookieReader($document){function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}var rawDocument=$document[0]||{},lastCookies={},lastCookieString="";return function(){var cookieArray,cookie,i,index,name,currentCookieString=rawDocument.cookie||"";if(currentCookieString!==lastCookieString)for(lastCookieString=currentCookieString,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],index=cookie.indexOf("="),index>0&&(name=safeDecodeURIComponent(cookie.substring(0,index)),lastCookies[name]===undefined&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))));return lastCookies}}function $$CookieReaderProvider(){this.$get=$$CookieReader}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArrayLike(array)){if(null==array)return array;throw minErr("filter")("notarray","Expected array but received: {0}",array)}var predicateFn,matchAgainstAnyProp,expressionType=getTypeForFilter(expression);switch(expressionType){case"function":predicateFn=expression;break;case"boolean":case"null":case"number":case"string":matchAgainstAnyProp=!0;case"object":predicateFn=createPredicateFn(expression,comparator,matchAgainstAnyProp);break;default:return array}return Array.prototype.filter.call(array,predicateFn)}}function createPredicateFn(expression,comparator,matchAgainstAnyProp){var predicateFn,shouldMatchPrimitives=isObject(expression)&&"$"in expression;return comparator===!0?comparator=equals:isFunction(comparator)||(comparator=function(actual,expected){return isUndefined(actual)?!1:null===actual||null===expected?actual===expected:isObject(expected)||isObject(actual)&&!hasCustomToString(actual)?!1:(actual=lowercase(""+actual),expected=lowercase(""+expected),-1!==actual.indexOf(expected))}),predicateFn=function(item){return shouldMatchPrimitives&&!isObject(item)?deepCompare(item,expression.$,comparator,!1):deepCompare(item,expression,comparator,matchAgainstAnyProp)}}function deepCompare(actual,expected,comparator,matchAgainstAnyProp,dontMatchWholeObject){var actualType=getTypeForFilter(actual),expectedType=getTypeForFilter(expected);if("string"===expectedType&&"!"===expected.charAt(0))return!deepCompare(actual,expected.substring(1),comparator,matchAgainstAnyProp);if(isArray(actual))return actual.some(function(item){return deepCompare(item,expected,comparator,matchAgainstAnyProp)});switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual)if("$"!==key.charAt(0)&&deepCompare(actual[key],expected,comparator,!0))return!0;return dontMatchWholeObject?!1:deepCompare(actual,expected,comparator,!1)}if("object"===expectedType){for(key in expected){var expectedVal=expected[key];if(!isFunction(expectedVal)&&!isUndefined(expectedVal)){var matchAnyProperty="$"===key,actualVal=matchAnyProperty?actual:actual[key];if(!deepCompare(actualVal,expectedVal,comparator,matchAnyProperty,matchAnyProperty))return!1}}return!0}return comparator(actual,expected);case"function":return!1;default:return comparator(actual,expected)}}function getTypeForFilter(val){return null===val?"null":typeof val}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),isUndefined(fractionSize)&&(fractionSize=formats.PATTERNS[1].maxFrac),null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(isObject(number))return"";var isNegative=0>number;number=Math.abs(number);var isInfinity=number===1/0;if(!isInfinity&&!isFinite(number))return"";var numStr=number+"",formatedText="",hasExponent=!1,parts=[];if(isInfinity&&(formatedText="∞"),!isInfinity&&-1!==numStr.indexOf("e")){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);match&&"-"==match[2]&&match[3]>fractionSize+1?number=0:(formatedText=numStr,hasExponent=!0)}if(isInfinity||hasExponent)fractionSize>0&&1>number&&(formatedText=number.toFixed(fractionSize),number=parseFloat(formatedText));else{var fractionLen=(numStr.split(DECIMAL_SEP)[1]||"").length;isUndefined(fractionSize)&&(fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac)),number=+(Math.round(+(number.toString()+"e"+fractionSize)).toString()+"e"+-fractionSize);var fraction=(""+number).split(DECIMAL_SEP),whole=fraction[0];fraction=fraction[1]||"";var i,pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=lgroup+group)for(pos=whole.length-lgroup,i=0;pos>i;i++)(pos-i)%group===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(i=pos;i<whole.length;i++)(whole.length-i)%lgroup===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(;fraction.length<fractionSize;)fraction+="0";fractionSize&&"0"!==fractionSize&&(formatedText+=decimalSep+fraction.substr(0,fractionSize))}return 0===number&&(isNegative=!1),parts.push(isNegative?pattern.negPre:pattern.posPre,formatedText,isNegative?pattern.negSuf:pattern.posSuf),parts.join("")}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function timeZoneGetter(date,formats,offset){var zone=-1*offset,paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(4>=dayOfWeekOnFirst?5:12)-dayOfWeekOnFirst)}function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}function weekGetter(size){
return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs=getThursdayThisWeek(date),diff=+thisThurs-+firstThurs,result=1+Math.round(diff/6048e5);return padNumber(result,size)}}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}function longEraGetter(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour,m=toInt(match[5]||0)-tzMin,s=toInt(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format,timezone){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?toInt(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date)||!isFinite(date.getTime()))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);var dateTimezoneOffset=date.getTimezoneOffset();return timezone&&(dateTimezoneOffset=timezoneToOffset(timezone,date.getTimezoneOffset()),date=convertTimezoneToLocal(date,timezone,!0)),forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS,dateTimezoneOffset):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object,spacing){return isUndefined(spacing)&&(spacing=2),toJson(object,spacing)}}function limitToFilter(){return function(input,limit,begin){return limit=Math.abs(Number(limit))===1/0?Number(limit):toInt(limit),isNaN(limit)?input:(isNumber(input)&&(input=input.toString()),isArray(input)||isString(input)?(begin=!begin||isNaN(begin)?0:toInt(begin),begin=0>begin&&begin>=-input.length?input.length+begin:begin,limit>=0?input.slice(begin,begin+limit):0===begin?input.slice(limit,input.length):input.slice(Math.max(0,begin+limit),begin)):input)}}function orderByFilter($parse){function processPredicates(sortPredicate,reverseOrder){return reverseOrder=reverseOrder?-1:1,sortPredicate.map(function(predicate){var descending=1,get=identity;if(isFunction(predicate))get=predicate;else if(isString(predicate)&&(("+"==predicate.charAt(0)||"-"==predicate.charAt(0))&&(descending="-"==predicate.charAt(0)?-1:1,predicate=predicate.substring(1)),""!==predicate&&(get=$parse(predicate),get.constant))){var key=get();get=function(value){return value[key]}}return{get:get,descending:descending*reverseOrder}})}function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function objectValue(value,index){return"function"==typeof value.valueOf&&(value=value.valueOf(),isPrimitive(value))?value:hasCustomToString(value)&&(value=value.toString(),isPrimitive(value))?value:index}function getPredicateValue(value,index){var type=typeof value;return null===value?(type="string",value="null"):"string"===type?value=value.toLowerCase():"object"===type&&(value=objectValue(value,index)),{value:value,type:type}}function compare(v1,v2){var result=0;return v1.type===v2.type?v1.value!==v2.value&&(result=v1.value<v2.value?-1:1):result=v1.type<v2.type?-1:1,result}return function(array,sortPredicate,reverseOrder){function getComparisonObject(value,index){return{value:value,predicateValues:predicates.map(function(predicate){return getPredicateValue(predicate.get(value),index)})}}function doComparison(v1,v2){for(var result=0,index=0,length=predicates.length;length>index&&!(result=compare(v1.predicateValues[index],v2.predicateValues[index])*predicates[index].descending);++index);return result}if(!isArrayLike(array))return array;isArray(sortPredicate)||(sortPredicate=[sortPredicate]),0===sortPredicate.length&&(sortPredicate=["+"]);var predicates=processPredicates(sortPredicate,reverseOrder),compareValues=Array.prototype.map.call(array,getComparisonObject);return compareValues.sort(doComparison),array=compareValues.map(function(item){return item.value})}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function nullFormRenameControl(control,name){control.$name=name}function FormController(element,attrs,$scope,$animate,$interpolate){var form=this,controls=[],parentForm=form.$$parentForm=element.parent().controller("form")||nullFormCtrl;form.$error={},form.$$success={},form.$pending=undefined,form.$name=$interpolate(attrs.name||attrs.ngForm||"")($scope),form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,form.$submitted=!1,parentForm.$addControl(form),form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue()})},form.$commitViewValue=function(){forEach(controls,function(control){control.$commitViewValue()})},form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control)},form.$$renameControl=function(control,newName){var oldName=control.$name;form[oldName]===control&&delete form[oldName],form[newName]=control,control.$name=newName},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(form.$pending,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$error,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$$success,function(value,name){form.$setValidity(name,null,control)}),arrayRemove(controls,control)},addSetValidityMethod({ctrl:this,$element:element,set:function(object,property,controller){var list=object[property];if(list){var index=list.indexOf(controller);-1===index&&list.push(controller)}else object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])},parentForm:parentForm,$animate:$animate}),form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,parentForm.$setDirty()},form.$setPristine=function(){$animate.setClass(element,PRISTINE_CLASS,DIRTY_CLASS+" "+SUBMITTED_CLASS),form.$dirty=!1,form.$pristine=!0,form.$submitted=!1,forEach(controls,function(control){control.$setPristine()})},form.$setUntouched=function(){forEach(controls,function(control){control.$setUntouched()})},form.$setSubmitted=function(){$animate.addClass(element,SUBMITTED_CLASS),form.$submitted=!0,parentForm.$setSubmitted()}}function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(data){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var listener=function(ev){if(timeout&&($browser.defer.cancel(timeout),timeout=null),!composing){var value=element.val(),event=ev&&ev.type;"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(ev,input,origValue){timeout||(timeout=$browser.defer(function(){timeout=null,input&&input.value===origValue||listener(ev)}))};element.on("keydown",function(event){var key=event.keyCode;91===key||key>15&&19>key||key>=37&&40>=key||deferListener(event,this,this.value)}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),ctrl.$render=function(){element.val(ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue)}}function weekParser(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return NaN}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'==iso.charAt(0)&&'"'==iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso))return parts.shift(),map=date?{yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,function(part,index){index<mapping.length&&(map[mapping[index]]=+part)}),new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,1e3*map.sss||0)}return NaN}}function createDateInputType(type,regexp,parseDate,format){return function(scope,element,attr,ctrl,$sniffer,$browser,$filter){function isValidDate(value){return value&&!(value.getTime&&value.getTime()!==value.getTime())}function parseObservedDateValue(val){return isDefined(val)?isDate(val)?val:parseDate(val):undefined}badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var previousDate,timezone=ctrl&&ctrl.$options&&ctrl.$options.timezone;if(ctrl.$$parserName=type,ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);return timezone&&(parsedDate=convertTimezoneToLocal(parsedDate,timezone)),parsedDate}return undefined}),ctrl.$formatters.push(function(value){if(value&&!isDate(value))throw $ngModelMinErr("datefmt","Expected `{0}` to be a date",value);return isValidDate(value)?(previousDate=value,previousDate&&timezone&&(previousDate=convertTimezoneToLocal(previousDate,timezone,!0)),$filter("date")(value,format,timezone)):(previousDate=null,"")}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal},attr.$observe("min",function(val){minVal=parseObservedDateValue(val),ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal},attr.$observe("max",function(val){maxVal=parseObservedDateValue(val),ctrl.$validate()})}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0],nativeValidation=ctrl.$$hasNativeValidators=isObject(node.validity);nativeValidation&&ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput&&!validity.typeMismatch?undefined:value})}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){if(badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$$parserName="number",ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):undefined}),ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw $ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString()}return value}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal},attr.$observe("min",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),minVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||maxVal>=value},attr.$observe("max",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),maxVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="url",ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="email",ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid());var listener=function(ev){element[0].checked&&ctrl.$setViewValue(attr.value,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(parseFn=$parse(expression),!parseFn.constant)throw minErr("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}function checkboxInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1),listener=function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return value===!1},ctrl.$formatters.push(function(value){return equals(value,trueValue)}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){var classes=[];return isArray(classVal)?(forEach(classVal,function(v){classes=classes.concat(arrayClasses(v))}),classes):isString(classVal)?classVal.split(" "):isObject(classVal)?(forEach(classVal,function(v,k){v&&(classes=classes.concat(k.split(" ")))}),classes):classVal}return{restrict:"AC",link:function(scope,element,attr){function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function removeClasses(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||createMap(),classesToUpdate=[];return forEach(classes,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function updateClasses(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toAdd=digestClassCounts(toAdd,1),toRemove=digestClassCounts(toRemove,-1),toAdd&&toAdd.length&&$animate.addClass(element,toAdd),toRemove&&toRemove.length&&$animate.removeClass(element,toRemove)}function ngClassWatchAction(newVal){if(selector===!0||scope.$index%2===selector){var newClasses=arrayClasses(newVal||[]);if(oldVal){if(!equals(newVal,oldVal)){var oldClasses=arrayClasses(oldVal);updateClasses(oldClasses,newClasses)}}else addClasses(newClasses)}oldVal=shallowCopy(newVal)}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(value){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==(1&old$index)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):removeClasses(classes)}})}}}]}function addSetValidityMethod(context){function setValidity(validationErrorKey,state,controller){state===undefined?createAndSet("$pending",validationErrorKey,controller):unsetAndCleanup("$pending",validationErrorKey,controller),isBoolean(state)?state?(unset(ctrl.$error,validationErrorKey,controller),set(ctrl.$$success,validationErrorKey,controller)):(set(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)):(unset(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)),ctrl.$pending?(cachedToggleClass(PENDING_CLASS,!0),ctrl.$valid=ctrl.$invalid=undefined,toggleValidationCss("",null)):(cachedToggleClass(PENDING_CLASS,!1),ctrl.$valid=isObjectEmpty(ctrl.$error),ctrl.$invalid=!ctrl.$valid,toggleValidationCss("",ctrl.$valid));var combinedState;combinedState=ctrl.$pending&&ctrl.$pending[validationErrorKey]?undefined:ctrl.$error[validationErrorKey]?!1:ctrl.$$success[validationErrorKey]?!0:null,toggleValidationCss(validationErrorKey,combinedState),parentForm.$setValidity(validationErrorKey,combinedState,ctrl)}function createAndSet(name,value,controller){ctrl[name]||(ctrl[name]={}),set(ctrl[name],value,controller)}function unsetAndCleanup(name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller),isObjectEmpty(ctrl[name])&&(ctrl[name]=undefined)}function cachedToggleClass(className,switchValue){switchValue&&!classCache[className]?($animate.addClass($element,className),classCache[className]=!0):!switchValue&&classCache[className]&&($animate.removeClass($element,className),classCache[className]=!1)}function toggleValidationCss(validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(VALID_CLASS+validationErrorKey,isValid===!0),cachedToggleClass(INVALID_CLASS+validationErrorKey,isValid===!1)}var ctrl=context.ctrl,$element=context.$element,classCache={},set=context.set,unset=context.unset,parentForm=context.parentForm,$animate=context.$animate;classCache[INVALID_CLASS]=!(classCache[VALID_CLASS]=$element.hasClass(VALID_CLASS)),ctrl.$setValidity=setValidity}function isObjectEmpty(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/,VALIDITY_STATE_PROPERTY="validity",lowercase=function(string){return isString(string)?string.toLowerCase():string},hasOwnProperty=Object.prototype.hasOwnProperty,uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,getPrototypeOf=Object.getPrototypeOf,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=0;msie=document.documentMode,noop.$inject=[],identity.$inject=[];var skipDestroyOnNextJQueryCleanData,isArray=Array.isArray,TYPED_ARRAY_REGEXP=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,trim=function(value){return isString(value)?value.trim():value},escapeForRegexp=function(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},csp=function(){if(isDefined(csp.isActive_))return csp.isActive_;var active=!(!document.querySelector("[ng-csp]")&&!document.querySelector("[data-ng-csp]"));if(!active)try{new Function("")}catch(e){active=!0}return csp.isActive_=active},jq=function(){if(isDefined(jq.name_))return jq.name_;var el,i,prefix,name,ii=ngAttrPrefixes.length;for(i=0;ii>i;++i)if(prefix=ngAttrPrefixes[i],el=document.querySelector("["+prefix.replace(":","\\:")+"jq]")){name=el.getAttribute(prefix+"jq");break}return jq.name_=name},ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"],SNAKE_CASE_REGEXP=/[A-Z]/g,bindJQueryFired=!1,NODE_TYPE_ELEMENT=1,NODE_TYPE_ATTRIBUTE=2,NODE_TYPE_TEXT=3,NODE_TYPE_COMMENT=8,NODE_TYPE_DOCUMENT=9,NODE_TYPE_DOCUMENT_FRAGMENT=11,version={full:"1.4.3",major:1,minor:4,dot:3,codeName:"foam-acceleration"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=function(element,type,fn){element.addEventListener(type,fn,!1)},removeEventListenerFn=function(element,type,fn){element.removeEventListener(type,fn,!1)};JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite"),SINGLE_TAG_REGEXP=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:jqLiteHasData},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){return name=camelCase(name),isDefined(value)?void(element.style[name]=value):element.style[name]},attr:function(element,name,value){var nodeType=element.nodeType;if(nodeType!==NODE_TYPE_TEXT&&nodeType!==NODE_TYPE_ATTRIBUTE&&nodeType!==NODE_TYPE_COMMENT){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}}},prop:function(element,name,value){return isDefined(value)?void(element[name]=value):element[name]},text:function(){function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT?element.textContent:""}element.textContent=value}return getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){return isUndefined(value)?element.innerHTML:(jqLiteDealoc(element,!0),void(element.innerHTML=value))},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)===undefined){if(isObject(arg1)){for(i=0;nodeCount>i;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=value===undefined?Math.min(nodeCount,1):nodeCount,j=0;jj>j;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;nodeCount>i;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,on:function jqLiteOn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=createEventHandler(element,events));for(var types=type.indexOf(" ")>=0?type.split(" "):[type],i=types.length;i--;){type=types[i];var eventFns=events[type];eventFns||(events[type]=[],"mouseenter"===type||"mouseleave"===type?jqLiteOn(element,MOUSE_EVENT_MAP[type],function(event){var target=this,related=event.relatedTarget;(!related||related!==target&&!target.contains(related))&&handle(event,type)}):"$destroy"!==type&&addEventListenerFn(element,type,handle),eventFns=events[type]),eventFns.push(fn)}}},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element),element.on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){element.nodeType===NODE_TYPE_ELEMENT&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_DOCUMENT_FRAGMENT){node=new JQLite(node);for(var i=0,ii=node.length;ii>i;i++){var child=node[i];element.appendChild(child)}}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode).eq(0).clone()[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element),wrapNode.appendChild(element)},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){var index=element,parent=element.parentNode;newElement=new JQLite(newElement);for(var i=0,ii=newElement.length;ii>i;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;ii>i;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value},get:function(key){return this[hashKey(key,this.nextUid)]},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];return delete this[key],value}};var $$HashMapProvider=[function(){this.$get=[function(){return HashMap}]}],FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");createInjector.$$annotate=annotate;var $animateMinErr=minErr("$animate"),ELEMENT_NODE=1,NG_ANIMATE_CLASSNAME="ng-animate",$$CoreAnimateRunnerProvider=function(){this.$get=["$q","$$rAF",function($q,$$rAF){function AnimateRunner(){}return AnimateRunner.all=noop,AnimateRunner.chain=noop,AnimateRunner.prototype={end:noop,cancel:noop,resume:noop,pause:noop,complete:noop,then:function(pass,fail){return $q(function(resolve){$$rAF(function(){resolve()})}).then(pass,fail)}},AnimateRunner}]},$$CoreAnimateQueueProvider=function(){var postDigestQueue=new HashMap,postDigestElements=[];this.$get=["$$AnimateRunner","$rootScope",function($$AnimateRunner,$rootScope){function addRemoveClassesPostDigest(element,add,remove){var data=postDigestQueue.get(element);data||(postDigestQueue.put(element,data={}),postDigestElements.push(element)),add&&forEach(add.split(" "),function(className){className&&(data[className]=!0)}),remove&&forEach(remove.split(" "),function(className){className&&(data[className]=!1)}),postDigestElements.length>1||$rootScope.$$postDigest(function(){forEach(postDigestElements,function(element){var data=postDigestQueue.get(element);
if(data){var existing=splitClasses(element.attr("class")),toAdd="",toRemove="";forEach(data,function(status,className){var hasClass=!!existing[className];status!==hasClass&&(status?toAdd+=(toAdd.length?" ":"")+className:toRemove+=(toRemove.length?" ":"")+className)}),forEach(element,function(elm){toAdd&&jqLiteAddClass(elm,toAdd),toRemove&&jqLiteRemoveClass(elm,toRemove)}),postDigestQueue.remove(element)}}),postDigestElements.length=0})}return{enabled:noop,on:noop,off:noop,pin:noop,push:function(element,event,options,domOperation){return domOperation&&domOperation(),options=options||{},options.from&&element.css(options.from),options.to&&element.css(options.to),(options.addClass||options.removeClass)&&addRemoveClassesPostDigest(element,options.addClass,options.removeClass),new $$AnimateRunner}}}]},$AnimateProvider=["$provide",function($provide){var provider=this;this.$$registeredAnimations=Object.create(null),this.register=function(name,factory){if(name&&"."!==name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);var key=name+"-animation";provider.$$registeredAnimations[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){if(1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null,this.$$classNameFilter)){var reservedRegex=new RegExp("(\\s+|\\/)"+NG_ANIMATE_CLASSNAME+"(\\s+|\\/)");if(reservedRegex.test(this.$$classNameFilter.toString()))throw $animateMinErr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',NG_ANIMATE_CLASSNAME)}return this.$$classNameFilter},this.$get=["$$animateQueue",function($$animateQueue){function domInsert(element,parentElement,afterElement){if(afterElement){var afterNode=extractElementNode(afterElement);!afterNode||afterNode.parentNode||afterNode.previousElementSibling||(afterElement=null)}afterElement?afterElement.after(element):parentElement.prepend(element)}return{on:$$animateQueue.on,off:$$animateQueue.off,pin:$$animateQueue.pin,enabled:$$animateQueue.enabled,cancel:function(runner){runner.end&&runner.end()},enter:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),parent=parent||after.parent(),domInsert(element,parent,after),$$animateQueue.push(element,"enter",prepareAnimateOptions(options))},move:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),parent=parent||after.parent(),domInsert(element,parent,after),$$animateQueue.push(element,"move",prepareAnimateOptions(options))},leave:function(element,options){return $$animateQueue.push(element,"leave",prepareAnimateOptions(options),function(){element.remove()})},addClass:function(element,className,options){return options=prepareAnimateOptions(options),options.addClass=mergeClasses(options.addclass,className),$$animateQueue.push(element,"addClass",options)},removeClass:function(element,className,options){return options=prepareAnimateOptions(options),options.removeClass=mergeClasses(options.removeClass,className),$$animateQueue.push(element,"removeClass",options)},setClass:function(element,add,remove,options){return options=prepareAnimateOptions(options),options.addClass=mergeClasses(options.addClass,add),options.removeClass=mergeClasses(options.removeClass,remove),$$animateQueue.push(element,"setClass",options)},animate:function(element,from,to,className,options){return options=prepareAnimateOptions(options),options.from=options.from?extend(options.from,from):from,options.to=options.to?extend(options.to,to):to,className=className||"ng-inline-animate",options.tempClasses=mergeClasses(options.tempClasses,className),$$animateQueue.push(element,"animate",options)}}}]}],$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^((?:x|data)[\:\-_])/i,$controllerMinErr=minErr("$controller"),CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/,APPLICATION_JSON="application/json",CONTENT_TYPE_APPLICATION_JSON={"Content-Type":APPLICATION_JSON+";charset=utf-8"},JSON_START=/^\[|^\{(?!\{)/,JSON_ENDS={"[":/]$/,"{":/}$/},JSON_PROTECTION_PREFIX=/^\)\]\}',?\n/,$interpolateMinErr=angular.$interpolateMinErr=minErr("$interpolate");$interpolateMinErr.throwNoconcat=function(text){throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text)},$interpolateMinErr.interr=function(text,err){return $interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString())};var PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location"),locationPrototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return(match[1]||""===url)&&this.path(decodeURIComponent(match[1])),(match[2]||match[1]||""===url)&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return path=null!==path?path.toString():"","/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");search=copy(search,{}),forEach(search,function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return null!==hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this}};forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype),Location.prototype.state=function(state){if(!arguments.length)return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5)throw $locationMinErr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(state)?null:state,this}});var $parseMinErr=minErr("$parse"),CALL=Function.prototype.call,APPLY=Function.prototype.apply,BIND=Function.prototype.bind,OPERATORS=createMap();forEach("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(operator){OPERATORS[operator]=!0});var ESCAPE={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){var ch=this.text.charAt(this.index);if('"'===ch||"'"===ch)this.readString(ch);else if(this.isNumber(ch)||"."===ch&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(ch))this.readIdent();else if(this.is(ch,"(){}[].,;:?"))this.tokens.push({index:this.index,text:ch}),this.index++;else if(this.isWhitespace(ch))this.index++;else{var ch2=ch+this.peek(),ch3=ch2+this.peek(2),op1=OPERATORS[ch],op2=OPERATORS[ch2],op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:!0}),this.index+=token.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(ch,chars){return-1!==chars.indexOf(ch)},peek:function(i){var num=i||1;return this.index+num<this.text.length?this.text.charAt(this.index+num):!1},isNumber:function(ch){return ch>="0"&&"9">=ch&&"string"==typeof ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"\t"===ch||"\n"===ch||"\v"===ch||" "===ch},isIdent:function(ch){return ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){for(var start=this.index;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(!this.isIdent(ch)&&!this.isNumber(ch))break;this.index++}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,constant:!0,value:string});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var AST=function(lexer,options){this.lexer=lexer,this.options=options};AST.Program="Program",AST.ExpressionStatement="ExpressionStatement",AST.AssignmentExpression="AssignmentExpression",AST.ConditionalExpression="ConditionalExpression",AST.LogicalExpression="LogicalExpression",AST.BinaryExpression="BinaryExpression",AST.UnaryExpression="UnaryExpression",AST.CallExpression="CallExpression",AST.MemberExpression="MemberExpression",AST.Identifier="Identifier",AST.Literal="Literal",AST.ArrayExpression="ArrayExpression",AST.Property="Property",AST.ObjectExpression="ObjectExpression",AST.ThisExpression="ThisExpression",AST.NGValueParameter="NGValueParameter",AST.prototype={ast:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value},program:function(){for(var body=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&body.push(this.expressionStatement()),!this.expect(";"))return{type:AST.Program,body:body}},expressionStatement:function(){return{type:AST.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var token,left=this.expression();token=this.expect("|");)left=this.filter(left);return left},expression:function(){return this.assignment()},assignment:function(){var result=this.ternary();return this.expect("=")&&(result={type:AST.AssignmentExpression,left:result,right:this.assignment(),operator:"="}),result},ternary:function(){var alternate,consequent,test=this.logicalOR();return this.expect("?")&&(alternate=this.expression(),this.consume(":"))?(consequent=this.expression(),{type:AST.ConditionalExpression,test:test,alternate:alternate,consequent:consequent}):test},logicalOR:function(){for(var left=this.logicalAND();this.expect("||");)left={type:AST.LogicalExpression,operator:"||",left:left,right:this.logicalAND()};return left},logicalAND:function(){for(var left=this.equality();this.expect("&&");)left={type:AST.LogicalExpression,operator:"&&",left:left,right:this.equality()};return left},equality:function(){for(var token,left=this.relational();token=this.expect("==","!=","===","!==");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.relational()};return left},relational:function(){for(var token,left=this.additive();token=this.expect("<",">","<=",">=");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.additive()};return left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.multiplicative()};return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.unary()};return left},unary:function(){var token;return(token=this.expect("+","-","!"))?{type:AST.UnaryExpression,operator:token.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var primary;this.expect("(")?(primary=this.filterChain(),this.consume(")")):this.expect("[")?primary=this.arrayDeclaration():this.expect("{")?primary=this.object():this.constants.hasOwnProperty(this.peek().text)?primary=copy(this.constants[this.consume().text]):this.peek().identifier?primary=this.identifier():this.peek().constant?primary=this.constant():this.throwError("not a primary expression",this.peek());for(var next;next=this.expect("(","[",".");)"("===next.text?(primary={type:AST.CallExpression,callee:primary,arguments:this.parseArguments()},this.consume(")")):"["===next.text?(primary={type:AST.MemberExpression,object:primary,property:this.expression(),computed:!0},this.consume("]")):"."===next.text?primary={type:AST.MemberExpression,object:primary,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return primary},filter:function(baseExpression){for(var args=[baseExpression],result={type:AST.CallExpression,callee:this.identifier(),arguments:args,filter:!0};this.expect(":");)args.push(this.expression());return result},parseArguments:function(){var args=[];if(")"!==this.peekToken().text)do args.push(this.expression());while(this.expect(","));return args},identifier:function(){var token=this.consume();return token.identifier||this.throwError("is not a valid identifier",token),{type:AST.Identifier,name:token.text}},constant:function(){return{type:AST.Literal,value:this.consume().value}},arrayDeclaration:function(){var elements=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;elements.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:AST.ArrayExpression,elements:elements}},object:function(){var property,properties=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;property={type:AST.Property,kind:"init"},this.peek().constant?property.key=this.constant():this.peek().identifier?property.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),property.value=this.expression(),properties.push(property)}while(this.expect(","));return this.consume("}"),{type:AST.ObjectExpression,properties:properties}},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},consume:function(e1){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);var token=this.expect(e1);return token||this.throwError("is unexpected, expecting ["+e1+"]",this.peek()),token},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return token?(this.tokens.shift(),token):!1},constants:{true:{type:AST.Literal,value:!0},false:{type:AST.Literal,value:!1},null:{type:AST.Literal,value:null},undefined:{type:AST.Literal,value:undefined},this:{type:AST.ThisExpression}}},ASTCompiler.prototype={compile:function(expression,expensiveChecks){var self=this,ast=this.astBuilder.ast(expression);this.state={nextId:0,filters:{},expensiveChecks:expensiveChecks,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},findConstantAndWatchExpressions(ast,self.$filter);var assignable,extra="";if(this.stage="assign",assignable=assignableAST(ast)){this.state.computing="assign";var result=this.nextId();this.recurse(assignable,result),extra="fn.assign="+this.generateFunction("assign","s,v,l")}var toWatch=getInputs(ast.body);self.stage="inputs",forEach(toWatch,function(watch,key){var fnKey="fn"+key;self.state[fnKey]={vars:[],body:[],own:{}},self.state.computing=fnKey;var intoId=self.nextId();self.recurse(watch,intoId),self.return_(intoId),self.state.inputs.push(fnKey),watch.watchId=key}),this.state.computing="fn",this.stage="main",this.recurse(ast);var fnString='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+extra+this.watchFns()+"return fn;",fn=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",fnString)(this.$filter,ensureSafeMemberName,ensureSafeObject,ensureSafeFunction,ifDefined,plusFn,expression);return this.state=this.stage=undefined,fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},USE:"use",STRICT:"strict",watchFns:function(){var result=[],fns=this.state.inputs,self=this;return forEach(fns,function(name){result.push("var "+name+"="+self.generateFunction(name,"s"))}),fns.length&&result.push("fn.inputs=["+fns.join(",")+"];"),result.join("")},generateFunction:function(name,params){return"function("+params+"){"+this.varsPrefix(name)+this.body(name)+"};"},filterPrefix:function(){var parts=[],self=this;return forEach(this.state.filters,function(id,filter){parts.push(id+"=$filter("+self.escape(filter)+")")}),parts.length?"var "+parts.join(",")+";":""},varsPrefix:function(section){return this.state[section].vars.length?"var "+this.state[section].vars.join(",")+";":""},body:function(section){return this.state[section].body.join("")},recurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var left,right,args,expression,self=this;if(recursionFn=recursionFn||noop,!skipWatchIdCheck&&isDefined(ast.watchId))return intoId=intoId||this.nextId(),void this.if_("i",this.lazyAssign(intoId,this.computedMember("i",ast.watchId)),this.lazyRecurse(ast,intoId,nameId,recursionFn,create,!0));switch(ast.type){case AST.Program:forEach(ast.body,function(expression,pos){self.recurse(expression.expression,undefined,undefined,function(expr){right=expr}),pos!==ast.body.length-1?self.current().body.push(right,";"):self.return_(right)});break;case AST.Literal:expression=this.escape(ast.value),this.assign(intoId,expression),recursionFn(expression);break;case AST.UnaryExpression:this.recurse(ast.argument,undefined,undefined,function(expr){right=expr}),expression=ast.operator+"("+this.ifDefined(right,0)+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.BinaryExpression:this.recurse(ast.left,undefined,undefined,function(expr){left=expr}),this.recurse(ast.right,undefined,undefined,function(expr){right=expr}),expression="+"===ast.operator?this.plus(left,right):"-"===ast.operator?this.ifDefined(left,0)+ast.operator+this.ifDefined(right,0):"("+left+")"+ast.operator+"("+right+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.LogicalExpression:intoId=intoId||this.nextId(),self.recurse(ast.left,intoId),self.if_("&&"===ast.operator?intoId:self.not(intoId),self.lazyRecurse(ast.right,intoId)),recursionFn(intoId);break;case AST.ConditionalExpression:intoId=intoId||this.nextId(),self.recurse(ast.test,intoId),self.if_(intoId,self.lazyRecurse(ast.alternate,intoId),self.lazyRecurse(ast.consequent,intoId)),recursionFn(intoId);break;case AST.Identifier:intoId=intoId||this.nextId(),nameId&&(nameId.context="inputs"===self.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",ast.name)+"?l:s"),nameId.computed=!1,nameId.name=ast.name),ensureSafeMemberName(ast.name),self.if_("inputs"===self.stage||self.not(self.getHasOwnProperty("l",ast.name)),function(){self.if_("inputs"===self.stage||"s",function(){create&&1!==create&&self.if_(self.not(self.nonComputedMember("s",ast.name)),self.lazyAssign(self.nonComputedMember("s",ast.name),"{}")),self.assign(intoId,self.nonComputedMember("s",ast.name))})},intoId&&self.lazyAssign(intoId,self.nonComputedMember("l",ast.name))),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.name))&&self.addEnsureSafeObject(intoId),recursionFn(intoId);break;case AST.MemberExpression:left=nameId&&(nameId.context=this.nextId())||this.nextId(),intoId=intoId||this.nextId(),self.recurse(ast.object,left,undefined,function(){self.if_(self.notNull(left),function(){ast.computed?(right=self.nextId(),self.recurse(ast.property,right),self.addEnsureSafeMemberName(right),create&&1!==create&&self.if_(self.not(self.computedMember(left,right)),self.lazyAssign(self.computedMember(left,right),"{}")),expression=self.ensureSafeObject(self.computedMember(left,right)),self.assign(intoId,expression),nameId&&(nameId.computed=!0,nameId.name=right)):(ensureSafeMemberName(ast.property.name),create&&1!==create&&self.if_(self.not(self.nonComputedMember(left,ast.property.name)),self.lazyAssign(self.nonComputedMember(left,ast.property.name),"{}")),expression=self.nonComputedMember(left,ast.property.name),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.property.name))&&(expression=self.ensureSafeObject(expression)),self.assign(intoId,expression),nameId&&(nameId.computed=!1,nameId.name=ast.property.name))},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)},!!create);break;case AST.CallExpression:intoId=intoId||this.nextId(),ast.filter?(right=self.filter(ast.callee.name),args=[],forEach(ast.arguments,function(expr){var argument=self.nextId();self.recurse(expr,argument),args.push(argument)}),expression=right+"("+args.join(",")+")",self.assign(intoId,expression),recursionFn(intoId)):(right=self.nextId(),left={},args=[],self.recurse(ast.callee,right,left,function(){self.if_(self.notNull(right),function(){self.addEnsureSafeFunction(right),forEach(ast.arguments,function(expr){self.recurse(expr,self.nextId(),undefined,function(argument){args.push(self.ensureSafeObject(argument))})}),left.name?(self.state.expensiveChecks||self.addEnsureSafeObject(left.context),expression=self.member(left.context,left.name,left.computed)+"("+args.join(",")+")"):expression=right+"("+args.join(",")+")",expression=self.ensureSafeObject(expression),self.assign(intoId,expression)},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)}));break;case AST.AssignmentExpression:if(right=this.nextId(),left={},!isAssignable(ast.left))throw $parseMinErr("lval","Trying to assing a value to a non l-value");this.recurse(ast.left,undefined,left,function(){self.if_(self.notNull(left.context),function(){self.recurse(ast.right,right),self.addEnsureSafeObject(self.member(left.context,left.name,left.computed)),expression=self.member(left.context,left.name,left.computed)+ast.operator+right,self.assign(intoId,expression),recursionFn(intoId||expression)})},1);break;case AST.ArrayExpression:args=[],forEach(ast.elements,function(expr){self.recurse(expr,self.nextId(),undefined,function(argument){args.push(argument)})}),expression="["+args.join(",")+"]",this.assign(intoId,expression),recursionFn(expression);break;case AST.ObjectExpression:args=[],forEach(ast.properties,function(property){self.recurse(property.value,self.nextId(),undefined,function(expr){args.push(self.escape(property.key.type===AST.Identifier?property.key.name:""+property.key.value)+":"+expr)})}),expression="{"+args.join(",")+"}",this.assign(intoId,expression),recursionFn(expression);break;case AST.ThisExpression:this.assign(intoId,"s"),recursionFn("s");break;case AST.NGValueParameter:this.assign(intoId,"v"),recursionFn("v")}},getHasOwnProperty:function(element,property){var key=element+"."+property,own=this.current().own;return own.hasOwnProperty(key)||(own[key]=this.nextId(!1,element+"&&("+this.escape(property)+" in "+element+")")),own[key]},assign:function(id,value){return id?(this.current().body.push(id,"=",value,";"),id):void 0},filter:function(filterName){return this.state.filters.hasOwnProperty(filterName)||(this.state.filters[filterName]=this.nextId(!0)),this.state.filters[filterName]},ifDefined:function(id,defaultValue){return"ifDefined("+id+","+this.escape(defaultValue)+")"},plus:function(left,right){return"plus("+left+","+right+")"},return_:function(id){this.current().body.push("return ",id,";")},if_:function(test,alternate,consequent){if(test===!0)alternate();else{var body=this.current().body;body.push("if(",test,"){"),alternate(),body.push("}"),consequent&&(body.push("else{"),consequent(),body.push("}"))}},not:function(expression){return"!("+expression+")"},notNull:function(expression){return expression+"!=null"},nonComputedMember:function(left,right){return left+"."+right},computedMember:function(left,right){return left+"["+right+"]"},member:function(left,right,computed){return computed?this.computedMember(left,right):this.nonComputedMember(left,right)},addEnsureSafeObject:function(item){this.current().body.push(this.ensureSafeObject(item),";")},addEnsureSafeMemberName:function(item){this.current().body.push(this.ensureSafeMemberName(item),";")},addEnsureSafeFunction:function(item){this.current().body.push(this.ensureSafeFunction(item),";")},ensureSafeObject:function(item){return"ensureSafeObject("+item+",text)"},ensureSafeMemberName:function(item){return"ensureSafeMemberName("+item+",text)"},ensureSafeFunction:function(item){return"ensureSafeFunction("+item+",text)"},lazyRecurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var self=this;return function(){self.recurse(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck)}},lazyAssign:function(id,value){var self=this;return function(){self.assign(id,value)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)},escape:function(value){if(isString(value))return"'"+value.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(isNumber(value))return value.toString();if(value===!0)return"true";if(value===!1)return"false";if(null===value)return"null";if("undefined"==typeof value)return"undefined";throw $parseMinErr("esc","IMPOSSIBLE")},nextId:function(skip,init){var id="v"+this.state.nextId++;return skip||this.current().vars.push(id+(init?"="+init:"")),id},current:function(){return this.state[this.state.computing]}},ASTInterpreter.prototype={compile:function(expression,expensiveChecks){var self=this,ast=this.astBuilder.ast(expression);this.expression=expression,this.expensiveChecks=expensiveChecks,findConstantAndWatchExpressions(ast,self.$filter);var assignable,assign;(assignable=assignableAST(ast))&&(assign=this.recurse(assignable));var inputs,toWatch=getInputs(ast.body);toWatch&&(inputs=[],forEach(toWatch,function(watch,key){var input=self.recurse(watch);watch.input=input,inputs.push(input),watch.watchId=key}));var expressions=[];forEach(ast.body,function(expression){expressions.push(self.recurse(expression.expression))});var fn=0===ast.body.length?function(){}:1===ast.body.length?expressions[0]:function(scope,locals){var lastValue;return forEach(expressions,function(exp){lastValue=exp(scope,locals)}),lastValue};return assign&&(fn.assign=function(scope,value,locals){return assign(scope,locals,value)}),inputs&&(fn.inputs=inputs),fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},recurse:function(ast,context,create){var left,right,args,self=this;if(ast.input)return this.inputs(ast.input,ast.watchId);switch(ast.type){case AST.Literal:return this.value(ast.value,context);case AST.UnaryExpression:return right=this.recurse(ast.argument),this["unary"+ast.operator](right,context);case AST.BinaryExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.LogicalExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.ConditionalExpression:return this["ternary?:"](this.recurse(ast.test),this.recurse(ast.alternate),this.recurse(ast.consequent),context);case AST.Identifier:return ensureSafeMemberName(ast.name,self.expression),self.identifier(ast.name,self.expensiveChecks||isPossiblyDangerousMemberName(ast.name),context,create,self.expression);case AST.MemberExpression:return left=this.recurse(ast.object,!1,!!create),ast.computed||(ensureSafeMemberName(ast.property.name,self.expression),right=ast.property.name),ast.computed&&(right=this.recurse(ast.property)),ast.computed?this.computedMember(left,right,context,create,self.expression):this.nonComputedMember(left,right,self.expensiveChecks,context,create,self.expression);case AST.CallExpression:return args=[],forEach(ast.arguments,function(expr){args.push(self.recurse(expr))}),ast.filter&&(right=this.$filter(ast.callee.name)),ast.filter||(right=this.recurse(ast.callee,!0)),ast.filter?function(scope,locals,assign,inputs){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));var value=right.apply(undefined,values,inputs);return context?{context:undefined,name:undefined,value:value}:value}:function(scope,locals,assign,inputs){var value,rhs=right(scope,locals,assign,inputs);if(null!=rhs.value){ensureSafeObject(rhs.context,self.expression),ensureSafeFunction(rhs.value,self.expression);for(var values=[],i=0;i<args.length;++i)values.push(ensureSafeObject(args[i](scope,locals,assign,inputs),self.expression));value=ensureSafeObject(rhs.value.apply(rhs.context,values),self.expression)}return context?{value:value}:value};case AST.AssignmentExpression:return left=this.recurse(ast.left,!0,1),right=this.recurse(ast.right),function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs);return ensureSafeObject(lhs.value,self.expression),lhs.context[lhs.name]=rhs,context?{value:rhs}:rhs};case AST.ArrayExpression:return args=[],forEach(ast.elements,function(expr){args.push(self.recurse(expr))}),function(scope,locals,assign,inputs){for(var value=[],i=0;i<args.length;++i)value.push(args[i](scope,locals,assign,inputs));return context?{value:value}:value};case AST.ObjectExpression:return args=[],forEach(ast.properties,function(property){args.push({key:property.key.type===AST.Identifier?property.key.name:""+property.key.value,value:self.recurse(property.value)})}),function(scope,locals,assign,inputs){for(var value={},i=0;i<args.length;++i)value[args[i].key]=args[i].value(scope,locals,assign,inputs);return context?{value:value}:value};case AST.ThisExpression:return function(scope){return context?{value:scope}:scope};case AST.NGValueParameter:return function(scope,locals,assign,inputs){return context?{value:assign}:assign}}},"unary+":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?+arg:0,context?{value:arg}:arg}},"unary-":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?-arg:0,context?{value:arg}:arg}},"unary!":function(argument,context){return function(scope,locals,assign,inputs){var arg=!argument(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary+":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=plusFn(lhs,rhs);
return context?{value:arg}:arg}},"binary-":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=(isDefined(lhs)?lhs:0)-(isDefined(rhs)?rhs:0);return context?{value:arg}:arg}},"binary*":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)*right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary/":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)/right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary%":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)%right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary===":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)===right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary&&":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)&&right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary||":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)||right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"ternary?:":function(test,alternate,consequent,context){return function(scope,locals,assign,inputs){var arg=test(scope,locals,assign,inputs)?alternate(scope,locals,assign,inputs):consequent(scope,locals,assign,inputs);return context?{value:arg}:arg}},value:function(value,context){return function(){return context?{context:undefined,name:undefined,value:value}:value}},identifier:function(name,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var base=locals&&name in locals?locals:scope;create&&1!==create&&base&&!base[name]&&(base[name]={});var value=base?base[name]:undefined;return expensiveChecks&&ensureSafeObject(value,expression),context?{context:base,name:name,value:value}:value}},computedMember:function(left,right,context,create,expression){return function(scope,locals,assign,inputs){var rhs,value,lhs=left(scope,locals,assign,inputs);return null!=lhs&&(rhs=right(scope,locals,assign,inputs),ensureSafeMemberName(rhs,expression),create&&1!==create&&lhs&&!lhs[rhs]&&(lhs[rhs]={}),value=lhs[rhs],ensureSafeObject(value,expression)),context?{context:lhs,name:rhs,value:value}:value}},nonComputedMember:function(left,right,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);create&&1!==create&&lhs&&!lhs[right]&&(lhs[right]={});var value=null!=lhs?lhs[right]:undefined;return(expensiveChecks||isPossiblyDangerousMemberName(right))&&ensureSafeObject(value,expression),context?{context:lhs,name:right,value:value}:value}},inputs:function(input,watchId){return function(scope,value,locals,inputs){return inputs?inputs[watchId]:input(scope,value,locals)}}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options,this.ast=new AST(this.lexer),this.astCompiler=options.csp?new ASTInterpreter(this.ast,$filter):new ASTCompiler(this.ast,$filter)};Parser.prototype={constructor:Parser,parse:function(text){return this.astCompiler.compile(text,this.options.expensiveChecks)}};var objectValueOf=(createMap(),createMap(),Object.prototype.valueOf),$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$compileMinErr=minErr("$compile"),urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href);$$CookieReader.$inject=["$document"],$FilterProvider.$inject=["$provide"],currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DECIMAL_SEP=".",DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:longEraGetter},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){return attr.href||attr.xlinkHref?void 0:function(scope,element){if("a"===element[0].nodeName.toLowerCase()){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){function defaultLinkFn(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName),linkFn=defaultLinkFn;"checked"===propName&&(linkFn=function(scope,element,attr){attr.ngModel!==attr[normalized]&&defaultLinkFn(scope,element,attr)}),ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:linkFn}}}}),forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"==attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],function(value){attr.$set(ngAttr,value)})}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){return value?(attr.$set(name,value),void(msie&&propName&&element.prop(propName,attr[name]))):void("href"===attrName&&attr.$set(name,null))})}}}});var nullFormCtrl={$addControl:noop,$$renameControl:nullFormRenameControl,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},SUBMITTED_CLASS="ng-submitted";FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var formDirectiveFactory=function(isNgForm){return["$timeout",function($timeout){var formDirective={name:"form",restrict:isNgForm?"EAC":"E",controller:FormController,compile:function(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?"name":isNgForm&&attr.ngForm?"ngForm":!1;return{pre:function(scope,formElement,attr,controller){if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue(),controller.$setSubmitted()}),event.preventDefault()};addEventListenerFn(formElement[0],"submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",handleFormSubmission)},0,!1)})}var parentFormCtrl=controller.$$parentForm;nameAttr&&(setter(scope,controller.$name,controller,controller.$name),attr.$observe(nameAttr,function(newValue){controller.$name!==newValue&&(setter(scope,controller.$name,undefined,controller.$name),parentFormCtrl.$$renameControl(controller,newValue),setter(scope,controller.$name,controller,controller.$name))})),formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller),nameAttr&&setter(scope,attr[nameAttr],undefined,controller.$name),extend(controller,nullFormCtrl)})}}}};return formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),ISO_DATE_REGEXP=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,DATE_REGEXP=/^(\d{4})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP=/^(\d{4})-W(\d\d)$/,MONTH_REGEXP=/^(\d{4})-(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,inputType={text:textInputType,date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,weekParser,"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop},inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){ctrls[0]&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}],CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),element=element[0],scope.$watch(attr.ngBind,function(value){element.textContent=value===undefined?"":value})}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),element=element[0],attr.$observe("ngBindTemplate",function(value){element.textContent=value===undefined?"":value})}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function(value){return(value||"").toString()});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,function(){element.html($sce.getTrustedHtml(ngBindHtmlGetter(scope))||"")})}}}}],ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName],null,!0);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)})}}}}]});var ngIfDirective=["$animate",function($animate){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){value?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=document.createComment(" end ngIf: "+$attr.ngIf+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).then(function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate",function($templateRequest,$anchorScroll,$animate){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch(srcExp,function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).then(afterAnimation)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}},function(){thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){return/SVG/.test($element[0].toString())?($element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,document).childNodes)(scope,function(clone){$element.append(clone)},{futureParentElement:$element})):($element.html(ctrl.template),void $compile($element.contents())(scope))}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=element.attr(attr.$attr.ngList)||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList,parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trimValues?trim(value):value)}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){return isArray(value)?value.join(ngList):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",UNTOUCHED_CLASS="ng-untouched",TOUCHED_CLASS="ng-touched",PENDING_CLASS="ng-pending",$ngModelMinErr=new minErr("ngModel"),NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$rootScope,$q,$interpolate){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=undefined,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=undefined,this.$name=$interpolate($attr.name||"",!1)($scope);var parserValid,parsedNgModel=$parse($attr.ngModel),parsedNgModelAssign=parsedNgModel.assign,ngModelGet=parsedNgModel,ngModelSet=parsedNgModelAssign,pendingDebounce=null,ctrl=this;this.$$setOptions=function(options){if(ctrl.$options=options,options&&options.getterSetter){var invokeModelGetter=$parse($attr.ngModel+"()"),invokeModelSetter=$parse($attr.ngModel+"($$$p)");ngModelGet=function($scope){var modelValue=parsedNgModel($scope);return isFunction(modelValue)&&(modelValue=invokeModelGetter($scope)),modelValue},ngModelSet=function($scope,newValue){isFunction(parsedNgModel($scope))?invokeModelSetter($scope,{$$$p:ctrl.$modelValue}):parsedNgModelAssign($scope,ctrl.$modelValue)}}else if(!parsedNgModel.assign)throw $ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element))},this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value};var parentForm=$element.inheritedData("$formController")||nullFormCtrl,currentValidationRunId=0;addSetValidityMethod({ctrl:this,$element:$element,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]},parentForm:parentForm,$animate:$animate}),this.$setPristine=function(){ctrl.$dirty=!1,ctrl.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setDirty=function(){ctrl.$dirty=!0,ctrl.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),parentForm.$setDirty()},this.$setUntouched=function(){ctrl.$touched=!1,ctrl.$untouched=!0,$animate.setClass($element,UNTOUCHED_CLASS,TOUCHED_CLASS)},this.$setTouched=function(){ctrl.$touched=!0,ctrl.$untouched=!1,$animate.setClass($element,TOUCHED_CLASS,UNTOUCHED_CLASS)},this.$rollbackViewValue=function(){$timeout.cancel(pendingDebounce),ctrl.$viewValue=ctrl.$$lastCommittedViewValue,ctrl.$render()},this.$validate=function(){if(!isNumber(ctrl.$modelValue)||!isNaN(ctrl.$modelValue)){var viewValue=ctrl.$$lastCommittedViewValue,modelValue=ctrl.$$rawModelValue,prevValid=ctrl.$valid,prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$runValidators(modelValue,viewValue,function(allValid){allowInvalid||prevValid===allValid||(ctrl.$modelValue=allValid?modelValue:undefined,ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope())})}},this.$$runValidators=function(modelValue,viewValue,doneCallback){function processParseErrors(){var errorKey=ctrl.$$parserName||"parse";return parserValid!==undefined?(parserValid||(forEach(ctrl.$validators,function(v,name){setValidity(name,null)}),forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)})),setValidity(errorKey,parserValid),parserValid):(setValidity(errorKey,null),!0)}function processSyncValidators(){var syncValidatorsValid=!0;return forEach(ctrl.$validators,function(validator,name){var result=validator(modelValue,viewValue);syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)}),syncValidatorsValid?!0:(forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)}),!1)}function processAsyncValidators(){var validatorPromises=[],allValid=!0;forEach(ctrl.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw $ngModelMinErr("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,undefined),validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(error){allValid=!1,setValidity(name,!1)}))}),validatorPromises.length?$q.all(validatorPromises).then(function(){validationDone(allValid)},noop):validationDone(!0)}function setValidity(name,isValid){localValidationRunId===currentValidationRunId&&ctrl.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===currentValidationRunId&&doneCallback(allValid)}currentValidationRunId++;var localValidationRunId=currentValidationRunId;return processParseErrors()&&processSyncValidators()?void processAsyncValidators():void validationDone(!1)},this.$commitViewValue=function(){var viewValue=ctrl.$viewValue;$timeout.cancel(pendingDebounce),(ctrl.$$lastCommittedViewValue!==viewValue||""===viewValue&&ctrl.$$hasNativeValidators)&&(ctrl.$$lastCommittedViewValue=viewValue,ctrl.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function writeToModelIfNeeded(){ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope()}var viewValue=ctrl.$$lastCommittedViewValue,modelValue=viewValue;if(parserValid=isUndefined(modelValue)?undefined:!0)for(var i=0;i<ctrl.$parsers.length;i++)if(modelValue=ctrl.$parsers[i](modelValue),isUndefined(modelValue)){parserValid=!1;break}isNumber(ctrl.$modelValue)&&isNaN(ctrl.$modelValue)&&(ctrl.$modelValue=ngModelGet($scope));var prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$rawModelValue=modelValue,allowInvalid&&(ctrl.$modelValue=modelValue,writeToModelIfNeeded()),ctrl.$$runValidators(modelValue,ctrl.$$lastCommittedViewValue,function(allValid){allowInvalid||(ctrl.$modelValue=allValid?modelValue:undefined,writeToModelIfNeeded())})},this.$$writeModelToScope=function(){ngModelSet($scope,ctrl.$modelValue),forEach(ctrl.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}})},this.$setViewValue=function(value,trigger){ctrl.$viewValue=value,(!ctrl.$options||ctrl.$options.updateOnDefault)&&ctrl.$$debounceViewValueCommit(trigger)},this.$$debounceViewValueCommit=function(trigger){var debounce,debounceDelay=0,options=ctrl.$options;options&&isDefined(options.debounce)&&(debounce=options.debounce,isNumber(debounce)?debounceDelay=debounce:isNumber(debounce[trigger])?debounceDelay=debounce[trigger]:isNumber(debounce["default"])&&(debounceDelay=debounce["default"])),$timeout.cancel(pendingDebounce),debounceDelay?pendingDebounce=$timeout(function(){ctrl.$commitViewValue()},debounceDelay):$rootScope.$$phase?ctrl.$commitViewValue():$scope.$apply(function(){ctrl.$commitViewValue()})},$scope.$watch(function(){var modelValue=ngModelGet($scope);if(modelValue!==ctrl.$modelValue&&(ctrl.$modelValue===ctrl.$modelValue||modelValue===modelValue)){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue,parserValid=undefined;for(var formatters=ctrl.$formatters,idx=formatters.length,viewValue=modelValue;idx--;)viewValue=formatters[idx](viewValue);ctrl.$viewValue!==viewValue&&(ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue,ctrl.$render(),ctrl.$$runValidators(modelValue,viewValue,noop))}return modelValue})}],ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function(element){return element.addClass(PRISTINE_CLASS).addClass(UNTOUCHED_CLASS).addClass(VALID_CLASS),{pre:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;modelCtrl.$$setOptions(ctrls[2]&&ctrls[2].$options),formCtrl.$addControl(modelCtrl),attr.$observe("name",function(newValue){modelCtrl.$name!==newValue&&formCtrl.$$renameControl(modelCtrl,newValue)}),scope.$on("$destroy",function(){formCtrl.$removeControl(modelCtrl)})},post:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0];modelCtrl.$options&&modelCtrl.$options.updateOn&&element.on(modelCtrl.$options.updateOn,function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)}),element.on("blur",function(ev){modelCtrl.$touched||($rootScope.$$phase?scope.$evalAsync(modelCtrl.$setTouched):scope.$apply(modelCtrl.$setTouched))})}}}}}],DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/,ngModelOptionsDirective=function(){return{restrict:"A",controller:["$scope","$attrs",function($scope,$attrs){var that=this;this.$options=copy($scope.$eval($attrs.ngModelOptions)),this.$options.updateOn!==undefined?(this.$options.updateOnDefault=!1,this.$options.updateOn=trim(this.$options.updateOn.replace(DEFAULT_REGEXP,function(){return that.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngOptionsMinErr=minErr("ngOptions"),NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ngOptionsDirective=["$compile","$parse",function($compile,$parse){function parseOptionsExpression(optionsExp,selectElement,scope){function Option(selectValue,viewValue,label,group,disabled){this.selectValue=selectValue,this.viewValue=viewValue,this.label=label,this.group=group,this.disabled=disabled}function getOptionValuesKeys(optionValues){var optionValuesKeys;if(!keyName&&isArrayLike(optionValues))optionValuesKeys=optionValues;else{optionValuesKeys=[];for(var itemKey in optionValues)optionValues.hasOwnProperty(itemKey)&&"$"!==itemKey.charAt(0)&&optionValuesKeys.push(itemKey)}return optionValuesKeys}var match=optionsExp.match(NG_OPTIONS_REGEXP);if(!match)throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var valueName=match[5]||match[7],keyName=match[6],selectAs=/ as /.test(match[0])&&match[1],trackBy=match[9],valueFn=$parse(match[2]?match[1]:valueName),selectAsFn=selectAs&&$parse(selectAs),viewValueFn=selectAsFn||valueFn,trackByFn=trackBy&&$parse(trackBy),getTrackByValueFn=trackBy?function(value,locals){return trackByFn(scope,locals)}:function(value){return hashKey(value)},getTrackByValue=function(value,key){return getTrackByValueFn(value,getLocals(value,key))},displayFn=$parse(match[2]||match[1]),groupByFn=$parse(match[3]||""),disableWhenFn=$parse(match[4]||""),valuesFn=$parse(match[8]),locals={},getLocals=keyName?function(value,key){return locals[keyName]=key,locals[valueName]=value,locals}:function(value){return locals[valueName]=value,locals};return{trackBy:trackBy,getTrackByValue:getTrackByValue,getWatchables:$parse(valuesFn,function(optionValues){var watchedArray=[];optionValues=optionValues||[];for(var optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;optionValuesLength>index;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],locals=(optionValues[key],getLocals(optionValues[key],key)),selectValue=getTrackByValueFn(optionValues[key],locals);if(watchedArray.push(selectValue),match[2]||match[1]){var label=displayFn(scope,locals);watchedArray.push(label)}if(match[4]){var disableWhen=disableWhenFn(scope,locals);watchedArray.push(disableWhen)}}return watchedArray}),getOptions:function(){for(var optionItems=[],selectValueMap={},optionValues=valuesFn(scope)||[],optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;optionValuesLength>index;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),viewValue=viewValueFn(scope,locals),selectValue=getTrackByValueFn(viewValue,locals),label=displayFn(scope,locals),group=groupByFn(scope,locals),disabled=disableWhenFn(scope,locals),optionItem=new Option(selectValue,viewValue,label,group,disabled);optionItems.push(optionItem),selectValueMap[selectValue]=optionItem}return{items:optionItems,selectValueMap:selectValueMap,getOptionFromViewValue:function(value){return selectValueMap[getTrackByValue(value)]},getViewValueFromOption:function(option){return trackBy?angular.copy(option.viewValue):option.viewValue}}}}}var optionTemplate=document.createElement("option"),optGroupTemplate=document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(scope,selectElement,attr,ctrls){function updateOptionElement(option,element){option.element=element,element.disabled=option.disabled,option.value!==element.value&&(element.value=option.selectValue),option.label!==element.label&&(element.label=option.label,element.textContent=option.label)}function addOrReuseElement(parent,current,type,templateElement){var element;return current&&lowercase(current.nodeName)===type?element=current:(element=templateElement.cloneNode(!1),current?parent.insertBefore(element,current):parent.appendChild(element)),element}function removeExcessElements(current){for(var next;current;)next=current.nextSibling,jqLiteRemove(current),current=next}function skipEmptyAndUnknownOptions(current){var emptyOption_=emptyOption&&emptyOption[0],unknownOption_=unknownOption&&unknownOption[0];if(emptyOption_||unknownOption_)for(;current&&(current===emptyOption_||current===unknownOption_);)current=current.nextSibling;return current}function updateOptions(){var previousValue=options&&selectCtrl.readValue();options=ngOptions.getOptions();var groupMap={},currentElement=selectElement[0].firstChild;if(providedEmptyOption&&selectElement.prepend(emptyOption),currentElement=skipEmptyAndUnknownOptions(currentElement),options.items.forEach(function(option){var group,groupElement,optionElement;option.group?(group=groupMap[option.group],group||(groupElement=addOrReuseElement(selectElement[0],currentElement,"optgroup",optGroupTemplate),
currentElement=groupElement.nextSibling,groupElement.label=option.group,group=groupMap[option.group]={groupElement:groupElement,currentOptionElement:groupElement.firstChild}),optionElement=addOrReuseElement(group.groupElement,group.currentOptionElement,"option",optionTemplate),updateOptionElement(option,optionElement),group.currentOptionElement=optionElement.nextSibling):(optionElement=addOrReuseElement(selectElement[0],currentElement,"option",optionTemplate),updateOptionElement(option,optionElement),currentElement=optionElement.nextSibling)}),Object.keys(groupMap).forEach(function(key){removeExcessElements(groupMap[key].currentOptionElement)}),removeExcessElements(currentElement),ngModelCtrl.$render(),!ngModelCtrl.$isEmpty(previousValue)){var nextValue=selectCtrl.readValue();(ngOptions.trackBy?equals(previousValue,nextValue):previousValue===nextValue)||(ngModelCtrl.$setViewValue(nextValue),ngModelCtrl.$render())}}var ngModelCtrl=ctrls[1];if(ngModelCtrl){for(var emptyOption,selectCtrl=ctrls[0],multiple=attr.multiple,i=0,children=selectElement.children(),ii=children.length;ii>i;i++)if(""===children[i].value){emptyOption=children.eq(i);break}var providedEmptyOption=!!emptyOption,unknownOption=jqLite(optionTemplate.cloneNode(!1));unknownOption.val("?");var options,ngOptions=parseOptionsExpression(attr.ngOptions,selectElement,scope),renderEmptyOption=function(){providedEmptyOption||selectElement.prepend(emptyOption),selectElement.val(""),emptyOption.prop("selected",!0),emptyOption.attr("selected",!0)},removeEmptyOption=function(){providedEmptyOption||emptyOption.remove()},renderUnknownOption=function(){selectElement.prepend(unknownOption),selectElement.val("?"),unknownOption.prop("selected",!0),unknownOption.attr("selected",!0)},removeUnknownOption=function(){unknownOption.remove()};multiple?(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length},selectCtrl.writeValue=function(value){options.items.forEach(function(option){option.element.selected=!1}),value&&value.forEach(function(item){var option=options.getOptionFromViewValue(item);option&&!option.disabled&&(option.element.selected=!0)})},selectCtrl.readValue=function(){var selectedValues=selectElement.val()||[],selections=[];return forEach(selectedValues,function(value){var option=options.selectValueMap[value];option.disabled||selections.push(options.getViewValueFromOption(option))}),selections},ngOptions.trackBy&&scope.$watchCollection(function(){return isArray(ngModelCtrl.$viewValue)?ngModelCtrl.$viewValue.map(function(value){return ngOptions.getTrackByValue(value)}):void 0},function(){ngModelCtrl.$render()})):(selectCtrl.writeValue=function(value){var option=options.getOptionFromViewValue(value);option&&!option.disabled?selectElement[0].value!==option.selectValue&&(removeUnknownOption(),removeEmptyOption(),selectElement[0].value=option.selectValue,option.element.selected=!0,option.element.setAttribute("selected","selected")):null===value||providedEmptyOption?(removeUnknownOption(),renderEmptyOption()):(removeEmptyOption(),renderUnknownOption())},selectCtrl.readValue=function(){var selectedOption=options.selectValueMap[selectElement.val()];return selectedOption&&!selectedOption.disabled?(removeEmptyOption(),removeUnknownOption(),options.getViewValueFromOption(selectedOption)):null},ngOptions.trackBy&&scope.$watch(function(){return ngOptions.getTrackByValue(ngModelCtrl.$viewValue)},function(){ngModelCtrl.$render()})),providedEmptyOption?(emptyOption.remove(),$compile(emptyOption)(scope),emptyOption.removeClass("ng-scope")):emptyOption=jqLite(optionTemplate.cloneNode(!1)),updateOptions(),scope.$watchCollection(ngOptions.getWatchables,updateOptions)}}}}],ngPluralizeDirective=["$locale","$interpolate","$log",function($locale,$interpolate,$log){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{link:function(scope,element,attr){function updateElementText(newText){element.text(newText||"")}var lastCount,numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop;forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))}),scope.$watch(numberExp,function(newVal){var count=parseFloat(newVal),countIsNaN=isNaN(count);if(countIsNaN||count in whens||(count=$locale.pluralCat(count-offset)),count!==lastCount&&!(countIsNaN&&isNumber(lastCount)&&isNaN(lastCount))){watchRemover();var whenExpFn=whensExpFns[count];isUndefined(whenExpFn)?(null!=newVal&&$log.debug("ngPluralize: no rule defined for '"+count+"' in "+whenExp),watchRemover=noop,updateElementText()):watchRemover=scope.$watch(whenExpFn,updateElementText),lastCount=count}})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0===(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=document.createComment(" end ngRepeat: "+expression+" "),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(match=lhs.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var valueIdentifier=match[3]||match[1],keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,hashFnLocals={$id:hashKey};return trackByExp?trackByExpGetter=$parse(trackByExp):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),function($scope,$element,$attr,ctrl,$transclude){trackByExpGetter&&(trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)});var lastBlockMap=createMap();$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove,previousNode=$element[0],nextBlockMap=createMap();if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(var itemKey in collection)collection.hasOwnProperty(itemKey)&&"$"!==itemKey.charAt(0)&&collectionKeys.push(itemKey)}for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;collectionLength>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);nextBlockOrder[index]={id:trackById,scope:undefined,clone:undefined},nextBlockMap[trackById]=!0}for(var blockKey in lastBlockMap){if(block=lastBlockMap[blockKey],elementsToRemove=getBlockNodes(block.clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;length>index;index++)elementsToRemove[index][NG_REMOVED]=!0;block.scope.$destroy()}for(index=0;collectionLength>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],block.scope){nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);getBlockStart(block)!=nextNode&&$animate.move(getBlockNodes(block.clone),null,jqLite(previousNode)),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude(function(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,jqLite(previousNode)),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)});lastBlockMap=nextBlockMap})}}}}],NG_HIDE_CLASS="ng-hide",NG_HIDE_IN_PROGRESS_CLASS="ng-hide-animate",ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[value?"removeClass":"addClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[value?"addClass":"removeClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate",function($animate){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(){array.splice(index,1)}};scope.$watch(watchExpr,function(value){var i,ii;for(i=0,ii=previousLeaveAnimations.length;ii>i;++i)$animate.cancel(previousLeaveAnimations[i]);for(previousLeaveAnimations.length=0,i=0,ii=selectedScopes.length;ii>i;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy();var promise=previousLeaveAnimations[i]=$animate.leave(selected);promise.then(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=document.createComment(" end ngSwitchWhen: ");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)})})})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeDirective=ngDirective({restrict:"EAC",link:function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$transclude(function(clone){$element.empty(),$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],noopNgModelController={$setViewValue:noop,$render:noop},SelectController=["$element","$scope","$attrs",function($element,$scope,$attrs){var self=this,optionsMap=new HashMap;self.ngModelCtrl=noopNgModelController,self.unknownOption=jqLite(document.createElement("option")),self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";self.unknownOption.val(unknownVal),$element.prepend(self.unknownOption),$element.val(unknownVal)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop}),self.removeUnknownOption=function(){self.unknownOption.parent()&&self.unknownOption.remove()},self.readValue=function(){return self.removeUnknownOption(),$element.val()},self.writeValue=function(value){self.hasOption(value)?(self.removeUnknownOption(),$element.val(value),""===value&&self.emptyOption.prop("selected",!0)):null==value&&self.emptyOption?(self.removeUnknownOption(),$element.val("")):self.renderUnknownOption(value)},self.addOption=function(value,element){assertNotHasOwnProperty(value,'"option value"'),""===value&&(self.emptyOption=element);var count=optionsMap.get(value)||0;optionsMap.put(value,count+1)},self.removeOption=function(value){var count=optionsMap.get(value);count&&(1===count?(optionsMap.remove(value),""===value&&(self.emptyOption=undefined)):optionsMap.put(value,count-1))},self.hasOption=function(value){return!!optionsMap.get(value)}}],selectDirective=function(){return{restrict:"E",require:["select","?ngModel"],controller:SelectController,link:function(scope,element,attr,ctrls){var ngModelCtrl=ctrls[1];if(ngModelCtrl){var selectCtrl=ctrls[0];if(selectCtrl.ngModelCtrl=ngModelCtrl,ngModelCtrl.$render=function(){selectCtrl.writeValue(ngModelCtrl.$viewValue)},element.on("change",function(){scope.$apply(function(){ngModelCtrl.$setViewValue(selectCtrl.readValue())})}),attr.multiple){selectCtrl.readValue=function(){var array=[];return forEach(element.find("option"),function(option){option.selected&&array.push(option.value)}),array},selectCtrl.writeValue=function(value){var items=new HashMap(value);forEach(element.find("option"),function(option){option.selected=isDefined(items.get(option.value))})};var lastView,lastViewRef=NaN;scope.$watch(function(){lastViewRef!==ngModelCtrl.$viewValue||equals(lastView,ngModelCtrl.$viewValue)||(lastView=shallowCopy(ngModelCtrl.$viewValue),ngModelCtrl.$render()),lastViewRef=ngModelCtrl.$viewValue}),ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}}}}}},optionDirective=["$interpolate",function($interpolate){function chromeHack(optionElement){optionElement[0].hasAttribute("selected")&&(optionElement[0].selected=!0)}return{restrict:"E",priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),!0);interpolateFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.ngModelCtrl&&(interpolateFn?scope.$watch(interpolateFn,function(newVal,oldVal){attr.$set("value",newVal),oldVal!==newVal&&selectCtrl.removeOption(oldVal),selectCtrl.addOption(newVal,element),selectCtrl.ngModelCtrl.$render(),chromeHack(element)}):(selectCtrl.addOption(attr.value,element),selectCtrl.ngModelCtrl.$render(),chromeHack(element)),element.on("$destroy",function(){selectCtrl.removeOption(attr.value),selectCtrl.ngModelCtrl.$render()}))}}}}],styleDirective=valueFn({restrict:"E",terminal:!1}),requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(attr.required=!0,ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue)},attr.$observe("required",function(){ctrl.$validate()}))}}},patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",function(regex){if(isString(regex)&&regex.length>0&&(regex=new RegExp("^"+regex+"$")),regex&&!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));regexp=regex||undefined,ctrl.$validate()}),ctrl.$validators.pattern=function(value){return ctrl.$isEmpty(value)||isUndefined(regexp)||regexp.test(value)}}}}},maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=-1;attr.$observe("maxlength",function(value){var intVal=toInt(value);maxlength=isNaN(intVal)?-1:intVal,ctrl.$validate()}),ctrl.$validators.maxlength=function(modelValue,viewValue){return 0>maxlength||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlength}}}}},minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=0;attr.$observe("minlength",function(value){minlength=toInt(value)||0,ctrl.$validate()}),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength}}}}};window.angular.bootstrap||(bindJQuery(),publishExternalAPI(angular),jqLite(document).ready(function(){angularInit(document,bootstrap)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),define("angular",function(global){return function(){var ret;return ret||global.angular}}(this)),!function(){var a={},b=this,c=b.iso;"undefined"!=typeof module&&module.exports?module.exports=a:"undefined"!=typeof define&&define.amd?define("isoCountries",[],function(){return a}):b.iso=a,a.noConflict=function(){return b.iso=c,a},a.version="0.1",a.countries={AD:{value:"AD",name:"Andorra",names:["Andorre","Andorra"],region:"Europe",subregion:"Southern Europe",currency:"EUR",alpha2:"AD",alpha3:"AND",ioc:"AND",number:"020",tel:"376",latitude:"42 30 N",longitude:"1 30 E",un:"AD"},AE:{value:"AE",name:"United Arab Emirates",names:["United Arab Emirates","Vereinigte Arabische Emirate","Émirats Arabes Unis","Emiratos Árabes Unidos"],region:"Asia",subregion:"Western Asia",currency:"AED",alpha2:"AE",alpha3:"ARE",ioc:"UAE",number:"784",tel:"971",latitude:"24 00 N",longitude:"54 00 E",un:"AE"},AF:{value:"AF",name:"Afghanistan",names:["Afghanistan","Afganistán"],region:"Asia",subregion:"Southern Asia",currency:"AFN",alpha2:"AF",alpha3:"AFG",ioc:"AFG",number:"004",tel:"93",latitude:"33 00 N",longitude:"65 00 E",un:"AF"},AG:{value:"AG",name:"Antigua and Barbuda",names:["Antigua and Barbuda","Antigua und Barbuda","Antigua et Barbuda","Antigua y Barbuda"],region:"Americas",subregion:"Caribbean",currency:"XCD",alpha2:"AG",alpha3:"ATG",ioc:"ANT",number:"028",tel:"1",latitude:"17 03 N",longitude:"61 48 W",un:"AG"},AI:{value:"AI",name:"Anguilla",names:["Anguilla"],region:"Americas",subregion:"Caribbean",currency:"XCD",alpha2:"AI",alpha3:"AIA",ioc:null,number:"660",tel:"1",latitude:"18 15 N",longitude:"63 10 W",un:"AI"},AL:{value:"AL",name:"Albania",names:["Albania","Albanien","Albanie"],region:"Europe",subregion:"Southern Europe",currency:"ALL",alpha2:"AL",alpha3:"ALB",ioc:"ALB",number:"008",tel:"355",latitude:"41 00 N",longitude:"20 00 E",un:"AL"},AM:{value:"AM",name:"Armenia",names:["Armenia","Armenien","Arménie"],region:"Asia",subregion:"Western Asia",currency:"AMD",alpha2:"AM",alpha3:"ARM",ioc:"ARM",number:"051",tel:"374",latitude:"40 00 N",longitude:"45 00 E",un:"AM"},AN:{value:"AN",name:"Netherlands Antilles",names:["Netherlands Antilles","Niederländische Antillen","Antilles néerlandaises","Antillas Holandesas"],region:"Americas",subregion:"Caribbean",currency:"ANG",alpha2:"AN",alpha3:"ANT",ioc:"AHO",number:"530",tel:"599",latitude:"",longitude:"",un:"AN"},AO:{value:"AO",name:"Angola",names:["Angola"],region:"Africa",subregion:"Middle Africa",currency:"AOA",alpha2:"AO",alpha3:"AGO",ioc:"ANG",number:"024",tel:"244",latitude:"12 30 S",longitude:"18 30 E",un:"AO"},AQ:{value:"AQ",name:"Antarctica",names:["Antarctica","Antarktis","Antarctique","Antártida"],region:"",subregion:"",currency:null,alpha2:"AQ",alpha3:"ATA",ioc:null,number:"010",tel:"672",latitude:"90 00 S",longitude:"0 00 E",un:"AQ"},AR:{value:"AR",name:"Argentina",names:["Argentina","Argentinien","Argentine"],region:"Americas",subregion:"South America",currency:"ARS",alpha2:"AR",alpha3:"ARG",ioc:"ARG",number:"032",tel:"54",latitude:"34 00 S",longitude:"64 00 W",un:"AR"},AS:{value:"AS",name:"American Samoa",names:["American Samoa","Amerikanisch-Samoa","Samoa américaines","Samoa Americana"],region:"Oceania",subregion:"Polynesia",currency:"USD",alpha2:"AS",alpha3:"ASM",ioc:"ASA",number:"016",tel:"1",latitude:"14 20 S",longitude:"170 00 W",un:"AS"},AT:{value:"AT",name:"Austria",names:["Österreich","Autriche","Austria"],region:"Europe",subregion:"Western Europe",currency:"EUR",alpha2:"AT",alpha3:"AUT",ioc:"AUT",number:"040",tel:"43",latitude:"47 20 N",longitude:"13 20 E",un:"AT"},AU:{value:"AU",name:"Australia",names:["Australien","Australie","Australia"],region:"Oceania",subregion:"Australia and New Zealand",currency:"AUD",alpha2:"AU",alpha3:"AUS",ioc:"AUS",number:"036",tel:"61",latitude:"27 00 S",longitude:"133 00 E",un:"AU"},AW:{value:"AW",name:"Aruba",names:["Aruba"],region:"Americas",subregion:"Caribbean",currency:"AWG",alpha2:"AW",alpha3:"ABW",ioc:"ARU",number:"533",tel:"297",latitude:"12 30 N",longitude:"69 58 W",un:"AW"},AX:{value:"AX",name:"Åland Islands",names:["Åland Islands"],region:"Europe",subregion:"Northern Europe",currency:null,alpha2:"AX",alpha3:"ALA",ioc:null,number:"248",tel:"358",latitude:"",longitude:"",un:null},AZ:{value:"AZ",name:"Azerbaijan",names:["Azerbaijan","Aserbaidschan","Azerbaïdjan","Azerbaiyán"],region:"Asia",subregion:"Western Asia",currency:"AZN",alpha2:"AZ",alpha3:"AZE",ioc:"AZE",number:"031",tel:"994",latitude:"40 30 N",longitude:"47 30 E",un:"AZ"},BA:{value:"BA",name:"Bosnia and Herzegovina",names:["Bosnia and Herzegovina","Bosnien und Herzegowina","Bosnie et Herzégovine","Bosnia y Herzegovina"],region:"Europe",subregion:"Southern Europe",currency:"BAM",alpha2:"BA",alpha3:"BIH",ioc:"BIH",number:"070",tel:"387",latitude:"44 00 N",longitude:"18 00 E",un:"BA"},BB:{value:"BB",name:"Barbados",names:["Barbade","Barbados"],region:"Americas",subregion:"Caribbean",currency:"BBD",alpha2:"BB",alpha3:"BRB",ioc:"BAR",number:"052",tel:"1",latitude:"13 10 N",longitude:"59 32 W",un:"BB"},BD:{value:"BD",name:"Bangladesh",names:["Bangladesh","Bangladesch"],region:"Asia",subregion:"Southern Asia",currency:"BTD",alpha2:"BD",alpha3:"BGD",ioc:"BAN",number:"050",tel:"880",latitude:"24 00 N",longitude:"90 00 E",un:"BD"},BE:{value:"BE",name:"Belgium",names:["Belgium","Belgien","Belgique","Bélgica"],region:"Europe",subregion:"Western Europe",currency:"EUR",alpha2:"BE",alpha3:"BEL",ioc:"BEL",number:"056",tel:"32",latitude:"50 50 N",longitude:"4 00 E",un:"BE"},BF:{value:"BF",name:"Burkina Faso",names:["Burkina Faso"],region:"Africa",subregion:"Western Africa",currency:"XOF",alpha2:"BF",alpha3:"BFA",ioc:"BUR",number:"854",tel:"226",latitude:"13 00 N",longitude:"2 00 W",un:"BF"},BG:{value:"BG",name:"Bulgaria",names:["Bulgaria","Bulgarien","Bulgarie"],region:"Europe",subregion:"Eastern Europe",currency:"BGN",alpha2:"BG",alpha3:"BGR",ioc:"BUL",number:"100",tel:"359",latitude:"43 00 N",longitude:"25 00 E",un:"BG"},BH:{value:"BH",name:"Bahrain",names:["Bahrain","Bahreïn","Bahrein"],region:"Asia",subregion:"Western Asia",currency:"BHD",alpha2:"BH",alpha3:"BHR",ioc:"BRN",number:"048",tel:"973",latitude:"26 00 N",longitude:"50 33 E",un:"BH"},BI:{value:"BI",name:"Burundi",names:["Burundi"],region:"Africa",subregion:"Eastern Africa",currency:"BIF",alpha2:"BI",alpha3:"BDI",ioc:"BDI",number:"108",tel:"257",latitude:"3 30 S",longitude:"30 00 E",un:"BI"},BJ:{value:"BJ",name:"Benin",names:["Benin","Bénin"],region:"Africa",subregion:"Western Africa",currency:"XOF",alpha2:"BJ",alpha3:"BEN",ioc:"BEN",number:"204",tel:"229",latitude:"9 30 N",longitude:"2 15 E",un:"BJ"},BL:{value:"BL",name:"Saint Barthélemy",names:["Saint Barthélemy"],region:"Americas",subregion:"Caribbean",currency:null,alpha2:"BL",alpha3:"BLM",ioc:null,number:"652",tel:"590",latitude:"17 90 N",longitude:"62 85 W",un:null},BM:{value:"BM",name:"Bermuda",names:["Bermuda","Bermudes","Bermudas"],region:"Americas",subregion:"Northern America",currency:"BMD",alpha2:"BM",alpha3:"BMU",ioc:"BER",number:"060",tel:"1",latitude:"32 20 N",longitude:"64 45 W",un:"BM"},BN:{value:"BN",name:"Brunei Darussalam",names:["Brunei"],region:"Asia",subregion:"South-Eastern Asia",currency:"BND",alpha2:"BN",alpha3:"BRN",ioc:"BRU",number:"096",tel:"673",latitude:"4 30 N",longitude:"114 40 E",un:"BN"},BO:{value:"BO",name:"Bolivia",names:["Bolivia","Bolivien","Bolivie"],region:"Americas",subregion:"South America",currency:"BOB",alpha2:"BO",alpha3:"BOL",ioc:"BOL",number:"068",tel:"591",latitude:"17 00 S",longitude:"65 00 W",un:"BO"},BR:{value:"BR",name:"Brazil",names:["Brazil","Brasilien","Brésil","Brasil"],region:"Americas",subregion:"South America",currency:"BRL",alpha2:"BR",alpha3:"BRA",ioc:"BRA",number:"076",tel:"55",latitude:"10 00 S",longitude:"55 00 W",un:"BR"},BS:{value:"BS",name:"Bahamas",names:["Bahamas"],region:"Americas",subregion:"Caribbean",currency:"BSD",alpha2:"BS",alpha3:"BHS",ioc:"BAH",number:"044",tel:"1",latitude:"24 15 N",longitude:"76 00 W",un:"BS"},BT:{value:"BT",name:"Bhutan",names:["Bhutan","Bhoutan","Bután"],region:"Asia",subregion:"Southern Asia",currency:"BTN",alpha2:"BT",alpha3:"BTN",ioc:"BHU",number:"064",tel:"975",latitude:"27 30 N",longitude:"90 30 E",un:"BT"},BV:{value:"BV",name:"Bouvet Island",names:["Bouvet Island"],region:"",subregion:"",currency:"NOK",alpha2:"BV",alpha3:"BVT",ioc:null,number:"074",tel:"",latitude:"54 26 S",longitude:"3 24 E",un:null},BW:{value:"BW",name:"Botswana",names:["Botswana"],region:"Africa",subregion:"Southern Africa",currency:"BWP",alpha2:"BW",alpha3:"BWA",ioc:"BOT",number:"072",tel:"267",latitude:"22 00 S",longitude:"24 00 E",un:"BW"},BY:{value:"BY",name:"Belarus",names:["Belarus","Weißrussland","Biélorussie","Bielorrusia"],region:"Europe",subregion:"Eastern Europe",currency:"BYR",alpha2:"BY",alpha3:"BLR",ioc:"BLR",number:"112",tel:"375",latitude:"53 00 N",longitude:"28 00 E",un:"BY"},BZ:{value:"BZ",name:"Belize",names:["Belize","Belice"],region:"Americas",subregion:"Central America",currency:"BZD",alpha2:"BZ",alpha3:"BLZ",ioc:"BIZ",number:"084",tel:"501",latitude:"17 15 N",longitude:"88 45 W",un:"BZ"},CA:{value:"CA",name:"Canada",names:["Canada","Kanada","Canadá"],region:"Americas",subregion:"Northern America",currency:"CAD",alpha2:"CA",alpha3:"CAN",ioc:"CAN",number:"124",tel:"1",latitude:"60 00 N",longitude:"95 00 W",un:"CA"},CC:{value:"CC",name:"Cocos (Keeling) Islands",names:["Cocos (Keeling) Islands"],region:"Oceania",subregion:"Australia and New Zealand",currency:"AUD",alpha2:"CC",alpha3:"CCK",ioc:null,number:"166",tel:"61",latitude:"12 30 S",longitude:"96 50 E",un:"CC"},CD:{value:"CD",name:"Congo, The Democratic Republic Of The",names:["Congo (Dem. Rep.)","Kongo (Dem. Rep.)","Congo (Rep. Dem.)","Congo (Rep. Dem.)"],region:"Africa",subregion:"Middle Africa",currency:null,alpha2:"CD",alpha3:"COD",ioc:"COD",number:"180",tel:"243",latitude:"0 00 N",longitude:"25 00 E",un:"CD"},CF:{value:"CF",name:"Central African Republic",names:["Central African Republic","Zentralafrikanische Republik","République Centrafricaine","República Centroafricana"],region:"Africa",subregion:"Middle Africa",currency:"XAF",alpha2:"CF",alpha3:"CAF",ioc:"CAF",number:"140",tel:"236",latitude:"7 00 N",longitude:"21 00 E",un:"CF"},CG:{value:"CG",name:"Congo",names:["Congo","Kongo"],region:"Africa",subregion:"Middle Africa",currency:null,alpha2:"CG",alpha3:"COG",ioc:"CGO",number:"178",tel:"242",latitude:"1 00 S",longitude:"15 00 E",un:"CG"},CH:{value:"CH",name:"Switzerland",names:["Switzerland","Schweiz","Suisse","Suiza"],region:"Europe",subregion:"Western Europe",currency:"CHF",alpha2:"CH",alpha3:"CHE",ioc:"SUI",number:"756",tel:"41",latitude:"47 00 N",longitude:"8 00 E",un:"CH"},CI:{value:"CI",name:"Côte D'Ivoire",names:["Côte D'Ivoire"],region:"Africa",subregion:"Western Africa",currency:"XOF",alpha2:"CI",alpha3:"CIV",ioc:"CIV",number:"384",tel:"225",latitude:"8 00 N",longitude:"5 00 W",un:"CI"},CK:{value:"CK",name:"Cook Islands",names:["Cook Islands","Cookinseln","Îles Cook","Islas Cook"],region:"Oceania",subregion:"Polynesia",currency:"NZD",alpha2:"CK",alpha3:"COK",ioc:"COK",number:"184",tel:"682",latitude:"21 14 S",longitude:"159 46 W",un:"CK"},CL:{value:"CL",name:"Chile",names:["Chile"],region:"Americas",subregion:"South America",currency:"CLP",alpha2:"CL",alpha3:"CHL",ioc:"CHI",number:"152",tel:"56",latitude:"30 00 S",longitude:"71 00 W",un:"CL"},CM:{value:"CM",name:"Cameroon",names:["Cameroon","Kamerun","Cameroun","Camerún"],region:"Africa",subregion:"Middle Africa",currency:"XAF",alpha2:"CM",alpha3:"CMR",ioc:"CMR",number:"120",tel:"237",latitude:"6 00 N",longitude:"12 00 E",un:"CM"},CN:{value:"CN",name:"China",names:["China","Chine"],region:"Asia",subregion:"Eastern Asia",currency:"CNY",alpha2:"CN",alpha3:"CHN",ioc:"CHN",number:"156",tel:"86",latitude:"35 00 N",longitude:"105 00 E",un:"CN"},CO:{value:"CO",name:"Colombia",names:["Colombia","Kolumbien","Colombie"],region:"Americas",subregion:"South America",currency:"COP",alpha2:"CO",alpha3:"COL",ioc:"COL",number:"170",tel:"57",latitude:"4 00 N",longitude:"72 00 W",un:"CO"},CR:{value:"CR",name:"Costa Rica",names:["Costa Rica"],region:"Americas",subregion:"Central America",currency:"CRC",alpha2:"CR",alpha3:"CRI",ioc:"CRC",number:"188",tel:"506",latitude:"10 00 N",longitude:"84 00 W",un:"CR"},CU:{value:"CU",name:"Cuba",names:["Cuba","Kuba"],region:"Americas",subregion:"Caribbean",currency:"CUP",alpha2:"CU",alpha3:"CUB",ioc:"CUB",number:"192",tel:"53",latitude:"21 30 N",longitude:"80 00 W",un:"CU"},CV:{value:"CV",name:"Cape Verde",names:["Cape Verde","Kap Verde","Cap Vert","Cabo Verde"],region:"Africa",subregion:"Western Africa",currency:"CVE",alpha2:"CV",alpha3:"CPV",ioc:"CPV",number:"132",tel:"238",latitude:"16 00 N",longitude:"24 00 W",un:"CV"},CX:{value:"CX",name:"Christmas Island",names:["Christmas Island"],region:"Oceania",subregion:"Australia and New Zealand",currency:"AUD",alpha2:"CX",alpha3:"CXR",ioc:null,number:"162",tel:"61",latitude:"10 30 S",longitude:"105 40 E",un:"CX"},CY:{value:"CY",name:"Cyprus",names:["Cyprus","Zypern","Chypre","Chipre"],region:"Asia",subregion:"Western Asia",currency:"EUR",alpha2:"CY",alpha3:"CYP",
ioc:"CYP",number:"196",tel:"357",latitude:"35 00 N",longitude:"33 00 E",un:"CY"},CZ:{value:"CZ",name:"Czech Republic",names:["Czech Republic","Tschechische Republik","République Tchèque","República Checa"],region:"Europe",subregion:"Eastern Europe",currency:"CZK",alpha2:"CZ",alpha3:"CZE",ioc:"CZE",number:"203",tel:"420",latitude:"49 45 N",longitude:"15 30 E",un:"CZ"},DE:{value:"DE",name:"Germany",names:["Germany","Deutschland","Allemagne","Alemania"],region:"Europe",subregion:"Western Europe",currency:"EUR",alpha2:"DE",alpha3:"DEU",ioc:"GER",number:"276",tel:"49",latitude:"51 00 N",longitude:"9 00 E",un:"DE"},DJ:{value:"DJ",name:"Djibouti",names:["Djibouti"],region:"Africa",subregion:"Eastern Africa",currency:"DJF",alpha2:"DJ",alpha3:"DJI",ioc:"DJI",number:"262",tel:"253",latitude:"11 30 N",longitude:"43 00 E",un:"DJ"},DK:{value:"DK",name:"Denmark",names:["Denmark","Dänemark","Danemark","Dinamarca"],region:"Europe",subregion:"Northern Europe",currency:"DKK",alpha2:"DK",alpha3:"DNK",ioc:"DEN",number:"208",tel:"45",latitude:"56 00 N",longitude:"10 00 E",un:"DK"},DM:{value:"DM",name:"Dominica",names:["Dominica"],region:"Americas",subregion:"Caribbean",currency:"XCD",alpha2:"DM",alpha3:"DMA",ioc:"DMA",number:"212",tel:"1",latitude:"15 25 N",longitude:"61 20 W",un:"DM"},DO:{value:"DO",name:"Dominican Republic",names:["Dominican Republic","Dominikanische Republik","République Dominicaine","República Dominicana"],region:"Americas",subregion:"Caribbean",currency:"DOP",alpha2:"DO",alpha3:"DOM",ioc:"DOM",number:"214",tel:"1",latitude:"19 00 N",longitude:"70 40 W",un:"DO"},DZ:{value:"DZ",name:"Algeria",names:["Algeria","Algerien","Algérie","Argelia"],region:"Africa",subregion:"Northern Africa",currency:"DZD",alpha2:"DZ",alpha3:"DZA",ioc:"ALG",number:"012",tel:"213",latitude:"28 00 N",longitude:"3 00 E",un:"DZ"},EC:{value:"EC",name:"Ecuador",names:["Équateur","Ecuador"],region:"Americas",subregion:"South America",currency:"USD",alpha2:"EC",alpha3:"ECU",ioc:"ECU",number:"218",tel:"593",latitude:"2 00 S",longitude:"77 30 W",un:"EC"},EE:{value:"EE",name:"Estonia",names:["Estland","Estonie","Estonia"],region:"Europe",subregion:"Northern Europe",currency:"EEK",alpha2:"EE",alpha3:"EST",ioc:"EST",number:"233",tel:"372",latitude:"59 00 N",longitude:"26 00 E",un:"EE"},EG:{value:"EG",name:"Egypt",names:["Egypt","Ägypten","Égypte","Egipto"],region:"Africa",subregion:"Northern Africa",currency:"EGP",alpha2:"EG",alpha3:"EGY",ioc:"EGY",number:"818",tel:"20",latitude:"27 00 N",longitude:"30 00 E",un:"EG"},EH:{value:"EH",name:"Western Sahara",names:["Western Sahara","Westsahara","Sahara Occidental","Sahara Occidental"],region:"Africa",subregion:"Northern Africa",currency:"MAD",alpha2:"EH",alpha3:"ESH",ioc:null,number:"732",tel:"212",latitude:"24 30 N",longitude:"13 00 W",un:"EH"},ER:{value:"ER",name:"Eritrea",names:["Érythrée","Eritrea"],region:"Africa",subregion:"Eastern Africa",currency:"ETB",alpha2:"ER",alpha3:"ERI",ioc:"ERI",number:"232",tel:"291",latitude:"15 00 N",longitude:"39 00 E",un:"ER"},ES:{value:"ES",name:"Spain",names:["Spain","Spanien","Espagne","España"],region:"Europe",subregion:"Southern Europe",currency:"EUR",alpha2:"ES",alpha3:"ESP",ioc:"ESP",number:"724",tel:"34",latitude:"40 00 N",longitude:"4 00 W",un:"ES"},ET:{value:"ET",name:"Ethiopia",names:["Ethiopia","Äthiopien","Éthiopie","Etiopía"],region:"Africa",subregion:"Eastern Africa",currency:"ETB",alpha2:"ET",alpha3:"ETH",ioc:"ETH",number:"231",tel:"251",latitude:"8 00 N",longitude:"38 00 E",un:"ET"},FI:{value:"FI",name:"Finland",names:["Finland","Finnland","Finlande","Finlandia"],region:"Europe",subregion:"Northern Europe",currency:"EUR",alpha2:"FI",alpha3:"FIN",ioc:null,number:"246",tel:"358",latitude:"64 00 N",longitude:"26 00 E",un:null},FJ:{value:"FJ",name:"Fiji",names:["Fiji","Fidschi","Fidji"],region:"Oceania",subregion:"Melanesia",currency:"USD",alpha2:"FJ",alpha3:"FJI",ioc:"FIJ",number:"242",tel:"679",latitude:"18 00 S",longitude:"175 00 E",un:"FJ"},FK:{value:"FK",name:"Falkland Islands (Malvinas)",names:["Falkland Islands","Falklandinseln","Îles Malouines","Islas Malvinas"],region:"Americas",subregion:"South America",currency:"FKP",alpha2:"FK",alpha3:"FLK",ioc:null,number:"238",tel:"500",latitude:"51 45 S",longitude:"59 00 W",un:"FK"},FM:{value:"FM",name:"Micronesia, Federated States Of",names:["Micronesia","Mikronesien","Micronésie","Micronesia"],region:"Oceania",subregion:"Micronesia",currency:"USD",alpha2:"FM",alpha3:"FSM",ioc:"FSM",number:"583",tel:"691",latitude:"6 55 N",longitude:"158 15 E",un:"FM"},FO:{value:"FO",name:"Faroe Islands",names:["Faroe Islands","Färöer-Inseln","Îles Féroé","Islas Faroe"],region:"Europe",subregion:"Northern Europe",currency:"DKK",alpha2:"FO",alpha3:"FRO",ioc:"FRO",number:"234",tel:"298",latitude:"62 00 N",longitude:"7 00 W",un:"FO"},FR:{value:"FR",name:"France",names:["France","Frankreich","Francia","the French Republic"],region:"Europe",subregion:"Western Europe",currency:"EUR",alpha2:"FR",alpha3:"FRA",ioc:"FRA",number:"250",tel:"33",latitude:"46 00 N",longitude:"2 00 E ",un:"FR"},GA:{value:"GA",name:"Gabon",names:["Gabon","Gabun","Gabón"],region:"Africa",subregion:"Middle Africa",currency:"XAF",alpha2:"GA",alpha3:"GAB",ioc:"GAB",number:"266",tel:"241",latitude:"1 00 S",longitude:"11 45 E",un:"GA"},GB:{value:"GB",name:"United Kingdom",names:["United Kingdom","GroÃÂbritannien","Royaume-Uni","Reino Unido"],region:"Europe",subregion:"Northern Europe",currency:"GBP",alpha2:"GB",alpha3:"GBR",ioc:null,number:"826",tel:"44",latitude:"54 00 N",longitude:"2 00 W",un:null},GD:{value:"GD",name:"Grenada",names:["Grenada"],region:"Americas",subregion:"Caribbean",currency:"XCD",alpha2:"GD",alpha3:"GRD",ioc:"GRN",number:"308",tel:"1",latitude:"12 07 N",longitude:"61 40 W",un:"GD"},GE:{value:"GE",name:"Georgia",names:["Georgien","Géorgie","Georgia"],region:"Asia",subregion:"Western Asia",currency:"GEL",alpha2:"GE",alpha3:"GEO",ioc:"GEO",number:"268",tel:"995",latitude:"42 00 N",longitude:"43 30 E",un:"GE"},GF:{value:"GF",name:"French Guiana",names:["French Guiana","Französisch Guyana","Guyane française","Guayana Francesa"],region:"Americas",subregion:"South America",currency:"EUR",alpha2:"GF",alpha3:"GUF",ioc:null,number:"254",tel:"594",latitude:"4 00 N",longitude:"53 00 W ",un:"GF"},GG:{value:"GG",name:"Guernsey",names:["Guernsey and Alderney","Guernsey und Alderney","Guernsey et Alderney","Guernsey y Alderney"],region:"Europe",subregion:"Northern Europe",currency:"GGP",alpha2:"GG",alpha3:"GGY",ioc:null,number:"831",tel:"44",latitude:"49 28 N",longitude:"2 35 W",un:null},GH:{value:"GH",name:"Ghana",names:["Ghana"],region:"Africa",subregion:"Western Africa",currency:"GHS",alpha2:"GH",alpha3:"GHA",ioc:"GHA",number:"288",tel:"233",latitude:"8 00 N",longitude:"2 00 W",un:"GH"},GI:{value:"GI",name:"Gibraltar",names:["Gibraltar"],region:"Europe",subregion:"Southern Europe",currency:"GIP",alpha2:"GI",alpha3:"GIB",ioc:null,number:"292",tel:"350",latitude:"36 08 N",longitude:"5 21 W",un:"GI"},GL:{value:"GL",name:"Greenland",names:["Greenland","Grönland","Groenland","Groenlandia"],region:"Americas",subregion:"Northern America",currency:"DKK",alpha2:"GL",alpha3:"GRL",ioc:null,number:"304",tel:"299",latitude:"72 00 N",longitude:"40 00 W",un:"GL"},GM:{value:"GM",name:"Gambia",names:["Gambia"],region:"Africa",subregion:"Western Africa",currency:"GMD",alpha2:"GM",alpha3:"GMB",ioc:"GAM",number:"270",tel:"220",latitude:"13 28 N",longitude:"16 34 W",un:"GM"},GN:{value:"GN",name:"Guinea",names:["Guinea","Guinea","Guinée","Guinea"],region:"Africa",subregion:"Western Africa",currency:"GNF",alpha2:"GN",alpha3:"GIN",ioc:"GUI",number:"324",tel:"224",latitude:"11 00 N",longitude:"10 00 W",un:"GN"},GP:{value:"GP",name:"Guadeloupe",names:["Guadeloupe","Guadalupe"],region:"Americas",subregion:"Caribbean",currency:"EUR",alpha2:"GP",alpha3:"GLP",ioc:null,number:"312",tel:"590",latitude:"",longitude:"",un:"GP"},GQ:{value:"GQ",name:"Equatorial Guinea",names:["Equatorial Guinea","Äquatorial-Guinea","Guinée Équatoriale","Guinea Ecuatorial"],region:"Africa",subregion:"Middle Africa",currency:null,alpha2:"GQ",alpha3:"GNQ",ioc:"GEQ",number:"226",tel:"240",latitude:"2 00 N",longitude:"10 00 E",un:"GQ"},GR:{value:"GR",name:"Greece",names:["Greece","Griechenland","Grèce","Grecia"],region:"Europe",subregion:"Southern Europe",currency:"EUR",alpha2:"GR",alpha3:"GRC",ioc:"GRE",number:"300",tel:"30",latitude:"39 00 N",longitude:"22 00 E",un:"GR"},GS:{value:"GS",name:"South Georgia and the South Sandwich Islands",names:["South Georgia and the South Sandwich Islands"],region:"Americas",subregion:"South America",currency:null,alpha2:"GS",alpha3:"SGS",ioc:null,number:"239",tel:"500",latitude:"54 30 S",longitude:"37 00 W",un:"GS"},GT:{value:"GT",name:"Guatemala",names:["Guatemala"],region:"Americas",subregion:"Central America",currency:"GTQ",alpha2:"GT",alpha3:"GTM",ioc:"GUA",number:"320",tel:"502",latitude:"15 30 N",longitude:"90 15 W",un:"GT"},GU:{value:"GU",name:"Guam",names:["Guam"],region:"Oceania",subregion:"Micronesia",currency:"USD",alpha2:"GU",alpha3:"GUM",ioc:"GUM",number:"316",tel:"1",latitude:"13 28 N",longitude:"144 47 E",un:"GU"},GW:{value:"GW",name:"Guinea-Bissau",names:["Guinea-Bissau","Guinée-Bissau"],region:"Africa",subregion:"Western Africa",currency:"XOF",alpha2:"GW",alpha3:"GNB",ioc:"GBS",number:"624",tel:"245",latitude:"12 00 N",longitude:"15 00 W",un:"GW"},GY:{value:"GY",name:"Guyana",names:["Guyana"],region:"Americas",subregion:"South America",currency:"GYD",alpha2:"GY",alpha3:"GUY",ioc:"GUY",number:"328",tel:"592",latitude:"5 00 N",longitude:"59 00 W",un:"GY"},HK:{value:"HK",name:"Hong Kong",names:["Hong Kong"],region:"Asia",subregion:"Eastern Asia",currency:"HKD",alpha2:"HK",alpha3:"HKG",ioc:"HKG",number:"344",tel:"852",latitude:"22 15 N",longitude:"114 10 E",un:"HK"},HM:{value:"HM",name:"Heard and McDonald Islands",names:["Heard and McDonald Islands"],region:"",subregion:"",currency:"AUD",alpha2:"HM",alpha3:"HMD",ioc:null,number:"334",tel:"",latitude:"53 06 S",longitude:"72 31 E",un:"HM"},HN:{value:"HN",name:"Honduras",names:["Honduras"],region:"Americas",subregion:"Central America",currency:"HNL",alpha2:"HN",alpha3:"HND",ioc:"HON",number:"340",tel:"504",latitude:"15 00 N",longitude:"86 30 W",un:"HN"},HR:{value:"HR",name:"Croatia",names:["Croatia","Kroatien","Croatie","Croacia"],region:"Europe",subregion:"Southern Europe",currency:"HRK",alpha2:"HR",alpha3:"HRV",ioc:"CRO",number:"191",tel:"385",latitude:"45 10 N",longitude:"15 30 E",un:"HR"},HT:{value:"HT",name:"Haiti",names:["Haiti"],region:"Americas",subregion:"Caribbean",currency:"USD",alpha2:"HT",alpha3:"HTI",ioc:"HAI",number:"332",tel:"509",latitude:"19 00 N",longitude:"72 25 W",un:"HT"},HU:{value:"HU",name:"Hungary",names:["Hungary","Ungarn","Hongrie","Hungría"],region:"Europe",subregion:"Eastern Europe",currency:"HUF",alpha2:"HU",alpha3:"HUN",ioc:"HUN",number:"348",tel:"36",latitude:"47 00 N",longitude:"20 00 E",un:"HU"},ID:{value:"ID",name:"Indonesia",names:["Indonesia","Indonesien","Indonésie"],region:"Asia",subregion:"South-Eastern Asia",currency:"IDR",alpha2:"ID",alpha3:"IDN",ioc:"INA",number:"360",tel:"62",latitude:"5 00 S",longitude:"120 00 E",un:"ID"},IE:{value:"IE",name:"Ireland",names:["Ireland","Irland","Irlande","Irlanda"],region:"Europe",subregion:"Northern Europe",currency:"EUR",alpha2:"IE",alpha3:"IRL",ioc:"IRL",number:"372",tel:"353",latitude:"53 00 N",longitude:"8 00 W",un:"IE"},IL:{value:"IL",name:"Israel",names:["Israël","Israel"],region:"Asia",subregion:"Western Asia",currency:"ILS",alpha2:"IL",alpha3:"ISR",ioc:"ISR",number:"376",tel:"972",latitude:"31 30 N",longitude:"34 45 E",un:"IL"},IM:{value:"IM",name:"Isle of Man",names:["Isle of Man","Man","Île de Man","Isla de Man"],region:"Europe",subregion:"Northern Europe",currency:"IMP",alpha2:"IM",alpha3:"IMN",ioc:null,number:"833",tel:"44",latitude:"54 15 N",longitude:"4 30 W",un:null},IN:{value:"IN",name:"India",names:["India","Indien","Inde"],region:"Asia",subregion:"Southern Asia",currency:"INR",alpha2:"IN",alpha3:"IND",ioc:"IND",number:"356",tel:"91",latitude:"20 00 N",longitude:"77 00 E",un:"IN"},IO:{value:"IO",name:"British Indian Ocean Territory",names:["British Indian Ocean Territory"],region:"Africa",subregion:"Eastern Africa",currency:"USD",alpha2:"IO",alpha3:"IOT",ioc:null,number:"086",tel:"246",latitude:"6 00 S",longitude:"71 30 E",un:"IO"},IQ:{value:"IQ",name:"Iraq",names:["Iraq","Irak"],region:"Asia",subregion:"Western Asia",currency:"IQD",alpha2:"IQ",alpha3:"IRQ",ioc:"IRQ",number:"368",tel:"964",latitude:"33 00 N",longitude:"44 00 E",un:"IQ"},IR:{value:"IR",name:"Iran, Islamic Republic Of",names:["Iran","Irán"],region:"Asia",subregion:"Southern Asia",currency:"IRR",alpha2:"IR",alpha3:"IRN",ioc:"IRI",number:"364",tel:"98",latitude:"32 00 N",longitude:"53 00 E",un:"IR"},IS:{value:"IS",name:"Iceland",names:["Iceland","Island","Islande","Islandia"],region:"Europe",subregion:"Northern Europe",currency:"ISK",alpha2:"IS",alpha3:"ISL",ioc:"ISL",number:"352",tel:"354",latitude:"65 00 N",longitude:"18 00 W",un:"IS"},IT:{value:"IT",name:"Italy",names:["Italy","Italien","Italie","Italia"],region:"Europe",subregion:"Southern Europe",currency:"EUR",alpha2:"IT",alpha3:"ITA",ioc:"ITA",number:"380",tel:"39",latitude:"42 50 N",longitude:"12 50 E",un:"IT"},JE:{value:"JE",name:"Jersey",names:["Jersey"],region:"Europe",subregion:"Northern Europe",currency:"JEP",alpha2:"JE",alpha3:"JEY",ioc:null,number:"832",tel:"44",latitude:"49 15 N",longitude:"2 10 W",un:null},JM:{value:"JM",name:"Jamaica",names:["Jamaica","Jamaika","Jamaïque"],region:"Americas",subregion:"Caribbean",currency:"JMD",alpha2:"JM",alpha3:"JAM",ioc:"JAM",number:"388",tel:"1",latitude:"18 15 N",longitude:"77 30 W",un:"JM"},JO:{value:"JO",name:"Jordan",names:["Jordan","Jordanien","Jordanie","Jordania"],region:"Asia",subregion:"Western Asia",currency:"JOD",alpha2:"JO",alpha3:"JOR",ioc:"JOR",number:"400",tel:"962",latitude:"31 00 N",longitude:"36 00 E",un:"JO"},JP:{value:"JP",name:"Japan",names:["Japan","Japan","Japon","Japón"],region:"Asia",subregion:"Eastern Asia",currency:"JPY",alpha2:"JP",alpha3:"JPN",ioc:"JPN",number:"392",tel:"81",latitude:"36 00 N",longitude:"138 00 E",un:"JP"},KE:{value:"KE",name:"Kenya",names:["Kenya","Kenia","Kenya","Kenia"],region:"Africa",subregion:"Eastern Africa",currency:"KES",alpha2:"KE",alpha3:"KEN",ioc:"KEN",number:"404",tel:"254",latitude:"1 00 N",longitude:"38 00 E",un:"KE"},KG:{value:"KG",name:"Kyrgyzstan",names:["Kyrgyzstan","Kirgisistan","Kirghizistan","Kirguizistán"],region:"Asia",subregion:"Central Asia",currency:"KGS",alpha2:"KG",alpha3:"KGZ",ioc:"KGZ",number:"417",tel:"996",latitude:"41 00 N",longitude:"75 00 E",un:"KG"},KH:{value:"KH",name:"Cambodia",names:["Cambodia","Kambodscha","Cambodge","Camboya"],region:"Asia",subregion:"South-Eastern Asia",currency:"KHR",alpha2:"KH",alpha3:"KHM",ioc:"CAM",number:"116",tel:"855",latitude:"13 00 N",longitude:"105 00 E",un:"KH"},KI:{value:"KI",name:"Kiribati",names:["Kiribati","Kiribati","Kiribati","Kiribati"],region:"Oceania",subregion:"Micronesia",currency:"AUD",alpha2:"KI",alpha3:"KIR",ioc:"KIR",number:"296",tel:"686",latitude:"1 25 N",longitude:"173 00 E",un:"KI"},KM:{value:"KM",name:"Comoros",names:["Comoros","Komoren","Comores"],region:"Africa",subregion:"Eastern Africa",currency:"KMF",alpha2:"KM",alpha3:"COM",ioc:"COM",number:"174",tel:"269",latitude:"12 10 S",longitude:"44 15 E",un:"KM"},KN:{value:"KN",name:"Saint Kitts And Nevis",names:["Saint Kitts and Nevis","Saint Kitts et Nevis","Saint Kitts y Nevis"],region:"Americas",subregion:"Caribbean",currency:"XCD",alpha2:"KN",alpha3:"KNA",ioc:"SKN",number:"659",tel:"1",latitude:"17 20 N",longitude:"62 45 W",un:"KN"},KP:{value:"KP",name:"Korea, Democratic People's Republic Of",names:["Korea (North)","Nordkorea","Corée du Nord","Corea del Norte"],region:"Asia",subregion:"Eastern Asia",currency:"KPW",alpha2:"KP",alpha3:"PRK",ioc:"PRK",number:"408",tel:"850",latitude:"40 00 N",longitude:"127 00 E",un:"KP"},KR:{value:"KR",name:"Korea, Republic of",names:["Korea (South)","Südkorea","Corée du Sud","Corea del Sur"],region:"Asia",subregion:"Eastern Asia",currency:"KRW",alpha2:"KR",alpha3:"KOR",ioc:"KOR",number:"410",tel:"82",latitude:"37 00 N",longitude:"127 30 E",un:"KR"},KW:{value:"KW",name:"Kuwait",names:["Koweït","Kuwait"],region:"Asia",subregion:"Western Asia",currency:"KWD",alpha2:"KW",alpha3:"KWT",ioc:"KUW",number:"414",tel:"965",latitude:"29 30 N",longitude:"45 45 E",un:"KW"},KY:{value:"KY",name:"Cayman Islands",names:["Cayman Islands","Cayman-Inseln","Îles Caïmans","Islas Caimán"],region:"Americas",subregion:"Caribbean",currency:"KYD",alpha2:"KY",alpha3:"CYM",ioc:"CAY",number:"136",tel:"1",latitude:"19 30 N",longitude:"80 30 W",un:"KY"},KZ:{value:"KZ",name:"Kazakhstan",names:["Kazakhstan","Kasachstan","Kazakhstan","Kazajistán"],region:"Asia",subregion:"Central Asia",currency:"KZT",alpha2:"KZ",alpha3:"KAZ",ioc:"KAZ",number:"398",tel:"7",latitude:"48 00 N",longitude:"68 00 E",un:"KZ"},LA:{value:"LA",name:"Lao People's Democratic Republic",names:["Laos","Laos","Laos","Laos"],region:"Asia",subregion:"South-Eastern Asia",currency:"LAK",alpha2:"LA",alpha3:"LAO",ioc:"LAO",number:"418",tel:"856",latitude:"18 00 N",longitude:"105 00 E",un:"LA",commonname:"Laos"},LB:{value:"LB",name:"Lebanon",names:["Lebanon","Libanon","Liban","Líbano"],region:"Asia",subregion:"Western Asia",currency:"LBP",alpha2:"LB",alpha3:"LBN",ioc:"LIB",number:"422",tel:"961",latitude:"33 50 N",longitude:"35 50 E",un:"LB"},LC:{value:"LC",name:"Saint Lucia",names:["Saint Lucia","Saint-Lucie","Santa Lucía"],region:"Americas",subregion:"Caribbean",currency:"XCD",alpha2:"LC",alpha3:"LCA",ioc:"LCA",number:"662",tel:"1",latitude:"13 53 N",longitude:"60 58 W",un:"LC"},LI:{value:"LI",name:"Liechtenstein",names:["Liechtenstein"],region:"Europe",subregion:"Western Europe",currency:"CHF",alpha2:"LI",alpha3:"LIE",ioc:"LIE",number:"438",tel:"423",latitude:"47 16 N",longitude:"9 32 E",un:"LI"},LK:{value:"LK",name:"Sri Lanka",names:["Sri Lanka"],region:"Asia",subregion:"Southern Asia",currency:"LKR",alpha2:"LK",alpha3:"LKA",ioc:"SRI",number:"144",tel:"94",latitude:"7 00 N",longitude:"81 00 E",un:"LK"},LR:{value:"LR",name:"Liberia",names:["Liberia","Liberia","Liberia","Liberia"],region:"Africa",subregion:"Western Africa",currency:"LRD",alpha2:"LR",alpha3:"LBR",ioc:"LBR",number:"430",tel:"231",latitude:"6 30 N",longitude:"9 30 W",un:"LR"},LS:{value:"LS",name:"Lesotho",names:["Lesotho","Lesotho","Lesotho","Lesotho"],region:"Africa",subregion:"Southern Africa",currency:"LSL",alpha2:"LS",alpha3:"LSO",ioc:"LES",number:"426",tel:"266",latitude:"29 30 S",longitude:"28 30 E",un:"LS"},LT:{value:"LT",name:"Lithuania",names:["Lithuania","Litauen","Lituanie","Lituania"],region:"Europe",subregion:"Northern Europe",currency:"LTL",alpha2:"LT",alpha3:"LTU",ioc:"LTU",number:"440",tel:"370",latitude:"56 00 N",longitude:"24 00 E",un:"LT"},LU:{value:"LU",name:"Luxembourg",names:["Luxembourg","Luxemburg","Luxembourg","Luxemburgo"],region:"Europe",subregion:"Western Europe",currency:"EUR",alpha2:"LU",alpha3:"LUX",ioc:"LUX",number:"442",tel:"352",latitude:"49 45 N",longitude:"6 10 E",un:"LU"},LV:{value:"LV",name:"Latvia",names:["Latvia","Lettland","Lettonie","Letonia"],region:"Europe",subregion:"Northern Europe",currency:"LVL",alpha2:"LV",alpha3:"LVA",ioc:"LAT",number:"428",tel:"371",latitude:"57 00 N",longitude:"25 00 E",un:"LV"},LY:{value:"LY",name:"Libyan Arab Jamahiriya",names:["Libya","Libyen","Libye","Libia"],region:"Africa",subregion:"Northern Africa",currency:"LYD",alpha2:"LY",alpha3:"LBY",ioc:"LBA",number:"434",tel:"218",latitude:"25 00 N",longitude:"17 00 E",un:"LY"},MA:{value:"MA",name:"Morocco",names:["Morocco","Marokko","Maroc","Marruecos"],region:"Africa",subregion:"Northern Africa",currency:"MAD",alpha2:"MA",alpha3:"MAR",ioc:"MAR",number:"504",tel:"212",latitude:"32 00 N",longitude:"5 00 W",un:"MA"},MC:{value:"MC",name:"Monaco",names:["Monaco","Mónaco"],region:"Europe",subregion:"Western Europe",currency:"EUR",alpha2:"MC",alpha3:"MCO",ioc:"MON",number:"492",tel:"377",latitude:"43 44 N",longitude:"7 24 E",un:"MC"},MD:{value:"MD",name:"Moldova, Republic of",names:["Moldova","Moldawien","Moldavie","Moldavia","the Republic of Moldova"],region:"Europe",subregion:"Eastern Europe",currency:"MDL",alpha2:"MD",alpha3:"MDA",ioc:"MDA",number:"498",tel:"373",latitude:"47 00 N",longitude:"29 00 E",un:"MD"},ME:{value:"ME",name:"Montenegro",names:["Crna Gora","Montenegro"],region:"Europe",subregion:"Southern Europe",currency:"EUR",alpha2:"ME",alpha3:"MNE",ioc:"MNE",number:"499",tel:"382",latitude:"42 30 N",longitude:"19 18 E",un:"ME"},MF:{value:"MF",name:"Saint Martin",names:["Saint Martin"],region:"Americas",subregion:"Caribbean",currency:"EUR",alpha2:"MF",alpha3:"MAF",ioc:null,number:"663",tel:"590",latitude:"18 05 N",longitude:"63 57 W",un:null},MG:{value:"MG",name:"Madagascar",names:["Madagascar","Madagaskar","the Republic of Madagascar"],region:"Africa",subregion:"Eastern Africa",currency:null,alpha2:"MG",alpha3:"MDG",ioc:"MAD",number:"450",tel:"261",latitude:"20 00 S",longitude:"47 00 E",un:"MG"},MH:{value:"MH",name:"Marshall Islands",names:["Marshall Islands","Marshall-Inseln","Îles Marshall","Islas Marshall"],region:"Oceania",subregion:"Micronesia",currency:"USD",alpha2:"MH",alpha3:"MHL",ioc:"MHL",number:"584",tel:"692",latitude:"9 00 N",longitude:"168 00 E",un:"MH"},MK:{value:"MK",name:"Macedonia, the Former Yugoslav Republic Of",names:["Macedonia","Mazedonien","Macédoine","Macedonia"],region:"Europe",subregion:"Southern Europe",currency:null,alpha2:"MK",alpha3:"MKD",ioc:"MKD",number:"807",tel:"389",latitude:"41 50 N",longitude:"22 00 E",un:"MK"},ML:{value:"ML",name:"Mali",names:["Mali"],region:"Africa",subregion:"Western Africa",currency:"XOF",alpha2:"ML",alpha3:"MLI",ioc:"MLI",number:"466",tel:"223",latitude:"17 00 N",longitude:"4 00 W",un:"ML"},MM:{value:"MM",name:"Myanmar",names:["Myanmar","Myanmar","Myanmar","Myanmar"],region:"Asia",subregion:"South-Eastern Asia",currency:"MNK",alpha2:"MM",alpha3:"MMR",ioc:"MYA",number:"104",tel:"95",latitude:"22 00 N",longitude:"98 00 E",un:"MM"},MN:{value:"MN",name:"Mongolia",names:["Mongolei","Mongolie","Mongolia"],region:"Asia",subregion:"Eastern Asia",currency:"MNT",alpha2:"MN",alpha3:"MNG",ioc:"MGL",number:"496",tel:"976",latitude:"46 00 N",longitude:"105 00 E",un:"MN"},MO:{value:"MO",name:"Macao",names:["Macao"],region:"Asia",subregion:"Eastern Asia",currency:"MOP",alpha2:"MO",alpha3:"MAC",ioc:null,number:"446",tel:"853",latitude:"22 10 N",longitude:"113 33 E",un:"MO"},MP:{value:"MP",name:"Northern Mariana Islands",names:["Northern Mariana Islands","Nördliche Marianen","Mariannes du Nord","Islas Marianas del Norte"],region:"Oceania",subregion:"Micronesia",currency:"USD",alpha2:"MP",alpha3:"MNP",ioc:null,number:"580",tel:"1",latitude:"15 12 N",longitude:"145 45 E",un:"MP"},MQ:{value:"MQ",name:"Martinique",names:["Martinique","Martinique","Martinique","Martinica"],region:"Americas",subregion:"Caribbean",currency:"EUR",alpha2:"MQ",alpha3:"MTQ",ioc:null,number:"474",tel:"596",latitude:"",longitude:"",un:"MQ"},MR:{value:"MR",name:"Mauritania",names:["Mauritania","Mauretanien","Mauritanie","Mauritania"],region:"Africa",subregion:"Western Africa",currency:"MRO",alpha2:"MR",alpha3:"MRT",ioc:"MTN",number:"478",tel:"222",latitude:"20 00 N",longitude:"12 00 W",un:"MR"},MS:{value:"MS",name:"Montserrat",names:["Montserrat","Montserrat","Montserrat","Montserrat"],region:"Americas",subregion:"Caribbean",currency:"XCD",alpha2:"MS",alpha3:"MSR",ioc:null,number:"500",tel:"1",latitude:"16 45 N",longitude:"62 12 W",un:"MS"},MT:{value:"MT",name:"Malta",names:["Malta","Malta","Malte","Malta"],region:"Europe",subregion:"Southern Europe",currency:"EUR",alpha2:"MT",alpha3:"MLT",ioc:"MLT",number:"470",tel:"356",latitude:"35 50 N",longitude:"14 35 E",un:"MT"},MU:{value:"MU",name:"Mauritius",names:["Mauritius","Mauritius","Île Maurice","Mauricio"],region:"Africa",subregion:"Eastern Africa",currency:"MUR",alpha2:"MU",alpha3:"MUS",ioc:"MRI",number:"480",tel:"230",latitude:"20 17 S",longitude:"57 33 E",un:"MU"},MV:{value:"MV",name:"Maldives",names:["Maldives","Malediven","Maldivas"],region:"Asia",subregion:"Southern Asia",currency:"MVR",alpha2:"MV",alpha3:"MDV",ioc:"MDV",number:"462",tel:"960",latitude:"3 15 N",longitude:"73 00 E",un:"MV"},MW:{value:"MW",name:"Malawi",names:["Malawi"],region:"Africa",subregion:"Eastern Africa",currency:"MWK",alpha2:"MW",alpha3:"MWI",ioc:"MAW",number:"454",tel:"265",latitude:"13 30 S",longitude:"34 00 E",un:"MW"},MX:{value:"MX",name:"Mexico",names:["Mexico","Mexiko","Mexique","México"],region:"Americas",subregion:"Central America",currency:"MXN",alpha2:"MX",alpha3:"MEX",ioc:"MEX",number:"484",tel:"52",latitude:"23 00 N",longitude:"102 00 W",un:"MX"},MY:{value:"MY",name:"Malaysia",names:["Malaysia","Malaisie","Malasia"],region:"Asia",subregion:"South-Eastern Asia",currency:"MYR",alpha2:"MY",alpha3:"MYS",ioc:"MAS",number:"458",tel:"60",latitude:"2 30 N",longitude:"112 30 E",un:"MY"},MZ:{value:"MZ",name:"Mozambique",names:["Mozambique","Mosambik","Mozambique","Mozambique"],region:"Africa",subregion:"Eastern Africa",currency:"MZN",alpha2:"MZ",alpha3:"MOZ",ioc:"MOZ",number:"508",tel:"258",latitude:"18 15 S",longitude:"35 00 E",un:"MZ"},NA:{value:"NA",name:"Namibia",names:["Namibia","Namibia","Namibie","Namibia"],region:"Africa",subregion:"Southern Africa",currency:"NAD",alpha2:"NA",alpha3:"NAM",ioc:"NAM",number:"516",tel:"264",latitude:"22 00 S",longitude:"17 00 E",un:"NA"},NC:{value:"NC",name:"New Caledonia",names:["New Caledonia","Neukaledonien","Nouvelle Calédonie","Nueva Caledonia"],region:"Oceania",subregion:"Melanesia",currency:"XPF",alpha2:"NC",alpha3:"NCL",ioc:null,number:"540",tel:"687",latitude:"21 30 S",longitude:"165 30 E",un:"NC"},NE:{value:"NE",name:"Niger",names:["Níger"],region:"Africa",subregion:"Western Africa",currency:"XOF",alpha2:"NE",alpha3:"NER",ioc:"NIG",number:"562",tel:"227",latitude:"16 00 N",longitude:"8 00 E",un:"NE"},NF:{value:"NF",name:"Norfolk Island",names:["Norfolk Island","Norfolk Island","Île de Norfolk","Isla de Norfolk"],region:"Oceania",subregion:"Australia and New Zealand",currency:"AUD",alpha2:"NF",alpha3:"NFK",ioc:null,number:"574",tel:"672",latitude:"29 02 S",longitude:"167 57 E",un:"NF"},NG:{value:"NG",name:"Nigeria",names:["Nigeria","Nigéria","the Federal Republic of Nigeria"],region:"Africa",subregion:"Western Africa",currency:"NGN",alpha2:"NG",alpha3:"NGA",ioc:"NGR",number:"566",tel:"234",latitude:"10 00 N",longitude:"8 00 E",un:"NG"},NI:{value:"NI",name:"Nicaragua",names:["Nicaragua","Nicaragua","Nicaragua","Nicaragua"],region:"Americas",subregion:"Central America",currency:"NIO",alpha2:"NI",alpha3:"NIC",ioc:"NCA",number:"558",tel:"505",latitude:"13 00 N",longitude:"85 00 W",un:"NI"},NL:{value:"NL",name:"Netherlands",names:["Netherlands","Niederlande","Pays-Bas","Países Bajos"],region:"Europe",subregion:"Western Europe",currency:"EUR",alpha2:"NL",alpha3:"NLD",ioc:"NED",number:"528",tel:"31",latitude:"52 30 N",longitude:"5 45 E",un:"NL"},NO:{value:"NO",name:"Norway",names:["Norway","Norwegen","Norvège","Noruega"],region:"Europe",subregion:"Northern Europe",currency:"NOK",alpha2:"NO",alpha3:"NOR",ioc:"NED",number:"578",tel:"47",latitude:"62 00 N",longitude:"10 00 E",un:"NL"},NP:{value:"NP",name:"Nepal",names:["Nepal","Nepal","Népal","Nepal","the Federal Democratic Republic of Nepal"],region:"Asia",subregion:"Southern Asia",currency:"NPR",alpha2:"NP",alpha3:"NPL",ioc:"NEP",number:"524",tel:"977",latitude:"28 00 N",longitude:"84 00 E",un:"NP"},NR:{value:"NR",name:"Nauru",names:["Nauru","Nauru","Nauru","Nauru"],region:"Oceania",subregion:"Micronesia",currency:"AUD",alpha2:"NR",alpha3:"NRU",ioc:"NRU",number:"520",tel:"674",latitude:"0 32 S",longitude:"166 55 E",un:"NR"},NU:{value:"NU",name:"Niue",names:["Niue"],region:"Oceania",subregion:"Polynesia",currency:null,alpha2:"NU",alpha3:"NIU",ioc:null,number:"570",tel:"683",latitude:"19 02 S",longitude:"169 52 W",un:"NU"},NZ:{value:"NZ",name:"New Zealand",names:["New Zealand","Neuseeland","Nouvelle ZÃ©lande","Nueva Zelanda"],region:"Oceania",subregion:"Australia and New Zealand",currency:"NZD",alpha2:"NZ",alpha3:"NZL",ioc:"NZL",number:"554",tel:"64",latitude:"41 00 S",longitude:"174 00 E",un:"NZ"},OM:{value:"OM",name:"Oman",names:["Oman","Omán"],region:"Asia",subregion:"Western Asia",currency:"OMR",alpha2:"OM",alpha3:"OMN",ioc:"OMA",number:"512",tel:"968",latitude:"21 00 N",longitude:"57 00 E",un:"OM"},PA:{value:"PA",name:"Panama",names:["Panama","Panamá"],region:"Americas",subregion:"Central America",currency:"PAB",alpha2:"PA",alpha3:"PAN",ioc:"PAN",number:"591",tel:"507",latitude:"9 00 N",longitude:"80 00 W",un:"PA"},PE:{value:"PE",name:"Peru",names:["Peru","Pérou","Perú"],region:"Americas",subregion:"South America",currency:"PEN",alpha2:"PE",alpha3:"PER",ioc:"PER",number:"604",tel:"51",latitude:"10 00 S",longitude:"76 00 W",un:"PE"},PF:{value:"PF",name:"French Polynesia",names:["French Polynesia","Französisch-Polynesien","Polynésie Française","Polinesia Francesa"],region:"Oceania",subregion:"Polynesia",currency:"XPF",alpha2:"PF",alpha3:"PYF",ioc:null,number:"258",tel:"689",latitude:"15 00 S",longitude:"140 00 W",un:"PF"},PG:{value:"PG",name:"Papua New Guinea",names:["Papua New Guinea","Papua-Neuguinea","Papouasie Nouvelle-Guinée","Papúa Nueva Guinea"],region:"Oceania",subregion:"Melanesia",currency:"PGK",alpha2:"PG",alpha3:"PNG",ioc:"PNG",number:"598",tel:"675",latitude:"6 00 S",longitude:"147 00 E",un:"PG"},PH:{value:"PH",name:"Philippines",names:["Philippinen","Philippines","Filipinas"],region:"Asia",subregion:"South-Eastern Asia",currency:"PHP",alpha2:"PH",alpha3:"PHL",ioc:"PHI",number:"608",tel:"63",latitude:"13 00 N",longitude:"122 00 E",un:"PH"},PK:{value:"PK",name:"Pakistan",names:["Pakistan","Paquistán"],region:"Asia",subregion:"Southern Asia",currency:"PKR",alpha2:"PK",alpha3:"PAK",ioc:"PAK",number:"586",tel:"92",latitude:"30 00 N",longitude:"70 00 E",un:"PK"},PL:{value:"PL",name:"Poland",names:["Poland","Polen","Pologne","Polonia"],region:"Europe",subregion:"Eastern Europe",currency:"PLN",alpha2:"PL",alpha3:"POL",ioc:"POL",number:"616",tel:"48",latitude:"52 00 N",longitude:"20 00 E",un:"PL"},PM:{value:"PM",name:"Saint Pierre And Miquelon",names:["Saint Pierre and Miquelon","Saint-Pierre-et-Miquelon","Saint-Pierre-et-Miquelon","San Pedro y Miquelón"],region:"Americas",subregion:"Northern America",currency:"EUR",alpha2:"PM",alpha3:"SPM",ioc:null,number:"666",tel:"508",latitude:"46 50 N",longitude:"56 20 W",un:"PM"},PN:{value:"PN",name:"Pitcairn",names:["Pitcairn"],region:"Oceania",subregion:"Polynesia",currency:"NZD",alpha2:"PN",alpha3:"PCN",ioc:null,number:"612",tel:"",latitude:"25 04 S",longitude:"130 06 W",un:"PN"},PR:{value:"PR",name:"Puerto Rico",names:["Puerto Rico"],region:"Americas",subregion:"Caribbean",currency:"USD",alpha2:"PR",alpha3:"PRI",ioc:"PUR",number:"630",tel:"1",latitude:"18 15 N",longitude:"66 30 W",un:"PR"},PS:{value:"PS",name:"Palestinian Territory, Occupied",names:["Palestine","Palästina","Palestine","Palestina","the Occupied Palestinian Territory"],region:"Asia",subregion:"Western Asia",currency:null,alpha2:"PS",alpha3:"PSE",ioc:"PLE",number:"275",tel:"970",latitude:"",longitude:"",un:null},PT:{value:"PT",name:"Portugal",names:["Portugal"],region:"Europe",subregion:"Southern Europe",currency:"EUR",alpha2:"PT",alpha3:"PRT",ioc:"POR",number:"620",tel:"351",latitude:"39 30 N",longitude:"8 00 W",un:"PT"},PW:{value:"PW",name:"Palau",names:["Palau"],region:"Oceania",subregion:"Micronesia",currency:"USD",alpha2:"PW",alpha3:"PLW",ioc:"PLW",number:"585",tel:"680",latitude:"7 30 N",longitude:"134 30 E",un:"PW"},PY:{value:"PY",name:"Paraguay",names:["Paraguay"],region:"Americas",subregion:"South America",currency:"PYG",alpha2:"PY",alpha3:"PRY",ioc:"PAR",number:"600",tel:"595",latitude:"23 00 S",longitude:"58 00 W",un:"PY"},QA:{value:"QA",name:"Qatar",names:["Qatar","Katar"],region:"Asia",subregion:"Western Asia",currency:"QAR",alpha2:"QA",
alpha3:"QAT",ioc:"QAT",number:"634",tel:"974",latitude:"25 30 N",longitude:"51 15 E",un:"QA"},RE:{value:"RE",name:"Réunion",names:["Réunion","Réunion","Réunion","Reunión"],region:"Africa",subregion:"Eastern Africa",currency:"EUR",alpha2:"RE",alpha3:"REU",ioc:null,number:"638",tel:"262",latitude:"",longitude:"",un:"RE"},RO:{value:"RO",name:"Romania",names:["Romania","Rumänien","Roumanie","Rumania"],region:"Europe",subregion:"Eastern Europe",currency:"RON",alpha2:"RO",alpha3:"ROU",ioc:"ROU",number:"642",tel:"40",latitude:"46 00 N",longitude:"25 00 E",un:"RO"},RS:{value:"RS",name:"Serbia",names:["Serbia","Serbien","Serbie","Serbia"],region:"Europe",subregion:"Southern Europe",currency:"RSD",alpha2:"RS",alpha3:"SRB",ioc:"SRB",number:"688",tel:"381",latitude:"44 00 N",longitude:"21 00 E",un:"RS"},RU:{value:"RU",name:"Russian Federation",names:["Russia","Russland","Russie","Rusia"],region:"Europe",subregion:"Eastern Europe",currency:"RUB",alpha2:"RU",alpha3:"RUS",ioc:"RUS",number:"643",tel:"7",latitude:"60 00 N",longitude:"100 00 E",un:"RU"},RW:{value:"RW",name:"Rwanda",names:["Rwanda","Ruanda"],region:"Africa",subregion:"Eastern Africa",currency:"RWF",alpha2:"RW",alpha3:"RWA",ioc:"RWA",number:"646",tel:"250",latitude:"2 00 S",longitude:"30 00 E",un:"RW"},SA:{value:"SA",name:"Saudi Arabia",names:["Saudi Arabia","Saudi-Arabien","Arabie Saoudite","Arabia Saudí"],region:"Asia",subregion:"Western Asia",currency:"SAR",alpha2:"SA",alpha3:"SAU",ioc:"KSA",number:"682",tel:"966",latitude:"25 00 N",longitude:"45 00 E",un:"SA"},SB:{value:"SB",name:"Solomon Islands",names:["Solomon Islands","Salomonen","Îles Salomon","Islas Salomón"],region:"Oceania",subregion:"Melanesia",currency:"SBD",alpha2:"SB",alpha3:"SLB",ioc:"SOL",number:"090",tel:"677",latitude:"8 00 S",longitude:"159 00 E",un:"SB"},SC:{value:"SC",name:"Seychelles",names:["Seychelles"],region:"Africa",subregion:"Eastern Africa",currency:"SCR",alpha2:"SC",alpha3:"SYC",ioc:"SEY",number:"690",tel:"248",latitude:"4 35 S",longitude:"55 40 E",un:"SC"},SD:{value:"SD",name:"Sudan",names:["Sudan","Soudan","Sudán"],region:"Africa",subregion:"Northern Africa",currency:"SDG",alpha2:"SD",alpha3:"SDN",ioc:"SUD",number:"736",tel:"249",latitude:"15 00 N",longitude:"30 00 E",un:"SD"},SE:{value:"SE",name:"Sweden",names:["Sweden","Schweden","Suède","Suecia"],region:"Europe",subregion:"Northern Europe",currency:"SEK",alpha2:"SE",alpha3:"SWE",ioc:"SWE",number:"752",tel:"46",latitude:"62 00 N",longitude:"15 00 E",un:"SE"},SG:{value:"SG",name:"Singapore",names:["Singapore","Singapur","Singapour","Singapur"],region:"Asia",subregion:"South-Eastern Asia",currency:"SGD",alpha2:"SG",alpha3:"SGP",ioc:"SIN",number:"702",tel:"65",latitude:"1 22 N",longitude:"103 48 E",un:"SG"},SH:{value:"SH",name:"Saint Helena",names:["Saint Helena","Sankt Helena","Sainte Hélène","Santa Helena"],region:"Africa",subregion:"Western Africa",currency:"SHP",alpha2:"SH",alpha3:"SHN",ioc:null,number:"654",tel:"290",latitude:"Saint Helena: 15 57 ",longitude:"Saint Helena: 5 42 W",un:"SH"},SI:{value:"SI",name:"Slovenia",names:["Slovenia","Slowenien","Slovénie","Eslovenia"],region:"Europe",subregion:"Southern Europe",currency:"EUR",alpha2:"SI",alpha3:"SVN",ioc:"SLO",number:"705",tel:"386",latitude:"46 07 N",longitude:"14 49 E",un:"SI"},SJ:{value:"SJ",name:"Svalbard And Jan Mayen",names:["Svalbard and Jan Mayen","Svalbard und Jan Mayen","Îles Svalbard et Jan Mayen","Islas Svalbard y Jan Mayen"],region:"Europe",subregion:"Northern Europe",currency:"NOK",alpha2:"SJ",alpha3:"SJM",ioc:null,number:"744",tel:"47",latitude:"78 00 N",longitude:"20 00 E",un:"SJ"},SK:{value:"SK",name:"Slovakia",names:["Slovakia","Slowakei","Slovaquie","República Eslovaca"],region:"Europe",subregion:"Eastern Europe",currency:"EUR",alpha2:"SK",alpha3:"SVK",ioc:"SVK",number:"703",tel:"421",latitude:"48 40 N",longitude:"19 30 E",un:"SK"},SL:{value:"SL",name:"Sierra Leone",names:["Sierra Leone"],region:"Africa",subregion:"Western Africa",currency:"SLL",alpha2:"SL",alpha3:"SLE",ioc:"SLE",number:"694",tel:"232",latitude:"8 30 N",longitude:"11 30 W",un:"SL"},SM:{value:"SM",name:"San Marino",names:["San Marino","Saint-Marin"],region:"Europe",subregion:"Southern Europe",currency:"EUR",alpha2:"SM",alpha3:"SMR",ioc:"SMR",number:"674",tel:"378",latitude:"43 46 N",longitude:"12 25 E",un:"SM"},SN:{value:"SN",name:"Senegal",names:["Senegal","Sénégal"],region:"Africa",subregion:"Western Africa",currency:"XOF",alpha2:"SN",alpha3:"SEN",ioc:"SEN",number:"686",tel:"221",latitude:"14 00 N",longitude:"14 00 W",un:"SN"},SO:{value:"SO",name:"Somalia",names:["Somalia"],region:"Africa",subregion:"Eastern Africa",currency:"SOS",alpha2:"SO",alpha3:"SOM",ioc:"SOM",number:"706",tel:"252",latitude:"10 00 N",longitude:"49 00 E",un:"SO"},SR:{value:"SR",name:"Suriname",names:["Suriname","Surinam"],region:"Americas",subregion:"South America",currency:"SRD",alpha2:"SR",alpha3:"SUR",ioc:"SUR",number:"740",tel:"597",latitude:"4 00 N",longitude:"56 00 W",un:"SR"},ST:{value:"ST",name:"Sao Tome and Principe",names:["São Tomé and Príncipe","São Tomé und Príncipe","São Tomé et Príncipe","Santo Tomé y Príncipe"],region:"Africa",subregion:"Middle Africa",currency:"STD",alpha2:"ST",alpha3:"STP",ioc:"STP",number:"678",tel:"239",latitude:"1 00 N",longitude:"7 00 E",un:"ST"},SV:{value:"SV",name:"El Salvador",names:["Salvador","El Salvador"],region:"Americas",subregion:"Central America",currency:"USD",alpha2:"SV",alpha3:"SLV",ioc:"ESA",number:"222",tel:"503",latitude:"13 50 N",longitude:"88 55 W",un:"SV"},SY:{value:"SY",name:"Syrian Arab Republic",names:["Syria","Syrien","Syrie","Siria"],region:"Asia",subregion:"Western Asia",currency:"SYP",alpha2:"SY",alpha3:"SYR",ioc:"SYR",number:"760",tel:"963",latitude:"35 00 N",longitude:"38 00 E",un:"SY"},SZ:{value:"SZ",name:"Swaziland",names:["Swaziland","Swasiland","Swaziland","Suazilandia"],region:"Africa",subregion:"Southern Africa",currency:"SZL",alpha2:"SZ",alpha3:"SWZ",ioc:"SWZ",number:"748",tel:"268",latitude:"26 30 S",longitude:"31 30 E",un:"SZ"},TC:{value:"TC",name:"Turks and Caicos Islands",names:["Turks and Caicos Islands","Turks- und Caicosinseln","Îles Turks et Caïcos","Islas Turks y Caicos"],region:"Americas",subregion:"Caribbean",currency:"USD",alpha2:"TC",alpha3:"TCA",ioc:null,number:"796",tel:"1",latitude:"21 45 N",longitude:"71 35 W",un:"TC"},TD:{value:"TD",name:"Chad",names:["Chad","Tschad","Tchad"],region:"Africa",subregion:"Middle Africa",currency:"XAF",alpha2:"TD",alpha3:"TCD",ioc:"CHA",number:"148",tel:"235",latitude:"15 00 N",longitude:"19 00 E",un:"TD"},TF:{value:"TF",name:"French Southern Territories",names:["French Southern Territories","Französische Südgebiete","Terres Australes Françaises","Territorios Franceses del Sur"],region:"",subregion:"",currency:"EUR",alpha2:"TF",alpha3:"ATF",ioc:null,number:"260",tel:"",latitude:"",longitude:"",un:null},TG:{value:"TG",name:"Togo",names:["Togo"],region:"Africa",subregion:"Western Africa",currency:"XOF",alpha2:"TG",alpha3:"TGO",ioc:"TOG",number:"768",tel:"228",latitude:"8 00 N",longitude:"1 10 E",un:"TG"},TH:{value:"TH",name:"Thailand",names:["Thailand","Thailand","Thaïlande","Tailandia"],region:"Asia",subregion:"South-Eastern Asia",currency:"THB",alpha2:"TH",alpha3:"THA",ioc:"THA",number:"764",tel:"66",latitude:"15 00 N",longitude:"100 00 E",un:"TH"},TJ:{value:"TJ",name:"Tajikistan",names:["Tajikistan","Tadschikistan","Tajikistan","Tayikistán"],region:"Asia",subregion:"Central Asia",currency:"TJS",alpha2:"TJ",alpha3:"TJK",ioc:"TJK",number:"762",tel:"992",latitude:"39 00 N",longitude:"71 00 E",un:"TJ"},TK:{value:"TK",name:"Tokelau",names:["Tokelau","Tokelau","Îles Tokelau","Islas Tokelau"],region:"Oceania",subregion:"Polynesia",currency:"NZD",alpha2:"TK",alpha3:"TKL",ioc:null,number:"772",tel:"690",latitude:"9 00 S",longitude:"172 00 W",un:"TK"},TL:{value:"TL",name:"Timor-Leste",names:["East Timor","Ost-Timor","Timor oriental","Timor Oriental"],region:"Asia",subregion:"South-Eastern Asia",currency:"IDR",alpha2:"TL",alpha3:"TLS",ioc:null,number:"626",tel:"670",latitude:"8 50 S",longitude:"125 55 E",un:null},TM:{value:"TM",name:"Turkmenistan",names:["Turkmenistan","Turkmenistan","Turkménistan","Turkmenistán"],region:"Asia",subregion:"Central Asia",currency:"TMT",alpha2:"TM",alpha3:"TKM",ioc:"TKM",number:"795",tel:"993",latitude:"40 00 N",longitude:"60 00 E",un:"TM"},TN:{value:"TN",name:"Tunisia",names:["Tunisia","Tunesien","Tunisie","Túnez"],region:"Africa",subregion:"Northern Africa",currency:"TND",alpha2:"TN",alpha3:"TUN",ioc:"TUN",number:"788",tel:"216",latitude:"34 00 N",longitude:"9 00 E",un:"TN"},TO:{value:"TO",name:"Tonga",names:["Tonga"],region:"Oceania",subregion:"Polynesia",currency:"TOP",alpha2:"TO",alpha3:"TON",ioc:"TGA",number:"776",tel:"676",latitude:"20 00 S",longitude:"175 00 W",un:"TO"},TR:{value:"TR",name:"Turkey",names:["Turkey","Türkei","Turquie","Turquía"],region:"Asia",subregion:"Western Asia",currency:"TRY",alpha2:"TR",alpha3:"TUR",ioc:"TUR",number:"792",tel:"90",latitude:"39 00 N",longitude:"35 00 E",un:"TR"},TT:{value:"TT",name:"Trinidad and Tobago",names:["Trinidad and Tobago","Trinidad und Tobago","Trinité et Tobago","Trinidad y Tobago"],region:"Americas",subregion:"Caribbean",currency:"TTD",alpha2:"TT",alpha3:"TTO",ioc:"TRI",number:"780",tel:"1",latitude:"11 00 N",longitude:"61 00 W",un:"TT"},TV:{value:"TV",name:"Tuvalu",names:["Tuvalu","Tuvalu","Tuvalu","Tuvalu"],region:"Oceania",subregion:"Polynesia",currency:"TVD",alpha2:"TV",alpha3:"TUV",ioc:"TUV",number:"798",tel:"688",latitude:"8 00 S",longitude:"178 00 E",un:"TV"},TW:{value:"TW",name:"Taiwan, Province Of China",names:["Taiwan","Taiwán"],region:"Asia",subregion:"Eastern Asia",currency:"TWD",alpha2:"TW",alpha3:"TWN",ioc:"TPE",number:"158",tel:"886",latitude:"23 30 N",longitude:"121 00 E",un:"TW",commonname:"Taiwan"},TZ:{value:"TZ",name:"Tanzania, United Republic of",names:["Tanzania","Tansania","Tanzanie"],region:"Africa",subregion:"Eastern Africa",currency:"TZS",alpha2:"TZ",alpha3:"TZA",ioc:"TAN",number:"834",tel:"255",latitude:"6 00 S",longitude:"35 00 E",un:"TZ",commonname:"Tanzania"},UA:{value:"UA",name:"Ukraine",names:["Ukraine","Ukraine","Ukraine","Ucrania"],region:"Europe",subregion:"Eastern Europe",currency:"UAH",alpha2:"UA",alpha3:"UKR",ioc:"UKR",number:"804",tel:"380",latitude:"49 00 N",longitude:"32 00 E",un:"UA"},UG:{value:"UG",name:"Uganda",names:["Uganda"],region:"Africa",subregion:"Eastern Africa",currency:"UGX",alpha2:"UG",alpha3:"UGA",ioc:"UGA",number:"800",tel:"256",latitude:"1 00 N",longitude:"32 00 E",un:"UG"},UM:{value:"UM",name:"United States Minor Outlying Islands",names:["United States Minor Outlying Islands","US-Amerikanische Hoheitsgebiete","Dépendances américaines","Islas menores de Estados Unidos"],region:"Americas",subregion:"Northern America",currency:"USD",alpha2:"UM",alpha3:"UMI",ioc:null,number:"581",tel:"",latitude:"",longitude:"",un:"UM"},US:{value:"US",name:"United States",names:["United States of America","Vereinigte Staaten von Amerika","États-Unis","Estados Unidos"],region:"Americas",subregion:"Northern America",currency:"USD",alpha2:"US",alpha3:"USA",ioc:"USA",number:"840",tel:"1",latitude:"38 00 N",longitude:"97 00 W",un:"US"},UY:{value:"UY",name:"Uruguay",names:["Uruguay"],region:"Americas",subregion:"South America",currency:"UYU",alpha2:"UY",alpha3:"URY",ioc:"URU",number:"858",tel:"598",latitude:"33 00 S",longitude:"56 00 W",un:"UY"},UZ:{value:"UZ",name:"Uzbekistan",names:["Uzbekistan","Usbekistan","Ouzbékistan","Uzbekistán"],region:"Asia",subregion:"Central Asia",currency:"UZS",alpha2:"UZ",alpha3:"UZB",ioc:"UZB",number:"860",tel:"998",latitude:"41 00 N",longitude:"64 00 E",un:"UZ"},VA:{value:"VA",name:"Holy See (Vatican City State)",names:["Vatican City","Vatikan","Cité du Vatican","Ciudad del Vaticano"],region:"Europe",subregion:"Southern Europe",currency:"EUR",alpha2:"VA",alpha3:"VAT",ioc:null,number:"336",tel:"39",latitude:"41 54 N",longitude:"12 27 E",un:"VA"},VC:{value:"VC",name:"Saint Vincent And The Grenedines",names:["Saint Vincent and the Grenadines","Saint Vincent und die Grenadinen","Saint-Vincent et les Grenadines","San Vicente y Granadinas"],region:"Americas",subregion:"Caribbean",currency:"XCD",alpha2:"VC",alpha3:"VCT",ioc:"VIN",number:"670",tel:"1",latitude:"13 15 N",longitude:"61 12 W",un:"VC"},VE:{value:"VE",name:"Venezuela, Bolivarian Republic of",names:["Venezuela"],region:"Americas",subregion:"South America",currency:"VEF",alpha2:"VE",alpha3:"VEN",ioc:"VEN",number:"862",tel:"58",latitude:"8 00 N",longitude:"66 00 W",un:"VE",commonname:"Venezuela"},VG:{value:"VG",name:"Virgin Islands, British",names:["British Virgin Islands","Britische Jungferninseln","Îles Vierges britanniques","Islas Vírgenes del Reino Unido"],region:"Americas",subregion:"Caribbean",currency:"USD",alpha2:"VG",alpha3:"VGB",ioc:"IVB",number:"092",tel:"1",latitude:"",longitude:"",un:"VG"},VI:{value:"VI",name:"Virgin Islands, U.S.",names:["Virgin Islands of the United States","Amerikanische Jungferninseln","Îles Vierges américaines","Islas Vírgenes de los Estados Unidos"],region:"Americas",subregion:"Caribbean",currency:"USD",alpha2:"VI",alpha3:"VIR",ioc:"ISV",number:"850",tel:"1",latitude:"",longitude:"",un:"VI"},VN:{value:"VN",name:"Viet Nam",names:["Vietnam"],region:"Asia",subregion:"South-Eastern Asia",currency:"VND",alpha2:"VN",alpha3:"VNM",ioc:"VIE",number:"704",tel:"84",latitude:"16 10 N",longitude:"107 50 E",un:"VN"},VU:{value:"VU",name:"Vanuatu",names:["Vanuatu"],region:"Oceania",subregion:"Melanesia",currency:null,alpha2:"VU",alpha3:"VUT",ioc:"VAN",number:"548",tel:"678",latitude:"16 00 S",longitude:"167 00 E",un:"VU"},WF:{value:"WF",name:"Wallis and Futuna",names:["Wallis and Futuna","Wallis und Futuna","Wallis et Futuna","Wallis y Futuna"],region:"Oceania",subregion:"Polynesia",currency:"XPF",alpha2:"WF",alpha3:"WLF",ioc:null,number:"876",tel:"681",latitude:"13 18 S",longitude:"176 12 W",un:"WF"},WS:{value:"WS",name:"Samoa",names:["Samoa"],region:"Oceania",subregion:"Polynesia",currency:"USD",alpha2:"WS",alpha3:"WSM",ioc:"SAM",number:"882",tel:"685",latitude:"13 35 S",longitude:"172 20 W",un:"WS"},YE:{value:"YE",name:"Yemen",names:["Yemen","Jemen","Yémen"],region:"Asia",subregion:"Western Asia",currency:"YER",alpha2:"YE",alpha3:"YEM",ioc:"YEM",number:"887",tel:"967",latitude:"15 00 N",longitude:"48 00 E",un:"YE"},YT:{value:"YT",name:"Mayotte",names:["Mayotte","Mayotte","Mayotte","Mayotte"],region:"Africa",subregion:"Eastern Africa",currency:"EUR",alpha2:"YT",alpha3:"MYT",ioc:null,number:"175",tel:"269",latitude:"12 50 S",longitude:"45 10 E",un:"YT"},ZA:{value:"ZA",name:"South Africa",names:["South Africa","Republik Südafrika","Afrique du Sud","República de Sudáfrica"],region:"Africa",subregion:"Southern Africa",currency:"ZAR",alpha2:"ZA",alpha3:"ZAF",ioc:"RSA",number:"710",tel:"27",latitude:"29 00 S",longitude:"24 00 E",un:"ZA"},ZM:{value:"ZM",name:"Zambia",names:["Zambia","Sambia","Zambie"],region:"Africa",subregion:"Eastern Africa",currency:"ZMK",alpha2:"ZM",alpha3:"ZMB",ioc:"ZAM",number:"894",tel:"260",latitude:"15 00 S",longitude:"30 00 E",un:"ZM"},ZW:{value:"ZW",name:"Zimbabwe",names:["Zimbabwe","Simbabwe","Zimbabue"],region:"Africa",subregion:"Eastern Africa",currency:"ZWD",alpha2:"ZW",alpha3:"ZWE",ioc:"ZIM",number:"716",tel:"263",latitude:"20 00 S",longitude:"30 00 E",un:"ZW"}},a.currencies={EUR:{value:"EUR",name:"EUR",symbol:"€",countries:["AD","AT","BE","CY","DE","ES","FI","FR","GF","GP","GR","IE","IT","LU","MC","ME","MF","MQ","MT","NL","PM","PT","RE","SI","SK","SM","TF","VA","YT"]},AED:{value:"AED",name:"AED",symbol:!1,countries:["AE"]},AFN:{value:"AFN",name:"AFN",symbol:"؋",countries:["AF"]},XCD:{value:"XCD",name:"XCD",symbol:"$",countries:["AG","AI","DM","GD","KN","LC","MS","VC"]},ALL:{value:"ALL",name:"ALL",symbol:"L",countries:["AL"]},AMD:{value:"AMD",name:"AMD",symbol:!1,countries:["AM"]},ANG:{value:"ANG",name:"ANG",symbol:"ƒ",countries:["AN"]},AOA:{value:"AOA",name:"AOA",symbol:!1,countries:["AO"]},null:{value:null,name:null,symbol:!1,countries:["AQ","AX","BL","CD","CG","GQ","GS","MG","MK","NU","PS","VU"]},ARS:{value:"ARS",name:"ARS",symbol:"$",countries:["AR"]},USD:{value:"USD",name:"USD",symbol:"$",countries:["AS","EC","FJ","FM","GU","HT","IO","MH","MP","PR","PW","SV","TC","UM","US","VG","VI","WS"]},AUD:{value:"AUD",name:"AUD",symbol:"$",countries:["AU","CC","CX","HM","KI","NF","NR"]},AWG:{value:"AWG",name:"AWG",symbol:"ƒ",countries:["AW"]},AZN:{value:"AZN",name:"AZN",symbol:"₼",countries:["AZ"]},BAM:{value:"BAM",name:"BAM",symbol:"KM",countries:["BA"]},BBD:{value:"BBD",name:"BBD",symbol:"$",countries:["BB"]},BTD:{value:"BTD",name:"BTD",symbol:!1,countries:["BD"]},XOF:{value:"XOF",name:"XOF",symbol:!1,countries:["BF","BJ","CI","GW","ML","NE","SN","TG"]},BGN:{value:"BGN",name:"BGN",symbol:"лв",countries:["BG"]},BHD:{value:"BHD",name:"BHD",symbol:!1,countries:["BH"]},BIF:{value:"BIF",name:"BIF",symbol:!1,countries:["BI"]},BMD:{value:"BMD",name:"BMD",symbol:"$",countries:["BM"]},BND:{value:"BND",name:"BND",symbol:"$",countries:["BN"]},BOB:{value:"BOB",name:"BOB",symbol:"Bs.",countries:["BO"]},BRL:{value:"BRL",name:"BRL",symbol:"R$",countries:["BR"]},BSD:{value:"BSD",name:"BSD",symbol:"$",countries:["BS"]},BTN:{value:"BTN",name:"BTN",symbol:!1,countries:["BT"]},NOK:{value:"NOK",name:"NOK",symbol:"kr",countries:["BV","NO","SJ"]},BWP:{value:"BWP",name:"BWP",symbol:"P",countries:["BW"]},BYR:{value:"BYR",name:"BYR",symbol:"p.",countries:["BY"]},BZD:{value:"BZD",name:"BZD",symbol:"BZ$",countries:["BZ"]},CAD:{value:"CAD",name:"CAD",symbol:"$",countries:["CA"]},XAF:{value:"XAF",name:"XAF",symbol:!1,countries:["CF","CM","GA","TD"]},CHF:{value:"CHF",name:"CHF",symbol:"Fr.",countries:["CH","LI"]},NZD:{value:"NZD",name:"NZD",symbol:"$",countries:["CK","NZ","PN","TK"]},CLP:{value:"CLP",name:"CLP",symbol:"$",countries:["CL"]},CNY:{value:"CNY",name:"CNY",symbol:"¥",countries:["CN"]},COP:{value:"COP",name:"COP",symbol:"$",countries:["CO"]},CRC:{value:"CRC",name:"CRC",symbol:"₡",countries:["CR"]},CUP:{value:"CUP",name:"CUP",symbol:"₱",countries:["CU"]},CVE:{value:"CVE",name:"CVE",symbol:!1,countries:["CV"]},CZK:{value:"CZK",name:"CZK",symbol:"Kč",countries:["CZ"]},DJF:{value:"DJF",name:"DJF",symbol:!1,countries:["DJ"]},DKK:{value:"DKK",name:"DKK",symbol:"kr",countries:["DK","FO","GL"]},DOP:{value:"DOP",name:"DOP",symbol:"RD$",countries:["DO"]},DZD:{value:"DZD",name:"DZD",symbol:!1,countries:["DZ"]},EEK:{value:"EEK",name:"EEK",symbol:"kr",countries:["EE"]},EGP:{value:"EGP",name:"EGP",symbol:"£",countries:["EG"]},MAD:{value:"MAD",name:"MAD",symbol:!1,countries:["EH","MA"]},ETB:{value:"ETB",name:"ETB",symbol:!1,countries:["ER","ET"]},FKP:{value:"FKP",name:"FKP",symbol:"£",countries:["FK"]},GBP:{value:"GBP",name:"GBP",symbol:"£",countries:["GB"]},GEL:{value:"GEL",name:"GEL",symbol:!1,countries:["GE"]},GGP:{value:"GGP",name:"GGP",symbol:"£",countries:["GG"]},GHS:{value:"GHS",name:"GHS",symbol:!1,countries:["GH"]},GIP:{value:"GIP",name:"GIP",symbol:"£",countries:["GI"]},GMD:{value:"GMD",name:"GMD",symbol:!1,countries:["GM"]},GNF:{value:"GNF",name:"GNF",symbol:!1,countries:["GN"]},GTQ:{value:"GTQ",name:"GTQ",symbol:"Q",countries:["GT"]},GYD:{value:"GYD",name:"GYD",symbol:"$",countries:["GY"]},HKD:{value:"HKD",name:"HKD",symbol:"$",countries:["HK"]},HNL:{value:"HNL",name:"HNL",symbol:"L",countries:["HN"]},HRK:{value:"HRK",name:"HRK",symbol:"kn",countries:["HR"]},HUF:{value:"HUF",name:"HUF",symbol:"Ft",countries:["HU"]},IDR:{value:"IDR",name:"IDR",symbol:"Rp",countries:["ID","TL"]},ILS:{value:"ILS",name:"ILS",symbol:"₪",countries:["IL"]},IMP:{value:"IMP",name:"IMP",symbol:"£",countries:["IM"]},INR:{value:"INR",name:"INR",symbol:"₹",countries:["IN"]},IQD:{value:"IQD",name:"IQD",symbol:!1,countries:["IQ"]},IRR:{value:"IRR",name:"IRR",symbol:"﷼",countries:["IR"]},ISK:{value:"ISK",name:"ISK",symbol:"kr",countries:["IS"]},JEP:{value:"JEP",name:"JEP",symbol:"£",countries:["JE"]},JMD:{value:"JMD",name:"JMD",symbol:"J$",countries:["JM"]},JOD:{value:"JOD",name:"JOD",symbol:!1,countries:["JO"]},JPY:{value:"JPY",name:"JPY",symbol:"¥",countries:["JP"]},KES:{value:"KES",name:"KES",symbol:"KSh",countries:["KE"]},KGS:{value:"KGS",name:"KGS",symbol:"лв",countries:["KG"]},KHR:{value:"KHR",name:"KHR",symbol:"៛",countries:["KH"]},KMF:{value:"KMF",name:"KMF",symbol:!1,countries:["KM"]},KPW:{value:"KPW",name:"KPW",symbol:"₩",countries:["KP"]},KRW:{value:"KRW",name:"KRW",symbol:"₩",countries:["KR"]},KWD:{value:"KWD",name:"KWD",symbol:!1,countries:["KW"]},KYD:{value:"KYD",name:"KYD",symbol:"$",countries:["KY"]},KZT:{value:"KZT",name:"KZT",symbol:"лв",countries:["KZ"]},LAK:{value:"LAK",name:"LAK",symbol:"₭",countries:["LA"]},LBP:{value:"LBP",name:"LBP",symbol:"£",countries:["LB"]},LKR:{value:"LKR",name:"LKR",symbol:"₨",countries:["LK"]},LRD:{value:"LRD",name:"LRD",symbol:"$",countries:["LR"]},LSL:{value:"LSL",name:"LSL",symbol:!1,countries:["LS"]},LTL:{value:"LTL",name:"LTL",symbol:"Lt",countries:["LT"]},LVL:{value:"LVL",name:"LVL",symbol:"Ls",countries:["LV"]},LYD:{value:"LYD",name:"LYD",symbol:!1,countries:["LY"]},MDL:{value:"MDL",name:"MDL",symbol:!1,countries:["MD"]},MNK:{value:"MNK",name:"MNK",symbol:!1,countries:["MM"]},MNT:{value:"MNT",name:"MNT",symbol:"₮",countries:["MN"]},MOP:{value:"MOP",name:"MOP",symbol:!1,countries:["MO"]},MRO:{value:"MRO",name:"MRO",symbol:!1,countries:["MR"]},MUR:{value:"MUR",name:"MUR",symbol:"₨",countries:["MU"]},MVR:{value:"MVR",name:"MVR",symbol:!1,countries:["MV"]},MWK:{value:"MWK",name:"MWK",symbol:!1,countries:["MW"]},MXN:{value:"MXN",name:"MXN",symbol:"$",countries:["MX"]},MYR:{value:"MYR",name:"MYR",symbol:"RM",countries:["MY"]},MZN:{value:"MZN",name:"MZN",symbol:"MT",countries:["MZ"]},NAD:{value:"NAD",name:"NAD",symbol:"$",countries:["NA"]},XPF:{value:"XPF",name:"XPF",symbol:!1,countries:["NC","PF","WF"]},NGN:{value:"NGN",name:"NGN",symbol:"₦",countries:["NG"]},NIO:{value:"NIO",name:"NIO",symbol:"C$",countries:["NI"]},NPR:{value:"NPR",name:"NPR",symbol:"₨",countries:["NP"]},OMR:{value:"OMR",name:"OMR",symbol:"﷼",countries:["OM"]},PAB:{value:"PAB",name:"PAB",symbol:"B/.",countries:["PA"]},PEN:{value:"PEN",name:"PEN",symbol:"S/.",countries:["PE"]},PGK:{value:"PGK",name:"PGK",symbol:!1,countries:["PG"]},PHP:{value:"PHP",name:"PHP",symbol:"₱",countries:["PH"]},PKR:{value:"PKR",name:"PKR",symbol:"₨",countries:["PK"]},PLN:{value:"PLN",name:"PLN",symbol:"zł",countries:["PL"]},PYG:{value:"PYG",name:"PYG",symbol:"Gs",countries:["PY"]},QAR:{value:"QAR",name:"QAR",symbol:"﷼",countries:["QA"]},RON:{value:"RON",name:"RON",symbol:"lei",countries:["RO"]},RSD:{value:"RSD",name:"RSD",symbol:"Дин.",countries:["RS"]},RUB:{value:"RUB",name:"RUB",symbol:"₽",countries:["RU"]},RWF:{value:"RWF",name:"RWF",symbol:!1,countries:["RW"]},SAR:{value:"SAR",name:"SAR",symbol:"﷼",countries:["SA"]},SBD:{value:"SBD",name:"SBD",symbol:"$",countries:["SB"]},SCR:{value:"SCR",name:"SCR",symbol:"₨",countries:["SC"]},SDG:{value:"SDG",name:"SDG",symbol:!1,countries:["SD"]},SEK:{value:"SEK",name:"SEK",symbol:"kr",countries:["SE"]},SGD:{value:"SGD",name:"SGD",symbol:"$",countries:["SG"]},SHP:{value:"SHP",name:"SHP",symbol:"£",countries:["SH"]},SLL:{value:"SLL",name:"SLL",symbol:!1,countries:["SL"]},SOS:{value:"SOS",name:"SOS",symbol:"S",countries:["SO"]},SRD:{value:"SRD",name:"SRD",symbol:"$",countries:["SR"]},STD:{value:"STD",name:"STD",symbol:!1,countries:["ST"]},SYP:{value:"SYP",name:"SYP",symbol:"£",countries:["SY"]},SZL:{value:"SZL",name:"SZL",symbol:!1,countries:["SZ"]},THB:{value:"THB",name:"THB",symbol:"฿",countries:["TH"]},TJS:{value:"TJS",name:"TJS",symbol:!1,countries:["TJ"]},TMT:{value:"TMT",name:"TMT",symbol:!1,countries:["TM"]},TND:{value:"TND",name:"TND",symbol:!1,countries:["TN"]},TOP:{value:"TOP",name:"TOP",symbol:!1,countries:["TO"]},TRY:{value:"TRY",name:"TRY",symbol:!1,countries:["TR"]},TTD:{value:"TTD",name:"TTD",symbol:"TT$",countries:["TT"]},TVD:{value:"TVD",name:"TVD",symbol:"$",countries:["TV"]},TWD:{value:"TWD",name:"TWD",symbol:"NT$",countries:["TW"]},TZS:{value:"TZS",name:"TZS",symbol:"TSh",countries:["TZ"]},UAH:{value:"UAH",name:"UAH",symbol:"₴",countries:["UA"]},UGX:{value:"UGX",name:"UGX",symbol:"USh",countries:["UG"]},UYU:{value:"UYU",name:"UYU",symbol:"$U",countries:["UY"]},UZS:{value:"UZS",name:"UZS",symbol:"лв",countries:["UZ"]},VEF:{value:"VEF",name:"VEF",symbol:"Bs",countries:["VE"]},VND:{value:"VND",name:"VND",symbol:"₫",countries:["VN"]},YER:{value:"YER",name:"YER",symbol:"﷼",countries:["YE"]},ZAR:{value:"ZAR",name:"ZAR",symbol:"R",countries:["ZA"]},ZMK:{value:"ZMK",name:"ZMK",symbol:!1,countries:["ZM"]},ZWD:{value:"ZWD",name:"ZWD",symbol:"Z$",countries:["ZW"]}},a.findCountryByCode=function(b){for(var c in a.countries)if(a.countries.hasOwnProperty(c)&&(a.countries[c].alpha2==b||a.countries[c].alpha3==b))return a.countries[c]},a.findCountryByNumber=function(b){b=parseInt(b,10);for(var c in a.countries)if(a.countries.hasOwnProperty(c)&&parseInt(a.countries[c].number,10)==b)return a.countries[c]},a.findCountryByName=function(b){for(var c in a.countries)if(a.countries.hasOwnProperty(c)){if(a.countries[c].name==b)return a.countries[c];if(a.countries[c].names&&a.countries[c].names.indexOf(b)>-1)return a.countries[c]}},a.findCountriesByRegion=function(b){var c=[];for(var d in a.countries)a.countries.hasOwnProperty(d)&&a.countries[d].region==b&&c.push(a.countries[d]);return c.length?c:void 0},a.getSimpleCountryList=function(){var b=[];for(var c in a.countries)b.push({value:a.countries[c].value,name:a.countries[c].name});return b.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0})},a.getAllISOCodes=function(){return Object.keys(a.countries).sort(function(a,b){return b>a?-1:a>b?1:0})},a.findCurrency=function(b){for(var c in a.currencies)if(a.currencies.hasOwnProperty(c)&&a.currencies[c].value==b)return a.currencies[c]}}(),function(){function tapEventListener(type,enable,useCapture){enable!==!1?tapDoc.addEventListener(type,tapEventListeners[type],useCapture):tapDoc.removeEventListener(type,tapEventListeners[type])}function tapClick(e){var container=tapContainingElement(e.target),ele=tapTargetElement(container);if(ionic.tap.requiresNativeClick(ele)||tapPointerMoved)return!1;var c=ionic.tap.pointerCoord(e);triggerMouseEvent("click",ele,c.x,c.y),tapHandleFocus(ele)}function triggerMouseEvent(type,ele,x,y){var clickEvent=document.createEvent("MouseEvents");clickEvent.initMouseEvent(type,!0,!0,window,1,0,0,x,y,!1,!1,!1,!1,0,null),clickEvent.isIonicTap=!0,ele.dispatchEvent(clickEvent)}function tapClickGateKeeper(e){return"submit"==e.target.type&&0===e.detail?null:ionic.scroll.isScrolling&&ionic.tap.containsOrIsTextInput(e.target)||!e.isIonicTap&&!ionic.tap.requiresNativeClick(e.target)?(e.stopPropagation(),ionic.tap.isLabelWithTextInput(e.target)||e.preventDefault(),!1):void 0}function tapMouseDown(e){return e.isIonicTap||tapIgnoreEvent(e)?null:tapEnabledTouchEvents?(e.stopPropagation(),ionic.tap.isTextInput(e.target)&&tapLastTouchTarget===e.target||/^(select|option)$/i.test(e.target.tagName)||e.preventDefault(),!1):(tapPointerMoved=!1,tapPointerStart=ionic.tap.pointerCoord(e),tapEventListener("mousemove"),void ionic.activator.start(e))}function tapMouseUp(e){return tapEnabledTouchEvents?(e.stopPropagation(),e.preventDefault(),!1):tapIgnoreEvent(e)||/^(select|option)$/i.test(e.target.tagName)?!1:(tapHasPointerMoved(e)||tapClick(e),tapEventListener("mousemove",!1),ionic.activator.end(),void(tapPointerMoved=!1))}function tapMouseMove(e){return tapHasPointerMoved(e)?(tapEventListener("mousemove",!1),ionic.activator.end(),tapPointerMoved=!0,!1):void 0}function tapTouchStart(e){if(!tapIgnoreEvent(e)&&(tapPointerMoved=!1,tapEnableTouchEvents(),tapPointerStart=ionic.tap.pointerCoord(e),tapEventListener(tapTouchMoveListener),ionic.activator.start(e),ionic.Platform.isIOS()&&ionic.tap.isLabelWithTextInput(e.target))){var textInput=tapTargetElement(tapContainingElement(e.target));textInput!==tapActiveEle&&e.preventDefault()}}function tapTouchEnd(e){tapIgnoreEvent(e)||(tapEnableTouchEvents(),tapHasPointerMoved(e)||(tapClick(e),/^(select|option)$/i.test(e.target.tagName)&&e.preventDefault()),tapLastTouchTarget=e.target,tapTouchCancel())}function tapTouchMove(e){return tapHasPointerMoved(e)?(tapPointerMoved=!0,tapEventListener(tapTouchMoveListener,!1),ionic.activator.end(),!1):void 0}function tapTouchCancel(){tapEventListener(tapTouchMoveListener,!1),ionic.activator.end(),tapPointerMoved=!1}function tapEnableTouchEvents(){tapEnabledTouchEvents=!0,clearTimeout(tapMouseResetTimer),tapMouseResetTimer=setTimeout(function(){tapEnabledTouchEvents=!1},600)}function tapIgnoreEvent(e){return e.isTapHandled?!0:(e.isTapHandled=!0,ionic.scroll.isScrolling&&ionic.tap.containsOrIsTextInput(e.target)?(e.preventDefault(),!0):void 0)}function tapHandleFocus(ele){tapTouchFocusedInput=null;var triggerFocusIn=!1;"SELECT"==ele.tagName?(triggerMouseEvent("mousedown",ele,0,0),ele.focus&&ele.focus(),triggerFocusIn=!0):tapActiveElement()===ele?triggerFocusIn=!0:/^(input|textarea)$/i.test(ele.tagName)||ele.isContentEditable?(triggerFocusIn=!0,ele.focus&&ele.focus(),ele.value=ele.value,tapEnabledTouchEvents&&(tapTouchFocusedInput=ele)):tapFocusOutActive(),triggerFocusIn&&(tapActiveElement(ele),ionic.trigger("ionic.focusin",{target:ele},!0))}function tapFocusOutActive(){var ele=tapActiveElement();ele&&(/^(input|textarea|select)$/i.test(ele.tagName)||ele.isContentEditable)&&ele.blur(),tapActiveElement(null)}function tapFocusIn(e){tapEnabledTouchEvents&&ionic.tap.isTextInput(tapActiveElement())&&ionic.tap.isTextInput(tapTouchFocusedInput)&&tapTouchFocusedInput!==e.target&&(tapTouchFocusedInput.focus(),tapTouchFocusedInput=null),ionic.scroll.isScrolling=!1}function tapFocusOut(){tapActiveElement(null)}function tapActiveElement(ele){return arguments.length&&(tapActiveEle=ele),tapActiveEle||document.activeElement}function tapHasPointerMoved(endEvent){if(!endEvent||1!==endEvent.target.nodeType||!tapPointerStart||0===tapPointerStart.x&&0===tapPointerStart.y)return!1;var endCoordinates=ionic.tap.pointerCoord(endEvent),hasClassList=!(!endEvent.target.classList||!endEvent.target.classList.contains||"function"!=typeof endEvent.target.classList.contains),releaseTolerance=hasClassList&&endEvent.target.classList.contains("button")?TAP_RELEASE_BUTTON_TOLERANCE:TAP_RELEASE_TOLERANCE;return Math.abs(tapPointerStart.x-endCoordinates.x)>releaseTolerance||Math.abs(tapPointerStart.y-endCoordinates.y)>releaseTolerance}function tapContainingElement(ele,allowSelf){for(var climbEle=ele,x=0;6>x&&climbEle;x++){if("LABEL"===climbEle.tagName)return climbEle;climbEle=climbEle.parentElement}return allowSelf!==!1?ele:void 0}function tapTargetElement(ele){if(ele&&"LABEL"===ele.tagName){if(ele.control)return ele.control;if(ele.querySelector){var control=ele.querySelector("input,textarea,select");if(control)return control}}return ele}function keyboardInit(){ionic.keyboard.isInitialized||(keyboardHasPlugin()?(window.addEventListener("native.keyboardshow",debouncedKeyboardNativeShow),window.addEventListener("native.keyboardhide",keyboardFocusOut)):document.body.addEventListener("focusout",keyboardFocusOut),document.body.addEventListener("ionic.focusin",debouncedKeyboardFocusIn),document.body.addEventListener("focusin",debouncedKeyboardFocusIn),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerDown",keyboardInit):document.removeEventListener("touchstart",keyboardInit),ionic.keyboard.isInitialized=!0)}function keyboardNativeShow(e){clearTimeout(keyboardFocusOutTimer),(!ionic.keyboard.isOpen||ionic.keyboard.isClosing)&&(ionic.keyboard.isOpening=!0,ionic.keyboard.isClosing=!1),ionic.keyboard.height=e.keyboardHeight,wasOrientationChange?keyboardWaitForResize(keyboardUpdateViewportHeight,!0):keyboardWaitForResize(keyboardShow,!0)}function keyboardFocusIn(e){return clearTimeout(keyboardFocusOutTimer),e.target&&!e.target.readOnly&&ionic.tap.isKeyboardElement(e.target)&&(scrollView=ionic.DomUtil.getParentWithClass(e.target,SCROLL_CONTAINER_CSS))?(keyboardActiveElement=e.target,scrollView.classList.contains("overflow-scroll")||(document.body.scrollTop=0,
scrollView.scrollTop=0,ionic.requestAnimationFrame(function(){document.body.scrollTop=0,scrollView.scrollTop=0}),window.navigator.msPointerEnabled?document.addEventListener("MSPointerMove",keyboardPreventDefault,!1):document.addEventListener("touchmove",keyboardPreventDefault,!1)),(!ionic.keyboard.isOpen||ionic.keyboard.isClosing)&&(ionic.keyboard.isOpening=!0,ionic.keyboard.isClosing=!1),document.addEventListener("keydown",keyboardOnKeyDown,!1),void(ionic.keyboard.isOpen||keyboardHasPlugin()?ionic.keyboard.isOpen&&keyboardShow():keyboardWaitForResize(keyboardShow,!0))):void(keyboardActiveElement=null)}function keyboardFocusOut(){clearTimeout(keyboardFocusOutTimer),(ionic.keyboard.isOpen||ionic.keyboard.isOpening)&&(ionic.keyboard.isClosing=!0,ionic.keyboard.isOpening=!1),keyboardFocusOutTimer=setTimeout(function(){ionic.requestAnimationFrame(function(){wasOrientationChange?keyboardWaitForResize(function(){keyboardUpdateViewportHeight(),keyboardHide()},!1):keyboardWaitForResize(keyboardHide,!1)})},50)}function keyboardOrientationChange(){ionic.keyboard.isLandscape=!ionic.keyboard.isLandscape,ionic.Platform.isIOS()&&keyboardUpdateViewportHeight(),ionic.Platform.isAndroid()&&(ionic.keyboard.isOpen&&keyboardHasPlugin()?wasOrientationChange=!0:keyboardWaitForResize(keyboardUpdateViewportHeight,!1))}function keyboardOnKeyDown(e){ionic.scroll.isScrolling&&keyboardPreventDefault(e)}function keyboardPreventDefault(e){"TEXTAREA"!==e.target.tagName&&e.preventDefault()}function keyboardWaitForResize(callback,isOpening){clearInterval(waitForResizeTimer);var maxCount,count=0,initialHeight=getViewportHeight(),viewportHeight=initialHeight;return maxCount=ionic.Platform.isAndroid()&&ionic.Platform.version()<4.4?30:ionic.Platform.isAndroid()?10:1,waitForResizeTimer=setInterval(function(){viewportHeight=getViewportHeight(),(!(++count<maxCount)||(isPortraitViewportHeight(viewportHeight)||isLandscapeViewportHeight(viewportHeight))&&ionic.keyboard.height)&&(keyboardHasPlugin()||(ionic.keyboard.height=Math.abs(initialHeight-window.innerHeight)),ionic.keyboard.isOpen=isOpening,clearInterval(waitForResizeTimer),callback())},50),maxCount}function keyboardHide(){clearTimeout(keyboardFocusOutTimer),ionic.keyboard.isOpen=!1,ionic.keyboard.isClosing=!1,keyboardActiveElement&&ionic.trigger("resetScrollView",{target:keyboardActiveElement},!0),ionic.requestAnimationFrame(function(){document.body.classList.remove(KEYBOARD_OPEN_CSS)}),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerMove",keyboardPreventDefault):document.removeEventListener("touchmove",keyboardPreventDefault),document.removeEventListener("keydown",keyboardOnKeyDown),ionic.Platform.isAndroid()&&(keyboardHasPlugin()&&cordova.plugins.Keyboard.close(),keyboardActiveElement&&keyboardActiveElement.blur()),keyboardActiveElement=null}function keyboardShow(){ionic.keyboard.isOpen=!0,ionic.keyboard.isOpening=!1;var details={keyboardHeight:keyboardGetHeight(),viewportHeight:keyboardCurrentViewportHeight};if(keyboardActiveElement){details.target=keyboardActiveElement;var elementBounds=keyboardActiveElement.getBoundingClientRect();details.elementTop=Math.round(elementBounds.top),details.elementBottom=Math.round(elementBounds.bottom),details.windowHeight=details.viewportHeight-details.keyboardHeight,details.isElementUnderKeyboard=details.elementBottom>details.windowHeight,ionic.trigger("scrollChildIntoView",details,!0)}return setTimeout(function(){document.body.classList.add(KEYBOARD_OPEN_CSS)},400),details}function keyboardGetHeight(){if(ionic.keyboard.height)return ionic.keyboard.height;if(ionic.Platform.isAndroid()){if(ionic.Platform.isFullScreen)return 275;var contentHeight=window.innerHeight;return keyboardCurrentViewportHeight>contentHeight?keyboardCurrentViewportHeight-contentHeight:0}return ionic.Platform.isIOS()?ionic.keyboard.isLandscape?206:ionic.Platform.isWebView()?260:216:275}function isPortraitViewportHeight(viewportHeight){return!!(!ionic.keyboard.isLandscape&&keyboardPortraitViewportHeight&&Math.abs(keyboardPortraitViewportHeight-viewportHeight)<2)}function isLandscapeViewportHeight(viewportHeight){return!!(ionic.keyboard.isLandscape&&keyboardLandscapeViewportHeight&&Math.abs(keyboardLandscapeViewportHeight-viewportHeight)<2)}function keyboardUpdateViewportHeight(){wasOrientationChange=!1,keyboardCurrentViewportHeight=getViewportHeight(),ionic.keyboard.isLandscape&&!keyboardLandscapeViewportHeight?keyboardLandscapeViewportHeight=keyboardCurrentViewportHeight:ionic.keyboard.isLandscape||keyboardPortraitViewportHeight||(keyboardPortraitViewportHeight=keyboardCurrentViewportHeight),keyboardActiveElement&&ionic.trigger("resetScrollView",{target:keyboardActiveElement},!0),ionic.keyboard.isOpen&&ionic.tap.isTextInput(keyboardActiveElement)&&keyboardShow()}function keyboardInitViewportHeight(){var viewportHeight=getViewportHeight();viewportHeight/window.innerWidth<1&&(ionic.keyboard.isLandscape=!0),keyboardCurrentViewportHeight=viewportHeight,ionic.keyboard.isLandscape&&!keyboardLandscapeViewportHeight?keyboardLandscapeViewportHeight=keyboardCurrentViewportHeight:ionic.keyboard.isLandscape||keyboardPortraitViewportHeight||(keyboardPortraitViewportHeight=keyboardCurrentViewportHeight)}function getViewportHeight(){var windowHeight=window.innerHeight;return ionic.Platform.isAndroid()&&ionic.Platform.isFullScreen||!ionic.keyboard.isOpen&&!ionic.keyboard.isOpening||ionic.keyboard.isClosing?windowHeight:windowHeight+keyboardGetHeight()}function keyboardHasPlugin(){return!!(window.cordova&&cordova.plugins&&cordova.plugins.Keyboard)}function viewportLoadTag(){var x;for(x=0;x<document.head.children.length;x++)if("viewport"==document.head.children[x].name){viewportTag=document.head.children[x];break}if(viewportTag){var keyValue,props=viewportTag.content.toLowerCase().replace(/\s+/g,"").split(",");for(x=0;x<props.length;x++)props[x]&&(keyValue=props[x].split("="),viewportProperties[keyValue[0]]=keyValue.length>1?keyValue[1]:"_");viewportUpdate()}}function viewportUpdate(){var initWidth=viewportProperties.width,initHeight=viewportProperties.height,p=ionic.Platform,version=p.version(),DEVICE_WIDTH="device-width",DEVICE_HEIGHT="device-height",orientation=ionic.viewport.orientation();delete viewportProperties.height,viewportProperties.width=DEVICE_WIDTH,p.isIPad()?version>7?delete viewportProperties.width:p.isWebView()?90==orientation?viewportProperties.height="0":7==version&&(viewportProperties.height=DEVICE_HEIGHT):7>version&&(viewportProperties.height="0"):p.isIOS()&&(p.isWebView()?version>7?delete viewportProperties.width:7>version?initHeight&&(viewportProperties.height="0"):7==version&&(viewportProperties.height=DEVICE_HEIGHT):7>version&&initHeight&&(viewportProperties.height="0")),(initWidth!==viewportProperties.width||initHeight!==viewportProperties.height)&&viewportTagUpdate()}function viewportTagUpdate(){var key,props=[];for(key in viewportProperties)viewportProperties[key]&&props.push(key+("_"==viewportProperties[key]?"":"="+viewportProperties[key]));viewportTag.content=props.join(", ")}window.ionic=window.ionic||{},window.ionic.views={},window.ionic.version="1.1.0",function(ionic){ionic.DelegateService=function(methodNames){function trueFn(){return!0}if(methodNames.indexOf("$getByHandle")>-1)throw new Error("Method '$getByHandle' is implicitly added to each delegate service. Do not list it as a method.");return["$log",function($log){function DelegateInstance(instances,handle){this._instances=instances,this.handle=handle}function DelegateService(){this._instances=[]}function instanceMethodCaller(methodName){return function(){var returnValue,handle=this.handle,args=arguments,foundInstancesCount=0;return this._instances.forEach(function(instance){if((!handle||handle==instance.$$delegateHandle)&&instance.$$filterFn(instance)){foundInstancesCount++;var ret=instance[methodName].apply(instance,args);1===foundInstancesCount&&(returnValue=ret)}}),!foundInstancesCount&&handle?$log.warn('Delegate for handle "'+handle+'" could not find a corresponding element with delegate-handle="'+handle+'"! '+methodName+"() was not called!\nPossible cause: If you are calling "+methodName+'() immediately, and your element with delegate-handle="'+handle+'" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to '+methodName+"() and try again."):returnValue}}return methodNames.forEach(function(methodName){DelegateInstance.prototype[methodName]=instanceMethodCaller(methodName)}),DelegateService.prototype=DelegateInstance.prototype,DelegateService.prototype._registerInstance=function(instance,handle,filterFn){var instances=this._instances;return instance.$$delegateHandle=handle,instance.$$filterFn=filterFn||trueFn,instances.push(instance),function(){var index=instances.indexOf(instance);-1!==index&&instances.splice(index,1)}},DelegateService.prototype.$getByHandle=function(handle){return new DelegateInstance(this._instances,handle)},new DelegateService}]}}(window.ionic),function(window,document,ionic){function domReady(){isDomReady=!0;for(var x=0;x<readyCallbacks.length;x++)ionic.requestAnimationFrame(readyCallbacks[x]);readyCallbacks=[],document.removeEventListener("DOMContentLoaded",domReady)}var readyCallbacks=[],isDomReady="complete"===document.readyState||"interactive"===document.readyState;isDomReady||document.addEventListener("DOMContentLoaded",domReady),window._rAF=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,16)}}();var cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelRequestAnimationFrame;ionic.DomUtil={requestAnimationFrame:function(cb){return window._rAF(cb)},cancelAnimationFrame:function(requestId){cancelAnimationFrame(requestId)},animationFrameThrottle:function(cb){var args,isQueued,context;return function(){args=arguments,context=this,isQueued||(isQueued=!0,ionic.requestAnimationFrame(function(){cb.apply(context,args),isQueued=!1}))}},contains:function(parentNode,otherNode){for(var current=otherNode;current;){if(current===parentNode)return!0;current=current.parentNode}},getPositionInParent:function(el){return{left:el.offsetLeft,top:el.offsetTop}},ready:function(cb){isDomReady?ionic.requestAnimationFrame(cb):readyCallbacks.push(cb)},getTextBounds:function(textNode){if(document.createRange){var range=document.createRange();if(range.selectNodeContents(textNode),range.getBoundingClientRect){var rect=range.getBoundingClientRect();if(rect){var sx=window.scrollX,sy=window.scrollY;return{top:rect.top+sy,left:rect.left+sx,right:rect.left+sx+rect.width,bottom:rect.top+sy+rect.height,width:rect.width,height:rect.height}}}}return null},getChildIndex:function(element,type){if(type)for(var c,ch=element.parentNode.children,i=0,k=0,j=ch.length;j>i;i++)if(c=ch[i],c.nodeName&&c.nodeName.toLowerCase()==type){if(c==element)return k;k++}return Array.prototype.slice.call(element.parentNode.children).indexOf(element)},swapNodes:function(src,dest){dest.parentNode.insertBefore(src,dest)},elementIsDescendant:function(el,parent,stopAt){var current=el;do{if(current===parent)return!0;current=current.parentNode}while(current&&current!==stopAt);return!1},getParentWithClass:function(e,className,depth){for(depth=depth||10;e.parentNode&&depth--;){if(e.parentNode.classList&&e.parentNode.classList.contains(className))return e.parentNode;e=e.parentNode}return null},getParentOrSelfWithClass:function(e,className,depth){for(depth=depth||10;e&&depth--;){if(e.classList&&e.classList.contains(className))return e;e=e.parentNode}return null},rectContains:function(x,y,x1,y1,x2,y2){return x1>x||x>x2?!1:y1>y||y>y2?!1:!0},blurAll:function(){return document.activeElement&&document.activeElement!=document.body?(document.activeElement.blur(),document.activeElement):null},cachedAttr:function(ele,key,value){if(ele=ele&&ele.length&&ele[0]||ele,ele&&ele.setAttribute){var dataKey="$attr-"+key;return arguments.length>2?ele[dataKey]!==value&&(ele.setAttribute(key,value),ele[dataKey]=value):"undefined"==typeof ele[dataKey]&&(ele[dataKey]=ele.getAttribute(key)),ele[dataKey]}},cachedStyles:function(ele,styles){if(ele=ele&&ele.length&&ele[0]||ele,ele&&ele.style)for(var prop in styles)ele["$style-"+prop]!==styles[prop]&&(ele.style[prop]=ele["$style-"+prop]=styles[prop])}},ionic.requestAnimationFrame=ionic.DomUtil.requestAnimationFrame,ionic.cancelAnimationFrame=ionic.DomUtil.cancelAnimationFrame,ionic.animationFrameThrottle=ionic.DomUtil.animationFrameThrottle}(window,document,ionic),function(ionic){ionic.CustomEvent=function(){if("function"==typeof window.CustomEvent)return CustomEvent;var customEvent=function(event,params){var evt;params=params||{bubbles:!1,cancelable:!1,detail:void 0};try{evt=document.createEvent("CustomEvent"),evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail)}catch(error){evt=document.createEvent("Event");for(var param in params)evt[param]=params[param];evt.initEvent(event,params.bubbles,params.cancelable)}return evt};return customEvent.prototype=window.Event.prototype,customEvent}(),ionic.EventController={VIRTUALIZED_EVENTS:["tap","swipe","swiperight","swipeleft","drag","hold","release"],trigger:function(eventType,data,bubbles,cancelable){var event=new ionic.CustomEvent(eventType,{detail:data,bubbles:!!bubbles,cancelable:!!cancelable});data&&data.target&&data.target.dispatchEvent&&data.target.dispatchEvent(event)||window.dispatchEvent(event)},on:function(type,callback,element){for(var e=element||window,i=0,j=this.VIRTUALIZED_EVENTS.length;j>i;i++)if(type==this.VIRTUALIZED_EVENTS[i]){var gesture=new ionic.Gesture(element);return gesture.on(type,callback),gesture}e.addEventListener(type,callback)},off:function(type,callback,element){element.removeEventListener(type,callback)},onGesture:function(type,callback,element,options){var gesture=new ionic.Gesture(element,options);return gesture.on(type,callback),gesture},offGesture:function(gesture,type,callback){gesture&&gesture.off(type,callback)},handlePopState:function(){}},ionic.on=function(){ionic.EventController.on.apply(ionic.EventController,arguments)},ionic.off=function(){ionic.EventController.off.apply(ionic.EventController,arguments)},ionic.trigger=ionic.EventController.trigger,ionic.onGesture=function(){return ionic.EventController.onGesture.apply(ionic.EventController.onGesture,arguments)},ionic.offGesture=function(){return ionic.EventController.offGesture.apply(ionic.EventController.offGesture,arguments)}}(window.ionic),function(ionic){function setup(){if(!ionic.Gestures.READY){ionic.Gestures.event.determineEventTypes();for(var name in ionic.Gestures.gestures)ionic.Gestures.gestures.hasOwnProperty(name)&&ionic.Gestures.detection.register(ionic.Gestures.gestures[name]);ionic.Gestures.event.onTouch(ionic.Gestures.DOCUMENT,ionic.Gestures.EVENT_MOVE,ionic.Gestures.detection.detect),ionic.Gestures.event.onTouch(ionic.Gestures.DOCUMENT,ionic.Gestures.EVENT_END,ionic.Gestures.detection.detect),ionic.Gestures.READY=!0}}ionic.Gesture=function(element,options){return new ionic.Gestures.Instance(element,options||{})},ionic.Gestures={},ionic.Gestures.defaults={stop_browser_behavior:"disable-user-behavior"},ionic.Gestures.HAS_POINTEREVENTS=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ionic.Gestures.HAS_TOUCHEVENTS="ontouchstart"in window,ionic.Gestures.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,ionic.Gestures.NO_MOUSEEVENTS=ionic.Gestures.HAS_TOUCHEVENTS&&window.navigator.userAgent.match(ionic.Gestures.MOBILE_REGEX),ionic.Gestures.EVENT_TYPES={},ionic.Gestures.DIRECTION_DOWN="down",ionic.Gestures.DIRECTION_LEFT="left",ionic.Gestures.DIRECTION_UP="up",ionic.Gestures.DIRECTION_RIGHT="right",ionic.Gestures.POINTER_MOUSE="mouse",ionic.Gestures.POINTER_TOUCH="touch",ionic.Gestures.POINTER_PEN="pen",ionic.Gestures.EVENT_START="start",ionic.Gestures.EVENT_MOVE="move",ionic.Gestures.EVENT_END="end",ionic.Gestures.DOCUMENT=window.document,ionic.Gestures.plugins={},ionic.Gestures.READY=!1,ionic.Gestures.Instance=function(element,options){var self=this;return null===element?this:(setup(),this.element=element,this.enabled=!0,this.options=ionic.Gestures.utils.extend(ionic.Gestures.utils.extend({},ionic.Gestures.defaults),options||{}),this.options.stop_browser_behavior&&ionic.Gestures.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),ionic.Gestures.event.onTouch(element,ionic.Gestures.EVENT_START,function(ev){self.enabled&&ionic.Gestures.detection.startDetect(self,ev)}),this)},ionic.Gestures.Instance.prototype={on:function(gesture,handler){for(var gestures=gesture.split(" "),t=0;t<gestures.length;t++)this.element.addEventListener(gestures[t],handler,!1);return this},off:function(gesture,handler){for(var gestures=gesture.split(" "),t=0;t<gestures.length;t++)this.element.removeEventListener(gestures[t],handler,!1);return this},trigger:function(gesture,eventData){var event=ionic.Gestures.DOCUMENT.createEvent("Event");event.initEvent(gesture,!0,!0),event.gesture=eventData;var element=this.element;return ionic.Gestures.utils.hasParent(eventData.target,element)&&(element=eventData.target),element.dispatchEvent(event),this},enable:function(state){return this.enabled=state,this}};var last_move_event=null,enable_detect=!1,touch_triggered=!1;ionic.Gestures.event={bindDom:function(element,type,handler){for(var types=type.split(" "),t=0;t<types.length;t++)element.addEventListener(types[t],handler,!1)},onTouch:function(element,eventType,handler){var self=this;this.bindDom(element,ionic.Gestures.EVENT_TYPES[eventType],function(ev){var sourceEventType=ev.type.toLowerCase();if(!sourceEventType.match(/mouse/)||!touch_triggered){sourceEventType.match(/touch/)||sourceEventType.match(/pointerdown/)||sourceEventType.match(/mouse/)&&1===ev.which?enable_detect=!0:sourceEventType.match(/mouse/)&&1!==ev.which&&(enable_detect=!1),sourceEventType.match(/touch|pointer/)&&(touch_triggered=!0);var count_touches=0;enable_detect&&(ionic.Gestures.HAS_POINTEREVENTS&&eventType!=ionic.Gestures.EVENT_END?count_touches=ionic.Gestures.PointerEvent.updatePointer(eventType,ev):sourceEventType.match(/touch/)?count_touches=ev.touches.length:touch_triggered||(count_touches=sourceEventType.match(/up/)?0:1),count_touches>0&&eventType==ionic.Gestures.EVENT_END?eventType=ionic.Gestures.EVENT_MOVE:count_touches||(eventType=ionic.Gestures.EVENT_END),(count_touches||null===last_move_event)&&(last_move_event=ev),handler.call(ionic.Gestures.detection,self.collectEventData(element,eventType,self.getTouchList(last_move_event,eventType),ev)),ionic.Gestures.HAS_POINTEREVENTS&&eventType==ionic.Gestures.EVENT_END&&(count_touches=ionic.Gestures.PointerEvent.updatePointer(eventType,ev))),count_touches||(last_move_event=null,enable_detect=!1,touch_triggered=!1,ionic.Gestures.PointerEvent.reset())}})},determineEventTypes:function(){var types;types=ionic.Gestures.HAS_POINTEREVENTS?ionic.Gestures.PointerEvent.getEvents():ionic.Gestures.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],ionic.Gestures.EVENT_TYPES[ionic.Gestures.EVENT_START]=types[0],ionic.Gestures.EVENT_TYPES[ionic.Gestures.EVENT_MOVE]=types[1],ionic.Gestures.EVENT_TYPES[ionic.Gestures.EVENT_END]=types[2]},getTouchList:function(ev){return ionic.Gestures.HAS_POINTEREVENTS?ionic.Gestures.PointerEvent.getTouchList():ev.touches?ev.touches:(ev.identifier=1,[ev])},collectEventData:function(element,eventType,touches,ev){var pointerType=ionic.Gestures.POINTER_TOUCH;return(ev.type.match(/mouse/)||ionic.Gestures.PointerEvent.matchType(ionic.Gestures.POINTER_MOUSE,ev))&&(pointerType=ionic.Gestures.POINTER_MOUSE),{center:ionic.Gestures.utils.getCenter(touches),timeStamp:(new Date).getTime(),target:ev.target,touches:touches,eventType:eventType,pointerType:pointerType,srcEvent:ev,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return ionic.Gestures.detection.stopDetect()}}}},ionic.Gestures.PointerEvent={pointers:{},getTouchList:function(){var self=this,touchlist=[];return Object.keys(self.pointers).sort().forEach(function(id){touchlist.push(self.pointers[id])}),touchlist},updatePointer:function(type,pointerEvent){return type==ionic.Gestures.EVENT_END?this.pointers={}:(pointerEvent.identifier=pointerEvent.pointerId,this.pointers[pointerEvent.pointerId]=pointerEvent),Object.keys(this.pointers).length},matchType:function(pointerType,ev){if(!ev.pointerType)return!1;var types={};return types[ionic.Gestures.POINTER_MOUSE]=ev.pointerType==ev.MSPOINTER_TYPE_MOUSE||ev.pointerType==ionic.Gestures.POINTER_MOUSE,types[ionic.Gestures.POINTER_TOUCH]=ev.pointerType==ev.MSPOINTER_TYPE_TOUCH||ev.pointerType==ionic.Gestures.POINTER_TOUCH,types[ionic.Gestures.POINTER_PEN]=ev.pointerType==ev.MSPOINTER_TYPE_PEN||ev.pointerType==ionic.Gestures.POINTER_PEN,types[pointerType]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},ionic.Gestures.utils={extend:function(dest,src,merge){for(var key in src)void 0!==dest[key]&&merge||(dest[key]=src[key]);return dest},hasParent:function(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1},getCenter:function(touches){for(var valuesX=[],valuesY=[],t=0,len=touches.length;len>t;t++)valuesX.push(touches[t].pageX),valuesY.push(touches[t].pageY);return{pageX:(Math.min.apply(Math,valuesX)+Math.max.apply(Math,valuesX))/2,pageY:(Math.min.apply(Math,valuesY)+Math.max.apply(Math,valuesY))/2}},getVelocity:function(delta_time,delta_x,delta_y){return{x:Math.abs(delta_x/delta_time)||0,y:Math.abs(delta_y/delta_time)||0}},getAngle:function(touch1,touch2){var y=touch2.pageY-touch1.pageY,x=touch2.pageX-touch1.pageX;return 180*Math.atan2(y,x)/Math.PI},getDirection:function(touch1,touch2){var x=Math.abs(touch1.pageX-touch2.pageX),y=Math.abs(touch1.pageY-touch2.pageY);return x>=y?touch1.pageX-touch2.pageX>0?ionic.Gestures.DIRECTION_LEFT:ionic.Gestures.DIRECTION_RIGHT:touch1.pageY-touch2.pageY>0?ionic.Gestures.DIRECTION_UP:ionic.Gestures.DIRECTION_DOWN},getDistance:function(touch1,touch2){var x=touch2.pageX-touch1.pageX,y=touch2.pageY-touch1.pageY;return Math.sqrt(x*x+y*y)},getScale:function(start,end){return start.length>=2&&end.length>=2?this.getDistance(end[0],end[1])/this.getDistance(start[0],start[1]):1},getRotation:function(start,end){return start.length>=2&&end.length>=2?this.getAngle(end[1],end[0])-this.getAngle(start[1],start[0]):0},isVertical:function(direction){return direction==ionic.Gestures.DIRECTION_UP||direction==ionic.Gestures.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(element,css_class){element&&element.classList&&(element.classList.add(css_class),element.onselectstart=function(){return!1})}},ionic.Gestures.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(inst,eventData){this.current||(this.stopped=!1,this.current={inst:inst,startEvent:ionic.Gestures.utils.extend({},eventData),lastEvent:!1,name:""},this.detect(eventData))},detect:function(eventData){if(!this.current||this.stopped)return null;eventData=this.extendEventData(eventData);for(var inst_options=this.current.inst.options,g=0,len=this.gestures.length;len>g;g++){var gesture=this.gestures[g];if(!this.stopped&&inst_options[gesture.name]!==!1&&gesture.handler.call(gesture,eventData,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=eventData),eventData.eventType==ionic.Gestures.EVENT_END&&!eventData.touches.length-1&&this.stopDetect(),eventData},stopDetect:function(){this.previous=ionic.Gestures.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(ev){var startEv=this.current.startEvent;if(startEv&&(ev.touches.length!=startEv.touches.length||ev.touches===startEv.touches)){startEv.touches=[];for(var i=0,len=ev.touches.length;len>i;i++)startEv.touches.push(ionic.Gestures.utils.extend({},ev.touches[i]))}var delta_time=ev.timeStamp-startEv.timeStamp,delta_x=ev.center.pageX-startEv.center.pageX,delta_y=ev.center.pageY-startEv.center.pageY,velocity=ionic.Gestures.utils.getVelocity(delta_time,delta_x,delta_y);return ionic.Gestures.utils.extend(ev,{deltaTime:delta_time,deltaX:delta_x,deltaY:delta_y,velocityX:velocity.x,velocityY:velocity.y,distance:ionic.Gestures.utils.getDistance(startEv.center,ev.center),angle:ionic.Gestures.utils.getAngle(startEv.center,ev.center),direction:ionic.Gestures.utils.getDirection(startEv.center,ev.center),scale:ionic.Gestures.utils.getScale(startEv.touches,ev.touches),rotation:ionic.Gestures.utils.getRotation(startEv.touches,ev.touches),startEvent:startEv}),ev},register:function(gesture){var options=gesture.defaults||{};return void 0===options[gesture.name]&&(options[gesture.name]=!0),ionic.Gestures.utils.extend(ionic.Gestures.defaults,options,!0),gesture.index=gesture.index||1e3,this.gestures.push(gesture),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},ionic.Gestures.gestures=ionic.Gestures.gestures||{},ionic.Gestures.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(ev,inst){switch(ev.eventType){case ionic.Gestures.EVENT_START:clearTimeout(this.timer),ionic.Gestures.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==ionic.Gestures.detection.current.name&&(ionic.tap.cancelClick(),inst.trigger("hold",ev))},inst.options.hold_timeout);break;case ionic.Gestures.EVENT_MOVE:ev.distance>inst.options.hold_threshold&&clearTimeout(this.timer);break;case ionic.Gestures.EVENT_END:clearTimeout(this.timer)}}},ionic.Gestures.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(ev,inst){if(ev.eventType==ionic.Gestures.EVENT_END&&"touchcancel"!=ev.srcEvent.type){var prev=ionic.Gestures.detection.previous,did_doubletap=!1;if(ev.deltaTime>inst.options.tap_max_touchtime||ev.distance>inst.options.tap_max_distance)return;prev&&"tap"==prev.name&&ev.timeStamp-prev.lastEvent.timeStamp<inst.options.doubletap_interval&&ev.distance<inst.options.doubletap_distance&&(inst.trigger("doubletap",ev),did_doubletap=!0),(!did_doubletap||inst.options.tap_always)&&(ionic.Gestures.detection.current.name="tap",inst.trigger("tap",ev))}}},ionic.Gestures.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.4},handler:function(ev,inst){if(ev.eventType==ionic.Gestures.EVENT_END){if(inst.options.swipe_max_touches>0&&ev.touches.length>inst.options.swipe_max_touches)return;(ev.velocityX>inst.options.swipe_velocity||ev.velocityY>inst.options.swipe_velocity)&&(inst.trigger(this.name,ev),inst.trigger(this.name+ev.direction,ev))}}},ionic.Gestures.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!0,drag_block_vertical:!0,drag_lock_to_axis:!1,drag_lock_min_distance:25,prevent_default_directions:[]},triggered:!1,handler:function(ev,inst){if("touchstart"==ev.srcEvent.type||"touchend"==ev.srcEvent.type?this.preventedFirstMove=!1:this.preventedFirstMove||"touchmove"!=ev.srcEvent.type||(inst.options.prevent_default_directions.length>0&&-1!=inst.options.prevent_default_directions.indexOf(ev.direction)&&ev.srcEvent.preventDefault(),this.preventedFirstMove=!0),ionic.Gestures.detection.current.name!=this.name&&this.triggered)return inst.trigger(this.name+"end",ev),void(this.triggered=!1);if(!(inst.options.drag_max_touches>0&&ev.touches.length>inst.options.drag_max_touches))switch(ev.eventType){case ionic.Gestures.EVENT_START:this.triggered=!1;break;case ionic.Gestures.EVENT_MOVE:if(ev.distance<inst.options.drag_min_distance&&ionic.Gestures.detection.current.name!=this.name)return;if(ionic.Gestures.detection.current.name!=this.name&&(ionic.Gestures.detection.current.name=this.name,inst.options.correct_for_drag_min_distance)){var factor=Math.abs(inst.options.drag_min_distance/ev.distance);ionic.Gestures.detection.current.startEvent.center.pageX+=ev.deltaX*factor,ionic.Gestures.detection.current.startEvent.center.pageY+=ev.deltaY*factor,ev=ionic.Gestures.detection.extendEventData(ev)}(ionic.Gestures.detection.current.lastEvent.drag_locked_to_axis||inst.options.drag_lock_to_axis&&inst.options.drag_lock_min_distance<=ev.distance)&&(ev.drag_locked_to_axis=!0);var last_direction=ionic.Gestures.detection.current.lastEvent.direction;ev.drag_locked_to_axis&&last_direction!==ev.direction&&(ionic.Gestures.utils.isVertical(last_direction)?ev.direction=ev.deltaY<0?ionic.Gestures.DIRECTION_UP:ionic.Gestures.DIRECTION_DOWN:ev.direction=ev.deltaX<0?ionic.Gestures.DIRECTION_LEFT:ionic.Gestures.DIRECTION_RIGHT),this.triggered||(inst.trigger(this.name+"start",ev),this.triggered=!0),inst.trigger(this.name,ev),inst.trigger(this.name+ev.direction,ev),(inst.options.drag_block_vertical&&ionic.Gestures.utils.isVertical(ev.direction)||inst.options.drag_block_horizontal&&!ionic.Gestures.utils.isVertical(ev.direction))&&ev.preventDefault();break;case ionic.Gestures.EVENT_END:this.triggered&&inst.trigger(this.name+"end",ev),this.triggered=!1}}},ionic.Gestures.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(ev,inst){if(ionic.Gestures.detection.current.name!=this.name&&this.triggered)return inst.trigger(this.name+"end",ev),void(this.triggered=!1);if(!(ev.touches.length<2))switch(inst.options.transform_always_block&&ev.preventDefault(),ev.eventType){case ionic.Gestures.EVENT_START:this.triggered=!1;break;case ionic.Gestures.EVENT_MOVE:var scale_threshold=Math.abs(1-ev.scale),rotation_threshold=Math.abs(ev.rotation);if(scale_threshold<inst.options.transform_min_scale&&rotation_threshold<inst.options.transform_min_rotation)return;ionic.Gestures.detection.current.name=this.name,this.triggered||(inst.trigger(this.name+"start",ev),this.triggered=!0),inst.trigger(this.name,ev),rotation_threshold>inst.options.transform_min_rotation&&inst.trigger("rotate",ev),scale_threshold>inst.options.transform_min_scale&&(inst.trigger("pinch",ev),inst.trigger("pinch"+(ev.scale<1?"in":"out"),ev));break;case ionic.Gestures.EVENT_END:this.triggered&&inst.trigger(this.name+"end",ev),this.triggered=!1}}},ionic.Gestures.gestures.Touch={name:"touch",index:-(1/0),defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(ev,inst){return inst.options.prevent_mouseevents&&ev.pointerType==ionic.Gestures.POINTER_MOUSE?void ev.stopDetect():(inst.options.prevent_default&&ev.preventDefault(),void(ev.eventType==ionic.Gestures.EVENT_START&&inst.trigger(this.name,ev)))}},ionic.Gestures.gestures.Release={name:"release",index:1/0,handler:function(ev,inst){ev.eventType==ionic.Gestures.EVENT_END&&inst.trigger(this.name,ev)}}}(window.ionic),function(window,document,ionic){function getParameterByName(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))}function onWindowLoad(){self.isWebView()?document.addEventListener("deviceready",onPlatformReady,!1):onPlatformReady(),windowLoadListenderAttached&&window.removeEventListener("load",onWindowLoad,!1)}function onPlatformReady(){self.isReady=!0,self.detect();for(var x=0;x<readyCallbacks.length;x++)readyCallbacks[x]();readyCallbacks=[],ionic.trigger("platformready",{target:document}),requestAnimationFrame(function(){document.body.classList.add("platform-ready")})}var windowLoadListenderAttached,IOS="ios",ANDROID="android",WINDOWS_PHONE="windowsphone",requestAnimationFrame=ionic.requestAnimationFrame,self=ionic.Platform={
navigator:window.navigator,isReady:!1,isFullScreen:!1,platforms:null,grade:null,ua:navigator.userAgent,ready:function(cb){self.isReady?cb():readyCallbacks.push(cb)},detect:function(){self._checkPlatforms(),requestAnimationFrame(function(){for(var i=0;i<self.platforms.length;i++)document.body.classList.add("platform-"+self.platforms[i])})},setGrade:function(grade){var oldGrade=self.grade;self.grade=grade,requestAnimationFrame(function(){oldGrade&&document.body.classList.remove("grade-"+oldGrade),document.body.classList.add("grade-"+grade)})},device:function(){return window.device||{}},_checkPlatforms:function(){self.platforms=[];var grade="a";self.isWebView()?(self.platforms.push("webview"),window.cordova||window.PhoneGap||window.phonegap?self.platforms.push("cordova"):window.forge&&self.platforms.push("trigger")):self.platforms.push("browser"),self.isIPad()&&self.platforms.push("ipad");var platform=self.platform();if(platform){self.platforms.push(platform);var version=self.version();if(version){var v=version.toString();v.indexOf(".")>0?v=v.replace(".","_"):v+="_0",self.platforms.push(platform+v.split("_")[0]),self.platforms.push(platform+v),self.isAndroid()&&4.4>version?grade=4>version?"c":"b":self.isWindowsPhone()&&(grade="b")}}self.setGrade(grade)},isWebView:function(){return!!(window.cordova||window.PhoneGap||window.phonegap||window.forge)},isIPad:function(){return/iPad/i.test(self.navigator.platform)?!0:/iPad/i.test(self.ua)},isIOS:function(){return self.is(IOS)},isAndroid:function(){return self.is(ANDROID)},isWindowsPhone:function(){return self.is(WINDOWS_PHONE)},platform:function(){return null===platformName&&self.setPlatform(self.device().platform),platformName},setPlatform:function(n){platformName="undefined"!=typeof n&&null!==n&&n.length?n.toLowerCase():getParameterByName("ionicplatform")?getParameterByName("ionicplatform"):self.ua.indexOf("Android")>0?ANDROID:/iPhone|iPad|iPod/.test(self.ua)?IOS:self.ua.indexOf("Windows Phone")>-1?WINDOWS_PHONE:self.navigator.platform&&navigator.platform.toLowerCase().split(" ")[0]||""},version:function(){return null===platformVersion&&self.setVersion(self.device().version),platformVersion},setVersion:function(v){if("undefined"!=typeof v&&null!==v&&(v=v.split("."),v=parseFloat(v[0]+"."+(v.length>1?v[1]:0)),!isNaN(v)))return void(platformVersion=v);platformVersion=0;var pName=self.platform(),versionMatch={android:/Android (\d+).(\d+)?/,ios:/OS (\d+)_(\d+)?/,windowsphone:/Windows Phone (\d+).(\d+)?/};versionMatch[pName]&&(v=self.ua.match(versionMatch[pName]),v&&v.length>2&&(platformVersion=parseFloat(v[1]+"."+v[2])))},is:function(type){if(type=type.toLowerCase(),self.platforms)for(var x=0;x<self.platforms.length;x++)if(self.platforms[x]===type)return!0;var pName=self.platform();return pName?pName===type.toLowerCase():self.ua.toLowerCase().indexOf(type)>=0},exitApp:function(){self.ready(function(){navigator.app&&navigator.app.exitApp&&navigator.app.exitApp()})},showStatusBar:function(val){self._showStatusBar=val,self.ready(function(){requestAnimationFrame(function(){self._showStatusBar?(window.StatusBar&&window.StatusBar.show(),document.body.classList.remove("status-bar-hide")):(window.StatusBar&&window.StatusBar.hide(),document.body.classList.add("status-bar-hide"))})})},fullScreen:function(showFullScreen,showStatusBar){self.isFullScreen=showFullScreen!==!1,ionic.DomUtil.ready(function(){requestAnimationFrame(function(){self.isFullScreen?document.body.classList.add("fullscreen"):document.body.classList.remove("fullscreen")}),self.showStatusBar(showStatusBar===!0)})}},platformName=null,platformVersion=null,readyCallbacks=[];"complete"===document.readyState?onWindowLoad():(windowLoadListenderAttached=!0,window.addEventListener("load",onWindowLoad,!1))}(this,document,ionic),function(document,ionic){"use strict";ionic.CSS={},function(){var i,keys=["webkitTransform","transform","-webkit-transform","webkit-transform","-moz-transform","moz-transform","MozTransform","mozTransform","msTransform"];for(i=0;i<keys.length;i++)if(void 0!==document.documentElement.style[keys[i]]){ionic.CSS.TRANSFORM=keys[i];break}for(keys=["webkitTransition","mozTransition","msTransition","transition"],i=0;i<keys.length;i++)if(void 0!==document.documentElement.style[keys[i]]){ionic.CSS.TRANSITION=keys[i];break}var isWebkit=ionic.CSS.TRANSITION.indexOf("webkit")>-1;ionic.CSS.TRANSITION_DURATION=(isWebkit?"-webkit-":"")+"transition-duration",ionic.CSS.TRANSITIONEND=(isWebkit?"webkitTransitionEnd ":"")+"transitionend"}(),"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function update(fn){return function(){var x,classes=self.className.split(/\s+/);for(x=0;x<arguments.length;x++)fn(classes,classes.indexOf(arguments[x]),arguments[x]);self.className=classes.join(" ")}}var self=this;return{add:update(function(classes,index,value){~index||classes.push(value)}),remove:update(function(classes,index){~index&&classes.splice(index,1)}),toggle:update(function(classes,index,value){~index?classes.splice(index,1):classes.push(value)}),contains:function(value){return!!~self.className.split(/\s+/).indexOf(value)},item:function(i){return self.className.split(/\s+/)[i]||null}}}})}(document,ionic);var tapDoc,tapActiveEle,tapEnabledTouchEvents,tapMouseResetTimer,tapPointerMoved,tapPointerStart,tapTouchFocusedInput,tapLastTouchTarget,tapTouchMoveListener="touchmove",TAP_RELEASE_TOLERANCE=12,TAP_RELEASE_BUTTON_TOLERANCE=50,tapEventListeners={click:tapClickGateKeeper,mousedown:tapMouseDown,mouseup:tapMouseUp,mousemove:tapMouseMove,touchstart:tapTouchStart,touchend:tapTouchEnd,touchcancel:tapTouchCancel,touchmove:tapTouchMove,pointerdown:tapTouchStart,pointerup:tapTouchEnd,pointercancel:tapTouchCancel,pointermove:tapTouchMove,MSPointerDown:tapTouchStart,MSPointerUp:tapTouchEnd,MSPointerCancel:tapTouchCancel,MSPointerMove:tapTouchMove,focusin:tapFocusIn,focusout:tapFocusOut};ionic.tap={register:function(ele){return tapDoc=ele,tapEventListener("click",!0,!0),tapEventListener("mouseup"),tapEventListener("mousedown"),window.navigator.pointerEnabled?(tapEventListener("pointerdown"),tapEventListener("pointerup"),tapEventListener("pointcancel"),tapTouchMoveListener="pointermove"):window.navigator.msPointerEnabled?(tapEventListener("MSPointerDown"),tapEventListener("MSPointerUp"),tapEventListener("MSPointerCancel"),tapTouchMoveListener="MSPointerMove"):(tapEventListener("touchstart"),tapEventListener("touchend"),tapEventListener("touchcancel")),tapEventListener("focusin"),tapEventListener("focusout"),function(){for(var type in tapEventListeners)tapEventListener(type,!1);tapDoc=null,tapActiveEle=null,tapEnabledTouchEvents=!1,tapPointerMoved=!1,tapPointerStart=null}},ignoreScrollStart:function(e){return e.defaultPrevented||/^(file|range)$/i.test(e.target.type)||"true"==(e.target.dataset?e.target.dataset.preventScroll:e.target.getAttribute("data-prevent-scroll"))||!!/^(object|embed)$/i.test(e.target.tagName)||ionic.tap.isElementTapDisabled(e.target)},isTextInput:function(ele){return!!ele&&("TEXTAREA"==ele.tagName||"true"===ele.contentEditable||"INPUT"==ele.tagName&&!/^(radio|checkbox|range|file|submit|reset|color|image|button)$/i.test(ele.type))},isDateInput:function(ele){return!!ele&&"INPUT"==ele.tagName&&/^(date|time|datetime-local|month|week)$/i.test(ele.type)},isKeyboardElement:function(ele){return!ionic.Platform.isIOS()||ionic.Platform.isIPad()?ionic.tap.isTextInput(ele)&&!ionic.tap.isDateInput(ele):ionic.tap.isTextInput(ele)||!!ele&&"SELECT"==ele.tagName},isLabelWithTextInput:function(ele){var container=tapContainingElement(ele,!1);return!!container&&ionic.tap.isTextInput(tapTargetElement(container))},containsOrIsTextInput:function(ele){return ionic.tap.isTextInput(ele)||ionic.tap.isLabelWithTextInput(ele)},cloneFocusedInput:function(container){ionic.tap.hasCheckedClone||(ionic.tap.hasCheckedClone=!0,ionic.requestAnimationFrame(function(){var focusInput=container.querySelector(":focus");if(ionic.tap.isTextInput(focusInput)&&!ionic.tap.isDateInput(focusInput)){var clonedInput=focusInput.cloneNode(!0);clonedInput.value=focusInput.value,clonedInput.classList.add("cloned-text-input"),clonedInput.readOnly=!0,focusInput.isContentEditable&&(clonedInput.contentEditable=focusInput.contentEditable,clonedInput.innerHTML=focusInput.innerHTML),focusInput.parentElement.insertBefore(clonedInput,focusInput),focusInput.classList.add("previous-input-focus"),clonedInput.scrollTop=focusInput.scrollTop}}))},hasCheckedClone:!1,removeClonedInputs:function(container){ionic.tap.hasCheckedClone=!1,ionic.requestAnimationFrame(function(){var x,clonedInputs=container.querySelectorAll(".cloned-text-input"),previousInputFocus=container.querySelectorAll(".previous-input-focus");for(x=0;x<clonedInputs.length;x++)clonedInputs[x].parentElement.removeChild(clonedInputs[x]);for(x=0;x<previousInputFocus.length;x++)previousInputFocus[x].classList.remove("previous-input-focus"),previousInputFocus[x].style.top="",ionic.keyboard.isOpen&&!ionic.keyboard.isClosing&&previousInputFocus[x].focus()})},requiresNativeClick:function(ele){return!ele||ele.disabled||/^(file|range)$/i.test(ele.type)||/^(object|video)$/i.test(ele.tagName)||ionic.tap.isLabelContainingFileInput(ele)?!0:ionic.tap.isElementTapDisabled(ele)},isLabelContainingFileInput:function(ele){var lbl=tapContainingElement(ele);if("LABEL"!==lbl.tagName)return!1;var fileInput=lbl.querySelector("input[type=file]");return fileInput&&fileInput.disabled===!1?!0:!1},isElementTapDisabled:function(ele){if(ele&&1===ele.nodeType)for(var element=ele;element;){if("true"==(element.dataset?element.dataset.tapDisabled:element.getAttribute("data-tap-disabled")))return!0;element=element.parentElement}return!1},setTolerance:function(releaseTolerance,releaseButtonTolerance){TAP_RELEASE_TOLERANCE=releaseTolerance,TAP_RELEASE_BUTTON_TOLERANCE=releaseButtonTolerance},cancelClick:function(){tapPointerMoved=!0},pointerCoord:function(event){var c={x:0,y:0};if(event){var touches=event.touches&&event.touches.length?event.touches:[event],e=event.changedTouches&&event.changedTouches[0]||touches[0];e&&(c.x=e.clientX||e.pageX||0,c.y=e.clientY||e.pageY||0)}return c}},ionic.DomUtil.ready(function(){var ng="undefined"!=typeof angular?angular:null;(!ng||ng&&!ng.scenario)&&ionic.tap.register(document)}),function(document,ionic){"use strict";function clear(){queueElements={},ionic.requestAnimationFrame(deactivateElements)}function activateElements(){for(var key in queueElements)queueElements[key]&&(queueElements[key].classList.add(ACTIVATED_CLASS),activeElements[key]=queueElements[key]);queueElements={}}function deactivateElements(){if(ionic.transition&&ionic.transition.isActive)return void setTimeout(deactivateElements,400);for(var key in activeElements)activeElements[key]&&(activeElements[key].classList.remove(ACTIVATED_CLASS),delete activeElements[key])}var queueElements={},activeElements={},keyId=0,ACTIVATED_CLASS="activated";ionic.activator={start:function(e){var hitX=ionic.tap.pointerCoord(e).x;hitX>0&&30>hitX||ionic.requestAnimationFrame(function(){if(!(ionic.scroll&&ionic.scroll.isScrolling||ionic.tap.requiresNativeClick(e.target))){for(var eleToActivate,ele=e.target,x=0;6>x&&(ele&&1===ele.nodeType);x++){if(eleToActivate&&ele.classList&&ele.classList.contains("item")){eleToActivate=ele;break}if("A"==ele.tagName||"BUTTON"==ele.tagName||ele.hasAttribute("ng-click")){eleToActivate=ele;break}if(ele.classList&&ele.classList.contains("button")){eleToActivate=ele;break}if("ION-CONTENT"==ele.tagName||ele.classList&&ele.classList.contains("pane")||"BODY"==ele.tagName)break;ele=ele.parentElement}eleToActivate&&(queueElements[keyId]=eleToActivate,ionic.requestAnimationFrame(activateElements),keyId=keyId>29?0:keyId+1)}})},end:function(){setTimeout(clear,200)}}}(document,ionic),function(ionic){var nextId=0;ionic.Utils={arrayMove:function(arr,oldIndex,newIndex){if(newIndex>=arr.length)for(var k=newIndex-arr.length;k--+1;)arr.push(void 0);return arr.splice(newIndex,0,arr.splice(oldIndex,1)[0]),arr},proxy:function(func,context){var args=Array.prototype.slice.call(arguments,2);return function(){return func.apply(context,args.concat(Array.prototype.slice.call(arguments)))}},debounce:function(func,wait,immediate){var timeout,args,context,timestamp,result;return function(){context=this,args=arguments,timestamp=new Date;var later=function(){var last=new Date-timestamp;wait>last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args)))},callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args)),result}},throttle:function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:Date.now(),timeout=null,result=func.apply(context,args)};return function(){var now=Date.now();previous||options.leading!==!1||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||options.trailing===!1||(timeout=setTimeout(later,remaining)),result}},inherit:function(protoProps,staticProps){var child,parent=this;child=protoProps&&protoProps.hasOwnProperty("constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},ionic.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&ionic.extend(child.prototype,protoProps),child.__super__=parent.prototype,child},extend:function(obj){for(var args=Array.prototype.slice.call(arguments,1),i=0;i<args.length;i++){var source=args[i];if(source)for(var prop in source)obj[prop]=source[prop]}return obj},nextUid:function(){return"ion"+nextId++},disconnectScope:function(scope){if(scope&&scope.$root!==scope){var parent=scope.$parent;scope.$$disconnected=!0,scope.$broadcast("$ionic.disconnectScope",scope),parent.$$childHead===scope&&(parent.$$childHead=scope.$$nextSibling),parent.$$childTail===scope&&(parent.$$childTail=scope.$$prevSibling),scope.$$prevSibling&&(scope.$$prevSibling.$$nextSibling=scope.$$nextSibling),scope.$$nextSibling&&(scope.$$nextSibling.$$prevSibling=scope.$$prevSibling),scope.$$nextSibling=scope.$$prevSibling=null}},reconnectScope:function(scope){if(scope&&scope.$root!==scope&&scope.$$disconnected){var parent=scope.$parent;scope.$$disconnected=!1,scope.$broadcast("$ionic.reconnectScope",scope),scope.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=scope,parent.$$childTail=scope):parent.$$childHead=parent.$$childTail=scope}},isScopeDisconnected:function(scope){for(var climbScope=scope;climbScope;){if(climbScope.$$disconnected)return!0;climbScope=climbScope.$parent}return!1}},ionic.inherit=ionic.Utils.inherit,ionic.extend=ionic.Utils.extend,ionic.throttle=ionic.Utils.throttle,ionic.proxy=ionic.Utils.proxy,ionic.debounce=ionic.Utils.debounce}(window.ionic);var keyboardActiveElement,scrollView,waitForResizeTimer,keyboardFocusOutTimer,keyboardCurrentViewportHeight=0,keyboardPortraitViewportHeight=0,keyboardLandscapeViewportHeight=0,wasOrientationChange=!1,KEYBOARD_OPEN_CSS="keyboard-open",SCROLL_CONTAINER_CSS="scroll-content",debouncedKeyboardFocusIn=ionic.debounce(keyboardFocusIn,200,!0),debouncedKeyboardNativeShow=ionic.debounce(keyboardNativeShow,100,!0);ionic.keyboard={isOpen:!1,isClosing:!1,isOpening:!1,height:0,isLandscape:!1,isInitialized:!1,hide:function(){keyboardHasPlugin()&&cordova.plugins.Keyboard.close(),keyboardActiveElement&&keyboardActiveElement.blur()},show:function(){keyboardHasPlugin()&&cordova.plugins.Keyboard.show()},disable:function(){keyboardHasPlugin()?(window.removeEventListener("native.keyboardshow",debouncedKeyboardNativeShow),window.removeEventListener("native.keyboardhide",keyboardFocusOut)):document.body.removeEventListener("focusout",keyboardFocusOut),document.body.removeEventListener("ionic.focusin",debouncedKeyboardFocusIn),document.body.removeEventListener("focusin",debouncedKeyboardFocusIn),window.removeEventListener("orientationchange",keyboardOrientationChange),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerDown",keyboardInit):document.removeEventListener("touchstart",keyboardInit),ionic.keyboard.isInitialized=!1},enable:function(){keyboardInit()}},keyboardCurrentViewportHeight=getViewportHeight(),ionic.Platform.ready(function(){keyboardInitViewportHeight(),window.addEventListener("orientationchange",keyboardOrientationChange),setTimeout(keyboardInitViewportHeight,999),window.navigator.msPointerEnabled?document.addEventListener("MSPointerDown",keyboardInit,!1):document.addEventListener("touchstart",keyboardInit,!1)});var viewportTag,viewportProperties={};ionic.viewport={orientation:function(){return window.innerWidth>window.innerHeight?90:0}},ionic.Platform.ready(function(){viewportLoadTag(),window.addEventListener("orientationchange",function(){setTimeout(viewportUpdate,1e3)},!1)}),function(ionic){"use strict";ionic.views.View=function(){this.initialize.apply(this,arguments)},ionic.views.View.inherit=ionic.inherit,ionic.extend(ionic.views.View.prototype,{initialize:function(){}})}(window.ionic);var zyngaCore={effect:{}};!function(global){var time=Date.now||function(){return+new Date},desiredFrames=60,millisecondsPerSecond=1e3,running={},counter=1;zyngaCore.effect.Animate={requestAnimationFrame:function(){var requestFrame=global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||global.oRequestAnimationFrame,isNative=!!requestFrame;if(requestFrame&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(requestFrame.toString())&&(isNative=!1),isNative)return function(callback,root){requestFrame(callback,root)};var TARGET_FPS=60,requests={},requestCount=0,rafHandle=1,intervalHandle=null,lastActive=+new Date;return function(callback){var callbackHandle=rafHandle++;return requests[callbackHandle]=callback,requestCount++,null===intervalHandle&&(intervalHandle=setInterval(function(){var time=+new Date,currentRequests=requests;requests={},requestCount=0;for(var key in currentRequests)currentRequests.hasOwnProperty(key)&&(currentRequests[key](time),lastActive=time);time-lastActive>2500&&(clearInterval(intervalHandle),intervalHandle=null)},1e3/TARGET_FPS)),callbackHandle}}(),stop:function(id){var cleared=null!=running[id];return cleared&&(running[id]=null),cleared},isRunning:function(id){return null!=running[id]},start:function(stepCallback,verifyCallback,completedCallback,duration,easingMethod,root){var start=time(),lastFrame=start,percent=0,dropCounter=0,id=counter++;if(root||(root=document.body),id%20===0){var newRunning={};for(var usedId in running)newRunning[usedId]=!0;running=newRunning}var step=function(virtual){var render=virtual!==!0,now=time();if(!running[id]||verifyCallback&&!verifyCallback(id))return running[id]=null,void(completedCallback&&completedCallback(desiredFrames-dropCounter/((now-start)/millisecondsPerSecond),id,!1));if(render)for(var droppedFrames=Math.round((now-lastFrame)/(millisecondsPerSecond/desiredFrames))-1,j=0;j<Math.min(droppedFrames,4);j++)step(!0),dropCounter++;duration&&(percent=(now-start)/duration,percent>1&&(percent=1));var value=easingMethod?easingMethod(percent):percent;stepCallback(value,now,render)!==!1&&1!==percent||!render?render&&(lastFrame=now,zyngaCore.effect.Animate.requestAnimationFrame(step,root)):(running[id]=null,completedCallback&&completedCallback(desiredFrames-dropCounter/((now-start)/millisecondsPerSecond),id,1===percent||null==duration))};return running[id]=!0,zyngaCore.effect.Animate.requestAnimationFrame(step,root),id}}}(this),function(ionic){var NOOP=function(){},easeOutCubic=function(pos){return Math.pow(pos-1,3)+1},easeInOutCubic=function(pos){return(pos/=.5)<1?.5*Math.pow(pos,3):.5*(Math.pow(pos-2,3)+2)},isWindowsMozilla=function(){return navigator&&-1!=navigator.appVersion.indexOf("Win")&&-1!=navigator.userAgent.indexOf("Firefox")};ionic.views.Scroll=ionic.views.View.inherit({initialize:function(options){var self=this;self.__container=options.el,self.__content=options.el.firstElementChild,setTimeout(function(){self.__container&&self.__content&&(self.__container.scrollTop=0,self.__content.scrollTop=0)}),self.options={scrollingX:!1,scrollbarX:!0,scrollingY:!0,scrollbarY:!0,startX:0,startY:0,wheelDampen:isWindowsMozilla()?.04:6,minScrollbarSizeX:5,minScrollbarSizeY:5,scrollbarsFade:!0,scrollbarFadeDelay:300,scrollbarResizeFadeDelay:1e3,animating:!0,animationDuration:250,decelVelocityThreshold:4,decelVelocityThresholdPaging:4,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,deceleration:.97,preventDefault:!1,scrollingComplete:NOOP,penetrationDeceleration:.03,penetrationAcceleration:.08,scrollEventInterval:10,freeze:!1,getContentWidth:function(){return Math.max(self.__content.scrollWidth,self.__content.offsetWidth)},getContentHeight:function(){return Math.max(self.__content.scrollHeight,self.__content.offsetHeight+2*self.__content.offsetTop)}};for(var key in options)self.options[key]=options[key];self.hintResize=ionic.debounce(function(){self.resize()},1e3,!0),self.onScroll=function(){ionic.scroll.isScrolling?(clearTimeout(self.scrollTimer),self.scrollTimer=setTimeout(self.setScrollStop,80)):setTimeout(self.setScrollStart,50)},self.freeze=function(shouldFreeze){return arguments.length&&(self.options.freeze=shouldFreeze),self.options.freeze},self.setScrollStart=function(){ionic.scroll.isScrolling=Math.abs(ionic.scroll.lastTop-self.__scrollTop)>1,clearTimeout(self.scrollTimer),self.scrollTimer=setTimeout(self.setScrollStop,80)},self.setScrollStop=function(){ionic.scroll.isScrolling=!1,ionic.scroll.lastTop=self.__scrollTop},self.triggerScrollEvent=ionic.throttle(function(){self.onScroll(),ionic.trigger("scroll",{scrollTop:self.__scrollTop,scrollLeft:self.__scrollLeft,target:self.__container})},self.options.scrollEventInterval),self.triggerScrollEndEvent=function(){ionic.trigger("scrollend",{scrollTop:self.__scrollTop,scrollLeft:self.__scrollLeft,target:self.__container})},self.__scrollLeft=self.options.startX,self.__scrollTop=self.options.startY,self.__callback=self.getRenderFn(),self.__initEventHandlers(),self.__createScrollbars()},run:function(){this.resize(),this.__fadeScrollbars("out",this.options.scrollbarResizeFadeDelay)},__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,__transformProperty:null,__perspectiveProperty:null,__indicatorX:null,__indicatorY:null,__scrollbarFadeTimeout:null,__didWaitForSize:null,__sizerTimeout:null,__initEventHandlers:function(){function getEventTouches(e){return e.touches&&e.touches.length?e.touches:[{pageX:e.pageX,pageY:e.pageY}]}var scrollViewOffsetHeight,self=this,container=self.__container;if(self.scrollChildIntoView=function(e){var scrollBottomOffsetToTop=container.getBoundingClientRect().bottom;scrollViewOffsetHeight=container.offsetHeight;var alreadyShrunk=self.isShrunkForKeyboard,isModal=container.parentNode.classList.contains("modal"),isInsetModal=isModal&&window.innerWidth>=680;if(!alreadyShrunk){if(ionic.Platform.isIOS()||ionic.Platform.isFullScreen||isInsetModal){var scrollBottomOffsetToBottom=e.detail.viewportHeight-scrollBottomOffsetToTop,keyboardOffset=Math.max(0,e.detail.keyboardHeight-scrollBottomOffsetToBottom);ionic.requestAnimationFrame(function(){scrollViewOffsetHeight-=keyboardOffset,container.style.height=scrollViewOffsetHeight+"px",container.style.overflow="visible",self.resize()})}self.isShrunkForKeyboard=!0}e.detail.isElementUnderKeyboard&&ionic.requestAnimationFrame(function(){container.scrollTop=0,self.isShrunkForKeyboard&&!alreadyShrunk&&(scrollBottomOffsetToTop=container.getBoundingClientRect().bottom);var scrollMidpointOffset=.5*scrollViewOffsetHeight,inputMidpoint=(e.detail.elementBottom+e.detail.elementTop)/2,inputMidpointOffsetToScrollBottom=inputMidpoint-scrollBottomOffsetToTop,scrollTop=inputMidpointOffsetToScrollBottom+scrollMidpointOffset;scrollTop>0&&(ionic.Platform.isIOS()&&ionic.tap.cloneFocusedInput(container,self),self.scrollBy(0,scrollTop,!0),self.onScroll())}),e.stopPropagation()},self.resetScrollView=function(){self.isShrunkForKeyboard&&(self.isShrunkForKeyboard=!1,container.style.height="",container.style.overflow=""),self.resize()},container.addEventListener("scrollChildIntoView",self.scrollChildIntoView),document.addEventListener("resetScrollView",self.resetScrollView),self.touchStart=function(e){if(self.startCoordinates=ionic.tap.pointerCoord(e),!ionic.tap.ignoreScrollStart(e)){if(self.__isDown=!0,ionic.tap.containsOrIsTextInput(e.target)||"SELECT"===e.target.tagName)return void(self.__hasStarted=!1);self.__isSelectable=!0,self.__enableScrollY=!0,self.__hasStarted=!0,self.doTouchStart(getEventTouches(e),e.timeStamp),e.preventDefault()}},self.touchMove=function(e){if(!(self.options.freeze||!self.__isDown||!self.__isDown&&e.defaultPrevented||"TEXTAREA"===e.target.tagName&&e.target.parentElement.querySelector(":focus"))){if(!self.__hasStarted&&(ionic.tap.containsOrIsTextInput(e.target)||"SELECT"===e.target.tagName))return self.__hasStarted=!0,self.doTouchStart(getEventTouches(e),e.timeStamp),void e.preventDefault();if(self.startCoordinates){var currentCoordinates=ionic.tap.pointerCoord(e);self.__isSelectable&&ionic.tap.isTextInput(e.target)&&Math.abs(self.startCoordinates.x-currentCoordinates.x)>20&&(self.__enableScrollY=!1,self.__isSelectable=!0),self.__enableScrollY&&Math.abs(self.startCoordinates.y-currentCoordinates.y)>10&&(self.__isSelectable=!1,ionic.tap.cloneFocusedInput(container,self))}self.doTouchMove(getEventTouches(e),e.timeStamp,e.scale),self.__isDown=!0}},self.touchMoveBubble=function(e){self.__isDown&&self.options.preventDefault&&e.preventDefault()},self.touchEnd=function(e){self.__isDown&&(self.doTouchEnd(e,e.timeStamp),self.__isDown=!1,self.__hasStarted=!1,self.__isSelectable=!0,self.__enableScrollY=!0,self.__isDragging||self.__isDecelerating||self.__isAnimating||ionic.tap.removeClonedInputs(container,self))},self.mouseWheel=ionic.animationFrameThrottle(function(e){var scrollParent=ionic.DomUtil.getParentOrSelfWithClass(e.target,"ionic-scroll");self.options.freeze||scrollParent!==self.__container||(self.hintResize(),self.scrollBy((e.wheelDeltaX||e.deltaX||0)/self.options.wheelDampen,(-e.wheelDeltaY||e.deltaY||0)/self.options.wheelDampen),self.__fadeScrollbars("in"),clearTimeout(self.__wheelHideBarTimeout),self.__wheelHideBarTimeout=setTimeout(function(){self.__fadeScrollbars("out")},100))}),"ontouchstart"in window)container.addEventListener("touchstart",self.touchStart,!1),self.options.preventDefault&&container.addEventListener("touchmove",self.touchMoveBubble,!1),document.addEventListener("touchmove",self.touchMove,!1),document.addEventListener("touchend",self.touchEnd,!1),document.addEventListener("touchcancel",self.touchEnd,!1);else if(window.navigator.pointerEnabled)container.addEventListener("pointerdown",self.touchStart,!1),self.options.preventDefault&&container.addEventListener("pointermove",self.touchMoveBubble,!1),document.addEventListener("pointermove",self.touchMove,!1),document.addEventListener("pointerup",self.touchEnd,!1),document.addEventListener("pointercancel",self.touchEnd,!1),document.addEventListener("wheel",self.mouseWheel,!1);else if(window.navigator.msPointerEnabled)container.addEventListener("MSPointerDown",self.touchStart,!1),self.options.preventDefault&&container.addEventListener("MSPointerMove",self.touchMoveBubble,!1),document.addEventListener("MSPointerMove",self.touchMove,!1),document.addEventListener("MSPointerUp",self.touchEnd,!1),document.addEventListener("MSPointerCancel",self.touchEnd,!1),document.addEventListener("wheel",self.mouseWheel,!1);else{var mousedown=!1;self.mouseDown=function(e){ionic.tap.ignoreScrollStart(e)||"SELECT"===e.target.tagName||(self.doTouchStart(getEventTouches(e),e.timeStamp),ionic.tap.isTextInput(e.target)||e.preventDefault(),mousedown=!0)},self.mouseMove=function(e){self.options.freeze||!mousedown||!mousedown&&e.defaultPrevented||(self.doTouchMove(getEventTouches(e),e.timeStamp),mousedown=!0)},self.mouseMoveBubble=function(e){mousedown&&self.options.preventDefault&&e.preventDefault()},self.mouseUp=function(e){mousedown&&(self.doTouchEnd(e,e.timeStamp),mousedown=!1)},container.addEventListener("mousedown",self.mouseDown,!1),self.options.preventDefault&&container.addEventListener("mousemove",self.mouseMoveBubble,!1),document.addEventListener("mousemove",self.mouseMove,!1),document.addEventListener("mouseup",self.mouseUp,!1),document.addEventListener("mousewheel",self.mouseWheel,!1),document.addEventListener("wheel",self.mouseWheel,!1)}},__cleanup:function(){var self=this,container=self.__container;container.removeEventListener("touchstart",self.touchStart),container.removeEventListener("touchmove",self.touchMoveBubble),document.removeEventListener("touchmove",self.touchMove),document.removeEventListener("touchend",self.touchEnd),document.removeEventListener("touchcancel",self.touchEnd),container.removeEventListener("pointerdown",self.touchStart),container.removeEventListener("pointermove",self.touchMoveBubble),document.removeEventListener("pointermove",self.touchMove),document.removeEventListener("pointerup",self.touchEnd),document.removeEventListener("pointercancel",self.touchEnd),container.removeEventListener("MSPointerDown",self.touchStart),container.removeEventListener("MSPointerMove",self.touchMoveBubble),document.removeEventListener("MSPointerMove",self.touchMove),document.removeEventListener("MSPointerUp",self.touchEnd),document.removeEventListener("MSPointerCancel",self.touchEnd),container.removeEventListener("mousedown",self.mouseDown),container.removeEventListener("mousemove",self.mouseMoveBubble),document.removeEventListener("mousemove",self.mouseMove),document.removeEventListener("mouseup",self.mouseUp),document.removeEventListener("mousewheel",self.mouseWheel),document.removeEventListener("wheel",self.mouseWheel),container.removeEventListener("scrollChildIntoView",self.scrollChildIntoView),document.removeEventListener("resetScrollView",self.resetScrollView),ionic.tap.removeClonedInputs(container,self),delete self.__container,delete self.__content,delete self.__indicatorX,delete self.__indicatorY,delete self.options.el,self.__callback=self.scrollChildIntoView=self.resetScrollView=NOOP,self.mouseMove=self.mouseDown=self.mouseUp=self.mouseWheel=self.touchStart=self.touchMove=self.touchEnd=self.touchCancel=NOOP,self.resize=self.scrollTo=self.zoomTo=self.__scrollingComplete=NOOP,container=null},__createScrollbar:function(direction){var bar=document.createElement("div"),indicator=document.createElement("div");return indicator.className="scroll-bar-indicator scroll-bar-fade-out","h"==direction?bar.className="scroll-bar scroll-bar-h":bar.className="scroll-bar scroll-bar-v",bar.appendChild(indicator),bar},__createScrollbars:function(){var indicatorX,indicatorY,self=this;self.options.scrollingX&&(indicatorX={el:self.__createScrollbar("h"),sizeRatio:1},indicatorX.indicator=indicatorX.el.children[0],self.options.scrollbarX&&self.__container.appendChild(indicatorX.el),
self.__indicatorX=indicatorX),self.options.scrollingY&&(indicatorY={el:self.__createScrollbar("v"),sizeRatio:1},indicatorY.indicator=indicatorY.el.children[0],self.options.scrollbarY&&self.__container.appendChild(indicatorY.el),self.__indicatorY=indicatorY)},__resizeScrollbars:function(){var self=this;if(self.__indicatorX){var width=Math.max(Math.round(self.__clientWidth*self.__clientWidth/self.__contentWidth),20);width>self.__contentWidth&&(width=0),width!==self.__indicatorX.size&&ionic.requestAnimationFrame(function(){self.__indicatorX.indicator.style.width=width+"px"}),self.__indicatorX.size=width,self.__indicatorX.minScale=self.options.minScrollbarSizeX/width,self.__indicatorX.maxPos=self.__clientWidth-width,self.__indicatorX.sizeRatio=self.__maxScrollLeft?self.__indicatorX.maxPos/self.__maxScrollLeft:1}if(self.__indicatorY){var height=Math.max(Math.round(self.__clientHeight*self.__clientHeight/self.__contentHeight),20);height>self.__contentHeight&&(height=0),height!==self.__indicatorY.size&&ionic.requestAnimationFrame(function(){self.__indicatorY&&(self.__indicatorY.indicator.style.height=height+"px")}),self.__indicatorY.size=height,self.__indicatorY.minScale=self.options.minScrollbarSizeY/height,self.__indicatorY.maxPos=self.__clientHeight-height,self.__indicatorY.sizeRatio=self.__maxScrollTop?self.__indicatorY.maxPos/self.__maxScrollTop:1}},__repositionScrollbars:function(){var heightScale,widthScale,widthDiff,heightDiff,x,y,self=this,xstop=0,ystop=0;if(self.__indicatorX){self.__indicatorY&&(xstop=10),x=Math.round(self.__indicatorX.sizeRatio*self.__scrollLeft)||0,widthDiff=self.__scrollLeft-(self.__maxScrollLeft-xstop),self.__scrollLeft<0?(widthScale=Math.max(self.__indicatorX.minScale,(self.__indicatorX.size-Math.abs(self.__scrollLeft))/self.__indicatorX.size),x=0,self.__indicatorX.indicator.style[self.__transformOriginProperty]="left center"):widthDiff>0?(widthScale=Math.max(self.__indicatorX.minScale,(self.__indicatorX.size-widthDiff)/self.__indicatorX.size),x=self.__indicatorX.maxPos-xstop,self.__indicatorX.indicator.style[self.__transformOriginProperty]="right center"):(x=Math.min(self.__maxScrollLeft,Math.max(0,x)),widthScale=1);var translate3dX="translate3d("+x+"px, 0, 0) scaleX("+widthScale+")";self.__indicatorX.transformProp!==translate3dX&&(self.__indicatorX.indicator.style[self.__transformProperty]=translate3dX,self.__indicatorX.transformProp=translate3dX)}if(self.__indicatorY){y=Math.round(self.__indicatorY.sizeRatio*self.__scrollTop)||0,self.__indicatorX&&(ystop=10),heightDiff=self.__scrollTop-(self.__maxScrollTop-ystop),self.__scrollTop<0?(heightScale=Math.max(self.__indicatorY.minScale,(self.__indicatorY.size-Math.abs(self.__scrollTop))/self.__indicatorY.size),y=0,"center top"!==self.__indicatorY.originProp&&(self.__indicatorY.indicator.style[self.__transformOriginProperty]="center top",self.__indicatorY.originProp="center top")):heightDiff>0?(heightScale=Math.max(self.__indicatorY.minScale,(self.__indicatorY.size-heightDiff)/self.__indicatorY.size),y=self.__indicatorY.maxPos-ystop,"center bottom"!==self.__indicatorY.originProp&&(self.__indicatorY.indicator.style[self.__transformOriginProperty]="center bottom",self.__indicatorY.originProp="center bottom")):(y=Math.min(self.__maxScrollTop,Math.max(0,y)),heightScale=1);var translate3dY="translate3d(0,"+y+"px, 0) scaleY("+heightScale+")";self.__indicatorY.transformProp!==translate3dY&&(self.__indicatorY.indicator.style[self.__transformProperty]=translate3dY,self.__indicatorY.transformProp=translate3dY)}},__fadeScrollbars:function(direction,delay){var self=this;if(self.options.scrollbarsFade){var className="scroll-bar-fade-out";self.options.scrollbarsFade===!0&&(clearTimeout(self.__scrollbarFadeTimeout),"in"==direction?(self.__indicatorX&&self.__indicatorX.indicator.classList.remove(className),self.__indicatorY&&self.__indicatorY.indicator.classList.remove(className)):self.__scrollbarFadeTimeout=setTimeout(function(){self.__indicatorX&&self.__indicatorX.indicator.classList.add(className),self.__indicatorY&&self.__indicatorY.indicator.classList.add(className)},delay||self.options.scrollbarFadeDelay))}},__scrollingComplete:function(){this.options.scrollingComplete(),ionic.tap.removeClonedInputs(this.__container,this),this.__fadeScrollbars("out")},resize:function(continueScrolling){var self=this;self.__container&&self.options&&self.setDimensions(self.__container.clientWidth,self.__container.clientHeight,self.options.getContentWidth(),self.options.getContentHeight(),continueScrolling)},getRenderFn:function(){var engine,self=this,content=self.__content,docStyle=document.documentElement.style;"MozAppearance"in docStyle?engine="gecko":"WebkitAppearance"in docStyle?engine="webkit":"string"==typeof navigator.cpuClass&&(engine="trident");var undef,vendorPrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[engine],helperElem=document.createElement("div"),perspectiveProperty=vendorPrefix+"Perspective",transformProperty=vendorPrefix+"Transform",transformOriginProperty=vendorPrefix+"TransformOrigin";return self.__perspectiveProperty=transformProperty,self.__transformProperty=transformProperty,self.__transformOriginProperty=transformOriginProperty,helperElem.style[perspectiveProperty]!==undef?function(left,top,zoom,wasResize){var translate3d="translate3d("+-left+"px,"+-top+"px,0) scale("+zoom+")";translate3d!==self.contentTransform&&(content.style[transformProperty]=translate3d,self.contentTransform=translate3d),self.__repositionScrollbars(),wasResize||self.triggerScrollEvent()}:helperElem.style[transformProperty]!==undef?function(left,top,zoom,wasResize){content.style[transformProperty]="translate("+-left+"px,"+-top+"px) scale("+zoom+")",self.__repositionScrollbars(),wasResize||self.triggerScrollEvent()}:function(left,top,zoom,wasResize){content.style.marginLeft=left?-left/zoom+"px":"",content.style.marginTop=top?-top/zoom+"px":"",content.style.zoom=zoom||"",self.__repositionScrollbars(),wasResize||self.triggerScrollEvent()}},setDimensions:function(clientWidth,clientHeight,contentWidth,contentHeight,continueScrolling){var self=this;(clientWidth||clientHeight||contentWidth||contentHeight)&&(clientWidth===+clientWidth&&(self.__clientWidth=clientWidth),clientHeight===+clientHeight&&(self.__clientHeight=clientHeight),contentWidth===+contentWidth&&(self.__contentWidth=contentWidth),contentHeight===+contentHeight&&(self.__contentHeight=contentHeight),self.__computeScrollMax(),self.__resizeScrollbars(),continueScrolling||self.scrollTo(self.__scrollLeft,self.__scrollTop,!0,null,!0))},setPosition:function(left,top){this.__clientLeft=left||0,this.__clientTop=top||0},setSnapSize:function(width,height){this.__snapWidth=width,this.__snapHeight=height},activatePullToRefresh:function(height,refresherMethods){var self=this;self.__refreshHeight=height,self.__refreshActivate=function(){ionic.requestAnimationFrame(refresherMethods.activate)},self.__refreshDeactivate=function(){ionic.requestAnimationFrame(refresherMethods.deactivate)},self.__refreshStart=function(){ionic.requestAnimationFrame(refresherMethods.start)},self.__refreshShow=function(){ionic.requestAnimationFrame(refresherMethods.show)},self.__refreshHide=function(){ionic.requestAnimationFrame(refresherMethods.hide)},self.__refreshTail=function(){ionic.requestAnimationFrame(refresherMethods.tail)},self.__refreshTailTime=100,self.__minSpinTime=600},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0);var d=new Date;this.refreshStartTime=d.getTime(),this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){var self=this,d=new Date,delay=0;self.refreshStartTime+self.__minSpinTime>d.getTime()&&(delay=self.refreshStartTime+self.__minSpinTime-d.getTime()),setTimeout(function(){self.__refreshTail&&self.__refreshTail(),setTimeout(function(){self.__refreshActive=!1,self.__refreshDeactivate&&self.__refreshDeactivate(),self.__refreshHide&&self.__refreshHide(),self.scrollTo(self.__scrollLeft,self.__scrollTop,!0)},self.__refreshTailTime)},delay)},getValues:function(){return{left:this.__scrollLeft,top:this.__scrollTop,zoom:this.__zoomLevel}},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo:function(level,animate,originLeft,originTop){var self=this;if(!self.options.zooming)throw new Error("Zooming is not enabled!");self.__isDecelerating&&(zyngaCore.effect.Animate.stop(self.__isDecelerating),self.__isDecelerating=!1);var oldLevel=self.__zoomLevel;null==originLeft&&(originLeft=self.__clientWidth/2),null==originTop&&(originTop=self.__clientHeight/2),level=Math.max(Math.min(level,self.options.maxZoom),self.options.minZoom),self.__computeScrollMax(level);var left=(originLeft+self.__scrollLeft)*level/oldLevel-originLeft,top=(originTop+self.__scrollTop)*level/oldLevel-originTop;left>self.__maxScrollLeft?left=self.__maxScrollLeft:0>left&&(left=0),top>self.__maxScrollTop?top=self.__maxScrollTop:0>top&&(top=0),self.__publish(left,top,level,animate)},zoomBy:function(factor,animate,originLeft,originTop){this.zoomTo(this.__zoomLevel*factor,animate,originLeft,originTop)},scrollTo:function(left,top,animate,zoom,wasResize){var self=this;if(self.__isDecelerating&&(zyngaCore.effect.Animate.stop(self.__isDecelerating),self.__isDecelerating=!1),null!=zoom&&zoom!==self.__zoomLevel){if(!self.options.zooming)throw new Error("Zooming is not enabled!");left*=zoom,top*=zoom,self.__computeScrollMax(zoom)}else zoom=self.__zoomLevel;self.options.scrollingX?self.options.paging?left=Math.round(left/self.__clientWidth)*self.__clientWidth:self.options.snapping&&(left=Math.round(left/self.__snapWidth)*self.__snapWidth):left=self.__scrollLeft,self.options.scrollingY?self.options.paging?top=Math.round(top/self.__clientHeight)*self.__clientHeight:self.options.snapping&&(top=Math.round(top/self.__snapHeight)*self.__snapHeight):top=self.__scrollTop,left=Math.max(Math.min(self.__maxScrollLeft,left),0),top=Math.max(Math.min(self.__maxScrollTop,top),0),left===self.__scrollLeft&&top===self.__scrollTop&&(animate=!1),self.__publish(left,top,zoom,animate,wasResize)},scrollBy:function(left,top,animate){var self=this,startLeft=self.__isAnimating?self.__scheduledLeft:self.__scrollLeft,startTop=self.__isAnimating?self.__scheduledTop:self.__scrollTop;self.scrollTo(startLeft+(left||0),startTop+(top||0),animate)},doMouseZoom:function(wheelDelta,timeStamp,pageX,pageY){var change=wheelDelta>0?.97:1.03;return this.zoomTo(this.__zoomLevel*change,!1,pageX-this.__clientLeft,pageY-this.__clientTop)},doTouchStart:function(touches,timeStamp){var self=this;self.__decStopped=!(!self.__isDecelerating&&!self.__isAnimating),self.hintResize(),timeStamp instanceof Date&&(timeStamp=timeStamp.valueOf()),"number"!=typeof timeStamp&&(timeStamp=Date.now()),self.__interruptedAnimation=!0,self.__isDecelerating&&(zyngaCore.effect.Animate.stop(self.__isDecelerating),self.__isDecelerating=!1,self.__interruptedAnimation=!0),self.__isAnimating&&(zyngaCore.effect.Animate.stop(self.__isAnimating),self.__isAnimating=!1,self.__interruptedAnimation=!0);var currentTouchLeft,currentTouchTop,isSingleTouch=1===touches.length;isSingleTouch?(currentTouchLeft=touches[0].pageX,currentTouchTop=touches[0].pageY):(currentTouchLeft=Math.abs(touches[0].pageX+touches[1].pageX)/2,currentTouchTop=Math.abs(touches[0].pageY+touches[1].pageY)/2),self.__initialTouchLeft=currentTouchLeft,self.__initialTouchTop=currentTouchTop,self.__initialTouches=touches,self.__zoomLevelStart=self.__zoomLevel,self.__lastTouchLeft=currentTouchLeft,self.__lastTouchTop=currentTouchTop,self.__lastTouchMove=timeStamp,self.__lastScale=1,self.__enableScrollX=!isSingleTouch&&self.options.scrollingX,self.__enableScrollY=!isSingleTouch&&self.options.scrollingY,self.__isTracking=!0,self.__didDecelerationComplete=!1,self.__isDragging=!isSingleTouch,self.__isSingleTouch=isSingleTouch,self.__positions=[]},doTouchMove:function(touches,timeStamp,scale){timeStamp instanceof Date&&(timeStamp=timeStamp.valueOf()),"number"!=typeof timeStamp&&(timeStamp=Date.now());var self=this;if(self.__isTracking){var currentTouchLeft,currentTouchTop;2===touches.length?(currentTouchLeft=Math.abs(touches[0].pageX+touches[1].pageX)/2,currentTouchTop=Math.abs(touches[0].pageY+touches[1].pageY)/2,!scale&&self.options.zooming&&(scale=self.__getScale(self.__initialTouches,touches))):(currentTouchLeft=touches[0].pageX,currentTouchTop=touches[0].pageY);var positions=self.__positions;if(self.__isDragging){self.__decStopped=!1;var moveX=currentTouchLeft-self.__lastTouchLeft,moveY=currentTouchTop-self.__lastTouchTop,scrollLeft=self.__scrollLeft,scrollTop=self.__scrollTop,level=self.__zoomLevel;if(null!=scale&&self.options.zooming){var oldLevel=level;if(level=level/self.__lastScale*scale,level=Math.max(Math.min(level,self.options.maxZoom),self.options.minZoom),oldLevel!==level){var currentTouchLeftRel=currentTouchLeft-self.__clientLeft,currentTouchTopRel=currentTouchTop-self.__clientTop;scrollLeft=(currentTouchLeftRel+scrollLeft)*level/oldLevel-currentTouchLeftRel,scrollTop=(currentTouchTopRel+scrollTop)*level/oldLevel-currentTouchTopRel,self.__computeScrollMax(level)}}if(self.__enableScrollX){scrollLeft-=moveX*self.options.speedMultiplier;var maxScrollLeft=self.__maxScrollLeft;(scrollLeft>maxScrollLeft||0>scrollLeft)&&(self.options.bouncing?scrollLeft+=moveX/2*self.options.speedMultiplier:scrollLeft=scrollLeft>maxScrollLeft?maxScrollLeft:0)}if(self.__enableScrollY){scrollTop-=moveY*self.options.speedMultiplier;var maxScrollTop=self.__maxScrollTop;scrollTop>maxScrollTop||0>scrollTop?self.options.bouncing||self.__refreshHeight&&0>scrollTop?(scrollTop+=moveY/2*self.options.speedMultiplier,self.__enableScrollX||null==self.__refreshHeight||(0>scrollTop?(self.__refreshHidden=!1,self.__refreshShow()):(self.__refreshHide(),self.__refreshHidden=!0),!self.__refreshActive&&scrollTop<=-self.__refreshHeight?(self.__refreshActive=!0,self.__refreshActivate&&self.__refreshActivate()):self.__refreshActive&&scrollTop>-self.__refreshHeight&&(self.__refreshActive=!1,self.__refreshDeactivate&&self.__refreshDeactivate()))):scrollTop=scrollTop>maxScrollTop?maxScrollTop:0:self.__refreshHeight&&!self.__refreshHidden&&(self.__refreshHide(),self.__refreshHidden=!0)}positions.length>60&&positions.splice(0,30),positions.push(scrollLeft,scrollTop,timeStamp),self.__publish(scrollLeft,scrollTop,level)}else{var minimumTrackingForScroll=self.options.locking?3:0,minimumTrackingForDrag=5,distanceX=Math.abs(currentTouchLeft-self.__initialTouchLeft),distanceY=Math.abs(currentTouchTop-self.__initialTouchTop);self.__enableScrollX=self.options.scrollingX&&distanceX>=minimumTrackingForScroll,self.__enableScrollY=self.options.scrollingY&&distanceY>=minimumTrackingForScroll,positions.push(self.__scrollLeft,self.__scrollTop,timeStamp),self.__isDragging=(self.__enableScrollX||self.__enableScrollY)&&(distanceX>=minimumTrackingForDrag||distanceY>=minimumTrackingForDrag),self.__isDragging&&(self.__interruptedAnimation=!1,self.__fadeScrollbars("in"))}self.__lastTouchLeft=currentTouchLeft,self.__lastTouchTop=currentTouchTop,self.__lastTouchMove=timeStamp,self.__lastScale=scale}},doTouchEnd:function(e,timeStamp){timeStamp instanceof Date&&(timeStamp=timeStamp.valueOf()),"number"!=typeof timeStamp&&(timeStamp=Date.now());var self=this;if(self.__isTracking){if(self.__isTracking=!1,self.__isDragging)if(self.__isDragging=!1,self.__isSingleTouch&&self.options.animating&&timeStamp-self.__lastTouchMove<=100){for(var positions=self.__positions,endPos=positions.length-1,startPos=endPos,i=endPos;i>0&&positions[i]>self.__lastTouchMove-100;i-=3)startPos=i;if(startPos!==endPos){var timeOffset=positions[endPos]-positions[startPos],movedLeft=self.__scrollLeft-positions[startPos-2],movedTop=self.__scrollTop-positions[startPos-1];self.__decelerationVelocityX=movedLeft/timeOffset*(1e3/60),self.__decelerationVelocityY=movedTop/timeOffset*(1e3/60);var minVelocityToStartDeceleration=self.options.paging||self.options.snapping?self.options.decelVelocityThresholdPaging:self.options.decelVelocityThreshold;(Math.abs(self.__decelerationVelocityX)>minVelocityToStartDeceleration||Math.abs(self.__decelerationVelocityY)>minVelocityToStartDeceleration)&&(self.__refreshActive||self.__startDeceleration(timeStamp))}else self.__scrollingComplete()}else timeStamp-self.__lastTouchMove>100&&self.__scrollingComplete();else self.__decStopped&&(e.isTapHandled=!0,self.__decStopped=!1);if(!self.__isDecelerating)if(self.__refreshActive&&self.__refreshStart){self.__publish(self.__scrollLeft,-self.__refreshHeight,self.__zoomLevel,!0);var d=new Date;self.refreshStartTime=d.getTime(),self.__refreshStart&&self.__refreshStart(),ionic.Platform.isAndroid()||self.__startDeceleration()}else(self.__interruptedAnimation||self.__isDragging)&&self.__scrollingComplete(),self.scrollTo(self.__scrollLeft,self.__scrollTop,!0,self.__zoomLevel),self.__refreshActive&&(self.__refreshActive=!1,self.__refreshDeactivate&&self.__refreshDeactivate());self.__positions.length=0}},__publish:function(left,top,zoom,animate,wasResize){var self=this,wasAnimating=self.__isAnimating;if(wasAnimating&&(zyngaCore.effect.Animate.stop(wasAnimating),self.__isAnimating=!1),animate&&self.options.animating){self.__scheduledLeft=left,self.__scheduledTop=top,self.__scheduledZoom=zoom;var oldLeft=self.__scrollLeft,oldTop=self.__scrollTop,oldZoom=self.__zoomLevel,diffLeft=left-oldLeft,diffTop=top-oldTop,diffZoom=zoom-oldZoom,step=function(percent,now,render){render&&(self.__scrollLeft=oldLeft+diffLeft*percent,self.__scrollTop=oldTop+diffTop*percent,self.__zoomLevel=oldZoom+diffZoom*percent,self.__callback&&self.__callback(self.__scrollLeft,self.__scrollTop,self.__zoomLevel,wasResize))},verify=function(id){return self.__isAnimating===id},completed=function(renderedFramesPerSecond,animationId,wasFinished){animationId===self.__isAnimating&&(self.__isAnimating=!1),(self.__didDecelerationComplete||wasFinished)&&self.__scrollingComplete(),self.options.zooming&&self.__computeScrollMax()};self.__isAnimating=zyngaCore.effect.Animate.start(step,verify,completed,self.options.animationDuration,wasAnimating?easeOutCubic:easeInOutCubic)}else self.__scheduledLeft=self.__scrollLeft=left,self.__scheduledTop=self.__scrollTop=top,self.__scheduledZoom=self.__zoomLevel=zoom,self.__callback&&self.__callback(left,top,zoom,wasResize),self.options.zooming&&self.__computeScrollMax()},__computeScrollMax:function(zoomLevel){var self=this;null==zoomLevel&&(zoomLevel=self.__zoomLevel),self.__maxScrollLeft=Math.max(self.__contentWidth*zoomLevel-self.__clientWidth,0),self.__maxScrollTop=Math.max(self.__contentHeight*zoomLevel-self.__clientHeight,0),self.__didWaitForSize||self.__maxScrollLeft||self.__maxScrollTop||(self.__didWaitForSize=!0,self.__waitForSize())},__waitForSize:function(){var self=this;clearTimeout(self.__sizerTimeout);var sizer=function(){self.resize(!0)};sizer(),self.__sizerTimeout=setTimeout(sizer,500)},__startDeceleration:function(){var self=this;if(self.options.paging){var scrollLeft=Math.max(Math.min(self.__scrollLeft,self.__maxScrollLeft),0),scrollTop=Math.max(Math.min(self.__scrollTop,self.__maxScrollTop),0),clientWidth=self.__clientWidth,clientHeight=self.__clientHeight;self.__minDecelerationScrollLeft=Math.floor(scrollLeft/clientWidth)*clientWidth,self.__minDecelerationScrollTop=Math.floor(scrollTop/clientHeight)*clientHeight,self.__maxDecelerationScrollLeft=Math.ceil(scrollLeft/clientWidth)*clientWidth,self.__maxDecelerationScrollTop=Math.ceil(scrollTop/clientHeight)*clientHeight}else self.__minDecelerationScrollLeft=0,self.__minDecelerationScrollTop=0,self.__maxDecelerationScrollLeft=self.__maxScrollLeft,self.__maxDecelerationScrollTop=self.__maxScrollTop,self.__refreshActive&&(self.__minDecelerationScrollTop=-1*self.__refreshHeight);var step=function(percent,now,render){self.__stepThroughDeceleration(render)};self.__minVelocityToKeepDecelerating=self.options.snapping?4:.1;var verify=function(){var shouldContinue=Math.abs(self.__decelerationVelocityX)>=self.__minVelocityToKeepDecelerating||Math.abs(self.__decelerationVelocityY)>=self.__minVelocityToKeepDecelerating;return shouldContinue||(self.__didDecelerationComplete=!0,self.options.bouncing&&!self.__refreshActive&&self.scrollTo(Math.min(Math.max(self.__scrollLeft,0),self.__maxScrollLeft),Math.min(Math.max(self.__scrollTop,0),self.__maxScrollTop),self.__refreshActive)),shouldContinue},completed=function(){self.__isDecelerating=!1,self.__didDecelerationComplete&&self.__scrollingComplete(),self.options.paging&&self.scrollTo(self.__scrollLeft,self.__scrollTop,self.options.snapping)};self.__isDecelerating=zyngaCore.effect.Animate.start(step,verify,completed)},__stepThroughDeceleration:function(render){var self=this,scrollLeft=self.__scrollLeft+self.__decelerationVelocityX,scrollTop=self.__scrollTop+self.__decelerationVelocityY;if(!self.options.bouncing){var scrollLeftFixed=Math.max(Math.min(self.__maxDecelerationScrollLeft,scrollLeft),self.__minDecelerationScrollLeft);scrollLeftFixed!==scrollLeft&&(scrollLeft=scrollLeftFixed,self.__decelerationVelocityX=0);var scrollTopFixed=Math.max(Math.min(self.__maxDecelerationScrollTop,scrollTop),self.__minDecelerationScrollTop);scrollTopFixed!==scrollTop&&(scrollTop=scrollTopFixed,self.__decelerationVelocityY=0)}if(render?self.__publish(scrollLeft,scrollTop,self.__zoomLevel):(self.__scrollLeft=scrollLeft,self.__scrollTop=scrollTop),!self.options.paging){var frictionFactor=self.options.deceleration;self.__decelerationVelocityX*=frictionFactor,self.__decelerationVelocityY*=frictionFactor}if(self.options.bouncing){var scrollOutsideX=0,scrollOutsideY=0,penetrationDeceleration=self.options.penetrationDeceleration,penetrationAcceleration=self.options.penetrationAcceleration;if(scrollLeft<self.__minDecelerationScrollLeft?scrollOutsideX=self.__minDecelerationScrollLeft-scrollLeft:scrollLeft>self.__maxDecelerationScrollLeft&&(scrollOutsideX=self.__maxDecelerationScrollLeft-scrollLeft),scrollTop<self.__minDecelerationScrollTop?scrollOutsideY=self.__minDecelerationScrollTop-scrollTop:scrollTop>self.__maxDecelerationScrollTop&&(scrollOutsideY=self.__maxDecelerationScrollTop-scrollTop),0!==scrollOutsideX){var isHeadingOutwardsX=scrollOutsideX*self.__decelerationVelocityX<=self.__minDecelerationScrollLeft;isHeadingOutwardsX&&(self.__decelerationVelocityX+=scrollOutsideX*penetrationDeceleration);var isStoppedX=Math.abs(self.__decelerationVelocityX)<=self.__minVelocityToKeepDecelerating;(!isHeadingOutwardsX||isStoppedX)&&(self.__decelerationVelocityX=scrollOutsideX*penetrationAcceleration)}if(0!==scrollOutsideY){var isHeadingOutwardsY=scrollOutsideY*self.__decelerationVelocityY<=self.__minDecelerationScrollTop;isHeadingOutwardsY&&(self.__decelerationVelocityY+=scrollOutsideY*penetrationDeceleration);var isStoppedY=Math.abs(self.__decelerationVelocityY)<=self.__minVelocityToKeepDecelerating;(!isHeadingOutwardsY||isStoppedY)&&(self.__decelerationVelocityY=scrollOutsideY*penetrationAcceleration)}}},__getDistance:function(touch1,touch2){var x=touch2.pageX-touch1.pageX,y=touch2.pageY-touch1.pageY;return Math.sqrt(x*x+y*y)},__getScale:function(start,end){return start.length>=2&&end.length>=2?this.__getDistance(end[0],end[1])/this.__getDistance(start[0],start[1]):1}}),ionic.scroll={isScrolling:!1,lastTop:0}}(ionic),function(ionic){var NOOP=function(){},depreciated=function(name){};ionic.views.ScrollNative=ionic.views.View.inherit({initialize:function(options){var self=this;self.__container=self.el=options.el,self.__content=options.el.firstElementChild,self.isNative=!0,self.__scrollTop=self.el.scrollTop,self.__scrollLeft=self.el.scrollLeft,self.__clientHeight=self.__content.clientHeight,self.__clientWidth=self.__content.clientWidth,self.__maxScrollTop=Math.max(self.__contentHeight-self.__clientHeight,0),self.__maxScrollLeft=Math.max(self.__contentWidth-self.__clientWidth,0),self.options={freeze:!1,getContentWidth:function(){return Math.max(self.__content.scrollWidth,self.__content.offsetWidth)},getContentHeight:function(){return Math.max(self.__content.scrollHeight,self.__content.offsetHeight+2*self.__content.offsetTop)}};for(var key in options)self.options[key]=options[key];self.onScroll=function(){ionic.scroll.isScrolling||(ionic.scroll.isScrolling=!0),clearTimeout(self.scrollTimer),self.scrollTimer=setTimeout(function(){ionic.scroll.isScrolling=!1},80)},self.freeze=NOOP,self.__initEventHandlers()},__callback:function(){depreciated("__callback")},zoomTo:function(){depreciated("zoomTo")},zoomBy:function(){depreciated("zoomBy")},activatePullToRefresh:function(){depreciated("activatePullToRefresh")},resize:function(continueScrolling){var self=this;self.__container&&self.options&&self.setDimensions(self.__container.clientWidth,self.__container.clientHeight,self.options.getContentWidth(),self.options.getContentHeight(),continueScrolling)},run:function(){this.resize()},getValues:function(){var self=this;return self.update(),{left:self.__scrollLeft,top:self.__scrollTop,zoom:1}},update:function(){var self=this;self.__scrollLeft=self.el.scrollLeft,self.__scrollTop=self.el.scrollTop},setDimensions:function(clientWidth,clientHeight,contentWidth,contentHeight){var self=this;(clientWidth||clientHeight||contentWidth||contentHeight)&&(clientWidth===+clientWidth&&(self.__clientWidth=clientWidth),clientHeight===+clientHeight&&(self.__clientHeight=clientHeight),contentWidth===+contentWidth&&(self.__contentWidth=contentWidth),contentHeight===+contentHeight&&(self.__contentHeight=contentHeight),self.__computeScrollMax())},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},scrollBy:function(left,top,animate){var self=this;self.update();var startLeft=self.__isAnimating?self.__scheduledLeft:self.__scrollLeft,startTop=self.__isAnimating?self.__scheduledTop:self.__scrollTop;self.scrollTo(startLeft+(left||0),startTop+(top||0),animate)},scrollTo:function(left,top,animate){function animateScroll(Y,X){function easeOutCubic(t){return--t*t*t+1}function animateScrollStep(){var currentTime=Date.now(),time=Math.min(1,(currentTime-start)/duration),easedT=easeOutCubic(time);fromY!=Y&&(self.el.scrollTop=parseInt(easedT*(Y-fromY)+fromY,10)),fromX!=X&&(self.el.scrollLeft=parseInt(easedT*(X-fromX)+fromX,10)),1>time?ionic.requestAnimationFrame(animateScrollStep):(ionic.tap.removeClonedInputs(self.__container,self),self.resize())}var start=Date.now(),duration=250,fromY=self.el.scrollTop,fromX=self.el.scrollLeft;return fromY===Y&&fromX===X?void self.resize():void ionic.requestAnimationFrame(animateScrollStep)}var self=this;return animate?void animateScroll(top,left):(self.el.scrollTop=top,self.el.scrollLeft=left,void self.resize())},__waitForSize:function(){var self=this;clearTimeout(self.__sizerTimeout);var sizer=function(){self.resize(!0)};sizer(),self.__sizerTimeout=setTimeout(sizer,500)},__computeScrollMax:function(){var self=this;self.__maxScrollLeft=Math.max(self.__contentWidth-self.__clientWidth,0),self.__maxScrollTop=Math.max(self.__contentHeight-self.__clientHeight,0),self.__didWaitForSize||self.__maxScrollLeft||self.__maxScrollTop||(self.__didWaitForSize=!0,self.__waitForSize())},__initEventHandlers:function(){var scrollViewOffsetHeight,self=this,container=self.__container;self.scrollChildIntoView=function(e){var scrollBottomOffsetToTop=container.getBoundingClientRect().bottom;scrollViewOffsetHeight=container.offsetHeight;var alreadyShrunk=self.isShrunkForKeyboard,isModal=container.parentNode.classList.contains("modal"),isInsetModal=isModal&&window.innerWidth>=680;if(!alreadyShrunk){if(ionic.Platform.isIOS()||ionic.Platform.isFullScreen||isInsetModal){var scrollBottomOffsetToBottom=e.detail.viewportHeight-scrollBottomOffsetToTop,keyboardOffset=Math.max(0,e.detail.keyboardHeight-scrollBottomOffsetToBottom);ionic.requestAnimationFrame(function(){scrollViewOffsetHeight-=keyboardOffset,container.style.height=scrollViewOffsetHeight+"px",self.resize()})}self.isShrunkForKeyboard=!0}e.detail.isElementUnderKeyboard&&ionic.requestAnimationFrame(function(){self.isShrunkForKeyboard&&!alreadyShrunk&&(scrollBottomOffsetToTop=container.getBoundingClientRect().bottom);var scrollMidpointOffset=.5*scrollViewOffsetHeight,inputMidpoint=(e.detail.elementBottom+e.detail.elementTop)/2,inputMidpointOffsetToScrollBottom=inputMidpoint-scrollBottomOffsetToTop,scrollTop=inputMidpointOffsetToScrollBottom+scrollMidpointOffset;scrollTop>0&&(ionic.Platform.isIOS()?setTimeout(function(){ionic.tap.cloneFocusedInput(container,self),self.scrollBy(0,scrollTop,!0),self.onScroll()},32):(self.scrollBy(0,scrollTop,!0),self.onScroll()))}),e.stopPropagation()},self.resetScrollView=function(){self.isShrunkForKeyboard&&(self.isShrunkForKeyboard=!1,container.style.height=""),self.resize()},container.addEventListener("scroll",self.onScroll),container.addEventListener("scrollChildIntoView",self.scrollChildIntoView),document.addEventListener("resetScrollView",self.resetScrollView)},__cleanup:function(){var self=this,container=self.__container;container.removeEventListener("resetScrollView",self.resetScrollView),container.removeEventListener("scroll",self.onScroll),container.removeEventListener("scrollChildIntoView",self.scrollChildIntoView),container.removeEventListener("resetScrollView",self.resetScrollView),ionic.tap.removeClonedInputs(container,self),delete self.__container,delete self.__content,delete self.__indicatorX,delete self.__indicatorY,delete self.options.el,self.resize=self.scrollTo=self.onScroll=self.resetScrollView=NOOP,self.scrollChildIntoView=NOOP,container=null}})}(ionic),function(ionic){"use strict";var ITEM_CLASS="item",ITEM_CONTENT_CLASS="item-content",ITEM_SLIDING_CLASS="item-sliding",ITEM_OPTIONS_CLASS="item-options",ITEM_PLACEHOLDER_CLASS="item-placeholder",ITEM_REORDERING_CLASS="item-reordering",ITEM_REORDER_BTN_CLASS="item-reorder",DragOp=function(){};DragOp.prototype={start:function(){},drag:function(){},end:function(){},isSameItem:function(){return!1}};var SlideDrag=function(opts){this.dragThresholdX=opts.dragThresholdX||10,this.el=opts.el,this.item=opts.item,this.canSwipe=opts.canSwipe};SlideDrag.prototype=new DragOp,SlideDrag.prototype.start=function(e){var content,buttons,offsetX,buttonsWidth;this.canSwipe()&&(content=e.target.classList.contains(ITEM_CONTENT_CLASS)?e.target:e.target.classList.contains(ITEM_CLASS)?e.target.querySelector("."+ITEM_CONTENT_CLASS):ionic.DomUtil.getParentWithClass(e.target,ITEM_CONTENT_CLASS),content&&(content.classList.remove(ITEM_SLIDING_CLASS),offsetX=parseFloat(content.style[ionic.CSS.TRANSFORM].replace("translate3d(","").split(",")[0])||0,buttons=content.parentNode.querySelector("."+ITEM_OPTIONS_CLASS),buttons&&(buttons.classList.remove("invisible"),buttonsWidth=buttons.offsetWidth,this._currentDrag={buttons:buttons,buttonsWidth:buttonsWidth,content:content,startOffsetX:offsetX})))},SlideDrag.prototype.isSameItem=function(op){return op._lastDrag&&this._currentDrag?this._currentDrag.content==op._lastDrag.content:!1},SlideDrag.prototype.clean=function(isInstant){function makeInvisible(){lastDrag.buttons&&lastDrag.buttons.classList.add("invisible")}var lastDrag=this._lastDrag;lastDrag&&lastDrag.content&&(lastDrag.content.style[ionic.CSS.TRANSITION]="",lastDrag.content.style[ionic.CSS.TRANSFORM]="",isInstant?(lastDrag.content.style[ionic.CSS.TRANSITION]="none",makeInvisible(),ionic.requestAnimationFrame(function(){lastDrag.content.style[ionic.CSS.TRANSITION]=""})):ionic.requestAnimationFrame(function(){setTimeout(makeInvisible,250)}))},SlideDrag.prototype.drag=ionic.animationFrameThrottle(function(e){var buttonsWidth;if(this._currentDrag&&(!this._isDragging&&(Math.abs(e.gesture.deltaX)>this.dragThresholdX||Math.abs(this._currentDrag.startOffsetX)>0)&&(this._isDragging=!0),this._isDragging)){buttonsWidth=this._currentDrag.buttonsWidth;var newX=Math.min(0,this._currentDrag.startOffsetX+e.gesture.deltaX);-buttonsWidth>newX&&(newX=Math.min(-buttonsWidth,-buttonsWidth+.4*(e.gesture.deltaX+buttonsWidth))),this._currentDrag.content.$$ionicOptionsOpen=0!==newX,
this._currentDrag.content.style[ionic.CSS.TRANSFORM]="translate3d("+newX+"px, 0, 0)",this._currentDrag.content.style[ionic.CSS.TRANSITION]="none"}}),SlideDrag.prototype.end=function(e,doneCallback){var self=this;if(!self._currentDrag)return void(doneCallback&&doneCallback());var restingPoint=-self._currentDrag.buttonsWidth;e.gesture.deltaX>-(self._currentDrag.buttonsWidth/2)&&("left"==e.gesture.direction&&Math.abs(e.gesture.velocityX)<.3?restingPoint=0:"right"==e.gesture.direction&&(restingPoint=0)),ionic.requestAnimationFrame(function(){if(0===restingPoint){self._currentDrag.content.style[ionic.CSS.TRANSFORM]="";var buttons=self._currentDrag.buttons;setTimeout(function(){buttons&&buttons.classList.add("invisible")},250)}else self._currentDrag.content.style[ionic.CSS.TRANSFORM]="translate3d("+restingPoint+"px,0,0)";self._currentDrag.content.style[ionic.CSS.TRANSITION]="",self._lastDrag||(self._lastDrag={}),ionic.extend(self._lastDrag,self._currentDrag),self._currentDrag&&(self._currentDrag.buttons=null,self._currentDrag.content=null),self._currentDrag=null,doneCallback&&doneCallback()})};var ReorderDrag=function(opts){var self=this;if(self.dragThresholdY=opts.dragThresholdY||0,self.onReorder=opts.onReorder,self.listEl=opts.listEl,self.el=self.item=opts.el,self.scrollEl=opts.scrollEl,self.scrollView=opts.scrollView,self.listElTrueTop=0,self.listEl.offsetParent){var obj=self.listEl;do self.listElTrueTop+=obj.offsetTop,obj=obj.offsetParent;while(obj)}};ReorderDrag.prototype=new DragOp,ReorderDrag.prototype._moveElement=function(e){var y=e.gesture.center.pageY+this.scrollView.getValues().top-this._currentDrag.elementHeight/2-this.listElTrueTop;this.el.style[ionic.CSS.TRANSFORM]="translate3d(0, "+y+"px, 0)"},ReorderDrag.prototype.deregister=function(){this.listEl=this.el=this.scrollEl=this.scrollView=null},ReorderDrag.prototype.start=function(e){var startIndex=ionic.DomUtil.getChildIndex(this.el,this.el.nodeName.toLowerCase()),elementHeight=this.el.scrollHeight,placeholder=this.el.cloneNode(!0);placeholder.classList.add(ITEM_PLACEHOLDER_CLASS),this.el.parentNode.insertBefore(placeholder,this.el),this.el.classList.add(ITEM_REORDERING_CLASS),this._currentDrag={elementHeight:elementHeight,startIndex:startIndex,placeholder:placeholder,scrollHeight:scroll,list:placeholder.parentNode},this._moveElement(e)},ReorderDrag.prototype.drag=ionic.animationFrameThrottle(function(e){var self=this;if(this._currentDrag){var scrollY=0,pageY=e.gesture.center.pageY,offset=this.listElTrueTop;if(this.scrollView){var container=this.scrollView.__container;scrollY=this.scrollView.getValues().top;var containerTop=container.offsetTop,pixelsPastTop=containerTop-pageY+this._currentDrag.elementHeight/2,pixelsPastBottom=pageY+this._currentDrag.elementHeight/2-containerTop-container.offsetHeight;e.gesture.deltaY<0&&pixelsPastTop>0&&scrollY>0&&(this.scrollView.scrollBy(null,-pixelsPastTop),ionic.requestAnimationFrame(function(){self.drag(e)})),e.gesture.deltaY>0&&pixelsPastBottom>0&&scrollY<this.scrollView.getScrollMax().top&&(this.scrollView.scrollBy(null,pixelsPastBottom),ionic.requestAnimationFrame(function(){self.drag(e)}))}!this._isDragging&&Math.abs(e.gesture.deltaY)>this.dragThresholdY&&(this._isDragging=!0),this._isDragging&&(this._moveElement(e),this._currentDrag.currentY=scrollY+pageY-offset)}}),ReorderDrag.prototype._getReorderIndex=function(){for(var el,self=this,siblings=Array.prototype.slice.call(self._currentDrag.placeholder.parentNode.children).filter(function(el){return el.nodeName===self.el.nodeName&&el!==self.el}),dragOffsetTop=self._currentDrag.currentY,i=0,len=siblings.length;len>i;i++)if(el=siblings[i],i===len-1){if(dragOffsetTop>el.offsetTop)return i}else if(0===i){if(dragOffsetTop<el.offsetTop+el.offsetHeight)return i}else if(dragOffsetTop>el.offsetTop-el.offsetHeight/2&&dragOffsetTop<el.offsetTop+el.offsetHeight)return i;return self._currentDrag.startIndex},ReorderDrag.prototype.end=function(e,doneCallback){if(!this._currentDrag)return void(doneCallback&&doneCallback());var placeholder=this._currentDrag.placeholder,finalIndex=this._getReorderIndex();this.el.classList.remove(ITEM_REORDERING_CLASS),this.el.style[ionic.CSS.TRANSFORM]="",placeholder.parentNode.insertBefore(this.el,placeholder),placeholder.parentNode.removeChild(placeholder),this.onReorder&&this.onReorder(this.el,this._currentDrag.startIndex,finalIndex),this._currentDrag={placeholder:null,content:null},this._currentDrag=null,doneCallback&&doneCallback()},ionic.views.ListView=ionic.views.View.inherit({initialize:function(opts){var self=this;opts=ionic.extend({onReorder:function(){},virtualRemoveThreshold:-200,virtualAddThreshold:200,canSwipe:function(){return!0}},opts),ionic.extend(self,opts),!self.itemHeight&&self.listEl&&(self.itemHeight=self.listEl.children[0]&&parseInt(self.listEl.children[0].style.height,10)),self.onRefresh=opts.onRefresh||function(){},self.onRefreshOpening=opts.onRefreshOpening||function(){},self.onRefreshHolding=opts.onRefreshHolding||function(){};var gestureOpts={};ionic.DomUtil.getParentOrSelfWithClass(self.el,"overflow-scroll")&&(gestureOpts.prevent_default_directions=["left","right"]),window.ionic.onGesture("release",function(e){self._handleEndDrag(e)},self.el,gestureOpts),window.ionic.onGesture("drag",function(e){self._handleDrag(e)},self.el,gestureOpts),self._initDrag()},deregister:function(){this.el=this.listEl=this.scrollEl=this.scrollView=null,this.isScrollFreeze&&self.scrollView.freeze(!1)},stopRefreshing:function(){var refresher=this.el.querySelector(".list-refresher");refresher.style.height="0"},didScroll:function(e){var self=this;if(self.isVirtual){var itemHeight=self.itemHeight,scrollHeight=e.target.scrollHeight,viewportHeight=self.el.parentNode.offsetHeight,highWater=Math.max(0,e.scrollTop+self.virtualRemoveThreshold),lowWater=Math.min(scrollHeight,Math.abs(e.scrollTop)+viewportHeight+self.virtualAddThreshold),first=parseInt(Math.abs(highWater/itemHeight),10),last=parseInt(Math.abs(lowWater/itemHeight),10);self._virtualItemsToRemove=Array.prototype.slice.call(self.listEl.children,0,first),self.renderViewport&&self.renderViewport(highWater,lowWater,first,last)}},didStopScrolling:function(){if(this.isVirtual)for(var i=0;i<this._virtualItemsToRemove.length;i++)this.didHideItem&&this.didHideItem(i)},clearDragEffects:function(isInstant){this._lastDragOp&&(this._lastDragOp.clean&&this._lastDragOp.clean(isInstant),this._lastDragOp.deregister&&this._lastDragOp.deregister(),this._lastDragOp=null)},_initDrag:function(){this._lastDragOp&&this._lastDragOp.deregister&&this._lastDragOp.deregister(),this._lastDragOp=this._dragOp,this._dragOp=null},_getItem:function(target){for(;target;){if(target.classList&&target.classList.contains(ITEM_CLASS))return target;target=target.parentNode}return null},_startDrag:function(e){var self=this;self._isDragging=!1;var item,lastDragOp=self._lastDragOp;self._didDragUpOrDown&&lastDragOp instanceof SlideDrag&&lastDragOp.clean&&lastDragOp.clean(),!ionic.DomUtil.getParentOrSelfWithClass(e.target,ITEM_REORDER_BTN_CLASS)||"up"!=e.gesture.direction&&"down"!=e.gesture.direction?!self._didDragUpOrDown&&("left"==e.gesture.direction||"right"==e.gesture.direction)&&Math.abs(e.gesture.deltaX)>5&&(item=self._getItem(e.target),item&&item.querySelector(".item-options")&&(self._dragOp=new SlideDrag({el:self.el,item:item,canSwipe:self.canSwipe}),self._dragOp.start(e),e.preventDefault(),self.isScrollFreeze=self.scrollView.freeze(!0))):(item=self._getItem(e.target),item&&(self._dragOp=new ReorderDrag({listEl:self.el,el:item,scrollEl:self.scrollEl,scrollView:self.scrollView,onReorder:function(el,start,end){self.onReorder&&self.onReorder(el,start,end)}}),self._dragOp.start(e),e.preventDefault())),lastDragOp&&self._dragOp&&!self._dragOp.isSameItem(lastDragOp)&&e.defaultPrevented&&lastDragOp.clean&&lastDragOp.clean()},_handleEndDrag:function(e){var self=this;self.scrollView&&(self.isScrollFreeze=self.scrollView.freeze(!1)),self._didDragUpOrDown=!1,self._dragOp&&self._dragOp.end(e,function(){self._initDrag()})},_handleDrag:function(e){var self=this;Math.abs(e.gesture.deltaY)>5&&(self._didDragUpOrDown=!0),self.isDragging||self._dragOp||self._startDrag(e),self._dragOp&&(e.gesture.srcEvent.preventDefault(),self._dragOp.drag(e))}})}(ionic),function(ionic){"use strict";ionic.views.Modal=ionic.views.View.inherit({initialize:function(opts){opts=ionic.extend({focusFirstInput:!1,unfocusOnHide:!0,focusFirstDelay:600,backdropClickToClose:!0,hardwareBackButtonClose:!0},opts),ionic.extend(this,opts),this.el=opts.el},show:function(){var self=this;self.focusFirstInput&&window.setTimeout(function(){var input=self.el.querySelector("input, textarea");input&&input.focus&&input.focus()},self.focusFirstDelay)},hide:function(){if(this.unfocusOnHide){var inputs=this.el.querySelectorAll("input, textarea");window.setTimeout(function(){for(var i=0;i<inputs.length;i++)inputs[i].blur&&inputs[i].blur()})}}})}(ionic),function(ionic){"use strict";ionic.views.SideMenu=ionic.views.View.inherit({initialize:function(opts){this.el=opts.el,this.isEnabled="undefined"==typeof opts.isEnabled?!0:opts.isEnabled,this.setWidth(opts.width)},getFullWidth:function(){return this.width},setWidth:function(width){this.width=width,this.el.style.width=width+"px"},setIsEnabled:function(isEnabled){this.isEnabled=isEnabled},bringUp:function(){"0"!==this.el.style.zIndex&&(this.el.style.zIndex="0")},pushDown:function(){"-1"!==this.el.style.zIndex&&(this.el.style.zIndex="-1")}}),ionic.views.SideMenuContent=ionic.views.View.inherit({initialize:function(opts){ionic.extend(this,{animationClass:"menu-animated",onDrag:function(){},onEndDrag:function(){}},opts),ionic.onGesture("drag",ionic.proxy(this._onDrag,this),this.el),ionic.onGesture("release",ionic.proxy(this._onEndDrag,this),this.el)},_onDrag:function(e){this.onDrag&&this.onDrag(e)},_onEndDrag:function(e){this.onEndDrag&&this.onEndDrag(e)},disableAnimation:function(){this.el.classList.remove(this.animationClass)},enableAnimation:function(){this.el.classList.add(this.animationClass)},getTranslateX:function(){return parseFloat(this.el.style[ionic.CSS.TRANSFORM].replace("translate3d(","").split(",")[0])},setTranslateX:ionic.animationFrameThrottle(function(x){this.el.style[ionic.CSS.TRANSFORM]="translate3d("+x+"px, 0, 0)"})})}(ionic),function(ionic){"use strict";ionic.views.Slider=ionic.views.View.inherit({initialize:function(options){function setup(){if(container.offsetWidth){slides=element.children,length=slides.length,slides.length<2&&(options.continuous=!1),browser.transitions&&options.continuous&&slides.length<3&&(element.appendChild(slides[0].cloneNode(!0)),element.appendChild(element.children[1].cloneNode(!0)),slides=element.children),slidePos=new Array(slides.length),width=container.offsetWidth||container.getBoundingClientRect().width,element.style.width=slides.length*width+"px";for(var pos=slides.length;pos--;){var slide=slides[pos];slide.style.width=width+"px",slide.setAttribute("data-index",pos),browser.transitions&&(slide.style.left=pos*-width+"px",move(pos,index>pos?-width:pos>index?width:0,0))}options.continuous&&browser.transitions&&(move(circle(index-1),-width,0),move(circle(index+1),width,0)),browser.transitions||(element.style.left=index*-width+"px"),container.style.visibility="visible",options.slidesChanged&&options.slidesChanged()}}function prev(slideSpeed){options.continuous?slide(index-1,slideSpeed):index&&slide(index-1,slideSpeed)}function next(slideSpeed){options.continuous?slide(index+1,slideSpeed):index<slides.length-1&&slide(index+1,slideSpeed)}function circle(index){return(slides.length+index%slides.length)%slides.length}function slide(to,slideSpeed){if(index!=to){if(browser.transitions){var direction=Math.abs(index-to)/(index-to);if(options.continuous){var naturalDirection=direction;direction=-slidePos[circle(to)]/width,direction!==naturalDirection&&(to=-direction*slides.length+to)}for(var diff=Math.abs(index-to)-1;diff--;)move(circle((to>index?to:index)-diff-1),width*direction,0);to=circle(to),move(index,width*direction,slideSpeed||speed),move(to,0,slideSpeed||speed),options.continuous&&move(circle(to-direction),-(width*direction),0)}else to=circle(to),animate(index*-width,to*-width,slideSpeed||speed);index=to,offloadFn(options.callback&&options.callback(index,slides[index]))}}function move(index,dist,speed){translate(index,dist,speed),slidePos[index]=dist}function translate(index,dist,speed){var slide=slides[index],style=slide&&slide.style;style&&(style.webkitTransitionDuration=style.MozTransitionDuration=style.msTransitionDuration=style.OTransitionDuration=style.transitionDuration=speed+"ms",style.webkitTransform="translate("+dist+"px,0)translateZ(0)",style.msTransform=style.MozTransform=style.OTransform="translateX("+dist+"px)")}function animate(from,to,speed){if(!speed)return void(element.style.left=to+"px");var start=+new Date,timer=setInterval(function(){var timeElap=+new Date-start;return timeElap>speed?(element.style.left=to+"px",delay&&begin(),options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]),void clearInterval(timer)):void(element.style.left=(to-from)*(Math.floor(timeElap/speed*100)/100)+from+"px")},4)}function begin(){interval=setTimeout(next,delay)}function stop(){delay=options.auto||0,clearTimeout(interval)}var slider=this,noop=function(){},offloadFn=function(fn){setTimeout(fn||noop,0)},browser={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(temp){var props=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in props)if(void 0!==temp.style[props[i]])return!0;return!1}(document.createElement("swipe"))},container=options.el;if(container){var slides,slidePos,width,length,element=container.children[0];options=options||{};var index=parseInt(options.startSlide,10)||0,speed=options.speed||300;options.continuous=void 0!==options.continuous?options.continuous:!0;var interval,isScrolling,delay=options.auto||0,start={},delta={},events={handleEvent:function(event){switch(("mousedown"==event.type||"mouseup"==event.type||"mousemove"==event.type)&&(event.touches=[{pageX:event.pageX,pageY:event.pageY}]),event.type){case"mousedown":this.start(event);break;case"touchstart":this.start(event);break;case"touchmove":this.touchmove(event);break;case"mousemove":this.touchmove(event);break;case"touchend":offloadFn(this.end(event));break;case"mouseup":offloadFn(this.end(event));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":offloadFn(this.transitionEnd(event));break;case"resize":offloadFn(setup)}options.stopPropagation&&event.stopPropagation()},start:function(event){var touches=event.touches[0];start={x:touches.pageX,y:touches.pageY,time:+new Date},isScrolling=void 0,delta={},browser.touch?(element.addEventListener("touchmove",this,!1),element.addEventListener("touchend",this,!1)):(element.addEventListener("mousemove",this,!1),element.addEventListener("mouseup",this,!1),document.addEventListener("mouseup",this,!1))},touchmove:function(event){if(!(event.touches.length>1||event.scale&&1!==event.scale||slider.slideIsDisabled)){options.disableScroll&&event.preventDefault();var touches=event.touches[0];delta={x:touches.pageX-start.x,y:touches.pageY-start.y},"undefined"==typeof isScrolling&&(isScrolling=!!(isScrolling||Math.abs(delta.x)<Math.abs(delta.y))),isScrolling||(event.preventDefault(),stop(),options.continuous?(translate(circle(index-1),delta.x+slidePos[circle(index-1)],0),translate(index,delta.x+slidePos[index],0),translate(circle(index+1),delta.x+slidePos[circle(index+1)],0)):(delta.x=delta.x/(!index&&delta.x>0||index==slides.length-1&&delta.x<0?Math.abs(delta.x)/width+1:1),translate(index-1,delta.x+slidePos[index-1],0),translate(index,delta.x+slidePos[index],0),translate(index+1,delta.x+slidePos[index+1],0)),options.onDrag&&options.onDrag())}},end:function(){var duration=+new Date-start.time,isValidSlide=Number(duration)<250&&Math.abs(delta.x)>20||Math.abs(delta.x)>width/2,isPastBounds=!index&&delta.x>0||index==slides.length-1&&delta.x<0;options.continuous&&(isPastBounds=!1);var direction=delta.x<0;isScrolling||(isValidSlide&&!isPastBounds?(direction?(options.continuous?(move(circle(index-1),-width,0),move(circle(index+2),width,0)):move(index-1,-width,0),move(index,slidePos[index]-width,speed),move(circle(index+1),slidePos[circle(index+1)]-width,speed),index=circle(index+1)):(options.continuous?(move(circle(index+1),width,0),move(circle(index-2),-width,0)):move(index+1,width,0),move(index,slidePos[index]+width,speed),move(circle(index-1),slidePos[circle(index-1)]+width,speed),index=circle(index-1)),options.callback&&options.callback(index,slides[index])):options.continuous?(move(circle(index-1),-width,speed),move(index,0,speed),move(circle(index+1),width,speed)):(move(index-1,-width,speed),move(index,0,speed),move(index+1,width,speed))),browser.touch?(element.removeEventListener("touchmove",events,!1),element.removeEventListener("touchend",events,!1)):(element.removeEventListener("mousemove",events,!1),element.removeEventListener("mouseup",events,!1),document.removeEventListener("mouseup",events,!1)),options.onDragEnd&&options.onDragEnd()},transitionEnd:function(event){parseInt(event.target.getAttribute("data-index"),10)==index&&(delay&&begin(),options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]))}};this.update=function(){setTimeout(setup)},this.setup=function(){setup()},this.loop=function(value){return arguments.length&&(options.continuous=!!value),options.continuous},this.enableSlide=function(shouldEnable){return arguments.length&&(this.slideIsDisabled=!shouldEnable),!this.slideIsDisabled},this.slide=this.select=function(to,speed){stop(),slide(to,speed)},this.prev=this.previous=function(){stop(),prev()},this.next=function(){stop(),next()},this.stop=function(){stop()},this.start=function(){begin()},this.autoPlay=function(newDelay){!delay||0>delay?stop():(delay=newDelay,begin())},this.currentIndex=this.selected=function(){return index},this.slidesCount=this.count=function(){return length},this.kill=function(){stop(),element.style.width="",element.style.left="",slides&&(slides=[]),browser.addEventListener?(element.removeEventListener("touchstart",events,!1),element.removeEventListener("webkitTransitionEnd",events,!1),element.removeEventListener("msTransitionEnd",events,!1),element.removeEventListener("oTransitionEnd",events,!1),element.removeEventListener("otransitionend",events,!1),element.removeEventListener("transitionend",events,!1),window.removeEventListener("resize",events,!1)):window.onresize=null},this.load=function(){setup(),delay&&begin(),browser.addEventListener?(browser.touch?element.addEventListener("touchstart",events,!1):element.addEventListener("mousedown",events,!1),browser.transitions&&(element.addEventListener("webkitTransitionEnd",events,!1),element.addEventListener("msTransitionEnd",events,!1),element.addEventListener("oTransitionEnd",events,!1),element.addEventListener("otransitionend",events,!1),element.addEventListener("transitionend",events,!1)),window.addEventListener("resize",events,!1)):window.onresize=function(){setup()}}}}})}(ionic),function(ionic){"use strict";ionic.views.Toggle=ionic.views.View.inherit({initialize:function(opts){var self=this;this.el=opts.el,this.checkbox=opts.checkbox,this.track=opts.track,this.handle=opts.handle,this.openPercent=-1,this.onChange=opts.onChange||function(){},this.triggerThreshold=opts.triggerThreshold||20,this.dragStartHandler=function(e){self.dragStart(e)},this.dragHandler=function(e){self.drag(e)},this.holdHandler=function(e){self.hold(e)},this.releaseHandler=function(e){self.release(e)},this.dragStartGesture=ionic.onGesture("dragstart",this.dragStartHandler,this.el),this.dragGesture=ionic.onGesture("drag",this.dragHandler,this.el),this.dragHoldGesture=ionic.onGesture("hold",this.holdHandler,this.el),this.dragReleaseGesture=ionic.onGesture("release",this.releaseHandler,this.el)},destroy:function(){ionic.offGesture(this.dragStartGesture,"dragstart",this.dragStartGesture),ionic.offGesture(this.dragGesture,"drag",this.dragGesture),ionic.offGesture(this.dragHoldGesture,"hold",this.holdHandler),ionic.offGesture(this.dragReleaseGesture,"release",this.releaseHandler)},tap:function(){"disabled"!==this.el.getAttribute("disabled")&&this.val(!this.checkbox.checked)},dragStart:function(e){this.checkbox.disabled||(this._dragInfo={width:this.el.offsetWidth,left:this.el.offsetLeft,right:this.el.offsetLeft+this.el.offsetWidth,triggerX:this.el.offsetWidth/2,initialState:this.checkbox.checked},e.gesture.srcEvent.preventDefault(),this.hold(e))},drag:function(e){var self=this;this._dragInfo&&(e.gesture.srcEvent.preventDefault(),ionic.requestAnimationFrame(function(){if(self._dragInfo){var px=e.gesture.touches[0].pageX-self._dragInfo.left,mx=self._dragInfo.width-self.triggerThreshold;self._dragInfo.initialState?px<self.triggerThreshold?self.setOpenPercent(0):px>self._dragInfo.triggerX&&self.setOpenPercent(100):px<self._dragInfo.triggerX?self.setOpenPercent(0):px>mx&&self.setOpenPercent(100)}}))},endDrag:function(){this._dragInfo=null},hold:function(){this.el.classList.add("dragging")},release:function(e){this.el.classList.remove("dragging"),this.endDrag(e)},setOpenPercent:function(openPercent){if(this.openPercent<0||openPercent<this.openPercent-3||openPercent>this.openPercent+3)if(this.openPercent=openPercent,0===openPercent)this.val(!1);else if(100===openPercent)this.val(!0);else{var openPixel=Math.round(openPercent/100*this.track.offsetWidth-this.handle.offsetWidth);openPixel=1>openPixel?0:openPixel,this.handle.style[ionic.CSS.TRANSFORM]="translate3d("+openPixel+"px,0,0)"}},val:function(value){return(value===!0||value===!1)&&(""!==this.handle.style[ionic.CSS.TRANSFORM]&&(this.handle.style[ionic.CSS.TRANSFORM]=""),this.checkbox.checked=value,this.openPercent=value?100:0,this.onChange&&this.onChange()),this.checkbox.checked}})}(ionic)}(),define("ionicCore",function(global){return function(){var ret;return ret||global.ionic}}(this)),function(window,angular,undefined){"use strict";function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function packageStyles(options){var styles={};return options&&(options.to||options.from)&&(styles.to=options.to,styles.from=options.from),styles}function pendClasses(classes,fix,isPrefix){var className="";return classes=isArray(classes)?classes:classes&&isString(classes)&&classes.length?classes.split(/\s+/):[],forEach(classes,function(klass,i){klass&&klass.length>0&&(className+=i>0?" ":"",className+=isPrefix?fix+klass:klass+fix)}),className}function removeFromArray(arr,val){var index=arr.indexOf(val);val>=0&&arr.splice(index,1)}function stripCommentsFromElement(element){if(element instanceof jqLite)switch(element.length){case 0:return[];case 1:if(element[0].nodeType===ELEMENT_NODE)return element;break;default:return jqLite(extractElementNode(element))}return element.nodeType===ELEMENT_NODE?jqLite(element):void 0}function extractElementNode(element){if(!element[0])return element;for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType==ELEMENT_NODE)return elm}}function $$addClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.addClass(elm,className)})}function $$removeClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.removeClass(elm,className)})}function applyAnimationClassesFactory($$jqLite){return function(element,options){options.addClass&&($$addClass($$jqLite,element,options.addClass),options.addClass=null),options.removeClass&&($$removeClass($$jqLite,element,options.removeClass),options.removeClass=null)}}function prepareAnimationOptions(options){if(options=options||{},!options.$$prepared){var domOperation=options.domOperation||noop;options.domOperation=function(){options.$$domOperationFired=!0,domOperation(),domOperation=noop},options.$$prepared=!0}return options}function applyAnimationStyles(element,options){applyAnimationFromStyles(element,options),applyAnimationToStyles(element,options)}function applyAnimationFromStyles(element,options){options.from&&(element.css(options.from),options.from=null)}function applyAnimationToStyles(element,options){options.to&&(element.css(options.to),options.to=null)}function mergeAnimationOptions(element,target,newOptions){var toAdd=(target.addClass||"")+" "+(newOptions.addClass||""),toRemove=(target.removeClass||"")+" "+(newOptions.removeClass||""),classes=resolveElementClasses(element.attr("class"),toAdd,toRemove);return extend(target,newOptions),classes.addClass?target.addClass=classes.addClass:target.addClass=null,classes.removeClass?target.removeClass=classes.removeClass:target.removeClass=null,target}function resolveElementClasses(existing,toAdd,toRemove){function splitClassesToLookup(classes){isString(classes)&&(classes=classes.split(" "));var obj={};return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}var ADD_CLASS=1,REMOVE_CLASS=-1,flags={};existing=splitClassesToLookup(existing),toAdd=splitClassesToLookup(toAdd),forEach(toAdd,function(value,key){flags[key]=ADD_CLASS}),toRemove=splitClassesToLookup(toRemove),forEach(toRemove,function(value,key){flags[key]=flags[key]===ADD_CLASS?null:REMOVE_CLASS});var classes={addClass:"",removeClass:""};return forEach(flags,function(val,klass){var prop,allow;val===ADD_CLASS?(prop="addClass",allow=!existing[klass]):val===REMOVE_CLASS&&(prop="removeClass",allow=existing[klass]),allow&&(classes[prop].length&&(classes[prop]+=" "),classes[prop]+=klass)}),classes}function getDomNode(element){return element instanceof angular.element?element[0]:element}function computeCssStyles($window,element,properties){var styles=Object.create(null),detectedStyles=$window.getComputedStyle(element)||{};return forEach(properties,function(formalStyleName,actualStyleName){var val=detectedStyles[formalStyleName];if(val){var c=val.charAt(0);("-"===c||"+"===c||c>=0)&&(val=parseMaxTime(val)),0===val&&(val=null),styles[actualStyleName]=val}}),styles}function parseMaxTime(str){var maxValue=0,values=str.split(/\s*,\s*/);return forEach(values,function(value){"s"==value.charAt(value.length-1)&&(value=value.substring(0,value.length-1)),value=parseFloat(value)||0,maxValue=maxValue?Math.max(value,maxValue):value}),maxValue}function truthyTimingValue(val){return 0===val||null!=val}function getCssTransitionDurationStyle(duration,applyOnlyDuration){var style=TRANSITION_PROP,value=duration+"s";return applyOnlyDuration?style+=DURATION_KEY:value+=" linear all",[style,value]}function getCssKeyframeDurationStyle(duration){return[ANIMATION_DURATION_PROP,duration+"s"]}function getCssDelayStyle(delay,isKeyframeAnimation){var prop=isKeyframeAnimation?ANIMATION_DELAY_PROP:TRANSITION_DELAY_PROP;return[prop,delay+"s"]}function blockTransitions(node,duration){var value=duration?"-"+duration+"s":"";return applyInlineStyle(node,[TRANSITION_DELAY_PROP,value]),[TRANSITION_DELAY_PROP,value]}function blockKeyframeAnimations(node,applyBlock){var value=applyBlock?"paused":"",key=ANIMATION_PROP+ANIMATION_PLAYSTATE_KEY;return applyInlineStyle(node,[key,value]),[key,value]}function applyInlineStyle(node,styleTuple){var prop=styleTuple[0],value=styleTuple[1];node.style[prop]=value}function createLocalCacheLookup(){var cache=Object.create(null);return{flush:function(){cache=Object.create(null)},count:function(key){var entry=cache[key];return entry?entry.total:0},get:function(key){var entry=cache[key];return entry&&entry.value},put:function(key,value){cache[key]?cache[key].total++:cache[key]={total:1,value:value}}}}var TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT,noop=angular.noop,extend=angular.extend,jqLite=angular.element,forEach=angular.forEach,isArray=angular.isArray,isString=angular.isString,isObject=angular.isObject,isUndefined=angular.isUndefined,isDefined=angular.isDefined,isFunction=angular.isFunction,isElement=angular.isElement,ELEMENT_NODE=1,NG_ANIMATE_CLASSNAME="ng-animate",NG_ANIMATE_CHILDREN_DATA="$$ngAnimateChildren",$$rAFSchedulerFactory=["$$rAF",function($$rAF){function scheduler(tasks){tickQueue.push([].concat(tasks)),nextTick()}function nextTick(){if(tickQueue.length){for(var updatedQueue=[],i=0;i<tickQueue.length;i++){var innerQueue=tickQueue[i];runNextTask(innerQueue),innerQueue.length&&updatedQueue.push(innerQueue)}tickQueue=updatedQueue,cancelFn||$$rAF(function(){cancelFn||nextTick()})}}function runNextTask(tasks){var nextTask=tasks.shift();nextTask()}var cancelFn,tickQueue=[];return scheduler.waitUntilQuiet=function(fn){cancelFn&&cancelFn(),cancelFn=$$rAF(function(){cancelFn=null,fn(),nextTick()})},scheduler}],$$AnimateChildrenDirective=[function(){return function(scope,element,attrs){var val=attrs.ngAnimateChildren;angular.isString(val)&&0===val.length?element.data(NG_ANIMATE_CHILDREN_DATA,!0):attrs.$observe("ngAnimateChildren",function(value){value="on"===value||"true"===value,element.data(NG_ANIMATE_CHILDREN_DATA,value)})}}],CSS_PREFIX="";window.ontransitionend===undefined&&window.onwebkittransitionend!==undefined?(CSS_PREFIX="-webkit-",TRANSITION_PROP="WebkitTransition",TRANSITIONEND_EVENT="webkitTransitionEnd transitionend"):(TRANSITION_PROP="transition",TRANSITIONEND_EVENT="transitionend"),window.onanimationend===undefined&&window.onwebkitanimationend!==undefined?(CSS_PREFIX="-webkit-",ANIMATION_PROP="WebkitAnimation",ANIMATIONEND_EVENT="webkitAnimationEnd animationend"):(ANIMATION_PROP="animation",ANIMATIONEND_EVENT="animationend");var DURATION_KEY="Duration",PROPERTY_KEY="Property",DELAY_KEY="Delay",TIMING_KEY="TimingFunction",ANIMATION_ITERATION_COUNT_KEY="IterationCount",ANIMATION_PLAYSTATE_KEY="PlayState",ELAPSED_TIME_MAX_DECIMAL_PLACES=3,CLOSING_TIME_BUFFER=1.5,ONE_SECOND=1e3,SAFE_FAST_FORWARD_DURATION_VALUE=9999,ANIMATION_DELAY_PROP=ANIMATION_PROP+DELAY_KEY,ANIMATION_DURATION_PROP=ANIMATION_PROP+DURATION_KEY,TRANSITION_DELAY_PROP=TRANSITION_PROP+DELAY_KEY,TRANSITION_DURATION_PROP=TRANSITION_PROP+DURATION_KEY,DETECT_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,transitionProperty:TRANSITION_PROP+PROPERTY_KEY,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP,animationIterationCount:ANIMATION_PROP+ANIMATION_ITERATION_COUNT_KEY},DETECT_STAGGER_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP},$AnimateCssProvider=["$animateProvider",function($animateProvider){var gcsLookup=createLocalCacheLookup(),gcsStaggerLookup=createLocalCacheLookup();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$document","$sniffer","$$rAFScheduler",function($window,$$jqLite,$$AnimateRunner,$timeout,$document,$sniffer,$$rAFScheduler){function gcsHashFn(node,extraClasses){var KEY="$$ngAnimateParentKey",parentNode=node.parentNode,parentID=parentNode[KEY]||(parentNode[KEY]=++parentCounter);return parentID+"-"+node.getAttribute("class")+"-"+extraClasses}function computeCachedCssStyles(node,className,cacheKey,properties){var timings=gcsLookup.get(cacheKey);return timings||(timings=computeCssStyles($window,node,properties),"infinite"===timings.animationIterationCount&&(timings.animationIterationCount=1)),gcsLookup.put(cacheKey,timings),timings}function computeCachedCssStaggerStyles(node,className,cacheKey,properties){var stagger;if(gcsLookup.count(cacheKey)>0&&(stagger=gcsStaggerLookup.get(cacheKey),!stagger)){var staggerClassName=pendClasses(className,"-stagger");$$jqLite.addClass(node,staggerClassName),stagger=computeCssStyles($window,node,properties),stagger.animationDuration=Math.max(stagger.animationDuration,0),stagger.transitionDuration=Math.max(stagger.transitionDuration,0),
$$jqLite.removeClass(node,staggerClassName),gcsStaggerLookup.put(cacheKey,stagger)}return stagger||{}}function waitUntilQuiet(callback){rafWaitQueue.push(callback),$$rAFScheduler.waitUntilQuiet(function(){gcsLookup.flush(),gcsStaggerLookup.flush();for(var width=bod.offsetWidth+1,i=0;i<rafWaitQueue.length;i++)rafWaitQueue[i](width);rafWaitQueue.length=0})}function computeTimings(node,className,cacheKey){var timings=computeCachedCssStyles(node,className,cacheKey,DETECT_CSS_PROPERTIES),aD=timings.animationDelay,tD=timings.transitionDelay;return timings.maxDelay=aD&&tD?Math.max(aD,tD):aD||tD,timings.maxDuration=Math.max(timings.animationDuration*timings.animationIterationCount,timings.transitionDuration),timings}function init(element,options){function endFn(){close()}function cancelFn(){close(!0)}function close(rejected){animationClosed||animationCompleted&&animationPaused||(animationClosed=!0,animationPaused=!1,$$jqLite.removeClass(element,setupClasses),$$jqLite.removeClass(element,activeClasses),blockKeyframeAnimations(node,!1),blockTransitions(node,!1),forEach(temporaryStyles,function(entry){node.style[entry[0]]=""}),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.onDone&&options.onDone(),runner&&runner.complete(!rejected))}function applyBlocking(duration){flags.blockTransition&&blockTransitions(node,duration),flags.blockKeyframeAnimation&&blockKeyframeAnimations(node,!!duration)}function closeAndReturnNoopAnimator(){return runner=new $$AnimateRunner({end:endFn,cancel:cancelFn}),close(),{$$willAnimate:!1,start:function(){return runner},end:endFn}}function start(){function triggerAnimationStart(){if(!animationClosed){if(applyBlocking(!1),forEach(temporaryStyles,function(entry){var key=entry[0],value=entry[1];node.style[key]=value}),applyAnimationClasses(element,options),$$jqLite.addClass(element,activeClasses),flags.recalculateTimingStyles){if(fullClassName=node.className+" "+setupClasses,cacheKey=gcsHashFn(node,fullClassName),timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay,maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration,0===maxDuration)return void close();flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0}if(flags.applyTransitionDelay||flags.applyAnimationDelay){relativeDelay="boolean"!=typeof options.delay&&truthyTimingValue(options.delay)?parseFloat(options.delay):relativeDelay,maxDelay=Math.max(relativeDelay,0);var delayStyle;flags.applyTransitionDelay&&(timings.transitionDelay=relativeDelay,delayStyle=getCssDelayStyle(relativeDelay),temporaryStyles.push(delayStyle),node.style[delayStyle[0]]=delayStyle[1]),flags.applyAnimationDelay&&(timings.animationDelay=relativeDelay,delayStyle=getCssDelayStyle(relativeDelay,!0),temporaryStyles.push(delayStyle),node.style[delayStyle[0]]=delayStyle[1])}if(maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.easing){var easeProp,easeVal=options.easing;flags.hasTransitions&&(easeProp=TRANSITION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal),flags.hasAnimations&&(easeProp=ANIMATION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal)}timings.transitionDuration&&events.push(TRANSITIONEND_EVENT),timings.animationDuration&&events.push(ANIMATIONEND_EVENT),startTime=Date.now(),element.on(events.join(" "),onAnimationProgress),$timeout(onAnimationExpired,maxDelayTime+CLOSING_TIME_BUFFER*maxDurationTime),applyAnimationToStyles(element,options)}}function onAnimationExpired(){close()}function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||ev.timeStamp||Date.now(),elapsedTime=parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));Math.max(timeStamp-startTime,0)>=maxDelayTime&&elapsedTime>=maxDuration&&(animationCompleted=!0,close())}if(!animationClosed){if(!node.parentNode)return void close();var startTime,events=[],playPause=function(playAnimation){if(animationCompleted)animationPaused&&playAnimation&&(animationPaused=!1,close());else if(animationPaused=!playAnimation,timings.animationDuration){var value=blockKeyframeAnimations(node,animationPaused);animationPaused?temporaryStyles.push(value):removeFromArray(temporaryStyles,value)}},maxStagger=itemIndex>0&&(timings.transitionDuration&&0===stagger.transitionDuration||timings.animationDuration&&0===stagger.animationDuration)&&Math.max(stagger.animationDelay,stagger.transitionDelay);maxStagger?$timeout(triggerAnimationStart,Math.floor(maxStagger*itemIndex*ONE_SECOND),!1):triggerAnimationStart(),runnerHost.resume=function(){playPause(!0)},runnerHost.pause=function(){playPause(!1)}}}var node=getDomNode(element);if(!node||!node.parentNode)return closeAndReturnNoopAnimator();options=prepareAnimationOptions(options);var animationClosed,animationPaused,animationCompleted,runner,runnerHost,maxDelay,maxDelayTime,maxDuration,maxDurationTime,temporaryStyles=[],classes=element.attr("class"),styles=packageStyles(options);if(0===options.duration||!$sniffer.animations&&!$sniffer.transitions)return closeAndReturnNoopAnimator();var method=options.event&&isArray(options.event)?options.event.join(" "):options.event,isStructural=method&&options.structural,structuralClassName="",addRemoveClassName="";isStructural?structuralClassName=pendClasses(method,"ng-",!0):method&&(structuralClassName=method),options.addClass&&(addRemoveClassName+=pendClasses(options.addClass,"-add")),options.removeClass&&(addRemoveClassName.length&&(addRemoveClassName+=" "),addRemoveClassName+=pendClasses(options.removeClass,"-remove")),options.applyClassesEarly&&addRemoveClassName.length&&(applyAnimationClasses(element,options),addRemoveClassName="");var setupClasses=[structuralClassName,addRemoveClassName].join(" ").trim(),fullClassName=classes+" "+setupClasses,activeClasses=pendClasses(setupClasses,"-active"),hasToStyles=styles.to&&Object.keys(styles.to).length>0,containsKeyframeAnimation=(options.keyframeStyle||"").length>0;if(!containsKeyframeAnimation&&!hasToStyles&&!setupClasses)return closeAndReturnNoopAnimator();var cacheKey,stagger;if(options.stagger>0){var staggerVal=parseFloat(options.stagger);stagger={transitionDelay:staggerVal,animationDelay:staggerVal,transitionDuration:0,animationDuration:0}}else cacheKey=gcsHashFn(node,fullClassName),stagger=computeCachedCssStaggerStyles(node,setupClasses,cacheKey,DETECT_STAGGER_CSS_PROPERTIES);$$jqLite.addClass(element,setupClasses);var applyOnlyDuration;if(options.transitionStyle){var transitionStyle=[TRANSITION_PROP,options.transitionStyle];applyInlineStyle(node,transitionStyle),temporaryStyles.push(transitionStyle)}if(options.duration>=0){applyOnlyDuration=node.style[TRANSITION_PROP].length>0;var durationStyle=getCssTransitionDurationStyle(options.duration,applyOnlyDuration);applyInlineStyle(node,durationStyle),temporaryStyles.push(durationStyle)}if(options.keyframeStyle){var keyframeStyle=[ANIMATION_PROP,options.keyframeStyle];applyInlineStyle(node,keyframeStyle),temporaryStyles.push(keyframeStyle)}var itemIndex=stagger?options.staggerIndex>=0?options.staggerIndex:gcsLookup.count(cacheKey):0,isFirst=0===itemIndex;isFirst&&blockTransitions(node,SAFE_FAST_FORWARD_DURATION_VALUE);var timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay;maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration;var flags={};return flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0,flags.hasTransitionAll=flags.hasTransitions&&"all"==timings.transitionProperty,flags.applyTransitionDuration=hasToStyles&&(flags.hasTransitions&&!flags.hasTransitionAll||flags.hasAnimations&&!flags.hasTransitions),flags.applyAnimationDuration=options.duration&&flags.hasAnimations,flags.applyTransitionDelay=truthyTimingValue(options.delay)&&(flags.applyTransitionDuration||flags.hasTransitions),flags.applyAnimationDelay=truthyTimingValue(options.delay)&&flags.hasAnimations,flags.recalculateTimingStyles=addRemoveClassName.length>0,(flags.applyTransitionDuration||flags.applyAnimationDuration)&&(maxDuration=options.duration?parseFloat(options.duration):maxDuration,flags.applyTransitionDuration&&(flags.hasTransitions=!0,timings.transitionDuration=maxDuration,applyOnlyDuration=node.style[TRANSITION_PROP+PROPERTY_KEY].length>0,temporaryStyles.push(getCssTransitionDurationStyle(maxDuration,applyOnlyDuration))),flags.applyAnimationDuration&&(flags.hasAnimations=!0,timings.animationDuration=maxDuration,temporaryStyles.push(getCssKeyframeDurationStyle(maxDuration)))),0!==maxDuration||flags.recalculateTimingStyles?(null==options.duration&&timings.transitionDuration>0&&(flags.recalculateTimingStyles=flags.recalculateTimingStyles||isFirst),maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.skipBlocking||(flags.blockTransition=timings.transitionDuration>0,flags.blockKeyframeAnimation=timings.animationDuration>0&&stagger.animationDelay>0&&0===stagger.animationDuration),applyAnimationFromStyles(element,options),flags.blockTransition||blockTransitions(node,!1),applyBlocking(maxDuration),{$$willAnimate:!0,end:endFn,start:function(){return animationClosed?void 0:(runnerHost={end:endFn,cancel:cancelFn,resume:null,pause:null},runner=new $$AnimateRunner(runnerHost),waitUntilQuiet(start),runner)}}):closeAndReturnNoopAnimator()}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite),parentCounter=0,bod=getDomNode($document).body,rafWaitQueue=[];return init}]}],$$AnimateCssDriverProvider=["$$animationProvider",function($$animationProvider){$$animationProvider.drivers.push("$$animateCssDriver");var NG_ANIMATE_SHIM_CLASS_NAME="ng-animate-shim",NG_ANIMATE_ANCHOR_CLASS_NAME="ng-anchor",NG_OUT_ANCHOR_CLASS_NAME="ng-anchor-out",NG_IN_ANCHOR_CLASS_NAME="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$document","$sniffer",function($animateCss,$rootScope,$$AnimateRunner,$rootElement,$document,$sniffer){function filterCssClasses(classes){return classes.replace(/\bng-\S+\b/g,"")}function getUniqueValues(a,b){return isString(a)&&(a=a.split(" ")),isString(b)&&(b=b.split(" ")),a.filter(function(val){return-1===b.indexOf(val)}).join(" ")}function prepareAnchoredAnimation(classes,outAnchor,inAnchor){function calculateAnchorStyles(anchor){var styles={},coords=getDomNode(anchor).getBoundingClientRect();return forEach(["width","height","top","left"],function(key){var value=coords[key];switch(key){case"top":value+=bodyNode.scrollTop;break;case"left":value+=bodyNode.scrollLeft}styles[key]=Math.floor(value)+"px"}),styles}function prepareOutAnimation(){var animator=$animateCss(clone,{addClass:NG_OUT_ANCHOR_CLASS_NAME,delay:!0,from:calculateAnchorStyles(outAnchor)});return animator.$$willAnimate?animator:null}function getClassVal(element){return element.attr("class")||""}function prepareInAnimation(){var endingClasses=filterCssClasses(getClassVal(inAnchor)),toAdd=getUniqueValues(endingClasses,startingClasses),toRemove=getUniqueValues(startingClasses,endingClasses),animator=$animateCss(clone,{to:calculateAnchorStyles(inAnchor),addClass:NG_IN_ANCHOR_CLASS_NAME+" "+toAdd,removeClass:NG_OUT_ANCHOR_CLASS_NAME+" "+toRemove,delay:!0});return animator.$$willAnimate?animator:null}function end(){clone.remove(),outAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME)}var clone=jqLite(getDomNode(outAnchor).cloneNode(!0)),startingClasses=filterCssClasses(getClassVal(clone));outAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),clone.addClass(NG_ANIMATE_ANCHOR_CLASS_NAME),rootBodyElement.append(clone);var animatorIn,animatorOut=prepareOutAnimation();if(!animatorOut&&(animatorIn=prepareInAnimation(),!animatorIn))return end();var startingAnimator=animatorOut||animatorIn;return{start:function(){function endFn(){currentAnimation&&currentAnimation.end()}var runner,currentAnimation=startingAnimator.start();return currentAnimation.done(function(){return currentAnimation=null,!animatorIn&&(animatorIn=prepareInAnimation())?(currentAnimation=animatorIn.start(),currentAnimation.done(function(){currentAnimation=null,end(),runner.complete()}),currentAnimation):(end(),void runner.complete())}),runner=new $$AnimateRunner({end:endFn,cancel:endFn})}}}function prepareFromToAnchorAnimation(from,to,classes,anchors){var fromAnimation=prepareRegularAnimation(from),toAnimation=prepareRegularAnimation(to),anchorAnimations=[];return forEach(anchors,function(anchor){var outElement=anchor.out,inElement=anchor["in"],animator=prepareAnchoredAnimation(classes,outElement,inElement);animator&&anchorAnimations.push(animator)}),fromAnimation||toAnimation||0!==anchorAnimations.length?{start:function(){function endFn(){forEach(animationRunners,function(runner){runner.end()})}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),forEach(anchorAnimations,function(animation){animationRunners.push(animation.start())});var runner=new $$AnimateRunner({end:endFn,cancel:endFn});return $$AnimateRunner.all(animationRunners,function(status){runner.complete(status)}),runner}}:void 0}function prepareRegularAnimation(animationDetails){var element=animationDetails.element,options=animationDetails.options||{};animationDetails.structural?(options.structural=options.applyClassesEarly=!0,options.event=animationDetails.event,"leave"===options.event&&(options.onDone=options.domOperation)):options.event=null;var animator=$animateCss(element,options);return animator.$$willAnimate?animator:null}if(!$sniffer.animations&&!$sniffer.transitions)return noop;var bodyNode=getDomNode($document).body,rootNode=getDomNode($rootElement),rootBodyElement=jqLite(bodyNode.parentNode===rootNode?bodyNode:rootNode);return function(animationDetails){return animationDetails.from&&animationDetails.to?prepareFromToAnchorAnimation(animationDetails.from,animationDetails.to,animationDetails.classes,animationDetails.anchors):prepareRegularAnimation(animationDetails)}}]}],$$AnimateJsProvider=["$animateProvider",function($animateProvider){this.$get=["$injector","$$AnimateRunner","$$rAFMutex","$$jqLite",function($injector,$$AnimateRunner,$$rAFMutex,$$jqLite){function lookupAnimations(classes){classes=isArray(classes)?classes:classes.split(" ");for(var matches=[],flagMap={},i=0;i<classes.length;i++){var klass=classes[i],animationFactory=$animateProvider.$$registeredAnimations[klass];animationFactory&&!flagMap[klass]&&(matches.push($injector.get(animationFactory)),flagMap[klass]=!0)}return matches}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,classes,options){function applyOptions(){options.domOperation(),applyAnimationClasses(element,options)}function executeAnimationFn(fn,element,event,options,onDone){var args;switch(event){case"animate":args=[element,options.from,options.to,onDone];break;case"setClass":args=[element,classesToAdd,classesToRemove,onDone];break;case"addClass":args=[element,classesToAdd,onDone];break;case"removeClass":args=[element,classesToRemove,onDone];break;default:args=[element,onDone]}args.push(options);var value=fn.apply(fn,args);if(value)if(isFunction(value.start)&&(value=value.start()),value instanceof $$AnimateRunner)value.done(onDone);else if(isFunction(value))return value;return noop}function groupEventedAnimations(element,event,options,animations,fnName){var operations=[];return forEach(animations,function(ani){var animation=ani[fnName];animation&&operations.push(function(){var runner,endProgressCb,resolved=!1,onAnimationComplete=function(rejected){resolved||(resolved=!0,(endProgressCb||noop)(rejected),runner.complete(!rejected))};return runner=new $$AnimateRunner({end:function(){onAnimationComplete()},cancel:function(){onAnimationComplete(!0)}}),endProgressCb=executeAnimationFn(animation,element,event,options,function(result){var cancelled=result===!1;onAnimationComplete(cancelled)}),runner})}),operations}function packageAnimations(element,event,options,animations,fnName){var operations=groupEventedAnimations(element,event,options,animations,fnName);if(0===operations.length){var a,b;"beforeSetClass"===fnName?(a=groupEventedAnimations(element,"removeClass",options,animations,"beforeRemoveClass"),b=groupEventedAnimations(element,"addClass",options,animations,"beforeAddClass")):"setClass"===fnName&&(a=groupEventedAnimations(element,"removeClass",options,animations,"removeClass"),b=groupEventedAnimations(element,"addClass",options,animations,"addClass")),a&&(operations=operations.concat(a)),b&&(operations=operations.concat(b))}if(0!==operations.length)return function(callback){var runners=[];return operations.length&&forEach(operations,function(animateFn){runners.push(animateFn())}),runners.length?$$AnimateRunner.all(runners,callback):callback(),function(reject){forEach(runners,function(runner){reject?runner.cancel():runner.end()})}}}3===arguments.length&&isObject(classes)&&(options=classes,classes=null),options=prepareAnimationOptions(options),classes||(classes=element.attr("class")||"",options.addClass&&(classes+=" "+options.addClass),options.removeClass&&(classes+=" "+options.removeClass));var before,after,classesToAdd=options.addClass,classesToRemove=options.removeClass,animations=lookupAnimations(classes);if(animations.length){var afterFn,beforeFn;"leave"==event?(beforeFn="leave",afterFn="afterLeave"):(beforeFn="before"+event.charAt(0).toUpperCase()+event.substr(1),afterFn=event),"enter"!==event&&"move"!==event&&(before=packageAnimations(element,event,options,animations,beforeFn)),after=packageAnimations(element,event,options,animations,afterFn)}return before||after?{start:function(){function onComplete(success){animationClosed=!0,applyOptions(),applyAnimationStyles(element,options),runner.complete(success)}function endAnimations(cancelled){animationClosed||((closeActiveAnimations||noop)(cancelled),onComplete(cancelled))}var closeActiveAnimations,chain=[];before&&chain.push(function(fn){closeActiveAnimations=before(fn)}),chain.length?chain.push(function(fn){applyOptions(),fn(!0)}):applyOptions(),after&&chain.push(function(fn){closeActiveAnimations=after(fn)});var animationClosed=!1,runner=new $$AnimateRunner({end:function(){endAnimations()},cancel:function(){endAnimations(!0)}});return $$AnimateRunner.chain(chain,onComplete),runner}}:void 0}}]}],$$AnimateJsDriverProvider=["$$animationProvider",function($$animationProvider){$$animationProvider.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function($$animateJs,$$AnimateRunner){function prepareAnimation(animationDetails){var element=animationDetails.element,event=animationDetails.event,options=animationDetails.options,classes=animationDetails.classes;return $$animateJs(element,event,classes,options)}return function(animationDetails){if(animationDetails.from&&animationDetails.to){var fromAnimation=prepareAnimation(animationDetails.from),toAnimation=prepareAnimation(animationDetails.to);if(!fromAnimation&&!toAnimation)return;return{start:function(){function endFnFactory(){return function(){forEach(animationRunners,function(runner){runner.end()})}}function done(status){runner.complete(status)}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),$$AnimateRunner.all(animationRunners,done);var runner=new $$AnimateRunner({end:endFnFactory(),cancel:endFnFactory()});return runner}}}return prepareAnimation(animationDetails)}}]}],NG_ANIMATE_ATTR_NAME="data-ng-animate",NG_ANIMATE_PIN_DATA="$ngAnimatePin",$$AnimateQueueProvider=["$animateProvider",function($animateProvider){function isAllowed(ruleType,element,currentAnimation,previousAnimation){return rules[ruleType].some(function(fn){return fn(element,currentAnimation,previousAnimation)})}function hasAnimationClasses(options,and){options=options||{};var a=(options.addClass||"").length>0,b=(options.removeClass||"").length>0;return and?a&&b:a||b}var PRE_DIGEST_STATE=1,RUNNING_STATE=2,rules=this.rules={skip:[],cancel:[],join:[]};rules.join.push(function(element,newAnimation,currentAnimation){return!newAnimation.structural&&hasAnimationClasses(newAnimation.options)}),rules.skip.push(function(element,newAnimation,currentAnimation){return!newAnimation.structural&&!hasAnimationClasses(newAnimation.options)}),rules.skip.push(function(element,newAnimation,currentAnimation){return"leave"==currentAnimation.event&&newAnimation.structural}),rules.skip.push(function(element,newAnimation,currentAnimation){return currentAnimation.structural&&!newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){return currentAnimation.structural&&newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){return currentAnimation.state===RUNNING_STATE&&newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){var nO=newAnimation.options,cO=currentAnimation.options;return nO.addClass&&nO.addClass===cO.removeClass||nO.removeClass&&nO.removeClass===cO.addClass}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite",function($$rAF,$rootScope,$rootElement,$document,$$HashMap,$$animation,$$AnimateRunner,$templateRequest,$$jqLite){function normalizeAnimationOptions(element,options){return mergeAnimationOptions(element,options,{})}function findCallbacks(element,event){var targetNode=getDomNode(element),matches=[],entries=callbackRegistry[event];return entries&&forEach(entries,function(entry){entry.node.contains(targetNode)&&matches.push(entry.callback)}),matches}function triggerCallback(event,element,phase,data){$$rAF(function(){forEach(findCallbacks(element,event),function(callback){callback(element,phase,data)})})}function queueAnimation(element,event,options){function notifyProgress(runner,event,phase,data){triggerCallback(event,element,phase,data),runner.progress(event,phase,data)}function close(reject){applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),runner.complete(!reject)}var node,parent;element=stripCommentsFromElement(element),element&&(node=getDomNode(element),parent=element.parent()),options=prepareAnimationOptions(options);var runner=new $$AnimateRunner;if(!node)return close(),runner;isArray(options.addClass)&&(options.addClass=options.addClass.join(" ")),isArray(options.removeClass)&&(options.removeClass=options.removeClass.join(" ")),options.from&&!isObject(options.from)&&(options.from=null),options.to&&!isObject(options.to)&&(options.to=null);var className=[node.className,options.addClass,options.removeClass].join(" ");if(!isAnimatableClassName(className))return close(),runner;var isStructural=["enter","move","leave"].indexOf(event)>=0,skipAnimations=!animationsEnabled||disabledElementsLookup.get(node),existingAnimation=!skipAnimations&&activeAnimationsLookup.get(node)||{},hasExistingAnimation=!!existingAnimation.state;if(skipAnimations||hasExistingAnimation&&existingAnimation.state==PRE_DIGEST_STATE||(skipAnimations=!areAnimationsAllowed(element,parent,event)),skipAnimations)return close(),runner;isStructural&&closeChildAnimations(element);var newAnimation={structural:isStructural,element:element,event:event,close:close,options:options,runner:runner};if(hasExistingAnimation){var skipAnimationFlag=isAllowed("skip",element,newAnimation,existingAnimation);if(skipAnimationFlag)return existingAnimation.state===RUNNING_STATE?(close(),runner):(mergeAnimationOptions(element,existingAnimation.options,options),existingAnimation.runner);var cancelAnimationFlag=isAllowed("cancel",element,newAnimation,existingAnimation);if(cancelAnimationFlag)existingAnimation.state===RUNNING_STATE?existingAnimation.runner.end():existingAnimation.structural?existingAnimation.close():mergeAnimationOptions(element,newAnimation.options,existingAnimation.options);else{var joinAnimationFlag=isAllowed("join",element,newAnimation,existingAnimation);if(joinAnimationFlag){if(existingAnimation.state!==RUNNING_STATE)return event=newAnimation.event=existingAnimation.event,options=mergeAnimationOptions(element,existingAnimation.options,newAnimation.options),runner;normalizeAnimationOptions(element,options)}}}else normalizeAnimationOptions(element,options);var isValidAnimation=newAnimation.structural;if(isValidAnimation||(isValidAnimation="animate"===newAnimation.event&&Object.keys(newAnimation.options.to||{}).length>0||hasAnimationClasses(newAnimation.options)),!isValidAnimation)return close(),clearElementAnimationState(element),runner;isStructural&&closeParentClassBasedAnimations(parent);var counter=(existingAnimation.counter||0)+1;return newAnimation.counter=counter,markElementAnimationState(element,PRE_DIGEST_STATE,newAnimation),$rootScope.$$postDigest(function(){var animationDetails=activeAnimationsLookup.get(node),animationCancelled=!animationDetails;animationDetails=animationDetails||{};var parentElement=element.parent()||[],isValidAnimation=parentElement.length>0&&("animate"===animationDetails.event||animationDetails.structural||hasAnimationClasses(animationDetails.options));if(animationCancelled||animationDetails.counter!==counter||!isValidAnimation)return animationCancelled&&(applyAnimationClasses(element,options),applyAnimationStyles(element,options)),(animationCancelled||isStructural&&animationDetails.event!==event)&&(options.domOperation(),runner.end()),void(isValidAnimation||clearElementAnimationState(element));event=!animationDetails.structural&&hasAnimationClasses(animationDetails.options,!0)?"setClass":animationDetails.event,animationDetails.structural&&closeParentClassBasedAnimations(parentElement),markElementAnimationState(element,RUNNING_STATE);var realRunner=$$animation(element,event,animationDetails.options);realRunner.done(function(status){close(!status);var animationDetails=activeAnimationsLookup.get(node);animationDetails&&animationDetails.counter===counter&&clearElementAnimationState(getDomNode(element)),notifyProgress(runner,event,"close",{})}),runner.setHost(realRunner),notifyProgress(runner,event,"start",{})}),runner}function closeChildAnimations(element){var node=getDomNode(element),children=node.querySelectorAll("["+NG_ANIMATE_ATTR_NAME+"]");forEach(children,function(child){var state=parseInt(child.getAttribute(NG_ANIMATE_ATTR_NAME)),animationDetails=activeAnimationsLookup.get(child);switch(state){case RUNNING_STATE:animationDetails.runner.end();case PRE_DIGEST_STATE:animationDetails&&activeAnimationsLookup.remove(child)}})}function clearElementAnimationState(element){var node=getDomNode(element);node.removeAttribute(NG_ANIMATE_ATTR_NAME),activeAnimationsLookup.remove(node)}function isMatchingElement(nodeOrElmA,nodeOrElmB){return getDomNode(nodeOrElmA)===getDomNode(nodeOrElmB)}function closeParentClassBasedAnimations(startingElement){function examineParentAnimation(node,animationDetails){!animationDetails.structural&&hasAnimationClasses(animationDetails.options)&&(animationDetails.state===RUNNING_STATE&&animationDetails.runner.end(),clearElementAnimationState(node))}for(var parentNode=getDomNode(startingElement);;){if(!parentNode||parentNode.nodeType!==ELEMENT_NODE)break;var animationDetails=activeAnimationsLookup.get(parentNode);animationDetails&&examineParentAnimation(parentNode,animationDetails),parentNode=parentNode.parentNode}}function areAnimationsAllowed(element,parentElement,event){var animateChildren,bodyElementDetected=!1,rootElementDetected=!1,parentAnimationDetected=!1,parentHost=element.data(NG_ANIMATE_PIN_DATA);for(parentHost&&(parentElement=parentHost);parentElement&&parentElement.length;){rootElementDetected||(rootElementDetected=isMatchingElement(parentElement,$rootElement));var parentNode=parentElement[0];if(parentNode.nodeType!==ELEMENT_NODE)break;var details=activeAnimationsLookup.get(parentNode)||{};if(parentAnimationDetected||(parentAnimationDetected=details.structural||disabledElementsLookup.get(parentNode)),isUndefined(animateChildren)||animateChildren===!0){var value=parentElement.data(NG_ANIMATE_CHILDREN_DATA);isDefined(value)&&(animateChildren=value)}if(parentAnimationDetected&&animateChildren===!1)break;rootElementDetected||(rootElementDetected=isMatchingElement(parentElement,$rootElement),rootElementDetected||(parentHost=parentElement.data(NG_ANIMATE_PIN_DATA),parentHost&&(parentElement=parentHost))),bodyElementDetected||(bodyElementDetected=isMatchingElement(parentElement,bodyElement)),parentElement=parentElement.parent()}var allowAnimation=!parentAnimationDetected||animateChildren;return allowAnimation&&rootElementDetected&&bodyElementDetected}function markElementAnimationState(element,state,details){details=details||{},details.state=state;var node=getDomNode(element);node.setAttribute(NG_ANIMATE_ATTR_NAME,state);var oldValue=activeAnimationsLookup.get(node),newValue=oldValue?extend(oldValue,details):details;activeAnimationsLookup.put(node,newValue)}var activeAnimationsLookup=new $$HashMap,disabledElementsLookup=new $$HashMap,animationsEnabled=null,deregisterWatch=$rootScope.$watch(function(){return 0===$templateRequest.totalPendingRequests},function(isEmpty){isEmpty&&(deregisterWatch(),$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){null===animationsEnabled&&(animationsEnabled=!0)})}))}),bodyElement=jqLite($document[0].body),callbackRegistry={},classNameFilter=$animateProvider.classNameFilter(),isAnimatableClassName=classNameFilter?function(className){return classNameFilter.test(className)}:function(){return!0},applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return{on:function(event,container,callback){var node=extractElementNode(container);callbackRegistry[event]=callbackRegistry[event]||[],callbackRegistry[event].push({node:node,callback:callback})},off:function(event,container,callback){function filterFromRegistry(list,matchContainer,matchCallback){var containerNode=extractElementNode(matchContainer);return list.filter(function(entry){var isMatch=entry.node===containerNode&&(!matchCallback||entry.callback===matchCallback);return!isMatch})}var entries=callbackRegistry[event];entries&&(callbackRegistry[event]=1===arguments.length?null:filterFromRegistry(entries,container,callback))},pin:function(element,parentElement){assertArg(isElement(element),"element","not an element"),assertArg(isElement(parentElement),"parentElement","not an element"),element.data(NG_ANIMATE_PIN_DATA,parentElement)},push:function(element,event,options,domOperation){return options=options||{},options.domOperation=domOperation,queueAnimation(element,event,options)},enabled:function(element,bool){var argCount=arguments.length;if(0===argCount)bool=!!animationsEnabled;else{var hasElement=isElement(element);if(hasElement){var node=getDomNode(element),recordExists=disabledElementsLookup.get(node);1===argCount?bool=!recordExists:(bool=!!bool,bool?recordExists&&disabledElementsLookup.remove(node):disabledElementsLookup.put(node,!0))}else bool=animationsEnabled=!!element}return bool}}}]}],$$rAFMutexFactory=["$$rAF",function($$rAF){return function(){var passed=!1;return $$rAF(function(){passed=!0}),function(fn){passed?fn():$$rAF(fn)}}}],$$AnimateRunnerFactory=["$q","$$rAFMutex",function($q,$$rAFMutex){function AnimateRunner(host){this.setHost(host),this._doneCallbacks=[],this._runInAnimationFrame=$$rAFMutex(),this._state=0}var INITIAL_STATE=0,DONE_PENDING_STATE=1,DONE_COMPLETE_STATE=2;return AnimateRunner.chain=function(chain,callback){function next(){return index===chain.length?void callback(!0):void chain[index](function(response){return response===!1?void callback(!1):(index++,void next())})}var index=0;next()},AnimateRunner.all=function(runners,callback){function onProgress(response){status=status&&response,++count===runners.length&&callback(status)}var count=0,status=!0;
forEach(runners,function(runner){runner.done(onProgress)})},AnimateRunner.prototype={setHost:function(host){this.host=host||{}},done:function(fn){this._state===DONE_COMPLETE_STATE?fn():this._doneCallbacks.push(fn)},progress:noop,getPromise:function(){if(!this.promise){var self=this;this.promise=$q(function(resolve,reject){self.done(function(status){status===!1?reject():resolve()})})}return this.promise},then:function(resolveHandler,rejectHandler){return this.getPromise().then(resolveHandler,rejectHandler)},catch:function(handler){return this.getPromise()["catch"](handler)},finally:function(handler){return this.getPromise()["finally"](handler)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(response){var self=this;self._state===INITIAL_STATE&&(self._state=DONE_PENDING_STATE,self._runInAnimationFrame(function(){self._resolve(response)}))},_resolve:function(response){this._state!==DONE_COMPLETE_STATE&&(forEach(this._doneCallbacks,function(fn){fn(response)}),this._doneCallbacks.length=0,this._state=DONE_COMPLETE_STATE)}},AnimateRunner}],$$AnimationProvider=["$animateProvider",function($animateProvider){function setRunner(element,runner){element.data(RUNNER_STORAGE_KEY,runner)}function removeRunner(element){element.removeData(RUNNER_STORAGE_KEY)}function getRunner(element){return element.data(RUNNER_STORAGE_KEY)}var NG_ANIMATE_REF_ATTR="ng-animate-ref",drivers=this.drivers=[],RUNNER_STORAGE_KEY="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$rAFScheduler",function($$jqLite,$rootScope,$injector,$$AnimateRunner,$$rAFScheduler){var animationQueue=[],applyAnimationClasses=applyAnimationClassesFactory($$jqLite),totalPendingClassBasedAnimations=0,totalActiveClassBasedAnimations=0,classBasedAnimationsQueue=[];return function(element,event,options){function getAnchorNodes(node){var SELECTOR="["+NG_ANIMATE_REF_ATTR+"]",items=node.hasAttribute(NG_ANIMATE_REF_ATTR)?[node]:node.querySelectorAll(SELECTOR),anchors=[];return forEach(items,function(node){var attr=node.getAttribute(NG_ANIMATE_REF_ATTR);attr&&attr.length&&anchors.push(node)}),anchors}function groupAnimations(animations){var preparedAnimations=[],refLookup={};forEach(animations,function(animation,index){var element=animation.element,node=getDomNode(element),event=animation.event,enterOrMove=["enter","move"].indexOf(event)>=0,anchorNodes=animation.structural?getAnchorNodes(node):[];if(anchorNodes.length){var direction=enterOrMove?"to":"from";forEach(anchorNodes,function(anchor){var key=anchor.getAttribute(NG_ANIMATE_REF_ATTR);refLookup[key]=refLookup[key]||{},refLookup[key][direction]={animationID:index,element:jqLite(anchor)}})}else preparedAnimations.push(animation)});var usedIndicesLookup={},anchorGroups={};return forEach(refLookup,function(operations,key){var from=operations.from,to=operations.to;if(!from||!to){var index=from?from.animationID:to.animationID,indexKey=index.toString();return void(usedIndicesLookup[indexKey]||(usedIndicesLookup[indexKey]=!0,preparedAnimations.push(animations[index])))}var fromAnimation=animations[from.animationID],toAnimation=animations[to.animationID],lookupKey=from.animationID.toString();if(!anchorGroups[lookupKey]){var group=anchorGroups[lookupKey]={structural:!0,beforeStart:function(){fromAnimation.beforeStart(),toAnimation.beforeStart()},close:function(){fromAnimation.close(),toAnimation.close()},classes:cssClassesIntersection(fromAnimation.classes,toAnimation.classes),from:fromAnimation,to:toAnimation,anchors:[]};group.classes.length?preparedAnimations.push(group):(preparedAnimations.push(fromAnimation),preparedAnimations.push(toAnimation))}anchorGroups[lookupKey].anchors.push({out:from.element,in:to.element})}),preparedAnimations}function cssClassesIntersection(a,b){a=a.split(" "),b=b.split(" ");for(var matches=[],i=0;i<a.length;i++){var aa=a[i];if("ng-"!==aa.substring(0,3))for(var j=0;j<b.length;j++)if(aa===b[j]){matches.push(aa);break}}return matches.join(" ")}function invokeFirstDriver(animationDetails){for(var i=drivers.length-1;i>=0;i--){var driverName=drivers[i];if($injector.has(driverName)){var factory=$injector.get(driverName),driver=factory(animationDetails);if(driver)return driver}}}function beforeStart(){element.addClass(NG_ANIMATE_CLASSNAME),tempClasses&&$$jqLite.addClass(element,tempClasses)}function updateAnimationRunners(animation,newRunner){function update(element){getRunner(element).setHost(newRunner)}animation.from&&animation.to?(update(animation.from.element),update(animation.to.element)):update(animation.element)}function handleDestroyedElement(){var runner=getRunner(element);!runner||"leave"===event&&options.$$domOperationFired||runner.end()}function close(rejected){element.off("$destroy",handleDestroyedElement),removeRunner(element),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),tempClasses&&$$jqLite.removeClass(element,tempClasses),element.removeClass(NG_ANIMATE_CLASSNAME),runner.complete(!rejected)}options=prepareAnimationOptions(options);var isStructural=["enter","move","leave"].indexOf(event)>=0,runner=new $$AnimateRunner({end:function(){close()},cancel:function(){close(!0)}});if(!drivers.length)return close(),runner;setRunner(element,runner);var classes=mergeClasses(element.attr("class"),mergeClasses(options.addClass,options.removeClass)),tempClasses=options.tempClasses;tempClasses&&(classes+=" "+tempClasses,options.tempClasses=null);var classBasedIndex;return isStructural||(classBasedIndex=totalPendingClassBasedAnimations,totalPendingClassBasedAnimations+=1),animationQueue.push({element:element,classes:classes,event:event,classBasedIndex:classBasedIndex,structural:isStructural,options:options,beforeStart:beforeStart,close:close}),element.on("$destroy",handleDestroyedElement),animationQueue.length>1?runner:($rootScope.$$postDigest(function(){totalActiveClassBasedAnimations=totalPendingClassBasedAnimations,totalPendingClassBasedAnimations=0,classBasedAnimationsQueue.length=0;var animations=[];forEach(animationQueue,function(entry){getRunner(entry.element)&&animations.push(entry)}),animationQueue.length=0,forEach(groupAnimations(animations),function(animationEntry){function triggerAnimationStart(){animationEntry.beforeStart();var startAnimationFn,closeFn=animationEntry.close,targetElement=animationEntry.anchors?animationEntry.from.element||animationEntry.to.element:animationEntry.element;if(getRunner(targetElement)&&getDomNode(targetElement).parentNode){var operation=invokeFirstDriver(animationEntry);operation&&(startAnimationFn=operation.start)}if(startAnimationFn){var animationRunner=startAnimationFn();animationRunner.done(function(status){closeFn(!status)}),updateAnimationRunners(animationEntry,animationRunner)}else closeFn()}animationEntry.structural?triggerAnimationStart():(classBasedAnimationsQueue.push({node:getDomNode(animationEntry.element),fn:triggerAnimationStart}),animationEntry.classBasedIndex===totalActiveClassBasedAnimations-1&&(classBasedAnimationsQueue=classBasedAnimationsQueue.sort(function(a,b){return b.node.contains(a.node)}).map(function(entry){return entry.fn}),$$rAFScheduler(classBasedAnimationsQueue)))})}),runner)}}]}];angular.module("ngAnimate",[]).directive("ngAnimateChildren",$$AnimateChildrenDirective).factory("$$rAFMutex",$$rAFMutexFactory).factory("$$rAFScheduler",$$rAFSchedulerFactory).factory("$$AnimateRunner",$$AnimateRunnerFactory).provider("$$animateQueue",$$AnimateQueueProvider).provider("$$animation",$$AnimationProvider).provider("$animateCss",$AnimateCssProvider).provider("$$animateCssDriver",$$AnimateCssDriverProvider).provider("$$animateJs",$$AnimateJsProvider).provider("$$animateJsDriver",$$AnimateJsDriverProvider)}(window,window.angular),define("angularAnimate",["angular"],function(){}),function(window,angular,undefined){"use strict";function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[],writer=htmlSanitizeWriter(buf,angular.noop);return writer.chars(chars),buf.join("")}function makeMap(str,lowercaseKeys){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[lowercaseKeys?angular.lowercase(items[i]):items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),unary=voidElements[tagName]||!!unary,unary||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}"string"!=typeof html&&(html=null===html||"undefined"==typeof html?"":""+html);var index,chars,match,text,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(text="",chars=!0,stack.last()&&specialElements[stack.last()]?(html=html.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last())):(0===html.indexOf("<!--")?(index=html.indexOf("--",4),index>=0&&html.lastIndexOf("-->",index)===index&&(handler.comment&&handler.comment(html.substring(4,index)),html=html.substring(index+3),chars=!1)):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP),match&&(html=html.replace(match[0],""),chars=!1)):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1)):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match?(match[4]&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag)),chars=!1):(text+="<",html=html.substring(1))),chars&&(index=html.indexOf("<"),text+=0>index?html:html.substring(0,index),html=0>index?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text)))),html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){return value?(hiddenPre.innerHTML=value.replace(/</g,"&lt;"),hiddenPre.textContent):""}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){var hi=value.charCodeAt(0),low=value.charCodeAt(1);return"&#"+(1024*(hi-55296)+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;validAttrs[lkey]!==!0||uriAttrs[lkey]===!0&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},end:function(tag){tag=angular.lowercase(tag),ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=makeMap("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use"),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements,svgElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap,xlink:href"),htmlAttrs=makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),svgAttrs=makeMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),validAttrs=angular.extend({},uriAttrs,svgAttrs,htmlAttrs),hiddenPre=document.createElement("pre");angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/i,MAILTO_REGEXP=/^mailto:/i;return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){html.push("<a "),angular.isDefined(target)&&html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),define("angularSanitize",["angular"],function(){}),function(window,angular,undefined){"use strict";function makeSwipeDirective(directiveName,direction,eventName){ngTouch.directive(directiveName,["$parse","$swipe",function($parse,$swipe){var MAX_VERTICAL_DISTANCE=75,MAX_VERTICAL_RATIO=.3,MIN_HORIZONTAL_DISTANCE=30;return function(scope,element,attr){function validSwipe(coords){if(!startCoords)return!1;var deltaY=Math.abs(coords.y-startCoords.y),deltaX=(coords.x-startCoords.x)*direction;return valid&&MAX_VERTICAL_DISTANCE>deltaY&&deltaX>0&&deltaX>MIN_HORIZONTAL_DISTANCE&&MAX_VERTICAL_RATIO>deltaY/deltaX}var startCoords,valid,swipeHandler=$parse(attr[directiveName]),pointerTypes=["touch"];angular.isDefined(attr.ngSwipeDisableMouse)||pointerTypes.push("mouse"),$swipe.bind(element,{start:function(coords,event){startCoords=coords,valid=!0},cancel:function(event){valid=!1},end:function(coords,event){validSwipe(coords)&&scope.$apply(function(){element.triggerHandler(eventName),swipeHandler(scope,{$event:event})})}},pointerTypes)}}])}var ngTouch=angular.module("ngTouch",[]);ngTouch.factory("$swipe",[function(){function getCoordinates(event){var touches=event.touches&&event.touches.length?event.touches:[event],e=event.changedTouches&&event.changedTouches[0]||event.originalEvent&&event.originalEvent.changedTouches&&event.originalEvent.changedTouches[0]||touches[0].originalEvent||touches[0];return{x:e.clientX,y:e.clientY}}function getEvents(pointerTypes,eventType){var res=[];return angular.forEach(pointerTypes,function(pointerType){var eventName=POINTER_EVENTS[pointerType][eventType];eventName&&res.push(eventName)}),res.join(" ")}var MOVE_BUFFER_RADIUS=10,POINTER_EVENTS={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(element,eventHandlers,pointerTypes){var totalX,totalY,startCoords,lastPos,active=!1;pointerTypes=pointerTypes||["mouse","touch"],element.on(getEvents(pointerTypes,"start"),function(event){startCoords=getCoordinates(event),active=!0,totalX=0,totalY=0,lastPos=startCoords,eventHandlers.start&&eventHandlers.start(startCoords,event)});var events=getEvents(pointerTypes,"cancel");events&&element.on(events,function(event){active=!1,eventHandlers.cancel&&eventHandlers.cancel(event)}),element.on(getEvents(pointerTypes,"move"),function(event){if(active&&startCoords){var coords=getCoordinates(event);if(totalX+=Math.abs(coords.x-lastPos.x),totalY+=Math.abs(coords.y-lastPos.y),lastPos=coords,!(MOVE_BUFFER_RADIUS>totalX&&MOVE_BUFFER_RADIUS>totalY))return totalY>totalX?(active=!1,void(eventHandlers.cancel&&eventHandlers.cancel(event))):(event.preventDefault(),void(eventHandlers.move&&eventHandlers.move(coords,event)))}}),element.on(getEvents(pointerTypes,"end"),function(event){active&&(active=!1,eventHandlers.end&&eventHandlers.end(getCoordinates(event),event))})}}}]),ngTouch.config(["$provide",function($provide){$provide.decorator("ngClickDirective",["$delegate",function($delegate){return $delegate.shift(),$delegate}])}]),ngTouch.directive("ngClick",["$parse","$timeout","$rootElement",function($parse,$timeout,$rootElement){function hit(x1,y1,x2,y2){return Math.abs(x1-x2)<CLICKBUSTER_THRESHOLD&&Math.abs(y1-y2)<CLICKBUSTER_THRESHOLD}function checkAllowableRegions(touchCoordinates,x,y){for(var i=0;i<touchCoordinates.length;i+=2)if(hit(touchCoordinates[i],touchCoordinates[i+1],x,y))return touchCoordinates.splice(i,i+2),!0;return!1}function onClick(event){if(!(Date.now()-lastPreventedTime>PREVENT_DURATION)){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;1>x&&1>y||lastLabelClickCoordinates&&lastLabelClickCoordinates[0]===x&&lastLabelClickCoordinates[1]===y||(lastLabelClickCoordinates&&(lastLabelClickCoordinates=null),"label"===event.target.tagName.toLowerCase()&&(lastLabelClickCoordinates=[x,y]),checkAllowableRegions(touchCoordinates,x,y)||(event.stopPropagation(),event.preventDefault(),event.target&&event.target.blur()))}}function onTouchStart(event){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;touchCoordinates.push(x,y),$timeout(function(){for(var i=0;i<touchCoordinates.length;i+=2)if(touchCoordinates[i]==x&&touchCoordinates[i+1]==y)return void touchCoordinates.splice(i,i+2)},PREVENT_DURATION,!1)}function preventGhostClick(x,y){touchCoordinates||($rootElement[0].addEventListener("click",onClick,!0),$rootElement[0].addEventListener("touchstart",onTouchStart,!0),touchCoordinates=[]),lastPreventedTime=Date.now(),checkAllowableRegions(touchCoordinates,x,y)}var lastPreventedTime,touchCoordinates,lastLabelClickCoordinates,TAP_DURATION=750,MOVE_TOLERANCE=12,PREVENT_DURATION=2500,CLICKBUSTER_THRESHOLD=25,ACTIVE_CLASS_NAME="ng-click-active";return function(scope,element,attr){function resetState(){tapping=!1,element.removeClass(ACTIVE_CLASS_NAME)}var tapElement,startTime,touchStartX,touchStartY,clickHandler=$parse(attr.ngClick),tapping=!1;element.on("touchstart",function(event){tapping=!0,tapElement=event.target?event.target:event.srcElement,3==tapElement.nodeType&&(tapElement=tapElement.parentNode),element.addClass(ACTIVE_CLASS_NAME),startTime=Date.now();var touches=event.touches&&event.touches.length?event.touches:[event],e=touches[0].originalEvent||touches[0];touchStartX=e.clientX,touchStartY=e.clientY}),element.on("touchmove",function(event){resetState()}),element.on("touchcancel",function(event){resetState()}),element.on("touchend",function(event){var diff=Date.now()-startTime,touches=event.changedTouches&&event.changedTouches.length?event.changedTouches:event.touches&&event.touches.length?event.touches:[event],e=touches[0].originalEvent||touches[0],x=e.clientX,y=e.clientY,dist=Math.sqrt(Math.pow(x-touchStartX,2)+Math.pow(y-touchStartY,2));tapping&&TAP_DURATION>diff&&MOVE_TOLERANCE>dist&&(preventGhostClick(x,y),tapElement&&tapElement.blur(),angular.isDefined(attr.disabled)&&attr.disabled!==!1||element.triggerHandler("click",[event])),resetState()}),element.onclick=function(event){},element.on("click",function(event,touchend){scope.$apply(function(){clickHandler(scope,{$event:touchend||event})})}),element.on("mousedown",function(event){element.addClass(ACTIVE_CLASS_NAME)}),element.on("mousemove mouseup",function(event){element.removeClass(ACTIVE_CLASS_NAME)})}}]),makeSwipeDirective("ngSwipeLeft",-1,"swipeleft"),makeSwipeDirective("ngSwipeRight",1,"swiperight")}(window,window.angular),define("angularTouch",function(){}),function(){function CollectionRepeatDirective($ionicCollectionManager,$parse,$window,$$rAF,$rootScope,$timeout){function postLink(scope,element,attr,scrollCtrl,transclude){function onResize(){changeValidator.resizeRequiresRefresh(scrollView.__clientWidth,scrollView.__clientHeight)&&refreshDimensions()}function makeChangeValidator(){var self;return self={dataLength:0,width:0,height:0,resizeRequiresRefresh:function(newWidth,newHeight){var requiresRefresh=self.dataLength&&newWidth&&newHeight&&(newWidth!==self.width||newHeight!==self.height);return self.width=newWidth,self.height=newHeight,!!requiresRefresh},dataChangeRequiresRefresh:function(newData){var requiresRefresh=newData.length>0||newData.length<self.dataLength;return self.dataLength=newData.length,!!requiresRefresh}}}function getRepeatManager(){return repeatManager||(repeatManager=new $ionicCollectionManager({afterItemsNode:afterItemsContainer[0],containerNode:containerNode,heightData:heightData,widthData:widthData,forceRefreshImages:!(!isDefined(attr.forceRefreshImages)||"false"===attr.forceRefreshImages),keyExpression:keyExpr,renderBuffer:renderBuffer,scope:scope,scrollView:scrollCtrl.scrollView,transclude:transclude}))}function initAfterItemsContainer(){var container=angular.element(scrollView.__content.querySelector(".collection-repeat-after-container"));if(!container.length){var elementIsAfterRepeater=!1,afterNodes=[].filter.call(scrollView.__content.childNodes,function(node){return ionic.DomUtil.contains(node,containerNode)?(elementIsAfterRepeater=!0,!1):elementIsAfterRepeater});container=angular.element('<span class="collection-repeat-after-container">'),scrollView.options.scrollingX&&container.addClass("horizontal"),container.append(afterNodes),scrollView.__content.appendChild(container[0])}return container}function initDimensions(){heightExpr?parseDimensionAttr(heightExpr,heightData):heightData.computed=!0,widthExpr?parseDimensionAttr(widthExpr,widthData):widthData.computed=!0}function refreshDimensions(){var hasData=data.length>0;if(hasData&&(heightData.computed||widthData.computed)&&computeStyleDimensions(),hasData&&heightData.computed){if(heightData.value=computedStyleDimensions.height,!heightData.value)throw new Error('collection-repeat tried to compute the height of repeated elements "'+repeatExpr+'", but was unable to. Please provide the "item-height" attribute. http://ionicframework.com/docs/api/directive/collectionRepeat/')}else!heightData.dynamic&&heightData.getValue&&(heightData.value=heightData.getValue());if(hasData&&widthData.computed){if(widthData.value=computedStyleDimensions.width,!widthData.value)throw new Error('collection-repeat tried to compute the width of repeated elements "'+repeatExpr+'", but was unable to. Please provide the "item-width" attribute. http://ionicframework.com/docs/api/directive/collectionRepeat/')}else!widthData.dynamic&&widthData.getValue&&(widthData.value=widthData.getValue());getRepeatManager().refreshLayout()}function parseDimensionAttr(attrValue,dimensionData){if(attrValue){var parsedValue;try{parsedValue=$parse(attrValue)}catch(e){attrValue.trim().match(/\d+(px|%)$/)&&(attrValue='"'+attrValue+'"'),parsedValue=$parse(attrValue)}var constantAttrValue=attrValue.replace(/(\'|\"|px|%)/g,"").trim(),isConstant=constantAttrValue.length&&!/([a-zA-Z]|\$|:|\?)/.test(constantAttrValue);if(dimensionData.attrValue=attrValue,isConstant){var intValue=parseInt(parsedValue());if(attrValue.indexOf("%")>-1){var decimalValue=intValue/100;dimensionData.getValue=dimensionData===heightData?function(){return Math.floor(decimalValue*scrollView.__clientHeight)}:function(){return Math.floor(decimalValue*scrollView.__clientWidth)}}else dimensionData.value=intValue}else dimensionData.dynamic=!0,dimensionData.getValue=dimensionData===heightData?function(scope,locals){var result=parsedValue(scope,locals);return result.charAt&&"%"===result.charAt(result.length-1)?Math.floor(parseInt(result)/100*scrollView.__clientHeight):parseInt(result)}:function(scope,locals){var result=parsedValue(scope,locals);return result.charAt&&"%"===result.charAt(result.length-1)?Math.floor(parseInt(result)/100*scrollView.__clientWidth):parseInt(result)}}}function computeStyleDimensions(){computedStyleNode||transclude(computedStyleScope=scope.$new(),function(clone){clone[0].removeAttribute("collection-repeat"),computedStyleNode=clone[0]}),computedStyleScope[keyExpr]=(listGetter(scope)||[])[0],$rootScope.$$phase||computedStyleScope.$digest(),containerNode.appendChild(computedStyleNode);var style=$window.getComputedStyle(computedStyleNode);computedStyleDimensions.width=parseInt(style.width),computedStyleDimensions.height=parseInt(style.height),containerNode.removeChild(computedStyleNode)}var scrollView=scrollCtrl.scrollView,node=element[0],containerNode=angular.element('<div class="collection-repeat-container">')[0];if(node.parentNode.replaceChild(containerNode,node),scrollView.options.scrollingX&&scrollView.options.scrollingY)throw new Error("collection-repeat expected a parent x or y scrollView, not an xy scrollView.");var repeatExpr=attr.collectionRepeat,match=repeatExpr.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw new Error("collection-repeat expected expression in form of '_item_ in _collection_[ track by _id_]' but got '"+attr.collectionRepeat+"'.");var repeatManager,keyExpr=match[1],listExpr=match[2],listGetter=$parse(listExpr),heightData={},widthData={},computedStyleDimensions={},data=[],renderBufferExpr=attr.itemRenderBuffer||attr.collectionBufferSize,renderBuffer=angular.isDefined(renderBufferExpr)?parseInt(renderBufferExpr):DEFAULT_RENDER_BUFFER,heightExpr=attr.itemHeight||attr.collectionItemHeight,widthExpr=attr.itemWidth||attr.collectionItemWidth,afterItemsContainer=initAfterItemsContainer(),changeValidator=makeChangeValidator();initDimensions(),scrollCtrl.$element.on("scroll-resize",refreshDimensions),angular.element($window).on("resize",onResize);var unlistenToExposeAside=$rootScope.$on("$ionicExposeAside",ionic.animationFrameThrottle(function(){scrollCtrl.scrollView.resize(),onResize()}));$timeout(refreshDimensions,0,!1),scope.$watchCollection(listGetter,function(newValue){if(data=newValue||(newValue=[]),!angular.isArray(newValue))throw new Error("collection-repeat expected an array for '"+listExpr+"', but got a "+typeof value);scope.$$postDigest(function(){getRepeatManager().setData(data),changeValidator.dataChangeRequiresRefresh(data)&&refreshDimensions()})}),scope.$on("$destroy",function(){angular.element($window).off("resize",onResize),unlistenToExposeAside(),scrollCtrl.$element&&scrollCtrl.$element.off("scroll-resize",refreshDimensions),computedStyleNode&&computedStyleNode.parentNode&&computedStyleNode.parentNode.removeChild(computedStyleNode),computedStyleScope&&computedStyleScope.$destroy(),computedStyleScope=computedStyleNode=null,repeatManager&&repeatManager.destroy(),repeatManager=null});var computedStyleNode,computedStyleScope}return{restrict:"A",priority:1e3,transclude:"element",$$tlb:!0,require:"^^$ionicScroll",link:postLink}}function RepeatManagerFactory($rootScope,$window,$$rAF){var EMPTY_DIMENSION={primaryPos:0,secondaryPos:0,primarySize:0,secondarySize:0,rowPrimarySize:0};return function(options){function forceRerender(){return render(!0)}function render(forceRerender){if(!render.destroyed){var i,ii,item,dim,scope,scrollValue=view.getScrollValue(),scrollValueEnd=scrollValue+view.scrollPrimarySize;view.updateRenderRange(scrollValue,scrollValueEnd),renderStartIndex=Math.max(0,renderStartIndex-renderBuffer),renderEndIndex=Math.min(data.length-1,renderEndIndex+renderBuffer);for(i in itemsShownMap)(renderStartIndex>i||i>renderEndIndex)&&(item=itemsShownMap[i],delete itemsShownMap[i],itemsLeaving.push(item),item.isShown=!1);for(i=renderStartIndex;renderEndIndex>=i;i++)i>=data.length||itemsShownMap[i]&&!forceRerender||(item=itemsShownMap[i]||(itemsShownMap[i]=itemsLeaving.length?itemsLeaving.pop():itemsPool.length?itemsPool.shift():new RepeatItem),itemsEntering.push(item),item.isShown=!0,scope=item.scope,scope.$index=i,scope[keyExpression]=data[i],scope.$first=0===i,scope.$last=i===data.length-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0===(1&i)),scope.$$disconnected&&ionic.Utils.reconnectScope(item.scope),dim=view.getDimensions(i),(item.secondaryPos!==dim.secondaryPos||item.primaryPos!==dim.primaryPos)&&(item.node.style[ionic.CSS.TRANSFORM]=TRANSLATE_TEMPLATE_STR.replace(PRIMARY,item.primaryPos=dim.primaryPos).replace(SECONDARY,item.secondaryPos=dim.secondaryPos)),(item.secondarySize!==dim.secondarySize||item.primarySize!==dim.primarySize)&&(item.node.style.cssText=item.node.style.cssText.replace(WIDTH_HEIGHT_REGEX,WIDTH_HEIGHT_TEMPLATE_STR.replace(PRIMARY,(item.primarySize=dim.primarySize)+1).replace(SECONDARY,item.secondarySize=dim.secondarySize))));for(renderEndIndex===data.length-1&&(dim=view.getDimensions(data.length-1)||EMPTY_DIMENSION,
afterItemsNode.style[ionic.CSS.TRANSFORM]=TRANSLATE_TEMPLATE_STR.replace(PRIMARY,dim.primaryPos+dim.primarySize).replace(SECONDARY,0));itemsLeaving.length;)item=itemsLeaving.pop(),item.scope.$broadcast("$collectionRepeatLeave"),ionic.Utils.disconnectScope(item.scope),itemsPool.push(item),item.node.style[ionic.CSS.TRANSFORM]="translate3d(-9999px,-9999px,0)",item.primaryPos=item.secondaryPos=null;if(forceRefreshImages)for(i=0,ii=itemsEntering.length;ii>i&&(item=itemsEntering[i]);i++)if(item.images)for(var img,j=0,jj=item.images.length;jj>j&&(img=item.images[j]);j++){var src=img.src;img.src=ONE_PX_TRANSPARENT_IMG_SRC,img.src=src}if(forceRerender)for(var rootScopePhase=$rootScope.$$phase;itemsEntering.length;)item=itemsEntering.pop(),rootScopePhase||item.scope.$digest();else digestEnteringItems()}}function digestEnteringItems(){var item;digestEnteringItems.running||(digestEnteringItems.running=!0,$$rAF(function(){for(var rootScopePhase=$rootScope.$$phase;itemsEntering.length;)item=itemsEntering.pop(),item.isShown&&(rootScopePhase||item.scope.$digest());digestEnteringItems.running=!1}))}function RepeatItem(){var self=this;this.scope=scope.$new(),this.id="item"+nextItemId++,transclude(this.scope,function(clone){self.element=clone,self.element.data("$$collectionRepeatItem",self),self.node=clone[0],self.node.style[ionic.CSS.TRANSFORM]="translate3d(-9999px,-9999px,0)",self.node.style.cssText+=" height: 0px; width: 0px;",ionic.Utils.disconnectScope(self.scope),containerNode.appendChild(self.node),self.images=clone[0].getElementsByTagName("img")})}function VerticalViewType(){this.getItemPrimarySize=heightGetter,this.getItemSecondarySize=widthGetter,this.getScrollValue=function(){return Math.max(0,Math.min(scrollView.__scrollTop-repeaterBeforeSize,scrollView.__maxScrollTop-repeaterBeforeSize-repeaterAfterSize))},this.refreshDirection=function(){this.scrollPrimarySize=scrollView.__clientHeight,this.scrollSecondarySize=scrollView.__clientWidth,this.estimatedPrimarySize=estimatedHeight,this.estimatedSecondarySize=estimatedWidth,this.estimatedItemsAcross=isGridView&&Math.floor(scrollView.__clientWidth/estimatedWidth)||1}}function HorizontalViewType(){this.getItemPrimarySize=widthGetter,this.getItemSecondarySize=heightGetter,this.getScrollValue=function(){return Math.max(0,Math.min(scrollView.__scrollLeft-repeaterBeforeSize,scrollView.__maxScrollLeft-repeaterBeforeSize-repeaterAfterSize))},this.refreshDirection=function(){this.scrollPrimarySize=scrollView.__clientWidth,this.scrollSecondarySize=scrollView.__clientHeight,this.estimatedPrimarySize=estimatedWidth,this.estimatedSecondarySize=estimatedHeight,this.estimatedItemsAcross=isGridView&&Math.floor(scrollView.__clientHeight/estimatedHeight)||1}}function GridViewType(){this.getEstimatedSecondaryPos=function(index){return index%this.estimatedItemsAcross*this.estimatedSecondarySize},this.getEstimatedPrimaryPos=function(index){return Math.floor(index/this.estimatedItemsAcross)*this.estimatedPrimarySize},this.getEstimatedIndex=function(scrollValue){return Math.floor(scrollValue/this.estimatedPrimarySize)*this.estimatedItemsAcross}}function ListViewType(){this.getEstimatedSecondaryPos=function(){return 0},this.getEstimatedPrimaryPos=function(index){return index*this.estimatedPrimarySize},this.getEstimatedIndex=function(scrollValue){return Math.floor(scrollValue/this.estimatedPrimarySize)}}function StaticViewType(){this.getContentSize=function(){return this.getEstimatedPrimaryPos(data.length-1)+this.estimatedPrimarySize+repeaterBeforeSize+repeaterAfterSize};var dim={};this.getDimensions=function(index){return dim.primaryPos=this.getEstimatedPrimaryPos(index),dim.secondaryPos=this.getEstimatedSecondaryPos(index),dim.primarySize=this.estimatedPrimarySize,dim.secondarySize=this.estimatedSecondarySize,dim},this.updateRenderRange=function(scrollValue,scrollValueEnd){renderStartIndex=Math.max(0,this.getEstimatedIndex(scrollValue)),renderEndIndex=Math.min(data.length-1,this.getEstimatedIndex(scrollValueEnd)+this.estimatedItemsAcross-1),renderBeforeBoundary=Math.max(0,this.getEstimatedPrimaryPos(renderStartIndex)),renderAfterBoundary=this.getEstimatedPrimaryPos(renderEndIndex)+this.estimatedPrimarySize}}function DynamicViewType(){function calculateDimensionsList(toIndex){var i,prevDimension,dim;for(i=Math.max(0,dimensionsIndex);toIndex>=i&&(dim=dimensions[i]);i++)prevDimension=dimensions[i-1]||EMPTY_DIMENSION,dim.primarySize=self.getItemPrimarySize(i,data[i]),dim.secondarySize=self.scrollSecondarySize,dim.primaryPos=prevDimension.primaryPos+prevDimension.primarySize,dim.secondaryPos=0}function calculateDimensionsGrid(toIndex){var i,prevDimension,dim;for(i=Math.max(dimensionsIndex,0);toIndex>=i&&(dim=dimensions[i]);i++)prevDimension=dimensions[i-1]||EMPTY_DIMENSION,dim.secondarySize=Math.min(self.getItemSecondarySize(i,data[i]),self.scrollSecondarySize),dim.secondaryPos=prevDimension.secondaryPos+prevDimension.secondarySize,0===i||dim.secondaryPos+dim.secondarySize>self.scrollSecondarySize?(dim.secondaryPos=0,dim.primarySize=self.getItemPrimarySize(i,data[i]),dim.primaryPos=prevDimension.primaryPos+prevDimension.rowPrimarySize,dim.rowStartIndex=i,dim.rowPrimarySize=dim.primarySize):(dim.primarySize=self.getItemPrimarySize(i,data[i]),dim.primaryPos=prevDimension.primaryPos,dim.rowStartIndex=prevDimension.rowStartIndex,dimensions[dim.rowStartIndex].rowPrimarySize=dim.rowPrimarySize=Math.max(dimensions[dim.rowStartIndex].rowPrimarySize,dim.primarySize),dim.rowPrimarySize=Math.max(dim.primarySize,dim.rowPrimarySize))}var dimensionsIndex,self=this,debouncedScrollViewSetDimensions=ionic.debounce(scrollViewSetDimensions,25,!0),calculateDimensions=isGridView?calculateDimensionsGrid:calculateDimensionsList,dimensions=[];this.getContentSize=function(){var dim=dimensions[dimensionsIndex]||EMPTY_DIMENSION;return(dim.primaryPos+dim.primarySize||0)+this.getEstimatedPrimaryPos(data.length-dimensionsIndex-1)+repeaterBeforeSize+repeaterAfterSize},this.onDestroy=function(){dimensions.length=0},this.onRefreshData=function(){var i,ii;for(i=dimensions.length,ii=data.length;ii>i;i++)dimensions.push({});dimensionsIndex=-1},this.onRefreshLayout=function(){dimensionsIndex=-1},this.getDimensions=function(index){return index=Math.min(index,data.length-1),index>dimensionsIndex&&(index>.9*data.length?(calculateDimensions(data.length-1),dimensionsIndex=data.length-1,scrollViewSetDimensions()):(calculateDimensions(index),dimensionsIndex=index,debouncedScrollViewSetDimensions())),dimensions[index]};var oldRenderStartIndex=-1,oldScrollValue=-1;this.updateRenderRange=function(scrollValue,scrollValueEnd){var i,len,dim;if(this.getDimensions(2*this.getEstimatedIndex(scrollValueEnd)),-1===oldRenderStartIndex||0===scrollValue)i=0;else if(scrollValue>=oldScrollValue)for(i=oldRenderStartIndex,len=data.length;len>i&&!((dim=this.getDimensions(i))&&dim.primaryPos+dim.rowPrimarySize>=scrollValue);i++);else for(i=oldRenderStartIndex;i>=0;i--)if((dim=this.getDimensions(i))&&dim.primaryPos<=scrollValue){i=isGridView?dim.rowStartIndex:i;break}renderStartIndex=Math.min(Math.max(0,i),data.length-1),renderBeforeBoundary=-1!==renderStartIndex?this.getDimensions(renderStartIndex).primaryPos:-1;var lastRowDim;for(i=renderStartIndex+1,len=data.length;len>i;i++)if((dim=this.getDimensions(i))&&dim.primaryPos+dim.rowPrimarySize>scrollValueEnd){if(isGridView)for(lastRowDim=dim;len-1>i&&(dim=this.getDimensions(i+1)).primaryPos===lastRowDim.primaryPos;)i++;break}renderEndIndex=Math.min(i,data.length-1),renderAfterBoundary=-1!==renderEndIndex?(dim=this.getDimensions(renderEndIndex)).primaryPos+(dim.rowPrimarySize||dim.primarySize):-1,oldScrollValue=scrollValue,oldRenderStartIndex=renderStartIndex}}var estimatedHeight,estimatedWidth,afterItemsNode=options.afterItemsNode,containerNode=options.containerNode,forceRefreshImages=options.forceRefreshImages,heightData=options.heightData,widthData=options.widthData,keyExpression=options.keyExpression,renderBuffer=options.renderBuffer,scope=options.scope,scrollView=options.scrollView,transclude=options.transclude,data=[],getterLocals={},heightFn=heightData.getValue||function(){return heightData.value},heightGetter=function(index,value){return getterLocals[keyExpression]=value,getterLocals.$index=index,heightFn(scope,getterLocals)},widthFn=widthData.getValue||function(){return widthData.value},widthGetter=function(index,value){return getterLocals[keyExpression]=value,getterLocals.$index=index,widthFn(scope,getterLocals)},isVertical=!!scrollView.options.scrollingY,isGridView=isVertical?widthData.dynamic||widthData.value!==scrollView.__clientWidth:heightData.dynamic||heightData.value!==scrollView.__clientHeight,isStaticView=!heightData.dynamic&&!widthData.dynamic,PRIMARY="PRIMARY",SECONDARY="SECONDARY",TRANSLATE_TEMPLATE_STR=isVertical?"translate3d(SECONDARYpx,PRIMARYpx,0)":"translate3d(PRIMARYpx,SECONDARYpx,0)",WIDTH_HEIGHT_TEMPLATE_STR=isVertical?"height: PRIMARYpx; width: SECONDARYpx;":"height: SECONDARYpx; width: PRIMARYpx;",repeaterBeforeSize=0,repeaterAfterSize=0,renderStartIndex=-1,renderEndIndex=-1,renderAfterBoundary=-1,renderBeforeBoundary=-1,itemsPool=[],itemsLeaving=[],itemsEntering=[],itemsShownMap={},nextItemId=0,scrollViewSetDimensions=isVertical?function(){scrollView.setDimensions(null,null,null,view.getContentSize(),!0)}:function(){scrollView.setDimensions(null,null,view.getContentSize(),null,!0)},view=isVertical?new VerticalViewType:new HorizontalViewType;(isGridView?GridViewType:ListViewType).call(view),(isStaticView?StaticViewType:DynamicViewType).call(view);var contentSizeStr=isVertical?"getContentHeight":"getContentWidth",originalGetContentSize=scrollView.options[contentSizeStr];scrollView.options[contentSizeStr]=angular.bind(view,view.getContentSize),scrollView.__$callback=scrollView.__callback,scrollView.__callback=function(transformLeft,transformTop,zoom,wasResize){var scrollValue=view.getScrollValue();(-1===renderStartIndex||scrollValue+view.scrollPrimarySize>renderAfterBoundary||renderBeforeBoundary>scrollValue)&&render(),scrollView.__$callback(transformLeft,transformTop,zoom,wasResize)};var isLayoutReady=!1,isDataReady=!1;this.refreshLayout=function(){data.length?(estimatedHeight=heightGetter(0,data[0]),estimatedWidth=widthGetter(0,data[0])):(estimatedHeight=100,estimatedWidth=100);var style=getComputedStyle(afterItemsNode)||{},firstStyle=afterItemsNode.firstElementChild&&getComputedStyle(afterItemsNode.firstElementChild)||{},lastStyle=afterItemsNode.lastElementChild&&getComputedStyle(afterItemsNode.lastElementChild)||{};repeaterAfterSize=(parseInt(style[isVertical?"height":"width"])||0)+(firstStyle&&parseInt(firstStyle[isVertical?"marginTop":"marginLeft"])||0)+(lastStyle&&parseInt(lastStyle[isVertical?"marginBottom":"marginRight"])||0),repeaterBeforeSize=0;var current=containerNode;do repeaterBeforeSize+=current[isVertical?"offsetTop":"offsetLeft"];while(ionic.DomUtil.contains(scrollView.__content,current=current.offsetParent));var containerPrevNode=containerNode.previousElementSibling,beforeStyle=containerPrevNode?$window.getComputedStyle(containerPrevNode):{},beforeMargin=parseInt(beforeStyle[isVertical?"marginBottom":"marginRight"]||0);if(containerNode.style[ionic.CSS.TRANSFORM]=TRANSLATE_TEMPLATE_STR.replace(PRIMARY,-beforeMargin).replace(SECONDARY,0),repeaterBeforeSize-=beforeMargin,scrollView.__clientHeight&&scrollView.__clientWidth||(scrollView.__clientWidth=scrollView.__container.clientWidth,scrollView.__clientHeight=scrollView.__container.clientHeight),(view.onRefreshLayout||angular.noop)(),view.refreshDirection(),scrollViewSetDimensions(),!isLayoutReady)for(var poolSize=Math.max(20,3*renderBuffer),i=0;poolSize>i;i++)itemsPool.push(new RepeatItem);isLayoutReady=!0,isLayoutReady&&isDataReady&&((scrollView.__scrollLeft>scrollView.__maxScrollLeft||scrollView.__scrollTop>scrollView.__maxScrollTop)&&scrollView.resize(),forceRerender(!0))},this.setData=function(newData){data=newData,(view.onRefreshData||angular.noop)(),isDataReady=!0},this.destroy=function(){render.destroyed=!0,itemsPool.forEach(function(item){item.scope.$destroy(),item.scope=item.element=item.node=item.images=null}),itemsPool.length=itemsEntering.length=itemsLeaving.length=0,itemsShownMap={},scrollView.options[contentSizeStr]=originalGetContentSize,scrollView.__callback=scrollView.__$callback,scrollView.resize(),(view.onDestroy||angular.noop)()}}}function gestureDirective(directiveName){return["$ionicGesture","$parse",function($ionicGesture,$parse){var eventType=directiveName.substr(2).toLowerCase();return function(scope,element,attr){var fn=$parse(attr[directiveName]),listener=function(ev){scope.$apply(function(){fn(scope,{$event:ev})})},gesture=$ionicGesture.on(eventType,listener,element);scope.$on("$destroy",function(){$ionicGesture.off(gesture,eventType,listener)})}}]}function tapScrollToTopDirective(){return["$ionicScrollDelegate",function($ionicScrollDelegate){return{restrict:"E",link:function($scope,$element,$attr){function onTap(e){for(var depth=3,current=e.target;depth--&&current;){if(current.classList.contains("button")||current.tagName.match(/input|textarea|select/i)||current.isContentEditable)return;current=current.parentNode}var touch=e.gesture&&e.gesture.touches[0]||e.detail.touches[0],bounds=$element[0].getBoundingClientRect();ionic.DomUtil.rectContains(touch.pageX,touch.pageY,bounds.left,bounds.top-20,bounds.left+bounds.width,bounds.top+bounds.height)&&$ionicScrollDelegate.scrollTop(!0)}"true"!=$attr.noTapScroll&&(ionic.on("tap",onTap,$element[0]),$scope.$on("$destroy",function(){ionic.off("tap",onTap,$element[0])}))}}}]}function headerFooterBarDirective(isHeader){return["$document","$timeout",function($document,$timeout){return{restrict:"E",controller:"$ionicHeaderBar",compile:function(tElement){function prelink($scope,$element,$attr,ctrl){isHeader?($scope.$watch(function(){return $element[0].className},function(value){var isShown=-1===value.indexOf("ng-hide"),isSubheader=-1!==value.indexOf("bar-subheader");$scope.$hasHeader=isShown&&!isSubheader,$scope.$hasSubheader=isShown&&isSubheader,$scope.$emit("$ionicSubheader",$scope.$hasSubheader)}),$scope.$on("$destroy",function(){delete $scope.$hasHeader,delete $scope.$hasSubheader}),ctrl.align(),$scope.$on("$ionicHeader.align",function(){ionic.requestAnimationFrame(function(){ctrl.align()})})):($scope.$watch(function(){return $element[0].className},function(value){var isShown=-1===value.indexOf("ng-hide"),isSubfooter=-1!==value.indexOf("bar-subfooter");$scope.$hasFooter=isShown&&!isSubfooter,$scope.$hasSubfooter=isShown&&isSubfooter}),$scope.$on("$destroy",function(){delete $scope.$hasFooter,delete $scope.$hasSubfooter}),$scope.$watch("$hasTabs",function(val){$element.toggleClass("has-tabs",!!val)}))}return tElement.addClass(isHeader?"bar bar-header":"bar bar-footer"),$timeout(function(){isHeader&&$document[0].getElementsByClassName("tabs-top").length&&tElement.addClass("has-tabs-top")}),{pre:prelink}}}}]}function keyboardAttachGetClientHeight(element){return element.clientHeight}function eventStopPropagation(e){e.stopPropagation()}var IonicModule=angular.module("ionic",["ngAnimate","ngSanitize","ui.router"]),extend=angular.extend,forEach=angular.forEach,isDefined=angular.isDefined,isNumber=angular.isNumber,isString=angular.isString,jqLite=angular.element,noop=angular.noop;IonicModule.factory("$ionicActionSheet",["$rootScope","$compile","$animate","$timeout","$ionicTemplateLoader","$ionicPlatform","$ionicBody","IONIC_BACK_PRIORITY",function($rootScope,$compile,$animate,$timeout,$ionicTemplateLoader,$ionicPlatform,$ionicBody,IONIC_BACK_PRIORITY){function actionSheet(opts){function textForIcon(text){text&&/icon/.test(text)&&(scope.$actionSheetHasIcon=!0)}var scope=$rootScope.$new(!0);extend(scope,{cancel:noop,destructiveButtonClicked:noop,buttonClicked:noop,$deregisterBackButton:noop,buttons:[],cancelOnStateChange:!0},opts||{});for(var x=0;x<scope.buttons.length;x++)textForIcon(scope.buttons[x].text);textForIcon(scope.cancelText),textForIcon(scope.destructiveText);var element=scope.element=$compile('<ion-action-sheet ng-class="cssClass" buttons="buttons"></ion-action-sheet>')(scope),sheetEl=jqLite(element[0].querySelector(".action-sheet-wrapper")),stateChangeListenDone=scope.cancelOnStateChange?$rootScope.$on("$stateChangeSuccess",function(){scope.cancel()}):noop;return scope.removeSheet=function(done){scope.removed||(scope.removed=!0,sheetEl.removeClass("action-sheet-up"),$timeout(function(){$ionicBody.removeClass("action-sheet-open")},400),scope.$deregisterBackButton(),stateChangeListenDone(),$animate.removeClass(element,"active").then(function(){scope.$destroy(),element.remove(),scope.cancel.$scope=sheetEl=null,(done||noop)()}))},scope.showSheet=function(done){scope.removed||($ionicBody.append(element).addClass("action-sheet-open"),$animate.addClass(element,"active").then(function(){scope.removed||(done||noop)()}),$timeout(function(){scope.removed||sheetEl.addClass("action-sheet-up")},20,!1))},scope.$deregisterBackButton=$ionicPlatform.registerBackButtonAction(function(){$timeout(scope.cancel)},IONIC_BACK_PRIORITY.actionSheet),scope.cancel=function(){scope.removeSheet(opts.cancel)},scope.buttonClicked=function(index){opts.buttonClicked(index,opts.buttons[index])===!0&&scope.removeSheet()},scope.destructiveButtonClicked=function(){opts.destructiveButtonClicked()===!0&&scope.removeSheet()},scope.showSheet(),scope.cancel.$scope=scope,scope.cancel}return{show:actionSheet}}]),jqLite.prototype.addClass=function(cssClasses){var x,y,cssClass,el,splitClasses,existingClasses;if(cssClasses&&"ng-scope"!=cssClasses&&"ng-isolate-scope"!=cssClasses)for(x=0;x<this.length;x++)if(el=this[x],el.setAttribute)if(cssClasses.indexOf(" ")<0&&el.classList.add)el.classList.add(cssClasses);else{for(existingClasses=(" "+(el.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),splitClasses=cssClasses.split(" "),y=0;y<splitClasses.length;y++)cssClass=splitClasses[y].trim(),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ");el.setAttribute("class",existingClasses.trim())}return this},jqLite.prototype.removeClass=function(cssClasses){var x,y,splitClasses,cssClass,el;if(cssClasses)for(x=0;x<this.length;x++)if(el=this[x],el.getAttribute)if(cssClasses.indexOf(" ")<0&&el.classList.remove)el.classList.remove(cssClasses);else for(splitClasses=cssClasses.split(" "),y=0;y<splitClasses.length;y++)cssClass=splitClasses[y],el.setAttribute("class",(" "+(el.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+cssClass.trim()+" "," ").trim());return this},IonicModule.factory("$ionicBackdrop",["$document","$timeout","$$rAF",function($document,$timeout,$$rAF){function retain(){backdropHolds++,1===backdropHolds&&(el.addClass("visible"),$$rAF(function(){backdropHolds>=1&&el.addClass("active")}))}function release(){1===backdropHolds&&(el.removeClass("active"),$timeout(function(){0===backdropHolds&&el.removeClass("visible")},400,!1)),backdropHolds=Math.max(0,backdropHolds-1)}function getElement(){return el}var el=jqLite('<div class="backdrop">'),backdropHolds=0;return $document[0].body.appendChild(el[0]),{retain:retain,release:release,getElement:getElement,_element:el}}]),IonicModule.factory("$ionicBind",["$parse","$interpolate",function($parse,$interpolate){var LOCAL_REGEXP=/^\s*([@=&])(\??)\s*(\w*)\s*$/;return function(scope,attrs,bindDefinition){forEach(bindDefinition||{},function(definition,scopeName){var parentGet,unwatch,match=definition.match(LOCAL_REGEXP)||[],attrName=match[3]||scopeName,mode=match[1];switch(mode){case"@":if(!attrs[attrName])return;attrs.$observe(attrName,function(value){scope[scopeName]=value}),attrs[attrName]&&(scope[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(!attrs[attrName])return;unwatch=scope.$watch(attrs[attrName],function(value){scope[scopeName]=value}),scope.$on("$destroy",unwatch);break;case"&":if(attrs[attrName]&&attrs[attrName].match(RegExp(scopeName+"(.*?)")))throw new Error('& expression binding "'+scopeName+'" looks like it will recursively call "'+attrs[attrName]+'" and cause a stack overflow! Please choose a different scopeName.');parentGet=$parse(attrs[attrName]),scope[scopeName]=function(locals){return parentGet(scope,locals)}}})}}]),IonicModule.factory("$ionicBody",["$document",function($document){return{addClass:function(){for(var x=0;x<arguments.length;x++)$document[0].body.classList.add(arguments[x]);return this},removeClass:function(){for(var x=0;x<arguments.length;x++)$document[0].body.classList.remove(arguments[x]);return this},enableClass:function(shouldEnableClass){var args=Array.prototype.slice.call(arguments).slice(1);return shouldEnableClass?this.addClass.apply(this,args):this.removeClass.apply(this,args),this},append:function(ele){return $document[0].body.appendChild(ele.length?ele[0]:ele),this},get:function(){return $document[0].body}}}]),IonicModule.factory("$ionicClickBlock",["$document","$ionicBody","$timeout",function($document,$ionicBody,$timeout){function preventClick(ev){ev.preventDefault(),ev.stopPropagation()}function addClickBlock(){pendingShow&&(cbEle?cbEle.classList.remove(CSS_HIDE):(cbEle=$document[0].createElement("div"),cbEle.className="click-block",$ionicBody.append(cbEle),cbEle.addEventListener("touchstart",preventClick),cbEle.addEventListener("mousedown",preventClick)),pendingShow=!1)}function removeClickBlock(){cbEle&&cbEle.classList.add(CSS_HIDE)}var cbEle,fallbackTimer,pendingShow,CSS_HIDE="click-block-hide";return{show:function(autoExpire){pendingShow=!0,$timeout.cancel(fallbackTimer),fallbackTimer=$timeout(this.hide,autoExpire||310,!1),addClickBlock()},hide:function(){pendingShow=!1,$timeout.cancel(fallbackTimer),removeClickBlock()}}}]),IonicModule.factory("$ionicGesture",[function(){return{on:function(eventType,cb,$element,options){return window.ionic.onGesture(eventType,cb,$element[0],options)},off:function(gesture,eventType,cb){return window.ionic.offGesture(gesture,eventType,cb)}}}]),IonicModule.factory("$ionicHistory",["$rootScope","$state","$location","$window","$timeout","$ionicViewSwitcher","$ionicNavViewDelegate",function($rootScope,$state,$location,$window,$timeout,$ionicViewSwitcher,$ionicNavViewDelegate){function getViewById(viewId){return viewId?viewHistory.views[viewId]:null}function getBackView(view){return view?getViewById(view.backViewId):null}function getForwardView(view){return view?getViewById(view.forwardViewId):null}function getHistoryById(historyId){return historyId?viewHistory.histories[historyId]:null}function getHistory(scope){var histObj=getParentHistoryObj(scope);return viewHistory.histories[histObj.historyId]||(viewHistory.histories[histObj.historyId]={historyId:histObj.historyId,parentHistoryId:getParentHistoryObj(histObj.scope.$parent).historyId,stack:[],cursor:-1}),getHistoryById(histObj.historyId)}function getParentHistoryObj(scope){for(var parentScope=scope;parentScope;){if(parentScope.hasOwnProperty("$historyId"))return{historyId:parentScope.$historyId,scope:parentScope};parentScope=parentScope.$parent}return{historyId:"root",scope:$rootScope}}function setNavViews(viewId){viewHistory.currentView=getViewById(viewId),viewHistory.backView=getBackView(viewHistory.currentView),viewHistory.forwardView=getForwardView(viewHistory.currentView)}function getCurrentStateId(){var id;if($state&&$state.current&&$state.current.name){if(id=$state.current.name,$state.params)for(var key in $state.params)$state.params.hasOwnProperty(key)&&$state.params[key]&&(id+="_"+key+"="+$state.params[key]);return id}return ionic.Utils.nextUid()}function getCurrentStateParams(){var rtn;if($state&&$state.params)for(var key in $state.params)$state.params.hasOwnProperty(key)&&(rtn=rtn||{},rtn[key]=$state.params[key]);return rtn}function isAbstractTag(ele){return ele&&ele.length&&/ion-side-menus|ion-tabs/i.test(ele[0].tagName)}function canSwipeBack(ele,viewLocals){return viewLocals&&viewLocals.$$state&&viewLocals.$$state.self.canSwipeBack===!1?!1:ele&&"false"===ele.attr("can-swipe-back")?!1:!0}var lastStateId,nextViewOptions,deregisterStateChangeListener,nextViewExpireTimer,forcedNav,ACTION_INITIAL_VIEW="initialView",ACTION_NEW_VIEW="newView",ACTION_MOVE_BACK="moveBack",ACTION_MOVE_FORWARD="moveForward",DIRECTION_BACK="back",DIRECTION_FORWARD="forward",DIRECTION_ENTER="enter",DIRECTION_EXIT="exit",DIRECTION_SWAP="swap",DIRECTION_NONE="none",stateChangeCounter=0,viewHistory={histories:{root:{historyId:"root",parentHistoryId:null,stack:[],cursor:-1}},views:{},backView:null,forwardView:null,currentView:null},View=function(){};return View.prototype.initialize=function(data){if(data){for(var name in data)this[name]=data[name];return this}return null},View.prototype.go=function(){if(this.stateName)return $state.go(this.stateName,this.stateParams);if(this.url&&this.url!==$location.url()){if(viewHistory.backView===this)return $window.history.go(-1);if(viewHistory.forwardView===this)return $window.history.go(1);$location.url(this.url)}return null},View.prototype.destroy=function(){this.scope&&(this.scope.$destroy&&this.scope.$destroy(),this.scope=null)},{register:function(parentScope,viewLocals){var tmp,x,ele,currentStateId=getCurrentStateId(),hist=getHistory(parentScope),currentView=viewHistory.currentView,backView=viewHistory.backView,forwardView=viewHistory.forwardView,viewId=null,action=null,direction=DIRECTION_NONE,historyId=hist.historyId,url=$location.url();if(lastStateId!==currentStateId&&(lastStateId=currentStateId,stateChangeCounter++),forcedNav)viewId=forcedNav.viewId,action=forcedNav.action,direction=forcedNav.direction,forcedNav=null;else if(backView&&backView.stateId===currentStateId)viewId=backView.viewId,historyId=backView.historyId,action=ACTION_MOVE_BACK,backView.historyId===currentView.historyId?direction=DIRECTION_BACK:currentView&&(direction=DIRECTION_EXIT,tmp=getHistoryById(backView.historyId),tmp&&tmp.parentHistoryId===currentView.historyId?direction=DIRECTION_ENTER:(tmp=getHistoryById(currentView.historyId),tmp&&tmp.parentHistoryId===hist.parentHistoryId&&(direction=DIRECTION_SWAP)));else if(forwardView&&forwardView.stateId===currentStateId)viewId=forwardView.viewId,historyId=forwardView.historyId,action=ACTION_MOVE_FORWARD,forwardView.historyId===currentView.historyId?direction=DIRECTION_FORWARD:currentView&&(direction=DIRECTION_EXIT,currentView.historyId===hist.parentHistoryId?direction=DIRECTION_ENTER:(tmp=getHistoryById(currentView.historyId),tmp&&tmp.parentHistoryId===hist.parentHistoryId&&(direction=DIRECTION_SWAP))),tmp=getParentHistoryObj(parentScope),forwardView.historyId&&tmp.scope&&(tmp.scope.$historyId=forwardView.historyId,historyId=forwardView.historyId);else if(currentView&&currentView.historyId!==historyId&&hist.cursor>-1&&hist.stack.length>0&&hist.cursor<hist.stack.length&&hist.stack[hist.cursor].stateId===currentStateId){var switchToView=hist.stack[hist.cursor];viewId=switchToView.viewId,historyId=switchToView.historyId,action=ACTION_MOVE_BACK,direction=DIRECTION_SWAP,tmp=getHistoryById(currentView.historyId),tmp&&tmp.parentHistoryId===historyId?direction=DIRECTION_EXIT:(tmp=getHistoryById(historyId),tmp&&tmp.parentHistoryId===currentView.historyId&&(direction=DIRECTION_ENTER)),tmp=getViewById(switchToView.backViewId),tmp&&switchToView.historyId!==tmp.historyId&&(hist.stack[hist.cursor].backViewId=currentView.viewId)}else{if(ele=$ionicViewSwitcher.createViewEle(viewLocals),this.isAbstractEle(ele,viewLocals))return{action:"abstractView",direction:DIRECTION_NONE,ele:ele};if(viewId=ionic.Utils.nextUid(),currentView){if(currentView.forwardViewId=viewId,action=ACTION_NEW_VIEW,forwardView&&currentView.stateId!==forwardView.stateId&&currentView.historyId===forwardView.historyId&&(tmp=getHistoryById(forwardView.historyId))){for(x=tmp.stack.length-1;x>=forwardView.index;x--){var stackItem=tmp.stack[x];stackItem&&stackItem.destroy&&stackItem.destroy(),tmp.stack.splice(x)}historyId=forwardView.historyId}hist.historyId===currentView.historyId?direction=DIRECTION_FORWARD:currentView.historyId!==hist.historyId&&(direction=DIRECTION_ENTER,tmp=getHistoryById(currentView.historyId),tmp&&tmp.parentHistoryId===hist.parentHistoryId?direction=DIRECTION_SWAP:(tmp=getHistoryById(tmp.parentHistoryId),tmp&&tmp.historyId===hist.historyId&&(direction=DIRECTION_EXIT)))}else action=ACTION_INITIAL_VIEW;2>stateChangeCounter&&(direction=DIRECTION_NONE),viewHistory.views[viewId]=this.createView({viewId:viewId,index:hist.stack.length,historyId:hist.historyId,backViewId:currentView&&currentView.viewId?currentView.viewId:null,forwardViewId:null,stateId:currentStateId,stateName:this.currentStateName(),stateParams:getCurrentStateParams(),url:url,canSwipeBack:canSwipeBack(ele,viewLocals)}),hist.stack.push(viewHistory.views[viewId])}if(deregisterStateChangeListener&&deregisterStateChangeListener(),$timeout.cancel(nextViewExpireTimer),nextViewOptions){if(nextViewOptions.disableAnimate&&(direction=DIRECTION_NONE),nextViewOptions.disableBack&&(viewHistory.views[viewId].backViewId=null),nextViewOptions.historyRoot){for(x=0;x<hist.stack.length;x++)hist.stack[x].viewId===viewId?(hist.stack[x].index=0,hist.stack[x].backViewId=hist.stack[x].forwardViewId=null):delete viewHistory.views[hist.stack[x].viewId];hist.stack=[viewHistory.views[viewId]]}nextViewOptions=null}if(setNavViews(viewId),viewHistory.backView&&historyId==viewHistory.backView.historyId&&currentStateId==viewHistory.backView.stateId&&url==viewHistory.backView.url)for(x=0;x<hist.stack.length;x++)if(hist.stack[x].viewId==viewId){action="dupNav",direction=DIRECTION_NONE,x>0&&(hist.stack[x-1].forwardViewId=null),viewHistory.forwardView=null,viewHistory.currentView.index=viewHistory.backView.index,viewHistory.currentView.backViewId=viewHistory.backView.backViewId,viewHistory.backView=getBackView(viewHistory.backView),hist.stack.splice(x,1);break}return hist.cursor=viewHistory.currentView.index,{viewId:viewId,action:action,direction:direction,historyId:historyId,enableBack:this.enabledBack(viewHistory.currentView),isHistoryRoot:0===viewHistory.currentView.index,ele:ele}},registerHistory:function(scope){scope.$historyId=ionic.Utils.nextUid()},createView:function(data){var newView=new View;return newView.initialize(data)},getViewById:getViewById,viewHistory:function(){return viewHistory},currentView:function(view){return arguments.length&&(viewHistory.currentView=view),viewHistory.currentView},currentHistoryId:function(){return viewHistory.currentView?viewHistory.currentView.historyId:null},currentTitle:function(val){return viewHistory.currentView?(arguments.length&&(viewHistory.currentView.title=val),viewHistory.currentView.title):void 0},backView:function(view){return arguments.length&&(viewHistory.backView=view),viewHistory.backView},backTitle:function(view){var backView=view&&getViewById(view.backViewId)||viewHistory.backView;return backView&&backView.title},forwardView:function(view){return arguments.length&&(viewHistory.forwardView=view),viewHistory.forwardView},currentStateName:function(){return $state&&$state.current?$state.current.name:null},isCurrentStateNavView:function(navView){return!!($state&&$state.current&&$state.current.views&&$state.current.views[navView])},goToHistoryRoot:function(historyId){if(historyId){var hist=getHistoryById(historyId);if(hist&&hist.stack.length){if(viewHistory.currentView&&viewHistory.currentView.viewId===hist.stack[0].viewId)return;forcedNav={viewId:hist.stack[0].viewId,action:ACTION_MOVE_BACK,direction:DIRECTION_BACK},hist.stack[0].go()}}},goBack:function(backCount){if(isDefined(backCount)&&-1!==backCount){if(backCount>-1)return;var currentHistory=viewHistory.histories[this.currentHistoryId()],newCursor=currentHistory.cursor+backCount+1;1>newCursor&&(newCursor=1),currentHistory.cursor=newCursor,setNavViews(currentHistory.stack[newCursor].viewId);for(var cursor=newCursor-1,clearStateIds=[],fwdView=getViewById(currentHistory.stack[cursor].forwardViewId);fwdView&&(clearStateIds.push(fwdView.stateId||fwdView.viewId),cursor++,!(cursor>=currentHistory.stack.length));)fwdView=getViewById(currentHistory.stack[cursor].forwardViewId);
var self=this;clearStateIds.length&&$timeout(function(){self.clearCache(clearStateIds)},600)}viewHistory.backView&&viewHistory.backView.go()},enabledBack:function(view){var backView=getBackView(view);return!(!backView||backView.historyId!==view.historyId)},clearHistory:function(){var histories=viewHistory.histories,currentView=viewHistory.currentView;if(histories)for(var historyId in histories)histories[historyId].stack&&(histories[historyId].stack=[],histories[historyId].cursor=-1),currentView&&currentView.historyId===historyId?(currentView.backViewId=currentView.forwardViewId=null,histories[historyId].stack.push(currentView)):histories[historyId].destroy&&histories[historyId].destroy();for(var viewId in viewHistory.views)viewId!==currentView.viewId&&delete viewHistory.views[viewId];currentView&&setNavViews(currentView.viewId)},clearCache:function(stateIds){return $timeout(function(){$ionicNavViewDelegate._instances.forEach(function(instance){instance.clearCache(stateIds)})})},nextViewOptions:function(opts){return deregisterStateChangeListener&&deregisterStateChangeListener(),arguments.length&&($timeout.cancel(nextViewExpireTimer),null===opts?nextViewOptions=opts:(nextViewOptions=nextViewOptions||{},extend(nextViewOptions,opts),nextViewOptions.expire&&(deregisterStateChangeListener=$rootScope.$on("$stateChangeSuccess",function(){nextViewExpireTimer=$timeout(function(){nextViewOptions=null},nextViewOptions.expire)})))),nextViewOptions},isAbstractEle:function(ele,viewLocals){return viewLocals&&viewLocals.$$state&&viewLocals.$$state.self["abstract"]?!0:!(!ele||!isAbstractTag(ele)&&!isAbstractTag(ele.children()))},isActiveScope:function(scope){if(!scope)return!1;for(var foundHistoryId,climbScope=scope,currentHistoryId=this.currentHistoryId();climbScope;){if(climbScope.$$disconnected)return!1;if(!foundHistoryId&&climbScope.hasOwnProperty("$historyId")&&(foundHistoryId=!0),currentHistoryId){if(climbScope.hasOwnProperty("$historyId")&&currentHistoryId==climbScope.$historyId)return!0;if(climbScope.hasOwnProperty("$activeHistoryId")&&currentHistoryId==climbScope.$activeHistoryId){if(climbScope.hasOwnProperty("$historyId"))return!0;if(!foundHistoryId)return!0}}foundHistoryId&&climbScope.hasOwnProperty("$activeHistoryId")&&(foundHistoryId=!1),climbScope=climbScope.$parent}return currentHistoryId?"root"==currentHistoryId:!0}}}]).run(["$rootScope","$state","$location","$document","$ionicPlatform","$ionicHistory","IONIC_BACK_PRIORITY",function($rootScope,$state,$location,$document,$ionicPlatform,$ionicHistory,IONIC_BACK_PRIORITY){function onHardwareBackButton(e){var backView=$ionicHistory.backView();return backView?backView.go():ionic.Platform.exitApp(),e.preventDefault(),!1}$rootScope.$on("$ionicView.beforeEnter",function(){ionic.keyboard&&ionic.keyboard.hide&&ionic.keyboard.hide()}),$rootScope.$on("$ionicHistory.change",function(e,data){if(!data)return null;var viewHistory=$ionicHistory.viewHistory(),hist=data.historyId?viewHistory.histories[data.historyId]:null;if(hist&&hist.cursor>-1&&hist.cursor<hist.stack.length){var view=hist.stack[hist.cursor];return view.go(data)}!data.url&&data.uiSref&&(data.url=$state.href(data.uiSref)),data.url&&(0===data.url.indexOf("#")&&(data.url=data.url.replace("#","")),data.url!==$location.url()&&$location.url(data.url))}),$rootScope.$ionicGoBack=function(backCount){$ionicHistory.goBack(backCount)},$rootScope.$on("$ionicView.afterEnter",function(ev,data){data&&data.title&&($document[0].title=data.title)}),$ionicPlatform.registerBackButtonAction(onHardwareBackButton,IONIC_BACK_PRIORITY.view)}]),IonicModule.provider("$ionicConfig",function(){function setPlatformConfig(platformName,platformConfigs){configProperties.platform[platformName]=platformConfigs,provider.platform[platformName]={},addConfig(configProperties,configProperties.platform[platformName]),createConfig(configProperties.platform[platformName],provider.platform[platformName],"")}function addConfig(configObj,platformObj){for(var n in configObj)n!=PLATFORM&&configObj.hasOwnProperty(n)&&(angular.isObject(configObj[n])?(isDefined(platformObj[n])||(platformObj[n]={}),addConfig(configObj[n],platformObj[n])):isDefined(platformObj[n])||(platformObj[n]=null))}function createConfig(configObj,providerObj,platformPath){forEach(configObj,function(value,namespace){angular.isObject(configObj[namespace])?(providerObj[namespace]={},createConfig(configObj[namespace],providerObj[namespace],platformPath+"."+namespace)):providerObj[namespace]=function(newValue){if(arguments.length)return configObj[namespace]=newValue,providerObj;if(configObj[namespace]==PLATFORM){var platformConfig=stringObj(configProperties.platform,ionic.Platform.platform()+platformPath+"."+namespace);return platformConfig||platformConfig===!1?platformConfig:stringObj(configProperties.platform,"default"+platformPath+"."+namespace)}return configObj[namespace]}})}function stringObj(obj,str){str=str.split(".");for(var i=0;i<str.length;i++){if(!obj||!isDefined(obj[str[i]]))return null;obj=obj[str[i]]}return obj}var provider=this;provider.platform={};var PLATFORM="platform",configProperties={views:{maxCache:PLATFORM,forwardCache:PLATFORM,transition:PLATFORM,swipeBackEnabled:PLATFORM,swipeBackHitWidth:PLATFORM},navBar:{alignTitle:PLATFORM,positionPrimaryButtons:PLATFORM,positionSecondaryButtons:PLATFORM,transition:PLATFORM},backButton:{icon:PLATFORM,text:PLATFORM,previousTitleText:PLATFORM},form:{checkbox:PLATFORM,toggle:PLATFORM},scrolling:{jsScrolling:PLATFORM},spinner:{icon:PLATFORM},tabs:{style:PLATFORM,position:PLATFORM},templates:{maxPrefetch:PLATFORM},platform:{}};createConfig(configProperties,provider,""),setPlatformConfig("default",{views:{maxCache:10,forwardCache:!1,transition:"ios",swipeBackEnabled:!0,swipeBackHitWidth:45},navBar:{alignTitle:"center",positionPrimaryButtons:"left",positionSecondaryButtons:"right",transition:"view"},backButton:{icon:"ion-ios-arrow-back",text:"Back",previousTitleText:!0},form:{checkbox:"circle",toggle:"large"},scrolling:{jsScrolling:!0},spinner:{icon:"ios"},tabs:{style:"standard",position:"bottom"},templates:{maxPrefetch:30}}),setPlatformConfig("ios",{}),setPlatformConfig("android",{views:{transition:"android",swipeBackEnabled:!1},navBar:{alignTitle:"left",positionPrimaryButtons:"right",positionSecondaryButtons:"right"},backButton:{icon:"ion-android-arrow-back",text:!1,previousTitleText:!1},form:{checkbox:"square",toggle:"small"},spinner:{icon:"android"},tabs:{style:"striped",position:"top"}}),setPlatformConfig("windowsphone",{spinner:{icon:"android"}}),provider.transitions={views:{},navBar:{}},provider.transitions.views.ios=function(enteringEle,leavingEle,direction,shouldAnimate){function setStyles(ele,opacity,x,boxShadowOpacity){var css={};css[ionic.CSS.TRANSITION_DURATION]=d.shouldAnimate?"":0,css.opacity=opacity,boxShadowOpacity>-1&&(css.boxShadow="0 0 10px rgba(0,0,0,"+(d.shouldAnimate?.45*boxShadowOpacity:.3)+")"),css[ionic.CSS.TRANSFORM]="translate3d("+x+"%,0,0)",ionic.DomUtil.cachedStyles(ele,css)}var d={run:function(step){"forward"==direction?(setStyles(enteringEle,1,99*(1-step),1-step),setStyles(leavingEle,1-.1*step,-33*step,-1)):"back"==direction?(setStyles(enteringEle,1-.1*(1-step),-33*(1-step),-1),setStyles(leavingEle,1,100*step,1-step)):(setStyles(enteringEle,1,0,-1),setStyles(leavingEle,0,0,-1))},shouldAnimate:shouldAnimate&&("forward"==direction||"back"==direction)};return d},provider.transitions.navBar.ios=function(enteringHeaderBar,leavingHeaderBar,direction,shouldAnimate){function setStyles(ctrl,opacity,titleX,backTextX){var css={};css[ionic.CSS.TRANSITION_DURATION]=d.shouldAnimate?"":"0ms",css.opacity=1===opacity?"":opacity,ctrl.setCss("buttons-left",css),ctrl.setCss("buttons-right",css),ctrl.setCss("back-button",css),css[ionic.CSS.TRANSFORM]="translate3d("+backTextX+"px,0,0)",ctrl.setCss("back-text",css),css[ionic.CSS.TRANSFORM]="translate3d("+titleX+"px,0,0)",ctrl.setCss("title",css)}function enter(ctrlA,ctrlB,step){if(ctrlA&&ctrlB){var titleX=(ctrlA.titleTextX()+ctrlA.titleWidth())*(1-step),backTextX=ctrlB&&(ctrlB.titleTextX()-ctrlA.backButtonTextLeft())*(1-step)||0;setStyles(ctrlA,step,titleX,backTextX)}}function leave(ctrlA,ctrlB,step){if(ctrlA&&ctrlB){var titleX=(-(ctrlA.titleTextX()-ctrlB.backButtonTextLeft())-ctrlA.titleLeftRight())*step;setStyles(ctrlA,1-step,titleX,0)}}var d={run:function(step){var enteringHeaderCtrl=enteringHeaderBar.controller(),leavingHeaderCtrl=leavingHeaderBar&&leavingHeaderBar.controller();"back"==d.direction?(leave(enteringHeaderCtrl,leavingHeaderCtrl,1-step),enter(leavingHeaderCtrl,enteringHeaderCtrl,1-step)):(enter(enteringHeaderCtrl,leavingHeaderCtrl,step),leave(leavingHeaderCtrl,enteringHeaderCtrl,step))},direction:direction,shouldAnimate:shouldAnimate&&("forward"==direction||"back"==direction)};return d},provider.transitions.views.android=function(enteringEle,leavingEle,direction,shouldAnimate){function setStyles(ele,x){var css={};css[ionic.CSS.TRANSITION_DURATION]=d.shouldAnimate?"":0,css[ionic.CSS.TRANSFORM]="translate3d("+x+"%,0,0)",ionic.DomUtil.cachedStyles(ele,css)}shouldAnimate=shouldAnimate&&("forward"==direction||"back"==direction);var d={run:function(step){"forward"==direction?(setStyles(enteringEle,99*(1-step)),setStyles(leavingEle,-100*step)):"back"==direction?(setStyles(enteringEle,-100*(1-step)),setStyles(leavingEle,100*step)):(setStyles(enteringEle,0),setStyles(leavingEle,0))},shouldAnimate:shouldAnimate};return d},provider.transitions.navBar.android=function(enteringHeaderBar,leavingHeaderBar,direction,shouldAnimate){function setStyles(ctrl,opacity){if(ctrl){var css={};css.opacity=1===opacity?"":opacity,ctrl.setCss("buttons-left",css),ctrl.setCss("buttons-right",css),ctrl.setCss("back-button",css),ctrl.setCss("back-text",css),ctrl.setCss("title",css)}}return{run:function(step){setStyles(enteringHeaderBar.controller(),step),setStyles(leavingHeaderBar&&leavingHeaderBar.controller(),1-step)},shouldAnimate:shouldAnimate&&("forward"==direction||"back"==direction)}},provider.transitions.views.none=function(enteringEle,leavingEle){return{run:function(step){provider.transitions.views.android(enteringEle,leavingEle,!1,!1).run(step)},shouldAnimate:!1}},provider.transitions.navBar.none=function(enteringHeaderBar,leavingHeaderBar){return{run:function(step){provider.transitions.navBar.ios(enteringHeaderBar,leavingHeaderBar,!1,!1).run(step),provider.transitions.navBar.android(enteringHeaderBar,leavingHeaderBar,!1,!1).run(step)},shouldAnimate:!1}},provider.setPlatformConfig=setPlatformConfig,provider.$get=function(){return provider}}).config(["$compileProvider",function($compileProvider){$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|tel|ftp|mailto|file|ghttps?|ms-appx|x-wmapp0):/),$compileProvider.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|content|blob|ms-appx|x-wmapp0):|data:image\//)}]);var LOADING_TPL='<div class="loading-container"><div class="loading"></div></div>',LOADING_HIDE_DEPRECATED="$ionicLoading instance.hide() has been deprecated. Use $ionicLoading.hide().",LOADING_SHOW_DEPRECATED="$ionicLoading instance.show() has been deprecated. Use $ionicLoading.show().",LOADING_SET_DEPRECATED="$ionicLoading instance.setContent() has been deprecated. Use $ionicLoading.show({ template: 'my content' }).";IonicModule.constant("$ionicLoadingConfig",{template:"<ion-spinner></ion-spinner>"}).factory("$ionicLoading",["$ionicLoadingConfig","$ionicBody","$ionicTemplateLoader","$ionicBackdrop","$timeout","$q","$log","$compile","$ionicPlatform","$rootScope","IONIC_BACK_PRIORITY",function($ionicLoadingConfig,$ionicBody,$ionicTemplateLoader,$ionicBackdrop,$timeout,$q,$log,$compile,$ionicPlatform,$rootScope,IONIC_BACK_PRIORITY){function getLoader(){return loaderInstance||(loaderInstance=$ionicTemplateLoader.compile({template:LOADING_TPL,appendTo:$ionicBody.get()}).then(function(self){return self.show=function(options){var templatePromise=options.templateUrl?$ionicTemplateLoader.load(options.templateUrl):$q.when(options.template||options.content||"");self.scope=options.scope||self.scope,self.isShown||(self.hasBackdrop=!options.noBackdrop&&options.showBackdrop!==!1,self.hasBackdrop&&($ionicBackdrop.retain(),$ionicBackdrop.getElement().addClass("backdrop-loading"))),options.duration&&($timeout.cancel(self.durationTimeout),self.durationTimeout=$timeout(angular.bind(self,self.hide),+options.duration)),deregisterBackAction(),deregisterBackAction=$ionicPlatform.registerBackButtonAction(noop,IONIC_BACK_PRIORITY.loading),templatePromise.then(function(html){if(html){var loading=self.element.children();loading.html(html),$compile(loading.contents())(self.scope)}self.isShown&&(self.element.addClass("visible"),ionic.requestAnimationFrame(function(){self.isShown&&(self.element.addClass("active"),$ionicBody.addClass("loading-active"))}))}),self.isShown=!0},self.hide=function(){deregisterBackAction(),self.isShown&&(self.hasBackdrop&&($ionicBackdrop.release(),$ionicBackdrop.getElement().removeClass("backdrop-loading")),self.element.removeClass("active"),$ionicBody.removeClass("loading-active"),setTimeout(function(){!self.isShown&&self.element.removeClass("visible")},200)),$timeout.cancel(self.durationTimeout),self.isShown=!1},self})),loaderInstance}function showLoader(options){options=extend({},$ionicLoadingConfig||{},options||{});var delay=options.delay||options.showDelay||0;return deregisterStateListener1(),deregisterStateListener2(),options.hideOnStateChange&&(deregisterStateListener1=$rootScope.$on("$stateChangeSuccess",hideLoader),deregisterStateListener2=$rootScope.$on("$stateChangeError",hideLoader)),$timeout.cancel(loadingShowDelay),loadingShowDelay=$timeout(noop,delay),loadingShowDelay.then(getLoader).then(function(loader){return loader.show(options)}),{hide:function(){return $log.error(LOADING_HIDE_DEPRECATED),hideLoader.apply(this,arguments)},show:function(){return $log.error(LOADING_SHOW_DEPRECATED),showLoader.apply(this,arguments)},setContent:function(content){return $log.error(LOADING_SET_DEPRECATED),getLoader().then(function(loader){loader.show({template:content})})}}}function hideLoader(){deregisterStateListener1(),deregisterStateListener2(),$timeout.cancel(loadingShowDelay),getLoader().then(function(loader){loader.hide()})}var loaderInstance,deregisterBackAction=noop,deregisterStateListener1=noop,deregisterStateListener2=noop,loadingShowDelay=$q.when();return{show:showLoader,hide:hideLoader,_getLoader:getLoader}}]),IonicModule.factory("$ionicModal",["$rootScope","$ionicBody","$compile","$timeout","$ionicPlatform","$ionicTemplateLoader","$$q","$log","$ionicClickBlock","$window","IONIC_BACK_PRIORITY",function($rootScope,$ionicBody,$compile,$timeout,$ionicPlatform,$ionicTemplateLoader,$$q,$log,$ionicClickBlock,$window,IONIC_BACK_PRIORITY){var ModalView=ionic.views.Modal.inherit({initialize:function(opts){ionic.views.Modal.prototype.initialize.call(this,opts),this.animation=opts.animation||"slide-in-up"},show:function(target){var self=this;if(self.scope.$$destroyed)return $log.error("Cannot call "+self.viewType+".show() after remove(). Please create a new "+self.viewType+" instance."),$$q.when();$ionicClickBlock.show(600),stack.add(self);var modalEl=jqLite(self.modalEl);self.el.classList.remove("hide"),$timeout(function(){self._isShown&&$ionicBody.addClass(self.viewType+"-open")},400,!1),self.el.parentElement||(modalEl.addClass(self.animation),$ionicBody.append(self.el));var scrollCtrl=modalEl.data("$$ionicScrollController");return scrollCtrl&&scrollCtrl.resize(),target&&self.positionView&&(self.positionView(target,modalEl),self._onWindowResize=function(){self._isShown&&self.positionView(target,modalEl)},ionic.on("resize",self._onWindowResize,window)),modalEl.addClass("ng-enter active").removeClass("ng-leave ng-leave-active"),self._isShown=!0,self._deregisterBackButton=$ionicPlatform.registerBackButtonAction(self.hardwareBackButtonClose?angular.bind(self,self.hide):noop,IONIC_BACK_PRIORITY.modal),ionic.views.Modal.prototype.show.call(self),$timeout(function(){self._isShown&&(modalEl.addClass("ng-enter-active"),ionic.trigger("resize"),self.scope.$parent&&self.scope.$parent.$broadcast(self.viewType+".shown",self),self.el.classList.add("active"),self.scope.$broadcast("$ionicHeader.align"))},20),$timeout(function(){self._isShown&&self.$el.on("click",function(e){self.backdropClickToClose&&e.target===self.el&&stack.isHighest(self)&&self.hide()})},400)},hide:function(){var self=this,modalEl=jqLite(self.modalEl);return $ionicClickBlock.show(600),stack.remove(self),self.el.classList.remove("active"),modalEl.addClass("ng-leave"),$timeout(function(){self._isShown||modalEl.addClass("ng-leave-active").removeClass("ng-enter ng-enter-active active")},20,!1),self.$el.off("click"),self._isShown=!1,self.scope.$parent&&self.scope.$parent.$broadcast(self.viewType+".hidden",self),self._deregisterBackButton&&self._deregisterBackButton(),ionic.views.Modal.prototype.hide.call(self),self.positionView&&ionic.off("resize",self._onWindowResize,window),$timeout(function(){$ionicBody.removeClass(self.viewType+"-open"),self.el.classList.add("hide")},self.hideDelay||320)},remove:function(){var self=this;return self.scope.$parent&&self.scope.$parent.$broadcast(self.viewType+".removed",self),self.hide().then(function(){self.scope.$destroy(),self.$el.remove()})},isShown:function(){return!!this._isShown}}),createModal=function(templateString,options){var scope=options.scope&&options.scope.$new()||$rootScope.$new(!0);options.viewType=options.viewType||"modal",extend(scope,{$hasHeader:!1,$hasSubheader:!1,$hasFooter:!1,$hasSubfooter:!1,$hasTabs:!1,$hasTabsTop:!1});var element=$compile("<ion-"+options.viewType+">"+templateString+"</ion-"+options.viewType+">")(scope);options.$el=element,options.el=element[0],options.modalEl=options.el.querySelector("."+options.viewType);var modal=new ModalView(options);return modal.scope=scope,options.scope||(scope[options.viewType]=modal),modal},modalStack=[],stack={add:function(modal){modalStack.push(modal)},remove:function(modal){var index=modalStack.indexOf(modal);index>-1&&index<modalStack.length&&modalStack.splice(index,1)},isHighest:function(modal){var index=modalStack.indexOf(modal);return index>-1&&index===modalStack.length-1}};return{fromTemplate:function(templateString,options){var modal=createModal(templateString,options||{});return modal},fromTemplateUrl:function(url,options,_){var cb;return angular.isFunction(options)&&(cb=options,options=_),$ionicTemplateLoader.load(url).then(function(templateString){var modal=createModal(templateString,options||{});return cb&&cb(modal),modal})},stack:stack}}]),IonicModule.service("$ionicNavBarDelegate",ionic.DelegateService(["align","showBackButton","showBar","title","changeTitle","setTitle","getTitle","back","getPreviousTitle"])),IonicModule.service("$ionicNavViewDelegate",ionic.DelegateService(["clearCache"])),IonicModule.constant("IONIC_BACK_PRIORITY",{view:100,sideMenu:150,modal:200,actionSheet:300,popup:400,loading:500}).provider("$ionicPlatform",function(){return{$get:["$q",function($q){var self={onHardwareBackButton:function(cb){ionic.Platform.ready(function(){document.addEventListener("backbutton",cb,!1)})},offHardwareBackButton:function(fn){ionic.Platform.ready(function(){document.removeEventListener("backbutton",fn)})},$backButtonActions:{},registerBackButtonAction:function(fn,priority,actionId){self._hasBackButtonHandler||(self.$backButtonActions={},self.onHardwareBackButton(self.hardwareBackButtonClick),self._hasBackButtonHandler=!0);var action={id:actionId?actionId:ionic.Utils.nextUid(),priority:priority?priority:0,fn:fn};return self.$backButtonActions[action.id]=action,function(){delete self.$backButtonActions[action.id]}},hardwareBackButtonClick:function(e){var priorityAction,actionId;for(actionId in self.$backButtonActions)(!priorityAction||self.$backButtonActions[actionId].priority>=priorityAction.priority)&&(priorityAction=self.$backButtonActions[actionId]);return priorityAction?(priorityAction.fn(e),priorityAction):void 0},is:function(type){return ionic.Platform.is(type)},on:function(type,cb){return ionic.Platform.ready(function(){document.addEventListener(type,cb,!1)}),function(){ionic.Platform.ready(function(){document.removeEventListener(type,cb)})}},ready:function(cb){var q=$q.defer();return ionic.Platform.ready(function(){q.resolve(),cb&&cb()}),q.promise}};return self}]}}),IonicModule.factory("$ionicPopover",["$ionicModal","$ionicPosition","$document","$window",function($ionicModal,$ionicPosition,$document,$window){function positionView(target,popoverEle){var targetEle=jqLite(target.target||target),buttonOffset=$ionicPosition.offset(targetEle),popoverWidth=popoverEle.prop("offsetWidth"),popoverHeight=popoverEle.prop("offsetHeight"),bodyWidth=$window.innerWidth,bodyHeight=$window.innerHeight,popoverCSS={left:buttonOffset.left+buttonOffset.width/2-popoverWidth/2},arrowEle=jqLite(popoverEle[0].querySelector(".popover-arrow"));popoverCSS.left<POPOVER_BODY_PADDING?popoverCSS.left=POPOVER_BODY_PADDING:popoverCSS.left+popoverWidth+POPOVER_BODY_PADDING>bodyWidth&&(popoverCSS.left=bodyWidth-popoverWidth-POPOVER_BODY_PADDING),buttonOffset.top+buttonOffset.height+popoverHeight>bodyHeight&&buttonOffset.top-popoverHeight>0?(popoverCSS.top=buttonOffset.top-popoverHeight,popoverEle.addClass("popover-bottom")):(popoverCSS.top=buttonOffset.top+buttonOffset.height,popoverEle.removeClass("popover-bottom")),arrowEle.css({left:buttonOffset.left+buttonOffset.width/2-arrowEle.prop("offsetWidth")/2-popoverCSS.left+"px"}),popoverEle.css({top:popoverCSS.top+"px",left:popoverCSS.left+"px",marginLeft:"0",opacity:"1"})}var POPOVER_BODY_PADDING=6,POPOVER_OPTIONS={viewType:"popover",hideDelay:1,animation:"none",positionView:positionView};return{fromTemplate:function(templateString,options){return $ionicModal.fromTemplate(templateString,ionic.Utils.extend(POPOVER_OPTIONS,options||{}))},fromTemplateUrl:function(url,options){return $ionicModal.fromTemplateUrl(url,ionic.Utils.extend(POPOVER_OPTIONS,options||{}))}}}]);var POPUP_TPL='<div class="popup-container" ng-class="cssClass"><div class="popup"><div class="popup-head"><h3 class="popup-title" ng-bind-html="title"></h3><h5 class="popup-sub-title" ng-bind-html="subTitle" ng-if="subTitle"></h5></div><div class="popup-body"></div><div class="popup-buttons" ng-show="buttons.length"><button ng-repeat="button in buttons" ng-click="$buttonTapped(button, $event)" class="button" ng-class="button.type || \'button-default\'" ng-bind-html="button.text"></button></div></div></div>';IonicModule.factory("$ionicPopup",["$ionicTemplateLoader","$ionicBackdrop","$q","$timeout","$rootScope","$ionicBody","$compile","$ionicPlatform","$ionicModal","IONIC_BACK_PRIORITY",function($ionicTemplateLoader,$ionicBackdrop,$q,$timeout,$rootScope,$ionicBody,$compile,$ionicPlatform,$ionicModal,IONIC_BACK_PRIORITY){function createPopup(options){options=extend({scope:null,title:"",buttons:[]},options||{});var self={};return self.scope=(options.scope||$rootScope).$new(),self.element=jqLite(POPUP_TPL),self.responseDeferred=$q.defer(),$ionicBody.get().appendChild(self.element[0]),$compile(self.element)(self.scope),extend(self.scope,{title:options.title,buttons:options.buttons,subTitle:options.subTitle,cssClass:options.cssClass,$buttonTapped:function(button,event){var result=(button.onTap||noop)(event);event=event.originalEvent||event,event.defaultPrevented||self.responseDeferred.resolve(result)}}),$q.when(options.templateUrl?$ionicTemplateLoader.load(options.templateUrl):options.template||options.content||"").then(function(template){var popupBody=jqLite(self.element[0].querySelector(".popup-body"));template?(popupBody.html(template),$compile(popupBody.contents())(self.scope)):popupBody.remove()}),self.show=function(){self.isShown||self.removed||($ionicModal.stack.add(self),self.isShown=!0,ionic.requestAnimationFrame(function(){self.isShown&&(self.element.removeClass("popup-hidden"),self.element.addClass("popup-showing active"),focusInput(self.element))}))},self.hide=function(callback){return callback=callback||noop,self.isShown?($ionicModal.stack.remove(self),self.isShown=!1,self.element.removeClass("active"),self.element.addClass("popup-hidden"),void $timeout(callback,250,!1)):callback()},self.remove=function(){!self.removed&&$ionicModal.stack.isHighest(self)&&(self.hide(function(){self.element.remove(),self.scope.$destroy()}),self.removed=!0)},self}function onHardwareBackButton(){var last=popupStack[popupStack.length-1];last&&last.responseDeferred.resolve()}function showPopup(options){function doShow(){popupStack.push(popup),$timeout(popup.show,showDelay,!1),popup.responseDeferred.promise.then(function(result){var index=popupStack.indexOf(popup);return-1!==index&&popupStack.splice(index,1),popupStack.length>0?popupStack[popupStack.length-1].show():($ionicBackdrop.release(),$timeout(function(){popupStack.length||$ionicBody.removeClass("popup-open")},400,!1),($ionicPopup._backButtonActionDone||noop)()),popup.remove(),result})}var popup=$ionicPopup._createPopup(options),showDelay=0;return popupStack.length>0?(popupStack[popupStack.length-1].hide(),showDelay=config.stackPushDelay):($ionicBody.addClass("popup-open"),$ionicBackdrop.retain(),$ionicPopup._backButtonActionDone=$ionicPlatform.registerBackButtonAction(onHardwareBackButton,IONIC_BACK_PRIORITY.popup)),popup.responseDeferred.promise.close=function(result){popup.removed||popup.responseDeferred.resolve(result)},popup.responseDeferred.notify({close:popup.responseDeferred.close}),doShow(),popup.responseDeferred.promise}function focusInput(element){var focusOn=element[0].querySelector("[autofocus]");focusOn&&focusOn.focus()}function showAlert(opts){return showPopup(extend({buttons:[{text:opts.okText||"OK",type:opts.okType||"button-positive",onTap:function(){return!0}}]},opts||{}))}function showConfirm(opts){return showPopup(extend({buttons:[{text:opts.cancelText||"Cancel",type:opts.cancelType||"button-default",onTap:function(){return!1}},{text:opts.okText||"OK",type:opts.okType||"button-positive",onTap:function(){return!0}}]},opts||{}))}function showPrompt(opts){var scope=$rootScope.$new(!0);scope.data={};var text="";return opts.template&&/<[a-z][\s\S]*>/i.test(opts.template)===!1&&(text="<span>"+opts.template+"</span>",delete opts.template),showPopup(extend({template:text+'<input ng-model="data.response" type="'+(opts.inputType||"text")+'" placeholder="'+(opts.inputPlaceholder||"")+'">',scope:scope,buttons:[{text:opts.cancelText||"Cancel",type:opts.cancelType||"button-default",onTap:function(){}},{text:opts.okText||"OK",type:opts.okType||"button-positive",onTap:function(){return scope.data.response||""}}]},opts||{}))}var config={stackPushDelay:75},popupStack=[],$ionicPopup={show:showPopup,alert:showAlert,confirm:showConfirm,prompt:showPrompt,_createPopup:createPopup,_popupStack:popupStack};return $ionicPopup}]),IonicModule.factory("$ionicPosition",["$document","$window",function($document,$window){function getStyle(el,cssprop){return el.currentStyle?el.currentStyle[cssprop]:$window.getComputedStyle?$window.getComputedStyle(el)[cssprop]:el.style[cssprop]}function isStaticPositioned(element){return"static"===(getStyle(element,"position")||"static")}var parentOffsetEl=function(element){for(var docDomEl=$document[0],offsetParent=element.offsetParent||docDomEl;offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||docDomEl};return{position:function(element){var elBCR=this.offset(element),offsetParentBCR={top:0,left:0},offsetParentEl=parentOffsetEl(element[0]);offsetParentEl!=$document[0]&&(offsetParentBCR=this.offset(jqLite(offsetParentEl)),offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop,offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft);var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}}}}]),IonicModule.service("$ionicScrollDelegate",ionic.DelegateService(["resize","scrollTop","scrollBottom","scrollTo","scrollBy","zoomTo","zoomBy","getScrollPosition","anchorScroll","freezeScroll","freezeAllScrolls","getScrollView"])),IonicModule.service("$ionicSideMenuDelegate",ionic.DelegateService(["toggleLeft","toggleRight","getOpenRatio","isOpen","isOpenLeft","isOpenRight","canDragContent","edgeDragThreshold"])),IonicModule.service("$ionicSlideBoxDelegate",ionic.DelegateService(["update","slide","select","enableSlide","previous","next","stop","autoPlay","start","currentIndex","selected","slidesCount","count","loop"])),IonicModule.service("$ionicTabsDelegate",ionic.DelegateService(["select","selectedIndex"])),function(){var templatesToCache=[];IonicModule.factory("$ionicTemplateCache",["$http","$templateCache","$timeout",function($http,$templateCache,$timeout){function $ionicTemplateCache(templates){return"undefined"==typeof templates?run():(isString(templates)&&(templates=[templates]),forEach(templates,function(template){toCache.push(template)}),void(hasRun&&run()))}function run(){var template;if($ionicTemplateCache._runCount++,hasRun=!0,0!==toCache.length){for(var i=0;4>i&&(template=toCache.pop());)isString(template)&&$http.get(template,{cache:$templateCache}),i++;toCache.length&&$timeout(run,1e3)}}var hasRun,toCache=templatesToCache;return $ionicTemplateCache._runCount=0,$ionicTemplateCache}]).config(["$stateProvider","$ionicConfigProvider",function($stateProvider,$ionicConfigProvider){var stateProviderState=$stateProvider.state;$stateProvider.state=function(stateName,definition){if("object"==typeof definition){var enabled=definition.prefetchTemplate!==!1&&templatesToCache.length<$ionicConfigProvider.templates.maxPrefetch();if(enabled&&isString(definition.templateUrl)&&templatesToCache.push(definition.templateUrl),angular.isObject(definition.views))for(var key in definition.views)enabled=definition.views[key].prefetchTemplate!==!1&&templatesToCache.length<$ionicConfigProvider.templates.maxPrefetch(),enabled&&isString(definition.views[key].templateUrl)&&templatesToCache.push(definition.views[key].templateUrl)}return stateProviderState.call($stateProvider,stateName,definition)}}]).run(["$ionicTemplateCache",function($ionicTemplateCache){$ionicTemplateCache()}])}(),IonicModule.factory("$ionicTemplateLoader",["$compile","$controller","$http","$q","$rootScope","$templateCache",function($compile,$controller,$http,$q,$rootScope,$templateCache){function fetchTemplate(url){return $http.get(url,{cache:$templateCache}).then(function(response){return response.data&&response.data.trim()})}function loadAndCompile(options){options=extend({template:"",templateUrl:"",scope:null,controller:null,locals:{},appendTo:null},options||{});var templatePromise=options.templateUrl?this.load(options.templateUrl):$q.when(options.template);return templatePromise.then(function(template){var controller,scope=options.scope||$rootScope.$new(),element=jqLite("<div>").html(template).contents();return options.controller&&(controller=$controller(options.controller,extend(options.locals,{$scope:scope})),element.children().data("$ngControllerController",controller)),options.appendTo&&jqLite(options.appendTo).append(element),$compile(element)(scope),{element:element,scope:scope}})}return{load:fetchTemplate,compile:loadAndCompile}}]),IonicModule.factory("$ionicViewService",["$ionicHistory","$log",function($ionicHistory,$log){function warn(oldMethod,newMethod){$log.warn("$ionicViewService"+oldMethod+" is deprecated, please use $ionicHistory"+newMethod+" instead: http://ionicframework.com/docs/nightly/api/service/$ionicHistory/");
}warn("","");var methodsMap={getCurrentView:"currentView",getBackView:"backView",getForwardView:"forwardView",getCurrentStateName:"currentStateName",nextViewOptions:"nextViewOptions",clearHistory:"clearHistory"};return forEach(methodsMap,function(newMethod,oldMethod){methodsMap[oldMethod]=function(){return warn("."+oldMethod,"."+newMethod),$ionicHistory[newMethod].apply(this,arguments)}}),methodsMap}]),IonicModule.factory("$ionicViewSwitcher",["$timeout","$document","$q","$ionicClickBlock","$ionicConfig","$ionicNavBarDelegate",function($timeout,$document,$q,$ionicClickBlock,$ionicConfig,$ionicNavBarDelegate){function getViewElementIdentifier(locals,view){return viewState(locals)["abstract"]?viewState(locals).name:view?view.stateId||view.viewId:ionic.Utils.nextUid()}function viewState(locals){return locals&&locals.$$state&&locals.$$state.self||{}}function getTransitionData(viewLocals,enteringEle,direction,view){var state=viewState(viewLocals),viewTransition=nextTransition||cachedAttr(enteringEle,"view-transition")||state.viewTransition||$ionicConfig.views.transition()||"ios",navBarTransition=$ionicConfig.navBar.transition();return direction=nextDirection||cachedAttr(enteringEle,"view-direction")||state.viewDirection||direction||"none",extend(getViewData(view),{transition:viewTransition,navBarTransition:"view"===navBarTransition?viewTransition:navBarTransition,direction:direction,shouldAnimate:"none"!==viewTransition&&"none"!==direction})}function getViewData(view){return view=view||{},{viewId:view.viewId,historyId:view.historyId,stateId:view.stateId,stateName:view.stateName,stateParams:view.stateParams}}function navViewAttr(ele,value){return arguments.length>1?void cachedAttr(ele,NAV_VIEW_ATTR,value):cachedAttr(ele,NAV_VIEW_ATTR)}function destroyViewEle(ele){if(ele&&ele.length){var viewScope=ele.scope();viewScope&&(viewScope.$emit("$ionicView.unloaded",ele.data(DATA_VIEW)),viewScope.$destroy()),ele.remove()}}var nextTransition,nextDirection,TRANSITIONEND_EVENT="webkitTransitionEnd transitionend",DATA_NO_CACHE="$noCache",DATA_DESTROY_ELE="$destroyEle",DATA_ELE_IDENTIFIER="$eleId",DATA_VIEW_ACCESSED="$accessed",DATA_FALLBACK_TIMER="$fallbackTimer",DATA_VIEW="$viewData",NAV_VIEW_ATTR="nav-view",VIEW_STATUS_ACTIVE="active",VIEW_STATUS_CACHED="cached",VIEW_STATUS_STAGED="stage",transitionCounter=0;ionic.transition=ionic.transition||{},ionic.transition.isActive=!1;var isActiveTimer,cachedAttr=ionic.DomUtil.cachedAttr,transitionPromises=[],defaultTimeout=1100,ionicViewSwitcher={create:function(navViewCtrl,viewLocals,enteringView,leavingView,renderStart,renderEnd){var enteringEle,leavingEle,alreadyInDom,transitionId=++transitionCounter,switcher={init:function(registerData,callback){ionicViewSwitcher.isTransitioning(!0),switcher.loadViewElements(registerData),switcher.render(registerData,function(){callback&&callback()})},loadViewElements:function(registerData){var x,l,viewEle,viewElements=navViewCtrl.getViewElements(),enteringEleIdentifier=getViewElementIdentifier(viewLocals,enteringView),navViewActiveEleId=navViewCtrl.activeEleId();for(x=0,l=viewElements.length;l>x&&(viewEle=viewElements.eq(x),viewEle.data(DATA_ELE_IDENTIFIER)===enteringEleIdentifier?viewEle.data(DATA_NO_CACHE)?(viewEle.data(DATA_ELE_IDENTIFIER,enteringEleIdentifier+ionic.Utils.nextUid()),viewEle.data(DATA_DESTROY_ELE,!0)):enteringEle=viewEle:isDefined(navViewActiveEleId)&&viewEle.data(DATA_ELE_IDENTIFIER)===navViewActiveEleId&&(leavingEle=viewEle),!enteringEle||!leavingEle);x++);alreadyInDom=!!enteringEle,alreadyInDom||(enteringEle=registerData.ele||ionicViewSwitcher.createViewEle(viewLocals),enteringEle.data(DATA_ELE_IDENTIFIER,enteringEleIdentifier)),renderEnd&&navViewCtrl.activeEleId(enteringEleIdentifier),registerData.ele=null},render:function(registerData,callback){if(alreadyInDom)ionic.Utils.reconnectScope(enteringEle.scope());else{navViewAttr(enteringEle,VIEW_STATUS_STAGED);var enteringData=getTransitionData(viewLocals,enteringEle,registerData.direction,enteringView),transitionFn=$ionicConfig.transitions.views[enteringData.transition]||$ionicConfig.transitions.views.none;transitionFn(enteringEle,null,enteringData.direction,!0).run(0),enteringEle.data(DATA_VIEW,{viewId:enteringData.viewId,historyId:enteringData.historyId,stateName:enteringData.stateName,stateParams:enteringData.stateParams}),(viewState(viewLocals).cache===!1||"false"===viewState(viewLocals).cache||"false"==enteringEle.attr("cache-view")||0===$ionicConfig.views.maxCache())&&enteringEle.data(DATA_NO_CACHE,!0);var viewScope=navViewCtrl.appendViewElement(enteringEle,viewLocals);delete enteringData.direction,delete enteringData.transition,viewScope.$emit("$ionicView.loaded",enteringData)}enteringEle.data(DATA_VIEW_ACCESSED,Date.now()),callback&&callback()},transition:function(direction,enableBack,allowAnimate){function onReflow(){navViewAttr(enteringEle,viewTransition.shouldAnimate?"entering":VIEW_STATUS_ACTIVE),navViewAttr(leavingEle,viewTransition.shouldAnimate?"leaving":VIEW_STATUS_CACHED),viewTransition.run(1),$ionicNavBarDelegate._instances.forEach(function(instance){instance.triggerTransitionStart(transitionId)}),viewTransition.shouldAnimate||transitionComplete()}function completeOnTransitionEnd(ev){ev.target===this&&transitionComplete()}function transitionComplete(){transitionComplete.x||(transitionComplete.x=!0,enteringEle.off(TRANSITIONEND_EVENT,completeOnTransitionEnd),$timeout.cancel(enteringEle.data(DATA_FALLBACK_TIMER)),leavingEle&&$timeout.cancel(leavingEle.data(DATA_FALLBACK_TIMER)),switcher.emit("after",enteringData,leavingData),deferred&&deferred.resolve(navViewCtrl),transitionId===transitionCounter&&($q.all(transitionPromises).then(ionicViewSwitcher.transitionEnd),switcher.cleanup(enteringData)),$ionicNavBarDelegate._instances.forEach(function(instance){instance.triggerTransitionEnd()}),nextTransition=nextDirection=enteringView=leavingView=enteringEle=leavingEle=null)}function cancelOnTransitionEnd(ev){ev.target===this&&cancelTransition()}function cancelTransition(){navViewAttr(enteringEle,VIEW_STATUS_CACHED),navViewAttr(leavingEle,VIEW_STATUS_ACTIVE),enteringEle.off(TRANSITIONEND_EVENT,cancelOnTransitionEnd),$timeout.cancel(enteringEle.data(DATA_FALLBACK_TIMER)),ionicViewSwitcher.transitionEnd([navViewCtrl])}var deferred,enteringData=getTransitionData(viewLocals,enteringEle,direction,enteringView),leavingData=extend(extend({},enteringData),getViewData(leavingView));enteringData.transitionId=leavingData.transitionId=transitionId,enteringData.fromCache=!!alreadyInDom,enteringData.enableBack=!!enableBack,enteringData.renderStart=renderStart,enteringData.renderEnd=renderEnd,cachedAttr(enteringEle.parent(),"nav-view-transition",enteringData.transition),cachedAttr(enteringEle.parent(),"nav-view-direction",enteringData.direction),$timeout.cancel(enteringEle.data(DATA_FALLBACK_TIMER));var transitionFn=$ionicConfig.transitions.views[enteringData.transition]||$ionicConfig.transitions.views.none,viewTransition=transitionFn(enteringEle,leavingEle,enteringData.direction,enteringData.shouldAnimate&&allowAnimate&&renderEnd);if(viewTransition.shouldAnimate&&(enteringEle.on(TRANSITIONEND_EVENT,completeOnTransitionEnd),enteringEle.data(DATA_FALLBACK_TIMER,$timeout(transitionComplete,defaultTimeout)),$ionicClickBlock.show(defaultTimeout)),renderStart&&(switcher.emit("before",enteringData,leavingData),navViewAttr(enteringEle,VIEW_STATUS_STAGED),viewTransition.run(0)),renderEnd&&(deferred=$q.defer(),transitionPromises.push(deferred.promise)),renderStart&&renderEnd)$timeout(onReflow,16);else{if(!renderEnd)return navViewAttr(enteringEle,"entering"),navViewAttr(leavingEle,"leaving"),{run:viewTransition.run,cancel:function(shouldAnimate){shouldAnimate?(enteringEle.on(TRANSITIONEND_EVENT,cancelOnTransitionEnd),enteringEle.data(DATA_FALLBACK_TIMER,$timeout(cancelTransition,defaultTimeout)),$ionicClickBlock.show(defaultTimeout)):cancelTransition(),viewTransition.shouldAnimate=shouldAnimate,viewTransition.run(0),viewTransition=null}};renderEnd&&onReflow()}},emit:function(step,enteringData,leavingData){var enteringScope=enteringEle.scope(),leavingScope=leavingEle&&leavingEle.scope();"after"==step&&(enteringScope&&enteringScope.$emit("$ionicView.enter",enteringData),leavingScope?leavingScope.$emit("$ionicView.leave",leavingData):enteringScope&&leavingData&&leavingData.viewId&&enteringScope.$emit("$ionicNavView.leave",leavingData)),enteringScope&&enteringScope.$emit("$ionicView."+step+"Enter",enteringData),leavingScope?leavingScope.$emit("$ionicView."+step+"Leave",leavingData):enteringScope&&leavingData&&leavingData.viewId&&enteringScope.$emit("$ionicNavView."+step+"Leave",leavingData)},cleanup:function(transData){leavingEle&&"back"==transData.direction&&!$ionicConfig.views.forwardCache()&&destroyViewEle(leavingEle);var x,viewElement,removableEle,viewElements=navViewCtrl.getViewElements(),viewElementsLength=viewElements.length,removeOldestAccess=viewElementsLength-1>$ionicConfig.views.maxCache(),oldestAccess=Date.now();for(x=0;viewElementsLength>x;x++)viewElement=viewElements.eq(x),removeOldestAccess&&viewElement.data(DATA_VIEW_ACCESSED)<oldestAccess?(oldestAccess=viewElement.data(DATA_VIEW_ACCESSED),removableEle=viewElements.eq(x)):viewElement.data(DATA_DESTROY_ELE)&&navViewAttr(viewElement)!=VIEW_STATUS_ACTIVE&&destroyViewEle(viewElement);destroyViewEle(removableEle),enteringEle.data(DATA_NO_CACHE)&&enteringEle.data(DATA_DESTROY_ELE,!0)},enteringEle:function(){return enteringEle},leavingEle:function(){return leavingEle}};return switcher},transitionEnd:function(navViewCtrls){forEach(navViewCtrls,function(navViewCtrl){navViewCtrl.transitionEnd()}),ionicViewSwitcher.isTransitioning(!1),$ionicClickBlock.hide(),transitionPromises=[]},nextTransition:function(val){nextTransition=val},nextDirection:function(val){nextDirection=val},isTransitioning:function(val){return arguments.length&&(ionic.transition.isActive=!!val,$timeout.cancel(isActiveTimer),val&&(isActiveTimer=$timeout(function(){ionicViewSwitcher.isTransitioning(!1)},999))),ionic.transition.isActive},createViewEle:function(viewLocals){var containerEle=$document[0].createElement("div");return viewLocals&&viewLocals.$template&&(containerEle.innerHTML=viewLocals.$template,1===containerEle.children.length)?(containerEle.children[0].classList.add("pane"),jqLite(containerEle.children[0])):(containerEle.className="pane",jqLite(containerEle))},viewEleIsActive:function(viewEle,isActiveAttr){navViewAttr(viewEle,isActiveAttr?VIEW_STATUS_ACTIVE:VIEW_STATUS_CACHED)},getTransitionData:getTransitionData,navViewAttr:navViewAttr,destroyViewEle:destroyViewEle};return ionicViewSwitcher}]),IonicModule.config(["$provide",function($provide){$provide.decorator("$compile",["$delegate",function($compile){return $compile.$$addScopeInfo=function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)},$compile}])}]),IonicModule.config(["$provide",function($provide){function $LocationDecorator($location,$timeout){return $location.__hash=$location.hash,$location.hash=function(value){return isDefined(value)&&value.length>0&&$timeout(function(){var scroll=document.querySelector(".scroll-content");scroll&&(scroll.scrollTop=0)},0,!1),$location.__hash(value)},$location}$provide.decorator("$location",["$delegate","$timeout",$LocationDecorator])}]),IonicModule.controller("$ionicHeaderBar",["$scope","$element","$attrs","$q","$ionicConfig","$ionicHistory",function($scope,$element,$attrs,$q,$ionicConfig,$ionicHistory){function getEle(className){return eleCache[className]||(eleCache[className]=$element[0].querySelector("."+className)),eleCache[className]}var TITLE="title",BACK_TEXT="back-text",BACK_BUTTON="back-button",DEFAULT_TITLE="default-title",PREVIOUS_TITLE="previous-title",HIDE="hide",self=this,titleText="",previousTitleText="",titleLeft=0,titleRight=0,titleCss="",isBackEnabled=!1,isBackShown=!0,isNavBackShown=!0,isBackElementShown=!1,titleTextWidth=0;self.beforeEnter=function(viewData){$scope.$broadcast("$ionicView.beforeEnter",viewData)},self.title=function(newTitleText){return arguments.length&&newTitleText!==titleText&&(getEle(TITLE).innerHTML=newTitleText,titleText=newTitleText,titleTextWidth=0),titleText},self.enableBack=function(shouldEnable,disableReset){return arguments.length&&(isBackEnabled=shouldEnable,disableReset||self.updateBackButton()),isBackEnabled},self.showBack=function(shouldShow,disableReset){return arguments.length&&(isBackShown=shouldShow,disableReset||self.updateBackButton()),isBackShown},self.showNavBack=function(shouldShow){isNavBackShown=shouldShow,self.updateBackButton()},self.updateBackButton=function(){var ele;(isBackShown&&isNavBackShown&&isBackEnabled)!==isBackElementShown&&(isBackElementShown=isBackShown&&isNavBackShown&&isBackEnabled,ele=getEle(BACK_BUTTON),ele&&ele.classList[isBackElementShown?"remove":"add"](HIDE)),isBackEnabled&&(ele=ele||getEle(BACK_BUTTON),ele&&(self.backButtonIcon!==$ionicConfig.backButton.icon()&&(ele=getEle(BACK_BUTTON+" .icon"),ele&&(self.backButtonIcon=$ionicConfig.backButton.icon(),ele.className="icon "+self.backButtonIcon)),self.backButtonText!==$ionicConfig.backButton.text()&&(ele=getEle(BACK_BUTTON+" .back-text"),ele&&(ele.textContent=self.backButtonText=$ionicConfig.backButton.text()))))},self.titleTextWidth=function(){if(!titleTextWidth){var bounds=ionic.DomUtil.getTextBounds(getEle(TITLE));titleTextWidth=Math.min(bounds&&bounds.width||30)}return titleTextWidth},self.titleWidth=function(){var titleWidth=self.titleTextWidth(),offsetWidth=getEle(TITLE).offsetWidth;return titleWidth>offsetWidth&&(titleWidth=offsetWidth+(titleLeft-titleRight-5)),titleWidth},self.titleTextX=function(){return $element[0].offsetWidth/2-self.titleWidth()/2},self.titleLeftRight=function(){return titleLeft-titleRight},self.backButtonTextLeft=function(){for(var offsetLeft=0,ele=getEle(BACK_TEXT);ele;)offsetLeft+=ele.offsetLeft,ele=ele.parentElement;return offsetLeft},self.resetBackButton=function(viewData){if($ionicConfig.backButton.previousTitleText()){var previousTitleEle=getEle(PREVIOUS_TITLE);if(previousTitleEle){previousTitleEle.classList.remove(HIDE);var view=viewData&&$ionicHistory.getViewById(viewData.viewId),newPreviousTitleText=$ionicHistory.backTitle(view);newPreviousTitleText!==previousTitleText&&(previousTitleText=previousTitleEle.innerHTML=newPreviousTitleText)}var defaultTitleEle=getEle(DEFAULT_TITLE);defaultTitleEle&&defaultTitleEle.classList.remove(HIDE)}},self.align=function(textAlign){var titleEle=getEle(TITLE);textAlign=textAlign||$attrs.alignTitle||$ionicConfig.navBar.alignTitle();var widths=self.calcWidths(textAlign,!1);if(isBackShown&&previousTitleText&&$ionicConfig.backButton.previousTitleText()){var previousTitleWidths=self.calcWidths(textAlign,!0),availableTitleWidth=$element[0].offsetWidth-previousTitleWidths.titleLeft-previousTitleWidths.titleRight;self.titleTextWidth()<=availableTitleWidth&&(widths=previousTitleWidths)}return self.updatePositions(titleEle,widths.titleLeft,widths.titleRight,widths.buttonsLeft,widths.buttonsRight,widths.css,widths.showPrevTitle)},self.calcWidths=function(textAlign,isPreviousTitle){var x,y,z,b,c,d,childSize,bounds,isCountRightOfTitle,titleEle=getEle(TITLE),backBtnEle=getEle(BACK_BUTTON),childNodes=$element[0].childNodes,buttonsLeft=0,buttonsRight=0,updateTitleLeft=0,updateTitleRight=0,updateCss="",backButtonWidth=0;for(x=0;x<childNodes.length;x++){if(c=childNodes[x],childSize=0,1==c.nodeType){if(c===titleEle){isCountRightOfTitle=!0;continue}if(c.classList.contains(HIDE))continue;if(isBackShown&&c===backBtnEle){for(y=0;y<c.childNodes.length;y++)if(b=c.childNodes[y],1==b.nodeType)if(b.classList.contains(BACK_TEXT))for(z=0;z<b.children.length;z++)if(d=b.children[z],isPreviousTitle){if(d.classList.contains(DEFAULT_TITLE))continue;backButtonWidth+=d.offsetWidth}else{if(d.classList.contains(PREVIOUS_TITLE))continue;backButtonWidth+=d.offsetWidth}else backButtonWidth+=b.offsetWidth;else 3==b.nodeType&&b.nodeValue.trim()&&(bounds=ionic.DomUtil.getTextBounds(b),backButtonWidth+=bounds&&bounds.width||0);childSize=backButtonWidth||c.offsetWidth}else childSize=c.offsetWidth}else 3==c.nodeType&&c.nodeValue.trim()&&(bounds=ionic.DomUtil.getTextBounds(c),childSize=bounds&&bounds.width||0);isCountRightOfTitle?buttonsRight+=childSize:buttonsLeft+=childSize}if("left"==textAlign)updateCss="title-left",buttonsLeft&&(updateTitleLeft=buttonsLeft+15),buttonsRight&&(updateTitleRight=buttonsRight+15);else if("right"==textAlign)updateCss="title-right",buttonsLeft&&(updateTitleLeft=buttonsLeft+15),buttonsRight&&(updateTitleRight=buttonsRight+15);else{var margin=Math.max(buttonsLeft,buttonsRight)+10;margin>10&&(updateTitleLeft=updateTitleRight=margin)}return{backButtonWidth:backButtonWidth,buttonsLeft:buttonsLeft,buttonsRight:buttonsRight,titleLeft:updateTitleLeft,titleRight:updateTitleRight,showPrevTitle:isPreviousTitle,css:updateCss}},self.updatePositions=function(titleEle,updateTitleLeft,updateTitleRight,buttonsLeft,buttonsRight,updateCss,showPreviousTitle){var deferred=$q.defer();if(titleEle&&(updateTitleLeft!==titleLeft&&(titleEle.style.left=updateTitleLeft?updateTitleLeft+"px":"",titleLeft=updateTitleLeft),updateTitleRight!==titleRight&&(titleEle.style.right=updateTitleRight?updateTitleRight+"px":"",titleRight=updateTitleRight),updateCss!==titleCss&&(updateCss&&titleEle.classList.add(updateCss),titleCss&&titleEle.classList.remove(titleCss),titleCss=updateCss)),$ionicConfig.backButton.previousTitleText()){var prevTitle=getEle(PREVIOUS_TITLE),defaultTitle=getEle(DEFAULT_TITLE);prevTitle&&prevTitle.classList[showPreviousTitle?"remove":"add"](HIDE),defaultTitle&&defaultTitle.classList[showPreviousTitle?"add":"remove"](HIDE)}return ionic.requestAnimationFrame(function(){if(titleEle&&titleEle.offsetWidth+10<titleEle.scrollWidth){var minRight=buttonsRight+5,testRight=$element[0].offsetWidth-titleLeft-self.titleTextWidth()-20;updateTitleRight=minRight>testRight?minRight:testRight,updateTitleRight!==titleRight&&(titleEle.style.right=updateTitleRight+"px",titleRight=updateTitleRight)}deferred.resolve()}),deferred.promise},self.setCss=function(elementClassname,css){ionic.DomUtil.cachedStyles(getEle(elementClassname),css)};var eleCache={};$scope.$on("$destroy",function(){for(var n in eleCache)eleCache[n]=null})}]),IonicModule.controller("$ionInfiniteScroll",["$scope","$attrs","$element","$timeout",function($scope,$attrs,$element,$timeout){function onInfinite(){ionic.requestAnimationFrame(function(){$element[0].classList.add("active")}),self.isLoading=!0,$scope.$parent&&$scope.$parent.$apply($attrs.onInfinite||"")}function finishInfiniteScroll(){ionic.requestAnimationFrame(function(){$element[0].classList.remove("active")}),$timeout(function(){self.jsScrolling&&self.scrollView.resize(),(self.jsScrolling&&self.scrollView.__container&&self.scrollView.__container.offsetHeight>0||!self.jsScrolling)&&self.checkBounds()},30,!1),self.isLoading=!1}function checkInfiniteBounds(){if(!self.isLoading){var maxScroll={};if(self.jsScrolling){maxScroll=self.getJSMaxScroll();var scrollValues=self.scrollView.getValues();(-1!==maxScroll.left&&scrollValues.left>=maxScroll.left||-1!==maxScroll.top&&scrollValues.top>=maxScroll.top)&&onInfinite()}else maxScroll=self.getNativeMaxScroll(),(-1!==maxScroll.left&&self.scrollEl.scrollLeft>=maxScroll.left-self.scrollEl.clientWidth||-1!==maxScroll.top&&self.scrollEl.scrollTop>=maxScroll.top-self.scrollEl.clientHeight)&&onInfinite()}}function calculateMaxValue(maximum){var distance=($attrs.distance||"2.5%").trim(),isPercent=-1!==distance.indexOf("%");return isPercent?maximum*(1-parseFloat(distance)/100):maximum-parseFloat(distance)}var self=this;self.isLoading=!1,$scope.icon=function(){return isDefined($attrs.icon)?$attrs.icon:"ion-load-d"},$scope.spinner=function(){return isDefined($attrs.spinner)?$attrs.spinner:""},$scope.$on("scroll.infiniteScrollComplete",function(){finishInfiniteScroll()}),$scope.$on("$destroy",function(){self.scrollCtrl&&self.scrollCtrl.$element&&self.scrollCtrl.$element.off("scroll",self.checkBounds),self.scrollEl&&self.scrollEl.removeEventListener&&self.scrollEl.removeEventListener("scroll",self.checkBounds)}),self.checkBounds=ionic.Utils.throttle(checkInfiniteBounds,300),self.getJSMaxScroll=function(){var maxValues=self.scrollView.getScrollMax();return{left:self.scrollView.options.scrollingX?calculateMaxValue(maxValues.left):-1,top:self.scrollView.options.scrollingY?calculateMaxValue(maxValues.top):-1}},self.getNativeMaxScroll=function(){var maxValues={left:self.scrollEl.scrollWidth,top:self.scrollEl.scrollHeight},computedStyle=window.getComputedStyle(self.scrollEl)||{};return{left:"scroll"===computedStyle.overflowX||"auto"===computedStyle.overflowX||"scroll"===self.scrollEl.style["overflow-x"]?calculateMaxValue(maxValues.left):-1,top:"scroll"===computedStyle.overflowY||"auto"===computedStyle.overflowY||"scroll"===self.scrollEl.style["overflow-y"]?calculateMaxValue(maxValues.top):-1}},self.__finishInfiniteScroll=finishInfiniteScroll}]),IonicModule.service("$ionicListDelegate",ionic.DelegateService(["showReorder","showDelete","canSwipeItems","closeOptionButtons"])).controller("$ionicList",["$scope","$attrs","$ionicListDelegate","$ionicHistory",function($scope,$attrs,$ionicListDelegate,$ionicHistory){var self=this,isSwipeable=!0,isReorderShown=!1,isDeleteShown=!1,deregisterInstance=$ionicListDelegate._registerInstance(self,$attrs.delegateHandle,function(){return $ionicHistory.isActiveScope($scope)});$scope.$on("$destroy",deregisterInstance),self.showReorder=function(show){return arguments.length&&(isReorderShown=!!show),isReorderShown},self.showDelete=function(show){return arguments.length&&(isDeleteShown=!!show),isDeleteShown},self.canSwipeItems=function(can){return arguments.length&&(isSwipeable=!!can),isSwipeable},self.closeOptionButtons=function(){self.listView&&self.listView.clearDragEffects()}}]),IonicModule.controller("$ionicNavBar",["$scope","$element","$attrs","$compile","$timeout","$ionicNavBarDelegate","$ionicConfig","$ionicHistory",function($scope,$element,$attrs,$compile,$timeout,$ionicNavBarDelegate,$ionicConfig,$ionicHistory){function deprecatedWarning(oldMethod,newMethod){var warn=console.warn||console.log;warn&&warn.call(console,"navBarController."+oldMethod+" is deprecated, please use "+newMethod+" instead")}function createNavElement(type){return navElementHtml[type]?jqLite(navElementHtml[type]):void 0}function getOnScreenHeaderBar(){for(var x=0;x<headerBars.length;x++)if(headerBars[x].isActive)return headerBars[x]}function getOffScreenHeaderBar(){for(var x=0;x<headerBars.length;x++)if(!headerBars[x].isActive)return headerBars[x]}function navBarAttr(ctrl,val){ctrl&&ionic.DomUtil.cachedAttr(ctrl.containerEle(),"nav-bar",val)}function navSwipeAttr(val){ionic.DomUtil.cachedAttr($element,"nav-swipe",val)}var queuedTransitionStart,queuedTransitionEnd,latestTransitionId,CSS_HIDE="hide",DATA_NAV_BAR_CTRL="$ionNavBarController",PRIMARY_BUTTONS="primaryButtons",SECONDARY_BUTTONS="secondaryButtons",BACK_BUTTON="backButton",ITEM_TYPES="primaryButtons secondaryButtons leftButtons rightButtons title".split(" "),self=this,headerBars=[],navElementHtml={},isVisible=!0;$element.parent().data(DATA_NAV_BAR_CTRL,self);var delegateHandle=$attrs.delegateHandle||"navBar"+ionic.Utils.nextUid(),deregisterInstance=$ionicNavBarDelegate._registerInstance(self,delegateHandle);self.init=function(){$element.addClass("nav-bar-container"),ionic.DomUtil.cachedAttr($element,"nav-bar-transition",$ionicConfig.views.transition()),self.createHeaderBar(!1),self.createHeaderBar(!0),$scope.$emit("ionNavBar.init",delegateHandle)},self.createHeaderBar=function(isActive){function positionItem(ele,itemType){ele&&("title"===itemType?titleEle.append(ele):"rightButtons"==itemType||itemType==SECONDARY_BUTTONS&&"left"!=$ionicConfig.navBar.positionSecondaryButtons()||itemType==PRIMARY_BUTTONS&&"right"==$ionicConfig.navBar.positionPrimaryButtons()?(rightButtonsEle||(rightButtonsEle=jqLite('<div class="buttons buttons-right">'),headerBarEle.append(rightButtonsEle)),itemType==SECONDARY_BUTTONS?rightButtonsEle.append(ele):rightButtonsEle.prepend(ele)):(leftButtonsEle||(leftButtonsEle=jqLite('<div class="buttons buttons-left">'),navEle[BACK_BUTTON]?navEle[BACK_BUTTON].after(leftButtonsEle):headerBarEle.prepend(leftButtonsEle)),itemType==SECONDARY_BUTTONS?leftButtonsEle.append(ele):leftButtonsEle.prepend(ele)))}var containerEle=jqLite('<div class="nav-bar-block">');ionic.DomUtil.cachedAttr(containerEle,"nav-bar",isActive?"active":"cached");var alignTitle=$attrs.alignTitle||$ionicConfig.navBar.alignTitle(),headerBarEle=jqLite("<ion-header-bar>").addClass($attrs["class"]).attr("align-title",alignTitle);isDefined($attrs.noTapScroll)&&headerBarEle.attr("no-tap-scroll",$attrs.noTapScroll);var leftButtonsEle,rightButtonsEle,titleEle=jqLite('<div class="title title-'+alignTitle+'">'),navEle={},lastViewItemEle={};navEle[BACK_BUTTON]=createNavElement(BACK_BUTTON),navEle[BACK_BUTTON]&&headerBarEle.append(navEle[BACK_BUTTON]),headerBarEle.append(titleEle),forEach(ITEM_TYPES,function(itemType){navEle[itemType]=createNavElement(itemType),positionItem(navEle[itemType],itemType)});for(var x=0;x<headerBarEle[0].children.length;x++)headerBarEle[0].children[x].classList.add("header-item");containerEle.append(headerBarEle),$element.append($compile(containerEle)($scope.$new()));var headerBarCtrl=headerBarEle.data("$ionHeaderBarController");headerBarCtrl.backButtonIcon=$ionicConfig.backButton.icon(),headerBarCtrl.backButtonText=$ionicConfig.backButton.text();var headerBarInstance={isActive:isActive,title:function(newTitleText){headerBarCtrl.title(newTitleText)},setItem:function(navBarItemEle,itemType){headerBarInstance.removeItem(itemType),navBarItemEle?("title"===itemType&&headerBarInstance.title(""),positionItem(navBarItemEle,itemType),navEle[itemType]&&navEle[itemType].addClass(CSS_HIDE),lastViewItemEle[itemType]=navBarItemEle):navEle[itemType]&&navEle[itemType].removeClass(CSS_HIDE)},removeItem:function(itemType){lastViewItemEle[itemType]&&(lastViewItemEle[itemType].scope().$destroy(),lastViewItemEle[itemType].remove(),lastViewItemEle[itemType]=null)},containerEle:function(){return containerEle},headerBarEle:function(){return headerBarEle},afterLeave:function(){forEach(ITEM_TYPES,function(itemType){headerBarInstance.removeItem(itemType)}),headerBarCtrl.resetBackButton()},controller:function(){return headerBarCtrl},destroy:function(){forEach(ITEM_TYPES,function(itemType){headerBarInstance.removeItem(itemType)}),containerEle.scope().$destroy();for(var n in navEle)navEle[n]&&(navEle[n].removeData(),navEle[n]=null);leftButtonsEle&&leftButtonsEle.removeData(),rightButtonsEle&&rightButtonsEle.removeData(),titleEle.removeData(),headerBarEle.removeData(),containerEle.remove(),containerEle=headerBarEle=titleEle=leftButtonsEle=rightButtonsEle=null}};return headerBars.push(headerBarInstance),headerBarInstance},self.navElement=function(type,html){return isDefined(html)&&(navElementHtml[type]=html),navElementHtml[type]},self.update=function(viewData){var showNavBar=!viewData.hasHeaderBar&&viewData.showNavBar;viewData.transition=$ionicConfig.views.transition(),showNavBar||(viewData.direction="none"),self.enable(showNavBar);var enteringHeaderBar=self.isInitialized?getOffScreenHeaderBar():getOnScreenHeaderBar(),leavingHeaderBar=self.isInitialized?getOnScreenHeaderBar():null,enteringHeaderCtrl=enteringHeaderBar.controller();enteringHeaderCtrl.enableBack(viewData.enableBack,!0),enteringHeaderCtrl.showBack(viewData.showBack,!0),enteringHeaderCtrl.updateBackButton(),self.title(viewData.title,enteringHeaderBar),self.showBar(showNavBar),viewData.navBarItems&&forEach(ITEM_TYPES,function(itemType){enteringHeaderBar.setItem(viewData.navBarItems[itemType],itemType)}),self.transition(enteringHeaderBar,leavingHeaderBar,viewData),self.isInitialized=!0,navSwipeAttr("")},self.transition=function(enteringHeaderBar,leavingHeaderBar,viewData){function transitionEnd(){for(var x=0;x<headerBars.length;x++)headerBars[x].isActive=!1;enteringHeaderBar.isActive=!0,navBarAttr(enteringHeaderBar,"active"),navBarAttr(leavingHeaderBar,"cached"),self.activeTransition=navBarTransition=queuedTransitionEnd=null}var enteringHeaderBarCtrl=enteringHeaderBar.controller(),transitionFn=$ionicConfig.transitions.navBar[viewData.navBarTransition]||$ionicConfig.transitions.navBar.none,transitionId=viewData.transitionId;enteringHeaderBarCtrl.beforeEnter(viewData);var navBarTransition=transitionFn(enteringHeaderBar,leavingHeaderBar,viewData.direction,viewData.shouldAnimate&&self.isInitialized);ionic.DomUtil.cachedAttr($element,"nav-bar-transition",viewData.navBarTransition),ionic.DomUtil.cachedAttr($element,"nav-bar-direction",viewData.direction),navBarTransition.shouldAnimate&&viewData.renderEnd?navBarAttr(enteringHeaderBar,"stage"):(navBarAttr(enteringHeaderBar,"entering"),navBarAttr(leavingHeaderBar,"leaving")),enteringHeaderBarCtrl.resetBackButton(viewData),navBarTransition.run(0),self.activeTransition={run:function(step){navBarTransition.shouldAnimate=!1,navBarTransition.direction="back",navBarTransition.run(step)},cancel:function(shouldAnimate,speed,cancelData){navSwipeAttr(speed),navBarAttr(leavingHeaderBar,"active"),navBarAttr(enteringHeaderBar,"cached"),navBarTransition.shouldAnimate=shouldAnimate,navBarTransition.run(0),self.activeTransition=navBarTransition=null;var runApply;cancelData.showBar!==self.showBar()&&self.showBar(cancelData.showBar),cancelData.showBackButton!==self.showBackButton()&&self.showBackButton(cancelData.showBackButton),runApply&&$scope.$apply()},complete:function(shouldAnimate,speed){navSwipeAttr(speed),navBarTransition.shouldAnimate=shouldAnimate,navBarTransition.run(1),queuedTransitionEnd=transitionEnd}},$timeout(enteringHeaderBarCtrl.align,16),(queuedTransitionStart=function(){latestTransitionId===transitionId&&(navBarAttr(enteringHeaderBar,"entering"),navBarAttr(leavingHeaderBar,"leaving"),navBarTransition.run(1),queuedTransitionEnd=function(){latestTransitionId!=transitionId&&navBarTransition.shouldAnimate||transitionEnd()},queuedTransitionStart=null)})()},self.triggerTransitionStart=function(triggerTransitionId){latestTransitionId=triggerTransitionId,queuedTransitionStart&&queuedTransitionStart()},self.triggerTransitionEnd=function(){queuedTransitionEnd&&queuedTransitionEnd()},self.showBar=function(shouldShow){return arguments.length&&(self.visibleBar(shouldShow),$scope.$parent.$hasHeader=!!shouldShow),!!$scope.$parent.$hasHeader},self.visibleBar=function(shouldShow){shouldShow&&!isVisible?($element.removeClass(CSS_HIDE),self.align()):!shouldShow&&isVisible&&$element.addClass(CSS_HIDE),isVisible=shouldShow},self.enable=function(val){self.visibleBar(val);for(var x=0;x<$ionicNavBarDelegate._instances.length;x++)$ionicNavBarDelegate._instances[x]!==self&&$ionicNavBarDelegate._instances[x].visibleBar(!1)},self.showBackButton=function(shouldShow){if(arguments.length){for(var x=0;x<headerBars.length;x++)headerBars[x].controller().showNavBack(!!shouldShow);$scope.$isBackButtonShown=!!shouldShow}return $scope.$isBackButtonShown},self.showActiveBackButton=function(shouldShow){var headerBar=getOnScreenHeaderBar();return headerBar?arguments.length?headerBar.controller().showBack(shouldShow):headerBar.controller().showBack():void 0},self.title=function(newTitleText,headerBar){return isDefined(newTitleText)&&(newTitleText=newTitleText||"",headerBar=headerBar||getOnScreenHeaderBar(),headerBar&&headerBar.title(newTitleText),$scope.$title=newTitleText,$ionicHistory.currentTitle(newTitleText)),$scope.$title},self.align=function(val,headerBar){headerBar=headerBar||getOnScreenHeaderBar(),headerBar&&headerBar.controller().align(val)},self.hasTabsTop=function(isTabsTop){$element[isTabsTop?"addClass":"removeClass"]("nav-bar-tabs-top")},self.hasBarSubheader=function(isBarSubheader){$element[isBarSubheader?"addClass":"removeClass"]("nav-bar-has-subheader");
},self.changeTitle=function(val){deprecatedWarning("changeTitle(val)","title(val)"),self.title(val)},self.setTitle=function(val){deprecatedWarning("setTitle(val)","title(val)"),self.title(val)},self.getTitle=function(){return deprecatedWarning("getTitle()","title()"),self.title()},self.back=function(){deprecatedWarning("back()","$ionicHistory.goBack()"),$ionicHistory.goBack()},self.getPreviousTitle=function(){deprecatedWarning("getPreviousTitle()","$ionicHistory.backTitle()"),$ionicHistory.goBack()},$scope.$on("$destroy",function(){$scope.$parent.$hasHeader=!1,$element.parent().removeData(DATA_NAV_BAR_CTRL);for(var x=0;x<headerBars.length;x++)headerBars[x].destroy();$element.remove(),$element=headerBars=null,deregisterInstance()})}]),IonicModule.controller("$ionicNavView",["$scope","$element","$attrs","$compile","$controller","$ionicNavBarDelegate","$ionicNavViewDelegate","$ionicHistory","$ionicViewSwitcher","$ionicConfig","$ionicScrollDelegate",function($scope,$element,$attrs,$compile,$controller,$ionicNavBarDelegate,$ionicNavViewDelegate,$ionicHistory,$ionicViewSwitcher,$ionicConfig,$ionicScrollDelegate){function onTabsLeave(ev,data){for(var viewElement,viewScope,viewElements=$element.children(),x=0,l=viewElements.length;l>x;x++)if(viewElement=viewElements.eq(x),navViewAttr(viewElement)==VIEW_STATUS_ACTIVE){viewScope=viewElement.scope(),viewScope&&viewScope.$emit(ev.name.replace("Tabs","View"),data);break}}function navSwipeAttr(val){ionic.DomUtil.cachedAttr($element,"nav-swipe",val)}function onTabsTop(ev,isTabsTop){var associatedNavBarCtrl=getAssociatedNavBarCtrl();associatedNavBarCtrl&&associatedNavBarCtrl.hasTabsTop(isTabsTop)}function onBarSubheader(ev,isBarSubheader){var associatedNavBarCtrl=getAssociatedNavBarCtrl();associatedNavBarCtrl&&associatedNavBarCtrl.hasBarSubheader(isBarSubheader)}function getAssociatedNavBarCtrl(){if(navBarDelegate)for(var x=0;x<$ionicNavBarDelegate._instances.length;x++)if($ionicNavBarDelegate._instances[x].$$delegateHandle==navBarDelegate)return $ionicNavBarDelegate._instances[x];return $element.inheritedData("$ionNavBarController")}var direction,navBarDelegate,activeEleId,disableRenderStartViewId,disableAnimation,DATA_ELE_IDENTIFIER="$eleId",DATA_DESTROY_ELE="$destroyEle",DATA_NO_CACHE="$noCache",VIEW_STATUS_ACTIVE="active",VIEW_STATUS_CACHED="cached",self=this,isPrimary=!1,navViewAttr=$ionicViewSwitcher.navViewAttr;self.scope=$scope,self.element=$element,self.init=function(){var navViewName=$attrs.name||"",parent=$element.parent().inheritedData("$uiView"),parentViewName=parent&&parent.state?parent.state.name:"";navViewName.indexOf("@")<0&&(navViewName=navViewName+"@"+parentViewName);var viewData={name:navViewName,state:null};$element.data("$uiView",viewData);var deregisterInstance=$ionicNavViewDelegate._registerInstance(self,$attrs.delegateHandle);return $scope.$on("$destroy",function(){deregisterInstance(),self.isSwipeFreeze&&$ionicScrollDelegate.freezeAllScrolls(!1)}),$scope.$on("$ionicHistory.deselect",self.cacheCleanup),$scope.$on("$ionicTabs.top",onTabsTop),$scope.$on("$ionicSubheader",onBarSubheader),$scope.$on("$ionicTabs.beforeLeave",onTabsLeave),$scope.$on("$ionicTabs.afterLeave",onTabsLeave),$scope.$on("$ionicTabs.leave",onTabsLeave),ionic.Platform.ready(function(){ionic.Platform.isWebView()&&$ionicConfig.views.swipeBackEnabled()&&self.initSwipeBack()}),viewData},self.register=function(viewLocals){var leavingView=extend({},$ionicHistory.currentView()),registerData=$ionicHistory.register($scope,viewLocals);self.update(registerData);var enteringView=$ionicHistory.getViewById(registerData.viewId)||{},renderStart=disableRenderStartViewId!==registerData.viewId;self.render(registerData,viewLocals,enteringView,leavingView,renderStart,!0)},self.update=function(registerData){isPrimary=!0,direction=registerData.direction;var parentNavViewCtrl=$element.parent().inheritedData("$ionNavViewController");parentNavViewCtrl&&(parentNavViewCtrl.isPrimary(!1),("enter"===direction||"exit"===direction)&&(parentNavViewCtrl.direction(direction),"enter"===direction&&(direction="none")))},self.render=function(registerData,viewLocals,enteringView,leavingView,renderStart,renderEnd){var switcher=$ionicViewSwitcher.create(self,viewLocals,enteringView,leavingView,renderStart,renderEnd);switcher.init(registerData,function(){switcher.transition(self.direction(),registerData.enableBack,!disableAnimation),disableRenderStartViewId=disableAnimation=null})},self.beforeEnter=function(transitionData){if(isPrimary){navBarDelegate=transitionData.navBarDelegate;var associatedNavBarCtrl=getAssociatedNavBarCtrl();associatedNavBarCtrl&&associatedNavBarCtrl.update(transitionData),navSwipeAttr("")}},self.activeEleId=function(eleId){return arguments.length&&(activeEleId=eleId),activeEleId},self.transitionEnd=function(){var x,l,viewElement,viewElements=$element.children();for(x=0,l=viewElements.length;l>x;x++)viewElement=viewElements.eq(x),viewElement.data(DATA_ELE_IDENTIFIER)===activeEleId?navViewAttr(viewElement,VIEW_STATUS_ACTIVE):("leaving"===navViewAttr(viewElement)||navViewAttr(viewElement)===VIEW_STATUS_ACTIVE||navViewAttr(viewElement)===VIEW_STATUS_CACHED)&&(viewElement.data(DATA_DESTROY_ELE)||viewElement.data(DATA_NO_CACHE)?$ionicViewSwitcher.destroyViewEle(viewElement):(navViewAttr(viewElement,VIEW_STATUS_CACHED),ionic.Utils.disconnectScope(viewElement.scope())));navSwipeAttr(""),self.isSwipeFreeze&&$ionicScrollDelegate.freezeAllScrolls(!1)},self.cacheCleanup=function(){for(var viewElements=$element.children(),x=0,l=viewElements.length;l>x;x++)viewElements.eq(x).data(DATA_DESTROY_ELE)&&$ionicViewSwitcher.destroyViewEle(viewElements.eq(x))},self.clearCache=function(stateIds){var viewElement,viewScope,x,l,y,eleIdentifier,viewElements=$element.children();for(x=0,l=viewElements.length;l>x;x++)if(viewElement=viewElements.eq(x),stateIds)for(eleIdentifier=viewElement.data(DATA_ELE_IDENTIFIER),y=0;y<stateIds.length;y++)eleIdentifier===stateIds[y]&&$ionicViewSwitcher.destroyViewEle(viewElement);else navViewAttr(viewElement)==VIEW_STATUS_CACHED?$ionicViewSwitcher.destroyViewEle(viewElement):navViewAttr(viewElement)==VIEW_STATUS_ACTIVE&&(viewScope=viewElement.scope(),viewScope&&viewScope.$broadcast("$ionicView.clearCache"))},self.getViewElements=function(){return $element.children()},self.appendViewElement=function(viewEle,viewLocals){var linkFn=$compile(viewEle);$element.append(viewEle);var viewScope=$scope.$new();if(viewLocals&&viewLocals.$$controller){viewLocals.$scope=viewScope;var controller=$controller(viewLocals.$$controller,viewLocals);$element.children().data("$ngControllerController",controller)}return linkFn(viewScope),viewScope},self.title=function(val){var associatedNavBarCtrl=getAssociatedNavBarCtrl();associatedNavBarCtrl&&associatedNavBarCtrl.title(val)},self.enableBackButton=function(shouldEnable){var associatedNavBarCtrl=getAssociatedNavBarCtrl();associatedNavBarCtrl&&associatedNavBarCtrl.enableBackButton(shouldEnable)},self.showBackButton=function(shouldShow){var associatedNavBarCtrl=getAssociatedNavBarCtrl();return associatedNavBarCtrl?arguments.length?associatedNavBarCtrl.showActiveBackButton(shouldShow):associatedNavBarCtrl.showActiveBackButton():!0},self.showBar=function(val){var associatedNavBarCtrl=getAssociatedNavBarCtrl();return associatedNavBarCtrl?arguments.length?associatedNavBarCtrl.showBar(val):associatedNavBarCtrl.showBar():!0},self.isPrimary=function(val){return arguments.length&&(isPrimary=val),isPrimary},self.direction=function(val){return arguments.length&&(direction=val),direction},self.initSwipeBack=function(){function onDragStart(ev){if(isPrimary&&(startDragX=getDragX(ev),!(startDragX>swipeBackHitWidth))){backView=$ionicHistory.backView();var currentView=$ionicHistory.currentView();if(backView&&backView.historyId===currentView.historyId&&currentView.canSwipeBack!==!1){windowWidth||(windowWidth=window.innerWidth),self.isSwipeFreeze=$ionicScrollDelegate.freezeAllScrolls(!0);var registerData={direction:"back"};dragPoints=[],cancelData={showBar:self.showBar(),showBackButton:self.showBackButton()};var switcher=$ionicViewSwitcher.create(self,registerData,backView,currentView,!0,!1);switcher.loadViewElements(registerData),switcher.render(registerData),viewTransition=switcher.transition("back",$ionicHistory.enabledBack(backView),!0),associatedNavBarCtrl=getAssociatedNavBarCtrl(),deregDrag=ionic.onGesture("drag",onDrag,$element[0]),deregRelease=ionic.onGesture("release",onRelease,$element[0])}}}function onDrag(ev){if(isPrimary&&viewTransition){var dragX=getDragX(ev);if(dragPoints.push({t:Date.now(),x:dragX}),dragX>=windowWidth-15)onRelease(ev);else{var step=Math.min(Math.max(getSwipeCompletion(dragX),0),1);viewTransition.run(step),associatedNavBarCtrl&&associatedNavBarCtrl.activeTransition&&associatedNavBarCtrl.activeTransition.run(step)}}}function onRelease(ev){if(isPrimary&&viewTransition&&dragPoints&&dragPoints.length>1){for(var now=Date.now(),releaseX=getDragX(ev),startDrag=dragPoints[dragPoints.length-1],x=dragPoints.length-2;x>=0&&!(now-startDrag.t>200);x--)startDrag=dragPoints[x];var isSwipingRight=releaseX>=dragPoints[dragPoints.length-2].x,releaseSwipeCompletion=getSwipeCompletion(releaseX),velocity=Math.abs(startDrag.x-releaseX)/(now-startDrag.t);if(disableRenderStartViewId=backView.viewId,disableAnimation=.03>releaseSwipeCompletion||releaseSwipeCompletion>.97,isSwipingRight&&(releaseSwipeCompletion>.5||velocity>.1)){var speed=velocity>.5||.05>velocity||releaseX>windowWidth-45?"fast":"slow";navSwipeAttr(disableAnimation?"":speed),backView.go(),associatedNavBarCtrl&&associatedNavBarCtrl.activeTransition&&associatedNavBarCtrl.activeTransition.complete(!disableAnimation,speed)}else navSwipeAttr(disableAnimation?"":"fast"),disableRenderStartViewId=null,viewTransition.cancel(!disableAnimation),associatedNavBarCtrl&&associatedNavBarCtrl.activeTransition&&associatedNavBarCtrl.activeTransition.cancel(!disableAnimation,"fast",cancelData),disableAnimation=null}ionic.offGesture(deregDrag,"drag",onDrag),ionic.offGesture(deregRelease,"release",onRelease),windowWidth=viewTransition=dragPoints=null,self.isSwipeFreeze=$ionicScrollDelegate.freezeAllScrolls(!1)}function getDragX(ev){return ionic.tap.pointerCoord(ev.gesture.srcEvent).x}function getSwipeCompletion(dragX){return(dragX-startDragX)/windowWidth}var viewTransition,associatedNavBarCtrl,backView,deregDragStart,deregDrag,deregRelease,windowWidth,startDragX,dragPoints,swipeBackHitWidth=$ionicConfig.views.swipeBackHitWidth(),cancelData={};deregDragStart=ionic.onGesture("dragstart",onDragStart,$element[0]),$scope.$on("$destroy",function(){ionic.offGesture(deregDragStart,"dragstart",onDragStart),ionic.offGesture(deregDrag,"drag",onDrag),ionic.offGesture(deregRelease,"release",onRelease),self.element=viewTransition=associatedNavBarCtrl=null})}}]),IonicModule.controller("$ionicRefresher",["$scope","$attrs","$element","$ionicBind","$timeout",function($scope,$attrs,$element,$ionicBind,$timeout){function handleTouchend(){(canOverscroll||isDragging)&&(startY=null,isDragging?(isDragging=!1,dragOffset=0,lastOverscroll>ptrThreshold?(start(),scrollTo(ptrThreshold,scrollTime)):(scrollTo(0,scrollTime,deactivate),isOverscrolling=!1)):(dragOffset=0,isOverscrolling=!1,setScrollLock(!1)))}function handleTouchmove(e){if(canOverscroll&&!(e.touches.length>1)){if(null===startY&&(startY=parseInt(e.touches[0].screenY,10)),ionic.Platform.isAndroid()&&4.4===ionic.Platform.version()&&0===scrollParent.scrollTop&&(isDragging=!0,e.preventDefault()),deltaY=parseInt(e.touches[0].screenY,10)-startY,0>=deltaY-dragOffset||0!==scrollParent.scrollTop)return isOverscrolling&&(isOverscrolling=!1,setScrollLock(!1)),isDragging&&nativescroll(scrollParent,-1*parseInt(deltaY-dragOffset,10)),void(0!==lastOverscroll&&overscroll(0));deltaY>0&&0===scrollParent.scrollTop&&!isOverscrolling&&(dragOffset=deltaY),e.preventDefault(),isOverscrolling||(isOverscrolling=!0,setScrollLock(!0)),isDragging=!0,overscroll(parseInt((deltaY-dragOffset)/3,10)),!activated&&lastOverscroll>ptrThreshold?(activated=!0,ionic.requestAnimationFrame(activate)):activated&&ptrThreshold>lastOverscroll&&(activated=!1,ionic.requestAnimationFrame(deactivate))}}function handleScroll(e){canOverscroll=0===e.target.scrollTop||isDragging}function overscroll(val){scrollChild.style[ionic.CSS.TRANSFORM]="translateY("+val+"px)",lastOverscroll=val}function nativescroll(target,newScrollTop){target.scrollTop=newScrollTop;var e=document.createEvent("UIEvents");e.initUIEvent("scroll",!0,!0,window,1),target.dispatchEvent(e)}function setScrollLock(enabled){enabled?ionic.requestAnimationFrame(function(){scrollChild.classList.add("overscroll"),show()}):ionic.requestAnimationFrame(function(){scrollChild.classList.remove("overscroll"),hide(),deactivate()})}function scrollTo(Y,duration,callback){function easeOutCubic(t){return--t*t*t+1}function scroll(){var currentTime=Date.now(),time=Math.min(1,(currentTime-start)/duration),easedT=easeOutCubic(time);overscroll(parseInt(easedT*(Y-from)+from,10)),1>time?ionic.requestAnimationFrame(scroll):(5>Y&&Y>-5&&(isOverscrolling=!1,setScrollLock(!1)),callback&&callback())}var start=Date.now(),from=lastOverscroll;return from===Y?void callback():void ionic.requestAnimationFrame(scroll)}function destroy(){ionic.off("touchmove",handleTouchmove,scrollChild),ionic.off("touchend",handleTouchend,scrollChild),ionic.off("scroll",handleScroll,scrollParent),scrollParent=null,scrollChild=null}function activate(){$element[0].classList.add("active"),$scope.$onPulling()}function deactivate(){$timeout(function(){$element.removeClass("active refreshing refreshing-tail"),activated&&(activated=!1)},150)}function start(){$element[0].classList.add("refreshing"),$scope.$onRefresh()}function show(){$element[0].classList.remove("invisible")}function hide(){$element[0].classList.add("invisible")}function tail(){$element[0].classList.add("refreshing-tail")}var scrollParent,scrollChild,self=this,isDragging=!1,isOverscrolling=!1,dragOffset=0,lastOverscroll=0,ptrThreshold=60,activated=!1,scrollTime=500,startY=null,deltaY=null,canOverscroll=!0;isDefined($attrs.pullingIcon)||$attrs.$set("pullingIcon","ion-android-arrow-down"),$scope.showSpinner=!isDefined($attrs.refreshingIcon)&&"none"!=$attrs.spinner,$scope.showIcon=isDefined($attrs.refreshingIcon),$ionicBind($scope,$attrs,{pullingIcon:"@",pullingText:"@",refreshingIcon:"@",refreshingText:"@",spinner:"@",disablePullingRotation:"@",$onRefresh:"&onRefresh",$onPulling:"&onPulling"}),$scope.$on("scroll.refreshComplete",function(){$timeout(function(){ionic.requestAnimationFrame(tail),scrollTo(0,scrollTime,deactivate),$timeout(function(){isOverscrolling&&(isOverscrolling=!1,setScrollLock(!1))},scrollTime)},scrollTime)}),self.init=function(){if(scrollParent=$element.parent().parent()[0],scrollChild=$element.parent()[0],!(scrollParent&&scrollParent.classList.contains("ionic-scroll")&&scrollChild&&scrollChild.classList.contains("scroll")))throw new Error("Refresher must be immediate child of ion-content or ion-scroll");ionic.on("touchmove",handleTouchmove,scrollChild),ionic.on("touchend",handleTouchend,scrollChild),ionic.on("scroll",handleScroll,scrollParent),$scope.$on("$destroy",destroy)},self.getRefresherDomMethods=function(){return{activate:activate,deactivate:deactivate,start:start,show:show,hide:hide,tail:tail}},self.__handleTouchmove=handleTouchmove,self.__getScrollChild=function(){return scrollChild},self.__getScrollParent=function(){return scrollParent}}]),IonicModule.controller("$ionicScroll",["$scope","scrollViewOptions","$timeout","$window","$location","$document","$ionicScrollDelegate","$ionicHistory",function($scope,scrollViewOptions,$timeout,$window,$location,$document,$ionicScrollDelegate,$ionicHistory){var self=this;self.__timeout=$timeout,self._scrollViewOptions=scrollViewOptions,self.isNative=function(){return!!scrollViewOptions.nativeScrolling};var scrollView,element=self.element=scrollViewOptions.el,$element=self.$element=jqLite(element);scrollView=self.isNative()?self.scrollView=new ionic.views.ScrollNative(scrollViewOptions):self.scrollView=new ionic.views.Scroll(scrollViewOptions),($element.parent().length?$element.parent():$element).data("$$ionicScrollController",self);var deregisterInstance=$ionicScrollDelegate._registerInstance(self,scrollViewOptions.delegateHandle,function(){return $ionicHistory.isActiveScope($scope)});isDefined(scrollViewOptions.bouncing)||ionic.Platform.ready(function(){scrollView.options&&(scrollView.options.bouncing=!0,ionic.Platform.isAndroid()&&(scrollView.options.bouncing=!1,scrollView.options.deceleration=.95))});var resize=angular.bind(scrollView,scrollView.resize);angular.element($window).on("resize",resize);var scrollFunc=function(e){var detail=(e.originalEvent||e).detail||{};$scope.$onScroll&&$scope.$onScroll({event:e,scrollTop:detail.scrollTop||0,scrollLeft:detail.scrollLeft||0})};$element.on("scroll",scrollFunc),$scope.$on("$destroy",function(){deregisterInstance(),scrollView&&scrollView.__cleanup&&scrollView.__cleanup(),angular.element($window).off("resize",resize),$element.off("scroll",scrollFunc),scrollView=self.scrollView=scrollViewOptions=self._scrollViewOptions=scrollViewOptions.el=self._scrollViewOptions.el=$element=self.$element=element=null}),$timeout(function(){scrollView&&scrollView.run&&scrollView.run()}),self.getScrollView=function(){return scrollView},self.getScrollPosition=function(){return scrollView.getValues()},self.resize=function(){return $timeout(resize,0,!1).then(function(){$element&&$element.triggerHandler("scroll-resize")})},self.scrollTop=function(shouldAnimate){self.resize().then(function(){scrollView.scrollTo(0,0,!!shouldAnimate)})},self.scrollBottom=function(shouldAnimate){self.resize().then(function(){var max=scrollView.getScrollMax();scrollView.scrollTo(max.left,max.top,!!shouldAnimate)})},self.scrollTo=function(left,top,shouldAnimate){self.resize().then(function(){scrollView.scrollTo(left,top,!!shouldAnimate)})},self.zoomTo=function(zoom,shouldAnimate,originLeft,originTop){self.resize().then(function(){scrollView.zoomTo(zoom,!!shouldAnimate,originLeft,originTop)})},self.zoomBy=function(zoom,shouldAnimate,originLeft,originTop){self.resize().then(function(){scrollView.zoomBy(zoom,!!shouldAnimate,originLeft,originTop)})},self.scrollBy=function(left,top,shouldAnimate){self.resize().then(function(){scrollView.scrollBy(left,top,!!shouldAnimate)})},self.anchorScroll=function(shouldAnimate){self.resize().then(function(){var hash=$location.hash(),elm=hash&&$document[0].getElementById(hash);if(!hash||!elm)return void scrollView.scrollTo(0,0,!!shouldAnimate);var curElm=elm,scrollLeft=0,scrollTop=0;do null!==curElm&&(scrollLeft+=curElm.offsetLeft),null!==curElm&&(scrollTop+=curElm.offsetTop),curElm=curElm.offsetParent;while(curElm.attributes!=self.element.attributes&&curElm.offsetParent);scrollView.scrollTo(scrollLeft,scrollTop,!!shouldAnimate)})},self.freezeScroll=scrollView.freeze,self.freezeAllScrolls=function(shouldFreeze){for(var i=0;i<$ionicScrollDelegate._instances.length;i++)$ionicScrollDelegate._instances[i].freezeScroll(shouldFreeze)},self._setRefresher=function(refresherScope,refresherElement,refresherMethods){self.refresher=refresherElement;var refresherHeight=self.refresher.clientHeight||60;scrollView.activatePullToRefresh(refresherHeight,refresherMethods)}}]),IonicModule.controller("$ionicSideMenus",["$scope","$attrs","$ionicSideMenuDelegate","$ionicPlatform","$ionicBody","$ionicHistory","$ionicScrollDelegate","IONIC_BACK_PRIORITY","$rootScope",function($scope,$attrs,$ionicSideMenuDelegate,$ionicPlatform,$ionicBody,$ionicHistory,$ionicScrollDelegate,IONIC_BACK_PRIORITY,$rootScope){function freezeAllScrolls(shouldFreeze){shouldFreeze&&!self.isScrollFreeze?$ionicScrollDelegate.freezeAllScrolls(shouldFreeze):!shouldFreeze&&self.isScrollFreeze&&$ionicScrollDelegate.freezeAllScrolls(!1),self.isScrollFreeze=shouldFreeze}var rightShowing,leftShowing,isDragging,startX,lastX,offsetX,isAsideExposed,self=this,enableMenuWithBackViews=!0;self.$scope=$scope,self.initialize=function(options){self.left=options.left,self.right=options.right,self.setContent(options.content),self.dragThresholdX=options.dragThresholdX||10,$ionicHistory.registerHistory(self.$scope)},self.setContent=function(content){content&&(self.content=content,self.content.onDrag=function(e){self._handleDrag(e)},self.content.endDrag=function(e){self._endDrag(e)})},self.isOpenLeft=function(){return self.getOpenAmount()>0},self.isOpenRight=function(){return self.getOpenAmount()<0},self.toggleLeft=function(shouldOpen){if(!isAsideExposed&&self.left.isEnabled){var openAmount=self.getOpenAmount();0===arguments.length&&(shouldOpen=0>=openAmount),self.content.enableAnimation(),shouldOpen?(self.openPercentage(100),$rootScope.$emit("$ionicSideMenuOpen","left")):(self.openPercentage(0),$rootScope.$emit("$ionicSideMenuClose","left"))}},self.toggleRight=function(shouldOpen){if(!isAsideExposed&&self.right.isEnabled){var openAmount=self.getOpenAmount();0===arguments.length&&(shouldOpen=openAmount>=0),self.content.enableAnimation(),shouldOpen?(self.openPercentage(-100),$rootScope.$emit("$ionicSideMenuOpen","right")):(self.openPercentage(0),$rootScope.$emit("$ionicSideMenuClose","right"))}},self.toggle=function(side){"right"==side?self.toggleRight():self.toggleLeft()},self.close=function(){self.openPercentage(0),$rootScope.$emit("$ionicSideMenuClose","left"),$rootScope.$emit("$ionicSideMenuClose","right")},self.getOpenAmount=function(){return self.content&&self.content.getTranslateX()||0},self.getOpenRatio=function(){var amount=self.getOpenAmount();return amount>=0?amount/self.left.width:amount/self.right.width},self.isOpen=function(){return 0!==self.getOpenAmount()},self.getOpenPercentage=function(){return 100*self.getOpenRatio()},self.openPercentage=function(percentage){var p=percentage/100;self.left&&percentage>=0?self.openAmount(self.left.width*p):self.right&&0>percentage&&self.openAmount(self.right.width*p),$ionicBody.enableClass(0!==percentage,"menu-open"),freezeAllScrolls(!1)},self.openAmount=function(amount){var maxLeft=self.left&&self.left.width||0,maxRight=self.right&&self.right.width||0;return(self.left&&self.left.isEnabled||!(amount>0))&&(self.right&&self.right.isEnabled||!(0>amount))?leftShowing&&amount>maxLeft?void self.content.setTranslateX(maxLeft):rightShowing&&-maxRight>amount?void self.content.setTranslateX(-maxRight):(self.content.setTranslateX(amount),void(amount>=0?(leftShowing=!0,rightShowing=!1,amount>0&&(self.right&&self.right.pushDown&&self.right.pushDown(),self.left&&self.left.bringUp&&self.left.bringUp())):(rightShowing=!0,leftShowing=!1,self.right&&self.right.bringUp&&self.right.bringUp(),self.left&&self.left.pushDown&&self.left.pushDown()))):void self.content.setTranslateX(0)},self.snapToRest=function(e){self.content.enableAnimation(),isDragging=!1;var ratio=self.getOpenRatio();if(0===ratio)return void self.openPercentage(0);var velocityThreshold=.3,velocityX=e.gesture.velocityX,direction=e.gesture.direction;ratio>0&&.5>ratio&&"right"==direction&&velocityThreshold>velocityX?self.openPercentage(0):ratio>.5&&"left"==direction&&velocityThreshold>velocityX?self.openPercentage(100):0>ratio&&ratio>-.5&&"left"==direction&&velocityThreshold>velocityX?self.openPercentage(0):.5>ratio&&"right"==direction&&velocityThreshold>velocityX?self.openPercentage(-100):"right"==direction&&ratio>=0&&(ratio>=.5||velocityX>velocityThreshold)?self.openPercentage(100):"left"==direction&&0>=ratio&&(-.5>=ratio||velocityX>velocityThreshold)?self.openPercentage(-100):self.openPercentage(0)},self.enableMenuWithBackViews=function(val){return arguments.length&&(enableMenuWithBackViews=!!val),enableMenuWithBackViews},self.isAsideExposed=function(){return!!isAsideExposed},self.exposeAside=function(shouldExposeAside){(self.left&&self.left.isEnabled||self.right&&self.right.isEnabled)&&(self.close(),isAsideExposed=shouldExposeAside,self.left&&self.left.isEnabled?self.content.setMarginLeft(isAsideExposed?self.left.width:0):self.right&&self.right.isEnabled&&self.content.setMarginRight(isAsideExposed?self.right.width:0),self.$scope.$emit("$ionicExposeAside",isAsideExposed))},self.activeAsideResizing=function(isResizing){$ionicBody.enableClass(isResizing,"aside-resizing")},self._endDrag=function(e){freezeAllScrolls(!1),isAsideExposed||(isDragging&&self.snapToRest(e),startX=null,lastX=null,offsetX=null)},self._handleDrag=function(e){!isAsideExposed&&$scope.dragContent&&(startX?lastX=e.gesture.touches[0].pageX:(startX=e.gesture.touches[0].pageX,lastX=startX),!isDragging&&Math.abs(lastX-startX)>self.dragThresholdX&&(startX=lastX,isDragging=!0,self.content.disableAnimation(),offsetX=self.getOpenAmount()),isDragging&&(self.openAmount(offsetX+(lastX-startX)),freezeAllScrolls(!0)))},self.canDragContent=function(canDrag){return arguments.length&&($scope.dragContent=!!canDrag),$scope.dragContent},self.edgeThreshold=25,self.edgeThresholdEnabled=!1,self.edgeDragThreshold=function(value){return arguments.length&&(isNumber(value)&&value>0?(self.edgeThreshold=value,self.edgeThresholdEnabled=!0):self.edgeThresholdEnabled=!!value),self.edgeThresholdEnabled},self.isDraggableTarget=function(e){var shouldOnlyAllowEdgeDrag=self.edgeThresholdEnabled&&!self.isOpen(),startX=e.gesture.startEvent&&e.gesture.startEvent.center&&e.gesture.startEvent.center.pageX,dragIsWithinBounds=!shouldOnlyAllowEdgeDrag||startX<=self.edgeThreshold||startX>=self.content.element.offsetWidth-self.edgeThreshold,backView=$ionicHistory.backView(),menuEnabled=enableMenuWithBackViews?!0:!backView;if(!menuEnabled){var currentView=$ionicHistory.currentView()||{};return backView.historyId!==currentView.historyId}return($scope.dragContent||self.isOpen())&&dragIsWithinBounds&&!e.gesture.srcEvent.defaultPrevented&&menuEnabled&&!e.target.tagName.match(/input|textarea|select|object|embed/i)&&!e.target.isContentEditable&&!(e.target.dataset?e.target.dataset.preventScroll:"true"==e.target.getAttribute("data-prevent-scroll"))},$scope.sideMenuContentTranslateX=0;var deregisterBackButtonAction=noop,closeSideMenu=angular.bind(self,self.close);$scope.$watch(function(){return 0!==self.getOpenAmount()},function(isOpen){deregisterBackButtonAction(),isOpen&&(deregisterBackButtonAction=$ionicPlatform.registerBackButtonAction(closeSideMenu,IONIC_BACK_PRIORITY.sideMenu))});var deregisterInstance=$ionicSideMenuDelegate._registerInstance(self,$attrs.delegateHandle,function(){return $ionicHistory.isActiveScope($scope)});$scope.$on("$destroy",function(){deregisterInstance(),deregisterBackButtonAction(),self.$scope=null,self.content&&(self.content.element=null,self.content=null),freezeAllScrolls(!1)}),self.initialize({left:{width:275},right:{width:275}})}]),function(ionic){function createSvgElement(tagName,data,parent,spinnerName){var k,x,y,ele=document.createElement(SHORTCUTS[tagName]||tagName);for(k in data)if(angular.isArray(data[k]))for(x=0;x<data[k].length;x++)if(data[k][x].fn)for(y=0;y<data[k][x].t;y++)createSvgElement(k,data[k][x].fn(y,spinnerName),ele,spinnerName);else createSvgElement(k,data[k][x],ele,spinnerName);else setSvgAttribute(ele,k,data[k]);parent.appendChild(ele)}function setSvgAttribute(ele,k,v){ele.setAttribute(SHORTCUTS[k]||k,v)}function animationValues(strValues,i){var values=strValues.split(";"),back=values.slice(i),front=values.slice(0,values.length-back.length);return values=back.concat(front).reverse(),values.join(";")+";"+values[0]}function easeInOutCubic(t,c){return t/=c/2,1>t?.5*t*t*t:(t-=2,.5*(t*t*t+2))}var TRANSLATE32="translate(32,32)",STROKE_OPACITY="stroke-opacity",ROUND="round",INDEFINITE="indefinite",DURATION="750ms",NONE="none",SHORTCUTS={a:"animate",an:"attributeName",at:"animateTransform",c:"circle",da:"stroke-dasharray",os:"stroke-dashoffset",f:"fill",lc:"stroke-linecap",rc:"repeatCount",sw:"stroke-width",t:"transform",v:"values"},SPIN_ANIMATION={v:"0,32,32;360,32,32",an:"transform",type:"rotate",rc:INDEFINITE,dur:DURATION},IOS_SPINNER={sw:4,lc:ROUND,line:[{fn:function(i,spinnerName){return{y1:"ios"==spinnerName?17:12,y2:"ios"==spinnerName?29:20,t:TRANSLATE32+" rotate("+(30*i+(6>i?180:-180))+")",a:[{fn:function(){return{an:STROKE_OPACITY,dur:DURATION,v:animationValues("0;.1;.15;.25;.35;.45;.55;.65;.7;.85;1",i),rc:INDEFINITE}},t:1}]}},t:12}]},spinners={android:{c:[{sw:6,da:128,os:82,r:26,cx:32,cy:32,f:NONE}]},ios:IOS_SPINNER,"ios-small":IOS_SPINNER,bubbles:{sw:0,c:[{fn:function(i){return{cx:24*Math.cos(2*Math.PI*i/8),cy:24*Math.sin(2*Math.PI*i/8),t:TRANSLATE32,a:[{fn:function(){return{an:"r",dur:DURATION,v:animationValues("1;2;3;4;5;6;7;8",i),rc:INDEFINITE}},t:1}]}},t:8}]},circles:{c:[{fn:function(i){return{r:5,cx:24*Math.cos(2*Math.PI*i/8),cy:24*Math.sin(2*Math.PI*i/8),t:TRANSLATE32,sw:0,a:[{fn:function(){return{an:"fill-opacity",dur:DURATION,v:animationValues(".3;.3;.3;.4;.7;.85;.9;1",i),rc:INDEFINITE}},t:1}]}},t:8}]},crescent:{c:[{sw:4,da:128,os:82,r:26,cx:32,cy:32,f:NONE,at:[SPIN_ANIMATION]}]},dots:{c:[{fn:function(i){return{cx:16+16*i,cy:32,sw:0,a:[{fn:function(){return{an:"fill-opacity",dur:DURATION,v:animationValues(".5;.6;.8;1;.8;.6;.5",i),rc:INDEFINITE}},t:1},{fn:function(){return{an:"r",dur:DURATION,v:animationValues("4;5;6;5;4;3;3",i),rc:INDEFINITE}},t:1}]}},t:3}]},lines:{sw:7,lc:ROUND,line:[{fn:function(i){return{x1:10+14*i,x2:10+14*i,a:[{fn:function(){return{an:"y1",dur:DURATION,v:animationValues("16;18;28;18;16",i),rc:INDEFINITE}},t:1},{fn:function(){return{an:"y2",dur:DURATION,v:animationValues("48;44;36;46;48",i),rc:INDEFINITE}},t:1},{fn:function(){return{an:STROKE_OPACITY,dur:DURATION,v:animationValues("1;.8;.5;.4;1",i),rc:INDEFINITE}},t:1}]}},t:4}]},ripple:{f:NONE,"fill-rule":"evenodd",sw:3,circle:[{fn:function(i){return{cx:32,cy:32,a:[{fn:function(){return{an:"r",begin:-1*i+"s",dur:"2s",v:"0;24",keyTimes:"0;1",keySplines:"0.1,0.2,0.3,1",calcMode:"spline",rc:INDEFINITE}},t:1},{fn:function(){return{an:STROKE_OPACITY,begin:-1*i+"s",dur:"2s",v:".2;1;.2;0",rc:INDEFINITE}},t:1}]}},t:2}]},spiral:{defs:[{linearGradient:[{id:"sGD",gradientUnits:"userSpaceOnUse",x1:55,y1:46,x2:2,y2:46,stop:[{offset:.1,class:"stop1"},{offset:1,class:"stop2"}]}]}],g:[{sw:4,lc:ROUND,f:NONE,path:[{stroke:"url(#sGD)",d:"M4,32 c0,15,12,28,28,28c8,0,16-4,21-9"},{d:"M60,32 C60,16,47.464,4,32,4S4,16,4,32"}],at:[SPIN_ANIMATION]}]}},animations={android:function(ele){function run(){var v=easeInOutCubic(Date.now()-startTime,650),scaleX=1,translateX=0,dasharray=188-58*v,dashoffset=182-182*v;rIndex%2&&(scaleX=-1,translateX=-64,dasharray=128- -58*v,dashoffset=182*v);var rotateLine=[0,-101,-90,-11,-180,79,-270,-191][rIndex];setSvgAttribute(circleEle,"da",Math.max(Math.min(dasharray,188),128)),setSvgAttribute(circleEle,"os",Math.max(Math.min(dashoffset,182),0)),setSvgAttribute(circleEle,"t","scale("+scaleX+",1) translate("+translateX+",0) rotate("+rotateLine+",32,32)"),rotateCircle+=4.1,rotateCircle>359&&(rotateCircle=0),setSvgAttribute(svgEle,"t","rotate("+rotateCircle+",32,32)"),v>=1&&(rIndex++,rIndex>7&&(rIndex=0),startTime=Date.now()),ionic.requestAnimationFrame(run)}var startTime,rIndex=0,rotateCircle=0,svgEle=ele.querySelector("g"),circleEle=ele.querySelector("circle");return function(){startTime=Date.now(),run()}}};IonicModule.controller("$ionicSpinner",["$element","$attrs","$ionicConfig",function($element,$attrs,$ionicConfig){var spinnerName;this.init=function(){spinnerName=$attrs.icon||$ionicConfig.spinner.icon();var container=document.createElement("div");return createSvgElement("svg",{viewBox:"0 0 64 64",g:[spinners[spinnerName]]},container,spinnerName),$element.html(container.innerHTML),this.start(),spinnerName},this.start=function(){animations[spinnerName]&&animations[spinnerName]($element[0])()}}])}(ionic),IonicModule.controller("$ionicTab",["$scope","$ionicHistory","$attrs","$location","$state",function($scope,$ionicHistory,$attrs,$location,$state){this.$scope=$scope,this.hrefMatchesState=function(){return $attrs.href&&0===$location.path().indexOf($attrs.href.replace(/^#/,"").replace(/\/$/,""))},this.srefMatchesState=function(){
return $attrs.uiSref&&$state.includes($attrs.uiSref.split("(")[0])},this.navNameMatchesState=function(){return this.navViewName&&$ionicHistory.isCurrentStateNavView(this.navViewName)},this.tabMatchesState=function(){return this.hrefMatchesState()||this.srefMatchesState()||this.navNameMatchesState()}}]),IonicModule.controller("$ionicTabs",["$scope","$element","$ionicHistory",function($scope,$element,$ionicHistory){var selectedTabIndex,self=this,selectedTab=null,previousSelectedTab=null;self.tabs=[],self.selectedIndex=function(){return self.tabs.indexOf(selectedTab)},self.selectedTab=function(){return selectedTab},self.previousSelectedTab=function(){return previousSelectedTab},self.add=function(tab){$ionicHistory.registerHistory(tab),self.tabs.push(tab)},self.remove=function(tab){var tabIndex=self.tabs.indexOf(tab);if(-1!==tabIndex){if(tab.$tabSelected)if(self.deselect(tab),1===self.tabs.length);else{var newTabIndex=tabIndex===self.tabs.length-1?tabIndex-1:tabIndex+1;self.select(self.tabs[newTabIndex])}self.tabs.splice(tabIndex,1)}},self.deselect=function(tab){tab.$tabSelected&&(previousSelectedTab=selectedTab,selectedTab=selectedTabIndex=null,tab.$tabSelected=!1,(tab.onDeselect||noop)(),tab.$broadcast&&tab.$broadcast("$ionicHistory.deselect"))},self.select=function(tab,shouldEmitEvent){var tabIndex;if(isNumber(tab)){if(tabIndex=tab,tabIndex>=self.tabs.length)return;tab=self.tabs[tabIndex]}else tabIndex=self.tabs.indexOf(tab);1===arguments.length&&(shouldEmitEvent=!(!tab.navViewName&&!tab.uiSref)),selectedTab&&selectedTab.$historyId==tab.$historyId?shouldEmitEvent&&$ionicHistory.goToHistoryRoot(tab.$historyId):selectedTabIndex!==tabIndex&&(forEach(self.tabs,function(tab){self.deselect(tab)}),selectedTab=tab,selectedTabIndex=tabIndex,self.$scope&&self.$scope.$parent&&(self.$scope.$parent.$activeHistoryId=tab.$historyId),tab.$tabSelected=!0,(tab.onSelect||noop)(),shouldEmitEvent&&$scope.$emit("$ionicHistory.change",{type:"tab",tabIndex:tabIndex,historyId:tab.$historyId,navViewName:tab.navViewName,hasNavView:!!tab.navViewName,title:tab.title,url:tab.href,uiSref:tab.uiSref}))},self.hasActiveScope=function(){for(var x=0;x<self.tabs.length;x++)if($ionicHistory.isActiveScope(self.tabs[x]))return!0;return!1}}]),IonicModule.controller("$ionicView",["$scope","$element","$attrs","$compile","$rootScope",function($scope,$element,$attrs,$compile,$rootScope){function afterEnter(){var viewTitleAttr=isDefined($attrs.viewTitle)&&"viewTitle"||isDefined($attrs.title)&&"title";viewTitleAttr&&(titleUpdate($attrs[viewTitleAttr]),deregisters.push($attrs.$observe(viewTitleAttr,titleUpdate))),isDefined($attrs.hideBackButton)&&deregisters.push($scope.$watch($attrs.hideBackButton,function(val){navViewCtrl.showBackButton(!val)})),isDefined($attrs.hideNavBar)&&deregisters.push($scope.$watch($attrs.hideNavBar,function(val){navViewCtrl.showBar(!val)}))}function titleUpdate(newTitle){isDefined(newTitle)&&newTitle!==viewTitle&&(viewTitle=newTitle,navViewCtrl.title(viewTitle))}function deregisterFns(){for(var x=0;x<deregisters.length;x++)deregisters[x]();deregisters=[]}function generateNavBarItem(html){return html?$compile(html)($scope.$new()):void 0}function attrTrue(key){return!!$scope.$eval($attrs[key])}var navViewCtrl,navBarDelegateHandle,hasViewHeaderBar,viewTitle,self=this,navElementHtml={},deregisters=[],deregIonNavBarInit=$scope.$on("ionNavBar.init",function(ev,delegateHandle){ev.stopPropagation(),navBarDelegateHandle=delegateHandle});self.init=function(){deregIonNavBarInit();var modalCtrl=$element.inheritedData("$ionModalController");navViewCtrl=$element.inheritedData("$ionNavViewController"),navViewCtrl&&!modalCtrl&&($scope.$on("$ionicView.beforeEnter",self.beforeEnter),$scope.$on("$ionicView.afterEnter",afterEnter),$scope.$on("$ionicView.beforeLeave",deregisterFns))},self.beforeEnter=function(ev,transData){if(transData&&!transData.viewNotified){transData.viewNotified=!0,$rootScope.$$phase||$scope.$digest(),viewTitle=isDefined($attrs.viewTitle)?$attrs.viewTitle:$attrs.title;var navBarItems={};for(var n in navElementHtml)navBarItems[n]=generateNavBarItem(navElementHtml[n]);navViewCtrl.beforeEnter(extend(transData,{title:viewTitle,showBack:!attrTrue("hideBackButton"),navBarItems:navBarItems,navBarDelegate:navBarDelegateHandle||null,showNavBar:!attrTrue("hideNavBar"),hasHeaderBar:!!hasViewHeaderBar})),deregisterFns()}},self.navElement=function(type,html){navElementHtml[type]=html}}]),IonicModule.directive("ionActionSheet",["$document",function($document){return{restrict:"E",scope:!0,replace:!0,link:function($scope,$element){var keyUp=function(e){27==e.which&&($scope.cancel(),$scope.$apply())},backdropClick=function(e){e.target==$element[0]&&($scope.cancel(),$scope.$apply())};$scope.$on("$destroy",function(){$element.remove(),$document.unbind("keyup",keyUp)}),$document.bind("keyup",keyUp),$element.bind("click",backdropClick)},template:'<div class="action-sheet-backdrop"><div class="action-sheet-wrapper"><div class="action-sheet" ng-class="{\'action-sheet-has-icons\': $actionSheetHasIcon}"><div class="action-sheet-group action-sheet-options"><div class="action-sheet-title" ng-if="titleText" ng-bind-html="titleText"></div><button class="button action-sheet-option" ng-click="buttonClicked($index)" ng-repeat="b in buttons" ng-bind-html="b.text"></button><button class="button destructive action-sheet-destructive" ng-if="destructiveText" ng-click="destructiveButtonClicked()" ng-bind-html="destructiveText"></button></div><div class="action-sheet-group action-sheet-cancel" ng-if="cancelText"><button class="button" ng-click="cancel()" ng-bind-html="cancelText"></button></div></div></div></div>'}}]),IonicModule.directive("ionCheckbox",["$ionicConfig",function($ionicConfig){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<label class="item item-checkbox"><div class="checkbox checkbox-input-hidden disable-pointer-events"><input type="checkbox"><i class="checkbox-icon"></i></div><div class="item-content disable-pointer-events" ng-transclude></div></label>',compile:function(element,attr){var input=element.find("input");forEach({name:attr.name,"ng-value":attr.ngValue,"ng-model":attr.ngModel,"ng-checked":attr.ngChecked,"ng-disabled":attr.ngDisabled,"ng-true-value":attr.ngTrueValue,"ng-false-value":attr.ngFalseValue,"ng-change":attr.ngChange,"ng-required":attr.ngRequired,required:attr.required},function(value,name){isDefined(value)&&input.attr(name,value)});var checkboxWrapper=element[0].querySelector(".checkbox");checkboxWrapper.classList.add("checkbox-"+$ionicConfig.form.checkbox())}}}]),IonicModule.directive("collectionRepeat",CollectionRepeatDirective).factory("$ionicCollectionManager",RepeatManagerFactory);var ONE_PX_TRANSPARENT_IMG_SRC="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",WIDTH_HEIGHT_REGEX=/height:.*?px;\s*width:.*?px/,DEFAULT_RENDER_BUFFER=3;CollectionRepeatDirective.$inject=["$ionicCollectionManager","$parse","$window","$$rAF","$rootScope","$timeout"],RepeatManagerFactory.$inject=["$rootScope","$window","$$rAF"],IonicModule.directive("ionContent",["$timeout","$controller","$ionicBind","$ionicConfig",function($timeout,$controller,$ionicBind,$ionicConfig){return{restrict:"E",require:"^?ionNavView",scope:!0,priority:800,compile:function(element,attr){function prelink($scope,$element,$attr){function onScrollComplete(){$scope.$onScrollComplete({scrollTop:scrollCtrl.scrollView.__scrollTop,scrollLeft:scrollCtrl.scrollView.__scrollLeft})}var parentScope=$scope.$parent;if($scope.$watch(function(){return(parentScope.$hasHeader?" has-header":"")+(parentScope.$hasSubheader?" has-subheader":"")+(parentScope.$hasFooter?" has-footer":"")+(parentScope.$hasSubfooter?" has-subfooter":"")+(parentScope.$hasTabs?" has-tabs":"")+(parentScope.$hasTabsTop?" has-tabs-top":"")},function(className,oldClassName){$element.removeClass(oldClassName),$element.addClass(className)}),$scope.$hasHeader=$scope.$hasSubheader=$scope.$hasFooter=$scope.$hasSubfooter=$scope.$hasTabs=$scope.$hasTabsTop=!1,$ionicBind($scope,$attr,{$onScroll:"&onScroll",$onScrollComplete:"&onScrollComplete",hasBouncing:"@",padding:"@",direction:"@",scrollbarX:"@",scrollbarY:"@",startX:"@",startY:"@",scrollEventInterval:"@"}),$scope.direction=$scope.direction||"y",isDefined($attr.padding)&&$scope.$watch($attr.padding,function(newVal){(innerElement||$element).toggleClass("padding",!!newVal)}),"false"===$attr.scroll);else{var scrollViewOptions={};nativeScrolling?($element.addClass("overflow-scroll"),scrollViewOptions={el:$element[0],delegateHandle:attr.delegateHandle,startX:$scope.$eval($scope.startX)||0,startY:$scope.$eval($scope.startY)||0,nativeScrolling:!0}):scrollViewOptions={el:$element[0],delegateHandle:attr.delegateHandle,locking:"true"===(attr.locking||"true"),bouncing:$scope.$eval($scope.hasBouncing),startX:$scope.$eval($scope.startX)||0,startY:$scope.$eval($scope.startY)||0,scrollbarX:$scope.$eval($scope.scrollbarX)!==!1,scrollbarY:$scope.$eval($scope.scrollbarY)!==!1,scrollingX:$scope.direction.indexOf("x")>=0,scrollingY:$scope.direction.indexOf("y")>=0,scrollEventInterval:parseInt($scope.scrollEventInterval,10)||10,scrollingComplete:onScrollComplete},scrollCtrl=$controller("$ionicScroll",{$scope:$scope,scrollViewOptions:scrollViewOptions}),$scope.$on("$destroy",function(){scrollViewOptions&&(scrollViewOptions.scrollingComplete=noop,delete scrollViewOptions.el),innerElement=null,$element=null,attr.$$element=null})}}var innerElement,scrollCtrl;element.addClass("scroll-content ionic-scroll"),"false"!=attr.scroll?(innerElement=jqLite('<div class="scroll"></div>'),innerElement.append(element.contents()),element.append(innerElement)):element.addClass("scroll-content-false");var nativeScrolling="true"===attr.overflowScroll||!$ionicConfig.scrolling.jsScrolling();return nativeScrolling&&(nativeScrolling=!element[0].querySelector("[collection-repeat]")),{pre:prelink}}}}]),IonicModule.directive("exposeAsideWhen",["$window",function($window){return{restrict:"A",require:"^ionSideMenus",link:function($scope,$element,$attr,sideMenuCtrl){function checkAsideExpose(){var mq="large"==$attr.exposeAsideWhen?"(min-width:768px)":$attr.exposeAsideWhen;sideMenuCtrl.exposeAside($window.matchMedia(mq).matches),sideMenuCtrl.activeAsideResizing(!1)}function onResize(){sideMenuCtrl.activeAsideResizing(!0),debouncedCheck()}var debouncedCheck=ionic.debounce(function(){$scope.$apply(checkAsideExpose)},300,!1);$scope.$evalAsync(checkAsideExpose),ionic.on("resize",onResize,$window),$scope.$on("$destroy",function(){ionic.off("resize",onResize,$window)})}}}]);var GESTURE_DIRECTIVES="onHold onTap onDoubleTap onTouch onRelease onDragStart onDrag onDragEnd onDragUp onDragRight onDragDown onDragLeft onSwipe onSwipeUp onSwipeRight onSwipeDown onSwipeLeft".split(" ");GESTURE_DIRECTIVES.forEach(function(name){IonicModule.directive(name,gestureDirective(name))}),IonicModule.directive("ionHeaderBar",tapScrollToTopDirective()).directive("ionHeaderBar",headerFooterBarDirective(!0)).directive("ionFooterBar",headerFooterBarDirective(!1)),IonicModule.directive("ionInfiniteScroll",["$timeout",function($timeout){return{restrict:"E",require:["?^$ionicScroll","ionInfiniteScroll"],template:function($element,$attrs){return $attrs.icon?'<i class="icon {{icon()}} icon-refreshing {{scrollingType}}"></i>':'<ion-spinner icon="{{spinner()}}"></ion-spinner>'},scope:!0,controller:"$ionInfiniteScroll",link:function($scope,$element,$attrs,ctrls){var infiniteScrollCtrl=ctrls[1],scrollCtrl=infiniteScrollCtrl.scrollCtrl=ctrls[0],jsScrolling=infiniteScrollCtrl.jsScrolling=!scrollCtrl.isNative();if(jsScrolling)infiniteScrollCtrl.scrollView=scrollCtrl.scrollView,$scope.scrollingType="js-scrolling",scrollCtrl.$element.on("scroll",infiniteScrollCtrl.checkBounds);else{var scrollEl=ionic.DomUtil.getParentOrSelfWithClass($element[0].parentNode,"overflow-scroll");if(infiniteScrollCtrl.scrollEl=scrollEl,!scrollEl)throw"Infinite scroll must be used inside a scrollable div";infiniteScrollCtrl.scrollEl.addEventListener("scroll",infiniteScrollCtrl.checkBounds)}var doImmediateCheck=isDefined($attrs.immediateCheck)?$scope.$eval($attrs.immediateCheck):!0;doImmediateCheck&&$timeout(function(){infiniteScrollCtrl.checkBounds()})}}}]),IonicModule.directive("ionItem",["$$rAF",function($$rAF){return{restrict:"E",controller:["$scope","$element",function($scope,$element){this.$scope=$scope,this.$element=$element}],scope:!0,compile:function($element,$attrs){var isAnchor=isDefined($attrs.href)||isDefined($attrs.ngHref)||isDefined($attrs.uiSref),isComplexItem=isAnchor||/ion-(delete|option|reorder)-button/i.test($element.html());if(isComplexItem){var innerElement=jqLite(isAnchor?"<a></a>":"<div></div>");innerElement.addClass("item-content item-height"),(isDefined($attrs.href)||isDefined($attrs.ngHref))&&(innerElement.attr("ng-href","{{$href()}}"),isDefined($attrs.target)&&innerElement.attr("target","{{$target()}}")),innerElement.append($element.contents()),$element.addClass("item item-complex").append(innerElement)}else $element.addClass("item");return function($scope,$element,$attrs){$scope.$href=function(){return $attrs.href||$attrs.ngHref},$scope.$target=function(){return $attrs.target};var content=$element[0].querySelector(".item-content");content&&$scope.$on("$collectionRepeatLeave",function(){content&&content.$$ionicOptionsOpen&&(content.style[ionic.CSS.TRANSFORM]="",content.style[ionic.CSS.TRANSITION]="none",$$rAF(function(){content.style[ionic.CSS.TRANSITION]=""}),content.$$ionicOptionsOpen=!1)})}}}}]);var ITEM_TPL_DELETE_BUTTON='<div class="item-left-edit item-delete enable-pointer-events"></div>';IonicModule.directive("ionDeleteButton",function(){function stopPropagation(ev){ev.stopPropagation()}return{restrict:"E",require:["^^ionItem","^?ionList"],priority:Number.MAX_VALUE,compile:function($element,$attr){return $attr.$set("class",($attr["class"]||"")+" button icon button-icon",!0),function($scope,$element,$attr,ctrls){function init(){listCtrl=listCtrl||$element.controller("ionList"),listCtrl&&listCtrl.showDelete()&&container.addClass("visible active")}var itemCtrl=ctrls[0],listCtrl=ctrls[1],container=jqLite(ITEM_TPL_DELETE_BUTTON);container.append($element),itemCtrl.$element.append(container).addClass("item-left-editable"),$element.on("click",stopPropagation),init(),$scope.$on("$ionic.reconnectScope",init)}}}}),IonicModule.directive("itemFloatingLabel",function(){return{restrict:"C",link:function(scope,element){var el=element[0],input=el.querySelector("input, textarea"),inputLabel=el.querySelector(".input-label");if(input&&inputLabel){var onInput=function(){input.value?inputLabel.classList.add("has-input"):inputLabel.classList.remove("has-input")};input.addEventListener("input",onInput);var ngModelCtrl=jqLite(input).controller("ngModel");ngModelCtrl&&(ngModelCtrl.$render=function(){input.value=ngModelCtrl.$viewValue||"",onInput()}),scope.$on("$destroy",function(){input.removeEventListener("input",onInput)})}}}});var ITEM_TPL_OPTION_BUTTONS='<div class="item-options invisible"></div>';IonicModule.directive("ionOptionButton",[function(){function stopPropagation(e){e.stopPropagation()}return{restrict:"E",require:"^ionItem",priority:Number.MAX_VALUE,compile:function($element,$attr){return $attr.$set("class",($attr["class"]||"")+" button",!0),function($scope,$element,$attr,itemCtrl){itemCtrl.optionsContainer||(itemCtrl.optionsContainer=jqLite(ITEM_TPL_OPTION_BUTTONS),itemCtrl.$element.append(itemCtrl.optionsContainer)),itemCtrl.optionsContainer.append($element),itemCtrl.$element.addClass("item-right-editable"),$element.on("click",stopPropagation)}}}}]);var ITEM_TPL_REORDER_BUTTON='<div data-prevent-scroll="true" class="item-right-edit item-reorder enable-pointer-events"></div>';IonicModule.directive("ionReorderButton",["$parse",function($parse){return{restrict:"E",require:["^ionItem","^?ionList"],priority:Number.MAX_VALUE,compile:function($element,$attr){return $attr.$set("class",($attr["class"]||"")+" button icon button-icon",!0),$element[0].setAttribute("data-prevent-scroll",!0),function($scope,$element,$attr,ctrls){var itemCtrl=ctrls[0],listCtrl=ctrls[1],onReorderFn=$parse($attr.onReorder);$scope.$onReorder=function(oldIndex,newIndex){onReorderFn($scope,{$fromIndex:oldIndex,$toIndex:newIndex})},$attr.ngClick||$attr.onClick||$attr.onclick||($element[0].onclick=function(e){return e.stopPropagation(),!1});var container=jqLite(ITEM_TPL_REORDER_BUTTON);container.append($element),itemCtrl.$element.append(container).addClass("item-right-editable"),listCtrl&&listCtrl.showReorder()&&container.addClass("visible active")}}}}]),IonicModule.directive("keyboardAttach",function(){return function(scope,element){function onShow(e){if(!ionic.Platform.isAndroid()||ionic.Platform.isFullScreen){var keyboardHeight=e.keyboardHeight||e.detail.keyboardHeight;element.css("bottom",keyboardHeight+"px"),scrollCtrl=element.controller("$ionicScroll"),scrollCtrl&&(scrollCtrl.scrollView.__container.style.bottom=keyboardHeight+keyboardAttachGetClientHeight(element[0])+"px")}}function onHide(){(!ionic.Platform.isAndroid()||ionic.Platform.isFullScreen)&&(element.css("bottom",""),scrollCtrl&&(scrollCtrl.scrollView.__container.style.bottom=""))}ionic.on("native.keyboardshow",onShow,window),ionic.on("native.keyboardhide",onHide,window),ionic.on("native.showkeyboard",onShow,window),ionic.on("native.hidekeyboard",onHide,window);var scrollCtrl;scope.$on("$destroy",function(){ionic.off("native.keyboardshow",onShow,window),ionic.off("native.keyboardhide",onHide,window),ionic.off("native.showkeyboard",onShow,window),ionic.off("native.hidekeyboard",onHide,window)})}}),IonicModule.directive("ionList",["$timeout",function($timeout){return{restrict:"E",require:["ionList","^?$ionicScroll"],controller:"$ionicList",compile:function($element,$attr){var listEl=jqLite('<div class="list">').append($element.contents()).addClass($attr.type);return $element.append(listEl),function($scope,$element,$attrs,ctrls){function init(){function setButtonShown(el,shown){shown()&&el.addClass("visible")||el.removeClass("active"),ionic.requestAnimationFrame(function(){shown()&&el.addClass("active")||el.removeClass("visible")})}var listView=listCtrl.listView=new ionic.views.ListView({el:$element[0],listEl:$element.children()[0],scrollEl:scrollCtrl&&scrollCtrl.element,scrollView:scrollCtrl&&scrollCtrl.scrollView,onReorder:function(el,oldIndex,newIndex){var itemScope=jqLite(el).scope();itemScope&&itemScope.$onReorder&&$timeout(function(){itemScope.$onReorder(oldIndex,newIndex)})},canSwipe:function(){return listCtrl.canSwipeItems()}});$scope.$on("$destroy",function(){listView&&(listView.deregister&&listView.deregister(),listView=null)}),isDefined($attr.canSwipe)&&$scope.$watch("!!("+$attr.canSwipe+")",function(value){listCtrl.canSwipeItems(value)}),isDefined($attr.showDelete)&&$scope.$watch("!!("+$attr.showDelete+")",function(value){listCtrl.showDelete(value)}),isDefined($attr.showReorder)&&$scope.$watch("!!("+$attr.showReorder+")",function(value){listCtrl.showReorder(value)}),$scope.$watch(function(){return listCtrl.showDelete()},function(isShown,wasShown){if(isShown||wasShown){isShown&&listCtrl.closeOptionButtons(),listCtrl.canSwipeItems(!isShown),$element.children().toggleClass("list-left-editing",isShown),$element.toggleClass("disable-pointer-events",isShown);var deleteButton=jqLite($element[0].getElementsByClassName("item-delete"));setButtonShown(deleteButton,listCtrl.showDelete)}}),$scope.$watch(function(){return listCtrl.showReorder()},function(isShown,wasShown){if(isShown||wasShown){isShown&&listCtrl.closeOptionButtons(),listCtrl.canSwipeItems(!isShown),$element.children().toggleClass("list-right-editing",isShown),$element.toggleClass("disable-pointer-events",isShown);var reorderButton=jqLite($element[0].getElementsByClassName("item-reorder"));setButtonShown(reorderButton,listCtrl.showReorder)}})}var listCtrl=ctrls[0],scrollCtrl=ctrls[1];$timeout(init)}}}}]),IonicModule.directive("menuClose",["$ionicHistory","$timeout",function($ionicHistory,$timeout){return{restrict:"AC",link:function($scope,$element){$element.bind("click",function(){var sideMenuCtrl=$element.inheritedData("$ionSideMenusController");sideMenuCtrl&&($ionicHistory.nextViewOptions({historyRoot:!0,disableAnimate:!0,expire:300}),$timeout(function(){$ionicHistory.nextViewOptions({historyRoot:!1,disableAnimate:!1})},300),sideMenuCtrl.close())})}}}]),IonicModule.directive("menuToggle",function(){return{restrict:"AC",link:function($scope,$element,$attr){$scope.$on("$ionicView.beforeEnter",function(ev,viewData){if(viewData.enableBack){var sideMenuCtrl=$element.inheritedData("$ionSideMenusController");sideMenuCtrl.enableMenuWithBackViews()||$element.addClass("hide")}else $element.removeClass("hide")}),$element.bind("click",function(){var sideMenuCtrl=$element.inheritedData("$ionSideMenusController");sideMenuCtrl&&sideMenuCtrl.toggle($attr.menuToggle)})}}}),IonicModule.directive("ionModal",[function(){return{restrict:"E",transclude:!0,replace:!0,controller:[function(){}],template:'<div class="modal-backdrop"><div class="modal-backdrop-bg"></div><div class="modal-wrapper" ng-transclude></div></div>'}}]),IonicModule.directive("ionModalView",function(){return{restrict:"E",compile:function(element){element.addClass("modal")}}}),IonicModule.directive("ionNavBackButton",["$ionicConfig","$document",function($ionicConfig,$document){return{restrict:"E",require:"^ionNavBar",compile:function(tElement,tAttrs){function hasIconClass(ele){return/ion-|icon/.test(ele.className)}var buttonEle=$document[0].createElement("button");for(var n in tAttrs.$attr)buttonEle.setAttribute(tAttrs.$attr[n],tAttrs[n]);tAttrs.ngClick||buttonEle.setAttribute("ng-click","$ionicGoBack()"),buttonEle.className="button back-button hide buttons "+(tElement.attr("class")||""),buttonEle.innerHTML=tElement.html()||"";for(var childNode,hasInnerText,hasButtonText,hasPreviousTitle,hasIcon=hasIconClass(tElement[0]),x=0;x<tElement[0].childNodes.length;x++)childNode=tElement[0].childNodes[x],1===childNode.nodeType?hasIconClass(childNode)?hasIcon=!0:childNode.classList.contains("default-title")?hasButtonText=!0:childNode.classList.contains("previous-title")&&(hasPreviousTitle=!0):hasInnerText||3!==childNode.nodeType||(hasInnerText=!!childNode.nodeValue.trim());var defaultIcon=$ionicConfig.backButton.icon();if(!hasIcon&&defaultIcon&&"none"!==defaultIcon&&(buttonEle.innerHTML='<i class="icon '+defaultIcon+'"></i> '+buttonEle.innerHTML,buttonEle.className+=" button-clear"),!hasInnerText){var buttonTextEle=$document[0].createElement("span");buttonTextEle.className="back-text",!hasButtonText&&$ionicConfig.backButton.text()&&(buttonTextEle.innerHTML+='<span class="default-title">'+$ionicConfig.backButton.text()+"</span>"),!hasPreviousTitle&&$ionicConfig.backButton.previousTitleText()&&(buttonTextEle.innerHTML+='<span class="previous-title"></span>'),buttonEle.appendChild(buttonTextEle)}return tElement.attr("class","hide"),tElement.empty(),{pre:function($scope,$element,$attr,navBarCtrl){navBarCtrl.navElement("backButton",buttonEle.outerHTML),buttonEle=null}}}}}]),IonicModule.directive("ionNavBar",function(){return{restrict:"E",controller:"$ionicNavBar",scope:!0,link:function($scope,$element,$attr,ctrl){ctrl.init()}}}),IonicModule.directive("ionNavButtons",["$document",function($document){return{require:"^ionNavBar",restrict:"E",compile:function(tElement,tAttrs){var side="left";/^primary|secondary|right$/i.test(tAttrs.side||"")&&(side=tAttrs.side.toLowerCase());var spanEle=$document[0].createElement("span");spanEle.className=side+"-buttons",spanEle.innerHTML=tElement.html();var navElementType=side+"Buttons";return tElement.attr("class","hide"),tElement.empty(),{pre:function($scope,$element,$attrs,navBarCtrl){var parentViewCtrl=$element.parent().data("$ionViewController");parentViewCtrl?parentViewCtrl.navElement(navElementType,spanEle.outerHTML):navBarCtrl.navElement(navElementType,spanEle.outerHTML),spanEle=null}}}}}]),IonicModule.directive("navDirection",["$ionicViewSwitcher",function($ionicViewSwitcher){return{restrict:"A",priority:1e3,link:function($scope,$element,$attr){$element.bind("click",function(){$ionicViewSwitcher.nextDirection($attr.navDirection)})}}}]),IonicModule.directive("ionNavTitle",["$document",function($document){return{require:"^ionNavBar",restrict:"E",compile:function(tElement,tAttrs){var navElementType="title",spanEle=$document[0].createElement("span");for(var n in tAttrs.$attr)spanEle.setAttribute(tAttrs.$attr[n],tAttrs[n]);return spanEle.classList.add("nav-bar-title"),spanEle.innerHTML=tElement.html(),tElement.attr("class","hide"),tElement.empty(),{pre:function($scope,$element,$attrs,navBarCtrl){var parentViewCtrl=$element.parent().data("$ionViewController");parentViewCtrl?parentViewCtrl.navElement(navElementType,spanEle.outerHTML):navBarCtrl.navElement(navElementType,spanEle.outerHTML),spanEle=null}}}}}]),IonicModule.directive("navTransition",["$ionicViewSwitcher",function($ionicViewSwitcher){return{restrict:"A",priority:1e3,link:function($scope,$element,$attr){$element.bind("click",function(){$ionicViewSwitcher.nextTransition($attr.navTransition)})}}}]),IonicModule.directive("ionNavView",["$state","$ionicConfig",function($state,$ionicConfig){return{restrict:"E",terminal:!0,priority:2e3,transclude:!0,controller:"$ionicNavView",compile:function(tElement,tAttrs,transclude){return tElement.addClass("view-container"),ionic.DomUtil.cachedAttr(tElement,"nav-view-transition",$ionicConfig.views.transition()),function($scope,$element,$attr,navViewCtrl){function updateView(firstTime){var viewLocals=$state.$current&&$state.$current.locals[viewData.name];viewLocals&&(firstTime||viewLocals!==latestLocals)&&(latestLocals=viewLocals,viewData.state=viewLocals.$$state,navViewCtrl.register(viewLocals))}var latestLocals;transclude($scope,function(clone){$element.append(clone)});var viewData=navViewCtrl.init();$scope.$on("$stateChangeSuccess",function(){updateView(!1)}),$scope.$on("$viewContentLoading",function(){updateView(!1)}),updateView(!0)}}}}]),IonicModule.config(["$provide",function($provide){$provide.decorator("ngClickDirective",["$delegate",function($delegate){return $delegate.shift(),$delegate}])}]).factory("$ionicNgClick",["$parse",function($parse){return function(scope,element,clickExpr){var clickHandler=angular.isFunction(clickExpr)?clickExpr:$parse(clickExpr);element.on("click",function(event){scope.$apply(function(){clickHandler(scope,{$event:event})})}),element.onclick=noop}}]).directive("ngClick",["$ionicNgClick",function($ionicNgClick){return function(scope,element,attr){$ionicNgClick(scope,element,attr.ngClick)}}]).directive("ionStopEvent",function(){return{restrict:"A",link:function(scope,element,attr){element.bind(attr.ionStopEvent,eventStopPropagation)}}}),IonicModule.directive("ionPane",function(){return{restrict:"E",link:function(scope,element){element.addClass("pane")}}}),IonicModule.directive("ionPopover",[function(){return{restrict:"E",transclude:!0,replace:!0,controller:[function(){}],template:'<div class="popover-backdrop"><div class="popover-wrapper" ng-transclude></div></div>'}}]),IonicModule.directive("ionPopoverView",function(){return{restrict:"E",compile:function(element){element.append(jqLite('<div class="popover-arrow">')),element.addClass("popover")}}}),IonicModule.directive("ionRadio",function(){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<label class="item item-radio"><input type="radio" name="radio-group"><div class="item-content disable-pointer-events" ng-transclude></div><i class="radio-icon disable-pointer-events icon ion-checkmark"></i></label>',compile:function(element,attr){attr.icon&&element.children().eq(2).removeClass("ion-checkmark").addClass(attr.icon);var input=element.find("input");return forEach({name:attr.name,value:attr.value,disabled:attr.disabled,"ng-value":attr.ngValue,"ng-model":attr.ngModel,"ng-disabled":attr.ngDisabled,"ng-change":attr.ngChange,"ng-required":attr.ngRequired,required:attr.required},function(value,name){isDefined(value)&&input.attr(name,value)}),function(scope,element,attr){scope.getValue=function(){return scope.ngValue||attr.value}}}}}),IonicModule.directive("ionRefresher",[function(){return{restrict:"E",replace:!0,require:["?^$ionicScroll","ionRefresher"],controller:"$ionicRefresher",template:'<div class="scroll-refresher invisible" collection-repeat-ignore><div class="ionic-refresher-content" ng-class="{\'ionic-refresher-with-text\': pullingText || refreshingText}"><div class="icon-pulling" ng-class="{\'pulling-rotation-disabled\':disablePullingRotation}"><i class="icon {{pullingIcon}}"></i></div><div class="text-pulling" ng-bind-html="pullingText"></div><div class="icon-refreshing"><ion-spinner ng-if="showSpinner" icon="{{spinner}}"></ion-spinner><i ng-if="showIcon" class="icon {{refreshingIcon}}"></i></div><div class="text-refreshing" ng-bind-html="refreshingText"></div></div></div>',link:function($scope,$element,$attrs,ctrls){var scrollCtrl=ctrls[0],refresherCtrl=ctrls[1];!scrollCtrl||scrollCtrl.isNative()?refresherCtrl.init():($element[0].classList.add("js-scrolling"),scrollCtrl._setRefresher($scope,$element[0],refresherCtrl.getRefresherDomMethods()),$scope.$on("scroll.refreshComplete",function(){$scope.$evalAsync(function(){scrollCtrl.scrollView.finishPullToRefresh()})}))}}}]),IonicModule.directive("ionScroll",["$timeout","$controller","$ionicBind",function($timeout,$controller,$ionicBind){return{restrict:"E",scope:!0,controller:function(){},compile:function(element){function prelink($scope,$element,$attr){$ionicBind($scope,$attr,{direction:"@",paging:"@",$onScroll:"&onScroll",scroll:"@",scrollbarX:"@",scrollbarY:"@",zooming:"@",minZoom:"@",maxZoom:"@"}),$scope.direction=$scope.direction||"y",isDefined($attr.padding)&&$scope.$watch($attr.padding,function(newVal){innerElement.toggleClass("padding",!!newVal)}),$scope.$eval($scope.paging)===!0&&innerElement.addClass("scroll-paging"),$scope.direction||($scope.direction="y");var isPaging=$scope.$eval($scope.paging)===!0,scrollViewOptions={el:$element[0],delegateHandle:$attr.delegateHandle,locking:"true"===($attr.locking||"true"),bouncing:$scope.$eval($attr.hasBouncing),paging:isPaging,scrollbarX:$scope.$eval($scope.scrollbarX)!==!1,scrollbarY:$scope.$eval($scope.scrollbarY)!==!1,scrollingX:$scope.direction.indexOf("x")>=0,scrollingY:$scope.direction.indexOf("y")>=0,zooming:$scope.$eval($scope.zooming)===!0,maxZoom:$scope.$eval($scope.maxZoom)||3,minZoom:$scope.$eval($scope.minZoom)||.5,preventDefault:!0};isPaging&&(scrollViewOptions.speedMultiplier=.8,scrollViewOptions.bouncing=!1),$controller("$ionicScroll",{$scope:$scope,scrollViewOptions:scrollViewOptions})}element.addClass("scroll-view ionic-scroll");var innerElement=jqLite('<div class="scroll"></div>');return innerElement.append(element.contents()),element.append(innerElement),{pre:prelink}}}}]),IonicModule.directive("ionSideMenu",function(){return{restrict:"E",require:"^ionSideMenus",scope:!0,compile:function(element,attr){return angular.isUndefined(attr.isEnabled)&&attr.$set("isEnabled","true"),angular.isUndefined(attr.width)&&attr.$set("width","275"),element.addClass("menu menu-"+attr.side),function($scope,$element,$attr,sideMenuCtrl){$scope.side=$attr.side||"left";var sideMenu=sideMenuCtrl[$scope.side]=new ionic.views.SideMenu({width:attr.width,el:$element[0],isEnabled:!0});$scope.$watch($attr.width,function(val){var numberVal=+val;numberVal&&numberVal==val&&sideMenu.setWidth(+val)}),$scope.$watch($attr.isEnabled,function(val){sideMenu.setIsEnabled(!!val)})}}}}),IonicModule.directive("ionSideMenuContent",["$timeout","$ionicGesture","$window",function($timeout,$ionicGesture,$window){return{restrict:"EA",require:"^ionSideMenus",scope:!0,compile:function(element,attr){function prelink($scope,$element,$attr,sideMenuCtrl){function onContentTap(gestureEvt){0!==sideMenuCtrl.getOpenAmount()?(sideMenuCtrl.close(),gestureEvt.gesture.srcEvent.preventDefault(),
startCoord=null,primaryScrollAxis=null):startCoord||(startCoord=ionic.tap.pointerCoord(gestureEvt.gesture.srcEvent))}function onDragX(e){sideMenuCtrl.isDraggableTarget(e)&&"x"==getPrimaryScrollAxis(e)&&(sideMenuCtrl._handleDrag(e),e.gesture.srcEvent.preventDefault())}function onDragY(e){"x"==getPrimaryScrollAxis(e)&&e.gesture.srcEvent.preventDefault()}function onDragRelease(e){sideMenuCtrl._endDrag(e),startCoord=null,primaryScrollAxis=null}function getPrimaryScrollAxis(gestureEvt){if(primaryScrollAxis)return primaryScrollAxis;if(gestureEvt&&gestureEvt.gesture){if(startCoord){var endCoord=ionic.tap.pointerCoord(gestureEvt.gesture.srcEvent),xDistance=Math.abs(endCoord.x-startCoord.x),yDistance=Math.abs(endCoord.y-startCoord.y),scrollAxis=yDistance>xDistance?"y":"x";return Math.max(xDistance,yDistance)>30&&(primaryScrollAxis=scrollAxis),scrollAxis}startCoord=ionic.tap.pointerCoord(gestureEvt.gesture.srcEvent)}return"y"}var startCoord=null,primaryScrollAxis=null;isDefined(attr.dragContent)?$scope.$watch(attr.dragContent,function(value){sideMenuCtrl.canDragContent(value)}):sideMenuCtrl.canDragContent(!0),isDefined(attr.edgeDragThreshold)&&$scope.$watch(attr.edgeDragThreshold,function(value){sideMenuCtrl.edgeDragThreshold(value)});var content={element:element[0],onDrag:function(){},endDrag:function(){},getTranslateX:function(){return $scope.sideMenuContentTranslateX||0},setTranslateX:ionic.animationFrameThrottle(function(amount){var xTransform=content.offsetX+amount;$element[0].style[ionic.CSS.TRANSFORM]="translate3d("+xTransform+"px,0,0)",$timeout(function(){$scope.sideMenuContentTranslateX=amount})}),setMarginLeft:ionic.animationFrameThrottle(function(amount){amount?(amount=parseInt(amount,10),$element[0].style[ionic.CSS.TRANSFORM]="translate3d("+amount+"px,0,0)",$element[0].style.width=$window.innerWidth-amount+"px",content.offsetX=amount):($element[0].style[ionic.CSS.TRANSFORM]="translate3d(0,0,0)",$element[0].style.width="",content.offsetX=0)}),setMarginRight:ionic.animationFrameThrottle(function(amount){amount?(amount=parseInt(amount,10),$element[0].style.width=$window.innerWidth-amount+"px",content.offsetX=amount):($element[0].style.width="",content.offsetX=0),$element[0].style[ionic.CSS.TRANSFORM]="translate3d(0,0,0)"}),enableAnimation:function(){$scope.animationEnabled=!0,$element[0].classList.add("menu-animated")},disableAnimation:function(){$scope.animationEnabled=!1,$element[0].classList.remove("menu-animated")},offsetX:0};sideMenuCtrl.setContent(content);var gestureOpts={stop_browser_behavior:!1};ionic.DomUtil.getParentOrSelfWithClass($element[0],"overflow-scroll")&&(gestureOpts.prevent_default_directions=["left","right"]);var contentTapGesture=$ionicGesture.on("tap",onContentTap,$element,gestureOpts),dragRightGesture=$ionicGesture.on("dragright",onDragX,$element,gestureOpts),dragLeftGesture=$ionicGesture.on("dragleft",onDragX,$element,gestureOpts),dragUpGesture=$ionicGesture.on("dragup",onDragY,$element,gestureOpts),dragDownGesture=$ionicGesture.on("dragdown",onDragY,$element,gestureOpts),releaseGesture=$ionicGesture.on("release",onDragRelease,$element,gestureOpts);$scope.$on("$destroy",function(){content&&(content.element=null,content=null),$ionicGesture.off(dragLeftGesture,"dragleft",onDragX),$ionicGesture.off(dragRightGesture,"dragright",onDragX),$ionicGesture.off(dragUpGesture,"dragup",onDragY),$ionicGesture.off(dragDownGesture,"dragdown",onDragY),$ionicGesture.off(releaseGesture,"release",onDragRelease),$ionicGesture.off(contentTapGesture,"tap",onContentTap)})}return element.addClass("menu-content pane"),{pre:prelink}}}}]),IonicModule.directive("ionSideMenus",["$ionicBody",function($ionicBody){return{restrict:"ECA",controller:"$ionicSideMenus",compile:function(element,attr){function prelink($scope,$element,$attrs,ctrl){ctrl.enableMenuWithBackViews($scope.$eval($attrs.enableMenuWithBackViews)),$scope.$on("$ionicExposeAside",function(evt,isAsideExposed){$scope.$exposeAside||($scope.$exposeAside={}),$scope.$exposeAside.active=isAsideExposed,$ionicBody.enableClass(isAsideExposed,"aside-open")}),$scope.$on("$ionicView.beforeEnter",function(ev,d){d.historyId&&($scope.$activeHistoryId=d.historyId)}),$scope.$on("$destroy",function(){$ionicBody.removeClass("menu-open","aside-open")})}return attr.$set("class",(attr["class"]||"")+" view"),{pre:prelink}}}}]),IonicModule.directive("ionSlideBox",["$timeout","$compile","$ionicSlideBoxDelegate","$ionicHistory","$ionicScrollDelegate",function($timeout,$compile,$ionicSlideBoxDelegate,$ionicHistory,$ionicScrollDelegate){return{restrict:"E",replace:!0,transclude:!0,scope:{autoPlay:"=",doesContinue:"@",slideInterval:"@",showPager:"@",pagerClick:"&",disableScroll:"@",onSlideChanged:"&",activeSlide:"=?"},controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function freezeAllScrolls(shouldFreeze){shouldFreeze&&!_this.isScrollFreeze?$ionicScrollDelegate.freezeAllScrolls(shouldFreeze):!shouldFreeze&&_this.isScrollFreeze&&$ionicScrollDelegate.freezeAllScrolls(!1),_this.isScrollFreeze=shouldFreeze}var _this=this,continuous=$scope.$eval($scope.doesContinue)===!0,shouldAutoPlay=isDefined($attrs.autoPlay)?!!$scope.autoPlay:!1,slideInterval=shouldAutoPlay?$scope.$eval($scope.slideInterval)||4e3:0,slider=new ionic.views.Slider({el:$element[0],auto:slideInterval,continuous:continuous,startSlide:$scope.activeSlide,slidesChanged:function(){$scope.currentSlide=slider.currentIndex(),$timeout(function(){})},callback:function(slideIndex){$scope.currentSlide=slideIndex,$scope.onSlideChanged({index:$scope.currentSlide,$index:$scope.currentSlide}),$scope.$parent.$broadcast("slideBox.slideChanged",slideIndex),$scope.activeSlide=slideIndex,$timeout(function(){})},onDrag:function(){freezeAllScrolls(!0)},onDragEnd:function(){freezeAllScrolls(!1)}});slider.enableSlide($scope.$eval($attrs.disableScroll)!==!0),$scope.$watch("activeSlide",function(nv){isDefined(nv)&&slider.slide(nv)}),$scope.$on("slideBox.nextSlide",function(){slider.next()}),$scope.$on("slideBox.prevSlide",function(){slider.prev()}),$scope.$on("slideBox.setSlide",function(e,index){slider.slide(index)}),this.__slider=slider;var deregisterInstance=$ionicSlideBoxDelegate._registerInstance(slider,$attrs.delegateHandle,function(){return $ionicHistory.isActiveScope($scope)});$scope.$on("$destroy",function(){deregisterInstance(),slider.kill()}),this.slidesCount=function(){return slider.slidesCount()},this.onPagerClick=function(index){$scope.pagerClick({index:index})},$timeout(function(){slider.load()})}],template:'<div class="slider"><div class="slider-slides" ng-transclude></div></div>',link:function($scope,$element,$attr){function getPager(){if(!pager){var childScope=$scope.$new();pager=jqLite("<ion-pager></ion-pager>"),$element.append(pager),pager=$compile(pager)(childScope)}return pager}isDefined($attr.showPager)||($scope.showPager=!0,getPager().toggleClass("hide",!1)),$attr.$observe("showPager",function(show){void 0!==show&&(show=$scope.$eval(show),getPager().toggleClass("hide",!show))});var pager}}}]).directive("ionSlide",function(){return{restrict:"E",require:"^ionSlideBox",compile:function(element){element.addClass("slider-slide")}}}).directive("ionPager",function(){return{restrict:"E",replace:!0,require:"^ionSlideBox",template:'<div class="slider-pager"><span class="slider-pager-page" ng-repeat="slide in numSlides() track by $index" ng-class="{active: $index == currentSlide}" ng-click="pagerClick($index)"><i class="icon ion-record"></i></span></div>',link:function($scope,$element,$attr,slideBox){var selectPage=function(index){for(var children=$element[0].children,length=children.length,i=0;length>i;i++)i==index?children[i].classList.add("active"):children[i].classList.remove("active")};$scope.pagerClick=function(index){slideBox.onPagerClick(index)},$scope.numSlides=function(){return new Array(slideBox.slidesCount())},$scope.$watch("currentSlide",function(v){selectPage(v)})}}}),IonicModule.directive("ionSpinner",function(){return{restrict:"E",controller:"$ionicSpinner",link:function($scope,$element,$attrs,ctrl){var spinnerName=ctrl.init();$element.addClass("spinner spinner-"+spinnerName)}}}),IonicModule.directive("ionTab",["$compile","$ionicConfig","$ionicBind","$ionicViewSwitcher",function($compile,$ionicConfig,$ionicBind,$ionicViewSwitcher){function attrStr(k,v){return isDefined(v)?" "+k+'="'+v+'"':""}return{restrict:"E",require:["^ionTabs","ionTab"],controller:"$ionicTab",scope:!0,compile:function(element,attr){for(var tabNavTemplate="<ion-tab-nav"+attrStr("ng-click",attr.ngClick)+attrStr("title",attr.title)+attrStr("icon",attr.icon)+attrStr("icon-on",attr.iconOn)+attrStr("icon-off",attr.iconOff)+attrStr("badge",attr.badge)+attrStr("badge-style",attr.badgeStyle)+attrStr("hidden",attr.hidden)+attrStr("disabled",attr.disabled)+attrStr("class",attr["class"])+"></ion-tab-nav>",tabContentEle=document.createElement("div"),x=0;x<element[0].children.length;x++)tabContentEle.appendChild(element[0].children[x].cloneNode(!0));var childElementCount=tabContentEle.childElementCount;element.empty();var navViewName,isNavView;return childElementCount&&("ION-NAV-VIEW"===tabContentEle.children[0].tagName&&(navViewName=tabContentEle.children[0].getAttribute("name"),tabContentEle.children[0].classList.add("view-container"),isNavView=!0),1===childElementCount&&(tabContentEle=tabContentEle.children[0]),isNavView||tabContentEle.classList.add("pane"),tabContentEle.classList.add("tab-content")),function($scope,$element,$attr,ctrls){function selectIfMatchesState(){tabCtrl.tabMatchesState()&&tabsCtrl.select($scope,!1)}function tabSelected(isSelected){isSelected&&childElementCount?(isTabContentAttached||(childScope=$scope.$new(),childElement=jqLite(tabContentEle),$ionicViewSwitcher.viewEleIsActive(childElement,!0),tabsCtrl.$element.append(childElement),$compile(childElement)(childScope),isTabContentAttached=!0),$ionicViewSwitcher.viewEleIsActive(childElement,!0)):isTabContentAttached&&childElement&&($ionicConfig.views.maxCache()>0?$ionicViewSwitcher.viewEleIsActive(childElement,!1):destroyTab())}function destroyTab(){childScope&&childScope.$destroy(),isTabContentAttached&&childElement&&childElement.remove(),tabContentEle.innerHTML="",isTabContentAttached=childScope=childElement=null}var childScope,childElement,tabsCtrl=ctrls[0],tabCtrl=ctrls[1],isTabContentAttached=!1;$scope.$tabSelected=!1,$ionicBind($scope,$attr,{onSelect:"&",onDeselect:"&",title:"@",uiSref:"@",href:"@"}),tabsCtrl.add($scope),$scope.$on("$destroy",function(){$scope.$tabsDestroy||tabsCtrl.remove($scope),tabNavElement.isolateScope().$destroy(),tabNavElement.remove(),tabNavElement=tabContentEle=childElement=null}),$element[0].removeAttribute("title"),navViewName&&(tabCtrl.navViewName=$scope.navViewName=navViewName),$scope.$on("$stateChangeSuccess",selectIfMatchesState),selectIfMatchesState();var tabNavElement=jqLite(tabNavTemplate);tabNavElement.data("$ionTabsController",tabsCtrl),tabNavElement.data("$ionTabController",tabCtrl),tabsCtrl.$tabsElement.append($compile(tabNavElement)($scope)),$scope.$watch("$tabSelected",tabSelected),$scope.$on("$ionicView.afterEnter",function(){$ionicViewSwitcher.viewEleIsActive(childElement,$scope.$tabSelected)}),$scope.$on("$ionicView.clearCache",function(){$scope.$tabSelected||destroyTab()})}}}}]),IonicModule.directive("ionTabNav",[function(){return{restrict:"E",replace:!0,require:["^ionTabs","^ionTab"],template:"<a ng-class=\"{'tab-item-active': isTabActive(), 'has-badge':badge, 'tab-hidden':isHidden()}\" "+' ng-disabled="disabled()" class="tab-item"><span class="badge {{badgeStyle}}" ng-if="badge">{{badge}}</span><i class="icon {{getIconOn()}}" ng-if="getIconOn() && isTabActive()"></i><i class="icon {{getIconOff()}}" ng-if="getIconOff() && !isTabActive()"></i><span class="tab-title" ng-bind-html="title"></span></a>',scope:{title:"@",icon:"@",iconOn:"@",iconOff:"@",badge:"=",hidden:"@",disabled:"&",badgeStyle:"@",class:"@"},link:function($scope,$element,$attrs,ctrls){var tabsCtrl=ctrls[0],tabCtrl=ctrls[1];$element[0].removeAttribute("title"),$scope.selectTab=function(e){e.preventDefault(),tabsCtrl.select(tabCtrl.$scope,!0)},$attrs.ngClick||$element.on("click",function(event){$scope.$apply(function(){$scope.selectTab(event)})}),$scope.isHidden=function(){return"true"===$attrs.hidden||$attrs.hidden===!0?!0:!1},$scope.getIconOn=function(){return $scope.iconOn||$scope.icon},$scope.getIconOff=function(){return $scope.iconOff||$scope.icon},$scope.isTabActive=function(){return tabsCtrl.selectedTab()===tabCtrl.$scope}}}}]),IonicModule.directive("ionTabs",["$ionicTabsDelegate","$ionicConfig",function($ionicTabsDelegate,$ionicConfig){return{restrict:"E",scope:!0,controller:"$ionicTabs",compile:function(tElement){function prelink($scope,$element,$attr,tabsCtrl){function emitLifecycleEvent(ev,data){ev.stopPropagation();var previousSelectedTab=tabsCtrl.previousSelectedTab();previousSelectedTab&&previousSelectedTab.$broadcast(ev.name.replace("NavView","Tabs"),data)}var deregisterInstance=$ionicTabsDelegate._registerInstance(tabsCtrl,$attr.delegateHandle,tabsCtrl.hasActiveScope);tabsCtrl.$scope=$scope,tabsCtrl.$element=$element,tabsCtrl.$tabsElement=jqLite($element[0].querySelector(".tabs")),$scope.$watch(function(){return $element[0].className},function(value){var isTabsTop=-1!==value.indexOf("tabs-top"),isHidden=-1!==value.indexOf("tabs-item-hide");$scope.$hasTabs=!isTabsTop&&!isHidden,$scope.$hasTabsTop=isTabsTop&&!isHidden,$scope.$emit("$ionicTabs.top",$scope.$hasTabsTop)}),$scope.$on("$ionicNavView.beforeLeave",emitLifecycleEvent),$scope.$on("$ionicNavView.afterLeave",emitLifecycleEvent),$scope.$on("$ionicNavView.leave",emitLifecycleEvent),$scope.$on("$destroy",function(){$scope.$tabsDestroy=!0,deregisterInstance(),tabsCtrl.$tabsElement=tabsCtrl.$element=tabsCtrl.$scope=innerElement=null,delete $scope.$hasTabs,delete $scope.$hasTabsTop})}function postLink($scope,$element,$attr,tabsCtrl){tabsCtrl.selectedTab()||tabsCtrl.select(0)}var innerElement=jqLite('<div class="tab-nav tabs">');return innerElement.append(tElement.contents()),tElement.append(innerElement).addClass("tabs-"+$ionicConfig.tabs.position()+" tabs-"+$ionicConfig.tabs.style()),{pre:prelink,post:postLink}}}}]),IonicModule.directive("ionToggle",["$timeout","$ionicConfig",function($timeout,$ionicConfig){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<div class="item item-toggle"><div ng-transclude></div><label class="toggle"><input type="checkbox"><div class="track"><div class="handle"></div></div></label></div>',compile:function(element,attr){var input=element.find("input");return forEach({name:attr.name,"ng-value":attr.ngValue,"ng-model":attr.ngModel,"ng-checked":attr.ngChecked,"ng-disabled":attr.ngDisabled,"ng-true-value":attr.ngTrueValue,"ng-false-value":attr.ngFalseValue,"ng-change":attr.ngChange,"ng-required":attr.ngRequired,required:attr.required},function(value,name){isDefined(value)&&input.attr(name,value)}),attr.toggleClass&&element[0].getElementsByTagName("label")[0].classList.add(attr.toggleClass),element.addClass("toggle-"+$ionicConfig.form.toggle()),function($scope,$element){var el=$element[0].getElementsByTagName("label")[0],checkbox=el.children[0],track=el.children[1],handle=track.children[0],ngModelController=jqLite(checkbox).controller("ngModel");$scope.toggle=new ionic.views.Toggle({el:el,track:track,checkbox:checkbox,handle:handle,onChange:function(){ngModelController&&(ngModelController.$setViewValue(checkbox.checked),$scope.$apply())}}),$scope.$on("$destroy",function(){$scope.toggle.destroy()})}}}}]),IonicModule.directive("ionView",function(){return{restrict:"EA",priority:1e3,controller:"$ionicView",compile:function(tElement){return tElement.addClass("pane"),tElement[0].removeAttribute("title"),function($scope,$element,$attrs,viewCtrl){viewCtrl.init()}}}})}(),define("ionic",["ionicCore","angularAnimate","angularSanitize","angularTouch"],function(){}),function(root,undefined){"use strict";var NODE_JS="undefined"==typeof window;NODE_JS&&(root=global);var HEX_CHARS="0123456789abcdef".split(""),S=[41,46,67,201,162,216,124,1,61,54,84,161,236,240,6,19,98,167,5,243,192,199,115,140,152,147,43,217,188,76,130,202,30,155,87,60,253,212,224,22,103,66,111,24,138,23,229,18,190,78,196,214,218,158,222,73,160,251,245,142,187,47,238,122,169,104,121,145,21,178,7,63,148,194,16,137,11,34,95,33,128,127,93,154,90,144,50,39,53,62,204,231,191,247,151,3,255,25,48,179,72,165,181,209,215,94,146,42,172,86,170,198,79,184,56,210,150,164,125,182,118,252,107,226,156,116,4,241,69,157,112,89,100,113,135,32,134,91,207,101,230,45,168,2,27,96,37,173,174,176,185,246,28,70,97,105,52,64,126,15,85,71,163,35,221,81,175,58,195,92,249,206,186,197,234,38,44,83,13,110,133,40,132,9,211,223,205,244,65,129,77,82,106,220,55,200,108,193,171,250,36,225,123,8,12,189,177,74,120,136,149,139,227,99,232,109,233,203,213,254,59,0,29,57,242,239,183,14,102,88,208,228,166,119,114,248,235,117,75,10,49,68,80,180,143,237,31,26,219,153,141,51,159,17,131,20],M=[],X=[],C=[],md2=function(message,asciiOnly){var code,i,j,k,t,B,L=0,loop=1,index=0,start=0,bytes=0,length=message.length;for(i=0;16>i;++i)X[i]=C[i]=0;M[16]=M[17]=M[18]=0;do{for(M[0]=M[16],M[1]=M[17],M[2]=M[18],M[16]=M[17]=M[18]=M[3]=M[4]=M[5]=M[6]=M[7]=M[8]=M[9]=M[10]=M[11]=M[12]=M[13]=M[14]=M[15]=0,i=start;length>index&&16>i;++index)code=message.charCodeAt(index),128>code?M[i++]=code:2048>code?(M[i++]=192|code>>6,M[i++]=128|63&code):55296>code||code>=57344?(M[i++]=224|code>>12,M[i++]=128|code>>6&63,M[i++]=128|63&code):(code=65536+((1023&code)<<10|1023&message.charCodeAt(++index)),M[i++]=240|code>>18,M[i++]=128|code>>12&63,M[i++]=128|code>>6&63,M[i++]=128|63&code);if(bytes+=i-start,start=i-16,index==length&&16>i)for(loop=2,t=16-(15&bytes);16>i;++i)M[i]=t;for(i=0;16>i;++i)C[i]^=S[M[i]^L],L=C[i];for(i=0;loop>i;++i)for(B=0===i?M:C,X[16]=B[0],X[32]=X[16]^X[0],X[17]=B[1],X[33]=X[17]^X[1],X[18]=B[2],X[34]=X[18]^X[2],X[19]=B[3],X[35]=X[19]^X[3],X[20]=B[4],X[36]=X[20]^X[4],X[21]=B[5],X[37]=X[21]^X[5],X[22]=B[6],X[38]=X[22]^X[6],X[23]=B[7],X[39]=X[23]^X[7],X[24]=B[8],X[40]=X[24]^X[8],X[25]=B[9],X[41]=X[25]^X[9],X[26]=B[10],X[42]=X[26]^X[10],X[27]=B[11],X[43]=X[27]^X[11],X[28]=B[12],X[44]=X[28]^X[12],X[29]=B[13],X[45]=X[29]^X[13],X[30]=B[14],X[46]=X[30]^X[14],X[31]=B[15],X[47]=X[31]^X[15],t=0,j=0;18>j;++j){for(k=0;48>k;++k)X[k]=t=X[k]^S[t];t=t+j&255}}while(1==loop);var hex="";for(i=0;16>i;++i)hex+=HEX_CHARS[X[i]>>4&15]+HEX_CHARS[15&X[i]];return hex};!root.JS_MD2_TEST&&NODE_JS?module.exports=md2:"function"==typeof define&&define.amd?define("md2",[],function(){return md2}):root&&(root.md2=md2)}(this);var __hasProp={}.hasOwnProperty;define("acnCore/util/generic",["md2"],function(md2){var Generic;return namespace({TQ:{util:Generic=function(){function Generic(){}return Generic.toPlainJSObject=function(objectInstance){var key,plainJSObj,val;plainJSObj={};for(key in objectInstance)__hasProp.call(objectInstance,key)&&(val=objectInstance[key],plainJSObj[key]=val);return plainJSObj},Generic.encodeDateForAPI=function(inputDate,dateOnly){var utcDate,utcDateString;return null==dateOnly&&(dateOnly=!1),utcDate=dateOnly?inputDate:new Date(inputDate.getUTCFullYear(),inputDate.getUTCMonth(),inputDate.getUTCDate(),inputDate.getUTCHours(),inputDate.getUTCMinutes(),inputDate.getUTCSeconds()),utcDateString=utcDate.toISOString().slice(0,dateOnly?-14:-5),utcDateString=""+utcDateString+(dateOnly?"":"Z")},Generic.encodeDateForRestGetParameter=function(inputDate){var utcDate,utcDateString;return utcDate=new Date(inputDate.getUTCFullYear(),inputDate.getUTCMonth(),inputDate.getUTCDate(),inputDate.getUTCHours(),inputDate.getUTCMinutes(),inputDate.getUTCSeconds()),utcDateString=utcDate.toISOString().slice(0,-5),utcDateString+="%2B00%3A00",utcDateString=utcDateString.replace(/:/g,"%3A")},Generic.toValidJSONObject=function(objectInstance,objectsToIgnore){var key,resultObject,val;if(null==objectsToIgnore&&(objectsToIgnore=[]),_.isDate(objectInstance))return objectInstance;if(_.isArray(objectInstance)||_.isObject(objectInstance)){objectsToIgnore.push(objectInstance),resultObject=_.isArray(objectInstance)?[]:{};for(key in objectInstance)__hasProp.call(objectInstance,key)&&(val=objectInstance[key],_.contains(objectsToIgnore,val)||_.isFunction(val)||val===window||val===document||window.HTMLElement&&val instanceof window.HTMLElement||(_.isArray(resultObject)?resultObject.push(this.toValidJSONObject(val,objectsToIgnore)):resultObject[key]=this.toValidJSONObject(val,objectsToIgnore)));return resultObject}return objectInstance},Generic.toPlainJSObjectList=function(objectInstanceList){var list,objectInstance,_i,_len;for(list=[],_i=0,_len=objectInstanceList.length;_len>_i;_i++)objectInstance=objectInstanceList[_i],list.push(Generic.toPlainJSObject(objectInstance));return list},Generic.generateUuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r,v;return r=16*Math.random()|0,v="x"===c?r:3&r|8,v.toString(16)})},Generic.usesFileSystem=function(wrap){return"Attachment"===wrap.objectApiName?!0:!1},Generic.getAjaxError=function(request,settings){return{statusText:request.statusText,requestURL:settings.url,method:settings.type,status:request.status,readyState:request.readyState,responseJSON:request.responseJSON}},Generic.isOfflineError=function(err){return null==err||null==err.readyState?!1:0===err.readyState&&"error"===err.statusText&&0===err.status?!0:!1},Generic.isTimeoutError=function(err){return null==err||null==err.requestURL?!1:0===err.readyState&&"timeout"===err.statusText&&0===err.status?!0:!1},Generic.isTokenError=function(err){return null==err||null==err.requestURL?!1:err.requestURL.indexOf("token")>0?!0:!1},Generic.isTQWebServicesError=function(err){return null==err||null==err.requestURL?!1:err.requestURL.indexOf("tqassignment")>0||err.requestURL.indexOf("tqupload")>0||err.requestURL.indexOf("tqdownload")>0||err.requestURL.indexOf("tqmetadata")>0?!0:!1},Generic.initializeClassProperty=function(localstoragePrefix,propertyName,firstInitializationValue){var value;return value=store.get(localstoragePrefix+propertyName),void 0===value&&(value=firstInitializationValue,store.set(localstoragePrefix+propertyName,value)),value},Generic.base64ToBlob=function(base64String,contentType){var binary,buffer,i,len,typeData,view;for(binary=atob(base64String),len=binary.length,buffer=new ArrayBuffer(len),view=new Uint8Array(buffer),i=0;len>i;)view[i]=binary.charCodeAt(i),i++;return contentType&&(typeData={type:contentType}),new Blob([view],typeData)},Generic.getFilenameFromUrl=function(url){var dataUrlRegex,fileName,parsedResult;return 0===url.indexOf("data:")?(dataUrlRegex=/^data:(.*?)\/(.*?);base64,(.*)$/,parsedResult=dataUrlRegex.exec(url),fileName="data",_.isEmpty(parsedResult[2])||(fileName+="."+parsedResult[2]),fileName):url?url.split("/").pop().split("#").shift().split("?").shift():null},Generic.getFileExtension=function(url,defaultExt){return null==defaultExt&&(defaultExt=""),_.isEmpty(url)?defaultExt:-1===url.indexOf(".")?defaultExt:url.split(".").pop().split(/\#|\?/)[0]},Generic.getMimeType=function(fileString,defaultMimeType){var fileExtension;return _.isEmpty(fileString)?defaultMimeType:(fileExtension=this.getFileExtension(fileString),_.isEmpty(fileExtension)?defaultMimeType:_.contains(["pdf","txt","csv","rtf"],fileExtension)?"text/"+fileExtension:"image/"+fileExtension)},Generic.hash=function(string){return md2(string)},Generic.isResponseSuccessful=function(response){var element,_i,_len,_ref;if(!_.isEmpty(response)){if(!_.isEmpty(response.error))return!1;if(_.isArray(response.body))for(_ref=response.body,_i=0,_len=_ref.length;_len>_i;_i++)if(element=_ref[_i],element.success===!1)return!1}return!0},Generic.getResponseErrorList=function(response){var element,error,errorList,_i,_j,_len,_len1,_ref,_ref1;if(errorList=[],!_.isEmpty(response)&&(_.isEmpty(response.error)||errorList.push(response.error),_.isArray(response.body)))for(_ref=response.body,_i=0,_len=_ref.length;_len>_i;_i++)if(element=_ref[_i],element.success===!1&&_.isArray(element.errorList))for(_ref1=element.errorList,_j=0,_len1=_ref1.length;_len1>_j;_j++)error=_ref1[_j],errorList.push(error);return errorList},Generic}()}})}),define("acnCore/base/haserrorstatus",["acnCore/util/generic"],function(){var HasErrorStatus;return namespace({TQ:{base:HasErrorStatus=function(){function HasErrorStatus(){}return HasErrorStatus.CLASS_LOCALSTORAGE_NAMESPACE=HasErrorStatus.name+"_",HasErrorStatus.errorStatus=null,HasErrorStatus._setErrorStatus=function(error){return this.errorStatus=error,store.set(this.CLASS_LOCALSTORAGE_NAMESPACE+"errorStatus",error)},HasErrorStatus._clearErrorStatus=function(){return this._setErrorStatus(null)},HasErrorStatus._setErrorStatusAndLogIt=function(logObject){return TQ.util.Generic.isOfflineError(logObject.error)?void 0:(this._setErrorStatus({error:logObject.error,errorCode:logObject.errorCode}),TQ.log.Logger.error(logObject))},HasErrorStatus}()}})}),define("acnCore/config/core",[],function(){var Core;return namespace({TQ:{config:Core=function(){function Core(){}return Core.QUEUE_STORE_NAME="Queue",Core.LOG_STORE_NAME="Log",Core.QUEUE_STORAGE_NAME="QueueStorage",Core.DATA_STORAGE_NAME="DataStorage",Core.LOG_STORAGE_NAME="LogStorage",Core.CORE_CONFIG_STORE_PREFIX="CoreConfig_",Core.ENVIRONMENT_OPTIONS=[],Core.initializeEnvironmentList=function(){var environmentList;return environmentList=store.get(this.CORE_CONFIG_STORE_PREFIX+"environmentList"),void 0===environmentList&&(environmentList=this.ENVIRONMENT_OPTIONS,store.set(this.CORE_CONFIG_STORE_PREFIX+"environmentList",environmentList)),environmentList},Core.clientAppId="ACNONE",Core.provider="salesforce",Core.environments=Core.initializeEnvironmentList(),Core.loggingToken=null,Core.PRINT_TO_CONSOLE=!0,Core.SAVE_TO_CACHE=!0,Core.SUBMIT_TO_SERVER=!0,Core.bootstrapIncludesAuthentication=!1,Core.developmentMode=!1,Core.enableAnimations=!0,Core.onlineOnlyEnabled=!1,Core.setOnlineMode=function(enabled){return this.setCoreProperty("onlineOnlyEnabled",enabled)},Core.setCoreProperty=function(propertyName,propertyvalue){return Core.hasOwnProperty(propertyName)?Core[propertyName]=propertyvalue:void 0},Core}()}})}),define("acnCore/rest/provider",["acnCore/config/core","acnCore/util/generic"],function(Core){var Provider;return namespace({TQ:{rest:Provider=function(){function Provider(){}return Provider._client=null,Provider.getClient=function(){var provider;return provider=TQ.config.Core.provider,this._client||(this._client="salesforce"===provider?new TQ.rest.ForcetkWrapper:null),this._client},Provider.getUserId=function(){return Salesforce.client?Salesforce.client.userId:void 0},Provider.getCommunityId=function(){return Salesforce.client?Salesforce.client.communityId:void 0},Provider.getToken=function(){return Salesforce.client.sessionId},Provider.getInstanceUrl=function(){return Salesforce.client.instanceUrl},Provider.query=function(query){return Salesforce.client.query(query)},Provider.queryAll=function(query){return Salesforce.client.queryAll(query)},Provider.queryMore=function(nextRecordsUrl){return Salesforce.client.queryMore(nextRecordsUrl)},Provider.rest=function(path,method,payload,paramMap,retry){return Salesforce.apexrest(path,null,null,method,payload,paramMap,retry)},Provider.chatterCall=function(path,method,payload,paramMap,retry){return Salesforce.chatterrest(path,null,null,method,payload,paramMap,retry)},Provider.getUpdates=function(objectApiName,fromDate,toDate){var fromDateString,restPath,toDateString;return fromDateString=TQ.util.Generic.encodeDateForRestGetParameter(fromDate),toDateString=TQ.util.Generic.encodeDateForRestGetParameter(toDate),restPath="/services/data/v31.0/sobjects/"+objectApiName+"/updated/?start="+fromDateString+"&end="+toDateString,Salesforce.rest(restPath,null,null,"GET")},Provider.nativeRest=function(path,method,payload,paramMap,retry){return null==method&&(method="GET"),0!==path.indexOf("/services")&&(path="/services/data/v31.0/"+path),Salesforce.rest(path,null,null,method,payload,paramMap,retry)},Provider.getDeletions=function(objectApiName,fromDate,toDate){var fromDateString,restPath,toDateString;return fromDateString=TQ.util.Generic.encodeDateForRestGetParameter(fromDate),toDateString=TQ.util.Generic.encodeDateForRestGetParameter(toDate),restPath="/services/data/v31.0/sobjects/"+objectApiName+"/deleted/?start="+fromDateString+"&end="+toDateString,Salesforce.rest(restPath,null,null,"GET")},Provider.describe=function(objectApiName){return objectApiName?Salesforce.client.describe(objectApiName):void 0},Provider.describeLayout=function(objectApiName){return objectApiName?Salesforce.describeLayout(objectApiName):void 0},Provider}()}})});var __hasProp={}.hasOwnProperty;define("acnCore/sync/tqrecord",["acnCore/rest/provider"],function(){var TQRecord;return namespace({TQ:{sync:TQRecord=function(){function TQRecord(){}return TQRecord.SYNCHRONISED="SYNCHRONISED",TQRecord.AWAITING_SYNCHRONISATION="AWAITING_SYNCHRONISATION",TQRecord.SYNCING="SYNCING",TQRecord.SYNC_ERROR="SYNC_ERROR",TQRecord.flatWrapToExpandedWrap=function(flatWrap){var expandedWrap,key,val,value,_wrap;{if(null==flatWrap)return null;if(TQRecord.isWrapped(flatWrap)&&TQRecord.isFlat(flatWrap)){expandedWrap={rawRecord:{},dbOrigins:{}};for(key in flatWrap)if(val=flatWrap[key],"_wrap"!==key)expandedWrap.rawRecord[key]=val,expandedWrap.dbOrigins[key]=val;else{_wrap=val;for(key in _wrap)value=_wrap[key],expandedWrap[key]=value}return expandedWrap}}},TQRecord.rawRecordToExpandedWrap=function(rawData,objectApiName){var expandedWrap;return null!=objectApiName&&null!=rawData?(expandedWrap={rawRecord:{}},TQRecord.isWrapped(rawData)?rawData:(this._copyRawRecordProperties(expandedWrap,rawData),this._initWrap(expandedWrap,objectApiName),expandedWrap)):null},TQRecord.copyWrapOnNewFlatWrap=function(newFlatWrap,oldFlatWrap){return newFlatWrap._wrap=oldFlatWrap._wrap,newFlatWrap},TQRecord.rawRecordToFlatWrap=function(rawData,objectApiName){var flatWrap;return flatWrap={_wrap:{}},TQRecord.isWrapped(rawData)?rawData:(this._copyRawRecordProperties(flatWrap,rawData),this._initWrap(flatWrap,objectApiName),flatWrap)},TQRecord.expandedWrapToFlatWrap=function(expandedWrap,returnChangedValuesOnly){var flatWrap,key,originalValues,val;if(null==returnChangedValuesOnly&&(returnChangedValuesOnly=!1),flatWrap={_wrap:{}},TQRecord.isWrapped(expandedWrap)&&!TQRecord.isFlat(expandedWrap)){originalValues=returnChangedValuesOnly?expandedWrap.dbOrigins:null,this._copyRawRecordProperties(flatWrap,expandedWrap.rawRecord,originalValues);for(key in expandedWrap)val=expandedWrap[key],"rawRecord"!==key&&"dbOrigins"!==key&&(flatWrap._wrap[key]=val);return flatWrap}return null},TQRecord._isWrongSerializedDateString=function(value){var regEx;return regEx=new RegExp("^[0-9]{2,4}-[0-9]{2}-[0-9]{2,4}T.{0,20}$"),_.isString(value)&&regEx.test(value)},TQRecord._formatDateString=function(value,fieldType){var limitChar;return limitChar=-1===value.indexOf(".")||"date"===fieldType?"T":".",value.substring(0,value.indexOf(limitChar))},TQRecord._getUploadRecordForWrap=function(objectApiName,flatWrap,changeDate){var dateString,fieldName,fieldType,tqUploadRequestItem;for(fieldName in flatWrap)fieldType=TQ.metadata.Metadata.getFieldType(objectApiName,fieldName),!_.isDate(flatWrap[fieldName])||!isNaN(flatWrap[fieldName].getTime())&&flatWrap[fieldName].getTime()?flatWrap[fieldName]&&_.isDate(flatWrap[fieldName])?(dateString=null,dateString="date"===fieldType?flatWrap[fieldName].getFullYear()+"-"+(flatWrap[fieldName].getMonth()+1)+"-"+flatWrap[fieldName].getDate():flatWrap[fieldName].getUTCFullYear()+"-"+(flatWrap[fieldName].getUTCMonth()+1)+"-"+flatWrap[fieldName].getUTCDate()+"T"+flatWrap[fieldName].getUTCHours()+":"+flatWrap[fieldName].getUTCMinutes()+":"+flatWrap[fieldName].getUTCSeconds(),flatWrap[fieldName]=dateString):this._isWrongSerializedDateString(flatWrap[fieldName])&&(flatWrap[fieldName]=this._formatDateString(flatWrap[fieldName],fieldType)):flatWrap[fieldName]=null;return tqUploadRequestItem={
objectApiName:objectApiName,Id:flatWrap.Id,record:JSON.stringify(flatWrap),changeDate:changeDate}},TQRecord.toTQUploadRequestItem=function(flatWrap){var changeDate,fieldName,flatWrapChanges,flatWrapClone,index,objectApiName,oldValue,record,recordHistory,uploadRequestItems,_ref,_ref1;if(TQRecord.isWrapped(flatWrap)&&TQRecord.isFlat(flatWrap)){if(objectApiName=flatWrap._wrap.objectApiName,flatWrapClone=_.clone(flatWrap),changeDate=flatWrapClone._wrap.createdDateTime?flatWrapClone._wrap.createdDateTime:new Date,flatWrapChanges=flatWrap._wrap.changes,delete flatWrapClone._wrap,!_.isArray(flatWrapChanges)||_.isEmpty(flatWrapChanges))return[this._getUploadRecordForWrap(objectApiName,flatWrapClone,changeDate)];for(recordHistory=[_.clone(flatWrapClone)],index=flatWrapChanges.length-1;index>0;){_ref=flatWrapChanges[index].oldValues;for(fieldName in _ref)__hasProp.call(_ref,fieldName)&&(oldValue=_ref[fieldName],flatWrapClone[fieldName]=oldValue);recordHistory.unshift(_.clone(flatWrapClone)),index--}for(uploadRequestItems=[];index<flatWrapChanges.length;){if(record=recordHistory[index],changeDate=flatWrapChanges[index].changeDate,!_.isEmpty(flatWrapChanges[index].oldValues)){record={Id:recordHistory[index].Id},_ref1=flatWrapChanges[index].oldValues;for(fieldName in _ref1)__hasProp.call(_ref1,fieldName)&&(record[fieldName]=recordHistory[index][fieldName])}uploadRequestItems.push(this._getUploadRecordForWrap(objectApiName,record,changeDate)),index++}return uploadRequestItems}return null},TQRecord.isWrapped=function(record){return _.has(record,"_wrap")||_.has(record,"rawRecord")?!0:!1},TQRecord.cloneRecordWithFieldUpdates=function(record,updatesMap){var key,newRecord,value;if(newRecord=_.clone(record),!_.isEmpty(updatesMap))for(key in updatesMap)__hasProp.call(updatesMap,key)&&(value=updatesMap[key],void 0!==record[key]&&(newRecord[key]=value));return newRecord},TQRecord.copyFieldUpdatesToRecord=function(record,updatesMap){var key,value;if(!_.isEmpty(updatesMap))for(key in updatesMap)__hasProp.call(updatesMap,key)&&(value=updatesMap[key],void 0!==record[key]&&(record[key]=value));return record},TQRecord.isFlat=function(record){return TQRecord.isWrapped(record)?_.has(record,"rawRecord")?!1:!0:null},TQRecord.isValidForUpload=function(flatTQRecord){return flatTQRecord._wrap.syncStatus!==TQRecord.SYNC_ERROR?!0:!1},TQRecord.isLocalId=function(recordId){return null!==recordId&&0===recordId.indexOf(TQ.store.Storage.LOCAL_ID_PREFIX)},TQRecord.isNewInstance=function(expandedWrappedRecord){return expandedWrappedRecord.rawRecord.Id.indexOf("Local_")>-1?!0:!1},TQRecord.getRecordStore=function(flatTQRecord){return flatTQRecord._wrap.objectApiName},TQRecord.hasError=function(flatOrExpandedRecord){return this.isWrapped(flatOrExpandedRecord)?this.isFlat(flatOrExpandedRecord)?flatOrExpandedRecord._wrap.syncStatus===TQRecord.SYNC_ERROR:flatOrExpandedRecord.syncStatus===TQRecord.SYNC_ERROR:null},TQRecord.commitChanges=function(tqRecord){var changeDate;return _.isArray(tqRecord.changes)&&0!==tqRecord.changes.length?tqRecord.changes[tqRecord.changes.length-1].finished=!0:this.isLocalId(tqRecord.rawRecord.Id)&&(changeDate=tqRecord.createdDateTime?tqRecord.createdDateTime:new Date,tqRecord.changes=[{changeDate:changeDate,oldValues:{},finished:!0}]),tqRecord},TQRecord._copyRawRecordProperties=function(wrappedRecord,record,originalValues){var isExpanded,key,shouldCopy,val;isExpanded=_.has(wrappedRecord,"rawRecord"),_.has(record,"attributes")&&delete record.attributes;for(key in record)val=record[key],shouldCopy="Id"===key||!originalValues||_.isUndefined(originalValues[key])||!_.isEqual(originalValues[key],record[key]),shouldCopy&&(isExpanded?wrappedRecord.rawRecord[key]=val:wrappedRecord[key]=val);return wrappedRecord},TQRecord._initWrap=function(wrappedRecord,objectApiName){var creationDate,fromServer,isFlat,key,val,wrapProperties,_results;if(fromServer=isFlat=_.has(wrappedRecord,"_wrap"),creationDate=new Date,wrapProperties={objectApiName:objectApiName,syncStatus:fromServer?TQRecord.SYNCHRONISED:TQRecord.AWAITING_SYNCHRONISATION,createdDateTime:fromServer?creationDate:null,lastModifiedDateTime:fromServer?creationDate:null,localOwner:TQ.rest.Provider.getUserId(),changes:[],errorList:[]},isFlat)return wrappedRecord._wrap=wrapProperties;_results=[];for(key in wrapProperties)val=wrapProperties[key],_results.push(wrappedRecord[key]=val);return _results},TQRecord}()}})}),define("acnCore/metadata/trackedobjectmetadata",["acnCore/sync/tqrecord","acnCore/metadata/metadata"],function(){var TrackedObjectMetadata;return namespace({TQ:{metadata:TrackedObjectMetadata=function(){function TrackedObjectMetadata(objectApiName,modelDescribe,layoutDescribe,fieldsetList,objectCustomIndexList,listHeaderFieldSet,detailFieldSet,rawRecordFieldSet,editFieldSet,createFieldSet,defaultValuesMap,displayable,objectIndexList){this.objectApiName=objectApiName,this.modelDescribe=modelDescribe,this.layoutDescribe=layoutDescribe,this.fieldsetList=fieldsetList,this.listHeaderFieldSet=listHeaderFieldSet,this.detailFieldSet=detailFieldSet,this.rawRecordFieldSet=rawRecordFieldSet,this.editFieldSet=editFieldSet,this.createFieldSet=createFieldSet,this.defaultValuesMap=defaultValuesMap,this.displayable=displayable,objectIndexList?this.objectIndexList=objectIndexList:this._generateObjectIndexList(objectCustomIndexList)}return TrackedObjectMetadata.prototype.objectApiName=null,TrackedObjectMetadata.prototype.modelDescribe={},TrackedObjectMetadata.prototype.layoutDescribe={},TrackedObjectMetadata.prototype.fieldsetList=[],TrackedObjectMetadata.prototype.objectIndexList={},TrackedObjectMetadata.prototype.detailFieldSet=[],TrackedObjectMetadata.prototype.rawRecordFieldSet=[],TrackedObjectMetadata.prototype.editFieldSet=[],TrackedObjectMetadata.prototype.createFieldSet=[],TrackedObjectMetadata.prototype.defaultValuesMap=[],TrackedObjectMetadata.prototype.listHeaderFieldSet=[],TrackedObjectMetadata.prototype.displayable=null,TrackedObjectMetadata.prototype.indexListAsObject=function(objectApiName,indexList,tempModelDescribe){var index,indexListAsObject,_i,_len;for(indexListAsObject={},_i=0,_len=indexList.length;_len>_i;_i++)index=indexList[_i],indexListAsObject[index]=TQ.metadata.Metadata.getFieldType(objectApiName,index,tempModelDescribe);return indexListAsObject},TrackedObjectMetadata.prototype._generateObjectIndexList=function(objectCustomIndexList){var objectCustomIndexListAsObject,objectSFRelationshipIndexListAsObject,objectSFSystemIndexListAsObject;return objectCustomIndexListAsObject=this.indexListAsObject(this.objectApiName,objectCustomIndexList,this.modelDescribe),objectSFSystemIndexListAsObject=this.indexListAsObject(this.objectApiName,this._generateObjectSFSystemIndexList(),this.modelDescribe),objectSFRelationshipIndexListAsObject=this.indexListAsObject(this.objectApiName,this._generateObjectSFRelationshipIndexList(),this.modelDescribe),this.objectIndexList&&(this.objectIndexList={}),_.extend(this.objectIndexList,objectCustomIndexListAsObject,objectSFSystemIndexListAsObject,objectSFRelationshipIndexListAsObject)},TrackedObjectMetadata.prototype._generateObjectSFSystemIndexList=function(){var fieldDescription,systemIndexList,_fn,_i,_len,_ref;for(systemIndexList=["Id","IsDeleted","CreatedById","CreatedDate","LastModifiedById","LastModifiedDate","SystemModstamp"],_ref=this.modelDescribe.fields,_fn=function(fieldDescription){return fieldDescription.nameField===!0||fieldDescription.namePointing===!0?systemIndexList.push(fieldDescription.name):void 0},_i=0,_len=_ref.length;_len>_i;_i++)fieldDescription=_ref[_i],_fn(fieldDescription);return systemIndexList},TrackedObjectMetadata.prototype._generateObjectSFRelationshipIndexList=function(){var fieldDescription,relationshipIndexList,_fn,_i,_len,_ref;for(relationshipIndexList=[],_ref=this.modelDescribe.fields,_fn=function(fieldDescription){return"reference"!==fieldDescription.type||fieldDescription.deprecatedAndHidden?void 0:relationshipIndexList.push(fieldDescription.name)},_i=0,_len=_ref.length;_len>_i;_i++)fieldDescription=_ref[_i],_fn(fieldDescription);return relationshipIndexList},TrackedObjectMetadata.prototype.isUpdatable=function(fieldApiName){return _.contains(this.editFieldSet,fieldApiName)?!0:!1},TrackedObjectMetadata.prototype.isCreatable=function(fieldApiName){return _.contains(this.createFieldSet,fieldApiName)?!0:!1},TrackedObjectMetadata.prototype.isDisplayable=function(fieldApiName){return _.contains(this.detailFieldSet,fieldApiName)?!0:!1},TrackedObjectMetadata.prototype.isTrackedObjectCreatable=function(){return this.modelDescribe.createable},TrackedObjectMetadata.prototype.isTrackedObjectEditable=function(){return this.modelDescribe.updateable},TrackedObjectMetadata.prototype.isTrackedObjectDeletable=function(){return this.modelDescribe.deletable},TrackedObjectMetadata.prototype.isTrackedObjectDisplayable=function(){return this.displayable},TrackedObjectMetadata}()}})}),define("acnCore/store/querybuilder",[],function(){var QueryBuilder;return namespace({TQ:{store:QueryBuilder=function(){function QueryBuilder(){}return QueryBuilder._CORE_PARAMS_LIMIT=500,QueryBuilder._getFieldsArrayForObject=function(objectApiName,isSOQL,fieldsArray){var excludeFields,fieldNameList,objectMetadata;if(null==isSOQL&&(isSOQL=!1),null==fieldsArray&&(fieldsArray=null),isSOQL){if(fieldsArray)return _.unique(fieldsArray).join(", ");if(objectMetadata=TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName),_.isEmpty(objectMetadata))throw{error:"NO OBJECT METADATA"};return fieldNameList=_.pluck(objectMetadata.modelDescribe.fields,"name"),excludeFields=["LastReferencedDate","LastActivityDate","LastViewedDate"],_.difference(fieldNameList,excludeFields).join(", ")}return"*"},QueryBuilder._formatQueryParameter=function(value,variablesArray,isSOQL,forceVariable,fieldType){var resultString;return null==isSOQL&&(isSOQL=!1),null==forceVariable&&(forceVariable=!1),null==fieldType&&(fieldType=null),isSOQL?_.isDate(value)?TQ.util.Generic.encodeDateForAPI(value,"date"===fieldType):_.isString(value)?(resultString=JSON.stringify(value),resultString=resultString.replace(/'/g,"TMP_DATA_CODE"),resultString=resultString.replace(/"/g,"'"),resultString=resultString.replace(/TMP_DATA_CODE/g,"'")):JSON.stringify(value):forceVariable?JSON.stringify(value):(_.isDate(value)&&(value=value.getTime()),variablesArray.push(value),"?")},QueryBuilder.generateWhereStatement=function(whereStatement,variablesArray,isSOQL,objectApiName,keyStatement){var comparisonOperation,comparisonOperationKey,comparisonValue,fieldType,isFirst,partialComparison,partialComparisonList,partialStatementList,prefix,separator,useParameters,valuePart,_i,_len,_this=this;if(null==isSOQL&&(isSOQL=!1),null==keyStatement&&(keyStatement="$and"),"$and"===keyStatement||"$or"===keyStatement||"$not"===keyStatement)return _.isArray(whereStatement)||(whereStatement=[whereStatement]),partialStatementList=[],separator="$or"===keyStatement?" OR ":" AND ",_.each(whereStatement,function(subStatement){var partialStatement;for(keyStatement in subStatement)partialStatement=_this.generateWhereStatement(subStatement[keyStatement],variablesArray,isSOQL,objectApiName,keyStatement),partialStatementList.push(partialStatement)}),prefix="$not"===keyStatement?" NOT ":"",prefix+" ( "+partialStatementList.join(separator)+") ";partialComparisonList=[];for(comparisonOperationKey in whereStatement){if(comparisonOperation=this.getOperation(comparisonOperationKey),comparisonValue=whereStatement[comparisonOperationKey],partialComparison="","IN"===comparisonOperation||"in"===comparisonOperation){for(_.isArray(comparisonValue)||(comparisonValue=[comparisonValue]),partialComparison=" "+keyStatement+" IN (",isFirst=!0,useParameters=comparisonValue.length<this._CORE_PARAMS_LIMIT,_i=0,_len=comparisonValue.length;_len>_i;_i++)valuePart=comparisonValue[_i],partialComparison+=isFirst?"":", ",partialComparison+=this._formatQueryParameter(valuePart,variablesArray,isSOQL,useParameters),isFirst=!1;partialComparison+=")"}else fieldType=TQ.metadata.Metadata.getFieldType(objectApiName,keyStatement),partialComparison=" "+keyStatement+" "+comparisonOperation+" "+this._formatQueryParameter(comparisonValue,variablesArray,isSOQL,!1,fieldType)+" ",variablesArray.push(comparisonValue);partialComparisonList.push(partialComparison)}return" ("+partialComparisonList.join(" AND ")+") "},QueryBuilder.generateSqlQueryString=function(jsonQuery,queryParameters,isSOQL){var objectApiString,sqlString;return null==isSOQL&&(isSOQL=!1),objectApiString=(isSOQL?jsonQuery.objectApiName:"'"+jsonQuery.objectApiName+"'")+" ",sqlString="SELECT "+this._getFieldsArrayForObject(jsonQuery.objectApiName,isSOQL,jsonQuery.fields)+" FROM "+objectApiString,null==jsonQuery.indexedby||isSOQL||(sqlString+=" INDEXED BY ("+jsonQuery.indexedBy+") "),null!=jsonQuery.where&&(sqlString+=" WHERE "+this.generateWhereStatement(jsonQuery.where,queryParameters,isSOQL,jsonQuery.objectApiName)),null!=jsonQuery.orderby&&(sqlString+=" ORDER BY ",sqlString+=_.isArray(jsonQuery.orderby)?jsonQuery.orderby.join(", "):jsonQuery.orderby),null!=jsonQuery.limit&&(sqlString+=" LIMIT "+jsonQuery.limit,null!=jsonQuery.offset&&(sqlString+=" OFFSET "+jsonQuery.offset)),null!=jsonQuery.pagesize&&(sqlString+=" LIMIT "+jsonQuery.pagesize,null!=jsonQuery.page&&(sqlString+=" OFFSET "+jsonQuery.page*jsonQuery.pagesize)),sqlString},QueryBuilder.generateCountQueryString=function(jsonQuery,queryParameters,isSOQL){var countParameter,objectApiString,sqlString;return null==isSOQL&&(isSOQL=!1),objectApiString=(isSOQL?jsonQuery.objectApiName:"'"+jsonQuery.objectApiName+"'")+" ",countParameter=isSOQL?"COUNT()":"COUNT(*)",sqlString="SELECT "+countParameter+" FROM "+objectApiString,null!=jsonQuery.where&&(sqlString+=" WHERE "+this.generateWhereStatement(jsonQuery.where,queryParameters,isSOQL)),sqlString},QueryBuilder.getOperation=function(op){switch(op){case"$gt":return">";case"$lt":return"<";case"$gte":return">=";case"$lte":return"<=";case"$ne":return"!=";case"$eq":return"=";case"$like":return"LIKE";case"$in":return"IN";default:return op}},QueryBuilder}()}})});var __hasProp={}.hasOwnProperty;define("acnCore/store/storage",["acnCore/store/querybuilder"],function(){var Storage;return namespace({TQ:{store:Storage=function(){function Storage(storageName,storeObjectSchemaList){var schema,storageConfig;storageConfig={size:this._ESTIMATED_STORAGE_SIZE,mechanisms:this._getMechanisms(),autoSchema:!0},(null==storeObjectSchemaList||"undefined"==typeof storeObjectSchemaList)&&(storeObjectSchemaList=[]),schema=void 0,schema=null!=storeObjectSchemaList.stores&&"undefined"!=typeof storeObjectSchemaList.stores?storeObjectSchemaList:this._getSchemaObject(storeObjectSchemaList),this.storeName=storageName;try{this.db=new ydn.db.Storage(storageName,schema,storageConfig)}finally{this._initEventHandlers(storeObjectSchemaList)}}return Storage.DEBUG_MODE_ENABLED=!1,Storage.MAX_STORED_QUERY_COUNT=100,Storage._storageMap={},Storage._debugLocalstoreKey="Storage_Debug",Storage._lastExecutedQueries=[],Storage.getStorage=function(storageName,storeObjectSchemaList){var newStorage;return(null==this._storageMap[storageName]||"undefined"==typeof this._storageMap[storageName]||null!=storeObjectSchemaList)&&(newStorage=new TQ.store.Storage(storageName,storeObjectSchemaList),this._storageMap[storageName]=newStorage),this._storageMap[storageName]},Storage.storageExists=function(storageName){return null!=this._storageMap[storageName]&&"undefined"!=typeof this._storageMap[storageName]},Storage.removeStorage=function(storageName){return delete this._storageMap[storageName],TQ.config.Core.onlineOnlyEnabled?ydn.db.deleteDatabase(storageName):void 0},Storage.convertToDate=function(dateObject){var parsedDate;if(null===dateObject)return null;if(_.isDate(dateObject))return _.isNaN(dateObject.getTime())?null:dateObject;_.isString(dateObject)&&dateObject.indexOf("+")>0&&(dateObject=dateObject.substring(0,dateObject.indexOf("+")));try{if(parsedDate=new Date(dateObject),!_.isNaN(parsedDate.getTime()))return dateObject=parsedDate.getTime()}finally{return dateObject}},Storage.LOCAL_ID_PREFIX="Local_",Storage.prototype._ESTIMATED_STORAGE_SIZE=104857600,Storage.prototype._CORE_BATCH_SIZE=500,Storage.prototype._CORE_PARAMS_LIMIT=500,Storage.prototype._FIND_ALL_LIMIT=1e4,Storage.prototype.storeName=null,Storage.prototype.db=null,Storage.prototype._coreDb=null,Storage.prototype.dbVersion=null,Storage.prototype._initEventHandlers=function(storeObjectSchemaList){var _this=this;return this.db.addEventListener("ready",function(event){return _this.dbVersion=event.getVersion(),_this._coreDb=_this._getCoreDb(),_this._autocreateStoreIndexes(storeObjectSchemaList)}),this.db.addEventListener("versionchange",function(event){return event.getVersion?_this.dbVersion=event.getVersion():void 0})},Storage.prototype._autocreateStoreIndexes=function(storeObjectSchemaList){this._coreDb.transaction(function(tx){var fieldName,indexKeyMap,indexName,indexSql,storeSchema,_i,_len,_results;for(indexKeyMap={},_results=[],_i=0,_len=storeObjectSchemaList.length;_len>_i;_i++)storeSchema=storeObjectSchemaList[_i],storeSchema.autoCreateIndexes?_results.push(function(){var _results1;_results1=[];for(fieldName in storeSchema.objectIndexList)"Id"!==fieldName?(indexKeyMap[fieldName]?(indexName=fieldName+indexKeyMap[fieldName]+"_index",indexKeyMap[fieldName]++):(indexName=fieldName+"_index",indexKeyMap[fieldName]=1),indexSql='CREATE INDEX IF NOT EXISTS "'+indexName+'" ON  "'+storeSchema.objectApiName+'" ('+fieldName+")",_results1.push(tx.executeSql(indexSql,[]))):_results1.push(void 0);return _results1}()):_results.push(void 0);return _results},function(error){})},Storage.prototype._getSchemaObject=function(trackedObjectMetadataList){var index,schema;for(schema={stores:[]},index=0;index<trackedObjectMetadataList.length;)schema.stores.push(this._getStoreObjectSchema(trackedObjectMetadataList[index])),index++;return schema},Storage.prototype._getStoreObjectSchema=function(metadata){var dataType,fieldName,store;if(metadata.indexes&&metadata.name)return metadata;if(store={name:metadata.objectApiName,indexes:[],autoIncrement:!1,type:"TEXT"},"undefined"==typeof metadata.keyPath||null===metadata.keyPath?store.keyPath="Id":store.keyPath=metadata.keyPath,"undefined"==typeof metadata.type||null===metadata.type?store.type="TEXT":store.type=metadata.type,"undefined"==typeof metadata.autoIncrement&&null===!metadata.autoIncrement&&(store.autoIncrement=metadata.autoIncrement),null!=metadata.objectIndexList)for(fieldName in metadata.objectIndexList)fieldName!==store.keyPath&&(dataType=metadata.objectIndexList[fieldName],store.indexes.push({keyPath:fieldName,type:this._getFieldStoreType(dataType)}));return store},Storage.prototype._getFieldStoreType=function(dataType){return"base64"===dataType?"BLOB":"date"===dataType||"datetime"===dataType?"DATE":"byte"===dataType||"boolean"===dataType||"int"===dataType?"INTEGER":"double"===dataType||"currency"===dataType||"percent"===dataType?"NUMERIC":"TEXT"},Storage.prototype._getMechanisms=function(){return window.openDatabase||window.sqlitePlugin?["sqlite","websql"]:["sqlite","websql","indexeddb"]},Storage.prototype._getCoreDb=function(){var type;return type=this.db.getType(),"websql"===type?window.openDatabase(this.storeName,this.dbVersion,this.storeName,this._ESTIMATED_STORAGE_SIZE):"sqlite"===type?window.sqlitePlugin.openDatabase(this.storeName,this.dbVersion,this.storeName,this._ESTIMATED_STORAGE_SIZE):void 0},Storage.prototype.isSqlStorage=function(){return"websql"===this.db.getType()||"sqlite"===this.db.getType()},Storage.prototype._addLocalUUIDToRecordList=function(objectApiName,recordList){var keyPath;return keyPath=this.getKeyPath(objectApiName),_.isArray(recordList)||(recordList=[recordList]),_.each(recordList,function(record){record[keyPath]||(record[keyPath]=TQ.store.Storage.generateLocalId())},this),recordList},Storage.generateLocalId=function(){var d,uuid;return d=(new Date).getTime(),uuid="xxxxxxxx-xxxxxxxx".replace(/[xy]/g,function(c){var hex;return hex=(d+16*Math.random())%16|0,d=Math.floor(d/16),("x"===c?hex:7&hex|8).toString(16)}),TQ.store.Storage.LOCAL_ID_PREFIX+uuid},Storage.prototype.getSchema=function(){return this.db.getSchema()},Storage.prototype.getObjectSchema=function(objectApiName){var objectSchema;return objectSchema=null,_.each(this.db.getSchema().stores,function(currentObjectSchema){currentObjectSchema.name===objectApiName&&(objectSchema=currentObjectSchema)}),objectSchema},Storage.prototype.getKeyPath=function(objectApiName){var objectSchema;return objectSchema=this.getObjectSchema(objectApiName),objectSchema?objectSchema.keyPath:null},Storage.prototype.create=function(trackedObjectMetadata){var newStore;_.each(trackedObjectMetadata,_.isArray(trackedObjectMetadata)?this.create:void 0),newStore=this._getStoreObjectSchema(trackedObjectMetadata),this.db.getSchema(function(currentSchema){currentSchema.stores.push(newStore)})},Storage.prototype.executeNativeSql=function(sqlString,parameters){var finalError,finalResponse,sqlDeferred;return null==parameters&&(parameters=[]),sqlDeferred=$.Deferred(),this.isSqlStorage()?(finalResponse=null,finalError=null,this._coreDb.transaction(function(tx){return tx.executeSql(sqlString,parameters,function(tx,response){return finalResponse=response},function(tx,error){return finalError=error})},function(error){return sqlDeferred.reject(finalError||error)},function(){return sqlDeferred.resolve(finalResponse)}),sqlDeferred):sqlDeferred.reject({error:"Storage is not SQL database"})},Storage.prototype.createIndex=function(indexName,objectApiName,fieldsArray,isUnique){var createSQL,fieldsListString;return this.isSqlStorage()?(_.isArray(fieldsArray)||(fieldsArray=[fieldsArray]),fieldsListString=fieldsArray.join(","),createSQL="CREATE "+(isUnique?"UNIQUE ":"")+'INDEX IF NOT EXISTS "'+indexName+'" ON "'+objectApiName+'" ('+fieldsListString+")",this.executeNativeSql(createSQL,[])):void 0},Storage.prototype.drop=function(objectApiName){var index,schema;schema=this.db.getSchema();for(index in schema.stores)if(schema[index].name===objectApiName){schema.splice(index,1);break}},Storage.prototype._convertDateFieldsToCorrectFormat=function(objectApiName,recordList){var dateValue,objectIndex,objectSchema,record,_i,_len,_results;if(_.isArray(recordList)||(recordList=[recordList]),objectSchema=this.getObjectSchema(objectApiName),null!=objectSchema.indexes){for(_results=[],_i=0,_len=recordList.length;_len>_i;_i++)record=recordList[_i],_results.push(function(){var _j,_len1,_ref,_results1;for(_ref=objectSchema.indexes,_results1=[],_j=0,_len1=_ref.length;_len1>_j;_j++)objectIndex=_ref[_j],"DATE"===objectIndex.type&&record[objectIndex.name]?(_.isDate(record[objectIndex.name])?(dateValue=record[objectIndex.name],(_.isNaN(dateValue.getTime())||0===dateValue.getTime())&&(record[objectIndex.name]=null)):record[objectIndex.name]=TQ.store.Storage.convertToDate(record[objectIndex.name]),_.isDate(record[objectIndex.name])?_results1.push(record[objectIndex.name]=record[objectIndex.name].getTime()):_results1.push(void 0)):_results1.push(void 0);return _results1}());return _results}},Storage.prototype._applyRecordListToUpdate=function(objectApiName,recordList,isInsert){return this._convertDateFieldsToCorrectFormat(objectApiName,recordList),isInsert?this._addLocalUUIDToRecordList(objectApiName,recordList):recordList},Storage.prototype._escapeString=function(val){return val.replace(/[\0\n\r\b\t\\\'\x1a]/g,function(s){switch(s){case"\0":return"\\0";case"\n":return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"\t":return"\\t";case"":return"\\Z";default:return"\\"+s}})},Storage.prototype._addValueToSql=function(record,objectIndex,parameters,first){var queryPart,stringValue;return queryPart="",stringValue=String(record[objectIndex.name]),"undefined"==typeof record[objectIndex.name]||null===record[objectIndex.name]?queryPart+="null ":"TEXT"===objectIndex.type&&-1===stringValue.indexOf("\\")&&-1===stringValue.indexOf("'")&&-1===stringValue.indexOf("\n")?queryPart+="'"+this._escapeString(stringValue)+"' ":record[objectIndex.name]===!0||record[objectIndex.name]===!1?(queryPart="? ",parameters.push(record[objectIndex.name])):"INTEGER"===objectIndex.type||"NUMERIC"===objectIndex.type?queryPart+="'"+record[objectIndex.name]+"' ":"DATE"===objectIndex.type?(queryPart+="? ",record[objectIndex.name]=TQ.store.Storage.convertToDate(record[objectIndex.name]),parameters.push(record[objectIndex.name])):(queryPart+="? ",parameters.push(record[objectIndex.name])),first&&(queryPart+=" AS '"+objectIndex.name+"' "),queryPart},Storage.prototype._insertBatchSql=function(objectApiName,recordList,ind){var executeSingleBatch,finalResponse,objectSchema,sqlDeferred,_this=this;return objectSchema=this.getObjectSchema(objectApiName),sqlDeferred=$.Deferred(),finalResponse=null,executeSingleBatch=function(tx,ind){var cnt,first,objectIndex,parameters,record,sqlQuery,_default_,_fn,_i,_len,_ref;if(ind!==recordList.length){for(parameters=[],sqlQuery="INSERT OR REPLACE INTO '"+objectApiName+"'",first=!0,cnt=0;ind<recordList.length&&parameters.length<_this._CORE_PARAMS_LIMIT&&cnt<_this._CORE_BATCH_SIZE;){if(record=recordList[ind],first||(sqlQuery+="\n UNION"),sqlQuery+=" SELECT '"+record[objectSchema.keyPath]+"'",first&&(sqlQuery+=" AS '"+objectSchema.keyPath+"'"),_default_=JSON.stringify(record),-1!==_default_.indexOf('\\"')||-1!==_default_.indexOf("'")||-1!==_default_.indexOf("\n")||-1!==_default_.indexOf("\\n")?(sqlQuery+=", ?",parameters.push(_default_)):sqlQuery+=", '"+_this._escapeString(_default_)+"'",first&&(sqlQuery+=" AS '_default_' "),null!=objectSchema.indexes)for(_ref=objectSchema.indexes,_fn=function(objectIndex){return sqlQuery+=", "+_this._addValueToSql(record,objectIndex,parameters,first)},_i=0,_len=_ref.length;_len>_i;_i++)objectIndex=_ref[_i],_fn(objectIndex);first=!1,ind++,cnt++}return TQ.store.Storage.logIfDebugIsOn(_this.storeName,"_insertBatchSql:",sqlQuery,{parameters:parameters}),tx.executeSql(sqlQuery,parameters,function(tx,response){return null===finalResponse?finalResponse=response:(finalResponse.rowsAffected+=response.rowsAffected,finalResponse.insertId=response.insertId),executeSingleBatch(tx,ind)},function(tx,error){})}},this._coreDb.transaction(function(tx){return executeSingleBatch(tx,0)},function(error){return sqlDeferred.reject(error)},function(){return sqlDeferred.resolve(finalResponse)}),sqlDeferred},Storage.prototype.insert=function(objectApiName,recordList){return _.isArray(recordList)||(recordList=[recordList]),recordList=this._applyRecordListToUpdate(objectApiName,recordList,!0),this.isSqlStorage()&&this._coreDb?this._insertBatchSql(objectApiName,recordList):(TQ.store.Storage.logIfDebugIsOn(this.storeName,"insert:",null,{objectApiName:objectApiName,records:recordList}),this.db.add(objectApiName,recordList))},Storage.prototype.update=function(objectApiName,recordList){return recordList=this._applyRecordListToUpdate(objectApiName,recordList),TQ.store.Storage.logIfDebugIsOn(this.storeName,"update:",null,{objectApiName:objectApiName,records:recordList}),this.db.put(objectApiName,recordList,"Id")},Storage.prototype.upsert=function(objectApiName,recordList,upsertKey){return _.isArray(recordList)||(recordList=[recordList]),recordList=this._applyRecordListToUpdate(objectApiName,recordList,!0),this.isSqlStorage()&&this._coreDb&&!upsertKey?this._insertBatchSql(objectApiName,recordList):(TQ.store.Storage.logIfDebugIsOn(this.storeName,"UPSERT",null,{objectApiName:objectApiName,records:recordList}),this.db.put(objectApiName,recordList,upsertKey))},Storage.prototype.clear=function(objectApiName){return TQ.store.Storage.logIfDebugIsOn(this.storeName,"clear:",null,{objectApiName:objectApiName}),this.db.clear(objectApiName)},Storage.clearStorage=function(storageName,storeExceptions){var storage,store,_i,_len,_ref,_results;for(storage=Storage.getStorage(storageName),_ref=storage.getSchema().stores,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)store=_ref[_i],0===_.where(storeExceptions,store.name).length?(TQ.store.Storage.logIfDebugIsOn(this.storeName,"clearStorage:",null,{objectApiName:store.name}),_results.push(storage.clear(store.name))):_results.push(void 0);return _results},Storage.clearAllStorages=function(exceptions){var key,val,_ref,_results;_ref=Storage._storageMap,_results=[];for(key in _ref)__hasProp.call(_ref,key)&&(val=_ref[key],exceptions?_results.push(Storage.clearStorage(key,exceptions[key])):_results.push(Storage.clearStorage(key)));return _results},Storage.prototype.copyStoreContent=function(originalStoreName,destinationStoreName,clearDestinationContent,excludeIdList){var executeCopyMethod,finalError,finalResponse,moveOperationDeferred;return moveOperationDeferred=$.Deferred(),finalError=null,finalResponse=null,executeCopyMethod=function(tx){var excludeCondition,excludeId,sqlArgumentList,sqlQuery,_i,_len;if(sqlQuery="INSERT OR REPLACE INTO '"+destinationStoreName+"' SELECT * FROM '"+originalStoreName+"'",excludeCondition=null,!clearDestinationContent&&!_.isEmpty(excludeIdList)&&_.isArray(excludeIdList)){for(sqlArgumentList=[],_i=0,_len=excludeIdList.length;_len>_i;_i++)excludeId=excludeIdList[_i],sqlArgumentList.push("'"+String(excludeId)+"'");excludeCondition=" Id NOT IN ("+sqlArgumentList.join(", ")+")"}return _.isEmpty(excludeCondition)||(sqlQuery+=" WHERE "+excludeCondition),TQ.store.Storage.logIfDebugIsOn(this.storeName,"copyStoreContent:insert:",null,{objectApiName:originalStoreName}),tx.executeSql(sqlQuery,[],function(tx,replaceResponse){var deleteQuery;return finalResponse=replaceResponse,deleteQuery="DELETE FROM '"+destinationStoreName+"' WHERE IsDeleted = 'true'",_.isEmpty(excludeCondition)||(deleteQuery+=" AND "+excludeCondition),TQ.store.Storage.logIfDebugIsOn(this.storeName,"copyStoreContent:finalDelete:",deleteQuery,{objectApiName:destinationStoreName}),tx.executeSql(deleteQuery,[],function(){},function(tx,error){return finalError=error})},function(tx,error){return finalError=error})},this._coreDb.transaction(function(tx){return clearDestinationContent?(TQ.store.Storage.logIfDebugIsOn("","copyStoreContent:firstDelete:","DELETE FROM '"+destinationStoreName+"'",{objectApiName:destinationStoreName}),tx.executeSql("DELETE FROM '"+destinationStoreName+"'",[],function(tx){return executeCopyMethod(tx)},function(tx,error){return finalError=error})):executeCopyMethod(tx)},function(error){return moveOperationDeferred.reject(null!=finalError?finalError:{finalError:error})},function(){return moveOperationDeferred.resolve(finalResponse)}),moveOperationDeferred},Storage.prototype._buildQueryBase=function(jsonQuery){var conditionValue,dbQuery,fieldConditions,fieldName,operation,operationKey;if(dbQuery=new ydb.db.query(jsonQuery.from),null!=jsonQuery.where)for(fieldName in jsonQuery.where){fieldConditions=fieldName[jsonQuery.where];for(operationKey in fieldConditions)operation=this._getOperation(f(operationKey)),conditionValue=fieldConditions[operationKey],dbQuery.where(fieldName,operation,conditionValue)}return dbQuery},Storage.prototype._generateWhereStatement=function(whereStatement,variablesArray,keyStatement){var comparisonOperation,comparisonOperationKey,comparisonValue,isFirst,partialComparison,partialComparisonList,partialStatementList,separator,useParameters,valuePart,_i,_len,_this=this;if("$and"===keyStatement||"$or"===keyStatement)return _.isArray(whereStatement)||(whereStatement=[whereStatement]),partialStatementList=[],separator="$or"===keyStatement?" OR ":" AND ",_.each(whereStatement,function(subStatement){var partialStatement;for(keyStatement in subStatement)partialStatement=_this._generateWhereStatement(subStatement[keyStatement],variablesArray,keyStatement),partialStatementList.push(partialStatement)})," ( "+partialStatementList.join(separator)+") ";partialComparisonList=[];for(comparisonOperationKey in whereStatement){if(comparisonOperation=this._getOperation(comparisonOperationKey),comparisonValue=whereStatement[comparisonOperationKey],
partialComparison="","IN"===comparisonOperation||"in"===comparisonOperation){for(_.isArray(comparisonValue)||(comparisonValue=[comparisonValue]),partialComparison=" "+keyStatement+" IN (",isFirst=!0,useParameters=comparisonValue.length<this._CORE_PARAMS_LIMIT,_i=0,_len=comparisonValue.length;_len>_i;_i++)valuePart=comparisonValue[_i],partialComparison+=isFirst?"":", ",useParameters?(partialComparison+="?",variablesArray.push(valuePart)):partialComparison+=JSON.stringify(valuePart),isFirst=!1;partialComparison+=")"}else partialComparison=" "+keyStatement+" "+comparisonOperation+" ? ",variablesArray.push(comparisonValue);partialComparisonList.push(partialComparison)}return" ("+partialComparisonList.join(" AND ")+") "},Storage.prototype._generateSqlQueryString=function(jsonQuery,queryParameters){var sqlString;return sqlString="SELECT * FROM '"+jsonQuery.objectApiName+"' ",null!=jsonQuery.indexedby&&(sqlString+=" INDEXED BY ("+jsonQuery.indexedBy+") "),null!=jsonQuery.where&&(sqlString+=" WHERE "+this._generateWhereStatement(jsonQuery.where,queryParameters,"$and")),null!=jsonQuery.orderby&&(sqlString+=" ORDER BY ",sqlString+=_.isArray(jsonQuery.orderby)?jsonQuery.orderby.join(", "):jsonQuery.orderby),null!=jsonQuery.limit&&(sqlString+=" LIMIT "+jsonQuery.limit,null!=jsonQuery.offset&&(sqlString+=" OFFSET "+jsonQuery.offset)),null!=jsonQuery.pagesize&&(sqlString+=" LIMIT "+jsonQuery.pagesize,null!=jsonQuery.page&&(sqlString+=" OFFSET "+jsonQuery.page*jsonQuery.pagesize)),sqlString},Storage.prototype._getOperation=function(op){switch(op){case"$gt":return">";case"$lt":return"<";case"$gte":return">=";case"$lte":return"<=";case"$ne":return"!=";case"$eq":return"=";case"$like":return"LIKE";case"$in":return"IN";default:return op}},Storage.prototype.find=function(query){var parameters,queryString;return parameters=[],queryString=this._generateSqlQueryString(query,parameters),TQ.store.Storage.logIfDebugIsOn(this.storeName,"find:",queryString,parameters),this.db.executeSql(queryString,parameters)},Storage.prototype.remove=function(objectApiName,primaryKey){return TQ.store.Storage.logIfDebugIsOn(this.storeName,"remove:",null,{objectApiName:objectApiName,key:primaryKey}),this.db.remove(objectApiName,primaryKey)},Storage.prototype.removeQuery=function(objectApiName,where){var removeCondition,sqlQuery,sqlQueryParameters;return sqlQueryParameters=[],sqlQuery="DELETE FROM '"+objectApiName+"'",null!=where&&(removeCondition=this._generateWhereStatement(where,sqlQueryParameters,"$and"),sqlQuery+=" WHERE "+removeCondition),TQ.store.Storage.logIfDebugIsOn(this.storeName,"removeQuery:",sqlQuery,sqlQueryParameters),this.db.executeSql(sqlQuery,sqlQueryParameters)},Storage.prototype.count=function(objectApiName){return this.db.from(objectApiName).count()},Storage.prototype.countQuery=function(query){var sqlQuery,sqlQueryParameters,whereCondition;return sqlQueryParameters=[],sqlQuery="SELECT COUNT(*) FROM '"+query.objectApiName+"'",null!=query.where&&(whereCondition=this._generateWhereStatement(query.where,sqlQueryParameters,"$and"),sqlQuery+=" WHERE "+whereCondition),TQ.store.Storage.logIfDebugIsOn(this.storeName,"countQuery:",sqlQuery,sqlQueryParameters),this.db.executeSql(sqlQuery,sqlQueryParameters)},Storage.prototype.storeExist=function(storeName){var store,_i,_len,_ref;for(_ref=this.getSchema().stores,_i=0,_len=_ref.length;_len>_i;_i++)if(store=_ref[_i],store.name===storeName)return!0;return!1},Storage.logIfDebugIsOn=function(storeName,operation,query,data){return this.DEBUG_MODE_ENABLED?(query&&query.length>1e4||"_insertBatchSql:"===operation?this._lastExecutedQueries.unshift({database:storeName,operation:operation}):this._lastExecutedQueries.unshift({database:storeName,operation:operation,query:query,data:data}),this._lastExecutedQueries.length>this.MAX_STORED_QUERY_COUNT&&this._lastExecutedQueries.pop(),store.set(this._debugLocalstoreKey,this._lastExecutedQueries)):void 0},Storage}()}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/metadata/metadata",["acnCore/base/haserrorstatus","acnCore/rest/provider","acnCore/metadata/trackedobjectmetadata","acnCore/store/storage","acnCore/util/generic","acnCore/config/core"],function(){var Metadata,_ref;return namespace({TQ:{metadata:Metadata=function(_super){function Metadata(){return _ref=Metadata.__super__.constructor.apply(this,arguments)}return __extends(Metadata,_super),Metadata._TRACKED_OBJECT_STORE_NAME="TrackedObject",Metadata._TRACKED_OBJECT_METADATA_STORE_NAME="TrackedObjectMetadata",Metadata.CLASS_LOCALSTORAGE_NAMESPACE="Metadata_",Metadata.ERROR_LOADING_METADATA_FOR_TRACKED_OBJECT="ERROR_LOADING_METADATA_FOR_TRACKED_OBJECT",Metadata.NO_TRACKED_OBJECTS="NO_TRACKED_OBJECTS",Metadata.NO_CONFIGURED_TRACKED_OBJECTS_ON_SERVER="NO_CONFIGURED_TRACKED_OBJECTS_ON_SERVER",Metadata.ERROR_UPSERTING_TRACKED_OBJECT="ERROR_UPSERTING_TRACKED_OBJECT",Metadata.METADATA_RESPONSE_STATUS_ERROR="METADATA_RESPONSE_STATUS_ERROR",Metadata.NO_TRACKED_OBJECTS_FROM_SERVER_OR_STORAGE="NO_TRACKED_OBJECTS_FROM_SERVER_OR_STORAGE",Metadata.IMPOSSIBLE_TO_LOAD_TRACKED_OBJECTS_FROM_STORAGE="IMPOSSIBLE_TO_LOAD_TRACKED_OBJECTS_FROM_STORAGE",Metadata.IMPOSSIBLE_TO_LOAD_TRACKED_OBJECTS_METADATA_FROM_STORAGE="IMPOSSIBLE_TO_LOAD_TRACKED_OBJECTS_METADATA_FROM_STORAGE",Metadata.NO_TRACKED_OBJECT_METADATA="NO_TRACKED_OBJECT_METADATA",Metadata.RECORD_TYPE_DOESNT_EXISTS="RECORD_TYPE_DOESNT_EXISTS",Metadata.FIELDSET_DOESNT_EXISTS_OR_EMPTY="FIELDSET_DOESNT_EXISTS_OR_EMPTY",Metadata.IMPOSSIBLE_TO_SAVE_TRACKED_OBJECTS_METADATA_INTO_STORAGE="IMPOSSIBLE_TO_SAVE_TRACKED_OBJECTS_METADATA_INTO_STORAGE",Metadata.ERROR_LOADING_TRACKED_OBJECT_LAYOUT_FROM_SERVER="ERROR_LOADING_TRACKED_OBJECT_LAYOUT_FROM_SERVER",Metadata.ERROR_LOADING_TRACKED_OBJECT_DESCRIBE_FROM_SERVER="ERROR_LOADING_TRACKED_OBJECT_DESCRIBE_FROM_SERVER",Metadata._inOnlineMode=function(){return TQ.config.Core.onlineOnlyEnabled},Metadata._initializeMetadataStorage=function(){var _this=this;return setTimeout(function(){return _this._inOnlineMode()||(_this._metadataStorage=TQ.store.Storage.getStorage("MetadataStorage",[{objectApiName:_this._TRACKED_OBJECT_STORE_NAME,keyPath:"objectApiName",objectIndexList:{layoutNeeded:"boolean"}},{objectApiName:_this._TRACKED_OBJECT_METADATA_STORE_NAME,keyPath:"objectApiName"}])),_this._metadataOnlineStorageMock={}},10),!0},Metadata.isLoaded=!1,Metadata.trackedObjectList=null,Metadata.trackedObjectMetadataList=[],Metadata._metadataStorage=null,Metadata._metadataOnlineStorageMock={},Metadata._metadataStorageInitialized=Metadata._initializeMetadataStorage(),Metadata._cache={getNameField:{},getPicklistValues:{},getFieldsetLayout:{}},Metadata.errorStatus=TQ.util.Generic.initializeClassProperty(Metadata.CLASS_LOCALSTORAGE_NAMESPACE,"errorStatus",null),Metadata._getDataFromStorage=function(storageName){var dataList;return this._inOnlineMode()?(dataList=this._metadataOnlineStorageMock[storageName],_.isEmpty(dataList)&&(dataList=[]),_.isArray(dataList)||(dataList=_.values(dataList)),$.when(dataList)):this._metadataStorage.find({objectApiName:storageName})},Metadata._saveDataToStorage=function(storageName,dataList){var dataObject,_i,_len;if(this._inOnlineMode()){if(_.isEmpty(this._metadataOnlineStorageMock[storageName])&&(this._metadataOnlineStorageMock[storageName]={}),!_.isEmpty(dataList))for(_.isArray(dataList)||(dataList=[dataList]),_i=0,_len=dataList.length;_len>_i;_i++)dataObject=dataList[_i],this._metadataOnlineStorageMock[storageName][dataObject.objectApiName]=dataObject;return $.when(dataList)}return this._metadataStorage.upsert(storageName,dataList)},Metadata.getTrackedObjectList=function(){var objectList,trackedObject,_i,_len,_ref1;if(objectList=[],this.trackedObjectList){for(_ref1=this.trackedObjectList,_i=0,_len=_ref1.length;_len>_i;_i++)trackedObject=_ref1[_i],TQ.config.Core.developmentMode?objectList.push(trackedObject.objectApiName):trackedObject.displayable&&objectList.push(trackedObject.objectApiName);return objectList}return null},Metadata.getTrackedObjectHeaderFieldSet=function(objectApiName){var displayableHeaderFieldSet,fieldApiName,trackedObjectMetadata,_i,_j,_len,_len1,_ref1,_ref2;if(this.trackedObjectList)for(_ref1=this.trackedObjectMetadataList,_i=0,_len=_ref1.length;_len>_i;_i++)if(trackedObjectMetadata=_ref1[_i],trackedObjectMetadata.objectApiName===objectApiName){for(displayableHeaderFieldSet=[],_ref2=trackedObjectMetadata.listHeaderFieldSet,_j=0,_len1=_ref2.length;_len1>_j;_j++)fieldApiName=_ref2[_j],trackedObjectMetadata.isDisplayable(fieldApiName)?displayableHeaderFieldSet.push(fieldApiName):TQ.log.Logger.log({message:"getTrackedObjectHeaderFieldSet: "+fieldApiName+" is not displayable",namespace:TQ.log.Logger.tags.METADATA});return displayableHeaderFieldSet}return[]},Metadata.getRecordTypePicklistValues=function(objectApiName,recordTypeName){var fieldApiName,objectMetadata,picklistValue,picklistValues,picklistValuesData,recordTypeId,recordTypeMappings,selectedRecordType,selectedRecordTypes,_i,_j,_len,_len1,_ref1,_ref2;if(picklistValuesData={},objectMetadata=this.getTrackedObjectMetadata(objectApiName),!_.isEmpty(objectMetadata)&&!_.isEmpty(objectMetadata.layoutDescribe)&&(recordTypeMappings=objectMetadata.layoutDescribe.recordTypeMappings,recordTypeId=this.getRecordTypeId(objectApiName,recordTypeName),_.isArray(recordTypeMappings)&&!_.isEmpty(recordTypeId)&&(selectedRecordTypes=_.where(recordTypeMappings,{recordTypeId:recordTypeId}),_.isArray(selectedRecordTypes)&&selectedRecordTypes.length>0&&(selectedRecordType=selectedRecordTypes[0],_.isArray(selectedRecordType.picklistsForRecordType)))))for(_ref1=selectedRecordType.picklistsForRecordType,_i=0,_len=_ref1.length;_len>_i;_i++)if(picklistValues=_ref1[_i],fieldApiName=picklistValues.picklistName,picklistValuesData[fieldApiName]=[],_.isArray(picklistValues.picklistValues))for(_ref2=picklistValues.picklistValues,_j=0,_len1=_ref2.length;_len1>_j;_j++)picklistValue=_ref2[_j],picklistValuesData[fieldApiName].push(picklistValue.value);return picklistValuesData},Metadata.getFieldsetLayout=function(objectApiName,fieldsetApiName,recordTypeApiName){var cacheKey,fieldApiName,fieldMetadata,fieldset,fieldsetLayout,recordTypePicklistValues,_i,_len;if(null==recordTypeApiName&&(recordTypeApiName=null),cacheKey=objectApiName+":"+fieldsetApiName+":"+(recordTypeApiName||""),this._cache.getPicklistValues[cacheKey])return _.cloneDeep(this._cache.getFieldsetLayout[cacheKey]);if(fieldset=this.getTrackedObjectFieldSet(objectApiName,fieldsetApiName),!_.isArray(fieldset))return null;for(recordTypePicklistValues=_.isEmpty(recordTypeApiName)?null:this.getRecordTypePicklistValues(objectApiName,recordTypeApiName),fieldsetLayout=[],_i=0,_len=fieldset.length;_len>_i;_i++)fieldApiName=fieldset[_i],fieldMetadata=_.clone(this.getFieldMetadata(objectApiName,fieldApiName)),_.isEmpty(fieldMetadata)||(fieldMetadata.isPicklist="picklist"===fieldMetadata.type,fieldMetadata.isMultipicklist="multipicklist"===fieldMetadata.type,!_.isEmpty(recordTypePicklistValues)&&_.isArray(recordTypePicklistValues[fieldApiName])?fieldMetadata.picklistValues=recordTypePicklistValues[fieldApiName]:fieldMetadata.picklistValues=_.pluck(fieldMetadata.picklistValues,"label"),fieldsetLayout.push(fieldMetadata));return this._cache.getFieldsetLayout[cacheKey]=fieldsetLayout,_.cloneDeep(fieldsetLayout)},Metadata.getTrackedObjectFieldSet=function(objectApiName,fieldSetApiName){var fieldSetItem,trackedObjectMetadata,_i,_j,_len,_len1,_ref1,_ref2;if(this.trackedObjectList&&objectApiName&&fieldSetApiName){for(_ref1=this.trackedObjectMetadataList,_i=0,_len=_ref1.length;_len>_i;_i++)if(trackedObjectMetadata=_ref1[_i],trackedObjectMetadata.objectApiName===objectApiName){for(_ref2=trackedObjectMetadata.fieldsetList,_j=0,_len1=_ref2.length;_len1>_j;_j++)if(fieldSetItem=_ref2[_j],fieldSetItem.name===fieldSetApiName)return fieldSetItem.fieldList;return TQ.log.Logger.log({message:"getTrackedObjectFieldSet: "+fieldSetApiName+" does not exist for "+objectApiName,namespace:TQ.log.Logger.tags.METADATA}),null}return TQ.log.Logger.log({message:""+objectApiName+" does not have metadata",namespace:TQ.log.Logger.tags.METADATA}),null}return TQ.log.Logger.log({message:"no metadata for any object or no params",namespace:TQ.log.Logger.tags.METADATA}),null},Metadata.loadMetadata=function(){var loadMetadata,_this=this;return loadMetadata=$.Deferred(),this._loadTrackedObjectList().done(function(trackedObjectList){return _this._loadTrackedObjectMetadataList(trackedObjectList).done(function(trackedObjectMetadataList){return _this._clearErrorStatus(),TQ.log.Logger.log({message:"metadata:success",details:trackedObjectMetadataList}),_this.isLoaded=!0,loadMetadata.resolve(trackedObjectMetadataList)}).fail(function(err){return loadMetadata.reject(err)})}).fail(function(err){return loadMetadata.reject(err)}),loadMetadata},Metadata.getNameField=function(objectApiName){var field,objectMetadata,_i,_len,_ref1;if(objectApiName){if(this._cache.getNameField[objectApiName])return this._cache.getNameField[objectApiName];if(objectMetadata=this.getTrackedObjectMetadata(objectApiName))for(_ref1=objectMetadata.modelDescribe.fields,_i=0,_len=_ref1.length;_len>_i;_i++)if(field=_ref1[_i],field.nameField===!0)return this._cache.getNameField[objectApiName]=field.name,field.name;return null}return null},Metadata.getFieldType=function(objectApiName,fieldApiName,tempDescribeMetata){var fieldMetadata;return objectApiName&&fieldApiName?(fieldMetadata=this.getFieldMetadata(objectApiName,fieldApiName,tempDescribeMetata),fieldMetadata?fieldMetadata.type:"string"):null},Metadata.getFieldSoapType=function(objectApiName,fieldApiName){var fieldMetadata;return objectApiName&&fieldApiName?(fieldMetadata=this.getFieldMetadata(objectApiName,fieldApiName),fieldMetadata?fieldMetadata.soapType:"string"):null},Metadata.getFieldMetadata=function(objectApiName,fieldApiName,tempModelDescribe){var fieldMetadata,i,objectMetadata;if(objectApiName&&fieldApiName&&(objectMetadata=this.getTrackedObjectMetadata(objectApiName,tempModelDescribe)))for(i=0;i<objectMetadata.modelDescribe.fields.length;){if(fieldMetadata=objectMetadata.modelDescribe.fields[i],fieldMetadata.name===fieldApiName)return fieldMetadata;i++}return null},Metadata.getFieldMetadataMap=function(objectApiName,tempModelDescribe){var fieldMetadata,fieldMetadataMap,objectMetadata,_i,_len,_ref1;if(objectApiName){if(fieldMetadataMap={},objectMetadata=this.getTrackedObjectMetadata(objectApiName,tempModelDescribe))for(_ref1=objectMetadata.modelDescribe.fields,_i=0,_len=_ref1.length;_len>_i;_i++)fieldMetadata=_ref1[_i],fieldMetadataMap[fieldMetadata.name]=fieldMetadata;return fieldMetadataMap}return{}},Metadata.getFieldApiNameLabelsMap=function(tqRecord,objectApiName){var key,recordLabels,val,_ref1;recordLabels={},_ref1=tqRecord.rawRecord;for(key in _ref1)__hasProp.call(_ref1,key)&&(val=_ref1[key],recordLabels[key]=Metadata.getFieldLabel(objectApiName,key));return recordLabels},Metadata.getFieldLabel=function(objectApiName,fieldApiName){var fieldMetadata;return fieldMetadata=TQ.metadata.Metadata.getFieldMetadata(objectApiName,fieldApiName),_.isEmpty(fieldMetadata)?fieldApiName:"reference"!==fieldMetadata.type||fieldMetadata.custom?fieldMetadata.label:fieldMetadata.relationshipName},Metadata.getRecordTypeId=function(objectApiName,recordTypeApiName){var objectMetadata,recordTypeInfo,_i,_len,_ref1;if(objectApiName&&recordTypeApiName&&(objectMetadata=this.getTrackedObjectMetadata(objectApiName),objectMetadata&&objectMetadata.modelDescribe.recordTypeInfos))for(_ref1=objectMetadata.modelDescribe.recordTypeInfos,_i=0,_len=_ref1.length;_len>_i;_i++)if(recordTypeInfo=_ref1[_i],recordTypeInfo.name===recordTypeApiName)return recordTypeInfo.recordTypeId;return null},Metadata.getActivePicklistValues=function(objectApiName,fieldApiName){var activePicklistValueList,fieldMetadata,labelList;return fieldMetadata=this.getFieldMetadata(objectApiName,fieldApiName),fieldMetadata.picklistValues?(activePicklistValueList=_.filter(fieldMetadata.picklistValues,function(item){return item.active===!0}),labelList=_.map(activePicklistValueList,function(item){return item.label})):null},Metadata.getTrackedObjectRequiredFieldsMap=function(objectApiName){var fieldMetadata,objectMetadataFieldList,requiredMap,_i,_len;for(requiredMap={},objectMetadataFieldList=this.getTrackedObjectMetadata(objectApiName).modelDescribe.fields,_i=0,_len=objectMetadataFieldList.length;_len>_i;_i++)fieldMetadata=objectMetadataFieldList[_i],requiredMap[fieldMetadata.name]=!fieldMetadata.nillable;return requiredMap},Metadata.getTrackedObjectMetadata=function(objectApiName,tempModelDescribe){var i,trackedObjectMetadata;if(objectApiName)if(this.trackedObjectMetadataList.length>0)for(i=0;i<this.trackedObjectMetadataList.length;){if(trackedObjectMetadata=this.trackedObjectMetadataList[i],trackedObjectMetadata.objectApiName===objectApiName)return trackedObjectMetadata;i++}else if(tempModelDescribe)return{modelDescribe:tempModelDescribe};return null},Metadata._loadTrackedObjectList=function(){var loadFromServerOrStorage,trackedObjectLoadDef,_this=this;return trackedObjectLoadDef=$.Deferred(),loadFromServerOrStorage=$.Deferred(),this._loadTrackedObjectListFromServer().done(function(response){var error;return response.status>=0?response.body.length>0?_this._saveDataToStorage(_this._TRACKED_OBJECT_STORE_NAME,response.body).done(function(){return loadFromServerOrStorage.resolve()}).fail(function(err){return _this._setErrorStatusAndLogIt({error:err,errorCode:_this.ERROR_UPSERTING_TRACKED_OBJECT,namespace:TQ.log.Logger.tags.METADATA}),trackedObjectLoadDef.reject(_this.ERROR_UPSERTING_TRACKED_OBJECT)}):(_this._setErrorStatusAndLogIt({errorCode:_this.NO_CONFIGURED_TRACKED_OBJECTS_ON_SERVER,namespace:TQ.log.Logger.tags.METADATA}),trackedObjectLoadDef.reject(_this.NO_CONFIGURED_TRACKED_OBJECTS_ON_SERVER)):(error={errror:response,errorCode:_this.METADATA_RESPONSE_STATUS_ERROR},_this._setErrorStatusAndLogIt({error:error.error,errorCode:error.errorCode,namespace:TQ.log.Logger.tags.METADATA}),trackedObjectLoadDef.reject(error))}).fail(function(){return loadFromServerOrStorage.resolve()}),$.when(loadFromServerOrStorage).done(function(){return _this._getDataFromStorage(_this._TRACKED_OBJECT_STORE_NAME).done(function(collection){return collection.length>0?(_this.trackedObjectList=collection,trackedObjectLoadDef.resolve(collection)):(_this._setErrorStatusAndLogIt({errorCode:_this.NO_TRACKED_OBJECTS,namespace:TQ.log.Logger.tags.METADATA}),trackedObjectLoadDef.reject(_this.NO_TRACKED_OBJECTS))}).fail(function(err){return _this._setErrorStatusAndLogIt({error:err,errorCode:_this.IMPOSSIBLE_TO_LOAD_TRACKED_OBJECTS_FROM_STORAGE,namespace:TQ.log.Logger.tags.METADATA}),trackedObjectLoadDef.reject(_this.IMPOSSIBLE_TO_LOAD_TRACKED_OBJECTS_FROM_STORAGE)})}),trackedObjectLoadDef},Metadata._loadTrackedObjectMetadataList=function(trackedObjectList){var metadataLoadDef,objectMetadataLoadFromServerDefList,trackedObject,_i,_len,_this=this;for(metadataLoadDef=$.Deferred(),objectMetadataLoadFromServerDefList=[],_i=0,_len=trackedObjectList.length;_len>_i;_i++)trackedObject=trackedObjectList[_i],objectMetadataLoadFromServerDefList.push(this._loadObjectMetadataFromServer(trackedObject));return $.when.apply(null,objectMetadataLoadFromServerDefList).always(function(){return _this._getDataFromStorage(_this._TRACKED_OBJECT_METADATA_STORE_NAME).done(function(collection){var rawTrackedObjectMetadata,trackedObjectMetadata,_j,_len1;if(collection.length>0){for(_j=0,_len1=collection.length;_len1>_j;_j++)rawTrackedObjectMetadata=collection[_j],trackedObjectMetadata=new TQ.metadata.TrackedObjectMetadata(rawTrackedObjectMetadata.objectApiName,rawTrackedObjectMetadata.modelDescribe,rawTrackedObjectMetadata.layoutDescribe,rawTrackedObjectMetadata.fieldsetList,rawTrackedObjectMetadata.objectCustomIndexList,rawTrackedObjectMetadata.listHeaderFieldSet,rawTrackedObjectMetadata.detailFieldSet,rawTrackedObjectMetadata.rawRecordFieldSet,rawTrackedObjectMetadata.editFieldSet,rawTrackedObjectMetadata.createFieldSet,rawTrackedObjectMetadata.defaultValuesMap,rawTrackedObjectMetadata.displayable,rawTrackedObjectMetadata.objectIndexList),_this.trackedObjectMetadataList.push(trackedObjectMetadata);return metadataLoadDef.resolve(collection)}return _this._setErrorStatusAndLogIt({errorCode:_this.NO_TRACKED_OBJECT_METADATA,namespace:TQ.log.Logger.tags.METADATA}),metadataLoadDef.reject(_this.NO_TRACKED_OBJECT_METADATA)}).fail(function(err){return _this._setErrorStatusAndLogIt({error:err,errorCode:_this.IMPOSSIBLE_TO_LOAD_TRACKED_OBJECTS_METADATA_FROM_STORAGE,namespace:TQ.log.Logger.tags.METADATA}),metadataLoadDef.reject(_this.IMPOSSIBLE_TO_LOAD_TRACKED_OBJECTS_METADATA_FROM_STORAGE)})}),metadataLoadDef},Metadata._loadObjectMetadataFromServer=function(trackedObject){var objectMetadataLoadFromServerDef,_this=this;return objectMetadataLoadFromServerDef=$.Deferred(),this._getTrackedObjectDescribeModelFromServer(trackedObject).done(function(describeModelMetadata){return trackedObject.layoutNeeded?_this._getTrackedObjectDescribeLayoutFromServer(trackedObject).done(function(describeLayoutMetadata){return _this._saveTrackedObjectMetadataIntoStorage(trackedObject,describeModelMetadata,describeLayoutMetadata).done(function(){return objectMetadataLoadFromServerDef.resolve()}).fail(function(err){return objectMetadataLoadFromServerDef.reject(err)})}).fail(function(err){return _this._setErrorStatusAndLogIt({error:err,errorCode:_this.ERROR_LOADING_TRACKED_OBJECT_LAYOUT_FROM_SERVER,namespace:TQ.log.Logger.tags.METADATA}),objectMetadataLoadFromServerDef.reject(_this.ERROR_LOADING_TRACKED_OBJECT_LAYOUT_FROM_SERVER)}):_this._saveTrackedObjectMetadataIntoStorage(trackedObject,describeModelMetadata,null).done(function(){return objectMetadataLoadFromServerDef.resolve()}).fail(function(err){return objectMetadataLoadFromServerDef.reject(err)})}).fail(function(err){return _this._setErrorStatusAndLogIt({error:err,errorCode:_this.ERROR_LOADING_TRACKED_OBJECT_DESCRIBE_FROM_SERVER,namespace:TQ.log.Logger.tags.METADATA}),objectMetadataLoadFromServerDef.reject(_this.ERROR_LOADING_TRACKED_OBJECT_DESCRIBE_FROM_SERVER)}),objectMetadataLoadFromServerDef},Metadata._saveTrackedObjectMetadataIntoStorage=function(trackedObject,describeModelMetadata,describeLayoutMetadata){var trackedObjectMetadata,_this=this;return trackedObjectMetadata=new TQ.metadata.TrackedObjectMetadata(trackedObject.objectApiName,describeModelMetadata,describeLayoutMetadata,trackedObject.fieldSetList,trackedObject.objectCustomIndexList,trackedObject.listHeaderFieldSet,trackedObject.detailFieldSet,trackedObject.rawRecordFieldSet,trackedObject.editFieldSet,trackedObject.createFieldSet,trackedObject.defaultValuesMap,trackedObject.displayable,null),this._saveDataToStorage(this._TRACKED_OBJECT_METADATA_STORE_NAME,TQ.util.Generic.toPlainJSObject(trackedObjectMetadata)).fail(function(err){return _this._setErrorStatusAndLogIt({error:err,errorCode:_this.IMPOSSIBLE_TO_SAVE_TRACKED_OBJECTS_METADATA_INTO_STORAGE,namespace:TQ.log.Logger.tags.METADATA})})},Metadata._loadTrackedObjectListFromServer=function(){var clientAppIdRequest;return clientAppIdRequest={clientAppID:TQ.config.Core.clientAppId},TQ.rest.Provider.rest("/tqmetadata","POST",JSON.stringify(clientAppIdRequest))},Metadata._getTrackedObjectDescribeLayoutFromServer=function(trackedObject){return TQ.rest.Provider.describeLayout(trackedObject.objectApiName)},Metadata._getTrackedObjectDescribeModelFromServer=function(trackedObject){return TQ.rest.Provider.describe(trackedObject.objectApiName)},Metadata.getBlobFieldsArray=function(objectApiName){var blobArray,fieldDescribe,objectMetadata,_i,_len,_ref1;if(blobArray=[],objectMetadata=this.getTrackedObjectMetadata(objectApiName),!_.isEmpty(objectMetadata))for(_ref1=objectMetadata.modelDescribe.fields,_i=0,_len=_ref1.length;_len>_i;_i++)fieldDescribe=_ref1[_i],"base64"===fieldDescribe.type&&(fieldDescribe.createable||fieldDescribe.updateable)&&blobArray.push(fieldDescribe.name);return blobArray},Metadata}(TQ.base.HasErrorStatus)}})}),define("acnCore/sync/tqdownloadservice",["acnCore/config/core"],function(){var TQDownloadService;return namespace({TQ:{sync:TQDownloadService=function(){function TQDownloadService(){}return TQDownloadService.generateTQDownloadRequest=function(trackedObjectSyncStatusList){var request,trackedObjectSyncStatus,_i,_len;for(request={clientAppID:TQ.config.Core.clientAppId,requestItemList:[]},_i=0,_len=trackedObjectSyncStatusList.length;_len>_i;_i++)trackedObjectSyncStatus=trackedObjectSyncStatusList[_i],trackedObjectSyncStatus.needsToBeSynchronized()&&trackedObjectSyncStatus.initNewDownload(),request.requestItemList.push(trackedObjectSyncStatus.toTQDownloadRequestItem());return JSON.stringify(request)},TQDownloadService}()}})}),define("acnCore/device/platform",[],function(){var Platform;return namespace({TQ:{device:Platform=function(){function Platform(){}return Platform.isDevice=function(){return"undefined"!=typeof cordova},Platform.isAndroid=function(version,greaterThanEquals){return window.device&&"Android"===window.device.platform?!0:!1},Platform.isIOS=function(version,greaterThanEquals){return window.device&&"iOS"===window.device.platform?!0:!1},Platform.isWindows=function(version,greaterThanEquals){return window.device&&"windows"===window.device.platform?!0:!1},Platform.restart=function(){return window.location.reload()},Platform}()}})}),define("acnCore/device/connection",["acnCore/sync/syncengine","acnCore/device/platform","acnCore/status/appstatus"],function(SyncEngine,Platform,AppStatus){var Connection;return namespace({TQ:{device:Connection=function(){function Connection(){}return Connection.CONNECTION_CHANGED_EVENT_NAME="tqConnectionStatusChanged",Connection.OFFLINE="OFFLINE",Connection._ONLINE_CHECK_TIMEOUT=500,Connection._initConnectionStatusWithEvents=function(){var eventFiringObject,updateOnlineHandler,_this=this;return eventFiringObject=null,eventFiringObject=TQ.device.Platform.isDevice()?document:window,updateOnlineHandler=function(event){return _this._onlineConfirmTimeout&&(clearTimeout(_this._onlineConfirmTimeout),_this._onlineConfirmTimeout=null),_this._onlineConfirmTimeout=setTimeout(function(){return _this.isConnected="online"===event.type,TQ.status.AppStatus.fireConnectionChangeEvent(),_this._onlineConfirmTimeout=null},"online"===event.type?_this._ONLINE_CHECK_TIMEOUT:0)},eventFiringObject.addEventListener("online",updateOnlineHandler),eventFiringObject.addEventListener("offline",updateOnlineHandler),navigator.onLine},Connection._onlineConfirmTimeout=null,Connection.isConnected=Connection._initConnectionStatusWithEvents(),Connection.getType=function(){return TQ.device.Platform.isDevice()?navigator.connection.type:navigator.onLine?"wifi":"none"},Connection}()}})}),define("acnCore/log/entry",["acnCore/status/appstatus","acnCore/config/core","acnCore/rest/provider"],function(){var Entry;return namespace({TQ:{log:Entry=function(){function Entry(customProperties){var platform;platform=null,platform=window.device?window.device.platform+"|"+window.device.version+"|"+window.device.model:"web",_.isString(customProperties)?(this.message=customProperties,this.level=Entry.levels.DEBUG):(this.message=customProperties.message||"",this.details=customProperties.details||null,this.namespace=customProperties.namespace||"",this.labels=customProperties.labels||"",this.state=customProperties.state||"",this.level=customProperties.level,this.errorCode=customProperties.errorCode||null,this.error=customProperties.error||null),this._userId=TQ.rest.Provider.getUserId(),this._appId=TQ.config.Core.clientAppId,this._deviceId=TQ.status.AppStatus.deviceId,this._platform=platform,this._releaseType=window.ENV_VARS.deploymentEnv,this._appVersion=window.appVersion,this._datetime=new Date}return Entry.levels={ERROR:-2,WARN:-1,INFO:0,DEBUG:1},Entry.prototype.level=null,Entry.prototype.labels="",Entry.prototype.namespace="",Entry.prototype.message="",Entry.prototype.details=null,Entry.prototype.errorCode="",Entry.prototype.error=null,Entry.prototype._userId=null,Entry.prototype._appId=null,Entry.prototype._deviceId=null,Entry.prototype._platform=null,Entry.prototype._appVersion=null,Entry.prototype._datetime=null,Entry.prototype._releaseType=null,Entry}()}})}),define("acnCore/schedule/job",["acnCore/device/connection","acnCore/status/appstatus"],function(){var Job;return namespace({TQ:{schedule:Job=function(){function Job(parameters){var parameterName;if(parameters&&"undefined"!=typeof parameters)for(parameterName in parameters)this[parameterName]=parameters[parameterName];this.startEventName||(this.startEventName=this.id+"Start"),this.successEventName||(this.successEventName=this.id+"Success"),this.failEventName||(this.failEventName=this.id+"Fail")}return Job.Resources={DATA_STORAGE:"DataStorage",LOCAL_STORAGE:"LocalStorage",SERVER:"Server",METADATA:"Metadata"},Job.prototype.id=null,Job.prototype.interval=null,Job.prototype.retryOnFailInterval=null,Job.prototype.when=null,Job.prototype.resources=[],Job.prototype.isExecuting=!1,Job.prototype.onlineOnly=!1,Job.prototype.executeOnStartup=!1,Job.prototype.scheduler=null,Job.prototype.executeOnEvents=[],Job.prototype.startEventName=null,Job.prototype.successEventName=null,Job.prototype.failEventName=null,Job.prototype.couldBeExecuted=function(){return!0},Job.prototype.execute=function(){return jQuery.Deferred().resolve()},Job}()}})}),define("acnCore/schedule/scheduler",["acnCore/device/connection","acnCore/status/appstatus"],function(){var Scheduler;return namespace({TQ:{schedule:Scheduler=function(){function Scheduler(){}return Scheduler.SCHEDULE_STORE_PREFIX="Scheduler_",Scheduler._SCHEDULE_TIMER_INTERVAL=3e3,Scheduler.JOB_EXECUTION_DELAYED="JobExecutionDelayed",Scheduler._initializeNextExecutionTimeMap=function(){var result;return result=store.get(this.SCHEDULE_STORE_PREFIX+"NextExecute"),result||(result={}),result},Scheduler._scheduleJobsMap={},Scheduler._scheduleJobs=[],Scheduler._jobDeferredMap={},Scheduler._resourcesInUse=[],Scheduler._eventExecuteMap={},Scheduler._nextExecutionTimeMap=Scheduler._initializeNextExecutionTimeMap(),Scheduler._eventSender=jQuery(window),Scheduler._deviceEventSender=jQuery(document),Scheduler._intervalMethodId=null,Scheduler._started=!1,Scheduler.addJob=function(scheduleJob){var doExecutionAfterAdding,eventName,_i,_len,_ref,_this=this;if(this._scheduleJobs.push(scheduleJob),this._scheduleJobsMap[scheduleJob.id]=scheduleJob,scheduleJob.scheduler=this,doExecutionAfterAdding=!1,scheduleJob.executeOnStartup?(doExecutionAfterAdding=!0,this._nextExecutionTimeMap[scheduleJob.id]=null,store.set(this.SCHEDULE_STORE_PREFIX+"NextExecute",this._nextExecutionTimeMap)):this._nextExecutionTimeMap[scheduleJob.id]||this._updateNextExecutionTime(scheduleJob,!0),scheduleJob.executeOnEvents&&_.isArray(scheduleJob.executeOnEvents))for(_ref=scheduleJob.executeOnEvents,_i=0,_len=_ref.length;_len>_i;_i++)eventName=_ref[_i],this._eventExecuteMap[eventName]?this._eventExecuteMap[eventName].push(scheduleJob):(this._eventExecuteMap[eventName]=[scheduleJob],this._eventSender.on(eventName,function(){return _this._started?_this._processEventHandling(eventName):void 0}),this._deviceEventSender.on(eventName,function(){return _this._started?_this._processEventHandling(eventName):void 0}));return doExecutionAfterAdding?this._processItems():void 0},Scheduler.removeJob=function(scheduleJob){var eventName,_i,_len,_ref,_results;for(scheduleJob.scheduler=null,this._scheduleJobsMap[scheduleJob.id]&&delete this._scheduleJobsMap[scheduleJob.id],this._scheduleJobs=_.without(this._scheduleJobs,scheduleJob),this._nextExecutionTimeMap[scheduleJob.id]&&delete this._nextExecutionTimeMap[scheduleJob.id],store.set(this.SCHEDULE_STORE_PREFIX+"NextExecute",this._nextExecutionTimeMap),
_ref=scheduleJob.executeOnEvents,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)eventName=_ref[_i],_.isArray(this._eventExecuteMap[eventName])?_results.push(this._eventExecuteMap[eventName]=_.without(this._eventExecuteMap[eventName],scheduleJob)):_results.push(void 0);return _results},Scheduler.start=function(){var _this=this;return this._started=!0,this._intervalMethodId=setInterval(function(){return _this._processItems()},this._SCHEDULE_TIMER_INTERVAL)},Scheduler.stop=function(){return this._started?(this._started=!1,clearInterval(this._intervalMethodId)):void 0},Scheduler._jobCouldBeExecuted=function(scheduleJob){return!(scheduleJob.isExecuting||_.isFunction(scheduleJob.couldBeExecuted)&&!scheduleJob.couldBeExecuted()||scheduleJob.onlineOnly&&!TQ.status.AppStatus.isOnline())},Scheduler._getListOfJobsToExecute=function(definedTasks){var error,nextExecutionTime,now,scheduleJob,taskList,_i,_len;for(null==definedTasks&&(definedTasks=this._scheduleJobs),taskList=[],now=Date.now(),_i=0,_len=definedTasks.length;_len>_i;_i++){scheduleJob=definedTasks[_i];try{nextExecutionTime=this._getNextExecutionTime(scheduleJob),(null===nextExecutionTime||"undefined"==typeof nextExecutionTime||now>nextExecutionTime)&&this._jobCouldBeExecuted(scheduleJob)&&taskList.push(scheduleJob)}catch(_error){error=_error}}return taskList},Scheduler._isResourcesAvailable=function(scheduleJob){return null===scheduleJob.resources||"undefined"==typeof scheduleJob.resources?!0:(_.isArray(scheduleJob.resources)||(scheduleJob.resources=[scheduleJob.resources]),0===_.intersection(this._resourcesInUse,scheduleJob.resources).length)},Scheduler._processScheduleJob=function(scheduleJob){var executionFinish,scheduleJobDef,startEvent,_this=this;return startEvent=jQuery.Event(scheduleJob.startEventName),this._eventSender.trigger(startEvent),scheduleJob.isExecuting=!0,scheduleJob.resources&&_.isArray(scheduleJob.resources)&&(this._resourcesInUse=_.union(this._resourcesInUse,scheduleJob.resources)),executionFinish=function(success,callbackData){var finishEvent,finishEventName;return finishEventName=success?scheduleJob.successEventName:scheduleJob.failEventName,finishEvent=jQuery.Event(finishEventName,callbackData),_this._eventSender.trigger(finishEvent,callbackData),scheduleJob.isExecuting=!1,_this._jobDeferredMap[scheduleJob.id]=null,scheduleJob.resources&&_.isArray(scheduleJob.resources)&&(_this._resourcesInUse=_.difference(_this._resourcesInUse,scheduleJob.resources)),_this._updateNextExecutionTime(scheduleJob,!0)},this._jobDeferredMap[scheduleJob.id]=scheduleJobDef=scheduleJob.execute(),$.when(scheduleJobDef).then(function(sucessData){return executionFinish(!0,sucessData)}).fail(function(failData){return executionFinish(!1,failData)}).always(function(){return _this._processItems()}),scheduleJobDef},Scheduler._processEventHandling=function(eventName){var scheduleJob,_i,_len,_ref;if(this._eventExecuteMap[eventName]&&_.isArray(this._eventExecuteMap[eventName])){for(_ref=this._eventExecuteMap[eventName],_i=0,_len=_ref.length;_len>_i;_i++)scheduleJob=_ref[_i],scheduleJob.isExecuting||(this._nextExecutionTimeMap[scheduleJob.id]=null);return store.set(this.SCHEDULE_STORE_PREFIX+"NextExecute",this._nextExecutionTimeMap),this._processItems(this._eventExecuteMap[eventName])}},Scheduler._processItems=function(definedTasks){var error,scheduleJob,tasksToExecute,_i,_len,_results;for(null==definedTasks&&(definedTasks=this._scheduleJobs),tasksToExecute=this._getListOfJobsToExecute(definedTasks),_results=[],_i=0,_len=tasksToExecute.length;_len>_i;_i++){scheduleJob=tasksToExecute[_i];try{this._isResourcesAvailable(scheduleJob)?_results.push(this._processScheduleJob(scheduleJob)):_results.push(void 0)}catch(_error){error=_error,_results.push(void 0)}}return _results},Scheduler.executeTaskImmediately=function(jobId){var immediateRejectDef,scheduleJob;return scheduleJob=this._scheduleJobsMap[jobId],scheduleJob?scheduleJob.isExecuting?this._jobDeferredMap[scheduleJob.id]:(this._nextExecutionTimeMap[scheduleJob.id]=null,store.set(this.SCHEDULE_STORE_PREFIX+"NextExecute",this._nextExecutionTimeMap),this._isResourcesAvailable(scheduleJob)?this._processScheduleJob(scheduleJob):(immediateRejectDef=$.Deferred(),immediateRejectDef.reject(this.JOB_EXECUTION_DELAYED),immediateRejectDef)):void 0},Scheduler.getExecutingTaskDeferred=function(jobId){return this._jobDeferredMap[jobId]},Scheduler._getNextExecutionTime=function(scheduleJob){return this._nextExecutionTimeMap[scheduleJob.id]},Scheduler._updateNextExecutionTime=function(scheduleJob,finishedSuccessfully){var laterObj,nextDates,nextExecutionTime;return nextExecutionTime=null,finishedSuccessfully===!1&&scheduleJob.retryOnFailInterval?nextExecutionTime+=1e3*scheduleJob.retryOnFailInterval:scheduleJob.when?(laterObj=null,laterObj=this._isCronString(scheduleJob.when)?later.parse.cron(scheduleJob.when):later.parse.text(scheduleJob.when),nextDates=later.schedule(laterObj).next(2,new Date),nextExecutionTime=null,nextDates.length>0&&(nextDates[0].getTime()>Date.now()?nextExecutionTime=nextDates[0].getTime():nextDates.length>1&&nextDates[1].getTime()>Date.now()&&(nextExecutionTime=nextDates[1].getTime()))):scheduleJob.interval&&_.isNaN(scheduleJob.interval)&&(nextExecutionTime+=1e3*scheduleJob.interval),null===nextExecutionTime||_.isNaN(nextExecutionTime)?this.removeJob(scheduleJob):(this._nextExecutionTimeMap[scheduleJob.id]=nextExecutionTime,store.set(this.SCHEDULE_STORE_PREFIX+"NextExecute",this._nextExecutionTimeMap))},Scheduler._isCronString=function(str){var cronRegExp;return cronRegExp=new RegExp("^([*,/-0-9]+) ([*,/-0-9]+) ([*,/-0-9LW?]+) ([*,/-0-9]+|[A-Z]{3}) ([*,/-0-9]+|[A-Z]{3})$"),cronRegExp.test(str)},Scheduler.cleanSchedule=function(){return this._nextExecutionTimeMap={},store.set(this.SCHEDULE_STORE_PREFIX+"NextExecute",this._nextExecutionTimeMap)},Scheduler.onJobStart=function(jobId,handleMethod){var eventName;return eventName=this._scheduleJobsMap[jobId]?this._scheduleJobsMap[jobId].startEventName:jobId+"Start",this._eventSender.on(eventName,handleMethod)},Scheduler.onJobSuccess=function(jobId,handleMethod){var eventName;return eventName=this._scheduleJobsMap[jobId]?this._scheduleJobsMap[jobId].successEventName:jobId+"Success",this._eventSender.on(eventName,handleMethod)},Scheduler.onJobFail=function(jobId,handleMethod){var eventName;return eventName=this._scheduleJobsMap[jobId]?this._scheduleJobsMap[jobId].failEventName:jobId+"Fail",this._eventSender.on(eventName,handleMethod)},Scheduler.offJobStart=function(jobId,handleMethod){var eventName;return eventName=this._scheduleJobsMap[jobId]?this._scheduleJobsMap[jobId].startEventName:jobId+"Start",this._eventSender.off(eventName,handleMethod)},Scheduler.offJobSuccess=function(jobId,handleMethod){var eventName;return eventName=this._scheduleJobsMap[jobId]?this._scheduleJobsMap[jobId].successEventName:jobId+"Success",this._eventSender.off(eventName,handleMethod)},Scheduler.offJobFail=function(jobId,handleMethod){var eventName;return eventName=this._scheduleJobsMap[jobId]?this._scheduleJobsMap[jobId].failEventName:jobId+"Fail",this._eventSender.off(eventName,handleMethod)},Scheduler}()}})});var __hasProp={}.hasOwnProperty;define("acnCore/sync/localidmanager",["acnCore/store/storage","acnCore/sync/smartsync"],function(){var LocalIdManager;return namespace({TQ:{sync:LocalIdManager=function(){function LocalIdManager(){}return LocalIdManager._idReplacementMap={},LocalIdManager.saveIdReplacementMap=function(tqUploadResponse){var tqUploadResponseItem,_i,_len,_ref,_results;if(_.isArray(tqUploadResponse.body)){for(_ref=tqUploadResponse.body,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)tqUploadResponseItem=_ref[_i],tqUploadResponseItem.responseId&&tqUploadResponseItem.responseId!==tqUploadResponseItem.requestId?_results.push(this._idReplacementMap[tqUploadResponseItem.requestId]=tqUploadResponseItem.responseId):_results.push(void 0);return _results}},LocalIdManager._replaceLocalIdsInObject=function(object){var key,resultObject,val,value,_i,_len;if(_.isString(object))return this._idReplacementMap[object]?this._idReplacementMap[object]:object;if(_.isArray(object)){for(resultObject=[],_i=0,_len=object.length;_len>_i;_i++)val=object[_i],resultObject.push(this._replaceLocalIdsInObject(val));return resultObject}if(_.isObject(object)&&!_.isDate(object)){resultObject={};for(key in object)__hasProp.call(object,key)&&(value=object[key],resultObject[key]=this._replaceLocalIdsInObject(value));return resultObject}return object},LocalIdManager.replaceLocalIdsInQuery=function(query){return this._replaceLocalIdsInObject(query)},LocalIdManager.replaceLocalIdsInTqRecord=function(tqRecord){var fieldName,fieldValue,_ref;_ref=tqRecord.rawRecord;for(fieldName in _ref)fieldValue=_ref[fieldName],this._idReplacementMap[fieldValue]&&(tqRecord.rawRecord[fieldName]=this._idReplacementMap[fieldValue]);return tqRecord},LocalIdManager.replaceLocalIdsInTqRecordList=function(tqRecords){var resultArray,tqRecord,_i,_len;if(_.isArray(tqRecords)){for(resultArray=[],_i=0,_len=tqRecords.length;_len>_i;_i++)tqRecord=tqRecords[_i],resultArray.push(this.replaceLocalIdsInTqRecord(tqRecord));return resultArray}return this.replaceLocalIdsInTqRecord(tqRecrods)},LocalIdManager.getLocalIdsForServerIds=function(serverIds){var invertedIdsMap;return invertedIdsMap=_.invert(this._idReplacementMap),_.pick(invertedIdsMap,serverIds)},LocalIdManager}()}})});var __hasProp={}.hasOwnProperty;define("acnCore/sync/smartsync",["acnCore/store/storage","acnCore/sync/syncengine","acnCore/sync/localidmanager","acnCore/metadata/metadata","acnCore/sync/tqrecord","acnCore/config/core","acnCore/util/generic","acnCore/device/file","acnCore/device/platform","acnCore/log/logger","acnCore/schedule/scheduler","acnCore/store/querybuilder"],function(){var SmartSync;return namespace({TQ:{sync:SmartSync=function(){function SmartSync(){}return SmartSync.RECORD_CHANGED_EVENT_NAME="tqSmartSyncRecordChanged",SmartSync.RECORD_RESET_EVENT_NAME="tqSmartSyncRecordReset",SmartSync.NOT_VALID_TQ_RECORDS_FOR_UPSERT="NOT_VALID_TQ_RECORDS_FOR_UPSERT",SmartSync.ERROR_UPSERTING_RECORD_TO_QUEUE_STORAGE="ERROR_UPSERTING_RECORD_TO_QUEUE_STORAGE",SmartSync.ERROR_REMOVING_RECORD_FROM_QUEUE_STORAGE="ERROR_REMOVING_RECORD_TO_QUEUE_STORAGE",SmartSync.ERROR_UPSERTING_RECORD_TO_DATA_STORAGE="ERROR_UPSERTING_RECORD_TO_DATA_STORAGE",SmartSync.ERROR_REMOVING_RECORD_FROM_DATA_STORAGE="ERROR_REMOVING_RECORD_FROM_DATA_STORAGE",SmartSync.ERROR_UPDATING_RECORD_OLD_VALUES="ERROR_UPDATING_RECORD_OLD_VALUES",SmartSync.ERROR_FINDING_RECORDS="ERROR_FINDING_RECORDS",SmartSync.ERROR_COUNTING_RECORDS="ERROR_COUNTING_RECORDS",SmartSync.MISSING_PARAMETERS="MISSING_PARAMETERS",SmartSync.OBJECT_NOT_TRACKED="OBJECT_NOT_TRACKED",SmartSync.ERROR_GENERATING_PARENT_RECORD_MAP="ERROR_GENERATING_PARENT_RECORD_MAP",SmartSync.ERROR_RESETTING_LOCAL_CHANGES="ERROR_RESETTING_LOCAL_CHANGES",SmartSync.ERROR_GETTING_EXPANDED_QUEUE="ERROR_GETTING_EXPANDED_QUEUE",SmartSync.ERROR_GETTING_FLAT_QUEUE="ERROR_GETTING_FLAT_QUEUE",SmartSync.initStorage=function(){return TQ.config.Core.onlineOnlyEnabled?void 0:(this._dataStorage=TQ.store.Storage.getStorage(TQ.config.Core.DATA_STORAGE_NAME),this._queueStorage=TQ.store.Storage.getStorage(TQ.config.Core.QUEUE_STORAGE_NAME,[{objectApiName:TQ.config.Core.QUEUE_STORE_NAME,keyPath:"Id",objectIndexList:{objectApiName:"string"}}]))},SmartSync._dataStorage=null,SmartSync._queueStorage=null,SmartSync.isOnlineOnlyMode=function(){return TQ.config.Core.onlineOnlyEnabled},SmartSync.insert=function(expandedWrappedRecordList){return SmartSync.upsert(expandedWrappedRecordList)},SmartSync.update=function(expandedWrappedRecordList){return SmartSync.upsert(expandedWrappedRecordList)},SmartSync.upsert=function(expandedWrappedRecordList){var dataHasBeenChanged,expandedWrappedRecord,prepareUpsertRecordDeferred,recordUpsertDeferredList,smartSyncUpsertDeferred,_i,_len,_this=this;if(smartSyncUpsertDeferred=$.Deferred(),dataHasBeenChanged=!1,null!=expandedWrappedRecordList){if(_.isArray(expandedWrappedRecordList)||(expandedWrappedRecordList=[expandedWrappedRecordList]),expandedWrappedRecordList=TQ.sync.LocalIdManager.replaceLocalIdsInTqRecordList(expandedWrappedRecordList),TQ.config.Core.onlineOnlyEnabled)return this.directUpsert(expandedWrappedRecordList);for(SmartSync._isFullyExpandedWrappedList(expandedWrappedRecordList)||(TQ.log.Logger.warn({errorCode:this.NOT_VALID_TQ_RECORD,namespace:TQ.log.Logger.tags.STORAGE}),smartSyncUpsertDeferred.reject(this.NOT_VALID_TQ_RECORD)),prepareUpsertRecordDeferred=function(expandedWrappedRecord,recordUpsertDeferred){return recordUpsertDeferredList.push(recordUpsertDeferred),_this._customRawDataManipulation(expandedWrappedRecord),expandedWrappedRecord.createdDateTime||(expandedWrappedRecord.createdDateTime=new Date),expandedWrappedRecord.lastModifiedDateTime=new Date,_this._updateOldValues(expandedWrappedRecord).done(function(expandedWrappedRecord){var flattenedRecord;return!_this._isLocalRecord(expandedWrappedRecord)&&_.isEmpty(expandedWrappedRecord.changes)?recordUpsertDeferred.resolve():(dataHasBeenChanged=!0,flattenedRecord=TQ.sync.TQRecord.expandedWrapToFlatWrap(expandedWrappedRecord),_this._dataStorage.upsert(expandedWrappedRecord.objectApiName,flattenedRecord).done(function(recordId){var qItem;return qItem={Id:flattenedRecord.Id,objectApiName:expandedWrappedRecord.objectApiName},_this._queueStorage.upsert(TQ.config.Core.QUEUE_STORE_NAME,qItem).done(function(){return recordUpsertDeferred.resolve()}).fail(function(err){return recordUpsertDeferred.reject({errorCode:_this.ERROR_UPSERTING_RECORD_TO_QUEUE_STORAGE,error:err})})}).fail(function(err){return recordUpsertDeferred.reject({errorCode:_this.ERROR_UPSERTING_RECORD_TO_DATA_STORAGE,error:err})}))}).fail(function(err){return recordUpsertDeferred.reject({errorCode:_this.ERROR_UPDATING_RECORD_OLD_VALUES,error:err})})},TQ.sync.TempSync.saveDataChangesToTempStore(expandedWrappedRecordList),recordUpsertDeferredList=[],_i=0,_len=expandedWrappedRecordList.length;_len>_i;_i++)expandedWrappedRecord=expandedWrappedRecordList[_i],expandedWrappedRecord.syncStatus=TQ.sync.TQRecord.AWAITING_SYNCHRONISATION,prepareUpsertRecordDeferred(expandedWrappedRecord,$.Deferred());return $.when.apply($,recordUpsertDeferredList).done(function(){return smartSyncUpsertDeferred.resolve()}).fail(function(err){return smartSyncUpsertDeferred.reject(err)}),$.when(smartSyncUpsertDeferred).done(function(){var event,record,_j,_len1;if(_.isArray(expandedWrappedRecordList))for(_j=0,_len1=expandedWrappedRecordList.length;_len1>_j;_j++)record=expandedWrappedRecordList[_j],record.dbOrigins=_.clone(record.rawRecord);return dataHasBeenChanged?(event=jQuery.Event(_this.RECORD_CHANGED_EVENT_NAME,{method:"upsert",records:expandedWrappedRecordList}),$(window).trigger(event)):void 0}),smartSyncUpsertDeferred}return TQ.log.Logger.warn({errorCode:this.MISSING_PARAMETERS,namespace:TQ.log.Logger.tags.STORAGE}),smartSyncUpsertDeferred.reject(this.MISSING_PARAMETERS)},SmartSync.directUpsert=function(expandedWrappedRecordList){return TQ.sync.SyncEngine.immediateUpload(expandedWrappedRecordList)},SmartSync._customRawDataManipulation=function(expandedWrappedRecord){var lastName,name,objectApiName;return objectApiName=expandedWrappedRecord.objectApiName,"Contact"===objectApiName||"Lead"===objectApiName?(name=expandedWrappedRecord.rawRecord.FirstName||"",lastName=expandedWrappedRecord.rawRecord.LastName||"",expandedWrappedRecord.rawRecord.Name=name+" "+lastName):void 0},SmartSync._prepareFindResponseValues=function(objectApiName,flatList){var fieldDescription,fieldDescriptionMap,fieldName,fieldValue,flatObject,_i,_len;for(fieldDescriptionMap=TQ.metadata.Metadata.getFieldMetadataMap(objectApiName),_i=0,_len=flatList.length;_len>_i;_i++){flatObject=flatList[_i];for(fieldName in flatObject)fieldValue=flatObject[fieldName],fieldDescription=fieldDescriptionMap[fieldName],fieldDescription&&fieldValue&&("date"!==fieldDescription.type&&"datetime"!==fieldDescription.type||!_.isString(fieldValue)||(flatObject[fieldName]=TQ.store.Storage.convertToDate(fieldValue)))}return flatList},SmartSync._localDatabaseQuery=function(query,includeDeleted){var smartSyncFindDeferred,_this=this;return smartSyncFindDeferred=$.Deferred(),this._dataStorage.storeExist(query.objectApiName)?this._dataStorage.find(query).done(function(flatStorageResultList){return flatStorageResultList=_this._prepareFindResponseValues(query.objectApiName,flatStorageResultList),smartSyncFindDeferred.resolve(_this._expandStorageFlatResultList(flatStorageResultList))}).fail(function(err){return smartSyncFindDeferred.reject({error:err,errorCode:_this.ERROR_FINDING_RECORDS})}):(TQ.log.Logger.warn({errorCode:this.OBJECT_NOT_TRACKED,namespace:TQ.log.Logger.tags.STORAGE}),smartSyncFindDeferred.reject(this.OBJECT_NOT_TRACKED)),smartSyncFindDeferred},SmartSync.find=function(query,includeDeleted){var whereStatement;return query=TQ.sync.LocalIdManager.replaceLocalIdsInQuery(query),whereStatement=query.where,TQ.metadata.Metadata.getFieldMetadata(query.objectApiName,"IsDeleted")&&(includeDeleted||(whereStatement?_.isArray(whereStatement)?whereStatement.push({IsDeleted:{$eq:!1}}):whereStatement={$and:[whereStatement,{IsDeleted:{$eq:!1}}]}:whereStatement={IsDeleted:{$eq:!1}})),_.isEmpty(whereStatement)?delete query.where:query.where=whereStatement,TQ.config.Core.onlineOnlyEnabled===!0?TQ.sync.SyncEngine.directServerQuery(query,includeDeleted):this._localDatabaseQuery(query,includeDeleted)},SmartSync.findOne=function(query){var findDeferred;return findDeferred=$.Deferred(),query.limit=1,this.find(query).done(function(result){return _.isArray(result)&&result.length>0?findDeferred.resolve(result[0]):findDeferred.resolve(null)}).fail(function(error){return findDeferred.reject(error)}),findDeferred},SmartSync._localDatabaseCount=function(countQuery){var countDeferred,_this=this;return countDeferred=$.Deferred(),this._dataStorage.countQuery(countQuery).done(function(count){return countDeferred.resolve(count)}).fail(function(err){return countDeferred.reject({error:err,errorCode:_this.ERROR_COUNTING_ERRORS})}),countDeferred},SmartSync.count=function(objectApiName,includeDeleted){var query;return null==includeDeleted&&(includeDeleted=!1),query={objectApiName:objectApiName},TQ.metadata.Metadata.getFieldMetadata(query.objectApiName,"IsDeleted")&&(includeDeleted||(query.where={IsDeleted:{$eq:!1}})),TQ.config.Core.onlineOnlyEnabled?TQ.sync.SyncEngine.directServerCountQuery(query):this._localDatabaseCount(query)},SmartSync.remove=function(expandedWrappedRecordList){var expandedWrappedRecord,recordDeleteDeferred,recordDeleteDeferredList,smartSyncDeleteDeferred,_i,_len,_this=this;if(smartSyncDeleteDeferred=$.Deferred(),null!=expandedWrappedRecordList){if(_.isArray(expandedWrappedRecordList)||(expandedWrappedRecordList=[expandedWrappedRecordList]),expandedWrappedRecordList=TQ.sync.LocalIdManager.replaceLocalIdsInTqRecordList(expandedWrappedRecordList),TQ.config.Core.onlineOnlyEnabled)return this.directRemove(expandedWrappedRecordList);for(SmartSync._isFullyExpandedWrappedList(expandedWrappedRecordList)||(TQ.log.Logger.warn({errorCode:this.NOT_VALID_TQ_RECORD,namespace:TQ.log.Logger.tags.STORAGE}),smartSyncDeleteDeferred.reject(this.NOT_VALID_TQ_RECORD)),recordDeleteDeferredList=[],_i=0,_len=expandedWrappedRecordList.length;_len>_i;_i++)expandedWrappedRecord=expandedWrappedRecordList[_i],recordDeleteDeferred=$.Deferred(),recordDeleteDeferredList.push(recordDeleteDeferred),this._isLocalRecord(expandedWrappedRecord)?this._dataStorage.remove(expandedWrappedRecord.objectApiName,expandedWrappedRecord.rawRecord.Id).done(function(recordId){return _this._queueStorage.remove(TQ.config.Core.QUEUE_STORE_NAME,expandedWrappedRecord.rawRecord.Id).done(function(){return TQ.util.Generic.usesFileSystem(expandedWrappedRecord)&&TQ.device.Platform.isDevice()?TQ.device.File.remove(expandedWrappedRecord.rawRecord.Name,expandedWrappedRecord.rawRecord.Id).always(function(){return recordDeleteDeferred.resolve()}):recordDeleteDeferred.resolve()}).fail(function(err){return recordDeleteDeferred.reject({errorCode:_this.ERROR_REMOVING_RECORD_FROM_QUEUE_STORAGE,error:err})})}).fail(function(err){return recordDeleteDeferred.reject({errorCode:_this.ERROR_REMOVING_RECORD_FROM_DATA_STORAGE,error:err})}):(expandedWrappedRecord.syncStatus=TQ.sync.TQRecord.AWAITING_SYNCHRONISATION,expandedWrappedRecord.rawRecord.IsDeleted=!0,expandedWrappedRecord.lastModifiedDateTime=new Date,this._updateOldValues(expandedWrappedRecord).done(function(expandedWrappedRecord){var flattenedRecord;return flattenedRecord=TQ.sync.TQRecord.expandedWrapToFlatWrap(expandedWrappedRecord),_this._dataStorage.upsert(expandedWrappedRecord.objectApiName,flattenedRecord).done(function(){var qItem;return qItem={Id:flattenedRecord.Id,objectApiName:expandedWrappedRecord.objectApiName},_this._queueStorage.upsert(TQ.config.Core.QUEUE_STORE_NAME,qItem).done(function(qItemId){return recordDeleteDeferred.resolve()}).fail(function(err){return recordDeleteDeferred.reject({errorCode:_this.ERROR_UPSERTING_RECORD_TO_QUEUE_STORAGE,error:err})})}).fail(function(err){return recordDeleteDeferred.reject({errorCode:_this.ERROR_UPSERTING_RECORD_TO_DATA_STORAGE,error:err})})}).fail(function(err){return recordDeleteDeferred.reject({errorCode:_this.ERROR_UPDATING_RECORD_OLD_VALUES,error:err})}));return $.when.apply($,recordDeleteDeferredList).done(function(){return smartSyncDeleteDeferred.resolve()}).fail(function(err){return smartSyncDeleteDeferred.reject(err)}),$.when(smartSyncDeleteDeferred).done(function(){var event;return event=jQuery.Event(_this.RECORD_CHANGED_EVENT_NAME,{method:"delete",records:expandedWrappedRecordList}),$(window).trigger(event)}),smartSyncDeleteDeferred}return TQ.log.Logger.warn({errorCode:this.MISSING_PARAMETERS,namespace:TQ.log.Logger.tags.STORAGE}),smartSyncDeleteDeferred.reject(this.MISSING_PARAMETERS)},SmartSync.directRemove=function(expandedWrappedRecordList){var expandedWrappedRecord,index;for(_.isArray(expandedWrappedRecordList)||(expandedWrappedRecordList=[expandedWrappedRecordList]),index=0;index<expandedWrappedRecordList.length;)expandedWrappedRecord=expandedWrappedRecordList[index],this._isLocalRecord(expandedWrappedRecord)?expandedWrappedRecordList.splice(index,1):(expandedWrappedRecord.rawRecord.IsDeleted=!0,index++);return TQ.sync.SyncEngine.immediateUpload(expandedWrappedRecordList)},SmartSync.getTrackedObjectRecordInstance=function(objectApiName){var fieldApiName,nameField,objectMetadata,recordInstance,_i,_len,_ref;if(objectMetadata=TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName)){for(recordInstance={},_ref=objectMetadata.rawRecordFieldSet,_i=0,_len=_ref.length;_len>_i;_i++)fieldApiName=_ref[_i],null!=objectMetadata.defaultValuesMap[fieldApiName]?recordInstance[fieldApiName]=objectMetadata.defaultValuesMap[fieldApiName]:recordInstance[fieldApiName]=null;return recordInstance.Id=TQ.store.Storage.generateLocalId(),recordInstance.CreatedById=TQ.rest.Provider.getUserId(),nameField=TQ.metadata.Metadata.getNameField(objectApiName),nameField&&(recordInstance[nameField]=SmartSync.generateLocalTempNameFieldValue(recordInstance.Id,objectApiName,nameField)),TQ.sync.TQRecord.rawRecordToExpandedWrap(recordInstance,objectApiName)}return recordInstance={Id:TQ.store.Storage.generateLocalId()},TQ.sync.TQRecord.rawRecordToExpandedWrap(recordInstance,objectApiName)},SmartSync.commitChangesForRecord=function(tqRecord){var tqCommitedRecord;return tqCommitedRecord=TQ.sync.TQRecord.commitChanges(tqRecord),this.upsert(tqCommitedRecord)},SmartSync.createIndex=function(indexName,objectApiName,fieldsArray,isUnique){return this._dataStorage.createIndex(indexName,objectApiName,fieldsArray,isUnique)},SmartSync.generateLocalTempNameFieldValue=function(localId,objectApiName,nameField){var isNameFieldAutoNumber;return isNameFieldAutoNumber=TQ.metadata.Metadata.getFieldMetadata(objectApiName,nameField).autoNumber,isNameFieldAutoNumber?SmartSync.generateLocalTempNameValue(localId,objectApiName):null},SmartSync.generateLocalTempNameValue=function(localId,objectApiName){var increment,objectLabel;return objectLabel=TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName).modelDescribe.label,increment=localId.split("_")[1].substring(0,4),"New "+objectLabel+" {"+increment+"}"},SmartSync.generateParentRecordMap=function(expandedWrap){var fieldMetadata,key,mapDeferred,parentRecordListDeferredList,parentRecordMap,parentStoreName,val,_ref,_this=this;mapDeferred=$.Deferred(),parentRecordListDeferredList=[],parentRecordMap={},_ref=expandedWrap.rawRecord;for(key in _ref)__hasProp.call(_ref,key)&&(val=_ref[key],fieldMetadata=TQ.metadata.Metadata.getFieldMetadata(expandedWrap.objectApiName,key),parentStoreName=fieldMetadata.referenceTo[0],"reference"===fieldMetadata.type&&val&&(parentRecordMap[key]={parentRecordObjectApiName:parentStoreName,parentRecordName:"Information not available",parentRecordId:val}),"reference"===fieldMetadata.type&&val&&SmartSync.storeExist(parentStoreName)&&parentRecordListDeferredList.push(this.find({objectApiName:parentStoreName,where:[{Id:{$eq:val}}]})));return $.when.apply($,parentRecordListDeferredList).done(function(){var nameField,parentRecord,_i,_len,_ref1;for(_ref1=_.flatten(arguments),_i=0,_len=_ref1.length;_len>_i;_i++){parentRecord=_ref1[_i];for(key in parentRecordMap)__hasProp.call(parentRecordMap,key)&&(val=parentRecordMap[key],val.parentRecordId===parentRecord.rawRecord.Id&&(nameField=TQ.metadata.Metadata.getNameField(val.parentRecordObjectApiName),val.parentRecordName=parentRecord.rawRecord[nameField]))}return mapDeferred.resolve(parentRecordMap)}).fail(function(err){return TQ.log.Logger.error({errorCode:_this.ERROR_GENERATING_PARENT_RECORD_MAP,error:err,namespace:TQ.log.Logger.tags.STORAGE}),mapDeferred.reject({errorCode:_this.ERROR_GENERATING_PARENT_RECORD_MAP,error:err})}),mapDeferred},SmartSync._valuesAreEqualDates=function(value1,value2){var date1,date2;return date1=new Date(value1),date2=new Date(value2),!_.isNaN(date1.getTime())&&!_.isNaN(date2.getTime())&&date1.getTime()===date2.getTime()},SmartSync._updateOldValues=function(tqRecord){var query,updateValuesPromise,_this=this;return updateValuesPromise=$.Deferred(),TQ.config.Core.onlineOnlyEnabled?updateValuesPromise.resolve(tqRecord):!this._isLocalRecord(tqRecord)||_.isArray(tqRecord.changes)&&0!==tqRecord.changes.length?(query={objectApiName:tqRecord.objectApiName,where:{Id:{$eq:tqRecord.rawRecord.Id}}},this._dataStorage.find(query).done(function(oldValuesItems){var fieldName,newValue,newWorkingCopy,oldValue,oldValueItem,originValue,originsPresent,tqRecordOldValuesMap;if(0===oldValuesItems.length)return updateValuesPromise.resolve(tqRecord);oldValueItem=oldValuesItems[0],tqRecordOldValuesMap={},_.isArray(tqRecord.changes)||(tqRecord.changes=[]),newWorkingCopy=null,0===tqRecord.changes.length||tqRecord.changes[tqRecord.changes.length-1].finished||tqRecord.syncStatus===TQ.sync.TQRecord.SYNCING?(tqRecord.syncStatus===TQ.sync.TQRecord.SYNCING&&tqRecord.changes.length>0&&(tqRecord.changes[tqRecord.changes.length-1].finished=!0),newWorkingCopy={changeDate:new Date,oldValues:{},finished:!1},tqRecordOldValuesMap=newWorkingCopy.oldValues):tqRecordOldValuesMap=tqRecord.changes[tqRecord.changes.length-1].oldValues,originsPresent=!_.isEmpty(tqRecord.dbOrigins);for(fieldName in oldValueItem)"_wrap"!==fieldName&&(newValue=tqRecord.rawRecord[fieldName],oldValue=oldValueItem[fieldName],originValue=originsPresent?tqRecord.dbOrigins[fieldName]:null,_.isDate(newValue)&&0===newValue.getTime()&&(newValue=null),_.isDate(oldValue)&&0===oldValue.getTime()&&(oldValue=null),_.isDate(originValue)&&0===originValue.getTime()&&(originValue=null),tqRecordOldValuesMap[fieldName]||newValue===oldValue||_this._valuesAreEqualDates(oldValue,newValue)||originsPresent&&(newValue===originValue||_this._valuesAreEqualDates(originValue,newValue))?!originsPresent||oldValue===originValue||_this._valuesAreEqualDates(originValue,oldValue)||newValue!==originValue&&!_this._valuesAreEqualDates(originValue,newValue)||(tqRecord.rawRecord[fieldName]=oldValue):tqRecordOldValuesMap[fieldName]=oldValue);return newWorkingCopy&&!_.isEmpty(tqRecordOldValuesMap)&&tqRecord.changes.push(newWorkingCopy),updateValuesPromise.resolve(tqRecord)}).fail(function(err){return updateValuesPromise.reject(err)})):updateValuesPromise.resolve(tqRecord),updateValuesPromise},SmartSync.resetLocalChanges=function(tqRecord){var fieldName,flattenedRecord,index,resetDeferred,revertChangesPromise,value,_ref,_this=this;if(revertChangesPromise=$.Deferred(),_.isArray(tqRecord.changes))for(index=tqRecord.changes.length-1;index>=0;){_ref=tqRecord.changes[index].oldValues;for(fieldName in _ref)value=_ref[fieldName],tqRecord.rawRecord[fieldName]=value,tqRecord.dbOrigins[fieldName]=value;index--}return tqRecord.changes=[],tqRecord.lastModifiedDateTime=new Date,tqRecord.errorList=[],tqRecord.syncStatus=TQ.sync.TQRecord.SYNCHRONISED,flattenedRecord=TQ.sync.TQRecord.expandedWrapToFlatWrap(tqRecord),resetDeferred=null,TQ.config.Core.onlineOnlyEnabled?revertChangesPromise.resolve():(resetDeferred=this._isLocalRecord(tqRecord)?this._dataStorage.remove(tqRecord.objectApiName,flattenedRecord.Id):this._dataStorage.upsert(tqRecord.objectApiName,flattenedRecord),resetDeferred.done(function(){return _this._queueStorage.remove(TQ.config.Core.QUEUE_STORE_NAME,flattenedRecord.Id).done(function(){return revertChangesPromise.resolve(tqRecord)}).fail(function(err){return TQ.log.Logger.error({errorCode:_this.ERROR_RESETTING_LOCAL_CHANGES,error:err,namespace:TQ.log.Logger.tags.STORAGE}),revertChangesPromise.reject({errorCode:_this.ERROR_RESETTING_LOCAL_CHANGES,error:err})})}).fail(function(err){return TQ.log.Logger.error({errorCode:_this.ERROR_RESETTING_LOCAL_CHANGES,error:err,namespace:TQ.log.Logger.tags.STORAGE}),revertChangesPromise.reject({errorCode:_this.ERROR_RESETTING_LOCAL_CHANGES,error:err})}),$.when(revertChangesPromise).done(function(){var event;return event=jQuery.Event(_this.RECORD_RESET_EVENT_NAME,{record:tqRecord}),$(window).trigger(event)}),revertChangesPromise)},SmartSync.startSync=function(){return TQ.schedule.Scheduler.executeTaskImmediately("Sync")},SmartSync.pauseSync=function(){},SmartSync.resumeSync=function(){},SmartSync.abortSync=function(){},SmartSync.getExpandedQueue=function(){var expandedQueueDeferred,_this=this;return expandedQueueDeferred=$.Deferred(),TQ.config.Core.onlineOnlyEnabled?expandedQueueDeferred.resolve([]):(this._queueStorage.find({objectApiName:TQ.config.Core.QUEUE_STORE_NAME}).done(function(indexList){var index,key,query,recordListDeferred,recordQueryList,_i,_len;if(indexList.length>0){for(recordQueryList={},recordListDeferred=[],_i=0,_len=indexList.length;_len>_i;_i++)index=indexList[_i],recordQueryList[index.objectApiName]||(recordQueryList[index.objectApiName]={objectApiName:index.objectApiName,where:{Id:{$in:[]}}}),recordQueryList[index.objectApiName].where.Id.$in.push(index.Id);for(key in recordQueryList)query=recordQueryList[key],recordListDeferred.push(_this._dataStorage.find(query));return $.when.apply($,recordListDeferred).done(function(){var flatFilteredResultList,flatResultList,item,_j,_len1;if(flatResultList=_.flatten(arguments),TQ.config.Core.developmentMode)return expandedQueueDeferred.resolve(_this._expandStorageFlatResultList(flatResultList));for(flatFilteredResultList=[],_j=0,_len1=flatResultList.length;_len1>_j;_j++)item=flatResultList[_j],TQ.metadata.Metadata.getTrackedObjectMetadata(index.objectApiName).displayable&&flatFilteredResultList.push(item);return expandedQueueDeferred.resolve(_this._expandStorageFlatResultList(flatFilteredResultList))}).fail(function(err){return TQ.log.Logger.error({errorCode:_this.ERROR_GETTING_EXPANDED_QUEUE,error:err,namespace:TQ.log.Logger.tags.STORAGE}),expandedQueueDeferred.reject({errorCode:_this.ERROR_GETTING_EXPANDED_QUEUE,error:err})})}return expandedQueueDeferred.resolve(indexList)}).fail(function(err){return TQ.log.Logger.error({
errorCode:_this.ERROR_GETTING_EXPANDED_QUEUE,error:err,namespace:TQ.log.Logger.tags.STORAGE}),expandedQueueDeferred.reject({errorCode:_this.ERROR_GETTING_EXPANDED_QUEUE,error:err})}),expandedQueueDeferred)},SmartSync.getFlatQueue=function(objectApiNameList){var flatQueueDeferred,queueQuery,_this=this;return flatQueueDeferred=$.Deferred(),TQ.config.Core.onlineOnlyEnabled?flatQueueDeferred.resolve([]):(queueQuery={objectApiName:TQ.config.Core.QUEUE_STORE_NAME},_.isEmpty(objectApiNameList)||(queueQuery.where={objectApiName:{$in:objectApiNameList}}),this._queueStorage.find(queueQuery).done(function(indexList){var doCall,index,queries,queryDef,recordQueryList,records,_i,_len;if(indexList.length>0){for(recordQueryList={},_i=0,_len=indexList.length;_len>_i;_i++)index=indexList[_i],recordQueryList[index.objectApiName]||(recordQueryList[index.objectApiName]={objectApiName:index.objectApiName,where:{Id:{$in:[]}}}),recordQueryList[index.objectApiName].where.Id.$in.push(index.Id);return queryDef=$.Deferred(),queries=_.values(recordQueryList),records=[],doCall=function(index){var query;return index>=queries.length?queryDef.resolve(records):(query=queries[index],_this._dataStorage.find(query).done(function(queryResult){return _.isEmpty(queryResult)||(records=_.union(records,queryResult)),doCall(index+1)}).fail(function(error){return queryDef.reject(error)}))},doCall(0),queryDef.done(function(result){return flatQueueDeferred.resolve(result)}).fail(function(err){return TQ.log.Logger.error({errorCode:_this.ERROR_GETTING_FLAT_QUEUE,error:err,namespace:TQ.log.Logger.tags.STORAGE}),flatQueueDeferred.reject({errorCode:_this.ERROR_GETTING_FLAT_QUEUE,error:err})})}return flatQueueDeferred.resolve([])}).fail(function(err){return TQ.log.Logger.error({errorCode:_this.ERROR_GETTING_FLAT_QUEUE,error:err,namespace:TQ.log.Logger.tags.STORAGE}),flatQueueDeferred.reject({errorCode:_this.ERROR_GETTING_FLAT_QUEUE,error:err})}),flatQueueDeferred)},SmartSync._isFullyExpandedWrappedList=function(expandedWrappedRecordList){var expandedWrappedRecord,_i,_len;for(_i=0,_len=expandedWrappedRecordList.length;_len>_i;_i++)if(expandedWrappedRecord=expandedWrappedRecordList[_i],!TQ.sync.TQRecord.isWrapped(expandedWrappedRecord)||TQ.sync.TQRecord.isFlat(expandedWrappedRecord))return!1;return!0},SmartSync._expandStorageFlatResultList=function(flatStorageResultList){var expandedResultList,flatRecord,_i,_len;for(expandedResultList=[],_i=0,_len=flatStorageResultList.length;_len>_i;_i++)flatRecord=flatStorageResultList[_i],expandedResultList.push(TQ.sync.TQRecord.flatWrapToExpandedWrap(flatRecord));return expandedResultList},SmartSync._isLocalRecord=function(expandedWrappedRecord){return expandedWrappedRecord.rawRecord.Id.indexOf("Local_")>-1?!0:!1},SmartSync.validateRecord=function(record){var dateValue,emailRegExp,errorList,fieldDescribeMap,fieldDescription,fieldName,isNumberRecord,objectApiName,value;if(objectApiName=record.objectApiName,TQ.config.Core.developmentMode&&!TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName).displayable&&TQ.sync.TQRecord.hasError(record))return[];if(fieldDescribeMap=TQ.metadata.Metadata.getFieldMetadataMap(objectApiName),errorList=[],!fieldDescribeMap)return[];for(fieldName in record.rawRecord)fieldDescription=fieldDescribeMap[fieldName],value=record.rawRecord[fieldName],!fieldDescription.updateable&&!this._isLocalRecord(record)||!fieldDescription.createable&&this._isLocalRecord(record)||(null!==value&&""!==value||fieldDescription.nillable!==!1?null!==value&&"undefined"!=typeof value&&("xsd:string"===fieldDescription.soapType&&value.length&&value.length>fieldDescription.length?errorList.push('Field value of "'+fieldDescription.label+'" is too long. (Maximum length is '+fieldDescription.length+")"):"email"===fieldDescription.type&&(emailRegExp=new RegExp('^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$'),emailRegExp.test(value)||errorList.push('Invalid email address for field "'+fieldDescription.label+'"')),("datetime"===fieldDescription.type||"date"===fieldDescription.type)&&(dateValue=new Date(value),_.isNaN(dateValue.getTime())&&errorList.push('Wrong date format of field "'+fieldDescription.label+'"')),isNumberRecord="int"===fieldDescription.type||"double"===fieldDescription.type||"percent"===fieldDescription.type||"currency"===fieldDescription.type,isNumberRecord&&(_.isNaN(Number(value))?errorList.push('Value of "'+fieldDescription.label+'" should be numeric'):fieldDescription.precision&&String(value).length>fieldDescription.precision+1&&errorList.push('Value of "'+fieldDescription.label+'" is too long. (Maximum length is '+fieldDescription.precision+")"))):errorList.push('Field "'+fieldDescription.label+'" is required'));return errorList},SmartSync.storeExist=function(storeName){return TQ.config.Core.onlineOnlyEnabled?!_.isEmpty(TQ.metadata.Metadata.getTrackedObjectMetadata(storeName)):this._dataStorage.storeExist(storeName)},SmartSync}()}})}),define("acnCore/status/syncstatus",["acnCore/device/connection","acnCore/util/generic","acnCore/schedule/scheduler","acnCore/sync/smartsync","acnCore/sync/syncengine"],function(){var SyncStatus;return namespace({TQ:{status:SyncStatus=function(){function SyncStatus(){}return SyncStatus.SYNC_STATUS_STORE_PREFIX="Sync_Status_",SyncStatus.SYNC_ERROR="SyncError",SyncStatus.SYNCHRONIZED="Synchronized",SyncStatus.SYNCHRONIZING="Synchronizing",SyncStatus.AWAITING_SYNCHRONIZATION="AwaitingSynchronization",SyncStatus.SYNC_STATUS_CHANGE_EVENT_NAME="tqSyncStatusChange",SyncStatus.initializeSyncErrorMessage=function(){var syncErrorMessage;return syncErrorMessage=store.get(this.SYNC_STATUS_STORE_PREFIX+"ErrorMessage")},SyncStatus.initializeRecordErrorCount=function(){var recordErrorCount;return recordErrorCount=store.get(this.SYNC_STATUS_STORE_PREFIX+"RecordErrorCount"),recordErrorCount?recordErrorCount:0},SyncStatus.initializePendingRecordCount=function(){var pendingRecordCount;return pendingRecordCount=store.get(this.SYNC_STATUS_STORE_PREFIX+"PendingRecordCount"),pendingRecordCount?pendingRecordCount:0},SyncStatus.initializeSyncStatus=function(){var pendingRecordCount,recordErrorCount,syncErrorMessage,syncStatus;return syncStatus=store.get(this.SYNC_STATUS_STORE_PREFIX+"Status"),syncStatus&&syncStatus!==this.SYNCHRONIZING||(syncStatus===this.SYNCHRONIZING?(pendingRecordCount=this.initializePendingRecordCount(),recordErrorCount=this.initializeRecordErrorCount(),syncErrorMessage=this.initializeSyncErrorMessage(),syncStatus=syncErrorMessage||recordErrorCount&&recordErrorCount>0?this.SYNC_ERROR:pendingRecordCount&&pendingRecordCount>0?this.AWAITING_SYNCHRONIZATION:this.SYNCHRONIZED):syncStatus=this.SYNCHRONIZED,store.set(this.SYNC_STATUS_STORE_PREFIX+"Status",syncStatus)),syncStatus},SyncStatus.initializeEventHandlers=function(){var _this=this;return TQ.schedule.Scheduler.onJobStart("Sync",function(){return _this.syncErrorMessage=null,_this._setStatus(_this.SYNCHRONIZING)}),TQ.schedule.Scheduler.onJobSuccess("Sync",function(event,deferredParam){return _this._cleanLastSyncData(),event.errorCount&&0!==event.errorCount?(_this.recordErrorCount=event.errorCount,_this._setStatus(_this.SYNC_ERROR)):(_this.recordErrorCount=0,_this._setStatus(_this.SYNCHRONIZED,deferredParam),_this._recalculatePendingRecordsCount())}),TQ.schedule.Scheduler.onJobFail("Sync",function(error){return TQ.status.AppStatus.isOnline()?(_this.syncErrorMessage=_this._getErrorMessage(error),_this._setStatus(_this.SYNC_ERROR)):(_this.syncErrorMessage="Synchronization will restart automatically when connection become online",_this._recalculateSyncStatus(!0))}),jQuery(window).on(TQ.sync.SmartSync.RECORD_CHANGED_EVENT_NAME,function(){return _this._recalculatePendingRecordsCount()}),jQuery(window).on(TQ.sync.SmartSync.RECORD_RESET_EVENT_NAME,function(){return _this._recalculatePendingRecordsCount()}),!0},SyncStatus.syncErrorMessage=SyncStatus.initializeSyncErrorMessage(),SyncStatus.syncStatus=SyncStatus.initializeSyncStatus(),SyncStatus.recordErrorCount=SyncStatus.initializeRecordErrorCount(),SyncStatus.pendingRecordCount=SyncStatus.initializePendingRecordCount(),SyncStatus._eventsHandlersInitialized=SyncStatus.initializeEventHandlers(),SyncStatus.isSyncing=function(){return this.syncStatus===this.SYNCHRONIZING},SyncStatus._cleanLastSyncData=function(){return this.recordErrorCount=0,this.pendingRecordCount=0,this.syncErrorMessage=null},SyncStatus._setStatus=function(newStatus,syncUploadResult){var event,eventData;return this.syncStatus=newStatus,this._saveSyncStatusDataToLocalStore(),eventData={successType:syncUploadResult,syncStatus:newStatus,syncErrorMessage:this.syncErrorMessage,recordErrorCount:this.recordErrorCount,pendingRecordCount:this.pendingRecordCount},event=jQuery.Event(this.SYNC_STATUS_CHANGE_EVENT_NAME,eventData),jQuery(window).trigger(event)},SyncStatus._recalculateSyncStatus=function(ignoreSyncError){return!ignoreSyncError&&this.syncErrorMessage||null!==this.recordErrorCount&&this.recordErrorCount>0?this._setStatus(this.SYNC_ERROR):null!==this.pendingRecordCount&&this.pendingRecordCount>0?this._setStatus(this.AWAITING_SYNCHRONIZATION):this._setStatus(this.SYNCHRONIZED)},SyncStatus._saveSyncStatusDataToLocalStore=function(){return store.set(this.SYNC_STATUS_STORE_PREFIX+"Status",this.syncStatus),store.set(this.SYNC_STATUS_STORE_PREFIX+"ErrorMessage",this.syncErrorMessage),store.set(this.SYNC_STATUS_STORE_PREFIX+"RecordErrorCount",this.recordErrorCount),store.set(this.SYNC_STATUS_STORE_PREFIX+"PendingRecordCount",this.pendingRecordCount)},SyncStatus._getErrorMessage=function(errorObject){var errorMessage;return errorMessage="Sync process has been failed, please try again later",errorObject&&(errorObject.errorCode>=TQ.sync.SyncEngine.DOWNLOAD_CACHER_ERROR&&errorObject.errorCode<=TQ.sync.SyncEngine.DOWNLOAD_REQUEST_ERROR?errorMessage="Sync hasn'nt been able to download latest updates from server. Please try again later":errorObject.errorCode===TQ.sync.SyncEngine.STORAGE_ERROR?errorMessage="Sync process hasn't been able to save latest changes localy. Please check your device free space and contact the adiministrator":errorObject.errorCode<=TQ.sync.SyncEngine.UPLOAD_RESPONSE_STATUS_ERROR&&(errorMessage="Sync hasn'nt been able to save your local changes to server. Please try again later")),errorMessage},SyncStatus._recalculatePendingRecordsCount=function(ignoreIfNoPendings){var _this=this;return null==ignoreIfNoPendings&&(ignoreIfNoPendings=!1),TQ.sync.SmartSync.getExpandedQueue().done(function(pendingQueueList){var queueItem,_i,_len;if(_this.syncStatus!==_this.SYNCHRONIZING){if(pendingQueueList&&0!==pendingQueueList.length){for(_this.pendingRecordCount=pendingQueueList.length,_this.recordErrorCount=0,_i=0,_len=pendingQueueList.length;_len>_i;_i++)queueItem=pendingQueueList[_i],queueItem.syncStatus===TQ.sync.TQRecord.SYNC_ERROR&&_this.recordErrorCount++;return _this.recordErrorCount>0||_this.syncErrorMessage?_this._setStatus(_this.SYNC_ERROR):_this._setStatus(_this.AWAITING_SYNCHRONIZATION)}return _this._cleanLastSyncData(),_this._setStatus(_this.SYNCHRONIZED)}})},SyncStatus.updateWithValuesFromQueue=function(){return this._recalculatePendingRecordsCount(!0)},SyncStatus.onSyncStatusChange=function(handleMethod){return jQuery(window).on(this.SYNC_STATUS_CHANGE_EVENT_NAME,handleMethod)},SyncStatus.offSyncStatusChange=function(handleMethod){return jQuery(window).off(this.SYNC_STATUS_CHANGE_EVENT_NAME,handleMethod)},SyncStatus.resetSyncStatusError=function(){return this.syncErrorMessage=null,this._recalculateSyncStatus(!0)},SyncStatus}()}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/schedule/job/logtoserver",["acnCore/schedule/job","acnCore/log/logger","acnCore/status/syncstatus"],function(){var LogToServer,_ref;return namespace({TQ:{schedule:{job:LogToServer=function(_super){function LogToServer(){return _ref=LogToServer.__super__.constructor.apply(this,arguments)}return __extends(LogToServer,_super),LogToServer.prototype.id="LogToServer",LogToServer.prototype.when="every 2 mins",LogToServer.prototype.executeOnStartup=!1,LogToServer.prototype.onlineOnly=!0,LogToServer.prototype.couldBeExecuted=function(){return!TQ.status.SyncStatus.isSyncing()&&!TQ.config.Core.onlineOnlyEnabled},LogToServer.prototype.execute=function(){return TQ.log.Logger.submitToServer()},LogToServer}(TQ.schedule.Job)}}})}),define("acnCore/log/logger",["acnCore/log/entry","acnCore/schedule/job/logtoserver","acnCore/config/core"],function(){var Logger;return namespace({TQ:{log:Logger=function(){function Logger(){}return Logger.MAX_SIMULTANEOUS_SUBMISSIONS=10,Logger.PRINT_TO_CONSOLE=function(){return TQ.config.Core.PRINT_TO_CONSOLE},Logger.SAVE_TO_CACHE=function(){return TQ.config.Core.SAVE_TO_CACHE},Logger.SUBMIT_TO_SERVER=function(){return TQ.config.Core.SUBMIT_TO_SERVER},Logger.MIN_PRINT_LOG_LEVEL=TQ.log.Entry.levels.DEBUG,Logger.MIN_CACHE_LOG_LEVEL=TQ.log.Entry.levels.WARN,Logger.MIN_SUBMIT_LOG_LEVEL=TQ.log.Entry.levels.WARN,Logger.WHEN_SUBMIT_TO_SERVER="every 1 min",Logger.tags={AJAX:"AJAX",EXCEPTION:"EXCEPTION",METADATA:"METADATA",BOOTSTRAP:"BOOTSTRAP",SYNC:"SYNC",STORAGE:"STORAGE",FILE:"FILE",UX:"UX"},Logger.initialized=null,Logger.initializeStorage=function(){var _this=this;return setTimeout(function(){return TQ.config.Core.onlineOnlyEnabled?void 0:_this._logStorage=TQ.store.Storage.getStorage(TQ.config.Core.LOG_STORAGE_NAME,[{objectApiName:TQ.config.Core.LOG_STORE_NAME,keyPath:"Id",objectIndexList:{level:"int",labels:"string",errorCode:"int",datetime:"datetime"}}])},10)},Logger._logStorage=null,Logger._logStorageInitialized=Logger.initializeStorage(),Logger.initializeLoggingService=function(){return this._getLoggingToken()&&!this.initialized?(LE.init({token:this._getLoggingToken(),catchall:!0,print:!1,trace:!1,ssl:!1}),this.initialized=!0,!0):(this._getLoggingToken()&&TQ.log.Logger.log("remote logging service is off because no token has been specified"),!1)},Logger.isLoggingToServerEnabled=function(){return this.SUBMIT_TO_SERVER()&&this._getLoggingToken()&&this.initialized?!0:!1},Logger.getLoggedErrorsQueue=function(){return TQ.config.Core.onlineOnlyEnabled?$.when([]):this._logStorage.find({objectApiName:TQ.config.Core.LOG_STORE_NAME}).done(function(entries){})},Logger.log=function(logEntry){var entry;return entry=new TQ.log.Entry(logEntry),entry.level=TQ.log.Entry.levels.DEBUG,Logger._processEntry(entry)},Logger.info=function(logEntry){var entry;return entry=new TQ.log.Entry(logEntry),entry.level=TQ.log.Entry.levels.INFO,Logger._processEntry(entry)},Logger.warn=function(logEntry){var entry;return entry=new TQ.log.Entry(logEntry),entry.level=TQ.log.Entry.levels.WARN,Logger._processEntry(entry)},Logger.error=function(logEntry){var entry;return entry=new TQ.log.Entry(logEntry),entry.level=TQ.log.Entry.levels.ERROR,Logger._processEntry(entry)},Logger.prettyJSError=function(error){return{error:error.error,colno:error.colno,filename:error.filename,lineno:error.lineno,message:error.message,type:error.type}},Logger.submitToServer=function(){var submissionListDef,submissionsCount,submitDef;return submitDef=$.Deferred(),submissionListDef=[],submissionsCount=0,Logger.SUBMIT_TO_SERVER()?Logger._logStorage.find({objectApiName:TQ.config.Core.LOG_STORE_NAME}).done(function(logs){var logEntry,_fn,_i,_len;if(logs.length>0){for(_fn=function(logEntry){var postLogToServerDef;return logEntry.level<=Logger.MIN_SUBMIT_LOG_LEVEL?(postLogToServerDef=$.Deferred(),submissionListDef.push(postLogToServerDef),Logger._postToServer(logEntry,function(){return postLogToServerDef.resolve(),Logger._logStorage.remove(TQ.config.Core.LOG_STORE_NAME,logEntry.Id).fail(function(err){})},function(err){postLogToServerDef.resolve()}),submissionsCount++):void 0},_i=0,_len=logs.length;_len>_i&&(logEntry=logs[_i],!(submissionsCount>Logger.MAX_SIMULTANEOUS_SUBMISSIONS-1));_i++)_fn(logEntry);return $.when.apply($,submissionListDef).always(function(){return submitDef.resolve()})}return submitDef.resolve()}).fail(function(err){return submitDef.reject()}):submitDef.resolve(),submitDef},Logger._createEntry=function(entry){var entryObject;return this.SAVE_TO_CACHE()&&entry.level<=Logger.MIN_CACHE_LOG_LEVEL?(entryObject=TQ.util.Generic.toValidJSONObject(entry),this._logStorage.upsert(TQ.config.Core.LOG_STORE_NAME,entryObject).fail(function(err){})):void 0},Logger._processEntry=function(entry){var error,success;return success=function(){},error=function(){},TQ.config.Core.onlineOnlyEnabled?Logger._postToServer(entry,success,error):Logger._createEntry(entry),Logger._printToConsole(entry)},Logger._printToConsole=function(logEntry){var prettyLogEntry;if(Logger.PRINT_TO_CONSOLE()&&logEntry.level<=Logger.MIN_PRINT_LOG_LEVEL)switch(prettyLogEntry=Logger._prettyPrint(logEntry),logEntry.level){case TQ.log.Entry.levels.DEBUG:return;case TQ.log.Entry.levels.INFO:return;case TQ.log.Entry.levels.WARN:return;case TQ.log.Entry.levels.ERROR:return}},Logger._prettyPrint=function(logEntry){var key,toPrint,val;toPrint=_.clone(logEntry),delete toPrint.level;for(key in toPrint)val=toPrint[key],_.isEmpty(val)&&delete toPrint[key];for(key in toPrint)val=toPrint[key],"_"===key[0]&&delete toPrint[key];return delete toPrint.Id,toPrint},Logger._prettySubmit=function(logEntry){var key,toPrint,val;toPrint=_.clone(logEntry),delete toPrint.level;for(key in toPrint)val=toPrint[key],_.isEmpty(val)&&delete toPrint[key];return toPrint},Logger._postToServer=function(event,successCallback,errorCallback){var pretty;if(Logger.SUBMIT_TO_SERVER()&&event.level<=Logger.MIN_SUBMIT_LOG_LEVEL)switch(pretty=Logger._prettySubmit(event),event.level){case TQ.log.Entry.levels.DEBUG:return LE.log(pretty,successCallback,errorCallback);case TQ.log.Entry.levels.INFO:return LE.info(pretty,successCallback,errorCallback);case TQ.log.Entry.levels.WARN:return LE.warn(pretty,successCallback,errorCallback);case TQ.log.Entry.levels.ERROR:return LE.error(pretty,successCallback,errorCallback)}},Logger._getLoggingToken=function(){return TQ.bootstrap.Bootstrap.getSelectedEnvironment().logEntriesToken},Logger}()}})}),define("acnCore/status/appstatus",["acnCore/device/connection","acnCore/config/core","acnCore/util/generic","acnCore/log/logger"],function(){var AppStatus;return namespace({TQ:{status:AppStatus=function(){function AppStatus(){}return AppStatus.CLASS_LOCALSTORAGE_NAMESPACE="AppStatus_",AppStatus.PERFORM_LOGOUT="PERFORM_LOGOUT",AppStatus._IS_OFFLINE_FORCED_DEFAULT=!1,AppStatus.CONNECTION_CHANGE_EVENT_NAME="tqConnectionStatusChanged",AppStatus.initializeDeviceId=function(){var deviceId;return deviceId=store.get(this.CLASS_LOCALSTORAGE_NAMESPACE+"deviceId"),deviceId||(deviceId=window.device&&window.device.uuid?window.device.uuid:TQ.util.Generic.generateUuid(),store.set(this.CLASS_LOCALSTORAGE_NAMESPACE+"deviceId",deviceId)),deviceId},AppStatus.activated=TQ.util.Generic.initializeClassProperty(AppStatus.CLASS_LOCALSTORAGE_NAMESPACE,"activated",!1),AppStatus.isOfflineForced=TQ.util.Generic.initializeClassProperty(AppStatus.CLASS_LOCALSTORAGE_NAMESPACE,"isOfflineForced",AppStatus._IS_OFFLINE_FORCED_DEFAULT),AppStatus.deviceId=AppStatus.initializeDeviceId(),AppStatus.exceptionsErrorStack=[],AppStatus.ajaxErrorStack=[],AppStatus.initializeErrorEventMonitorning=function(){return window.addEventListener("error",function(errorMsg){var formattedError;return formattedError=TQ.log.Logger.prettyJSError(errorMsg),AppStatus.exceptionsErrorStack.push(formattedError),TQ.log.Logger.error({error:formattedError,namespace:TQ.log.Logger.EXCEPTION})}),$(document).ajaxError(function(e,request,settings){var formattedError;return formattedError=TQ.util.Generic.getAjaxError(request,settings),TQ.util.Generic.isOfflineError(formattedError)||AppStatus.ajaxErrorStack.push(formattedError),TQ.util.Generic.isOfflineError(formattedError)||TQ.util.Generic.isTQWebServicesError(formattedError)?void 0:TQ.log.Logger.error({namespace:TQ.log.Logger.tags.AJAX,error:formattedError})})},AppStatus.getErrorStatus=function(){var currentErrorStacks,error,_i,_len,_ref;if(currentErrorStacks={ajaxErrorStack:this.ajaxErrorStack,exceptionsErrorStack:this.exceptionsErrorStack},!_.isEmpty(this.ajaxErrorStack))for(_ref=this.ajaxErrorStack,_i=0,_len=_ref.length;_len>_i;_i++)if(error=_ref[_i],error.requestURL.indexOf("salesforce"))switch(error.status){case 401:if("INVALID_SESSION_ID"===error.responseJSON[0].errorCode)return currentErrorStacks.action=this.PERFORM_LOGOUT,currentErrorStacks}return currentErrorStacks},AppStatus.setActivated=function(activated){return this.activated=activated,store.set(this.CLASS_LOCALSTORAGE_NAMESPACE+"activated",this.activated)},AppStatus.isAuthenticated=function(){return Salesforce.isAuthenticated()},AppStatus.isActivated=function(){return this.activated||TQ.config.Core.onlineOnlyEnabled},AppStatus.toggleForceOffline=function(){return this.isOfflineForced=!this.isOfflineForced,store.set(this.CLASS_LOCALSTORAGE_NAMESPACE+"isOfflineForced",this.isOfflineForced),this.fireConnectionChangeEvent()},AppStatus.isOnline=function(){return TQ.device.Connection.isConnected&&!this.isOfflineForced},AppStatus.fireConnectionChangeEvent=function(){var event;return event=jQuery.Event(this.CONNECTION_CHANGE_EVENT_NAME,{isOnline:this.isOnline()}),jQuery(window).trigger(event),event},AppStatus.connectionStatusChanged=function(eventHandlingFunction){return jQuery(window).on(this.CONNECTION_CHANGE_EVENT_NAME,function(event){return eventHandlingFunction(event.isOnline)})},AppStatus}()}})}),define("acnCore/device/file",["acnCore/status/appstatus","acnCore/device/platform","acnCore/rest/provider","acnCore/util/generic","acnCore/device/connection","acnCore/log/logger"],function(){var File;return namespace({TQ:{device:File=function(){function File(){}return File.LOAD_FILE_FROM_SERVER_ERROR="LOAD_FILE_FROM_SERVER_ERROR",File.CUSTOM_FOLDER_NAME="AccentureONE",File.FILE_PREFIX="AccentureONE-picture-",File.PICTURE_EXTENSION=".jpg",File.FILE_DOWNLOAD_PREFIX="File_Download_",File.ERROR_GETTING_FILE_ENTRY="ERROR_GETTING_FILE_ENTRY",File.ERROR_GETTING_FILE="ERROR_GETTING_FILE",File.ERROR_LOADING_ATTACHMENT_FROM_SERVER="ERROR_LOADING_ATTACHMENT_FROM_SERVER",File.ERROR_SHARING_IS_NOT_AVAILABLE="SHARING_IS_NOT_AVAILABLE",File.initializeFileSystemRootPath=function(){return TQ.device.Platform.isDevice()?document.addEventListener("deviceready",function(){return window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(fs){return File.fileSystemRootPath=fs.root.nativeURL},function(err){})},!1):void 0},File.fileSystemRootPath=File.initializeFileSystemRootPath(),File.openFile=function(record){var cachedFileName,openDef,_this=this;return openDef=$.Deferred(),cachedFileName=store.get(File.FILE_DOWNLOAD_PREFIX+record.rawRecord.Id),this.loadFileFromServer(record.rawRecord.Body).done(function(fileName){return _this.openInBrowserOrPlugin(fileName),openDef.resolve()}).fail(function(err){return openDef.reject(this.LOAD_FILE_FROM_SERVER_ERROR)}),openDef},File.shareRecordWithFile=function(record){var cachedFileName,shareDef,_this=this;return shareDef=$.Deferred(),cachedFileName=store.get(File.FILE_DOWNLOAD_PREFIX+record.rawRecord.Id),window.plugins&&window.plugins.socialsharing?(window.plugins.socialsharing.available(function(isAvailable){var fileName,fileURI;return isAvailable?_this.isLocalFile(record.rawRecord.Body)||cachedFileName?(fileName=cachedFileName?cachedFileName:record.rawRecord.Body,fileURI=File._getFileURI(fileName),window.plugins.socialsharing.share(record.rawRecord.Name,null,fileURI,null),shareDef.resolve()):TQ.status.AppStatus.isOnline()?_this.loadAttachmentFromServer(record).done(function(fileName){return fileURI=File._getFileURI(fileName),window.plugins.socialsharing.share(record.rawRecord.Name,null,fileURI,null),shareDef.resolve()}).fail(function(err){return shareDef.reject(_this.LOAD_FILE_FROM_SERVER_ERROR)}):shareDef.reject(TQ.device.Connection.OFFLINE):shareDef.reject(_this.ERROR_SHARING_IS_NOT_AVAILABLE)}),shareDef):(shareDef.reject(this.ERROR_SHARING_IS_NOT_AVAILABLE),shareDef)},File.openInBrowserOrPlugin=function(fileURI){return window.resolveLocalFileSystemURL(fileURI,function(fileEntry){return cordova.plugins&&cordova.plugins.fileOpener2?cordova.plugins.fileOpener2.open(fileEntry.toInternalURL()):cordova.plugins&&cordova.plugins.fileOpener?cordova.plugins.fileOpener.open(fileEntry.toURL()):window.open(encodeURI(fileEntry.toURL()),"_blank","enableViewportScale=yes,toolbar=yes,location=no,closebuttoncaption=Close")},function(err){})},File.isLocalFile=function(body){return body.indexOf("/services/data")>=0?!1:!0},File.moveToPermanentStorage=function(tempFileURI){var moveDef,resolveFileError,resolveFileSuccess;return moveDef=$.Deferred(),resolveFileSuccess=function(entry){var newFileName;return newFileName=File._getUniquePictureFileName(),window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(fileSys){return fileSys.root.getDirectory(File.CUSTOM_FOLDER_NAME,{create:!0,exclusive:!1},function(directory){return entry.moveTo(directory,newFileName,function(result){return moveDef.resolve(result.toInternalURL())},function(err){return moveDef.reject(err)})},function(err){return moveDef.reject(err)})},function(err){return moveDef.reject(err)})},resolveFileError=function(err){return moveDef.reject(err)},window.resolveLocalFileSystemURL(tempFileURI,resolveFileSuccess,resolveFileError),moveDef},File.checkFileSize=function(value,maxFileSize){var checkDef;return checkDef=$.Deferred(),window.resolveLocalFileSystemURL(value,function(fileEntry){return fileEntry.file(function(fileObj){return!fileObj||fileObj.size>maxFileSize?checkDef.reject():checkDef.resolve()})}),checkDef},File.isLocalUrl=function(fileUrl){return!_.isEmpty(fileUrl)&&(-1!==fileUrl.indexOf(File.fileSystemRootPath)||-1!==fileUrl.indexOf("file://")||-1!==fileUrl.indexOf("cdvfile://"))},File._attachAuthTokenIfNeeded=function(serverUrl){var newServerUrl;return newServerUrl=serverUrl,-1!==newServerUrl.indexOf("force.com")&&(newServerUrl+=-1===serverUrl.indexOf("?")?"?":"&",newServerUrl+="oauth_token="+TQ.rest.Provider.getToken()),newServerUrl},File.loadFileFromServer=function(serverUrl,defaultExt){var fileTransfer,fileTransferErrorCallback,fileTransferSuccessCallback,loadFileDef,localFileUri,serverEndpointUrl;return loadFileDef=$.Deferred(),localFileUri=File._getFileURI(serverUrl),-1===serverUrl.indexOf("://")?("/"!==serverUrl.charAt(0)&&(serverUrl="/"+serverUrl),serverEndpointUrl=encodeURI(TQ.rest.Provider.getInstanceUrl()+serverUrl)):serverEndpointUrl=encodeURI(serverUrl),serverEndpointUrl=this._attachAuthTokenIfNeeded(serverEndpointUrl),fileTransferSuccessCallback=function(entry){return TQ.log.Logger.log("picture:loadAttachmentFromServer:success: "+entry.toURL()),loadFileDef.resolve(entry.toInternalURL())},fileTransferErrorCallback=function(err){var loadError;return loadError={errorCode:File.ERROR_LOADING_ATTACHMENT_FROM_SERVER,error:err},TQ.log.Logger.error({namespace:TQ.log.Logger.tags.FILE,errorCode:err.errorCode,error:loadError}),loadFileDef.reject(loadError)},fileTransfer=new FileTransfer,fileTransfer.download(serverEndpointUrl,localFileUri,fileTransferSuccessCallback,fileTransferErrorCallback,!1,{headers:{Authorization:"OAuth "+TQ.rest.Provider.getToken()}}),loadFileDef},File.loadAttachmentFromServer=function(record){var fileName,fileTransfer,fileTransferErrorCallback,fileTransferSuccessCallback,fileURI,fileURIOnServer,loadAttachmentFromServerDef,serverEndpointUrl;return loadAttachmentFromServerDef=$.Deferred(),fileName=record.rawRecord.Name.replace(/\s+/g,""),fileURIOnServer=record.rawRecord.Body,fileURI=File._getFileURI(fileName),serverEndpointUrl=encodeURI(TQ.rest.Provider.getInstanceUrl()+fileURIOnServer),fileTransferSuccessCallback=function(entry){return TQ.log.Logger.log("picture:loadAttachmentFromServer:success: "+entry.toURL()),store.set(File.FILE_DOWNLOAD_PREFIX+record.rawRecord.Id,entry.name),loadAttachmentFromServerDef.resolve(entry.name)},fileTransferErrorCallback=function(err){var error;return error={errorCode:File.ERROR_LOADING_ATTACHMENT_FROM_SERVER,error:err},TQ.log.Logger.error({namespace:TQ.log.Logger.tags.FILE,errorCode:error.errorCode,error:error.error}),loadAttachmentFromServerDef.reject(error)},fileTransfer=new FileTransfer,fileTransfer.download(serverEndpointUrl,fileURI,fileTransferSuccessCallback,fileTransferErrorCallback,!1,{headers:{Authorization:"OAuth "+TQ.rest.Provider.getToken()}}),loadAttachmentFromServerDef},File.getFileAsBase64=function(fileURI,includeDataImage){var conversionDef,dataUrlRegex,errorGettingFile,errorGettingFileEntry,fileName,parsedResult,successGettingFileEntry;return null==includeDataImage&&(includeDataImage=!1),conversionDef=$.Deferred(),0===fileURI.indexOf("data:")?(dataUrlRegex=/^data:(.*?)\/(.*?);base64,(.*)$/,parsedResult=dataUrlRegex.exec(fileURI),fileName="data",_.isEmpty(parsedResult[2])||(fileName+="."+parsedResult[2]),conversionDef.resolve({fileName:fileName,base64:parsedResult[3]})):(errorGettingFileEntry=function(env){var error;return error={errorCode:File.ERROR_GETTING_FILE_ENTRY,error:env},TQ.log.Logger.error({namespace:TQ.log.Logger.tags.FILE,errorCode:error.errorCode,error:error.error}),conversionDef.resolve(error)},errorGettingFile=function(env){var error;return error={errorCode:File.ERROR_GETTING_FILE,error:env},TQ.log.Logger.error({namespace:TQ.log.Logger.tags.FILE,errorCode:error.errorCode,error:error.error}),conversionDef.reject(error)},successGettingFileEntry=function(fileEntry){return fileEntry.file(function(file){var reader;return reader=new FileReader,reader.onload=function(evt){var base64,result,search;return result=evt.target.result,base64=result,includeDataImage||(search="base64,",result.indexOf(search)>0&&(base64=result.slice(result.indexOf(search)+search.length))),conversionDef.resolve({fileName:evt.target._fileName,base64:base64})},reader.readAsDataURL(file)}),errorGettingFile},window.resolveLocalFileSystemURL(fileURI,successGettingFileEntry,errorGettingFileEntry),conversionDef)},File.getLocalFilePath=function(fileURI){return null!==fileURI&&(fileURI=fileURI.replace("cdvfile://localhost/persistent/",File.fileSystemRootPath)),$.Deferred().resolve(fileURI)},File.removeFile=function(fileURI){var removeDef;return removeDef=$.Deferred(),window.resolveLocalFileSystemURL(fileURI,function(fileEntry){return fileEntry.remove(function(){return removeDef.resolve()},function(err){return removeDef.reject()})},function(err){return removeDef.reject()}),removeDef},File.remove=function(fileName,relatedRecordId){var fileURI,removeDef;return removeDef=$.Deferred(),fileURI=File._getFileURI(fileName),store.remove(this.FILE_DOWNLOAD_PREFIX+relatedRecordId),window.resolveLocalFileSystemURL(fileURI,function(fileEntry){return fileEntry.remove(function(){return removeDef.resolve()},function(err){return removeDef.reject()})},function(err){return removeDef.reject()}),removeDef},File.clearFileSystem=function(){var clearDef;return clearDef=$.Deferred(),window.requestFileSystem(LocalFileSystem.PERSISTENT,1048576,function(fs){return fs.root.getDirectory("/"+File.CUSTOM_FOLDER_NAME,{},function(dirEntry){return dirEntry.removeRecursively(function(){return clearDef.resolve()},function(err){return clearDef.reject(err)})},function(err){return clearDef.reject(err)})}),clearDef},File._getUniquePictureFileName=function(){return this.FILE_PREFIX+TQ.util.Generic.generateUuid()+this.PICTURE_EXTENSION},File._getFileURI=function(fileName){var fileExtension,hashedFile;return hashedFile=TQ.util.Generic.hash(fileName),fileExtension=TQ.util.Generic.getFileExtension(fileName,"jpg"),_.isEmpty(fileExtension)||(hashedFile+="."+fileExtension),File.fileSystemRootPath+File.CUSTOM_FOLDER_NAME+"/"+hashedFile},File}()}})}),define("acnCore/sync/filemanager",["acnCore/device/platform","acnCore/device/file","acnCore/util/generic","acnCore/config/core","acnCore/metadata/metadata"],function(){
var FileManager;return namespace({TQ:{sync:FileManager=function(){function FileManager(){}return FileManager.CLASS_LOCALSTORAGE_NAMESPACE="FileManager_",FileManager._LOCALSTORAGE_MAP=FileManager.CLASS_LOCALSTORAGE_NAMESPACE+"FileMap",FileManager._MAX_LOAD_PER_TIME_COUNT=4,FileManager.FILE_NOT_DOWNLOADED="FileNotDownloaded",FileManager.DEVICE_OFFLINE="DeviceOffline",FileManager._initializeFileUrlMap=function(){var fileMap;return fileMap=store.get(this._LOCALSTORAGE_MAP),fileMap||(fileMap={},store.set(this._LOCALSTORAGE_MAP,fileMap)),fileMap},FileManager.initializeEventHandlers=function(){var _this=this;return TQ.status.AppStatus.connectionStatusChanged(function(isOnline){return isOnline?_this._runLoadingIteration():void 0}),!0},FileManager._loadFileSuccessCallbackMap={},FileManager._loadFileErrorCallbackMap={},FileManager._loadingUrlList=[],FileManager._fileLoadingCount=0,FileManager._eventHandlingInitalized=FileManager.initializeEventHandlers(),FileManager._fileUrlMap=FileManager._initializeFileUrlMap(),FileManager._fullServerUrl=function(serverPath){var resultPath;return resultPath=serverPath,resultPath&&-1===resultPath.indexOf("://")&&(_.isString(window.sitePrefix)&&0===resultPath.indexOf(window.sitePrefix)&&(resultPath=resultPath.replace(window.sitePrefix,"")),resultPath=TQ.rest.Provider.getInstanceUrl()+("/"===resultPath.charAt(0)?"":"/")+resultPath),-1!==resultPath.indexOf("force.com")&&(resultPath+=-1===resultPath.indexOf("?")?"?":"&",resultPath+="oauth_token="+TQ.rest.Provider.getToken()),resultPath},FileManager._checkDownloadedUrlForFile=function(url){return TQ.device.File.isLocalUrl(url)?{success:!0,localUrl:url}:TQ.config.Core.onlineOnlyEnabled?{success:!0,localUrl:this._fullServerUrl(url)}:TQ.device.Platform.isDevice()?_.isEmpty(this._fileUrlMap[url])?{success:!1,error:this.FILE_NOT_DOWNLOADED}:{success:!0,localUrl:this._fileUrlMap[url]}:TQ.status.AppStatus.isOnline()?{success:!0,localUrl:this._fullServerUrl(url)}:{success:!1,error:this.DEVICE_OFFLINE}},FileManager.getLocalUrl=function(url){var localCheckResult;return localCheckResult=this._checkDownloadedUrlForFile(url),localCheckResult.success?localCheckResult.localUrl:null},FileManager.saveLocalUrl=function(serverPath,localUrl){return this._fileUrlMap[serverPath]=localUrl,store.set(this._LOCALSTORAGE_MAP,this._fileUrlMap)},FileManager.loadFile=function(url){var loadDeferred,localCheckResult,_this=this;return loadDeferred=$.Deferred(),localCheckResult=this._checkDownloadedUrlForFile(url),localCheckResult.success?loadDeferred.resolve(localCheckResult.localUrl):localCheckResult.error===this.FILE_NOT_DOWNLOADED?TQ.device.File.loadFileFromServer(url).done(function(localUrl){return _this.saveLocalUrl(url,localUrl),loadDeferred.resolve(localUrl)}).fail(function(error){return loadDeferred.reject(error)}):loadDeferred.reject(localCheckResult.error),loadDeferred},FileManager.onFileLoad=function(url,successCallback,failCallback){var localCheckResult;return localCheckResult=this._checkDownloadedUrlForFile(url),localCheckResult.success?successCallback(localCheckResult.localUrl):localCheckResult.error===this.FILE_NOT_DOWNLOADED?this._addToFileQueue(url,successCallback,failCallback):failCallback(localCheckResult.error)},FileManager.offFileLoad=function(url,successCallback,failCallback){return _.isEmpty(this._loadFileSuccessCallbackMap[url])||this._loadFileSuccessCallbackMap[url].remove(successCallback),failCallback&&!_.isEmpty(this._loadFileErrorCallbackMap[url])?this._loadFileErrorCallbackMap[url].remove(failCallback):void 0},FileManager._addToFileQueue=function(url,successCallback,failCallback){return _.isEmpty(this._loadFileSuccessCallbackMap[url])&&(this._loadFileSuccessCallbackMap[url]=$.Callbacks()),this._loadFileSuccessCallbackMap[url].add(successCallback),failCallback&&(_.isEmpty(this._loadFileErrorCallbackMap[url])&&(this._loadFileErrorCallbackMap[url]=$.Callbacks()),this._loadFileErrorCallbackMap[url].add(failCallback)),this._runLoadingIteration()},FileManager._runLoadingIteration=function(){var serverFilePath,_results,_this=this;if(TQ.status.AppStatus.isOnline()&&!(this._fileLoadingCount>=this._MAX_LOAD_PER_TIME_COUNT)){_results=[];for(serverFilePath in this._loadFileSuccessCallbackMap)if(_.contains(this._loadingUrlList,serverFilePath))_results.push(void 0);else{if(this._fileLoadingCount++,this._loadingUrlList.push(serverFilePath),TQ.device.File.loadFileFromServer(serverFilePath).done(function(localUrl){return _this.saveLocalUrl(serverFilePath,localUrl),_this._loadFileSuccessCallbackMap[serverFilePath]&&(_this._loadFileSuccessCallbackMap[serverFilePath].fire(localUrl),_this._loadFileSuccessCallbackMap[serverFilePath].empty(),delete _this._loadFileSuccessCallbackMap[serverFilePath]),_this._loadFileErrorCallbackMap[serverFilePath]?(_this._loadFileErrorCallbackMap[serverFilePath].empty(),delete _this._loadFileErrorCallbackMap[serverFilePath]):void 0}).fail(function(error){return TQ.status.AppStatus.isOnline()&&(_this._loadFileSuccessCallbackMap[serverFilePath]&&(_this._loadFileSuccessCallbackMap[serverFilePath].empty(),delete _this._loadFileSuccessCallbackMap[serverFilePath]),_this._loadFileErrorCallbackMap[serverFilePath])?(_this._loadFileErrorCallbackMap[serverFilePath].fire(error),_this._loadFileErrorCallbackMap[serverFilePath].empty(),delete _this._loadFileErrorCallbackMap[serverFilePath]):void 0}).always(function(){return _this._fileLoadingCount--,_this._loadingUrlList=_.without(_this._loadingUrlList,serverFilePath),_this._runLoadingIteration()}),this._fileLoadingCount>=this._MAX_LOAD_PER_TIME_COUNT)break;_results.push(void 0)}return _results}},FileManager}()}})}),define("acnCore/sync/tquploadservice",["acnCore/sync/tqrecord","acnCore/sync/syncengine","acnCore/config/core","acnCore/device/file","acnCore/log/logger","acnCore/sync/filemanager"],function(){var TQUploadService;return namespace({TQ:{sync:TQUploadService=function(){function TQUploadService(){}return TQUploadService.MISSING_BODY_FOR_ATTACHMENT="MISSING_BODY_FOR_ATTACHMENT",TQUploadService._elaborateFieldsMap={"*":["TQ_Attachment_Link__c"],FeedItem:["ContentData"]},TQUploadService._elaboratedFieldsInRecords={},TQUploadService.generateTQUploadRequest=function(objectApiNameList){var request,toCacheFlatRecordList,tqUploadRequestDeferred,tqUploadRequestItemList,_this=this;return tqUploadRequestDeferred=$.Deferred(),tqUploadRequestItemList=[],request={clientAppID:TQ.config.Core.clientAppId,recordList:[],deviceId:TQ.status.AppStatus.deviceId},toCacheFlatRecordList=[],TQ.sync.SmartSync.getFlatQueue(objectApiNameList).done(function(flatTQRecordList){var flatTQRecord,_i,_len;for(_i=0,_len=flatTQRecordList.length;_len>_i;_i++)flatTQRecord=flatTQRecordList[_i],toCacheFlatRecordList.push(flatTQRecord),tqUploadRequestItemList.push(_this.elaborateRecord(flatTQRecord));return $.when.apply($,tqUploadRequestItemList).done(function(){return request.recordList=_.flatten(arguments),request.recordList.sort(function(request1,request2){var changeDate1,changeDate2;return changeDate1=new Date(request1.changeDate),changeDate2=new Date(request2.changeDate),_.isNaN(changeDate1.getTime())?-1:_.isNaN(changeDate2.getTime())?1:changeDate1.getTime()-changeDate2.getTime()}),request.recordList.length>0?(store.set(TQ.sync.SyncEngine.CLASS_LOCALSTORAGE_NAMESPACE+"TQUploadRequestTQRecordList",toCacheFlatRecordList),tqUploadRequestDeferred.resolve(JSON.stringify(request))):tqUploadRequestDeferred.resolve(null)}).fail(function(err){return tqUploadRequestDeferred.reject(err)})}).fail(function(err){return tqUploadRequestDeferred.reject(err)}),tqUploadRequestDeferred},TQUploadService._getFieldListToElaborate=function(flatTQRecord){var blobRecord,blobRecords,fieldsToElaborate,objectApiName,_i,_len;for(fieldsToElaborate=[],objectApiName=flatTQRecord._wrap.objectApiName,blobRecords=TQ.metadata.Metadata.getBlobFieldsArray(objectApiName),_.isEmpty(this._elaborateFieldsMap[objectApiName])||(blobRecords=_.union(blobRecords,this._elaborateFieldsMap[objectApiName])),_.isEmpty(this._elaborateFieldsMap["*"])||(blobRecords=_.union(blobRecords,this._elaborateFieldsMap["*"])),_i=0,_len=blobRecords.length;_len>_i;_i++)blobRecord=blobRecords[_i],_.isEmpty(flatTQRecord[blobRecord])||(TQ.device.File.isLocalUrl(flatTQRecord[blobRecord])||0===flatTQRecord[blobRecord].indexOf("data:"))&&fieldsToElaborate.push(blobRecord);return fieldsToElaborate},TQUploadService.elaborateRecord=function(flatTQRecord){var fieldsToElaborate,recordElaborationDef;return recordElaborationDef=$.Deferred(),fieldsToElaborate=this._getFieldListToElaborate(flatTQRecord),_.isEmpty(fieldsToElaborate)?recordElaborationDef.resolve(TQ.sync.TQRecord.toTQUploadRequestItem(flatTQRecord)):this.performElaboration(flatTQRecord,fieldsToElaborate).done(function(flatTQRecordCopy){var resultRequestList;return resultRequestList=TQ.sync.TQRecord.toTQUploadRequestItem(flatTQRecordCopy),recordElaborationDef.resolve(resultRequestList)}).fail(function(err){return recordElaborationDef.reject(err)}),recordElaborationDef},TQUploadService.performElaboration=function(flatTQRecord,fieldsToElaborate){var blobField,elaborationDef,elaborationDefArray,elaborationFieldDef,fieldValue,flatTQRecordClone,_i,_len,_this=this;for(elaborationDef=$.Deferred(),elaborationDefArray=[],flatTQRecordClone=_.clone(flatTQRecord),_i=0,_len=fieldsToElaborate.length;_len>_i;_i++)blobField=fieldsToElaborate[_i],elaborationFieldDef=$.Deferred(),fieldValue=flatTQRecord[blobField],TQ.device.File.isLocalUrl(fieldValue)?TQ.device.File.getFileAsBase64(fieldValue).done(function(result){return flatTQRecordClone[blobField]=result.base64,elaborationFieldDef.resolve(),_.isEmpty(_this._elaboratedFieldsInRecords[flatTQRecordClone.Id])&&(_this._elaboratedFieldsInRecords[flatTQRecordClone.Id]={}),_this._elaboratedFieldsInRecords[flatTQRecordClone.Id][blobField]=fieldValue}).fail(function(err){return elaborationFieldDef.reject(err)}):(delete flatTQRecordClone[blobField],elaborationFieldDef.resolve()),elaborationDefArray.push(elaborationFieldDef);return $.when.apply($,elaborationDefArray).done(function(){return elaborationDef.resolve(flatTQRecordClone)}).fail(function(error){return elaborationDef.reject(error)}),elaborationDef},TQUploadService.setUploadedElaboratedFields=function(response){var fieldName,localURI,record,responseRecordData,_i,_len,_ref,_results;if(!_.isEmpty(response.body)){for(_ref=response.body,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)responseRecordData=_ref[_i],responseRecordData.success&&!_.isEmpty(this._elaboratedFieldsInRecords[responseRecordData.requestId])?(record=responseRecordData.record,_.isEmpty(record)?_results.push(void 0):_results.push(function(){var _j,_len1,_ref1,_results1;for(_ref1=this._elaboratedFieldsInRecords[responseRecordData.requestId],_results1=[],localURI=_j=0,_len1=_ref1.length;_len1>_j;localURI=++_j)fieldName=_ref1[localURI],_.isEmpty(record[fieldName])||TQ.device.File.isLocalUrl(record[fieldName])?_results1.push(void 0):_results1.push(TQ.Sync.FileManager.saveLocalUrl(record[fieldName],localURI));return _results1}.call(this))):_results.push(void 0);return _results}},TQUploadService.cleanElaboratedFields=function(){return this._elaboratedFieldsInRecords={}},TQUploadService._performDataUrlElaboration=function(flatTQRecord){var fieldApiName,fieldsToElaborate,value,_i,_len;if(fieldsToElaborate=this._getFieldListToElaborate(flatTQRecord),!_.isEmpty(fieldsToElaborate))for(_i=0,_len=fieldsToElaborate.length;_len>_i;_i++)fieldApiName=fieldsToElaborate[_i],value=flatTQRecord[fieldApiName],_.isString(value)&&(flatTQRecord[fieldApiName]=value.replace(/data:.*?;base64,/,""));return flatTQRecord},TQUploadService.generateUploadRequestWithItems=function(tqRecordList){var flatTQRecord,request,requestItem,requestItemList,sendOnlyChanges,tqRecord,_i,_j,_len,_len1;for(_.isArray(tqRecordList)||(tqRecordList=[tqRecordList]),request={clientAppID:TQ.config.Core.clientAppId,recordList:[],deviceId:TQ.status.AppStatus.deviceId},_i=0,_len=tqRecordList.length;_len>_i;_i++)for(tqRecord=tqRecordList[_i],sendOnlyChanges=!TQ.sync.TQRecord.isLocalId(tqRecord.rawRecord.Id)&&TQ.config.Core.onlineOnlyEnabled,flatTQRecord=TQ.sync.TQRecord.expandedWrapToFlatWrap(tqRecord,sendOnlyChanges),flatTQRecord=this._performDataUrlElaboration(flatTQRecord),requestItemList=TQ.sync.TQRecord.toTQUploadRequestItem(flatTQRecord),_.isArray(requestItemList)||(requestItemList=[requestItemList]),_j=0,_len1=requestItemList.length;_len1>_j;_j++)requestItem=requestItemList[_j],request.recordList.push(requestItem);return request.recordList.length>0?JSON.stringify(request):null},TQUploadService}()}})}),define("acnCore/sync/cacher",["acnCore/store/storage","acnCore/sync/smartsync"],function(){var Cacher;return namespace({TQ:{sync:Cacher=function(){function Cacher(){}return Cacher._DATA_BATCH_COPY_LIMIT=3e3,Cacher.FULL_SYNC="FULL",Cacher.INCREMENTAL_SYNC="INC",Cacher.NO_SYNC_REQUIRED="NONE",Cacher._CACHE_STORE_SUFFIX="__Cache",Cacher._dataStorage=null,Cacher._cacheStorage=null,Cacher.initStorage=function(){return this._dataStorage=TQ.store.Storage.getStorage(TQ.config.Core.DATA_STORAGE_NAME),this._cacheStorage=this._dataStorage,this.cleanCacheStorage()},Cacher.prepareCacheTables=function(trackedObjectMetadataList){var trackedObjectCache,trackedObjectCacheList,trackedObjectMetadata,_i,_len;for(trackedObjectCacheList=[],_i=0,_len=trackedObjectMetadataList.length;_len>_i;_i++)trackedObjectMetadata=trackedObjectMetadataList[_i],trackedObjectCache=$.extend(!0,{},trackedObjectMetadata),trackedObjectCache.objectApiName+=this._CACHE_STORE_SUFFIX,trackedObjectCache.autoCreateIndexes=!1,trackedObjectCacheList.push(trackedObjectCache);return trackedObjectCacheList},Cacher.cachePage=function(objectApiName,batch){return _.each(batch,function(batchObj){return delete batchObj.attributes}),this._cacheStorage.upsert(objectApiName+this._CACHE_STORE_SUFFIX,batch)},Cacher.processDownloadError=function(downloadResponse,err){var processDownloadResultDef;return processDownloadResultDef=$.Deferred(),this.cleanCacheStorage().done(function(){return processDownloadResultDef.resolve()}).fail(function(error){return processDownloadResultDef.reject(error)}),processDownloadResultDef},Cacher.processDownloadSuccess=function(syncConfig,excludeIdList){return this._copyCache(syncConfig,excludeIdList)},Cacher.cleanCacheStorage=function(){var cleanTableDeferredList,objectSchema,_cacheStorage,_i,_len,_ref;if(cleanTableDeferredList=[],_cacheStorage=this._cacheStorage,!_cacheStorage)return $.when(null);for(_ref=_cacheStorage.getSchema().stores,_i=0,_len=_ref.length;_len>_i;_i++)objectSchema=_ref[_i],-1!==objectSchema.name.indexOf(this._CACHE_STORE_SUFFIX)&&cleanTableDeferredList.push(_cacheStorage.clear(objectSchema.name));return $.when.apply($,cleanTableDeferredList)},Cacher._copyObjectData=function(objectApiName,isIncremental,excludeIdList){var defError,downloadDeferred,objectQuery,transactionDef,_copyObjectDataBatch;return objectQuery={objectApiName:objectApiName+this._CACHE_STORE_SUFFIX,page:0,pagesize:this._DATA_BATCH_COPY_LIMIT},_.isArray(excludeIdList)&&!_.isEmpty(excludeIdList)&&(objectQuery.where={Id:{"NOT IN":excludeIdList}}),downloadDeferred=$.Deferred(),defError=null,_copyObjectDataBatch=function(tx,objectQuery){var queryPromise;return queryPromise=tx.find(objectQuery),queryPromise.then(function(cachedObjects){var upsertPromise;return 0!==cachedObjects.length?(upsertPromise=tx.upsert(objectApiName,cachedObjects),upsertPromise.then(function(){return objectQuery.page++,_copyObjectDataBatch(tx,objectQuery)}),upsertPromise.fail(function(error){return defError=error})):void 0}),queryPromise.fail(function(error){return defError=error})},transactionDef=this._dataStorage.db.run(function(tx){var clearPromise;return isIncremental?_copyObjectDataBatch(objectQuery,downloadDeferred):(clearPromise=tx.clear(objectApiName),clearPromise.done(function(){return _copyObjectDataBatch(objectQuery,downloadDeferred)}),clearPromise.fail(function(error){return downloadDeferred.reject(null!=defError?defError:{defError:error})}))}),transactionDef.then(function(){return downloadDeferred.resolve()}),transactionDef.fail(function(error){return downloadDeferred.reject(error)}),downloadDeferred},Cacher._copyCache=function(syncConfiguration,excludeIdList){var copyDeferred,uploadMethod,_this=this;return copyDeferred=$.Deferred(),uploadMethod=function(index){var copyObjectDeferred,isIncremental,objSyncConfig;return index!==syncConfiguration.length?(objSyncConfig=syncConfiguration[index],isIncremental="INC"===objSyncConfig.syncType,isIncremental||(excludeIdList=void 0),copyObjectDeferred=null,copyObjectDeferred=_this._cacheStorage.isSqlStorage()?_this._cacheStorage.copyStoreContent(objSyncConfig.objectApiName+_this._CACHE_STORE_SUFFIX,objSyncConfig.objectApiName,!isIncremental,excludeIdList):_this._copyObjectData(objSyncConfig.objectApiName,isIncremental,excludeIdList),copyObjectDeferred.then(function(){return uploadMethod(index+1)}).fail(function(error){return copyDeferred.reject(error)}).always(function(){return _this._cacheStorage.clear(objSyncConfig.objectApiName+_this._CACHE_STORE_SUFFIX)})):void copyDeferred.resolve()},uploadMethod(0),copyDeferred},Cacher}()}})});var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty;define("acnCore/sync/trackedobjectsyncstatus",["acnCore/log/logger"],function(){var TrackedObjectSyncStatus;return namespace({TQ:{sync:TrackedObjectSyncStatus=function(){function TrackedObjectSyncStatus(objectApiName){this.save=__bind(this.save,this);var descriptor,key,val;if(descriptor=store.get(TrackedObjectSyncStatus._TRACKED_OBJECT_SYNC_STATUS_STORE_PREFIX+objectApiName),void 0===descriptor)this.objectApiName=objectApiName,this.fromDateTime=null,this.toDateTime=null,this.syncStatus=TrackedObjectSyncStatus.NEVER_SYNCHRONISED,this.save();else for(key in descriptor)__hasProp.call(descriptor,key)&&(val=descriptor[key],this[key]=val)}return TrackedObjectSyncStatus._TRACKED_OBJECT_SYNC_STATUS_STORE_PREFIX="TrackedObjectSyncStatus_",TrackedObjectSyncStatus.NOT_SYNCHRONISED="OUT_OF_SYNC",TrackedObjectSyncStatus.NEVER_SYNCHRONISED="NEVER_SYNCHRONISED",TrackedObjectSyncStatus.SYNCHRONISED="SYNCHRONISED",TrackedObjectSyncStatus.DOWNLOAD_STARTED="DOWNLOAD_STARTED",TrackedObjectSyncStatus.DOWNLOAD_PAGING="DOWNLOAD_PAGING",TrackedObjectSyncStatus.DOWNLOAD_READY_FOR_COMMIT="DOWNLOAD_READY_FOR_COMMIT",TrackedObjectSyncStatus.DOWNLOAD_ERROR="DOWNLOAD_ERROR",TrackedObjectSyncStatus.PAGING_ERROR="PAGING_ERROR",TrackedObjectSyncStatus.prototype.objectApiName="",TrackedObjectSyncStatus.prototype.error="",TrackedObjectSyncStatus.prototype.syncType="",TrackedObjectSyncStatus.prototype.nextRecordsUrl="",TrackedObjectSyncStatus.prototype.fromDateTime=null,TrackedObjectSyncStatus.prototype.toDateTime=null,TrackedObjectSyncStatus.prototype.pagingStartedDateTime=null,TrackedObjectSyncStatus.prototype.syncStatus=null,TrackedObjectSyncStatus.prototype.query="",TrackedObjectSyncStatus.prototype.downloadError=null,TrackedObjectSyncStatus.prototype.status=null,TrackedObjectSyncStatus.prototype.recordCount=0,TrackedObjectSyncStatus.prototype.needsToBeSynchronized=function(){return this.syncStatus===TrackedObjectSyncStatus.NEVER_SYNCHRONISED||this.syncStatus===TrackedObjectSyncStatus.SYNCHRONISED?!0:!1},TrackedObjectSyncStatus.prototype.initNewDownload=function(){return this.toDateTime=new Date,this.syncStatus=TrackedObjectSyncStatus.NOT_SYNCHRONISED,this.nextRecordsUrl=null,this.save()},TrackedObjectSyncStatus.prototype.toTQDownloadRequestItem=function(){return{fromDateTime:this.fromDateTime,toDateTime:this.toDateTime,objectApiName:this.objectApiName}},TrackedObjectSyncStatus.prototype.save=function(){return store.set(TrackedObjectSyncStatus._TRACKED_OBJECT_SYNC_STATUS_STORE_PREFIX+this.objectApiName,this)},TrackedObjectSyncStatus.prototype.updateGivenDownloadResponseItem=function(downloadResponseItem){return this.error=downloadResponseItem.error,this.syncType=downloadResponseItem.syncType,this.recordCount=downloadResponseItem.recordCount,this.query=downloadResponseItem.query,this.status=downloadResponseItem.status,this.save()},TrackedObjectSyncStatus.prototype.setSyncStatus=function(description){switch(this.downloadError=description.downloadError,this.syncStatus=description.syncStatus,description.syncStatus){case TrackedObjectSyncStatus.DOWNLOAD_READY_FOR_COMMIT:this.nextRecordsUrl="done",TQ.log.Logger.log("sync:downloadobjectdata:"+this.objectApiName+":readyforcommit");break;case TrackedObjectSyncStatus.DOWNLOAD_PAGING:this.nextRecordsUrl||(this.pagingStartedDateTime=new Date),this.nextRecordsUrl=description.nextRecordsUrl,TQ.log.Logger.log("sync:downloadobjectdata:paging:"+this.objectApiName);break;case TrackedObjectSyncStatus.SYNCHRONISED:this.fromDateTime=this.toDateTime}return this.save()},TrackedObjectSyncStatus}()}})}),define("acnCore/sync/tempsync",["acnCore/sync/tqrecord","acnCore/sync/smartsync","acnCore/util/generic"],function(){var TempSync;return namespace({TQ:{sync:TempSync=function(){function TempSync(){}return TempSync.CLASS_LOCALSTORAGE_NAMESPACE="TempSync",TempSync.tempStore={},TempSync.saveTempStoreInLocalStorage=function(){return store.set(this.CLASS_LOCALSTORAGE_NAMESPACE,this.tempStore)},TempSync.initializeTempStoreWithQueueData=function(){var _this=this;return TQ.sync.SmartSync.getFlatQueue().done(function(flatTQRecordList){var flatRecord,flatRecordClone,_i,_len,_results;for(_results=[],_i=0,_len=flatTQRecordList.length;_len>_i;_i++)flatRecord=flatTQRecordList[_i],flatRecordClone=_.clone(flatRecord),delete flatRecordClone._wrap,_results.push(_this.tempStore[flatRecord.Id]={origin:flatRecordClone,objectApiName:flatRecord._wrap.objectApiName});return _results}).fail(function(){return _this.tempStore={}})},TempSync.saveDataChangesToTempStore=function(recordList){var tempRecordsIdList,tqRecord,_i,_len;for(tempRecordsIdList=[],_.isArray(recordList)||(recordList=[recordList]),_i=0,_len=recordList.length;_len>_i;_i++)tqRecord=recordList[_i],this.tempStore[tqRecord.rawRecord.Id]&&(tempRecordsIdList.push(tqRecord.rawRecord.Id),this.tempStore[tqRecord.rawRecord.Id].actual=_.clone(tqRecord.rawRecord));return this.saveTempStoreInLocalStorage(),tempRecordsIdList},TempSync.updateRecordWithTempUpdates=function(recordList){var actualTempValue,tqRecord,_i,_len;for(_i=0,_len=recordList.length;_len>_i;_i++)tqRecord=recordList[_i],tempStore[tqRecord.rawRecord.Id]&&(actualTempValue=tempStore[tqRecord.rawRecord.Id].actual,actualTempValue&&(tqRecord.rawRecord=_.clone(actualTempValue),tqRecord.dbOrigins=_.clone(actualTempValue)));return recordList},TempSync.cleanTempStore=function(){return this.tempStore={},this.saveTempStoreInLocalStorage()},TempSync.applyTempChangesToFlatRecord=function(tempRecordData,flatRecord){var changedBlock,key,newValue,_ref;_.isArray(flatRecord._wrap.changes)&&flatRecord._wrap.changes.length>0&&(flatRecord._wrap.changes[flatRecord._wrap.changes.length-1].finished=!0),_.isArray(flatRecord._wrap.changes)||(flatRecord._wrap.changes=[]),changedBlock={changeDate:new Date,oldValues:{},finished:!1},_ref=tempRecordData.actual;for(key in _ref)newValue=_ref[key],_.isEqual(newValue,tempRecordData.origin[key])||(changedBlock.oldValues[key]=flatRecord[key],flatRecord[key]=newValue);return _.isEmpty(changedBlock.oldValues)||(flatRecord._wrap.changes.push(changedBlock),flatRecord._wrap.syncStatus!==TQ.sync.TQRecord.SYNCHRONISED)?void 0:flatRecord._wrap.syncStatus=TQ.sync.TQRecord.AWAITING_SYNCHRONISATION},TempSync.saveTempChangesToStorage=function(){var dataQuery,dataStorage,key,objectsBeenUpdatedDuringSync,queueStorage,tempChanges,tempData,_this=this;tempChanges=_.clone(this.tempStore),dataStorage=TQ.store.Storage.getStorage(TQ.config.Core.DATA_STORAGE_NAME),queueStorage=TQ.store.Storage.getStorage(TQ.config.Core.QUEUE_STORAGE_NAME),objectsBeenUpdatedDuringSync=!1;for(key in tempChanges)tempData=tempChanges[key],tempData.actual&&(objectsBeenUpdatedDuringSync=!0,dataQuery=TQ.sync.LocalIdManager.replaceLocalIdsInQuery({objectApiName:tempData.objectApiName,where:{Id:{$eq:key}}}),dataStorage.find(dataQuery).done(function(records){var flatRecord;return!_.isEmpty(records)&&records.length>0?(flatRecord=records[0],_this.applyTempChangesToFlatRecord(tempData,flatRecord),dataStorage.upsert(tempData.objectApiName,flatRecord).done(function(){var qItem;return qItem={Id:flatRecord.Id,objectApiName:flatRecord._wrap.objectApiName},queueStorage.upsert(TQ.config.Core.QUEUE_STORE_NAME,qItem)})):void 0}));return setTimeout(function(){return objectsBeenUpdatedDuringSync?TQ.status.SyncStatus.updateWithValuesFromQueue():void 0},1e3),this.cleanTempStore()},TempSync}()}})}),define("acnCore/sync/uploadresult",[],function(){var UploadResult;return namespace({TQ:{sync:UploadResult=function(){function UploadResult(tqUploadResponse){var tqUploadResponseItem,_i,_len,_ref;if(tqUploadResponse)for(this.tqUploadResponse=tqUploadResponse,this.totalCount=tqUploadResponse.body.length,_ref=tqUploadResponse.body,_i=0,_len=_ref.length;_len>_i;_i++)tqUploadResponseItem=_ref[_i],tqUploadResponseItem.success?this.successCount++:tqUploadResponseItem.operation===TQ.sync.SyncEngine.DELETE_OPERATION&&tqUploadResponseItem.errorList[0]&&tqUploadResponseItem.errorList[0]===TQ.sync.UploadResult.ENTITY_IS_DELETED?this.successCount++:this.errorCount++}return UploadResult.ENTITY_IS_DELETED="entity is deleted",UploadResult.prototype.totalCount=0,UploadResult.prototype.successCount=0,UploadResult.prototype.errorCount=0,UploadResult.prototype.tqUploadResponse=null,UploadResult}()}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/sync/syncengine",["acnCore/base/haserrorstatus","acnCore/metadata/metadata","acnCore/sync/tqdownloadservice","acnCore/sync/tquploadservice","acnCore/sync/cacher","acnCore/rest/provider","acnCore/sync/trackedobjectsyncstatus","acnCore/sync/localidmanager","acnCore/config/core","acnCore/sync/tqrecord","acnCore/sync/tempsync","acnCore/device/connection","acnCore/sync/uploadresult","acnCore/util/generic","acnCore/device/platform","acnCore/log/logger","acnCore/store/querybuilder"],function(){var SyncEngine,_ref;return namespace({TQ:{sync:SyncEngine=function(_super){function SyncEngine(){return _ref=SyncEngine.__super__.constructor.apply(this,arguments)}return __extends(SyncEngine,_super),SyncEngine.OFFLINE=-8,SyncEngine.NO_SYNC_REQUIRED=0,SyncEngine.STORAGE_ERROR=-1,SyncEngine.DOWNLOAD_REQUEST_ERROR=-2,SyncEngine.DOWNLOAD_RESPONSE_STATUS_ERROR=-3,SyncEngine.DOWNLOAD_OBJECT_ERROR=-4,SyncEngine.DOWNLOAD_OBJECT_PAGE_ERROR=-5,SyncEngine.DOWNLOAD_RESPONSE_ITEM_STATUS_ERROR=-6,SyncEngine.DOWNLOAD_CACHER_ERROR=-7,SyncEngine.NO_UPLOAD_REQUIRED=0,SyncEngine.UPLOAD_RESPONSE_STATUS_ERROR=-31,SyncEngine.UPLOAD_REQUEST_ERROR=-32,SyncEngine.UPLOAD_PROCESS_RESPONSE_ERROR=-33,SyncEngine.UPLOAD_ERROR_CREATING_TQUPLOADREQUEST=-34,SyncEngine.UPLOAD_ERROR_APPLYING_DELETION=-35,SyncEngine.UPLOAD_ERROR_APPLYING_UPSERT=-36,SyncEngine.UPLOAD_ERROR_UPDATING_QUEUE=-37,SyncEngine.UPSERT_OPERATION="UPSERT",SyncEngine.DELETE_OPERATION="DELETE",SyncEngine.CLASS_LOCALSTORAGE_NAMESPACE="SyncEngine_",SyncEngine.type={ACTIVATION:"ACTIVATION",INCREMENTAL_OR_NONE:"INCREMENTAL_OR_NONE"},SyncEngine.ACTIVATION_CANCELLED=!1,SyncEngine.initStorage=function(){return this._dataStorage=TQ.store.Storage.getStorage(TQ.config.Core.DATA_STORAGE_NAME),this._queueStorage=TQ.store.Storage.getStorage(TQ.config.Core.QUEUE_STORAGE_NAME)},SyncEngine._dataStorage=null,SyncEngine._queueStorage=null,SyncEngine._syncDeferred=null,SyncEngine._tqDownloadResponse=null,SyncEngine._recordTotalCount=0,SyncEngine._recordProgressSum=0,SyncEngine.errorStatus=TQ.util.Generic.initializeClassProperty(SyncEngine.CLASS_LOCALSTORAGE_NAMESPACE,"errorStatus",null),SyncEngine.trackedObjectsSyncStatusList=[],SyncEngine.getDownloadProgressPercent=function(){return 0!==this._recordTotalCount?this._recordProgressSum/this._recordTotalCount*100:null},SyncEngine.cancelActivation=function(){return this.ACTIVATION_CANCELLED=!0},SyncEngine.startSync=function(){var _this=this;return this._syncDeferred=$.Deferred(),TQ.status.AppStatus.isOnline()?(this.ACTIVATION_CANCELLED=!1,this._getDownloadDescriptor()?this._triggerAndHandleSyncExecutionResult(this._syncDeferred):this._getDownloadDescriptorFromServer().done(function(){var syncType;return syncType=_this._calculateSyncType(),syncType===_this.type.ACTIVATION?TQ.status.AppStatus.activated===!1?_this._triggerAndHandleSyncExecutionResult(_this._syncDeferred):(TQ.status.AppStatus.setActivated(!1),_this._syncDeferred.resolve(_this.type.ACTIVATION)):_this._triggerAndHandleSyncExecutionResult(_this._syncDeferred)}).fail(function(err){return _this._syncDeferred.reject(err)})):this._syncDeferred.reject("OFFLINE"),this._syncDeferred},SyncEngine._getDownloadDescriptorFromServer=function(){var checkSyncTypeDeferred,tqDownloadRequest,_this=this;return checkSyncTypeDeferred=$.Deferred(),this.trackedObjectsSyncStatusList=this._initTrackedObjectsSyncStatusList(),tqDownloadRequest=TQ.sync.TQDownloadService.generateTQDownloadRequest(this.trackedObjectsSyncStatusList),this._sendDownloadRequestToServer(tqDownloadRequest).done(function(response){return _this._saveDownloadDescriptor(response),checkSyncTypeDeferred.resolve()}).fail(function(err){var error;return error={error:err,errorCode:_this.DOWNLOAD_REQUEST_ERROR},_this._setErrorStatusAndLogIt({error:error.error,errorCode:error.errorCode,namespace:TQ.log.Logger.tags.SYNC}),checkSyncTypeDeferred.reject(error)}),checkSyncTypeDeferred},SyncEngine._executeSync=function(){var syncExecutionDeferred,_this=this;return syncExecutionDeferred=$.Deferred(),this._resetProgressPercent(),$.when(this._upload()).done(function(uploadResult){return _this.cleanAssignments(),$.when(_this._download()).done(function(downloadResult){var successDetails;return successDetails={uploadResult:uploadResult,downloadResult:downloadResult},syncExecutionDeferred.resolve(successDetails)}).fail(function(err){return syncExecutionDeferred.reject(err)})}).fail(function(err){return syncExecutionDeferred.reject(err)}),$.when(syncExecutionDeferred).always(function(){return TQ.sync.TempSync.saveTempChangesToStorage()}),syncExecutionDeferred},SyncEngine._triggerAndHandleSyncExecutionResult=function(_syncDeferred){var _this=this;return this._executeSync().done(function(successDetails){return TQ.status.AppStatus.setActivated(!0),_this._clearErrorStatus(),_this._clearDownloadDescriptor(),TQ.log.Logger.log({message:"sync:success",details:successDetails}),_syncDeferred.resolve(successDetails.uploadResult)}).fail(function(err){return _syncDeferred.reject(err)})},SyncEngine.immediateUpload=function(tqRecordList){var tqUploadRequest,uploadDeferred,uploadResult,_this=this;return uploadDeferred=$.Deferred(),tqUploadRequest=TQ.sync.TQUploadService.generateUploadRequestWithItems(tqRecordList),uploadResult=new TQ.sync.UploadResult,tqUploadRequest?this._sendUploadRequestToServer(tqUploadRequest).done(function(response){var error;return response.status>=0?uploadDeferred.resolve(response):(error={error:response,errorCode:_this.UPLOAD_RESPONSE_STATUS_ERROR},_this._setErrorStatusAndLogIt({error:error.error,errorCode:error.errorCode,namespace:TQ.log.Logger.tags.SYNC}),uploadDeferred.reject(error))}).fail(function(err){var error;return error={error:err,errorCode:_this.UPLOAD_REQUEST_ERROR},_this._setErrorStatusAndLogIt({error:error.error,errorCode:error.errorCode,namespace:TQ.log.Logger.tags.SYNC}),uploadDeferred.reject(error)}):uploadDeferred.resolve(uploadResult),uploadDeferred},SyncEngine.cleanAssignments=function(){var request;return request={deviceId:TQ.status.AppStatus.deviceId},TQ.rest.Provider.rest("/tqassignment","POST",JSON.stringify(request))},SyncEngine.flushQueue=function(){return this._upload();
},SyncEngine._upload=function(objectApiNameList){var uploadDeferred,_this=this;return uploadDeferred=$.Deferred(),TQ.sync.TQUploadService.generateTQUploadRequest(objectApiNameList).done(function(tqUploadRequest){return tqUploadRequest?_this._sendUploadRequestToServer(tqUploadRequest).done(function(response){var error;return response.status>=0?(_this._applyTQUploadResponse(response).done(function(uploadResult){return uploadDeferred.resolve(uploadResult)}).fail(function(err){return uploadDeferred.reject(err)}),TQ.sync.TQUploadService.setUploadedElaboratedFields(response)):(error={error:response,errorCode:_this.UPLOAD_RESPONSE_STATUS_ERROR},_this._setErrorStatusAndLogIt({error:error.error,errorCode:error.errorCode,namespace:TQ.log.Logger.tags.SYNC}),uploadDeferred.reject(error))}).fail(function(err){var error;return error={error:err,errorCode:_this.UPLOAD_REQUEST_ERROR},_this._setErrorStatusAndLogIt({error:error.error,errorCode:error.errorCode,namespace:TQ.log.Logger.tags.SYNC}),uploadDeferred.reject(error)}):uploadDeferred.resolve(_this.NO_UPLOAD_REQUIRED)}).fail(function(err){return uploadDeferred.reject(err)}),$.when(uploadDeferred).always(function(){return TQ.sync.TQUploadService.cleanElaboratedFields()}),uploadDeferred},SyncEngine._sendUploadRequestToServer=function(request){return TQ.rest.Provider.rest("/tqupload","POST",request)},SyncEngine._applyTQUploadResponse=function(tqUploadResponse){var applyDeferred,applyRecordChangesDeferredList,flatRecord,localTQRecord,queueIdsToRemove,tqUploadRequestItemList,tqUploadResponseItem,tqUploadResponseItemList,_i,_j,_len,_len1,_this=this;for(applyDeferred=$.Deferred(),tqUploadResponseItemList=tqUploadResponse.body,tqUploadRequestItemList=store.get(this.CLASS_LOCALSTORAGE_NAMESPACE+"TQUploadRequestTQRecordList"),TQ.sync.LocalIdManager.saveIdReplacementMap(tqUploadResponse),_i=0,_len=tqUploadRequestItemList.length;_len>_i;_i++)flatRecord=tqUploadRequestItemList[_i],flatRecord._wrap&&(flatRecord._wrap.errorList=[]);for(applyRecordChangesDeferredList=[],queueIdsToRemove=[],_j=0,_len1=tqUploadResponseItemList.length;_len1>_j;_j++)tqUploadResponseItem=tqUploadResponseItemList[_j],localTQRecord=_.findWhere(tqUploadRequestItemList,{Id:tqUploadResponseItem.requestId}),-1===_.indexOf(queueIdsToRemove,tqUploadResponseItem.requestId)&&queueIdsToRemove.push(tqUploadResponseItem.requestId),tqUploadResponseItem.operation===this.UPSERT_OPERATION?applyRecordChangesDeferredList.push(this._processUpsertTQUploadResponseItem(tqUploadResponseItem,localTQRecord)):applyRecordChangesDeferredList.push(this._processRemoveTQUploadResponseItem(tqUploadResponseItem,localTQRecord));return $.when.apply($,applyRecordChangesDeferredList).done(function(){var removeQueueDefList,_k,_len2;for(removeQueueDefList=[],_k=0,_len2=tqUploadRequestItemList.length;_len2>_k;_k++)flatRecord=tqUploadRequestItemList[_k],_.isEmpty(flatRecord._wrap.changes)&&removeQueueDefList.push(_this._queueStorage.remove(TQ.config.Core.QUEUE_STORE_NAME,flatRecord.Id));return $.when.apply($,removeQueueDefList).done(function(){var uploadResult;return uploadResult=new TQ.sync.UploadResult(tqUploadResponse),applyDeferred.resolve(uploadResult)}).fail(function(err){var error;return error={error:err,errorCode:this.UPLOAD_ERROR_UPDATING_QUEUE},this._setErrorStatusAndLogIt({error:error.error,errorCode:error.errorCode,namespace:TQ.log.Logger.tags.SYNC}),applyDeferred.reject(error)})}).fail(function(err){var error;return error={error:err,errorCode:_this.UPLOAD_PROCESS_RESPONSE_ERROR},_this._setErrorStatusAndLogIt({error:error.error,errorCode:error.errorCode,namespace:TQ.log.Logger.tags.SYNC}),applyDeferred.reject(error)}),applyDeferred},SyncEngine._processUpsertTQUploadResponseItem=function(tqUploadResponseItem,localTQRecord){var processUpsertTQUploadResponseItemDeferred,removeDeferred,toUpsertTQRecord,upsertIntoDataStorageDeferred,_this=this;return processUpsertTQUploadResponseItemDeferred=$.Deferred(),toUpsertTQRecord=null,toUpsertTQRecord=TQ.sync.TQRecord.cloneRecordWithFieldUpdates(localTQRecord,tqUploadResponseItem.record),toUpsertTQRecord=this._updateWrap(toUpsertTQRecord,tqUploadResponseItem),upsertIntoDataStorageDeferred=this._dataStorage.upsert(tqUploadResponseItem.objectApiName,toUpsertTQRecord),removeDeferred=null,tqUploadResponseItem.requestId===tqUploadResponseItem.responseId||_.isEmpty(tqUploadResponseItem.responseId)||(removeDeferred=this._dataStorage.remove(tqUploadResponseItem.objectApiName,tqUploadResponseItem.requestId)),$.when(upsertIntoDataStorageDeferred,removeDeferred).done(function(){var recordIdIfFailed;return tqUploadResponseItem.success||(recordIdIfFailed=tqUploadResponseItem.requestId),processUpsertTQUploadResponseItemDeferred.resolve(recordIdIfFailed)}).fail(function(err){return processUpsertTQUploadResponseItemDeferred.reject({errorCode:_this.UPLOAD_ERROR_APPLYING_UPSERT,error:err})}),processUpsertTQUploadResponseItemDeferred},SyncEngine._updateWrap=function(toUpsertTQRecord,tqUploadResponseItem){var responseItemDate;return tqUploadResponseItem.executed&&(tqUploadResponseItem.success?(toUpsertTQRecord._wrap.syncStatus=TQ.sync.TQRecord.SYNCHRONISED,toUpsertTQRecord._wrap.errorList=[],_.isArray(toUpsertTQRecord._wrap.changes)&&!_.isEmpty(toUpsertTQRecord._wrap.changes)&&toUpsertTQRecord._wrap.changes.shift()):(toUpsertTQRecord._wrap.syncStatus=TQ.sync.TQRecord.SYNC_ERROR,_.isArray(toUpsertTQRecord._wrap.errorList)||(toUpsertTQRecord._wrap.errorList=[]),toUpsertTQRecord._wrap.errorList=_.union(toUpsertTQRecord._wrap.errorList,tqUploadResponseItem.errorList)),responseItemDate=new Date(tqUploadResponseItem.changeDate),_.isNaN(responseItemDate.getTime())&&(responseItemDate=new Date),toUpsertTQRecord._wrap.lastModifiedDateTime=responseItemDate),toUpsertTQRecord},SyncEngine._processRemoveTQUploadResponseItem=function(tqUploadResponseItem,flatTQRecord){var processRemoveTQUploadResponseItemDeferred,_this=this;return processRemoveTQUploadResponseItemDeferred=$.Deferred(),this._dataStorage.remove(tqUploadResponseItem.objectApiName,tqUploadResponseItem.requestId).done(function(){return _this._queueStorage.remove(TQ.config.Core.QUEUE_STORE_NAME,tqUploadResponseItem.requestId).done(function(){return TQ.util.Generic.usesFileSystem(flatTQRecord._wrap)&&TQ.device.Platform.isDevice()?TQ.device.File.remove(flatTQRecord.Name,flatTQRecord.Id).always(function(){return processRemoveTQUploadResponseItemDeferred.resolve()}):processRemoveTQUploadResponseItemDeferred.resolve()}).fail(function(err){return processRemoveTQUploadResponseItemDeferred.reject({errorCode:_this.UPLOAD_ERROR_APPLYING_DELETION,error:err})})}).fail(function(err){return processRemoveTQUploadResponseItemDeferred.reject({errorCode:_this.UPLOAD_ERROR_APPLYING_DELETION,error:err})}),processRemoveTQUploadResponseItemDeferred},SyncEngine._download=function(){var downloadDeferred,_this=this;return downloadDeferred=$.Deferred(),this._getDownloadDescriptor().status>=0?(this._calculateRecordTotalCount(this._getDownloadDescriptor()),this._updateTrackedObjectSyncStatusListGivenDownloadResponse(this._getDownloadDescriptor().body),$.when(this._downloadObjectListData(this.trackedObjectsSyncStatusList)).done(function(){return _this._doIhaveToProcessSomething(_this.trackedObjectsSyncStatusList)?_this._processDownloadSuccess(_this.trackedObjectsSyncStatusList).done(function(){return downloadDeferred.resolve(_this._getDownloadDescriptor().body)}).fail(function(err){return downloadDeferred.reject(err)}):downloadDeferred.resolve(_this.NO_SYNC_REQUIRED)}).fail(function(err){return _this._processDownloadError(_this._getDownloadDescriptor(),err).done(function(){return downloadDeferred.reject(err)}).fail(function(cacherErr){var error;return error={downloadError:err,cacherError:cacherErr},downloadDeferred.reject(error)})})):(this._setErrorStatusAndLogIt({errorCode:this.DOWNLOAD_RESPONSE_STATUS_ERROR,namespace:TQ.log.Logger.tags.SYNC}),downloadDeferred.reject(this.DOWNLOAD_RESPONSE_STATUS_ERROR)),downloadDeferred},SyncEngine._downloadObjectListData=function(downloadResponseItemList){return this.__downloadObjectListData(downloadResponseItemList,0,$.Deferred())},SyncEngine.__downloadObjectListData=function(downloadResponseItemList,objectIndex,downloadObjectDataListDeferred){var _this=this;return objectIndex===downloadResponseItemList.length?downloadObjectDataListDeferred.resolve():this._downloadObjectData(downloadResponseItemList[objectIndex]).done(function(){return _this.__downloadObjectListData(downloadResponseItemList,objectIndex+1,downloadObjectDataListDeferred)}).fail(function(err){return downloadObjectDataListDeferred.reject(err)}),downloadObjectDataListDeferred},SyncEngine._downloadObjectData=function(downloadResponseItem){var downloadObjectDataDeferred,error,trackedObjectSyncStatus;return downloadObjectDataDeferred=$.Deferred(),trackedObjectSyncStatus=this._getTrackedObjectSyncStatus(downloadResponseItem.objectApiName),downloadResponseItem.status>=0?"NONE"!==downloadResponseItem.syncType?(trackedObjectSyncStatus.setSyncStatus({syncStatus:TQ.sync.TrackedObjectSyncStatus.DOWNLOAD_STARTED}),this._downloadObjectPageList(downloadResponseItem).done(function(){return trackedObjectSyncStatus.setSyncStatus({syncStatus:TQ.sync.TrackedObjectSyncStatus.DOWNLOAD_READY_FOR_COMMIT}),downloadObjectDataDeferred.resolve()}).fail(function(err){return trackedObjectSyncStatus.setSyncStatus({syncStatus:TQ.sync.TrackedObjectSyncStatus.DOWNLOAD_ERROR,downloadError:err}),downloadObjectDataDeferred.reject(err)})):(trackedObjectSyncStatus.setSyncStatus({syncStatus:TQ.sync.TrackedObjectSyncStatus.SYNCHRONISED}),downloadObjectDataDeferred.resolve()):(error={errorCode:this.DOWNLOAD_RESPONSE_ITEM_STATUS_ERROR,error:downloadResponseItem.error},this._setErrorStatusAndLogIt({error:error.error,errorCode:error.errorCode,namespace:TQ.log.Logger.tags.SYNC}),trackedObjectSyncStatus.setSyncStatus({syncStatus:TQ.sync.TrackedObjectSyncStatus.DOWNLOAD_ERROR,downloadError:error}),downloadObjectDataDeferred.reject(error)),downloadObjectDataDeferred},SyncEngine._downloadObjectPageList=function(downloadResponseItem){return this.__downloadObjectPageList(downloadResponseItem,null,$.Deferred())},SyncEngine.__downloadObjectPageList=function(downloadResponseItem,nextRecordsUrl,downloadObjectPagesDeferred){var trackedObjectSyncStatus,_this=this;return trackedObjectSyncStatus=this._getTrackedObjectSyncStatus(downloadResponseItem.objectApiName),this.ACTIVATION_CANCELLED&&downloadObjectPagesDeferred.reject({error:"User cancelled sync"}),this._sendObjectPageDownloadRequestToServer(downloadResponseItem,nextRecordsUrl).done(function(response){var tqRecordList;return response.done&&0===response.totalSize?downloadObjectPagesDeferred.resolve():(tqRecordList=_this._wrapRecordList(response.records,downloadResponseItem.objectApiName),_this._cachePage(downloadResponseItem.objectApiName,tqRecordList).done(function(){return _this._updateDownloadProgressPercentage(tqRecordList.length,_this._syncDeferred),response.done?downloadObjectPagesDeferred.resolve():response.done?void 0:(trackedObjectSyncStatus.setSyncStatus({syncStatus:TQ.sync.TrackedObjectSyncStatus.DOWNLOAD_PAGING,nextRecordsUrl:response.nextRecordsUrl}),_this.__downloadObjectPageList(downloadResponseItem,response.nextRecordsUrl,downloadObjectPagesDeferred))}).fail(function(err){return downloadObjectPagesDeferred.resolve(err)}))}).fail(function(err){var error;return error={errorCode:_this.DOWNLOAD_OBJECT_PAGE_ERROR,error:err},_this._setErrorStatusAndLogIt({error:error.error,errorCode:error.errorCode,namespace:TQ.log.Logger.tags.SYNC}),downloadObjectPagesDeferred.reject(error)}),downloadObjectPagesDeferred},SyncEngine._sendDownloadRequestToServer=function(request){return TQ.rest.Provider.rest("/tqdownload","POST",request)},SyncEngine._sendObjectPageDownloadRequestToServer=function(downloadResponseItem,nextRecordsUrl){return nextRecordsUrl?this._sendObjectNextPageDownloadRequestToServer(nextRecordsUrl):this._sendObjectDownloadRequestToServer(downloadResponseItem.query)},SyncEngine._sendObjectDownloadRequestToServer=function(query){return TQ.rest.Provider.queryAll(query)},SyncEngine._sendObjectNextPageDownloadRequestToServer=function(nextRecordsUrl){return TQ.rest.Provider.queryMore(nextRecordsUrl)},SyncEngine._processDownloadSuccess=function(){var excludeItemsList,filteredTrackedObjectsSyncStatusList,trackedObjectSyncStatus,_i,_len,_processDownloadSuccessDef,_ref1,_this=this;for(filteredTrackedObjectsSyncStatusList=[],_ref1=this.trackedObjectsSyncStatusList,_i=0,_len=_ref1.length;_len>_i;_i++)trackedObjectSyncStatus=_ref1[_i],trackedObjectSyncStatus.syncType!==TQ.sync.Cacher.NO_SYNC_REQUIRED&&filteredTrackedObjectsSyncStatusList.push(trackedObjectSyncStatus);return _processDownloadSuccessDef=$.Deferred(),excludeItemsList=null,this._queueStorage.find({objectApiName:TQ.config.Core.QUEUE_STORE_NAME}).then(function(queueItems){var excludeIdList;return _.isArray(queueItems)&&(excludeIdList=_.pluck(queueItems,"Id")),TQ.sync.Cacher.processDownloadSuccess(filteredTrackedObjectsSyncStatusList,excludeIdList).done(function(){var _j,_len1,_ref2;for(_ref2=_this.trackedObjectsSyncStatusList,_j=0,_len1=_ref2.length;_len1>_j;_j++)trackedObjectSyncStatus=_ref2[_j],trackedObjectSyncStatus.setSyncStatus({syncStatus:TQ.sync.TrackedObjectSyncStatus.SYNCHRONISED});return _processDownloadSuccessDef.resolve()}).fail(function(err){return _processDownloadSuccessDef.reject(err)})},function(err){return _processDownloadSuccessDef.reject(err)}),_processDownloadSuccessDef},SyncEngine.downloadFromServerAndCache=function(objectApiName,whereCondition){var downloadFromServerAndCacheDef,excludeFields,fieldNameList,kickOffCustomSync,objectMetadata,query,upsertData,_this=this;return downloadFromServerAndCacheDef=$.Deferred(),objectMetadata=TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName),_.isEmpty(objectMetadata)?syncDeferred.reject("NO OBJECT METADATA"):(fieldNameList=_.pluck(objectMetadata.modelDescribe.fields,"name"),excludeFields=["LastReferencedDate","LastActivityDate","LastViewedDate"],fieldNameList=_.difference(fieldNameList,excludeFields),query="SELECT "+fieldNameList.join(", ")+" FROM "+objectApiName,_.isEmpty(whereCondition)||(query+=" WHERE "+whereCondition),upsertData=function(records,objectApiName){var tqRecordList,upsertedThisPage;return TQ.config.Core.onlineOnlyEnabled?$.Deferred().resolve():(upsertedThisPage=$.Deferred(),tqRecordList=_this._wrapRecordList(records,objectApiName),_this._dataStorage.upsert(objectApiName,tqRecordList).done(function(){return upsertedThisPage.resolve(tqRecordList)}).fail(function(err){return upsertedThisPage.reject(err)}),upsertedThisPage)},kickOffCustomSync=function(query,nextRecordsUrl){var obj;return obj={},obj.query=query,_this._sendObjectPageDownloadRequestToServer(obj,nextRecordsUrl).done(function(response){var upsertDeferred;return upsertDeferred=upsertData(response.records,objectApiName),response.done?downloadFromServerAndCacheDef.resolve(response.records):upsertDeferred.then(function(){return kickOffCustomSync(query,response.nextRecordsUrl)})}).fail(function(err){return downloadFromServerAndCacheDef.reject(err)})},kickOffCustomSync(query),downloadFromServerAndCacheDef)},SyncEngine.directServerQuery=function(query){var callQueryOnServer,objectApiName,resultArray,soqlQuery,syncEngineDeferred,_this=this;return syncEngineDeferred=$.Deferred(),objectApiName=query.objectApiName,soqlQuery=TQ.store.QueryBuilder.generateSqlQueryString(query,[],!0),resultArray=[],callQueryOnServer=function(query,nextRecordsUrl){var obj;return obj={query:soqlQuery},_this._sendObjectPageDownloadRequestToServer(obj,nextRecordsUrl).done(function(response){var fieldName,fieldType,flatRecord,flatRecordList,tqRecord,value,_i,_len,_ref1;for(flatRecordList=_this._wrapRecordList(response.records,objectApiName),_i=0,_len=flatRecordList.length;_len>_i;_i++){flatRecord=flatRecordList[_i],tqRecord=TQ.sync.TQRecord.flatWrapToExpandedWrap(flatRecord),_ref1=tqRecord.rawRecord;for(fieldName in _ref1)value=_ref1[fieldName],value&&(fieldType=TQ.metadata.Metadata.getFieldType(objectApiName,fieldName),("date"===fieldType||"datetime"===fieldType)&&(tqRecord.rawRecord[fieldName]=TQ.store.Storage.convertToDate(value)));resultArray.push(tqRecord)}return response.done||null===response.nextRecordsUrl?syncEngineDeferred.resolve(resultArray):callQueryOnServer(query,response.nextRecordsUrl)}).fail(function(err){return syncEngineDeferred.reject(err)})},callQueryOnServer(soqlQuery),syncEngineDeferred},SyncEngine.directServerCountQuery=function(query){var soqlQueryString,syncEngineDeferred;return syncEngineDeferred=$.Deferred(),soqlQueryString=TQ.store.QueryBuilder.generateCountQueryString(query,[],!0),TQ.rest.Provider.query(soqlQueryString).done(function(response){return syncEngineDeferred.resolve(response.totalSize)}).fail(function(err){return syncEngineDeferred.reject(err)}),syncEngineDeferred},SyncEngine._processDownloadError=function(downloadResponse,err){return TQ.sync.Cacher.processDownloadError(downloadResponse,err)},SyncEngine._cachePage=function(objectApiName,batch){return TQ.sync.Cacher.cachePage(objectApiName,batch)},SyncEngine._doIhaveToProcessSomething=function(downloadResponseItemList){var downloadResponseItem,_i,_len;for(_i=0,_len=downloadResponseItemList.length;_len>_i;_i++)if(downloadResponseItem=downloadResponseItemList[_i],downloadResponseItem.syncType!==TQ.sync.Cacher.NO_SYNC_REQUIRED)return!0;return!1},SyncEngine._updateTrackedObjectSyncStatusListGivenDownloadResponse=function(downloadResponseItemList){var downloadResponseItem,trackedObjectsSyncStatus,_i,_len,_results;for(_results=[],_i=0,_len=downloadResponseItemList.length;_len>_i;_i++)downloadResponseItem=downloadResponseItemList[_i],_results.push(function(){var _j,_len1,_ref1,_results1;for(_ref1=this.trackedObjectsSyncStatusList,_results1=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)trackedObjectsSyncStatus=_ref1[_j],trackedObjectsSyncStatus.objectApiName===downloadResponseItem.objectApiName?_results1.push(trackedObjectsSyncStatus.updateGivenDownloadResponseItem(downloadResponseItem)):_results1.push(void 0);return _results1}.call(this));return _results},SyncEngine._getTrackedObjectSyncStatus=function(objectApiName){var trackedObjectsSyncStatus,_i,_len,_ref1;for(_ref1=this.trackedObjectsSyncStatusList,_i=0,_len=_ref1.length;_len>_i;_i++)if(trackedObjectsSyncStatus=_ref1[_i],trackedObjectsSyncStatus.objectApiName===objectApiName)return trackedObjectsSyncStatus;return null},SyncEngine._wrapRecordList=function(rawRecordList,objectApiName){var rawRecord,tqRecordList,_i,_len;for(tqRecordList=[],_i=0,_len=rawRecordList.length;_len>_i;_i++)rawRecord=rawRecordList[_i],tqRecordList.push(TQ.sync.TQRecord.rawRecordToFlatWrap(rawRecord,objectApiName));return tqRecordList},SyncEngine._resetProgressPercent=function(){return this._recordTotalCount=0,this._recordProgressSum=0},SyncEngine._calculateRecordTotalCount=function(response){var downloadResponseItem,_i,_len,_ref1,_results;for(_ref1=response.body,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)downloadResponseItem=_ref1[_i],_results.push(this._recordTotalCount+=downloadResponseItem.recordCount);return _results},SyncEngine._updateDownloadProgressPercentage=function(cachedPageSize,_syncDeferred){return this._recordProgressSum+=cachedPageSize,TQ.log.Logger.log("download:progress: "+this.getDownloadProgressPercent()),_syncDeferred?_syncDeferred.notify(this.getDownloadProgressPercent()):void 0},SyncEngine._getDownloadDescriptor=function(){return this._tqDownloadResponse},SyncEngine._getDownloadDescriptorForObject=function(objectApiName){var tqResponseItem,_i,_len,_ref1;for(_ref1=this._tqDownloadResponse.body,_i=0,_len=_ref1.length;_len>_i;_i++)if(tqResponseItem=_ref1[_i],tqResponseItem.objectApiName===objectApiName)return tqResponseItem},SyncEngine._saveDownloadDescriptor=function(descriptor){return this._tqDownloadResponse=descriptor},SyncEngine._clearDownloadDescriptor=function(){return this._tqDownloadResponse=null},SyncEngine._isDownloadDescriptorPresent=function(){return this._tqDownloadResponse?!0:!1},SyncEngine._calculateSyncType=function(){var tqResponseItem,_i,_len,_ref1;for(_ref1=this._tqDownloadResponse.body,_i=0,_len=_ref1.length;_len>_i;_i++)if(tqResponseItem=_ref1[_i],tqResponseItem.syncType===TQ.sync.Cacher.FULL_SYNC)return this.type.ACTIVATION;return this.type.INCREMENTAL_OR_NONE},SyncEngine._initTrackedObjectsSyncStatusList=function(){var trackedObject,trackedObjectSyncStatusList,_i,_len,_ref1;for(trackedObjectSyncStatusList=[],_ref1=TQ.metadata.Metadata.trackedObjectList,_i=0,_len=_ref1.length;_len>_i;_i++)trackedObject=_ref1[_i],trackedObjectSyncStatusList.push(new TQ.sync.TrackedObjectSyncStatus(trackedObject.objectApiName));return trackedObjectSyncStatusList},SyncEngine}(TQ.base.HasErrorStatus)}})}),define("acnCore/chatter/chattermetadata",["acnCore/device/platform","acnCore/rest/provider","acnCore/store/storage","acnCore/util/generic"],function(){var ChatterMetadata;return namespace({TQ:{chatter:ChatterMetadata=function(){function ChatterMetadata(){}return ChatterMetadata._chatterFeedItemTableDescription={objectApiName:"FeedItem",objectIndexList:{CreatedById:"reference",CreatedDate:"datetime",Id:"id",IsDeleted:"boolean",LastModifiedDate:"datetime",ParentId:"reference"}},ChatterMetadata._chatterFeedCommentTableDescription={objectApiName:"FeedComment",objectIndexList:{CreatedById:"reference",CreatedDate:"datetime",Id:"id",IsDeleted:"boolean",FeedItemId:"reference",ParentId:"reference"}},ChatterMetadata._chatterFeedLikeTableDescription={objectApiName:"FeedLike",objectIndexList:{Id:"id",IsDeleted:"boolean",FeedItemId:"reference",FeedEntityId:"reference",CreatedById:"reference"}},ChatterMetadata._chatterEntitySubscriptionTableDescription={objectApiName:"EntitySubscription",objectIndexList:{Id:"id",ParentId:"reference",SubscriberId:"reference"}},ChatterMetadata._chatterMessageTableDescription={objectApiName:"ChatterMessage",objectIndexList:{Id:"id",ConversationId:"reference",SenderId:"reference",SentDate:"datetime",Body:"string"}},ChatterMetadata.getChatterObjectMetadata=function(){return[this._chatterFeedItemTableDescription,this._chatterFeedCommentTableDescription,this._chatterFeedLikeTableDescription,this._chatterEntitySubscriptionTableDescription,this._chatterMessageTableDescription]},ChatterMetadata}()}})}),define("acnCore/user/userinfo",["acnCore/util/generic","acnCore/rest/provider","acnCore/store/storage","acnCore/status/syncstatus","acnCore/schedule/scheduler","acnCore/config/core"],function(){var UserInfo;return namespace({TQ:{user:UserInfo=function(){function UserInfo(){}return UserInfo.CLASS_LOCALSTORAGE_NAMESPACE="UserInfo_",UserInfo.initializeUserData=function(){var userData;return userData=store.get(this.CLASS_LOCALSTORAGE_NAMESPACE+"Data"),_.isEmpty(userData)?null:userData},UserInfo.initializeUserChatterPhotoData=function(){var userData;return userData=store.get(this.CLASS_LOCALSTORAGE_NAMESPACE+"ChatterPhotoData"),_.isEmpty(userData)?null:userData},UserInfo._initalizeEventHandlers=function(){var _this=this;return TQ.status.SyncStatus.onSyncStatusChange(function(){return _this.initialize()}),!0},UserInfo._userData=UserInfo.initializeUserData(),UserInfo._userChatterPhotoData=UserInfo.initializeUserChatterPhotoData(),UserInfo._eventHandlersInitalized=UserInfo._initalizeEventHandlers(),UserInfo._loadPromise=null,UserInfo._loadAvatarPromise=null,UserInfo._dataStorage=null,UserInfo.initialize=function(){var userQuery,_this=this;return userQuery={objectApiName:"User",where:{Id:{$eq:this.getUserId()}}},this._loadPromise||(this._loadPromise=$.Deferred()),TQ.sync.SmartSync.find(userQuery).done(function(records){return _this._userData=_.isEmpty(records)?null:records[0],_this._loadPromise&&_this._loadPromise.resolve(_this._userData),_this._saveUserData()}).fail(function(err){return _this._userData=null,_this._loadPromise&&_this._loadPromise.resolve(_this._userData),_this._saveUserData(),TQ.log.logger.error({namespace:"userinfo",message:"error initializing user data",error:err})}).always(function(){return _this._loadPromise=null})},UserInfo.getUserDataPromise=function(){return this._loadPromise||$.Deferred().resolve(this._userData)},UserInfo.getUserAvatarDataPromise=function(){var _this=this;return _.isEmpty(this._userChatterPhotoData)?(this._loadAvatarPromise||(this._loadAvatarPromise=$.Deferred(),TQ.chatter.ChatterEngine.downloadUserPhotoData().done(function(photoData){return TQ.user.UserInfo.updateUserChatterPhotoData(photoData),_this._loadAvatarPromise?_this._loadAvatarPromise.resolve(photoData):void 0}).fail(function(error){return _this._loadAvatarPromise?_this._loadAvatarPromise.reject(error):void 0}).always(function(){return _this._loadAvatarPromise=null})),this._loadAvatarPromise):$.when(this._userChatterPhotoData)},UserInfo.getUserId=function(){return TQ.rest.Provider.getUserId()},UserInfo.getUserFieldValue=function(fieldName){return _.isEmpty(this._userData)?null:this._userData.rawRecord[fieldName]},UserInfo.setUserFieldValue=function(fieldApiName,value){return this._userData.rawRecord[fieldApiName]=value,this._saveUserData(),TQ.sync.SmartSync.upsert(this._userData).done(function(){}).fail(function(err){return TQ.log.logger.error({namespace:"userinfo",message:"error saving field value",error:err})})},UserInfo.getUserName=function(){return this.getUserFieldValue("Name")},UserInfo.getUserEmail=function(){return this.getUserFieldValue("Email")},UserInfo.getUserAvatar=function(){return _.isEmpty(this._userChatterPhotoData)||_.isEmpty(this._userChatterPhotoData.standardEmailPhotoUrl)?_.isEmpty(this._userChatterPhotoData)||_.isEmpty(this._userChatterPhotoData.smallPhotoUrl)?this.getUserFieldValue("SmallPhotoUrl"):this._userChatterPhotoData.smallPhotoUrl:this._userChatterPhotoData.standardEmailPhotoUrl},UserInfo.getUserFullImage=function(){return _.isEmpty(this._userChatterPhotoData)||_.isEmpty(this._userChatterPhotoData.largePhotoUrl)?this.getUserFieldValue("FullPhotoUrl"):this._userChatterPhotoData.largePhotoUrl},UserInfo.updateUserChatterPhotoData=function(newPhotoData){return this._userChatterPhotoData=newPhotoData,this._saveUserChatterPhotoData()},UserInfo._saveUserData=function(){return store.set(this.CLASS_LOCALSTORAGE_NAMESPACE+"Data",this._userData)},UserInfo._saveUserChatterPhotoData=function(){return store.set(this.CLASS_LOCALSTORAGE_NAMESPACE+"ChatterPhotoData",this._userChatterPhotoData)},UserInfo}()}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/chatter/chatterrecord",["acnCore/sync/tqrecord","acnCore/util/generic","acnCore/user/userinfo"],function(){var ChatterRecord,_ref;return namespace({TQ:{chatter:ChatterRecord=function(_super){function ChatterRecord(){return _ref=ChatterRecord.__super__.constructor.apply(this,arguments)}return __extends(ChatterRecord,_super),ChatterRecord.apiFeedItemToFlatRecord=function(feedItemApiResponse){var chatterData,feedItem;return chatterData={},feedItem={_wrap:{}},feedItem.Id=feedItemApiResponse.id,feedItem.ParentId=_.isEmpty(feedItemApiResponse.parent)?null:feedItemApiResponse.parent.id,feedItem.Type=feedItemApiResponse.type,feedItem.CreatedById=feedItemApiResponse.actor.id,feedItem.InsertedById=feedItemApiResponse.actor.id,feedItem.CreatedDate=new Date(feedItemApiResponse.createdDate).getTime(),feedItem.IsDeleted=!1,feedItem.LastModifiedDate=new Date(feedItemApiResponse.modifiedDate).getTime(),feedItem.CommentCount=feedItemApiResponse.comments.total,feedItem.LikeCount=feedItemApiResponse.likes.total,feedItem.Body=_.isEmpty(feedItemApiResponse.body)?null:feedItemApiResponse.body.text,this._saveAttachmentDataToRecord(feedItemApiResponse.attachment,feedItem,chatterData),this._saveFeedEntityChatterData(feedItemApiResponse,chatterData),this._initWrap(feedItem,"FeedItem"),feedItem._wrap.chatterData=chatterData,feedItem},ChatterRecord._saveAttachmentDataToRecord=function(attachmentData,chatterRecord,chatterData){return chatterRecord.ContentData=null,chatterRecord.ContentFileName=null,chatterRecord.ContentDescription=null,chatterRecord.ContentType=null,chatterRecord.ContentSize=null,chatterRecord.LinkUrl=null,chatterRecord.Title=null,_.isEmpty(attachmentData)||("Content"===attachmentData.type&&(chatterRecord.ContentData=attachmentData.downloadUrl,chatterRecord.ContentFileName=attachmentData.title,_.isEmpty(attachmentData.fileExtension)||(chatterRecord.ContentFileName+="."+attachmentData.fileExtension),chatterRecord.ContentDescription=attachmentData.description,chatterRecord.ContentType=attachmentData.mimeType,chatterRecord.ContentSize=attachmentData.fileSize,chatterData.ContentTitle=attachmentData.title,chatterData.ContentThumbUrl=attachmentData.renditionUrl,chatterData.ContentChecksum=attachmentData.checksum),"Link"!==attachmentData.type)?void 0:(chatterRecord.LinkUrl=attachmentData.url,chatterRecord.Title=attachmentData.title)},ChatterRecord.apiFeedCommentToFlatRecord=function(feedCommentApiResponse){var attachmentData,chatterData,feedComment;return chatterData={},feedComment={_wrap:{}},feedComment.Id=feedCommentApiResponse.id,feedComment.FeedItemId=feedCommentApiResponse.feedItem.id,feedComment.ParentId=null,_.isEmpty(feedCommentApiResponse.parent)||(feedComment.ParentId=feedCommentApiResponse.parent.id),feedComment.CreatedById=feedCommentApiResponse.user.id,feedComment.CreatedDate=new Date(feedCommentApiResponse.createdDate),feedComment.CommentBody=null,_.isEmpty(feedCommentApiResponse.body)||(feedComment.CommentBody=feedCommentApiResponse.body.text),feedComment.IsDeleted=!1,feedComment.CommentType=feedCommentApiResponse.type,_.isEmpty(feedCommentApiResponse.attachment)||(attachmentData=feedCommentApiResponse.attachment,feedComment.RelatedRecordId=attachmentData.id,this._saveAttachmentDataToRecord(attachmentData,chatterData,chatterData)),_.isEmpty(feedCommentApiResponse.likes)||(chatterData.LikesCount=feedCommentApiResponse.likes.total),this._saveFeedEntityChatterData(feedCommentApiResponse,chatterData),this._initWrap(feedComment,"FeedComment"),feedComment._wrap.chatterData=chatterData,feedComment},ChatterRecord._saveFeedEntityChatterData=function(feedEntityApiResp,chatterData){var userData;return userData=_.isEmpty(feedEntityApiResp.actor)?feedEntityApiResp.user:feedEntityApiResp.actor,_.isEmpty(userData)||(chatterData.UserName=userData.name,chatterData.UserPhotoData=userData.photo),chatterData.IsDeleteRescticted=feedEntityApiResp.isDeleteRestricted,chatterData.LikedByCurrentUser=feedEntityApiResp.isLikedByCurrentUser===!0||!_.isEmpty(feedEntityApiResp.myLike),_.isEmpty(feedEntityApiResp.myLike)||(chatterData.CurrentUserLikeId=feedEntityApiResp.myLike.id),_.isEmpty(feedEntityApiResp.likesMessage)||(chatterData.LikesMessage=feedEntityApiResp.likesMessage.text),_.isEmpty(feedEntityApiResp.header)?void 0:chatterData.Header=feedEntityApiResp.header.text},ChatterRecord.apiFeedLikeToFlatRecord=function(feedEntityApiResponse,isFeedItemLike){var feedLike;return feedLike={_wrap:{}},feedLike.Id=feedEntityApiResponse.myLike.id,feedLike.FeedItemId=isFeedItemLike?feedEntityApiResponse.id:null,feedLike.FeedEntityId=feedEntityApiResponse.id,feedLike.CreatedById=TQ.user.UserInfo.getUserId(),feedLike.InsertedById=TQ.user.UserInfo.getUserId(),this._initWrap(feedLike,"FeedLike"),feedLike},ChatterRecord._defaultChatterData=function(chatterMessageData){var chatterData;return null==chatterMessageData&&(chatterMessageData=!1),chatterData={},chatterData.UserName=TQ.user.UserInfo.getUserName(),chatterData.UserPhotoData={fullEmailPhotoUrl:TQ.user.UserInfo.getUserFullImage(),largePhotoUrl:TQ.user.UserInfo.getUserFullImage(),photoVersionId:null,smallPhotoUrl:TQ.user.UserInfo.getUserAvatar(),standardEmailPhotoUrl:TQ.user.UserInfo.getUserAvatar(),url:TQ.user.UserInfo.getUserFullImage()},chatterMessageData||(chatterData.IsDeleteRescticted=!1,
chatterData.LikedByCurrentUser=!1,chatterData.CurrentUserLikeId=null,chatterData.LikesMessage=null,chatterData.Header=null),chatterData},ChatterRecord.setFeedItemDefaultValues=function(feedItem,parentRecordId){var chatterData,rawRecord;return rawRecord=this.isFlat(feedItem)?feedItem:feedItem.rawRecord,rawRecord.ParentId=parentRecordId,rawRecord.Type="TextPost",rawRecord.CreatedById=TQ.user.UserInfo.getUserId(),rawRecord.InsertedById=TQ.user.UserInfo.getUserId(),rawRecord.CreatedDate=(new Date).getTime(),rawRecord.IsDeleted=!1,rawRecord.LastModifiedDate=(new Date).getTime(),rawRecord.CommentCount=0,rawRecord.LikeCount=0,rawRecord.Body=null,rawRecord.Visibility="AllUsers",rawRecord.Title=null,chatterData=this._defaultChatterData(),this.isFlat(feedItem)?feedItem._wrap.chatterData=chatterData:feedItem.chatterData=chatterData,feedItem},ChatterRecord.setFeedCommentDefaultValues=function(feedComment,feedItemId){var chatterData,rawRecord;return rawRecord=this.isFlat(feedComment)?feedComment:feedComment.rawRecord,rawRecord.FeedItemId=feedItemId,rawRecord.ParentId=null,rawRecord.CreatedById=TQ.user.UserInfo.getUserId(),rawRecord.CreatedDate=(new Date).getTime(),rawRecord.CommentBody=null,rawRecord.IsDeleted=!1,rawRecord.CommentType="TextComment",chatterData=this._defaultChatterData(),this.isFlat(feedComment)?feedComment._wrap.chatterData=chatterData:feedComment.chatterData=chatterData,feedComment},ChatterRecord.setFeedLikeDefaultValues=function(feedLike,feedEntityId,isFeedItemLike){var rawRecord;return rawRecord=this.isFlat(feedLike)?feedLike:feedLike.rawRecord,rawRecord.FeedItemId=isFeedItemLike?feedEntityId:null,rawRecord.FeedEntityId=feedEntityId,rawRecord.CreatedById=TQ.user.UserInfo.getUserId(),rawRecord.InsertedById=TQ.user.UserInfo.getUserId(),feedLike},ChatterRecord.getRecordSubscription=function(recordId,userData){var subscription;return subscription={_wrap:{}},subscription.Id=recordId+"_"+userData.Id,subscription.ParentId=recordId,subscription.SubscriberId=userData.Id,this._initWrap(subscription,"EntitySubscription"),subscription._wrap.userData=userData,subscription},ChatterRecord.apiChatterMessageToFlatRecord=function(chatterMessageApi){var chatterData,chatterMessage,recipient,_i,_len,_ref1;for(chatterMessage={_wrap:{}},chatterMessage.Id=chatterMessageApi.id,chatterMessage.ConversationId=chatterMessageApi.conversationId,chatterMessageApi.body&&(chatterMessage.Body=chatterMessageApi.body.text),chatterMessage.SenderId=chatterMessageApi.sender.id,chatterMessage.SenderNetworkId=chatterMessageApi.sendingCommunity,chatterMessage.SentDate=new Date(chatterMessageApi.sentDate),this._initWrap(chatterMessage,"ChatterMessage"),chatterData={},chatterData.RecipientsIds=[],_ref1=chatterMessageApi.recipients,_i=0,_len=_ref1.length;_len>_i;_i++)recipient=_ref1[_i],recipient.id!==chatterMessage.SenderId&&chatterData.RecipientsIds.push(recipient.id);return chatterData.RecipientsString=chatterData.RecipientsIds.join(","),chatterData.SentByYou=TQ.user.UserInfo.getUserId()===chatterMessage.SenderId,chatterData.UserName=chatterMessageApi.sender.name,chatterData.UserPhotoData=chatterMessageApi.sender.photo,chatterMessage._wrap.chatterData=chatterData,chatterMessage},ChatterRecord}(TQ.sync.TQRecord)}})}),define("acnCore/chatter/chatterengine",["acnCore/device/platform","acnCore/rest/provider","acnCore/store/storage","acnCore/chatter/chatterrecord","acnCore/sync/cacher","acnCore/util/generic"],function(){var ChatterEngine;return namespace({TQ:{chatter:ChatterEngine=function(){function ChatterEngine(){}return ChatterEngine._MAX_PAGE_COUNT=50,ChatterEngine._CHATTER_BATCH_LIMIT=500,ChatterEngine._BATCH_RESULT_STATUS_SUCCESS=200,ChatterEngine._MAX_CONVERSATION_REPONSE_SIZE=100,ChatterEngine._USE_CUSTOM_GET_DELETED_METHOD=!1,ChatterEngine.CHATTER_ENGINE_STORE_PREFIX="ChatterEngine",ChatterEngine.FeedType={FeedTypeCompany:"company",FeedTypeNews:"news",FeedTypeGroups:"groups",FeedTypeFiles:"files",FeedTypePeople:"people",FeedTypeTo:"to",FeedTypeRecord:"record",FeedTypeUserProfile:"user-profile",FeedTypeBookmarked:"bookmarks"},ChatterEngine.initializeFeedUpdatesTokens=function(){var feedUpdatesTokens;return feedUpdatesTokens=store.get(this.CHATTER_ENGINE_STORE_PREFIX+"_FeedUpdatesTokens"),(_.isEmpty(feedUpdatesTokens)||TQ.config.Core.onlineOnlyEnabled)&&(feedUpdatesTokens={},store.set(this.CHATTER_ENGINE_STORE_PREFIX+"_FeedUpdatesTokens",feedUpdatesTokens)),feedUpdatesTokens},ChatterEngine.initializeLastTrackChatterUpdatesDate=function(){var dateValue;return TQ.config.Core.onlineOnlyEnabled?null:(dateValue=new Date(store.get(this.CHATTER_ENGINE_STORE_PREFIX+"_LastTrackChatterUpdatesDate")),_.isNaN(dateValue.getTime())||0===dateValue.getTime()?null:dateValue)},ChatterEngine._chatterSyncConfiguration=[{objectApiName:"FeedItem",syncType:"INC"},{objectApiName:"FeedComment",syncType:"INC"},{objectApiName:"FeedLike",syncType:"INC"},{objectApiName:"ChatterMessage",syncType:"INC"}],ChatterEngine._feedUpdatesTokens=ChatterEngine.initializeFeedUpdatesTokens(),ChatterEngine._lastTrackChatterUpdatesDate=ChatterEngine.initializeLastTrackChatterUpdatesDate(),ChatterEngine._dataStorage=null,ChatterEngine.initStorage=function(){var _this=this;return setTimeout(function(){return _this._dataStorage=TQ.store.Storage.getStorage(TQ.config.Core.DATA_STORAGE_NAME)},10)},ChatterEngine._onlineOnlyModeEnabled=function(){return TQ.config.Core.onlineOnlyEnabled},ChatterEngine._getFeedUpdatesToken=function(feedType,feedObjectId){var tokenKey,updatesToken;return tokenKey=feedType+(_.isEmpty(feedObjectId)?"":"_"+feedObjectId),updatesToken=this._feedUpdatesTokens[tokenKey]},ChatterEngine._saveFeedUpdatesToken=function(feedType,feedObjectId,updatesToken){var tokenKey;return tokenKey=feedType+(_.isEmpty(feedObjectId)?"":"_"+feedObjectId),this._feedUpdatesTokens[tokenKey]=updatesToken,this._onlineOnlyModeEnabled()?void 0:store.set(this.CHATTER_ENGINE_STORE_PREFIX+"_FeedUpdatesTokens",this._feedUpdatesTokens)},ChatterEngine._saveLastTrackChatterUpdatesDate=function(newDate){return this._lastTrackChatterUpdatesDate=newDate,this._onlineOnlyModeEnabled()?void 0:store.set(this.CHATTER_ENGINE_STORE_PREFIX+"_LastTrackChatterUpdatesDate",this._lastTrackChatterUpdatesDate)},ChatterEngine._getFeedDownloadUrl=function(feedType,feedObjectId,ignoreToken,pageSize,commentCount){var downloadUrl,updatesToken;return null==pageSize&&(pageSize=100),null==commentCount&&(commentCount=25),downloadUrl="/feeds/"+feedType,_.isEmpty(feedObjectId)||(downloadUrl+="/"+feedObjectId),downloadUrl+="/feed-elements",downloadUrl+="?recentCommentCount="+commentCount+"&pageSize="+pageSize,updatesToken=this._getFeedUpdatesToken(feedType,feedObjectId),_.isEmpty(updatesToken)||ignoreToken||(downloadUrl+="&updatedSince="+updatesToken),downloadUrl},ChatterEngine._getConversationUrl=function(conversationId,userId){return null==userId&&(userId="me"),"/users/"+userId+"/conversations/"+conversationId},ChatterEngine.syncChatterFeedUpdates=function(feedType,feedObjectId){var downloadDelay,feedObjects,syncDeferred,uploadDeferred,_this=this;return syncDeferred=$.Deferred(),feedObjects=["FeedItem","FeedComment","FeedLike"],uploadDeferred=this._onlineOnlyModeEnabled()?null:TQ.sync.SyncEngine._upload(feedObjects),downloadDelay=this._onlineOnlyModeEnabled()?0:1e3,$.when(uploadDeferred).done(function(uploadResponse){return setTimeout(function(){return _this.downloadChatterFeedUpdates(feedType,feedObjectId).done(function(downloadResponse){var chatterResponse;return chatterResponse=_.clone(downloadResponse),chatterResponse.uploaded=uploadResponse,syncDeferred.resolve(chatterResponse)}).fail(function(error){return syncDeferred.reject(error)}),downloadDelay})}).fail(function(error){return syncDeferred.reject(error)}),syncDeferred},ChatterEngine.syncChatterFeedCommentsUpdates=function(feedItemId){var feedObjects,syncDeferred,uploadDeferred,_this=this;return syncDeferred=$.Deferred(),feedObjects=["FeedItem","FeedComment","FeedLike"],uploadDeferred=this._onlineOnlyModeEnabled()?null:TQ.sync.SyncEngine._upload(feedObjects),$.when(uploadDeferred).done(function(){return _this._clearFeedItemCommentsAndLikes([feedItemId]).done(function(){return _this.downloadFeedItemComments(feedItemId).done(function(downloadResponse){return syncDeferred.resolve(downloadResponse)}).fail(function(error){return syncDeferred.reject(error)})})}).fail(function(error){return syncDeferred.reject(error)}),syncDeferred},ChatterEngine.syncChatterConversation=function(conversationId,latestMessageDate,userId){var syncDeferred,uploadDeferred,_this=this;return null==latestMessageDate&&(latestMessageDate=null),null==userId&&(userId="me"),syncDeferred=$.Deferred(),uploadDeferred=this._onlineOnlyModeEnabled()?null:TQ.sync.SyncEngine._upload(["ChatterMessage"]),$.when(uploadDeferred).done(function(){return _this.downloadChatterConversation(conversationId,latestMessageDate,userId).done(function(conversationResponse){return syncDeferred.resolve(conversationResponse)}).fail(function(error){return syncDeferred.reject(error)})}).fail(function(error){return syncDeferred.reject(error)}),syncDeferred},ChatterEngine.downloadChatterFeedUpdates=function(feedType,feedObjectId,ignoreToken){var downloadChatterDeferred,downloadUrl,_this=this;return downloadChatterDeferred=$.Deferred(),_.isEmpty(feedType)&&(feedType=this.FeedType.FeedTypeCompany),downloadUrl=this._getFeedDownloadUrl(feedType,feedObjectId,ignoreToken),this._downloadChatterFeedPages(downloadUrl).done(function(updatesToken,createdFeedItemIdList){return _this.observeChatterFeedModifications().done(function(downloadResponse){var finishDownloadDeferred;return _this._onlineOnlyModeEnabled()||(finishDownloadDeferred=TQ.sync.Cacher.processDownloadSuccess(_this._chatterSyncConfiguration)),$.when(finishDownloadDeferred).done(function(){return _this._saveFeedUpdatesToken(feedType,feedObjectId,updatesToken),_this._saveLastTrackChatterUpdatesDate(downloadResponse.executionDate),downloadResponse.created=createdFeedItemIdList,downloadChatterDeferred.resolve(downloadResponse)}).fail(function(error){return downloadChatterDeferred.reject(error)})}).fail(function(error){return downloadChatterDeferred.reject(error)})}).fail(function(error){return TQ.sync.Cacher.processDownloadError().always(function(){return downloadChatterDeferred.reject(error)})}),downloadChatterDeferred},ChatterEngine._downloadChatterFeedPages=function(feedPageUrl,updatesToken,pageIndex){var _downloadPagesDeferred,_this=this;return _.isEmpty(pageIndex)&&(pageIndex=1),_downloadPagesDeferred=$.Deferred(),TQ.rest.Provider.chatterCall(feedPageUrl).done(function(chatterApiResponse){return _.isEmpty(updatesToken)&&(updatesToken=chatterApiResponse.updatesToken),_this._saveChatterFeedItemsPage(chatterApiResponse).done(function(createdFeedItemIdsList){return _.isEmpty(chatterApiResponse.nextPageUrl)||pageIndex>=_this._MAX_PAGE_COUNT?_downloadPagesDeferred.resolve(updatesToken,createdFeedItemIdsList):_this._downloadChatterFeedPages(chatterApiResponse.nextPageUrl,updatesToken,pageIndex+1).done(function(updatesToken,nextPageCreatedIdsList){return _.isEmpty(nextPageCreatedIdsList)||(createdFeedItemIdsList=createdFeedItemIdsList.concat(nextPageCreatedIdsList)),_downloadPagesDeferred.resolve(updatesToken,createdFeedItemIdsList)}).fail(function(error){return _downloadPagesDeferred.reject(error)})}).fail(function(error){return _downloadPagesDeferred.reject(error)})}).fail(function(error){return _downloadPagesDeferred.reject(error)}),_downloadPagesDeferred},ChatterEngine.downloadFeedItemComments=function(feedItemId,includeCommentsInResponse){var commentsResponse,downloadChatterDeferred,downloadUrl,_this=this;return null==includeCommentsInResponse&&(includeCommentsInResponse=!1),downloadChatterDeferred=$.Deferred(),downloadUrl="/feed-items/"+feedItemId+"/comments",commentsResponse={commentIds:[]},includeCommentsInResponse&&(commentsResponse.comments=[]),this._downloadChatterCommentPages(downloadUrl,commentsResponse).done(function(downloadResponse){var finishDownloadDeferred;return _this._onlineOnlyModeEnabled()||(finishDownloadDeferred=TQ.sync.Cacher.processDownloadSuccess(_this._chatterSyncConfiguration)),$.when(finishDownloadDeferred).done(function(){return downloadChatterDeferred.resolve(downloadResponse)}).fail(function(error){return downloadChatterDeferred.reject(error)})}).fail(function(error){return TQ.sync.Cacher.processDownloadError().always(function(){return downloadChatterDeferred.reject(error)})}),downloadChatterDeferred},ChatterEngine._downloadChatterCommentPages=function(feedPageUrl,commentsResponse,pageIndex){var _downloadPagesDeferred,_this=this;return _.isEmpty(pageIndex)&&(pageIndex=1),_downloadPagesDeferred=$.Deferred(),TQ.rest.Provider.chatterCall(feedPageUrl).done(function(chatterApiResponse){return _this._saveChatterCommentsPage(chatterApiResponse,commentsResponse).done(function(commentsResponse){return _.isEmpty(chatterApiResponse.nextPageUrl)||pageIndex>=_this._MAX_PAGE_COUNT?_downloadPagesDeferred.resolve(commentsResponse):_this._downloadChatterCommentPages(chatterApiResponse.nextPageUrl,commentsResponse,pageIndex+1).done(function(commentsResponse){return _downloadPagesDeferred.resolve(commentsResponse)}).fail(function(error){return _downloadPagesDeferred.reject(error)})}).fail(function(error){return _downloadPagesDeferred.reject(error)})}).fail(function(error){return _downloadPagesDeferred.reject(error)}),_downloadPagesDeferred},ChatterEngine._convertChatterFeedItems=function(feedItemsApiResponse,feedCommentsList,feedLikesList){var feedItemApiRecord,feedItemComment,feedItemComments,feedItemsList,_i,_j,_len,_len1,_ref;if(feedItemsList=[],!_.isEmpty(feedItemsApiResponse.elements))for(_ref=feedItemsApiResponse.elements,_i=0,_len=_ref.length;_len>_i;_i++)if(feedItemApiRecord=_ref[_i],"FeedItem"===feedItemApiRecord.feedElementType&&(feedItemsList.push(TQ.chatter.ChatterRecord.apiFeedItemToFlatRecord(feedItemApiRecord)),_.isEmpty(feedItemApiRecord.myLike)||feedLikesList.push(TQ.chatter.ChatterRecord.apiFeedLikeToFlatRecord(feedItemApiRecord,!0)),!_.isEmpty(feedItemApiRecord.comments)))for(feedItemComments=this._convertChatterFeedComments(feedItemApiRecord.comments,feedLikesList),_j=0,_len1=feedItemComments.length;_len1>_j;_j++)feedItemComment=feedItemComments[_j],feedCommentsList.push(feedItemComment);return feedItemsList},ChatterEngine._convertChatterFeedComments=function(feedCommentApiResponse,feedLikesList){var feedCommentApiRecord,feedCommentsList,_i,_len,_ref;if(feedCommentsList=[],!_.isEmpty(feedCommentApiResponse.comments))for(_ref=feedCommentApiResponse.comments,_i=0,_len=_ref.length;_len>_i;_i++)feedCommentApiRecord=_ref[_i],feedCommentsList.push(TQ.chatter.ChatterRecord.apiFeedCommentToFlatRecord(feedCommentApiRecord)),_.isEmpty(feedCommentApiRecord.myLike)||feedLikesList.push(TQ.chatter.ChatterRecord.apiFeedLikeToFlatRecord(feedCommentApiRecord,!1));return feedCommentsList},ChatterEngine._saveChatterFeedEntities=function(feedItemsList,feedCommentsList,feedLikesList){var feedItemDef,saveDeferred;return saveDeferred=$.Deferred(),this._onlineOnlyModeEnabled()?saveDeferred.resolve():(_.isEmpty(feedItemsList)||(feedItemDef=TQ.sync.Cacher.cachePage("FeedItem",feedItemsList)),$.when(feedItemDef).done(function(){var feedCommentDef;return _.isEmpty(feedCommentsList)||(feedCommentDef=TQ.sync.Cacher.cachePage("FeedComment",feedCommentsList)),$.when(feedCommentDef).done(function(){var feedLikeDef;return _.isEmpty(feedLikesList)||(feedLikeDef=TQ.sync.Cacher.cachePage("FeedLike",feedLikesList)),$.when(feedLikeDef).done(function(){return saveDeferred.resolve()}).fail(function(error){return saveDeferred.reject(error)})}).fail(function(error){return saveDeferred.reject(error)})}).fail(function(error){return saveDeferred.reject(error)}),saveDeferred)},ChatterEngine._saveChatterFeedItemsPage=function(feedItemsApiResponse){var feedCommentsList,feedItemsList,feedLikesList,saveDeferred;return _.isEmpty(feedItemsApiResponse)||_.isEmpty(feedItemsApiResponse.elements)?$.Deferred().resolve([]):(saveDeferred=$.Deferred(),feedCommentsList=[],feedLikesList=[],feedItemsList=this._convertChatterFeedItems(feedItemsApiResponse,feedCommentsList,feedLikesList),this._saveChatterFeedEntities(feedItemsList,feedCommentsList,feedLikesList).done(function(){var feedItemIdsList;return feedItemIdsList=_.pluck(feedItemsList,"Id"),saveDeferred.resolve(feedItemIdsList)}).fail(function(error){return saveDeferred.reject(error)}),saveDeferred)},ChatterEngine._saveChatterCommentsPage=function(feedCommentsApiResponse,commentsResponse){var feedCommentsIdsList,feedCommentsList,feedLikesList,saveDeferred;return _.isEmpty(feedCommentsApiResponse)||_.isEmpty(feedCommentsApiResponse.comments)?$.Deferred().resolve([]):(saveDeferred=$.Deferred(),feedLikesList=[],feedCommentsList=this._convertChatterFeedComments(feedCommentsApiResponse,feedLikesList),feedCommentsIdsList=_.pluck(feedCommentsList,"Id"),this._saveChatterFeedEntities(null,feedCommentsList,feedLikesList).done(function(){var flatComment,_i,_len;if(commentsResponse){if(commentsResponse.commentIds=commentsResponse.commentIds.concat(feedCommentsIdsList),_.isArray(commentsResponse.comments))for(_i=0,_len=feedCommentsList.length;_len>_i;_i++)flatComment=feedCommentsList[_i],commentsResponse.comments.push(TQ.sync.TQRecord.flatWrapToExpandedWrap(flatComment));return saveDeferred.resolve(commentsResponse)}return saveDeferred.resolve(feedCommentsIdsList)}).fail(function(error){return saveDeferred.reject(error)}),saveDeferred)},ChatterEngine.observeChatterFeedModifications=function(){var exDate,fromDate,observeDeferred,toDate,_this=this;return _.isDate(this._lastTrackChatterUpdatesDate)?(observeDeferred=$.Deferred(),fromDate=new Date(this._lastTrackChatterUpdatesDate-2e4),exDate=new Date,toDate=new Date(exDate.getTime()+6e6),this.downloadChatterUpdatedItems(fromDate,toDate).done(function(updatedIdList,latestCoveredDate){return _.isDate(latestCoveredDate)&&(exDate=latestCoveredDate),_this.downloadChatterDeletedItems(fromDate,toDate).done(function(deletedIdList){return observeDeferred.resolve({updated:updatedIdList,deleted:deletedIdList,executionDate:exDate})}).fail(function(error){return observeDeferred.reject(error)})}).fail(function(error){return observeDeferred.reject(error)}),observeDeferred):$.Deferred().resolve({updated:[],deleted:[],executionDate:new Date})},ChatterEngine._deleteRelatedFeedEntities=function(objectApiName,relatedFieldName,idList){var deleteDeferred,query;return _.isEmpty(idList)||this._onlineOnlyModeEnabled()?$.Deferred().resolve():(query={objectApiName:objectApiName,where:{}},query.where[relatedFieldName]={$in:idList},deleteDeferred=$.Deferred(),this._dataStorage.find(query).done(function(feedEntitiesList){var feedEntity,_i,_len;if(_.isEmpty(feedEntitiesList))return deleteDeferred.resolve();for(_i=0,_len=feedEntitiesList.length;_len>_i;_i++)feedEntity=feedEntitiesList[_i],feedEntity.IsDeleted=!0;return TQ.sync.Cacher.cachePage(objectApiName,feedEntitiesList).done(function(){return deleteDeferred.resolve()}).fail(function(error){return deleteDeferred.reject(error)})}).fail(function(error){return deleteDeferred.reject(error)}),deleteDeferred)},ChatterEngine._clearFeedItemCommentsAndLikes=function(feedItemIdList){return _.isEmpty(feedItemIdList)?$.Deferred().resolve():$.when(this._deleteRelatedFeedEntities("FeedComment","FeedItemId",feedItemIdList),this._deleteRelatedFeedEntities("FeedLike","FeedEntityId",feedItemIdList))},ChatterEngine._downloadUpdatesBatch=function(updatedFeedItemIdList){var argumentsString,batchUrl,downloadDeferred,_this=this;return _.isEmpty(updatedFeedItemIdList)?$.Deferred().resolve():(downloadDeferred=$.Deferred(),argumentsString=updatedFeedItemIdList.slice(0,this._CHATTER_BATCH_LIMIT).concat(","),batchUrl="/feed-elements/batch/"+argumentsString+"?recentCommentCount=25",TQ.rest.Provider.chatterCall(batchUrl).done(function(chatterApiResponse){var batchResult,convertedResponse,_i,_len,_ref;if(_.isEmpty(chatterApiResponse)||_.isEmpty(chatterApiResponse.results))return downloadDeferred.resolve();for(convertedResponse={elements:[]},_ref=chatterApiResponse.results,_i=0,_len=_ref.length;_len>_i;_i++)batchResult=_ref[_i],batchResult.statusCode===_this._BATCH_RESULT_STATUS_SUCCESS&&convertedResponse.elements.push(batchResult.result);return _this._saveChatterFeedItemsPage(convertedResponse).done(function(){return _this._downloadUpdatesBatch(updatedFeedItemIdList.slice(_this._CHATTER_BATCH_LIMIT)).done(function(){return downloadDeferred.resolve()}).fail(function(error){return downloadDeferred.reject(error)})}).fail(function(error){return downloadDeferred.reject(error)})}).fail(function(error){return downloadDeferred.reject(error)}),downloadDeferred)},ChatterEngine.downloadChatterUpdatedItems=function(startDate,endDate){var downloadDeferred,_this=this;return downloadDeferred=$.Deferred(),TQ.rest.Provider.getUpdates("FeedItem",startDate,endDate).done(function(updateApiResponse){var latestCoveredDate,updatedFeedItemIdList;return latestCoveredDate=null,_.isEmpty(updateApiResponse)||_.isEmpty(updateApiResponse.latestDateCovered)||(latestCoveredDate=new Date(updateApiResponse.latestDateCovered),_.isNaN(latestCoveredDate.getTime())&&(latestCoveredDate=null)),_.isEmpty(updateApiResponse)||_.isEmpty(updateApiResponse.ids)?downloadDeferred.resolve([]):(updatedFeedItemIdList=updateApiResponse.ids,_this._clearFeedItemCommentsAndLikes(updatedFeedItemIdList).done(function(){return _this._downloadUpdatesBatch(updatedFeedItemIdList).done(function(){return downloadDeferred.resolve(updatedFeedItemIdList,latestCoveredDate)}).fail(function(error){return downloadDeferred.reject(error)})}).fail(function(error){return downloadDeferred.reject(error)}))}).fail(function(error){return downloadDeferred.reject(error)}),downloadDeferred},ChatterEngine.downloadChatterDeletedItems=function(startDate,endDate){var customRestCall,downloadDeferred,fromDateString,restDeferred,toDateString,_this=this;return downloadDeferred=$.Deferred(),this._USE_CUSTOM_GET_DELETED_METHOD===!0?(fromDateString=TQ.util.Generic.encodeDateForRestGetParameter(startDate),toDateString=TQ.util.Generic.encodeDateForRestGetParameter(endDate),customRestCall="/tqchatter/deleted/?start="+fromDateString+"&end="+toDateString,restDeferred=TQ.rest.Provider.rest(customRestCall)):restDeferred=TQ.rest.Provider.getDeletions("FeedItem",startDate,endDate),$.when(restDeferred).done(function(deleteApiResponse){var deletedFeedItemIdList;return _.isEmpty(deleteApiResponse)||_.isEmpty(deleteApiResponse.deletedRecords)?downloadDeferred.resolve([]):(deletedFeedItemIdList=_.pluck(deleteApiResponse.deletedRecords,"id"),_this._clearFeedItemCommentsAndLikes(deletedFeedItemIdList).done(function(){return _this._deleteRelatedFeedEntities("FeedItem","Id",deletedFeedItemIdList).done(function(){return downloadDeferred.resolve(deletedFeedItemIdList)}).fail(function(error){return downloadDeferred.reject(error)})}).fail(function(error){return downloadDeferred.reject(error)}))}).fail(function(error){return downloadDeferred.reject(error)}),downloadDeferred},ChatterEngine.getDirectChatterFeedPage=function(feedType,feedObjectId,page,pageSize,feedPageUrl,includeComments){var getDeferred,_this=this;return null==feedPageUrl&&(feedPageUrl=null),null==includeComments&&(includeComments=!0),getDeferred=$.Deferred(),feedPageUrl||(feedPageUrl=this._getFeedDownloadUrl(feedType,feedObjectId,!0,pageSize,3)),TQ.rest.Provider.chatterCall(feedPageUrl).done(function(feedItemsApiResponse){var feedComment,feedCommentsList,feedItemsList,feedLikesList,flatFeedItem,tqFeedItem,tqFeedItemsList,_i,_j,_len,_len1;if(_.isEmpty(feedItemsApiResponse)||_.isEmpty(feedItemsApiResponse.elements))return getDeferred.resolve({records:[],nextPageUrl:null});for(feedCommentsList=[],feedLikesList=[],feedItemsList=_this._convertChatterFeedItems(feedItemsApiResponse,feedCommentsList,feedLikesList),tqFeedItemsList=[],_i=0,_len=feedItemsList.length;_len>_i;_i++){if(flatFeedItem=feedItemsList[_i],tqFeedItem=TQ.sync.TQRecord.flatWrapToExpandedWrap(flatFeedItem),includeComments)for(tqFeedItem.comments=[],_j=0,_len1=feedCommentsList.length;_len1>_j;_j++)feedComment=feedCommentsList[_j],feedComment.FeedItemId===tqFeedItem.rawRecord.Id&&tqFeedItem.comments.push(TQ.sync.TQRecord.flatWrapToExpandedWrap(feedComment));tqFeedItemsList.push(tqFeedItem)}return getDeferred.resolve({records:tqFeedItemsList,nextPageUrl:feedItemsApiResponse.nextPageUrl})}),getDeferred},ChatterEngine.getDirectFeedItemsByIds=function(feedItemIdList,includeComments){var argumentsString,batchUrl,downloadDeferred,_this=this;return null==includeComments&&(includeComments=!0),downloadDeferred=$.Deferred(),_.isEmpty(feedItemIdList)?downloadDeferred.resolve([]):(argumentsString=feedItemIdList.concat(","),batchUrl="/feed-elements/batch/"+argumentsString,TQ.rest.Provider.chatterCall(batchUrl).done(function(chatterApiResponse){var batchResult,commentApiResponse,feedItemList,flatFeedComment,flatFeedItem,tqFeedItem,_i,_j,_len,_len1,_ref,_ref1;if(_.isEmpty(chatterApiResponse)||_.isEmpty(chatterApiResponse.results))return downloadDeferred.resolve([]);for(feedItemList=[],_ref=chatterApiResponse.results,_i=0,_len=_ref.length;_len>_i;_i++)if(batchResult=_ref[_i],batchResult.statusCode===_this._BATCH_RESULT_STATUS_SUCCESS){if(flatFeedItem=TQ.chatter.ChatterRecord.apiFeedItemToFlatRecord(batchResult.result),tqFeedItem=TQ.sync.TQRecord.flatWrapToExpandedWrap(flatFeedItem),includeComments&&batchResult.result.comments&&_.isArray(batchResult.result.comments.comments))for(tqFeedItem.comments=[],_ref1=batchResult.result.comments.comments,_j=0,_len1=_ref1.length;_len1>_j;_j++)commentApiResponse=_ref1[_j],flatFeedComment=TQ.chatter.ChatterRecord.apiFeedCommentToFlatRecord(commentApiResponse),tqFeedItem.comments.push(TQ.sync.TQRecord.flatWrapToExpandedWrap(flatFeedComment));feedItemList.push(tqFeedItem)}return downloadDeferred.resolve(feedItemList)}).fail(function(error){return downloadDeferred.reject(error)}),downloadDeferred)},ChatterEngine.downloadChatterConversation=function(conversationId,latestMessageDate,userId){var conversationResponse,downloadUrl;return null==latestMessageDate&&(latestMessageDate=null),null==userId&&(userId="me"),downloadUrl=this._getConversationUrl(conversationId,userId),conversationResponse={messages:[],messagesCount:0,oldestMessageDateToLoad:latestMessageDate,nextPageUrl:downloadUrl},this._downloadChatterConversationBatch(conversationResponse)},ChatterEngine.getChatterConversationPage=function(conversationIdOrUrl,pageSize,startingDate,userId){var conversationResponse,conversationUrl;return null==pageSize&&(pageSize=20),null==startingDate&&(startingDate=null),null==userId&&(userId="me"),conversationUrl=conversationIdOrUrl,-1===conversationIdOrUrl.indexOf("/")&&(conversationUrl=this._getConversationUrl(conversationIdOrUrl,userId)),conversationResponse={messages:[],messagesCount:0,startingDate:startingDate,maxCount:pageSize,nextPageUrl:conversationUrl},this._downloadChatterConversationBatch(conversationResponse)},ChatterEngine._downloadChatterConversationBatch=function(conversationResponse){var downloadDeferred,_this=this;return downloadDeferred=$.Deferred(),this._downloadChatterConversationPage(conversationResponse).done(function(conversationResponse){var finishDownloadDeferred;return _this._onlineOnlyModeEnabled()||(finishDownloadDeferred=TQ.sync.Cacher.processDownloadSuccess(_this._chatterSyncConfiguration)),$.when(finishDownloadDeferred).done(function(){return downloadDeferred.resolve(conversationResponse)}).fail(function(error){return downloadDeferred.reject(error)})}).fail(function(error){return TQ.sync.Cacher.processDownloadError().always(function(){return downloadDeferred.reject(error)})}),downloadDeferred},ChatterEngine._downloadChatterConversationPage=function(conversationResponse,pageIndex){var _downloadPagesDeferred,_this=this;return null==pageIndex&&(pageIndex=1),_downloadPagesDeferred=$.Deferred(),TQ.rest.Provider.chatterCall(conversationResponse.nextPageUrl).done(function(chatterApiResponse){return _this._saveChatterConversation(chatterApiResponse,conversationResponse).done(function(conversationResponse){return _.isEmpty(conversationResponse.nextPageUrl)||pageIndex>=_this._MAX_PAGE_COUNT||conversationResponse.maxCount&&conversationResponse.messagesCount>=conversationResponse.maxCount?_downloadPagesDeferred.resolve(conversationResponse):_this._downloadChatterConversationPage(conversationResponse,pageIndex+1).done(function(conversationResponse){return _downloadPagesDeferred.resolve(conversationResponse)}).fail(function(error){return _downloadPagesDeferred.reject(error)})}).fail(function(error){return _downloadPagesDeferred.reject(error)})}).fail(function(error){return _downloadPagesDeferred.reject(error)}),_downloadPagesDeferred},ChatterEngine._saveChatterConversation=function(chatterApiResponse,conversationResponse){var chatterMessage,chatterMessagesList,messageObject,messageSentDate,messagesResponse,oldestTimeStamp,saveDeferred,setNewNextPage,startingTimeStamp,storeDeferred,_i,_len,_ref;if(_.isEmpty(chatterApiResponse)||_.isEmpty(chatterApiResponse.messages))return conversationResponse.nextPageUrl=null,$.Deferred(conversationResponse);if(messagesResponse=chatterApiResponse.messages,saveDeferred=$.Deferred(),setNewNextPage=!0,chatterMessagesList=[],_.isDate(conversationResponse.oldestMessageDateToLoad)&&(oldestTimeStamp=conversationResponse.oldestMessageDateToLoad.getTime()),_.isDate(conversationResponse.startingDate)&&(startingTimeStamp=conversationResponse.startingDate.getTime()),_.isArray(messagesResponse.messages))for(_ref=messagesResponse.messages,_i=0,_len=_ref.length;_len>_i;_i++)if(messageObject=_ref[_i],messageSentDate=new Date(messageObject.sentDate),(!_.isDate(conversationResponse.latestMessageDate)||messageSentDate.getTime()>conversationResponse.latestMessageDate.getTime())&&(conversationResponse.latestMessageDate=messageSentDate),!(startingTimeStamp&&messageSentDate.getTime()>=startingTimeStamp)){if(oldestTimeStamp&&messageSentDate.getTime()<=oldestTimeStamp){conversationResponse.nextPageUrl=null,setNewNextPage=!1;break}chatterMessage=TQ.chatter.ChatterRecord.apiChatterMessageToFlatRecord(messageObject),chatterMessagesList.push(chatterMessage),conversationResponse.messagesCount++,conversationResponse.messages.length<this._MAX_CONVERSATION_REPONSE_SIZE&&(conversationResponse.oldestMessageDate=messageSentDate,conversationResponse.messages.push(TQ.sync.TQRecord.flatWrapToExpandedWrap(chatterMessage)))}return setNewNextPage&&(conversationResponse.nextPageUrl=messagesResponse.nextPageUrl),!this._onlineOnlyModeEnabled&&chatterMessagesList.length>0&&(storeDeferred=TQ.sync.Cacher.cachePage("ChatterMessage",feedItemsList)),$.when(storeDeferred).done(function(){return saveDeferred.resolve(conversationResponse)}).fail(function(error){return saveDeferred.reject(error)}),saveDeferred},ChatterEngine.sendPrivateMessage=function(messageText,recepients){var messageData,sendDeferred;return sendDeferred=$.Deferred(),messageData=JSON.stringify({body:messageText,recipients:_.isArray(recepients)?recepients:[recepients]}),TQ.rest.Provider.chatterCall("/users/me/messages","POST",messageData).done(function(messageResponse){var chatterMessage,flatMessage;return flatMessage=TQ.chatter.ChatterRecord.apiChatterMessageToFlatRecord(messageResponse),chatterMessage=TQ.sync.TQRecord.flatWrapToExpandedWrap(flatMessage),sendDeferred.resolve(chatterMessage)}).fail(function(error){return sendDeferred.reject(error)}),sendDeferred},ChatterEngine.updateUserChatterProfileImage=function(imageData,fileName){var dataToSend,defaultCropSize,defaultPreferences,mimeType,postJsonParameters,updateDeferred,updatePhotoUrl;return defaultCropSize=200,defaultPreferences={fileName:"avatar.jpg",mimeType:"image/jpg"},_.isEmpty(fileName)&&(fileName=defaultPreferences.fileName),mimeType=TQ.util.Generic.getMimeType(fileName,defaultPreferences.mimeType),updateDeferred=$.Deferred(),_.isString(imageData)&&(imageData=TQ.util.Generic.base64ToBlob(imageData,mimeType)),
updatePhotoUrl="/users/me/photo",postJsonParameters={cropSize:defaultCropSize},dataToSend=new FormData,dataToSend.append("json",JSON.stringify(postJsonParameters)),dataToSend.append("fileUpload",imageData,fileName),TQ.rest.Provider.chatterCall(updatePhotoUrl,"POST",dataToSend).done(function(photoData){return updateDeferred.resolve(photoData)}).fail(function(error){return updateDeferred.reject(error)}),updateDeferred},ChatterEngine.downloadUserPhotoData=function(userId){var getDeferred,getPhotoUrl;return getDeferred=$.Deferred(),_.isEmpty(userId)&&(userId="me"),getPhotoUrl="/users/"+userId+"/photo",TQ.rest.Provider.chatterCall(getPhotoUrl).done(function(photoData){return getDeferred.resolve(photoData)}).fail(function(error){return getDeferred.reject(error)}),getDeferred},ChatterEngine.downloadFollowersData=function(recordId){var postData,uploadDeferred,_this=this;return uploadDeferred=$.Deferred(),postData=JSON.stringify({recordId:recordId}),TQ.rest.Provider.rest("/tqchatter","POST",postData).done(function(response){var subscription,subscriptionList,userBatchCall,userData,userIdMap,_i,_len;if(!_.isEmpty(response)&&_.isArray(response)){for(subscriptionList=[],userIdMap={},_i=0,_len=response.length;_len>_i;_i++)userData=response[_i],subscription=TQ.chatter.ChatterRecord.getRecordSubscription(recordId,userData),userIdMap[userData.Id]=subscription,subscriptionList.push(subscription);return _.isEmpty(subscriptionList)?uploadDeferred.resolve(subscriptionList):(userBatchCall="/users/batch/"+_.keys(userIdMap).concat(","),TQ.rest.Provider.chatterCall(userBatchCall).done(function(response){var chatterUserInfo,_j,_len1,_ref,_results;if(!_.isEmpty(response)&&!_.isEmpty(response.results)){for(_ref=response.results,_results=[],_j=0,_len1=_ref.length;_len1>_j;_j++)chatterUserInfo=_ref[_j],_.isEmpty(chatterUserInfo.result)||200!==chatterUserInfo.statusCode?_results.push(void 0):(subscription=userIdMap[chatterUserInfo.result.id],_.isEmpty(subscription)||_.isEmpty(chatterUserInfo.result.photo)?_results.push(void 0):_results.push(subscription._wrap.photoData=chatterUserInfo.result.photo));return _results}}).always(function(){var saveDeferred;return _this._onlineOnlyModeEnabled()||(saveDeferred=_this._dataStorage.upsert("EntitySubscription",subscriptionList)),$.when(saveDeferred).done(function(){return uploadDeferred.resolve(subscriptionList)}).fail(function(){return uploadDeferred.reject()})}))}return uploadDeferred.resolve([])}).fail(function(error){return uploadDeferred.reject(error)}),uploadDeferred},ChatterEngine}()}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/schedule/job/syncjob",["acnCore/schedule/job","acnCore/status/syncstatus"],function(){var SyncJob,_ref;return namespace({TQ:{schedule:{job:SyncJob=function(_super){function SyncJob(){return _ref=SyncJob.__super__.constructor.apply(this,arguments)}return __extends(SyncJob,_super),SyncJob.prototype.id="Sync",SyncJob.prototype.when="every 2 hours",SyncJob.prototype.executeOnStartup=!1,SyncJob.prototype.resources=[TQ.schedule.Job.Resources.DATA_STORAGE],SyncJob.prototype.onlineOnly=!0,SyncJob.prototype.couldBeExecuted=function(){return!TQ.status.SyncStatus.isSyncing()&&TQ.status.AppStatus.isActivated()&&!TQ.config.Core.onlineOnlyEnabled&&TQ.metadata.Metadata.isLoaded},SyncJob.prototype.execute=function(){return TQ.sync.SyncEngine.startSync()},SyncJob}(TQ.schedule.Job)}}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/chatter/chattersmartsync",["acnCore/sync/smartsync","acnCore/chatter/chatterrecord","acnCore/rest/provider","acnCore/util/generic"],function(){var ChatterSmartSync,_ref;return namespace({TQ:{chatter:ChatterSmartSync=function(_super){function ChatterSmartSync(){return _ref=ChatterSmartSync.__super__.constructor.apply(this,arguments)}return __extends(ChatterSmartSync,_super),ChatterSmartSync.RECORD_CHANGED_EVENT_NAME="tqChatterSyncRecordChanged",ChatterSmartSync.LIKE_DELAY_TIMEOUT=800,ChatterSmartSync._onlineOnlyModeEnabled=function(){return TQ.config.Core.onlineOnlyEnabled},ChatterSmartSync.newFeedItemInstance=function(parentRecordId){var feedItem;return feedItem=this.getTrackedObjectRecordInstance("FeedItem"),feedItem=TQ.chatter.ChatterRecord.setFeedItemDefaultValues(feedItem,parentRecordId)},ChatterSmartSync.newFeedCommentInstance=function(feedItemId){var feedComment;return feedComment=this.getTrackedObjectRecordInstance("FeedComment"),feedComment=TQ.chatter.ChatterRecord.setFeedCommentDefaultValues(feedComment,feedItemId)},ChatterSmartSync.createFeedItemForRecordFeed=function(recordId,postText,postAttachemntLink,postAttachmentFileName,additionalFields){var createDeferred,feedItem,fieldName,value,_this=this;if(createDeferred=$.Deferred(),feedItem=this.newFeedItemInstance(recordId),feedItem.rawRecord.Body=postText,_.isEmpty(TQ.rest.Provider.getCommunityId())||(feedItem.rawRecord.NetworkScope=TQ.rest.Provider.getCommunityId()),_.isEmpty(postAttachemntLink)||(feedItem.rawRecord.Type="ContentPost",feedItem.rawRecord.ContentData=postAttachemntLink,feedItem.rawRecord.ContentType=TQ.util.Generic.getMimeType(postAttachemntLink,"image/jpg"),_.isEmpty(postAttachmentFileName)?feedItem.rawRecord.ContentFileName=TQ.util.Generic.getFilenameFromUrl(postAttachemntLink):feedItem.rawRecord.ContentFileName=postAttachmentFileName),!_.isEmpty(additionalFields))for(fieldName in additionalFields)value=additionalFields[fieldName],feedItem.rawRecord[fieldName]=value;return this.upsert(feedItem).done(function(response){var responseFeedItem;return _this._onlineOnlyModeEnabled()&&response&&_.isArray(response.body)&&response.body.length>0&&(responseFeedItem=response.body[0],_.isEmpty(responseFeedItem.responseId)||(feedItem.rawRecord.Id=responseFeedItem.responseId)),createDeferred.resolve(feedItem)}).fail(function(error){return createDeferred.reject(error)}),createDeferred},ChatterSmartSync.createTextFeedCommentForFeedItem=function(feedItemId,commentText,currentFeedItem){var createDeferred,feedComment,_this=this;return null==currentFeedItem&&(currentFeedItem=null),feedComment=this.newFeedCommentInstance(feedItemId),feedComment.rawRecord.CommentBody=commentText,createDeferred=$.Deferred(),this.upsert(feedComment).done(function(response){var responseItem;return _this._onlineOnlyModeEnabled()&&response&&_.isArray(response.body)&&response.body.length>0&&(responseItem=response.body[0],_.isEmpty(responseItem.responseId)||(feedComment.rawRecord.Id=responseItem.responseId)),createDeferred.resolve(feedComment)}).fail(function(error){return createDeferred.reject(error)}),$.when(createDeferred).done(function(feedComment){var itemQuery;return _.isEmpty(currentFeedItem)||(currentFeedItem.rawRecord.CommentCount++,_.isArray(currentFeedItem.comments)&&currentFeedItem.comments.push(feedComment)),_this._onlineOnlyModeEnabled()?void 0:(itemQuery={objectApiName:"FeedItem",where:{Id:{$eq:feedItemId}}},_this._dataStorage.find(itemQuery).done(function(items){var feedItem;return _.isEmpty(items)?void 0:(feedItem=items[0],feedItem.CommentCount++,_this._dataStorage.upsert("FeedItem",feedItem))}))}),createDeferred},ChatterSmartSync.likeFeedEntity=function(feedEntity,isFeedItem){var currentEntity,feedLike,likeDeferred,likeQuery,_this=this;return null==isFeedItem&&(isFeedItem=!0),likeDeferred=$.Deferred(),currentEntity=feedEntity,feedEntity.chatterData.IsLikeProcessing===!0?likeDeferred.resolve():(feedEntity.chatterData.IsLikeProcessing=!0,_.isEmpty(feedEntity.chatterData.CurrentUserLikeId)?(feedLike=this.getTrackedObjectRecordInstance("FeedLike"),TQ.chatter.ChatterRecord.setFeedLikeDefaultValues(feedLike,feedEntity.rawRecord.Id,isFeedItem),this.upsert(feedLike).done(function(){return likeDeferred.resolve(feedLike.rawRecord.Id)}).fail(function(error){return likeDeferred.reject(error)})):this._onlineOnlyModeEnabled()?likeDeferred.resolve(feedEntity.chatterData.CurrentUserLikeId):(likeQuery={objectApiName:"FeedLike",where:{Id:{$eq:feedEntity.chatterData.CurrentUserLikeId}}},this._dataStorage.find(likeQuery).done(function(likes){var feedLike;return _.isEmpty(likes)?(feedLike=_this.getTrackedObjectRecordInstance("FeedLike"),TQ.chatter.ChatterRecord.setFeedLikeDefaultValues(feedLike,feedEntity.rawRecord.Id,isFeedItem),_this.upsert(feedLike).done(function(){return likeDeferred.resolve(feedLike.rawRecord.Id)}).fail(function(error){return likeDeferred.reject(error)})):(feedLike=likes[0],feedLike.isDeleted=!1,_this._dataStorage.upsert("FeedLike",feedLike).done(function(){return likeDeferred.resolve(feedLike.Id)}).fail(function(error){return likeDeferred.reject(error)}))}).fail(function(error){return likeDeferred.reject(error)})),$.when(likeDeferred).done(function(likeId){var entityQuery;return feedEntity.chatterData.LikedByCurrentUser=!0,feedEntity.chatterData.CurrentUserLikeId=likeId,feedEntity.rawRecord.LikeCount++,_this._onlineOnlyModeEnabled()?void 0:(entityQuery={objectApiName:isFeedItem?"FeedItem":"FeedComment",where:{Id:{$eq:feedEntity.rawRecord.Id}}},_this._dataStorage.find(entityQuery).done(function(entities){return _.isEmpty(entities)?void 0:(feedEntity=entities[0],feedEntity._wrap.chatterData.LikedByCurrentUser=!0,feedEntity._wrap.chatterData.CurrentUserLikeId=likeId,feedEntity.LikeCount++,_this._dataStorage.upsert(entityQuery.objectApiName,feedEntity))}))}).always(function(){return setTimeout(function(){return currentEntity.chatterData.IsLikeProcessing=!1},800)}),likeDeferred)},ChatterSmartSync._getLikeObjectsDeferred=function(feedEntity){var feedLike,isFeedItem,likeQuery;return this._onlineOnlyModeEnabled()?(feedLike=this.getTrackedObjectRecordInstance("FeedLike"),isFeedItem="FeedItem"===feedEntity.objectApiName,TQ.chatter.ChatterRecord.setFeedLikeDefaultValues(feedLike,feedEntity.rawRecord.Id,isFeedItem),feedLike.rawRecord.Id=feedEntity.chatterData.CurrentUserLikeId,$.when([feedLike])):(likeQuery={objectApiName:"FeedLike",where:{Id:{$eq:feedEntity.chatterData.CurrentUserLikeId}}},this.find(likeQuery))},ChatterSmartSync.dislikeFeedEntity=function(feedEntity,isFeedItem){var currentEntity,dislikeDeferred,_this=this;return null==isFeedItem&&(isFeedItem=!0),!feedEntity.chatterData.LikedByCurrentUser||feedEntity.chatterData.IsLikeProcessing?$.Deferred().resolve():(dislikeDeferred=$.Deferred(),currentEntity=feedEntity,feedEntity.chatterData.IsLikeProcessing=!0,$.when(this._getLikeObjectsDeferred(feedEntity)).done(function(likes){return _.isEmpty(likes)?dislikeDeferred.resolve():_this.remove(likes).done(function(){return dislikeDeferred.resolve()}).fail(function(error){return dislikeDeferred.reject(error)})}).fail(function(error){return dislikeDeferred.reject(error)}),$.when(dislikeDeferred).done(function(){var entityQuery;return feedEntity.chatterData.LikedByCurrentUser=!1,feedEntity.rawRecord.LikeCount--,_this._onlineOnlyModeEnabled()&&(feedEntity.chatterData.CurrentUserLikeId=null),_this._onlineOnlyModeEnabled()?void 0:(entityQuery={objectApiName:isFeedItem?"FeedItem":"FeedComment",where:{Id:{$eq:feedEntity.rawRecord.Id}}},_this._dataStorage.find(entityQuery).done(function(entities){return _.isEmpty(entities)?void 0:(feedEntity=entities[0],feedEntity._wrap.chatterData.LikedByCurrentUser=!1,feedEntity.LikeCount=0===feedEntity.LikeCount?0:feedEntity.LikeCount-1,_this._dataStorage.upsert(entityQuery.objectApiName,feedEntity))}))}).always(function(){return setTimeout(function(){return currentEntity.chatterData.IsLikeProcessing=!1},800)}),dislikeDeferred)},ChatterSmartSync.removeFeedItem=function(feedItem){return this.remove(feedItem)},ChatterSmartSync.removeFeedComment=function(feedComment,currentFeedItem){var feedItemId,removeDeferred,_this=this;return null==currentFeedItem&&(currentFeedItem=null),feedItemId=feedComment.rawRecord.FeedItemId,removeDeferred=this.remove(feedComment),$.when(removeDeferred).done(function(){var feedItemQuery;return feedItemQuery={objectApiName:"FeedItem",where:{Id:{$eq:feedItemId}}},currentFeedItem===!0&&currentFeedItem.rawRecord.CommentCount--,_this._onlineOnlyModeEnabled()?void 0:_this._dataStorage.find(feedItemQuery).done(function(items){var feedItem;return _.isEmpty(items)?void 0:(feedItem=items[0],feedItem.CommentCount>0&&feedItem.CommentCount--,_this._dataStorage.upsert("FeedItem",feedItem))})}),removeDeferred},ChatterSmartSync.getChatterFeedPage=function(feedType,feedObjectId,page,pageSize,pageUrl){var feedQuery,getPageDeferred;return null==pageUrl&&(pageUrl=null),this._onlineOnlyModeEnabled()?TQ.chatter.ChatterEngine.getDirectChatterFeedPage(feedType,feedObjectId,page,pageSize,pageUrl):(getPageDeferred=$.Deferred(),feedQuery={objectApiName:"FeedItem",where:{ParentId:{$eq:feedObjectId}},page:page,pagesize:pageSize},this.find(feedQuery).done(function(records){return getPageDeferred.resolve({records:records,nextPageUrl:records.length>=pageSize})}).fail(function(error){return getPageDeferred.reject(error)}),getPageDeferred)},ChatterSmartSync.getFeedItemsByIds=function(feedItemIdList){return this._onlineOnlyModeEnabled()?TQ.chatter.ChatterEngine.getDirectFeedItemsByIds(feedItemIdList):this.find({objectApiName:"FeedItem",where:{Id:{$in:feedItemIdList}}})},ChatterSmartSync.getFollowersData=function(feedObjectId){var downloadDeferred;return this._onlineOnlyModeEnabled()?(downloadDeferred=$.Deferred(),TQ.chatter.ChatterEngine.downloadFollowersData(feedObjectId).done(function(followersList){var flatRecord,resultList,_i,_len;for(resultList=[],_i=0,_len=followersList.length;_len>_i;_i++)flatRecord=followersList[_i],resultList.push(TQ.sync.TQRecord.flatWrapToExpandedWrap(flatRecord));return downloadDeferred.resolve(resultList)}).fail(function(error){return downloadDeferred.reject(error)}),downloadDeferred):this.find({objectApiName:"EntitySubscription",where:{ParentId:{$eq:feedObjectId}}})},ChatterSmartSync.sendPrivateMessage=function(messageText,recepients,conversationId){var sendDeferred,_this=this;return null==recepients&&(recepients=null),null==conversationId&&(conversationId=null),this._onlineOnlyModeEnabled()?TQ.chatter.ChatterEngine.sendPrivateMessage(messageText,recepients):(sendDeferred=$.Deferred(),TQ.chatter.ChatterEngine.sendPrivateMessage(messageText,recepients).done(function(message){return _this.upsert(message).done(function(){return sendDeferred.resolve(message)}).fail(function(error){return sendDeferred.reject(error)})}).fail(function(error){return sendDeferred.reject(error)}),sendDeferred)},ChatterSmartSync.getConversationPage=function(conversationData,pageSize,startingDate,userId){var conversationId,offset,query,queryDeferred;return null==pageSize&&(pageSize=20),null==userId&&(userId=null),this._onlineOnlyModeEnabled()?TQ.chatter.ChatterEngine.getChatterConversationPage(conversationData,pageSize,startingDate,userId):(queryDeferred=$.Deferred(),query={objectApiName:"ChatterMessage",limit:pageSize,orderby:"SentDate DESC"},offset=0,_.isString(conversationData)?conversationId=conversationData:(conversationId=conversationData.id,offset=conversationData.offset,offset&&(query.offset=offset)),query.where={ConversationId:{$eq:conversationId}},this.find(query).done(function(messages){var nextPageUrl;return messages.length===pageSize&&(nextPageUrl={id:conversationId,offset:offset+messages.length}),queryDeferred.resolve({messages:messages,messagesCount:messages.length,nextPageUrl:nextPageUrl,latestMessageDate:_.isEmpty(messages)?messages[0].rawRecord.SentDate:null,oldestMessageDate:_.isEmpty(messages)?messages[messages.length-1].rawRecord.SentDate:null})}).fail(function(error){return queryDeferred.reject(error)}),queryDeferred)},ChatterSmartSync}(TQ.sync.SmartSync)}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/schedule/job/chatterglobalsync",["acnCore/schedule/job","acnCore/log/logger","acnCore/status/syncstatus","acnCore/chatter/chattersmartsync","acnCore/chatter/chatterengine"],function(){var ChatterGlobalSync,_ref;return namespace({TQ:{schedule:{job:ChatterGlobalSync=function(_super){function ChatterGlobalSync(){return _ref=ChatterGlobalSync.__super__.constructor.apply(this,arguments)}return __extends(ChatterGlobalSync,_super),ChatterGlobalSync.prototype.id="ChatterGlobalSync",ChatterGlobalSync.prototype.when="every 30 mins",ChatterGlobalSync.prototype.executeOnStartup=!0,ChatterGlobalSync.prototype.resources=[TQ.schedule.Job.Resources.DATA_STORAGE],ChatterGlobalSync.prototype.onlineOnly=!0,ChatterGlobalSync.prototype.executeOnEvents=[TQ.status.AppStatus.CONNECTION_CHANGE_EVENT_NAME,TQ.chatter.ChatterSmartSync.RECORD_CHANGED_EVENT_NAME],ChatterGlobalSync.prototype.couldBeExecuted=function(){return!TQ.status.SyncStatus.isSyncing()&&TQ.status.AppStatus.activated&&TQ.metadata.Metadata.isLoaded},ChatterGlobalSync.prototype.execute=function(){return this.downloadOnly?TQ.chatter.ChatterEngine.downloadChatterFeedUpdates(this.feedType,this.feedObjectId):TQ.chatter.ChatterEngine.syncChatterFeedUpdates(this.feedType,this.feedObjectId)},ChatterGlobalSync}(TQ.schedule.Job)}}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/sync/settings",["acnCore/base/haserrorstatus","acnCore/sync/smartsync","acnCore/util/generic"],function(){var Settings,_ref;return namespace({TQ:{sync:Settings=function(_super){function Settings(){return _ref=Settings.__super__.constructor.apply(this,arguments)}return __extends(Settings,_super),Settings.CLASS_LOCALSTORAGE_NAMESPACE="SyncSettings_",Settings.SETTINGS_LOADED_EVENT_NAME="tqSyncSettingsLoaded",Settings.NO_SYNC_SETTINGS_IN_LOCALSTORAGE="NO_SYNC_SETTINGS_IN_LOCALSTORAGE",Settings.NO_SYNC_SETTINGS_ON_SERVER="NO_SYNC_SETTINGS_ON_SERVER",Settings.syncConfig=null,Settings.errorStatus=TQ.util.Generic.initializeClassProperty(Settings.CLASS_LOCALSTORAGE_NAMESPACE,"errorStatus",null),Settings._configFields=["ClientApp_ID__c","Sync_When__c","Sync_On_Online__c","Sync_On_Resume__c","Sync_On_Save__c","Sync_On_Startup__c"],Settings.getSettingsFromLocalStore=function(){var _localSettings;return _localSettings=store.get(this.CLASS_LOCALSTORAGE_NAMESPACE+"Data")},Settings.loadSyncSettings=function(){var loadSettingsDef,_this=this;return loadSettingsDef=$.Deferred(),$.when(this._loadSyncSettingsFromServer()).done(function(response){return response&&response.records&&response.records.length>0?(store.set(_this.CLASS_LOCALSTORAGE_NAMESPACE+"Data",response.records[0]),_this.syncConfig=_this.getSettingsFromLocalStore(),_this._clearErrorStatus(),loadSettingsDef.resolve(response.records[0])):(_this._setErrorStatusAndLogIt({errorCode:_this.NO_SYNC_SETTINGS_ON_SERVER,namespace:TQ.log.Logger.tags.SYNC}),loadSettingsDef.reject(_this.NO_SYNC_SETTINGS_ON_SERVER))}).fail(function(error){var localSettings;return localSettings=_this.getSettingsFromLocalStore(),localSettings?_this.syncConfig=localSettings:TQ.log.Logger.warn({message:"settings:using the default version of the sync settings instead of server one"}),loadSettingsDef.resolve()}),loadSettingsDef},Settings._loadSyncSettingsFromServer=function(){var appId,query;return appId=TQ.config.Core.clientAppId,query="SELECT "+this._configFields.join(", ")+" FROM TQ_Config__c WHERE ClientApp_ID__c = '"+appId+"'",TQ.rest.Provider.query(query)},Settings}(TQ.base.HasErrorStatus)}})}),define("acnCore/schedule/starter",["acnCore/device/connection","acnCore/status/appstatus","acnCore/schedule/scheduler","acnCore/schedule/job/syncjob","acnCore/schedule/job/logtoserver","acnCore/schedule/job/chatterglobalsync","acnCore/log/logger","acnCore/sync/settings"],function(){var Starter;return namespace({TQ:{schedule:Starter=function(){function Starter(){}return Starter.addSyncJobToScheduler=function(){var jobConfig,syncConfig;return syncConfig=TQ.sync.Settings.syncConfig,jobConfig={executeOnEvents:[]},syncConfig&&(syncConfig.Sync_When__c&&(jobConfig.when=syncConfig.Sync_When__c),syncConfig.Sync_On_Startup__c&&(jobConfig.executeOnStartup=!0),syncConfig.Sync_On_Online__c&&jobConfig.executeOnEvents.push(TQ.status.AppStatus.CONNECTION_CHANGE_EVENT_NAME),syncConfig.Sync_On_Resume__c&&jobConfig.executeOnEvents.push("resume"),syncConfig.Sync_On_Save__c&&jobConfig.executeOnEvents.push(TQ.sync.SmartSync.RECORD_CHANGED_EVENT_NAME)),TQ.schedule.Scheduler.addJob(new TQ.schedule.job.SyncJob(jobConfig))},Starter.addChatterSyncJobToScheduler=function(){return TQ.schedule.Scheduler.addJob(new TQ.schedule.job.ChatterGlobalSync)},Starter.addJobsOnDataStorageReady=function(){return TQ.config.Core.onlineOnlyEnabled?void 0:this.addSyncJobToScheduler()},Starter.addLoggerJobToScheduler=function(){return TQ.log.Logger.isLoggingToServerEnabled()?TQ.schedule.Scheduler.addJob(new TQ.schedule.job.LogToServer({when:TQ.log.Logger.WHEN_SUBMIT_TO_SERVER})):void 0},Starter}()}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/app/settings",["acnCore/base/haserrorstatus","acnCore/sync/smartsync","acnCore/util/generic"],function(){var Settings,_ref;return namespace({TQ:{app:Settings=function(_super){function Settings(){return _ref=Settings.__super__.constructor.apply(this,arguments)}return __extends(Settings,_super),Settings.CLASS_LOCALSTORAGE_NAMESPACE="AppSettings_",Settings.SETTINGS_LOADED_EVENT_NAME="tqAppSettingsLoaded",Settings.NO_APP_SETTINGS_OBJECT_ON_SERVER="NO_APP_SETTINGS_OBJECT_ON_SERVER",Settings.NO_APP_SETTINGS_IN_LOCALSTORAGE="NO_APP_SETTINGS_IN_LOCALSTORAGE",Settings.NO_APP_SETTINGS_ON_SERVER="NO_APP_SETTINGS_ON_SERVER",Settings.CUSTOM_SETTINGS_API_NAME="App_Settings__c",Settings.APP_ID_API_FIELD_NAME="ClientApp_ID__c",Settings.APP_SETTINGS_LOAD_ENABLED=!0,Settings.appSettings=null,Settings.errorStatus=TQ.util.Generic.initializeClassProperty(Settings.CLASS_LOCALSTORAGE_NAMESPACE,"errorStatus",null),Settings.getAppSettingsValue=function(fieldName){return _.isEmpty(this.appSettings)?null:this.appSettings[fieldName]},Settings.getSettingsFromLocalStore=function(){var _localSettings;return _localSettings=store.get(this.CLASS_LOCALSTORAGE_NAMESPACE+"Data")},Settings._loadSettingsLocally=function(loadSettingsDef){var localSettings;return localSettings=this.getSettingsFromLocalStore(),localSettings?(this.appSettings=localSettings,loadSettingsDef.resolve()):(TQ.log.Logger.warn({message:"settings:using the default version of the sync settings instead of server one"}),loadSettingsDef.reject(this.NO_APP_SETTINGS_IN_LOCALSTORAGE))},Settings.loadAppSettings=function(){var loadSettingsDef,_this=this;return this.APP_SETTINGS_LOAD_ENABLED?_.isEmpty(this.CUSTOM_SETTINGS_API_NAME)?$.Deferred.reject():(loadSettingsDef=$.Deferred(),$.when(this._loadSettingsMetadataFields()).done(function(settingsFields){return $.when(_this._loadAppSettingsFromServer(settingsFields)).done(function(response){return response&&!_.isEmpty(response.records)?(store.set(_this.CLASS_LOCALSTORAGE_NAMESPACE+"Data",response.records[0]),_this.appSettings=_this.getSettingsFromLocalStore(),_this._clearErrorStatus(),loadSettingsDef.resolve(response.records[0])):_this._loadSettingsLocally(loadSettingsDef)}).fail(function(){return _this._loadSettingsLocally(loadSettingsDef)})}).fail(function(){return _this._loadSettingsLocally(loadSettingsDef)}),loadSettingsDef):$.Deferred.resolve()},Settings._loadSettingsMetadataFields=function(){var metadataDef;return metadataDef=$.Deferred(),TQ.rest.Provider.describe(this.CUSTOM_SETTINGS_API_NAME).done(function(response){return response&&!_.isEmpty(response.fields)?metadataDef.resolve(_.pluck(response.fields,"name")):metadatDef.reject(this.NO_APP_SETTINGS_OBJECT_ON_SERVER)}).fail(function(){return metadataDef.reject(this.NO_APP_SETTINGS_OBJECT_ON_SERVER)}),metadataDef},Settings._loadAppSettingsFromServer=function(settingFields){var appId,query;return appId=TQ.config.Core.clientAppId,query="SELECT "+settingFields.join(", ")+" FROM "+this.CUSTOM_SETTINGS_API_NAME+" WHERE "+this.APP_ID_API_FIELD_NAME+" = '"+appId+"'",TQ.rest.Provider.query(query)},Settings}(TQ.base.HasErrorStatus)}})}),define("acnCore/user/usermanager",["acnCore/util/generic","acnCore/store/storage","acnCore/chatter/chatterengine","acnCore/device/file","acnCore/user/userinfo"],function(){var UserManager;return namespace({TQ:{user:UserManager=function(){function UserManager(){}return UserManager._dataStorage=null,UserManager._getStorage=function(){return _.isEmpty(this._dataStorage)&&(this._dataStorage=TQ.store.Storage.getStorage("DataStorage")),this._dataStorage},UserManager._updateFeedElementsWithNewUserData=function(feedObjectApiName,userId,userName,photoData){var batchPageSize,batchUpdate,query,updateDeferred,_this=this;return updateDeferred=$.Deferred(),batchPageSize=500,query={objectApiName:feedObjectApiName,where:{CreatedById:{$eq:userId}},page:0,pagesize:batchPageSize},batchUpdate=function(){return _this._getStorage().find(query).done(function(records){var record,_i,_len;if(0===records.length)return updateDeferred.resolve(photoData);for(_i=0,_len=records.length;_len>_i;_i++)record=records[_i],_.isEmpty(userName)||(record._wrap.chatterData.UserName=userName),_.isEmpty(photoData)||(record._wrap.chatterData.UserPhotoData=photoData);return _this._getStorage().upsert(feedObjectApiName,records).done(function(){return query.page++,batchUpdate()}).fail(function(error){return updateDeferred.reject(error)})}).fail(function(error){return updateDeferred.reject(error)})},batchUpdate(),updateDeferred},UserManager.updateUserNameInStorage=function(newUserName,userId){return _.isEmpty(userId)&&(userId=TQ.user.UserInfo.getUserId()),TQ.config.Core.onlineOnlyEnabled?$.when(null):$.when(this._updateFeedElementsWithNewUserData("FeedItem",userId,newUserName),this._updateFeedElementsWithNewUserData("FeedComment",userId,newUserName))},UserManager.updateUserPhotoDataInStorage=function(photoData,userId){var commentUpdateDefer,feedItemUpdateDefer,userQuery,userUpdateDefer,_this=this;return _.isEmpty(userId)?$.when(null):(_.isEmpty(userId)&&(userId=TQ.user.UserInfo.getUserId()),userId===TQ.user.UserInfo.getUserId()&&TQ.user.UserInfo.updateUserChatterPhotoData(photoData),TQ.config.Core.onlineOnlyEnabled?$.when(photoData):(userQuery={objectApiName:"User",where:{Id:{$eq:userId}}},userUpdateDefer=this._getStorage().find(userQuery).done(function(records){var userData;return _.isEmpty(records)?void 0:(userData=records[0],userData.SmallPhotoUrl=photoData.smallPhotoUrl,userData.FullPhotoUrl=photoData.largePhotoUrl,_this._getStorage().upsert("User",userData).done(function(){return userId===TQ.user.UserInfo.getUserId()?TQ.user.UserInfo.initialize():void 0}))}),feedItemUpdateDefer=this._updateFeedElementsWithNewUserData("FeedItem",userId,null,photoData),commentUpdateDefer=this._updateFeedElementsWithNewUserData("FeedComment",userId,null,photoData),$.when(userUpdateDefer,feedItemUpdateDefer,commentUpdateDefer)))},UserManager.updateUserAvatar=function(imageUrl,userId){var updateDeferred,_this=this;return null==userId&&(userId=TQ.user.UserInfo.getUserId()),updateDeferred=$.Deferred(),TQ.device.File.getFileAsBase64(imageUrl).done(function(result){var base64Image,fileName;return fileName=TQ.util.Generic.getFilenameFromUrl(imageUrl)||result.fileName,base64Image=result.base64,TQ.chatter.ChatterEngine.updateUserChatterProfileImage(base64Image,fileName).done(function(photoData){return updateDeferred.resolve(photoData)}).fail(function(error){return updateDeferred.reject(error)})}).fail(function(err){return updateDeferred.reject(err)}),$.when(updateDeferred).done(function(photoData){return _this.updateUserPhotoDataInStorage(photoData,userId)}),updateDeferred},UserManager._saveUserPhotoDataInStorage=function(userId,photoData){var saveDefer,userQuery,_this=this;return saveDefer=$.Deferred(),userQuery={objectApiName:"User",where:{Id:{$eq:userId}}},this._getStorage().find(userQuery).done(function(records){var userData;return _.isEmpty(records)?void 0:(userData=records[0],userData._wrap.photoData=photoData,_this._getStorage().upsert("User",userData).done(function(){return saveDefer.resolve()}))}).fail(function(error){return saveDefer.reject(error)}),saveDefer},UserManager.uploadUserAvatarData=function(){return TQ.chatter.ChatterEngine.downloadUserPhotoData().done(function(photoData){return TQ.user.UserInfo.updateUserChatterPhotoData(photoData)})},UserManager.updateUserDataWithChatterAvatar=function(user){var updateDefer,_this=this;return updateDefer=$.Deferred(),TQ.chatter.ChatterEngine.downloadUserPhotoData(user.rawRecord.Id).done(function(photoData){return user.photoData=photoData,_this._saveUserPhotoDataInStorage(user.rawRecord.Id,photoData),updateDefer.resolve(photoData)}).fail(function(error){return updateDefer.reject(error)}),updateDefer},UserManager}()}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/bootstrap/bootstrap",["acnCore/base/haserrorstatus","acnCore/sync/syncengine","acnCore/metadata/metadata","acnCore/store/storage","acnCore/sync/cacher","acnCore/config/core","acnCore/sync/smartsync","acnCore/chatter/chattermetadata","acnCore/chatter/chatterengine","acnCore/schedule/scheduler","acnCore/schedule/starter","acnCore/sync/settings","acnCore/util/generic","acnCore/app/settings","acnCore/user/userinfo","acnCore/user/usermanager"],function(){var Bootstrap,_ref;return namespace({TQ:{bootstrap:Bootstrap=function(_super){function Bootstrap(){return _ref=Bootstrap.__super__.constructor.apply(this,arguments)}return __extends(Bootstrap,_super),Bootstrap.LOGIN_URL_LOCALSTORAGE_KEY="loginURL",Bootstrap.CLASS_LOCALSTORAGE_NAMESPACE="Bootstrap_",Bootstrap._bootstrapDeferred=$.Deferred(),Bootstrap._authenticationDeferred=$.Deferred(),Bootstrap.errorStatus=TQ.util.Generic.initializeClassProperty(Bootstrap.CLASS_LOCALSTORAGE_NAMESPACE,"errorStatus",null),Bootstrap._systemTableList=[],Bootstrap.start=function(){var _this=this;return TQ.log.Logger.initializeLoggingService(),TQ.status.AppStatus.initializeErrorEventMonitorning(),TQ.schedule.Starter.addLoggerJobToScheduler(),TQ.schedule.Scheduler.start(),$.when(this._authenticated()).done(function(){return TQ.sync.Settings.loadSyncSettings().done(function(){return _this._loadMetadata().done(function(trackedObjectMetadataList){return TQ.config.Core.onlineOnlyEnabled||_this._initDataAndCacheStorage(trackedObjectMetadataList),TQ.user.UserInfo.initialize(),TQ.user.UserManager.uploadUserAvatarData(),_this._clearErrorStatus(),TQ.schedule.Starter.addJobsOnDataStorageReady(),_this._bootstrapDeferred.resolve()}).fail(function(err){return _this._setErrorStatus(err),_this._bootstrapDeferred.reject(err)})}).fail(function(err){return _this._setErrorStatus(err),_this._bootstrapDeferred.reject(err)})},TQ.app.Settings.loadAppSettings()).fail(function(){return _this._setErrorStatus(err),_this._bootstrapDeferred.reject(err)}),this._bootstrapDeferred},Bootstrap.abort=function(){return alert("Startup can't continue"),this._bootstrapDeferred.reject();
},Bootstrap.completeAuthentication=function(){return this._authenticationDeferred.resolve()},Bootstrap.abortAuthentication=function(){return this._authenticationDeferred.reject()},Bootstrap.getSelectedEnvironment=function(env){var option,_i,_len,_ref1;for(env||(env="@@env"===window.ENV_VARS.deploymentEnv?"develop":window.ENV_VARS.deploymentEnv),_ref1=TQ.config.Core.ENVIRONMENT_OPTIONS,_i=0,_len=_ref1.length;_len>_i;_i++)if(option=_ref1[_i],option.environment===env)return option;return null},Bootstrap.addSystemTables=function(tableDescriptions){return _.isArray(tableDescriptions)?this._systemTableList=this._systemTableList.concat(tableDescriptions):this._systemTableList.push(tableDescriptions)},Bootstrap.getEnvironmentsList=function(){return TQ.config.Core.ENVIRONMENT_OPTIONS},Bootstrap._authenticated=function(){return TQ.config.Core.bootstrapIncludesAuthentication?this._login():$.Deferred().resolve()},Bootstrap._loadMetadata=function(){return TQ.metadata.Metadata.loadMetadata()},Bootstrap._initDataAndCacheStorage=function(trackedObjectMetadataList){var chatterObjectMetadata,chatterObjectsMetadata,dataStorage,objectApiNames,resultArray,trackedObjectCacheList,trackedObjectMetadata,_i,_j,_len,_len1;for(resultArray=[],objectApiNames=[],_i=0,_len=trackedObjectMetadataList.length;_len>_i;_i++)trackedObjectMetadata=trackedObjectMetadataList[_i],trackedObjectMetadata.autoCreateIndexes=!0,objectApiNames.push(trackedObjectMetadata.objectApiName),resultArray.push(trackedObjectMetadata);for(chatterObjectsMetadata=TQ.chatter.ChatterMetadata.getChatterObjectMetadata(),_j=0,_len1=chatterObjectsMetadata.length;_len1>_j;_j++)chatterObjectMetadata=chatterObjectsMetadata[_j],_.contains(objectApiNames,chatterObjectMetadata.objectApiName)||(chatterObjectMetadata.autoCreateIndexes=!0,resultArray.push(chatterObjectMetadata));return trackedObjectCacheList=TQ.sync.Cacher.prepareCacheTables(resultArray),resultArray=resultArray.concat(trackedObjectCacheList),_.isEmpty(this._systemTableList)||(resultArray=resultArray.concat(this._systemTableList)),dataStorage=TQ.store.Storage.getStorage(TQ.config.Core.DATA_STORAGE_NAME,resultArray),TQ.sync.SmartSync.initStorage(),TQ.chatter.ChatterSmartSync.initStorage(),TQ.sync.SyncEngine.initStorage(),TQ.chatter.ChatterEngine.initStorage(),TQ.sync.Cacher.initStorage()},Bootstrap._setErrorStatus=function(error){return this.errorStatus=error,store.set(this.CLASS_LOCALSTORAGE_NAMESPACE+"errorStatus",error)},Bootstrap._login=function(env){var _authenticationDeferred,_this=this;return _authenticationDeferred=$.Deferred(),TQ.log.Logger.info({namespace:"session",labels:"login",message:"logging-in"}),env||(env=store.get(this.LOGIN_URL_LOCALSTORAGE_KEY)),Salesforce.login(env).then(function(){return env&&store.set(_this.LOGIN_URL_LOCALSTORAGE_KEY,env),_authenticationDeferred.resolve()}).fail(function(){return _authenticationDeferred.reject()}),_authenticationDeferred},Bootstrap._initKickStart=function(){return TQ.config.Core.bootstrapIncludesAuthentication?Bootstrap.start():void 0},Bootstrap._autokickstart=Bootstrap._initKickStart(),Bootstrap}.call(this,TQ.base.HasErrorStatus)}})}),define("acnCore/device/scan/barcode",[],function(){var Barcode;return namespace({TQ:{device:{scan:Barcode=function(){function Barcode(){}return Barcode.scanner=null,Barcode.scan=function(){var def;return def=$.Deferred(),Barcode.scanner||(Barcode.scanner=cordova.require("cordova/plugin/BarcodeScanner")),Barcode.scanner?Barcode.scanner.scan(function(result){return 1===result.cancelled?def.resolve({acquired:!1}):def.resolve({acquired:!0,text:result.text,format:result.format})},function(err){return def.reject(err)}):def.reject(err),def},Barcode}()}}})}),define("acnCore/device/media/picture",["acnCore/device/platform","acnCore/device/file"],function(Platform,File){var Picture;return namespace({TQ:{device:{media:Picture=function(){function Picture(){}return Picture.PICTURE_QUALITY=50,Picture.PICTURE_FILESIZE_TOO_BIG=-1,Picture.MAX_FILE_SIZE=5242880,Picture.PICTURE_WIDTH=1044,Picture.PICTURE_HEIGHT=783,Picture.TAKE_PICTURE="TAKE",Picture.PICK_PICTURE="PICK",Picture.MAX_FILE_SIZE_EXCEEDED="MAX_FILE_SIZE_EXCEEDED",Picture.NO_IMAGE_SELECTED="NO_IMAGE_SELECTED",Picture.PICTURE_NOT_AVAILABLE="PICTURE_NOT_AVAILABLE",Picture.getPicture=function(source){var getPicDef,options,_this=this;return getPicDef=$.Deferred(),window.Camera?(options={},options=source===this.TAKE_PICTURE?{destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA,encodingType:Camera.EncodingType.JPEG,saveToPhotoAlbum:TQ.device.Platform.isWindows()?!1:!0,correctOrientation:!0,quality:this.PICTURE_QUALITY,targetWidth:this.PICTURE_WIDTH,targetHeight:this.PICTURE_HEIGHT}:{destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.SAVEDPHOTOALBUM,encodingType:Camera.EncodingType.JPEG,correctOrientation:!0,quality:this.PICTURE_QUALITY,targetWidth:this.PICTURE_WIDTH,targetHeight:this.PICTURE_HEIGHT},navigator.camera.getPicture(function(tmpFileURI){return TQ.device.File.checkFileSize(tmpFileURI,_this.MAX_FILE_SIZE).done(function(){return TQ.device.File.moveToPermanentStorage(tmpFileURI).done(function(fileURI){return getPicDef.resolve(fileURI)}).fail(function(err){return getPicDef.reject(err)})}).fail(function(){return getPicDef.reject(_this.MAX_FILE_SIZE_EXCEEDED)})},function(err){return"no image selected"===err||"Selection cancelled"===err?getPicDef.reject(_this.NO_IMAGE_SELECTED):getPicDef.reject(err)},options)):getPicDef.reject(this.PICTURE_NOT_AVAILABLE),getPicDef},Picture}()}}})}),define("acnCore/device/scan/nfc",[],function(){var Nfc;return namespace({TQ:{device:{scan:Nfc=function(){function Nfc(){}return Nfc.NFC_NOT_AVAILABLE="NFC_NOT_AVAILABLE",Nfc.startListening=function(){var scanDef;return scanDef=$.Deferred(),TQ.device.Platform.isAndroid()&&nfc?nfc.addNdefListener(function(nfcEvent){var message,tag;return tag=nfcEvent.tag,message=tag.ndefMessage,scanDef.notify({tag:tag,acquired:!0,text:nfc.bytesToString(message[0].payload).substring(3)})},function(){},function(err){return scanDef.reject(err)}):scanDef.reject(this.NFC_NOT_AVAILABLE),scanDef},Nfc.stopListening=function(){var stopListeningDef;return stopListeningDef=$.Deferred(),TQ.device.Platform.isAndroid()&&nfc?nfc.removeNdefListener(function(){return stopListeningDef.resolve()},function(err){return stopListeningDef.resolve(err)}):scanDef.reject(this.NFC_NOT_AVAILABLE),stopListeningDef},Nfc}()}}})}),define("acnCore/device/socialshare",["acnCore/status/appstatus","acnCore/device/connection","acnCore/device/platform","acnCore/log/logger"],function(){var SocialShare;return namespace({TQ:{device:SocialShare=function(){function SocialShare(){}return SocialShare.DEFAULT_PINTEREST_CLIENT_ID="1442850",SocialShare.DEFAULT_GOOGLE_PLUS_CLIENT_ID="431214694769-vkjj6e162gnr3jr6ptoj79aetp74d8bs.apps.googleusercontent.com",SocialShare.DEFAULT_PINTEREST_LINK="https://www.trafalgar.com/",SocialShare.DEFAULT_IMAGE_LINK="http://vacationtc.com/trafalgar/trafalgar_brochures.jpg",SocialShare._pinterestInitialized=!1,SocialShare.ShareType={Facebook:"Facebook",Twitter:"Twitter",Instagram:"Instagram",GooglePlus:"GooglePlus",Pinterest:"Pinterest"},SocialShare._isPinterestInitialized=!1,SocialShare._defaultImageLocalPath=null,SocialShare.initializePinterest=function(){var initDeferred,_this=this;return initDeferred=$.Deferred(),this._isPinterestInitialized?initDeferred.resolve():(PinterestPlugin.init(this.DEFAULT_PINTEREST_CLIENT_ID,function(){return _this._isPinterestInitialized=!0,initDeferred.resolve()},function(errorHandler){return initDeferred.reject(errorHandler)}),initDeferred)},SocialShare.shareVia=function(shareType,messageText,imageUrl,link){var localUrl;switch(_.isEmpty(imageUrl)||(localUrl=TQ.sync.FileManager.getLocalUrl(imageUrl),_.isEmpty(localUrl)||(imageUrl=localUrl)),shareType){case this.ShareType.Facebook:return this.shareViaFacebook(messageText,imageUrl,link);case this.ShareType.Twitter:return this.shareViaTwitter(messageText,imageUrl,link);case this.ShareType.Instagram:return this.shareViaInstagram(messageText,imageUrl,link);case this.ShareType.Pinterest:return this.shareViaPinterest(messageText,imageUrl,link);case this.ShareType.GooglePlus:return this.shareViaGooglePlus(messageText,imageUrl,link);default:return this.shareViaFacebook(messageText,imageUrl,link)}},SocialShare._getFileEntry=function(imageUrl){return TQ.device.File.getLocalFilePath(imageUrl)},SocialShare.shareViaFacebook=function(messageText,imageUrl,link){var shareDeferred;return shareDeferred=$.Deferred(),this._getFileEntry(imageUrl).then(function(imageURI){return window.plugins.socialsharing.shareViaFacebook(messageText,"",imageURI,link,function(){return shareDeferred.resolve()},function(error){return TQ.device.Platform.isAndroid()?shareDeferred.reject("Facebook application is not founded on your device. Check if it's installed"):shareDeferred.reject(error)})}).fail(function(error){return shareDeferred.reject("Cannot load image from local file")}),shareDeferred},SocialShare.shareViaTwitter=function(messageText,imageUrl,link){var shareDeferred;return shareDeferred=$.Deferred(),this._getFileEntry(imageUrl).then(function(imageURI){return window.plugins.socialsharing.shareViaTwitter(messageText,imageURI,link,function(){return shareDeferred.resolve()},function(error){return shareDeferred.reject(error)})}).fail(function(error){return TQ.device.Platform.isAndroid()?shareDeferred.reject("Twitter application is not founded on your device. Check if it's installed"):shareDeferred.reject("Cannot load image from local file")}),shareDeferred},SocialShare.loadDefaultLocalImage=function(){var loadDef,_this=this;return _.isEmpty(this._defaultImageLocalPath)?(loadDef=TQ.device.File.loadFileFromServer(this.DEFAULT_IMAGE_LINK),$.when(loadDef).done(function(resultUrl){return _this._defaultImageLocalPath=resultUrl}),loadDef):$.Deferred().resolve(this._defaultImageLocalPath)},SocialShare.shareViaInstagram=function(messageText,imageUrl,link){var shareDeferred,_this=this;return shareDeferred=$.Deferred(),Instagram.isInstalled(function(err,installed){var loadImageDeferred;return installed?(loadImageDeferred=null,_.isEmpty(imageUrl)?(loadImageDeferred=$.Deferred(),_this.loadDefaultLocalImage().done(function(resultUrl){return TQ.device.File.getFileAsBase64(resultUrl,!0).done(function(imageData){return loadImageDeferred.resolve(imageData)},function(error){return loadImageDeferred.reject(error)})}).fail(function(error){return loadImageDeferred.reject(error)})):loadImageDeferred=TQ.device.File.isLocalUrl(imageUrl)?TQ.device.File.getFileAsBase64(imageUrl,!0):imageUrl,$.when(loadImageDeferred).done(function(imageData){var photoData;return photoData=null,null!==imageData&&(photoData=imageData.base64,photoData=TQ.device.Platform.isAndroid()?photoData.replace("*/*","image/jpg"):photoData.replace("*/*","image/jpeg"),photoData=photoData.replace("data:null","data:image/jpg")),Instagram.share(photoData,messageText,function(error){return _.isEmpty(error)?shareDeferred.resolve():shareDeferred.reject(error)})}).fail(function(error){return shareDeferred.reject(error)})):shareDeferred.reject("Instagram application should be installed on your device")}),shareDeferred},SocialShare.sendToImageHost=function(imageData,fileName){var dataToSend,defaultPreferences,mimeType,uploadDeferred;return uploadDeferred=$.Deferred(),defaultPreferences={fileName:"image.jpg",mimeType:"image/jpg"},_.isEmpty(fileName)&&(fileName=defaultPreferences.fileName),mimeType=TQ.util.Generic.getMimeType(fileName,defaultPreferences.mimeType),_.isString(imageData)&&(imageData=TQ.util.Generic.base64ToBlob(imageData,mimeType)),_.isEmpty(TQ.util.Generic.getFileExtension(fileName))&&(fileName+=".jpg"),dataToSend=new FormData,dataToSend.append("file",imageData,fileName),$.ajax({type:"POST",url:"http://deviantsart.com",cache:!1,processData:!1,contentType:!1,data:dataToSend,dataType:null,timeout:3e4}).done(function(response){var e,responseObj;try{return responseObj=JSON.parse(response),uploadDeferred.resolve(responseObj.url)}catch(_error){return e=_error,uploadDeferred.reject(e)}}).fail(function(error){return uploadDeferred.reject(error)}),uploadDeferred},SocialShare._sendLocalFileToImageHost=function(imageUrl){var sendDeferred,_this=this;return sendDeferred=$.Deferred(),TQ.device.File.getFileAsBase64(imageUrl).done(function(imageData){var fileName;return fileName=TQ.util.Generic.getFilenameFromUrl(imageUrl),_this.sendToImageHost(imageData.base64,fileName).done(function(remoteUrl){return sendDeferred.resolve(remoteUrl)}).fail(function(error){return sendDeferred.reject(error)})}).fail(function(error){return sendDeferred.reject(error)}),sendDeferred},SocialShare.shareViaPinterest=function(messageText,imageUrl,link){var pinFunction,shareDeferred,_this=this;return _.isEmpty(link)&&(link=this.DEFAULT_PINTEREST_LINK),shareDeferred=$.Deferred(),pinFunction=function(){var loadImageDeferred;return loadImageDeferred=null,_.isEmpty(imageUrl)||(loadImageDeferred=TQ.device.File.isLocalUrl(imageUrl)?_this._sendLocalFileToImageHost(imageUrl):imageUrl),$.when(loadImageDeferred).done(function(imageWebUrl){return _.isEmpty(imageWebUrl)&&(imageWebUrl=_this.DEFAULT_IMAGE_LINK),PinterestPlugin.pin(link,imageWebUrl,messageText,function(){return shareDeferred.resolve()},function(error){return shareDeferred.reject(error)})}).fail(function(error){return shareDeferred.reject(error)})},this.initializePinterest().done(function(){return TQ.device.Platform.isIOS()?PinterestPlugin.canPinWithSDK(function(){return pinFunction()},function(err){return shareDeferred.reject("Unfortunantly your version of Pinterest application is too old and do not support sharing. Please update your application")}):pinFunction()}).fail(function(error){return shareDeferred.reject("Cannot find Pinterest aplication. Please check if it is installed on your device.")}),shareDeferred},SocialShare._lazyAuthGooglePlus=function(){var authDeferred,loginOptions;return authDeferred=$.Deferred(),loginOptions={iOSApiKey:this.DEFAULT_GOOGLE_PLUS_CLIENT_ID},window.plugins.googleplus.login(loginOptions,function(obj){return authDeferred.resolve()},function(msg){return authDeferred.reject(msg)}),authDeferred},SocialShare.shareViaGooglePlus=function(messageText,imageUrl,link){var shareDeferred;return shareDeferred=$.Deferred(),SocialShare._getFileEntry(imageUrl).then(function(imageURI){return TQ.device.Platform.isIOS()&&SocialShare._lazyAuthGooglePlus().then(function(){var shareOptions;return shareOptions={messageText:messageText,link:link},imageURI&&(shareOptions.imageURI=imageURI),window.plugins.googleplus.share(function(){return shareDeferred.resolve()},function(){return shareDeferred.reject(arguments)},shareOptions)}),window.plugins.socialsharing.shareVia("com.google.android.apps.plus",messageText,"",imageURI,link,function(){return shareDeferred.resolve()},function(error){return shareDeferred.reject(error)})}).fail(function(error){return shareDeferred.reject("Cannot load image from local file")}),shareDeferred},SocialShare}.call(this)}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/schedule/job/chatterfeedsync",["acnCore/schedule/job","acnCore/log/logger","acnCore/status/syncstatus","acnCore/chatter/chatterengine"],function(){var ChatterFeedSync,_ref;return namespace({TQ:{schedule:{job:ChatterFeedSync=function(_super){function ChatterFeedSync(){return _ref=ChatterFeedSync.__super__.constructor.apply(this,arguments)}return __extends(ChatterFeedSync,_super),ChatterFeedSync.prototype.id="ChatterFeedSync",ChatterFeedSync.prototype.when="every 1 mins",ChatterFeedSync.prototype.executeOnStartup=!0,ChatterFeedSync.prototype.resources=[TQ.schedule.Job.Resources.DATA_STORAGE,TQ.chatter.ChatterSmartSync.RECORD_CHANGED_EVENT_NAME],ChatterFeedSync.prototype.onlineOnly=!0,ChatterFeedSync.prototype.executeOnEvents=[TQ.status.AppStatus.CONNECTION_CHANGE_EVENT_NAME,TQ.chatter.ChatterSmartSync.RECORD_CHANGED_EVENT_NAME],ChatterFeedSync.prototype.feedType=TQ.chatter.ChatterEngine.FeedType.FeedTypeCompany,ChatterFeedSync.prototype.feedObjectId=null,ChatterFeedSync.prototype.downloadOnly=!1,ChatterFeedSync.prototype.couldBeExecuted=function(){return!TQ.status.SyncStatus.isSyncing()&&TQ.status.AppStatus.isActivated()&&TQ.metadata.Metadata.isLoaded},ChatterFeedSync.prototype.execute=function(){return this.downloadOnly?TQ.chatter.ChatterEngine.downloadChatterFeedUpdates(this.feedType,this.feedObjectId):TQ.chatter.ChatterEngine.syncChatterFeedUpdates(this.feedType,this.feedObjectId)},ChatterFeedSync}(TQ.schedule.Job)}}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/schedule/job/chattercommentssync",["acnCore/schedule/job","acnCore/log/logger","acnCore/status/syncstatus","acnCore/chatter/chatterengine"],function(){var ChatterCommentsSync,_ref;return namespace({TQ:{schedule:{job:ChatterCommentsSync=function(_super){function ChatterCommentsSync(){return _ref=ChatterCommentsSync.__super__.constructor.apply(this,arguments)}return __extends(ChatterCommentsSync,_super),ChatterCommentsSync.prototype.id="ChatterCommentsSync",ChatterCommentsSync.prototype.when="every 1 mins",ChatterCommentsSync.prototype.executeOnStartup=!0,ChatterCommentsSync.prototype.resources=[TQ.schedule.Job.Resources.DATA_STORAGE,TQ.chatter.ChatterSmartSync.RECORD_CHANGED_EVENT_NAME],ChatterCommentsSync.prototype.onlineOnly=!0,ChatterCommentsSync.prototype.executeOnEvents=[TQ.status.AppStatus.CONNECTION_CHANGE_EVENT_NAME,TQ.chatter.ChatterSmartSync.RECORD_CHANGED_EVENT_NAME],ChatterCommentsSync.prototype.feedItemId=null,ChatterCommentsSync.prototype.couldBeExecuted=function(){return!TQ.status.SyncStatus.isSyncing()&&TQ.status.AppStatus.isActivated()&&TQ.metadata.Metadata.isLoaded},ChatterCommentsSync.prototype.execute=function(){return TQ.chatter.ChatterEngine.syncChatterFeedCommentsUpdates(this.feedItemId)},ChatterCommentsSync}(TQ.schedule.Job)}}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/schedule/job/followersync",["acnCore/schedule/job","acnCore/log/logger","acnCore/status/syncstatus","acnCore/chatter/chatterengine"],function(){var FollowerFeedSync,_ref;return namespace({TQ:{schedule:{job:FollowerFeedSync=function(_super){function FollowerFeedSync(){return _ref=FollowerFeedSync.__super__.constructor.apply(this,arguments)}return __extends(FollowerFeedSync,_super),FollowerFeedSync.prototype.id="ChatterFeedSync",FollowerFeedSync.prototype.when="every 1 hours",FollowerFeedSync.prototype.executeOnStartup=!0,FollowerFeedSync.prototype.resources=[TQ.schedule.Job.Resources.DATA_STORAGE],FollowerFeedSync.prototype.onlineOnly=!0,FollowerFeedSync.prototype.executeOnEvents=[TQ.status.AppStatus.CONNECTION_CHANGE_EVENT_NAME],FollowerFeedSync.prototype.feedObjectId=null,FollowerFeedSync.prototype.couldBeExecuted=function(){return!TQ.status.SyncStatus.isSyncing()&&TQ.status.AppStatus.activated&&TQ.metadata.Metadata.isLoaded},FollowerFeedSync.prototype.execute=function(){return TQ.chatter.ChatterEngine.downloadFollowersData(this.feedObjectId)},FollowerFeedSync}(TQ.schedule.Job)}}})});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define("acnCore/schedule/job/chatterconversationsync",["acnCore/schedule/job","acnCore/log/logger","acnCore/status/syncstatus","acnCore/chatter/chatterengine"],function(){var ChatterConversationSync;return namespace({TQ:{schedule:{job:ChatterConversationSync=function(_super){function ChatterConversationSync(parameters){ChatterConversationSync.__super__.constructor.call(this,parameters),TQ.config.Core.onlineOnlyEnabled||(this.latestMessageDate=this.initializeConversationDate())}return __extends(ChatterConversationSync,_super),ChatterConversationSync.CHATTER_ENGINE_STORE_PREFIX="ChatterConversation",ChatterConversationSync.prototype.id="ChatterConversationSync",ChatterConversationSync.prototype.when="every 10 seconds",ChatterConversationSync.prototype.executeOnStartup=!0,ChatterConversationSync.prototype.resources=[TQ.schedule.Job.Resources.DATA_STORAGE,TQ.chatter.ChatterSmartSync.RECORD_CHANGED_EVENT_NAME],ChatterConversationSync.prototype.onlineOnly=!0,ChatterConversationSync.prototype.executeOnEvents=[TQ.status.AppStatus.CONNECTION_CHANGE_EVENT_NAME,TQ.chatter.ChatterSmartSync.RECORD_CHANGED_EVENT_NAME],ChatterConversationSync.prototype._getConversationKey=function(){return TQ.schedule.job.ChatterConversationSync.CHATTER_ENGINE_STORE_PREFIX+"_LastDate_"+this.conversationId},ChatterConversationSync.prototype.initializeConversationDate=function(){var newestDate;return newestDate=new Date(store.get(this._getConversationKey())),newestDate.getTime()&&!_.isNaN(newestDate.getTime())?newestDate:void 0},ChatterConversationSync.prototype.saveConversationLatestDate=function(newLatestDate){return _.isDate(newLatestDate)?store.set(this._getConversationKey(),newLatestDate):void 0},ChatterConversationSync.prototype.conversationId=null,ChatterConversationSync.prototype.latestMessageDate=null,ChatterConversationSync.prototype.userId=null,ChatterConversationSync.prototype.couldBeExecuted=function(){return!TQ.status.SyncStatus.isSyncing()&&TQ.status.AppStatus.isActivated()&&TQ.metadata.Metadata.isLoaded},ChatterConversationSync.prototype.execute=function(){var _this=this;return TQ.chatter.ChatterEngine.syncChatterConversation(this.conversationId,this.latestMessageDate,this.userId).done(function(conversationResponse){return conversationResponse.latestMessageDate&&(_this.latestMessageDate=conversationResponse.latestMessageDate,TQ.config.Core.onlineOnlyEnabled||_this.saveConversationLatestDate(conversationResponse.latestMessageDate)),conversationResponse})},ChatterConversationSync}(TQ.schedule.Job)}}})}),define("acnCore/chatter/feedobserver",["acnCore/schedule/scheduler","acnCore/schedule/job/chatterfeedsync","acnCore/schedule/job/chattercommentssync","acnCore/schedule/job/followersync","acnCore/schedule/job/chatterconversationsync","acnCore/util/generic"],function(){var FeedObserver;return namespace({TQ:{chatter:FeedObserver=function(){function FeedObserver(){}return FeedObserver.startFeedObserving=function(feedType,feedObjectId,jobParameters,startCallback,successCallback,failCallback){var feedJob,jobId,stopObservingMethod;return jobId=feedType,_.isEmpty(feedObjectId)||(jobId+="_"+feedObjectId),jobId+="_"+String(Math.random()).slice(2),_.isEmpty(jobParameters)&&(jobParameters={}),jobParameters.id=jobId,jobParameters.feedType=feedType,jobParameters.feedObjectId=feedObjectId,feedJob=new TQ.schedule.job.ChatterFeedSync(jobParameters),TQ.schedule.Scheduler.addJob(feedJob),_.isFunction(startCallback)&&TQ.schedule.Scheduler.onJobStart(jobId,startCallback),_.isFunction(successCallback)&&TQ.schedule.Scheduler.onJobSuccess(jobId,successCallback),_.isFunction(failCallback)&&TQ.schedule.Scheduler.onJobFail(jobId,failCallback),stopObservingMethod=function(){return _.isFunction(startCallback)&&TQ.schedule.Scheduler.offJobStart(jobId,startCallback),_.isFunction(successCallback)&&TQ.schedule.Scheduler.offJobSuccess(jobId,successCallback),_.isFunction(failCallback)&&TQ.schedule.Scheduler.offJobFail(jobId,failCallback),TQ.schedule.Scheduler.removeJob(feedJob)}},FeedObserver.startFeedCommentsObserving=function(feedItemId,jobParameters,startCallback,successCallback,failCallback){var feedJob,jobId,stopObservingMethod;return jobId="ChatterCommentsSync_"+feedItemId,_.isEmpty(jobParameters)&&(jobParameters={}),jobParameters.id=jobId,jobParameters.feedItemId=feedItemId,feedJob=new TQ.schedule.job.ChatterCommentsSync(jobParameters),TQ.schedule.Scheduler.addJob(feedJob),_.isFunction(startCallback)&&TQ.schedule.Scheduler.onJobStart(jobId,startCallback),_.isFunction(successCallback)&&TQ.schedule.Scheduler.onJobSuccess(jobId,successCallback),_.isFunction(failCallback)&&TQ.schedule.Scheduler.onJobFail(jobId,failCallback),stopObservingMethod=function(){return _.isFunction(startCallback)&&TQ.schedule.Scheduler.offJobStart(jobId,startCallback),_.isFunction(successCallback)&&TQ.schedule.Scheduler.offJobSuccess(jobId,successCallback),_.isFunction(failCallback)&&TQ.schedule.Scheduler.offJobFail(jobId,failCallback),TQ.schedule.Scheduler.removeJob(feedJob)}},FeedObserver.startFollwersObserving=function(feedObjectId,jobParameters,startCallback,successCallback,failCallback){var feedJob,jobId,stopObservingMethod;return jobId="FollowersSync_"+feedObjectId,_.isEmpty(jobParameters)&&(jobParameters={}),jobParameters.id=jobId,jobParameters.feedObjectId=feedObjectId,feedJob=new TQ.schedule.job.FollowerFeedSync(jobParameters),TQ.schedule.Scheduler.addJob(feedJob),_.isFunction(startCallback)&&TQ.schedule.Scheduler.onJobStart(jobId,startCallback),_.isFunction(successCallback)&&TQ.schedule.Scheduler.onJobSuccess(jobId,successCallback),_.isFunction(failCallback)&&TQ.schedule.Scheduler.onJobFail(jobId,failCallback),stopObservingMethod=function(){return _.isFunction(startCallback)&&TQ.schedule.Scheduler.offJobStart(jobId,startCallback),_.isFunction(successCallback)&&TQ.schedule.Scheduler.offJobSuccess(jobId,successCallback),_.isFunction(failCallback)&&TQ.schedule.Scheduler.offJobFail(jobId,failCallback),TQ.schedule.Scheduler.removeJob(feedJob)}},FeedObserver.startConversationObserving=function(conversationId,jobParameters,startCallback,successCallback,failCallback){var conversationJob,jobId,stopObservingMethod;return jobId="ConversationSync_"+conversationId,_.isEmpty(jobParameters)&&(jobParameters={}),jobParameters.id=jobId,jobParameters.conversationId=conversationId,conversationJob=new TQ.schedule.job.ChatterConversationSync(jobParameters),TQ.schedule.Scheduler.addJob(conversationJob),_.isFunction(startCallback)&&TQ.schedule.Scheduler.onJobStart(jobId,startCallback),_.isFunction(successCallback)&&TQ.schedule.Scheduler.onJobSuccess(jobId,successCallback),_.isFunction(failCallback)&&TQ.schedule.Scheduler.onJobFail(jobId,failCallback),stopObservingMethod=function(){return _.isFunction(startCallback)&&TQ.schedule.Scheduler.offJobStart(jobId,startCallback),_.isFunction(successCallback)&&TQ.schedule.Scheduler.offJobSuccess(jobId,successCallback),_.isFunction(failCallback)&&TQ.schedule.Scheduler.offJobFail(jobId,failCallback),TQ.schedule.Scheduler.removeJob(conversationJob)}},FeedObserver}()}})}),define("acnCore/error/errors",[],function(){var Errors;return namespace({TQ:Errors=function(){function Errors(){}return Errors.STORAGE="STORAGE_ERROR",Errors.DATA="DATA_ERROR",Errors}()})}),define("acnCore/connector",["acnCore/bootstrap/bootstrap","acnCore/status/appstatus","acnCore/sync/smartsync","acnCore/metadata/metadata","acnCore/sync/syncengine","acnCore/sync/filemanager","acnCore/config/core","acnCore/store/storage","acnCore/device/connection","acnCore/device/scan/barcode","acnCore/device/media/picture","acnCore/device/file","acnCore/device/scan/nfc","acnCore/device/socialshare","acnCore/user/userinfo","acnCore/user/usermanager","acnCore/status/syncstatus","acnCore/chatter/chattersmartsync","acnCore/chatter/chatterengine","acnCore/chatter/feedobserver","acnCore/schedule/starter","acnCore/app/settings","acnCore/log/logger","acnCore/util/generic","acnCore/error/errors"],function(){var Connector;return namespace({TQ:Connector=function(){function Connector(){}return Connector.errors=TQ.Errors,Connector.record={hasError:function(record){return TQ.sync.TQRecord.hasError(record)},isNewInstance:function(record){return TQ.sync.TQRecord.isNewInstance(record)}},Connector.storage=TQ.sync.SmartSync,Connector.db=TQ.store.Storage,Connector.app={getAppSettingsValue:function(fieldName){return TQ.app.Settings.getAppSettingsValue(fieldName)}},Connector.config={core:{setOnlineMode:function(enabled){return TQ.config.Core.setOnlineMode(enabled)},isOnlineOnlyEnabled:function(){return TQ.config.Core.onlineOnlyEnabled},getEnableAnimations:function(){return TQ.config.Core.enableAnimations},setCoreProperty:function(propertyName,propertyvalue){return TQ.config.Core.setCoreProperty(propertyName,propertyvalue)}}},Connector.device={connection:{OFFLINE:TQ.device.Connection.OFFLINE},platform:{isDevice:function(){return TQ.device.Platform.isDevice()},isIOS:function(){return TQ.device.Platform.isIOS()},isAndroid:function(){return TQ.device.Platform.isAndroid()},restart:function(){return TQ.device.Platform.restart()}},share:{ShareType:TQ.device.SocialShare.ShareType,shareVia:function(shareType,messageText,imageUrl,link){return TQ.device.SocialShare.shareVia(shareType,messageText,imageUrl,link)}},scan:{barcode:{scan:function(){return TQ.device.scan.Barcode.scan()}},nfc:{startListening:function(){return TQ.device.scan.Nfc.startListening()},stopListening:function(){return TQ.device.scan.Nfc.stopListening()},NFC_NOT_AVAILABLE:TQ.device.scan.Nfc.NFC_NOT_AVAILABLE}},media:{picture:{getPicture:function(source){return TQ.device.media.Picture.getPicture(source)},NO_IMAGE_SELECTED:TQ.device.media.Picture.NO_IMAGE_SELECTED,MAX_FILE_SIZE_EXCEEDED:TQ.device.media.Picture.MAX_FILE_SIZE_EXCEEDED,PICTURE_NOT_AVAILABLE:TQ.device.media.Picture.PICTURE_NOT_AVAILABLE,TAKE_PICTURE:TQ.device.media.Picture.TAKE_PICTURE,PICK_PICTURE:TQ.device.media.Picture.PICK_PICTURE},video:null,audio:null},file:{openFile:function(record,bodyFieldApiName){return TQ.device.File.openFile(record,bodyFieldApiName)},shareRecordWithFile:function(record){return TQ.device.File.shareRecordWithFile(record)},removeFile:function(fileURI){return TQ.device.File.removeFile(fileURI)},OFFLINE:TQ.device.File.OFFLINE,LOAD_FILE_FROM_SERVER_ERROR:TQ.device.File.LOAD_FILE_FROM_SERVER_ERROR,ERROR_SHARING_IS_NOT_AVAILABLE:TQ.device.File.ERROR_SHARING_IS_NOT_AVAILABLE}},Connector.user={getId:function(){return TQ.rest.Provider.getUserId()},updateUserAvatar:function(imageUrl){return TQ.user.UserManager.updateUserAvatar(imageUrl)},updateUserNameInStorage:function(newUserName){return TQ.user.UserManager.updateUserNameInStorage(newUserName)},updateUserDataWithChatterAvatar:function(user){return TQ.user.UserManager.updateUserDataWithChatterAvatar(user)},getUserDataPromise:function(){return TQ.user.UserInfo.getUserDataPromise()},getUserAvatarDataPromise:function(){return TQ.user.UserInfo.getUserAvatarDataPromise()},userInfo:{getUserId:function(){return TQ.user.UserInfo.getUserId()},getUserFieldValue:function(fieldName){return TQ.user.UserInfo.getUserFieldValue(fieldName)},getUserName:function(){return TQ.user.UserInfo.getUserName()},getUserEmail:function(){return TQ.user.UserInfo.getUserEmail()},getUserAvatar:function(){return TQ.user.UserInfo.getUserAvatar()},getUserFullImage:function(){return TQ.user.UserInfo.getUserFullImage()},setUserFieldValue:function(fieldApiName,value){return TQ.user.UserInfo.setUserFieldValue(fieldApiName,value)}}},Connector.bootstrap=TQ.bootstrap.Bootstrap,Connector.session={login:function(env){return TQ.bootstrap.Bootstrap._login(env)},getSelectedEnvironment:function(){return TQ.bootstrap.Bootstrap.getSelectedEnvironment()},getEnvironmentsList:function(){return TQ.bootstrap.Bootstrap.getEnvironmentsList()},getCurrentEnvironmentOption:function(env){return TQ.bootstrap.Bootstrap.getCurrentEnvironmentOption(env)},logout:function(){var logoutDeferred;return logoutDeferred=$.Deferred(),
TQ.log.Logger.info({namespace:"session",labels:"logout",message:"logging-out"}),TQ.sync.SyncEngine.flushQueue().done(function(uploadResult){return TQ.sync.SyncEngine.cleanAssignments().done(function(){return Salesforce.logout(function(success){return success?(store.clear(),TQ.store.Storage.clearAllStorages(),TQ.store.Storage.removeStorage(TQ.config.Core.DATA_STORAGE_NAME),TQ.device.Platform.isDevice()&&TQ.device.File.clearFileSystem(),setTimeout(function(){return TQ.device.Platform.restart()},2e3)):logoutDeferred.reject("SERVER_LOGOUT_ERROR")})}).fail(function(err){return logoutDeferred.reject(err)})}).fail(function(err){return logoutDeferred.reject(err)}),logoutDeferred},refreshAuth:function(){return TQ.schedule.Scheduler.stop(),TQ.status.SyncStatus.resetSyncStatusError(),setTimeout(function(){return TQ.device.Platform.restart()},2e3)},isAuthenticated:function(){return Salesforce.isAuthenticated()}},Connector.appstatus={PERFORM_LOGOUT:TQ.status.AppStatus.PERFORM_LOGOUT,isActivated:function(){return TQ.status.AppStatus.isActivated()},getErrorStatus:function(){return TQ.status.AppStatus.getErrorStatus()},getIsOfflineForced:function(){return TQ.status.AppStatus.isOfflineForced},toggleForceOffline:function(){return TQ.status.AppStatus.toggleForceOffline()},isOnline:function(){return TQ.status.AppStatus.isOnline()},connectionStatusChanged:function(eventHandlingMethod){return TQ.status.AppStatus.connectionStatusChanged(eventHandlingMethod)}},Connector.syncstatus={SYNC_ERROR:TQ.status.SyncStatus.SYNC_ERROR,SYNCHRONIZED:TQ.status.SyncStatus.SYNCHRONIZED,SYNCHRONIZING:TQ.status.SyncStatus.SYNCHRONIZING,AWAITING_SYNCHRONIZATION:TQ.status.SyncStatus.AWAITING_SYNCHRONIZATION,isSyncing:function(){return TQ.status.SyncStatus.isSyncing()},getSyncErrorMessage:function(){return TQ.status.SyncStatus.syncErrorMessage},getSyncStatus:function(){return TQ.status.SyncStatus.syncStatus},getRecordErrorCount:function(){return TQ.status.SyncStatus.recordErrorCount},getPendingRecordCount:function(){return TQ.status.SyncStatus.pendingRecordCount},onSyncStatusChange:function(handleMethod){return TQ.status.SyncStatus.onSyncStatusChange(handleMethod)},offSyncStatusChange:function(handleMethod){return TQ.status.SyncStatus.offSyncStatusChange(handleMethod)}},Connector.logger={log:function(entry){return TQ.log.Logger.log(entry)},info:function(entry){return TQ.log.Logger.info(entry)},warn:function(entry){return TQ.log.Logger.warn(entry)},error:function(entry){return TQ.log.Logger.error(entry)},getLoggedErrorsQueue:function(){return TQ.log.Logger.getLoggedErrorsQueue()}},Connector.chatter={FeedType:TQ.chatter.ChatterEngine.FeedType,startFeedObserving:function(feedType,feedObjectId,jobParameters,startCallback,successCallback,failCallback){return TQ.chatter.FeedObserver.startFeedObserving(feedType,feedObjectId,jobParameters,startCallback,successCallback,failCallback)},startFeedCommentsObserving:function(feedItemId,jobParameters,startCallback,successCallback,failCallback){return TQ.chatter.FeedObserver.startFeedCommentsObserving(feedItemId,jobParameters,startCallback,successCallback,failCallback)},startFollowersObserving:function(feedObjectId,jobParameters,startCallback,successCallback,failCallback){return TQ.chatter.FeedObserver.startFollwersObserving(feedObjectId,jobParameters,startCallback,successCallback,failCallback)},startConversationObserving:function(conversationId,jobParameters,startCallback,successCallback,failCallback){return TQ.chatter.FeedObserver.startConversationObserving(conversationId,jobParameters,startCallback,successCallback,failCallback)},downloadChatterFeedUpdates:function(feedType,feedObjectId,ignoreToken){return TQ.chatter.ChatterEngine.downloadChatterFeedUpdates(feedType,feedObjectId,ignoreToken)},downloadFeedItemComments:function(feedItemId){return TQ.chatter.ChatterEngine.downloadFeedItemComments(feedItemId,!0)},newFeedItemInstance:function(ParentRecordId){return TQ.chatter.ChatterSmartSync.newFeedItemInstance(ParentRecordId)},newFeedCommentInstance:function(feedItemId){return TQ.chatter.ChatterSmartSync.newFeedCommentInstance(feedItemId)},createFeedItemForRecordFeed:function(recordId,postText,postAttachemntLink,postAttachmentFileName,additionFields){return TQ.chatter.ChatterSmartSync.createFeedItemForRecordFeed(recordId,postText,postAttachemntLink,postAttachmentFileName,additionFields)},createTextFeedCommentForFeedItem:function(feedItemId,commentText,currentFeedItem){return TQ.chatter.ChatterSmartSync.createTextFeedCommentForFeedItem(feedItemId,commentText,currentFeedItem)},sendPrivateMessage:function(messageText,recepients,conversationId){return null==conversationId&&(conversationId=null),TQ.chatter.ChatterSmartSync.sendPrivateMessage(messageText,recepients,conversationId)},likeFeedEntity:function(feedEntity,isFeedItem){return null==isFeedItem&&(isFeedItem=!0),TQ.chatter.ChatterSmartSync.likeFeedEntity(feedEntity,isFeedItem)},dislikeFeedEntity:function(feedEntity,isFeedItem){return null==isFeedItem&&(isFeedItem=!0),TQ.chatter.ChatterSmartSync.dislikeFeedEntity(feedEntity,isFeedItem)},removeFeedItem:function(feedItem){return TQ.chatter.ChatterSmartSync.removeFeedItem(feedItem)},removeFeedComment:function(feedComment){return TQ.chatter.ChatterSmartSync.removeFeedComment(feedComment)},syncChatterFeedUpdates:function(feedType,feedObjectId){return TQ.chatter.ChatterEngine.syncChatterFeedUpdates(feedType,feedObjectId)},getChatterFeedPage:function(feedType,feedObjectId,page,pageSize,pageUrl){return TQ.chatter.ChatterSmartSync.getChatterFeedPage(feedType,feedObjectId,page,pageSize,pageUrl)},getConversationPage:function(conversationData,pageSize,startingDate,userId){return TQ.chatter.ChatterSmartSync.getConversationPage(conversationData,pageSize,startingDate,userId)},getFeedItemsByIds:function(feedItemIdList){return TQ.chatter.ChatterSmartSync.getFeedItemsByIds(feedItemIdList)},getFollowersList:function(feedObjectId){return TQ.chatter.ChatterSmartSync.getFollowersData(feedObjectId)}},Connector.sync={type:TQ.sync.SyncEngine.type,startSync:function(){return TQ.sync.SmartSync.startSync()},downloadFromServerAndCache:function(objectApiName,whereCondition){return TQ.sync.SyncEngine.downloadFromServerAndCache(objectApiName,whereCondition)},cancelActivation:function(){return TQ.sync.SyncEngine.cancelActivation()},getProgressPercent:function(){return TQ.sync.SyncEngine.getDownloadProgressPercent()},immediateUpload:function(tqRecordList){return TQ.sync.SyncEngine.immediateUpload(tqRecordList)},getLocalUrl:function(filePath){return TQ.sync.FileManager.getLocalUrl(filePath)},loadFile:function(filePath){return TQ.sync.FileManager.loadFile(filePath)},onFileLoad:function(filePath,successCallback,failCallback){return TQ.sync.FileManager.onFileLoad(filePath,successCallback,failCallback)},offFileLoad:function(filePath,successCallback,failCallback){return TQ.sync.FileManager.offFileLoad(filePath,successCallback,failCallback)},getLocalIdsForServerIds:function(serverIdsArray){return TQ.sync.LocalIdManager.getLocalIdsForServerIds(serverIdsArray)},getQueue:function(){return TQ.sync.SmartSync.getExpandedQueue()},getTrackedObjectRecordInstance:function(objectApiName){return TQ.sync.SmartSync.getTrackedObjectRecordInstance(objectApiName)}},Connector.metadata={getTrackedObjectFieldSet:function(objectApiName,fieldSetApiName){return TQ.metadata.Metadata.getTrackedObjectFieldSet(objectApiName,fieldSetApiName)},getTrackedObjectHeaderFieldSet:function(objectApiName){return TQ.metadata.Metadata.getTrackedObjectHeaderFieldSet(objectApiName)},getTrackedObjectList:function(){return TQ.metadata.Metadata.getTrackedObjectList()},getFieldApiNameLabelsMap:function(tqRecord,objectApiName){return TQ.metadata.Metadata.getFieldApiNameLabelsMap(tqRecord,objectApiName)},getFieldLabel:function(objectApiName,fieldApiName){return TQ.metadata.Metadata.getFieldLabel(objectApiName,fieldApiName)},getTrackedObjectRequiredFieldsMap:function(objectApiName){return TQ.metadata.Metadata.getTrackedObjectRequiredFieldsMap(objectApiName)},getTrackedObjectMetadata:function(objectApiName){return TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName)},getFieldMetadata:function(objectApiName,fieldApiName){return TQ.metadata.Metadata.getFieldMetadata(objectApiName,fieldApiName)},getNameField:function(objectApiName){return TQ.metadata.Metadata.getNameField(objectApiName)},getActivePicklistValues:function(objectApiName,fieldApiName){return TQ.metadata.Metadata.getActivePicklistValues(objectApiName,fieldApiName)},getRecordTypeId:function(objectApiName,recordTypeApiName){return TQ.metadata.Metadata.getRecordTypeId(objectApiName,recordTypeApiName)},getFieldsetLayout:function(objectApiName,fieldsetApiName,recordTypeApiName){return TQ.metadata.Metadata.getFieldsetLayout(objectApiName,fieldsetApiName,recordTypeApiName)},getRecordTypePicklistValues:function(objectApiName,recordTypeApiName){return TQ.metadata.Metadata.getRecordTypePicklistValues(objectApiName,recordTypeApiName)},isUpdatable:function(objectApiName,fieldApiName){return TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName).isUpdatable(fieldApiName)},isCreatable:function(objectApiName,fieldApiName){return TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName).isCreatable(fieldApiName)},isDisplayable:function(objectApiName,fieldApiName){return TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName).isDisplayable(fieldApiName)},isTrackedObjectCreatable:function(objectApiName){return TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName).isTrackedObjectCreatable()},isTrackedObjectEditable:function(objectApiName){return TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName).isTrackedObjectEditable()},isTrackedObjectDeletable:function(objectApiName){return TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName).isTrackedObjectDeletable()},isTrackedObjectDisplayable:function(objectApiName){return TQ.metadata.Metadata.getTrackedObjectMetadata(objectApiName).isTrackedObjectDisplayable()}},Connector.utils={connectivity:{isOfflineError:function(error){return TQ.util.Generic.isOfflineError(error)},isTimeoutError:function(error){return TQ.util.Generic.isTimeoutError(error)}},getFilenameFromUrl:function(url){return TQ.util.Generic.getFilenameFromUrl(url)},isResponseSuccessful:function(response){return TQ.util.Generic.isResponseSuccessful(response)},getResponseErrorList:function(response){return TQ.util.Generic.getResponseErrorList(response)}},Connector.schedule={JOB_EXECUTION_DELAYED:function(){return TQ.schedule.Scheduler.JOB_EXECUTION_DELAYED},executeTaskImmediately:function(taskId){return TQ.schedule.Scheduler.executeTaskImmediately(taskId)},getExecutingTaskDeferred:function(jobId){return TQ.schedule.Scheduler.getExecutingTaskDeferred(jobId)},onJobStart:function(jobId,handleMethod){return TQ.schedule.Scheduler.onJobStart(jobId,handleMethod)},onJobSuccess:function(jobId,handleMethod){return TQ.schedule.Scheduler.onJobSuccess(jobId,handleMethod)},onJobFail:function(jobId,handleMethod){return TQ.schedule.Scheduler.offJobFail(jobId,handleMethod)},offJobStart:function(jobId,handleMethod){return TQ.schedule.Scheduler.offJobStart(jobId,handleMethod)},offJobSuccess:function(jobId,handleMethod){return TQ.schedule.Scheduler.offJobSuccess(jobId,handleMethod)},offJobFail:function(jobId,handleMethod){return TQ.schedule.Scheduler.offJobFail(jobId,handleMethod)}},Connector}()})}),define("coreapi",["angular","acnCore/connector"],function(angular){return angular.module("tq.coreapi",[]).service("tqCoreConnector",function($q){this.errors=TQ.Connector.errors,this.bootstrap={start:function(){return $q.when(TQ.Connector.bootstrap.start())}},this.device={connection:{OFFLINE:TQ.Connector.device.connection.OFFLINE},share:{ShareType:TQ.Connector.device.share.ShareType,shareVia:function(shareType,messageText,imageUrl,link){return $q.when(TQ.Connector.device.share.shareVia(shareType,messageText,imageUrl,link))}},platform:{isDevice:function(){return TQ.Connector.device.platform.isDevice()},isIOS:function(){return TQ.Connector.device.platform.isIOS()},isAndroid:function(){return TQ.Connector.device.platform.isAndroid()},restart:function(){return TQ.Connector.device.platform.restart()}},scan:{barcode:{scan:function(){return $q.when(TQ.Connector.device.scan.barcode.scan())}},nfc:{startListening:function(){return $q.when(TQ.Connector.device.scan.nfc.startListening())},stoptListening:function(){return $q.when(TQ.Connector.device.scan.nfc.stoptListening())},NFC_NOT_AVAILABLE:TQ.Connector.device.scan.nfc.NFC_NOT_AVAILABLE}},media:{picture:{getPicture:function(source){return $q.when(TQ.Connector.device.media.picture.getPicture(source))},NO_IMAGE_SELECTED:TQ.Connector.device.media.picture.NO_IMAGE_SELECTED,MAX_FILE_SIZE_EXCEEDED:TQ.Connector.device.media.picture.MAX_FILE_SIZE_EXCEEDED,PICTURE_NOT_AVAILABLE:TQ.Connector.device.media.picture.PICTURE_NOT_AVAILABLE,TAKE_PICTURE:TQ.Connector.device.media.picture.TAKE_PICTURE,PICK_PICTURE:TQ.Connector.device.media.picture.PICK_PICTURE},video:{},audio:{}},file:{openFile:function(record,bodyFieldApiName){return $q.when(TQ.Connector.device.file.openFile(record,bodyFieldApiName))},shareRecordWithFile:function(record){return $q.when(TQ.Connector.device.file.shareRecordWithFile(record))},removeFile:function(fileURI){return $q.when(TQ.Connector.device.file.removeFile(fileURI))},OFFLINE:TQ.Connector.device.file.OFFLINE,LOAD_FILE_FROM_SERVER_ERROR:TQ.Connector.device.file.LOAD_FILE_FROM_SERVER_ERROR,ERROR_SHARING_IS_NOT_AVAILABLE:TQ.Connector.device.file.ERROR_SHARING_IS_NOT_AVAILABLE}},this.app={getAppSettingsValue:function(fieldName){return TQ.Connector.app.getAppSettingsValue(fieldName)}},this.user={getId:function(){return TQ.Connector.user.getId()},updateUserAvatar:function(imageUrl){return $q.when(TQ.Connector.user.updateUserAvatar(imageUrl))},updateUserNameInStorage:function(newUserName){return $q.when(TQ.Connector.user.updateUserNameInStorage(newUserName))},updateUserDataWithChatterAvatar:function(user){return $q.when(TQ.Connector.user.updateUserDataWithChatterAvatar(user))},getUserDataPromise:function(){return $q.when(TQ.Connector.user.getUserDataPromise())},getUserAvatarDataPromise:function(){return $q.when(TQ.Connector.user.getUserAvatarDataPromise())},userInfo:TQ.Connector.user.userInfo},this.sync={type:{ACTIVATION:TQ.Connector.sync.type.ACTIVATION,INCREMENTAL_OR_NONE:TQ.Connector.sync.type.INCREMENTAL_OR_NONE},startSync:function(){return $q.when(TQ.Connector.sync.startSync())},syncServer:function(objectApiName,flatQuery){return $q.when(TQ.Connector.sync.syncServer(objectApiName,flatQuery))},getQueue:function(){return $q.when(TQ.Connector.sync.getQueue())},immediateUpload:function(tqRecordList){return $q.when(TQ.Connector.sync.immediateUpload(tqRecordList))},getLocalUrl:function(filePath){return TQ.Connector.sync.getLocalUrl(filePath)},loadFile:function(filePath){return $q.when(TQ.Connector.sync.loadFile(filePath))},onFileLoad:function(filePath,successCallback,failCallback){TQ.Connector.sync.onFileLoad(filePath,successCallback,failCallback)},offFileLoad:function(filePath,successCallback,failCallback){TQ.Connector.sync.offFileLoad(filePath,successCallback,failCallback)},getLocalIdsForServerIds:function(serverIds){return TQ.Connector.sync.getLocalIdsForServerIds(serverIds)},cancelActivation:function(){TQ.Connector.sync.cancelActivation()},downloadFromServerAndCache:function(objectApiName,whereCondition){return $q.when(TQ.Connector.sync.downloadFromServerAndCache(objectApiName,whereCondition))}},this.record={hasError:function(record){return TQ.Connector.record.hasError(record)},getTrackedObjectRecordInstance:function(objectApiName){return TQ.Connector.sync.getTrackedObjectRecordInstance(objectApiName)},isNewInstance:function(record){return TQ.Connector.record.isNewInstance(record)}},this.storage={find:function(query,includeDeleted){return $q.when(TQ.Connector.storage.find(query,includeDeleted))},findOne:function(query){return $q.when(TQ.Connector.storage.findOne(query))},upsert:function(record){return $q.when(TQ.Connector.storage.upsert(record))},remove:function(record){return $q.when(TQ.Connector.storage.remove(record))},count:function(){},findRecordById:function(objectName,id,includeDeleted){return $q.when(TQ.Connector.storage.find({objectApiName:objectName,where:{Id:{$eq:id}}},"undefined"==typeof includeDeleted?!0:includeDeleted))},resetLocalChanges:function(record){return $q.when(TQ.Connector.storage.resetLocalChanges(record))},validateRecord:function(record){return TQ.Connector.storage.validateRecord(record)},generateParentRecordMap:function(record){return TQ.Connector.storage.generateParentRecordMap(record)},storeExist:function(storeName){return TQ.Connector.storage.storeExist(storeName)},commitChangesForRecord:function(record){return $q.when(TQ.Connector.storage.commitChangesForRecord(record))},createIndex:function(indexName,objectApiName,fieldsArray,isUnique){return $q.when(TQ.Connector.storage.createIndex(indexName,objectApiName,fieldsArray,isUnique))}},this.appstatus={PERFORM_LOGOUT:TQ.Connector.appstatus.PERFORM_LOGOUT,isActivated:function(){return TQ.Connector.appstatus.isActivated()},getErrorStatus:function(){return TQ.Connector.appstatus.getErrorStatus()},getIsOfflineForced:function(){return TQ.Connector.appstatus.getIsOfflineForced()},toggleForceOffline:function(){return TQ.Connector.appstatus.toggleForceOffline()},isOnline:function(){return TQ.Connector.appstatus.isOnline()},connectionStatusChanged:function(eventHandlingMethod){return TQ.Connector.appstatus.connectionStatusChanged(eventHandlingMethod)}},this.syncstatus={SYNC_ERROR:TQ.Connector.syncstatus.SYNC_ERROR,SYNCHRONIZED:TQ.Connector.syncstatus.SYNCHRONIZED,SYNCHRONIZING:TQ.Connector.syncstatus.SYNCHRONIZING,AWAITING_SYNCHRONIZATION:TQ.Connector.syncstatus.AWAITING_SYNCHRONIZATION,isSyncing:function(){return TQ.Connector.syncstatus.isSyncing()},getSyncErrorMessage:function(){return TQ.Connector.syncstatus.getSyncErrorMessage()},getSyncStatus:function(){return TQ.Connector.syncstatus.getSyncStatus()},getRecordErrorCount:function(){return TQ.Connector.syncstatus.getRecordErrorCount()},getPendingRecordCount:function(){return TQ.Connector.syncstatus.getPendingRecordCount()},onSyncStatusChange:function(handleMethod){return TQ.Connector.syncstatus.onSyncStatusChange(handleMethod)},offSyncStatusChange:function(handleMethod){return TQ.Connector.syncstatus.offSyncStatusChange(handleMethod)}},this.logger={log:function(entry){return TQ.Connector.logger.log(entry)},info:function(entry){return TQ.Connector.logger.info(entry)},warn:function(entry){return TQ.Connector.logger.warn(entry)},error:function(entry){return TQ.Connector.logger.error(entry)},getLoggedErrorsQueue:function(){return TQ.Connector.logger.getLoggedErrorsQueue()}},this.metadata={getTrackedObjectHeaderFieldSet:function(objectApiName){return TQ.Connector.metadata.getTrackedObjectHeaderFieldSet(objectApiName)},getTrackedObjectFieldSet:function(objectApiName,fieldSetApiName){return TQ.Connector.metadata.getTrackedObjectFieldSet(objectApiName,fieldSetApiName)},getFieldMetadata:function(objectApiName,fieldApiName){return TQ.Connector.metadata.getFieldMetadata(objectApiName,fieldApiName)},getFieldLabel:function(objectApiName,fieldApiName){return TQ.Connector.metadata.getFieldLabel(objectApiName,fieldApiName)},getFieldApiNameLabelsMap:function(record,objectApiName){return TQ.Connector.metadata.getFieldApiNameLabelsMap(record,objectApiName)},getTrackedObjectMetadata:function(objectApiName){return TQ.Connector.metadata.getTrackedObjectMetadata(objectApiName)},getTrackedObjectLabel:function(objectApiName,plural){return plural?TQ.Connector.metadata.getTrackedObjectMetadata(objectApiName).modelDescribe.labelPlural:TQ.Connector.metadata.getTrackedObjectMetadata(objectApiName).modelDescribe.label},getNameField:function(objectApiName){return TQ.Connector.metadata.getNameField(objectApiName)},getActivePicklistValues:function(objectApiName,fieldApiName){return TQ.Connector.metadata.getActivePicklistValues(objectApiName,fieldApiName)},getTrackedObjectRequiredFieldsMap:function(objectApiName){return TQ.Connector.metadata.getTrackedObjectRequiredFieldsMap(objectApiName)},isUpdatable:function(objectApiName,fieldApiName){return TQ.Connector.metadata.isUpdatable(objectApiName,fieldApiName)},isCreatable:function(objectApiName,fieldApiName){return TQ.Connector.metadata.isCreatable(objectApiName,fieldApiName)},isDisplayable:function(objectApiName,fieldApiName){return TQ.Connector.metadata.isDisplayable(objectApiName,fieldApiName)},isTrackedObjectCreatable:function(objectApiName){return TQ.Connector.metadata.isTrackedObjectCreatable(objectApiName)},isTrackedObjectEditable:function(objectApiName){return TQ.Connector.metadata.isTrackedObjectEditable(objectApiName)},isTrackedObjectDeletable:function(objectApiName){return TQ.Connector.metadata.isTrackedObjectDeletable(objectApiName)},isTrackedObjectDisplayable:function(objectApiName){return TQ.Connector.metadata.isTrackedObjectDisplayable(objectApiName)},getRecordTypeId:function(objectApiName,recordTypeApiName){return TQ.Connector.metadata.getRecordTypeId(objectApiName,recordTypeApiName)},getRecordTypePicklistValues:function(objectApiName,recordTypeApiName){return TQ.Connector.metadata.getRecordTypePicklistValues(objectApiName,recordTypeApiName)},getFieldsetLayout:function(objectApiName,fieldsetApiName,recordTypeApiName){return $q.when(TQ.Connector.metadata.getFieldsetLayout(objectApiName,fieldsetApiName,recordTypeApiName))}},this.session={logout:function(){return $q.when(TQ.Connector.session.logout())},refreshAuth:function(){TQ.Connector.session.refreshAuth()},isAuthenticated:function(){return TQ.Connector.session.isAuthenticated()},login:function(env){return $q.when(TQ.Connector.session.login(env))},getSelectedEnvironment:function(){return TQ.Connector.session.getSelectedEnvironment()},getEnvironmentsList:function(){return TQ.Connector.session.getEnvironmentsList()},getCurrentEnvironmentOption:function(env){return TQ.Connector.session.getCurrentEnvironmentOption(env)}},this.config={getEnableAnimations:function(){return TQ.Connector.config.core.getEnableAnimations()},isOnlineOnlyEnabled:function(){return TQ.Connector.config.core.isOnlineOnlyEnabled()}},this.utils={connectivity:{isTimeoutError:function(error){return TQ.Connector.utils.connectivity.isTimeoutError(error)},isOfflineError:function(error){return TQ.Connector.utils.connectivity.isOfflineError(error)}},getFilenameFromUrl:function(url){return TQ.Connector.utils.getFilenameFromUrl(url)},isResponseSuccessful:function(response){return TQ.Connector.utils.isResponseSuccessful(response)},getResponseErrorList:function(response){return TQ.Connector.utils.getResponseErrorList(response)}},this.chatter={FeedType:TQ.Connector.chatter.FeedType,downloadChatterFeedUpdates:function(feedType,feedObjectId,ignoreToken){return $q.when(TQ.Connector.chatter.downloadChatterFeedUpdates(feedType,feedObjectId,ignoreToken))},syncChatterFeedUpdates:function(feedType,feedObjectId){return $q.when(TQ.Connector.chatter.syncChatterFeedUpdates(feedType,feedObjectId))},downloadFeedItemComments:function(feedItemId){return $q.when(TQ.Connector.chatter.downloadFeedItemComments(feedItemId))},getFollowersList:function(feedObjectId){return $q.when(TQ.Connector.chatter.getFollowersList(feedObjectId))},startFeedObserving:function(feedType,feedObjectId,jobParameters,startCallback,successCallback,failCallback){return TQ.Connector.chatter.startFeedObserving(feedType,feedObjectId,jobParameters,startCallback,successCallback,failCallback)},startFeedCommentsObserving:function(feedItemId,jobParameters,startCallback,successCallback,failCallback){return TQ.Connector.chatter.startFeedCommentsObserving(feedItemId,jobParameters,startCallback,successCallback,failCallback)},startFollowersObserving:function(feedObjectId,jobParameters,startCallback,successCallback,failCallback){return TQ.Connector.chatter.startFollowersObserving(feedObjectId,jobParameters,startCallback,successCallback,failCallback)},startConversationObserving:function(conversationId,jobParameters,startCallback,successCallback,failCallback){return TQ.Connector.chatter.startConversationObserving(conversationId,jobParameters,startCallback,successCallback,failCallback)},newFeedItemInstance:function(ParentRecordId){return TQ.Connector.chatter.newFeedItemInstance(ParentRecordId)},newFeedCommentInstance:function(feedItemId){return TQ.Connector.chatter.newFeedCommentInstance(feedItemId)},createFeedItemForRecordFeed:function(recordId,postText,postAttachemntLink,postAttachmentFileName,additionFields){return $q.when(TQ.Connector.chatter.createFeedItemForRecordFeed(recordId,postText,postAttachemntLink,postAttachmentFileName,additionFields))},createTextFeedCommentForFeedItem:function(feedItemId,commentText,feedItem){return $q.when(TQ.Connector.chatter.createTextFeedCommentForFeedItem(feedItemId,commentText,feedItem))},sendPrivateMessage:function(messageText,recepients,conversationId){return $q.when(TQ.Connector.chatter.sendPrivateMessage(messageText,recepients,conversationId))},likeFeedEntity:function(feedEntity,isFeedItem){return $q.when(TQ.Connector.chatter.likeFeedEntity(feedEntity,isFeedItem))},dislikeFeedEntity:function(feedEntity,isFeedItem){return $q.when(TQ.Connector.chatter.dislikeFeedEntity(feedEntity,isFeedItem))},removeFeedItem:function(feedItem){return $q.when(TQ.Connector.chatter.removeFeedItem(feedItem))},removeFeedComment:function(feedComment){return $q.when(TQ.Connector.chatter.removeFeedComment(feedComment))},getChatterFeedPage:function(feedType,feedObjectId,page,pageSize,pageUrl){return $q.when(TQ.Connector.chatter.getChatterFeedPage(feedType,feedObjectId,page,pageSize,pageUrl))},getConversationPage:function(conversationData,pageSize,startingDate,userId){return $q.when(TQ.Connector.chatter.getConversationPage(conversationData,pageSize,startingDate,userId))},getFeedItemsByIds:function(feedItemIdList){return $q.when(TQ.Connector.chatter.getFeedItemsByIds(feedItemIdList))}},this.schedule={JOB_EXECUTION_DELAYED:TQ.Connector.schedule.JOB_EXECUTION_DELAYED,executeTaskImmediately:function(jobId){var taskPromise=TQ.Connector.schedule.executeTaskImmediately(jobId);return taskPromise&&(taskPromise=$q.when(taskPromise)),taskPromise},getExecutingTaskDeferred:function(jobId){return $q.when(TQ.Connector.schedule.getExecutingTaskDeferred(jobId))},onJobStart:function(jobId,handleMethod){return TQ.Connector.schedule.onJobStart(jobId,handleMethod)},onJobSuccess:function(jobId,handleMethod){return TQ.Connector.schedule.onJobSuccess(jobId,handleMethod)},onJobFail:function(jobId,handleMethod){return TQ.Connector.schedule.onJobFail(jobId,handleMethod)},offJobStart:function(jobId,handleMethod){return TQ.Connector.schedule.offJobStart(jobId,handleMethod)},offJobSuccess:function(jobId,handleMethod){return TQ.Connector.schedule.offJobSuccess(jobId,handleMethod)},offJobFail:function(jobId,handleMethod){return TQ.Connector.schedule.offJobFail(jobId,handleMethod)}},this.getTrackedObjectsList=function(){var def=$q.defer(),defList=[],that=this,trackedObjectList=TQ.Connector.metadata.getTrackedObjectList();return _.each(trackedObjectList,function(trackObject){defList.push($q.when(TQ.Connector.storage.count(trackObject)))}),$q.all(defList).then(function(countList){for(var result=[],i=0;i<trackedObjectList.length;i++)result.push({name:trackedObjectList[i],label:that.metadata.getTrackedObjectLabel(trackedObjectList[i]),count:countList[i]});def.resolve(result)}),def.promise}})}),define("app/config",["acnCore/config/core","acnCore/connector"],function(){var Client;return namespace({TQ:{config:Client=function(){function Client(){}return Client.PRINT_TO_CONSOLE=!0,Client.SAVE_TO_CACHE=!0,Client.SUBMIT_TO_SERVER=!0,Client.clientAppId="mtsApp",Client.defaultStartState="/profile/edit",Client.onlineOnlyEnabled=!0,Client.enableAnimations=!0,Client.developmentMode=!1,Client.ENVIRONMENT_OPTIONS=[{label:"Production",environment:"production",value:"https://login.salesforce.com/",logEntriesToken:null,googleAnalyticsTrackingId:null,registrationAPI:null},{label:"Sandbox",environment:"develop",value:"https://mts-travcorp.cs17.force.com/TTC/",logEntriesToken:null,googleAnalyticsTrackingId:null,registrationAPI:null},{logEntriesToken:null,environment:"alpha",label:"UAT",loginURL:"https://test.salesforce.com/",googleAnalyticsTrackingId:"",registrationAPI:""},{logEntriesToken:null,environment:"beta",label:"Full copy",loginURL:"https://test.salesforce.com/",googleAnalyticsTrackingId:"",registrationAPI:""}],Client.initializeCoreOverride=function(){var key,val;for(key in this)val=this[key],_.isFunction(val)||TQ.config.Core.setCoreProperty(key,this[key]);return!0},Client.overrideCore=Client.initializeCoreOverride(),Client}()}})}),define("templatesApp",["angular"],function(angular){angular.module("templates-app",["acn-one/acn-ng/activation/activation.tpl.html","acn-one/acn-ng/chatter/chatter.tpl.html","acn-one/acn-ng/components/accordion/accordion.tpl.html","acn-one/acn-ng/components/carousel/carousel.tpl.html","acn-one/acn-ng/components/chatter/actionbuttons/actionbuttons.tpl.html","acn-one/acn-ng/components/chatter/comment/comment.tpl.html","acn-one/acn-ng/components/chatter/feed/feed.tpl.html","acn-one/acn-ng/components/chatter/feeditem/feeditem.tpl.html","acn-one/acn-ng/components/chatter/list/list.tpl.html","acn-one/acn-ng/components/chatter/post/post.tpl.html","acn-one/acn-ng/components/circularmenu/circularmenu.tpl.html","acn-one/acn-ng/components/collapsible/collapsible.tpl.html","acn-one/acn-ng/components/footer/footer.tpl.html","acn-one/acn-ng/components/hero-profile-picture/hero-profile-picture.tpl.html","acn-one/acn-ng/components/input/date/date.tpl.html","acn-one/acn-ng/components/input/datetime/datetime.tpl.html","acn-one/acn-ng/components/input/lookup/lookup.tpl.html","acn-one/acn-ng/components/input/lookup/lookupmodal.tpl.html","acn-one/acn-ng/components/input/multiselect/multiselect.tpl.html","acn-one/acn-ng/components/input/select/select.tpl.html","acn-one/acn-ng/components/item-group/item-group.tpl.html","acn-one/acn-ng/components/list/attachment/attachment.tpl.html","acn-one/acn-ng/components/list/item/item.tpl.html","acn-one/acn-ng/components/list/list.tpl.html","acn-one/acn-ng/components/list/listwithoutscroller.tpl.html","acn-one/acn-ng/components/list/listwithscroller.tpl.html","acn-one/acn-ng/components/list/related/related.tpl.html","acn-one/acn-ng/components/list/search/search.tpl.html","acn-one/acn-ng/components/list/sort/sort.tpl.html","acn-one/acn-ng/components/map/map.tpl.html","acn-one/acn-ng/components/media/picture/picture.tpl.html","acn-one/acn-ng/components/popup/criticalerror/criticalerror.tpl.html","acn-one/acn-ng/components/popup/error/error.tpl.html","acn-one/acn-ng/components/recorddetail/recorddetail.tpl.html","acn-one/acn-ng/components/scan/barcode/barcode.tpl.html","acn-one/acn-ng/components/socialsharing/sharePopoupContent.tpl.html","acn-one/acn-ng/components/viewfullimg/viewfullimg.tpl.html","acn-one/acn-ng/details/details.tpl.html","acn-one/acn-ng/edit/edit.tpl.html","acn-one/acn-ng/feedback/feedback.tpl.html","acn-one/acn-ng/home/home.tpl.html","acn-one/acn-ng/index.tpl.html","acn-one/acn-ng/login/login.tpl.html","acn-one/acn-ng/objects/objects.tpl.html","acn-one/acn-ng/records/records.tpl.html","acn-one/acn-ng/showroom/showroom.tpl.html","acn-one/acn-ng/synccenter/synccenter.tpl.html","apps/mts/aboutMtsPopupContent.tpl.html","apps/mts/assetcatalogue/assetcatalogue.tpl.html","apps/mts/destinations/aboutDestinationsPopupContent.tpl.html","apps/mts/destinations/bucketlist/bucketlist.tpl.html","apps/mts/destinations/ielayout.tpl.html","apps/mts/destinations/layout.tpl.html","apps/mts/destinations/map.tpl.html","apps/mts/destinations/visited/visited.tpl.html","apps/mts/horizon/aboutHorizonPopoupContent.tpl.html","apps/mts/horizon/horizon.tpl.html","apps/mts/horizon/overview/header.tpl.html","apps/mts/horizon/overview/overview.tpl.html","apps/mts/index.tpl.html","apps/mts/layout/applayout.tpl.html","apps/mts/layout/navbar/navbar.tpl.html","apps/mts/layout/sidemenu/sidemenu.tpl.html","apps/mts/layout/sidemenu/triplist/triplist.tpl.html","apps/mts/layout/tabbar/tabbar.tpl.html","apps/mts/profile/header.tpl.html","apps/mts/profile/myprofile/aboutProfilePopoupContent.tpl.html","apps/mts/profile/myprofile/edit.tpl.html","apps/mts/profile/myprofile/view.tpl.html","apps/mts/profile/preferences/preferences.tpl.html","apps/mts/trip/chatter/aboutChatterPopupContent.tpl.html","apps/mts/trip/chatter/actionbuttons.tpl.html","apps/mts/trip/chatter/chatter.side.tpl.html","apps/mts/trip/chatter/chatter.tpl.html","apps/mts/trip/chatter/commentbuttons.tpl.html","apps/mts/trip/chatter/header.tpl.html","apps/mts/trip/community/aboutCommunityPopoupContent.tpl.html","apps/mts/trip/community/community.tpl.html","apps/mts/trip/conversation/conversation.side.tpl.html","apps/mts/trip/conversation/conversation.tpl.html","apps/mts/trip/header.tpl.html","apps/mts/trip/itinerary/aboutItineraryPopoupContent.tpl.html","apps/mts/trip/itinerary/header.tpl.html","apps/mts/trip/itinerary/itinerary.tpl.html","apps/mts/trip/journal/aboutJournalPopoupContent.tpl.html","apps/mts/trip/journal/header.tpl.html","apps/mts/trip/journal/journal-day-dropdown.tpl.html","apps/mts/trip/journal/journal.note.edit.tpl.html","apps/mts/trip/journal/journal.note.view.tpl.html","apps/mts/trip/journal/journal.tpl.html","apps/mts/trip/journal/popup.tpl.html","apps/mts/trip/layout.tpl.html","apps/mts/trip/overview/overview.tpl.html","apps/mts/trip/trip.side.tpl.html","apps/myTrafalgar/abstracttripstate/chatter/chatter.tpl.html","apps/myTrafalgar/abstracttripstate/chatter/substates/chatter-substate.tpl.html","apps/myTrafalgar/abstracttripstate/chatter/substates/otherguest-substate.tpl.html","apps/myTrafalgar/abstracttripstate/chatter/substates/traveldirector-substate.tpl.html","apps/myTrafalgar/abstracttripstate/itinerary/itinerary.tpl.html","apps/myTrafalgar/abstracttripstate/kbyg/kbyg.tpl.html","apps/myTrafalgar/abstracttripstate/nextbutton.tpl.html","apps/myTrafalgar/brochure/brochure.tpl.html","apps/myTrafalgar/brochure/item/item.tpl.html","apps/myTrafalgar/comments/comments.tpl.html","apps/myTrafalgar/components/chatter/actionbuttons/actionbuttons.tpl.html","apps/myTrafalgar/components/chatter/actionbuttons/commentbuttons.tpl.html","apps/myTrafalgar/components/chatter/chatter.tpl.html","apps/myTrafalgar/components/chatter/post/post.tpl.html","apps/myTrafalgar/components/cornerbox/cornerbox.tpl.html","apps/myTrafalgar/components/date/display/display.tpl.html","apps/myTrafalgar/components/date/picker/picker.tpl.html","apps/myTrafalgar/components/feedback/bugmodal.tpl.html","apps/myTrafalgar/components/feedback/button.tpl.html","apps/myTrafalgar/components/feedback/feedbackmodal.tpl.html","apps/myTrafalgar/components/footer/footer.tpl.html","apps/myTrafalgar/components/itinerary/itinerary.tpl.html","apps/myTrafalgar/components/journal/momentpopup/momentpopup.tpl.html","apps/myTrafalgar/components/viewfullimg/viewfullimg.tpl.html","apps/myTrafalgar/enquiry/enquiry-invalid-form-popup.tpl.html","apps/myTrafalgar/enquiry/enquiry.tpl.html","apps/myTrafalgar/help/help.tpl.html","apps/myTrafalgar/index.tpl.html","apps/myTrafalgar/journal/journal.tpl.html","apps/myTrafalgar/journal/notes.tpl.html","apps/myTrafalgar/journal/postcards.tpl.html","apps/myTrafalgar/login/login.tpl.html","apps/myTrafalgar/profile/profile.tpl.html","apps/myTrafalgar/register/addtrip.tpl.html","apps/myTrafalgar/register/register.tpl.html","apps/myTrafalgar/selectedtrip/selectedtrip.tpl.html","apps/myTrafalgar/selectedtrip/substates/chatter-substate.tpl.html","apps/myTrafalgar/tripnavigator/triplist/item/item.tpl.html","apps/myTrafalgar/tripnavigator/triplist/triplist.tpl.html","apps/myTrafalgar/tripnavigator/tripnavigator.tpl.html","apps/myTrafalgar/useragreement/useragreement.tpl.html","apps/myTrafalgar/wizard/wizard.tpl.html","apps/tops/index.tpl.html","apps/tops/navbar/navbar.tpl.html","apps/tops/profile/allocations/allocations.tpl.html","apps/tops/profile/profile-header.tpl.html","apps/tops/profile/profile-left-menu.tpl.html","apps/tops/profile/profile.tpl.html","apps/tops/profile/skills/skills.tpl.html","apps/tops/sidemenu-right/sidemenu-right.tpl.html","apps/tops/trip/overview/overview.tpl.html","apps/tops/trip/trip-header.tpl.html","apps/tops/trip/trip-left-menu.tpl.html","apps/tops/trip/trip.tpl.html","you-one/index.tpl.html","you-one/popup/about/about.tpl.html","you-one/terms/terms.tpl.html"]),
angular.module("acn-one/acn-ng/activation/activation.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/activation/activation.tpl.html",'<ion-view view-title="Activation"\n          class="tq-activation">\n\n    <ion-content scroll="false">\n\n        <!-- message -->\n        <div class="explanation">\n                Activation is required the first time you start the app in order to synchronize your data!\n                <br>\n                <br>\n                Push the button in order to start your first synchronization\n        </div>\n\n        <!-- activation progress indicator -->\n        <div class="progress-indicator"\n             ng-show="activating && online">\n\n            <div ang:round:progress data-round-progress-model="roundProgressData"\n                 data-round-progress-width="300"\n                 data-round-progress-height="185"\n                 data-round-progress-outer-circle-width="5"\n                 data-round-progress-outer-circle-radius="80"\n                 data-round-progress-label-font="20pt Arial"\n                 data-round-progress-outer-circle-background-color="transparent"\n                 data-round-progress-outer-circle-foreground-color="#AA1133"\n                 data-round-progress-inner-circle-color="transparent"\n                 data-round-progress-label-color="#AA1133">\n            </div>\n        </div>\n\n        <!-- activation progress icon btn -->\n        <div class="controls">\n            <div class="start-activation"\n                 ng-if="!activating && online"\n                 ng-click="activate()">\n                <i class="ion-android-download activation-icon"></i>\n            </div>\n\n            <!-- activation not possible message -->\n            <div class="offline" ng-if="!online">\n                You need to be online in order to activate the application\n            </div>\n        </div>\n\n        <div class="progress"\n             ng-if="roundProgressData.percentage != 0 && roundProgressData.percentage < 0.90">\n\n            <a ng-click="cancelActivation()"\n                    class="button cancel">\n                Cancel\n            </a>\n        </div>\n\n    </ion-content>\n</ion-view>')}]),angular.module("acn-one/acn-ng/chatter/chatter.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/chatter/chatter.tpl.html",'<ion-view title="Chatter" class="tq-chatter">\n    <ion-content>\n        <!-- this feed displays feed item related to the user (user feed) -->\n        <tq-chatter-feed\n                feed-object-id="\'userId\'">\n            <h1>Chatter</h1>\n            <img src="assets/chatter-icon.png" class="chatter-icon">\n            <tq-chatter-post></tq-chatter-post>\n            <tq-list object-api-name="\'FeedItem\'" orderby="\'CreatedDate DESC\'">\n\n                <tq-chatter-feeditem ng-repeat="record in records" index="$index" ng-cloak record="record" object-api-name="objectApiName" click="click(index, record)" swipe="swipe(action, index)" swipe-options="[\n'+"                    {action:'edit', icon: 'ion-compose'},\n                    {action:'remove', icon: 'ion-trash-b'}\n                 ]\">\n                </tq-chatter-feeditem>\n\n            </tq-list>\n        </tq-chatter-feed>\n    </ion-content>\n</ion-view>\n")}]),angular.module("acn-one/acn-ng/components/accordion/accordion.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/accordion/accordion.tpl.html",'<div class="tq-accordion">\n    <div class="tq-accordion-item"\n         ng-repeat="item in items">\n\n        <!-- fixed -->\n        <div class="tq-accordion-header"\n             ng-click="toggleItemBody(item)">\n            {{item.rawRecord.Title__c}}\n        </div>\n        <!-- not fixed -->\n        <div class="tq-accordion-body" ng-show="isToggled(item)">\n            {{item.rawRecord.Text__c}}\n        </div>\n\n    </div>\n</div>')}]),angular.module("acn-one/acn-ng/components/carousel/carousel.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/carousel/carousel.tpl.html",'<div class="jcarousel-wrapper" ng-show="images && images.length > 0">\n\t<div class="jcarousel">\n\t\t<ul class="jcarousel-list">\n\t\t\t<li ng-repeat="img in images" id="{{img.id}}" ng-style="{\'background-image\':\'url(\'+img.source+\')\'}"\n                ng-click="elementClick(img.id)">\n\t\t\t\t<!--img ng-src="{{img.source}}" /-->\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t<a href="javascript:void(0)" class="jcarousel-control-prev">&lsaquo;</a>\n\t<a href="javascript:void(0)" class="jcarousel-control-next">&rsaquo;</a>\n</div>')}]),angular.module("acn-one/acn-ng/components/chatter/actionbuttons/actionbuttons.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/chatter/actionbuttons/actionbuttons.tpl.html",'<div ng-class="actionButtons.class" class="item tabs tabs-secondary">\n    <a class="tab-item" ng-click="actionButtons.toggleLike(record)">\n        <i class="icon ion-thumbsup"></i>Like\n        <span class="tq-chatter-like-count">{{record.rawRecord.LikeCount}}</span>\n    </a>\n    <a class="tab-item" ng-click="actionButtons.comment(record)">\n        <i class="icon ion-chatbox"></i> Comment\n        <span class="tq-chatter-comment-count">{{record.rawRecord.CommentCount}}</span>\n    </a>\n    <a class="tab-item" ng-click="actionButtons.share(record)">\n        <i class="icon ion-share"></i> Share\n    </a>\n</div>')}]),angular.module("acn-one/acn-ng/components/chatter/comment/comment.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/chatter/comment/comment.tpl.html",'<div class="card tq-chatter-comment">\n    <!-- user avatar -->\n    <div class="item item-thumbnail-left item-text-wrap">\n        <img tq-lazy-src="{{record.chatterData.UserPhotoData.smallPhotoUrl}}" class="tq-chatter-user-avatar" />\n        <div class="text-body">\n            <div class="tq-chatter-delete-button icon-ttc-trash" ng-if="deletionPossible()" ng-click="deleteComment()"></div>\n            <h2>{{record.chatterData.UserName}}</h2>\n            <p class="feed-body" ng-bind-html="record.rawRecord.CommentBody">\n            </p>\n        </div>\n        <div id="actionButtonsInsert"></div>\n    </div>\n</div>\n\n')}]),angular.module("acn-one/acn-ng/components/chatter/feed/feed.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/chatter/feed/feed.tpl.html",'<div class="tq-chatter-feed-container">\n</div>\n')}]),angular.module("acn-one/acn-ng/components/chatter/feeditem/feeditem.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/chatter/feeditem/feeditem.tpl.html",'<div class="tq-chatter-feed-item">\n    <!-- user avatar -->\n    <div class="item item-thumbnail-left item-text-wrap">\n        <img tq-lazy-src="{{record.chatterData.UserPhotoData.smallPhotoUrl}}" class="tq-chatter-user-avatar" />\n        <div class="text-body">\n            <div class="tq-chatter-delete-button icon-ttc-trash" ng-if="deletionPossible()" ng-click="deleteItem(record)"></div>\n            <h2 ng-bind="record.chatterData.UserName"></h2>\n            <p class="feed-datetime" ng-bind="chatterFormatDate(record.dbOrigins.CreatedDate)"></p>\n            <p class="feed-body" ng-bind-html="record.rawRecord.Body"></p>\n            <div class="tq-attachment-body" ng-if="record.rawRecord.ContentData">\n                <img class="tq-feed-item-image" tq-lazy-src="{{record.rawRecord.ContentData}}"\n                     ng-click="pictureClick(record)"/>\n            </div>\n        </div>\n        <div id="actionButtonsInsert"></div>\n    </div>\n</div>\n')}]),angular.module("acn-one/acn-ng/components/chatter/list/list.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/chatter/list/list.tpl.html",'<!-- refresher (enabled if a valid fn is passed to tq.list -->\n<!--<ion-refresher ng-if="onPullRefresh"\n    pulling-text="{{pullingString}}"\n    on-refresh="pullRefresh()">\n</ion-refresher>-->\n\n<!-- actual list is going to be transcluded here, depending we need a fixed height list or not -->\n<div class="tq-list-content">\n    <ion-list class="tq-list-items-wrapper" can-swipe="swipable">\n    </ion-list>\n</div>\n\n<!-- enable infinite scrolling -->\n<ion-infinite-scroll ng-if="moreDataCanBeLoaded" on-infinite="loadMore()" distance="10%"></ion-infinite-scroll>\n\n<!-- empty list -->\n<div ng-if="records.length == 0 && !moreDataCanBeLoaded"\n     class="tq-list-no-result-label">\n    <div class="ion-ios7-infinite-outline"></div>\n</div>\n\n')}]),angular.module("acn-one/acn-ng/components/chatter/post/post.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/chatter/post/post.tpl.html",'<div class="row">\n    <div class="col col-75">\n        <div class="list">\n            <label class="item item-input">\n                <input ng-model="post.input" type="text" placeholder="">\n            </label>\n        </div>\n    </div>\n    <div class="col col-15">\n        <button ng-click="post.send(post)" class="button">Send <span class="mirror"><i class="ion-chevron-right"></i></span>\n        </button>\n          <button ng-click="post.getPicture()" class="button">Photo <span class="mirror"><i class="ion-android-camera"></i></span>\n        </button>\n    </div>\n</div>\n')}]),angular.module("acn-one/acn-ng/components/circularmenu/circularmenu.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/circularmenu/circularmenu.tpl.html",'<div class="cm-button"\n     ng-class="[navShouldPulse, activeNav, $root.navShouldPulse]" ng-click="toggleNav($event) && cm.onInactiveBtnClicked()">\n</div>\n<div class="cm-wrapper" ng-class="{\'opened-nav\':navOpenClass}">\n    <ul>\n        <li ng-style="liTagStyle($index)" ng-repeat="link in links" ng-click="cm.goSomewhere(link)">\n            <a ng-style="aTagStyle"><span class="{{link.class}}"></span></a>\n        </li>\n    </ul>\n</div>\n<div class="cm-overlay" ng-class="{\'on-overlay\': navOpenClass}"></div>\n')}]),angular.module("acn-one/acn-ng/components/collapsible/collapsible.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/collapsible/collapsible.tpl.html",'<div class="row accordion-header" ng-click="toggleCollapsed()">\n    <div class="accordion-header-title">\n        <i ng-if="icon" ng-class="icon"></i>{{header}}\n    </div>\n    <div class="right accordion-header-selector"\n         ng-class="{true: \'\', false: \'up\'}[isCollapsed]">\n        <a class="full-width">\n            <i ng-show="isCollapsable" class="accordion-icon ion-arrow-down-b"></i>\n        </a>\n    </div>\n</div>\n<div class="accordion-body" ng-class="{false: \'accordion-open\', true: \'accordion-closed\'}[isCollapsed]" ng-transclude>\n</div>')}]),angular.module("acn-one/acn-ng/components/footer/footer.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/footer/footer.tpl.html",'<ion-footer-bar align-title="left" class="bar-dark">\n    <div class="button-bar">\n        <!--<a class="button button-icon icon ion-ios7-home" href="#tqhome"></a>-->\n        <a class="button button-icon icon ion-navicon" href="#tqobjects"></a>\n        <a class="button button-icon icon ion-ios7-chatbubble" href="#tqshowroom"></a>\n        <a class="button button-icon icon ion-ios7-chatbubble" href="#tqchatterfeed"></a>\n        <a class="button button-icon icon"  href="#tqsynccenter" ng-class="syncIconClass">\n            <!-- Could be implemented if we want to see number of pending items -->\n            <!-- <span class="badge badge-assertive"></span> -->\n        </a>\n        <a class="button button-icon icon ion-ios7-email" href="#tqfeedback"></a>\n        <a class="button button-icon icon ion-log-out"\n           ng-click="logout()"\n           ng-if="logoutAvailable"></a>\n    </div>\n</ion-footer-bar>')}]),angular.module("acn-one/acn-ng/components/hero-profile-picture/hero-profile-picture.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/hero-profile-picture/hero-profile-picture.tpl.html",'<div class="hero item" ng-class="{tqWrapperClass: tqWrapperClass}">\n\n    <div class="tq-profile-blur-background"\n         ng-style="{\'background-image\': backgroundImageCss()}"\n         ng-class="{tqProfileBlurBackgroundClass: tqProfileBlurBackgroundClass}"></div>\n\n    <div class="tq-profile-picutre-change"\n         ng-class="{tqProfilePictureChangeClass: tqProfilePictureChangeClass}"\n         tq-input-file-attachment="saveUserAvatarToServer($event)">\n\n        <div class="tq-profile-picture"\n             ng-style="{\'background-image\': backgroundImageCss()}"\n             ng-class="{tqProfilePictureClass: tqProfilePictureClass}">\n        </div>\n\n        <div class="tq-avatar-username"\n             ng-bind="tqUserName"\n             ng-class="tqAvatarUserNameClass">\n        </div>\n\n        <div class="tq-avatar-change-text"\n             ng-class="tqAvatarChangeTextClass">\n            ADD / CHANGE\n        </div>\n    </div>\n</div>')}]),angular.module("acn-one/acn-ng/components/input/date/date.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/input/date/date.tpl.html",'<input type="date" placeholder="{{getPlaceholder()}}" ng-model="date" ng-change="dateChanged()"/>')}]),angular.module("acn-one/acn-ng/components/input/datetime/datetime.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/input/datetime/datetime.tpl.html",'<input type="datetime-local" placeholder="YYYY-MM-DDThh:mm:ss" ng-model="formattedDate" ng-change="dateChanged()"/>')}]),angular.module("acn-one/acn-ng/components/input/lookup/lookup.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/input/lookup/lookup.tpl.html",'<!--\n    input holds the value of the parent $scope.record.rawRecord[fieldApiName]\n    given we pass fieldApiName and value (bind to $scope.record.rawRecord[fieldApiName])\n\n    note we are using a ng-controller because the module that contains the directive, uses two tpls, this one and lookupmodal\n-->\n<input type="text"\n       ng-controller="TqLookupCtrl"\n       ng-model="displayValue"\n       ng-click="openModal()"\n       class="tq-input-read-only"\n       readonly/>\n')}]),angular.module("acn-one/acn-ng/components/input/lookup/lookupmodal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/input/lookup/lookupmodal.tpl.html",'<ion-modal-view ng-controller="TqLookupCtrl">\n\n    <!-- header is the plural label of the parent -->\n    <ion-header-bar class="tq-modal-header">\n        <div class="buttons">\n            <button class="button" ng-click="closeModal()">Cancel</button>\n        </div>\n        <h1 class="title"\n            ng-click="closeModal()">{{getHeaderLabel()}}</h1>\n        <div class="buttons">\n            <button class="button" ng-click="clearValue()">Clear</button>\n        </div>\n    </ion-header-bar>\n\n    <!-- content is the record list | TODO searchable = true >>> problem with search input autofocus on iOS -->\n    <ion-content>\n        <tq-list object-api-name="parentObjectApiName"\n                 on-list-item-click="setPickedValue"\n                 sortable="true"\n                 searchable="true"\n                 swipable="false">\n        </tq-list>\n    </ion-content>\n\n</ion-modal-view>\n')}]),angular.module("acn-one/acn-ng/components/input/multiselect/multiselect.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/input/multiselect/multiselect.tpl.html",'<div>\n    <tq-list-search search="doSearch()" reset="cancelSearch()" keyword="search.keyword"></tq-list-search>\n    <tq-list-sort sort="sort()" ng-if="sortable"></tq-list-sort>\n\n    <ion-list>\n        <!-- icon => we pass true and the tq-list-item will use label and put an icon beside the item -->\n        <tq-list-item ng-repeat="item in itemList | filter: search.keyword"\n                 index="$index"\n                 icon="isSelected(item)"\n                 label="item"\n                 click="click(item)"\n                 object-api-name="objectApiName">\n        </tq-list-item>\n    </ion-list>\n</div>')}]),angular.module("acn-one/acn-ng/components/input/select/select.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/input/select/select.tpl.html",'<div>\n    <tq-list-search search="doSearch()" reset="cancelSearch()" keyword="search.keyword"></tq-list-search>\n    <tq-list-sort sort="sort()" ng-if="sortable"></tq-list-sort>\n\n    <ion-list>\n        <tq-list-item ng-repeat="item in itemList | filter: search.keyword | orderBy: \'toString()\' : reverse"\n                 index="$index"\n                 icon="isSelected(item)"\n                 label="item"\n                 ng-click="click(item)"\n                 object-api-name="objectApiName">\n        </tq-list-item>\n\n    </ion-list>\n</div>')}]),angular.module("acn-one/acn-ng/components/item-group/item-group.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/item-group/item-group.tpl.html",'<div ng-repeat="group in tqItemGroups">\n\n    <!--GROUP HEADER-->\n    <ion-item class="item-icon-right"\n              ng-click="toggleGroup(group)"\n              ng-class="{\n               active: isGroupShown(group),\n               {{tqItemGroupHeaderClass}}: tqItemGroupHeaderClass\n               }">\n        {{group.label}}\n        <i class="icon" ng-class="isGroupShown(group) ? \'ion-minus\' : \'ion-plus\'"></i>\n    </ion-item>\n\n    <!--GROUP MEMBERS-->\n    <ion-item class="item-accordion"\n              ng-repeat="item in group.items"\n              ng-class="tqItemGroupMemberClass"\n              ng-click="tqItemGroupMemberClick($event, item, group.items, group)"\n              ng-href="{{item.ngHref}}"\n              ng-show="isGroupShown(group)">\n        &nbsp;{{item.label}}\n    </ion-item>\n\n</div>')}]),angular.module("acn-one/acn-ng/components/list/attachment/attachment.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/list/attachment/attachment.tpl.html",'<div class="card tq-list-attachment-wrapper">\n\n    <!-- header -->\n    <div class="item-divider card tq-list-related-header"\n         ng-if="hasHeader">\n        <div class="row tq-row-no-padding">\n            <!-- empty -->\n            <div class="col col-10"></div>\n            <!-- label -->\n            <div class="col col-80 tq-list-related-header-label">{{headerLabel}}</div>\n            <!-- create a new child btn -->\n            <div class="col col-10 tq-list-related-create-icon"></div>\n        </div>\n    </div>\n\n    <!-- picture directive -->\n    <tq-media-picture parent-record-id="parentRecordId"\n                      broadcast-success-event="true"\n                      broadcast-error-event="true">\n    </tq-media-picture>\n\n    <!-- tq-list-related -->\n    <tq-list-related object-api-name="relatedObjectApiName"\n                     parent-record-id="relatedParentRecordId"\n                     relationship-field-api-name="\'ParentId\'"\n                     searchable="searchable"\n                     has-header="false"\n                     list-has-header="false"\n                     sortable="false"\n                     creatable="false"\n                     on-list-item-click="openFile"\n                     scroll-height="scrollHeight">\n    </tq-list-related>\n</div>')}]),angular.module("acn-one/acn-ng/components/list/item/item.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/list/item/item.tpl.html",'<ion-item class="item-icon-right tq-list-item" ng-click="click({index: index})" ng-tap="click({index: index})">\n\n    <!-- when record is specified use multi-cols -->\n    <div class="row tq-no-padding tq-no-margin"\n         ng-if="!label">\n        <div class="col tq-no-padding tq-no-margin"\n             ng-repeat="fieldApiName in listHeaderFieldSet"\n\n             ng-switch="getFieldType(fieldApiName)">\n                <!-- datetime -->\n                <div ng-switch-when="date"\n                     ng-show="record.rawRecord[fieldApiName]">{{record.rawRecord[fieldApiName] | date:\'short\'}}\n                </div>\n                <!-- datetime -->\n                <div ng-switch-when="datetime"\n                     ng-show="record.rawRecord[fieldApiName]">{{record.rawRecord[fieldApiName] | date:\'short\'}}\n                </div>\n                <!-- default -->\n                <div ng-switch-default ng-show="record.rawRecord[fieldApiName]">{{record.rawRecord[fieldApiName]}}</div>\n        </div>\n\n    </div>\n\n    <!-- when using with simple lists (picklist and multipick) we pass a simple label + is using an icon in picklists (single and multi) -->\n    <i class="icon ion-checkmark"\n       ng-if="icon && label"></i>\n    <span ng-if="label">{{label}}</span>\n\n    <!-- list hidden btns on swipe -->\n    <ion-option-button class="tq-list-icon-btn {{swipeOption.icon}}"\n                       ng-repeat="swipeOption in swipeOptions"\n                       ng-click="swipeOptionClicked(swipeOption.action, $event)">\n    </ion-option-button>\n</ion-item>')}]),angular.module("acn-one/acn-ng/components/list/list.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/list/list.tpl.html",'<!-- search cmp -->\n<tq-list-search ng-if="searchable"\n                search="doSearch()"\n                reset="cancelSearch()"\n                keyword="search.keyword">\n</tq-list-search>\n\n<!-- header -->\n<tq-list-sort sort="sort()"\n              ng-if="hasHeader"\n              object-api-name="objectApiName">\n</tq-list-sort>\n\n\n<!-- actual list is going to be transcluded here, depending we need a fixed height list or not -->\n<div class="tq-list-content"></div>\n\n<!-- enable infinite scrolling -->\n<ion-infinite-scroll ng-if="moreDataCanBeLoaded" on-infinite="loadMore()" distance="10%"></ion-infinite-scroll>\n\n<!-- empty list -->\n<div ng-if="records.length == 0 && !moreDataCanBeLoaded"\n     class="tq-list-no-result-label">\n    <div class="ion-ios7-infinite-outline"\n         ng-if="!emptyListText"></div>\n    <div ng-if="emptyListText">{{emptyListText}}</div>\n</div>\n\n')}]),angular.module("acn-one/acn-ng/components/list/listwithoutscroller.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/list/listwithoutscroller.tpl.html",'<ion-list class="tq-list-items-wrapper" can-swipe="swipable">\n    <tq-list-item ng-repeat="record in records"\n                  index="$index"\n                  record="record"\n                  object-api-name="objectApiName"\n                  click="click(index, record)"\n                  swipe="swipe(action, index)"\n                  swipe-options="[\n'+"                     {action:'edit', icon: 'ion-compose'},\n                     {action:'remove', icon: 'ion-trash-b'}\n                  ]\">\n    </tq-list-item>\n</ion-list>")}]),angular.module("acn-one/acn-ng/components/list/listwithscroller.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/list/listwithscroller.tpl.html",'<div class="tq-list-parent-container" ng-style="{\'height\': scrollHeight + \'px\'}">\n    <ion-content class="tq-list-content">\n        <ion-list class="tq-list-items-wrapper" can-swipe="swipable">\n            <tq-list-item ng-repeat="record in records"\n                          index="$index"\n                          record="record"\n                          object-api-name="objectApiName"\n                          click="click(index, record)"\n                          swipe="swipe(action, index)"\n                          swipe-options="[\n'+"                             {action:'edit', icon: 'ion-compose'},\n                             {action:'remove', icon: 'ion-trash-b'}\n                          ]\">\n            </tq-list-item>\n        </ion-list>\n    </ion-content>\n</div>")}]),angular.module("acn-one/acn-ng/components/list/related/related.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/list/related/related.tpl.html",'<div class="card tq-list-related-wrapper">\n\n    <!-- header with object label and + (where creatable) -->\n    <div class="item-divider card tq-list-related-header"\n         ng-if="hasHeader">\n        <div class="row tq-row-no-padding">\n            <!-- empty -->\n            <div class="col col-10"></div>\n            <!-- label -->\n            <div class="col col-80 tq-list-related-header-label">{{getHeaderLabel()}}</div>\n            <!-- create a new child btn -->\n            <div class="col col-10 tq-list-related-create-icon">\n                <i class="icon ion-plus-round"\n                   ng-if="creatable && isCreatable()"\n                   ng-click="newRecord()">\n                </i></div>\n        </div>\n    </div>\n\n    <!-- list TODO add all the std api for the tq-list -->\n    <tq-list object-api-name="objectApiName"\n             where="where"\n             searchable="searchable"\n             sortable="sortable"\n             has-header="listHasHeader"\n             on-list-item-click="onListItemClick"\n             scroll-height="scrollHeight">\n    </tq-list>\n</div>')}]),angular.module("acn-one/acn-ng/components/list/search/search.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/list/search/search.tpl.html",'<div class="list-inset tq-search-input-wrapper">\n    <div class="item item-input">\n        <i class="icon icon-ttc-search placeholder-icon"\n           ng-click="search()"></i>\n        <form ng-submit="search()" class="search-form">\n            <input type="text" autocorrect="off" placeholder="Search" ng-model="keyword">\n        </form>\n        <!--<i ng-show="keyword" ng-click="reset()" class="clear-search icon ion-ios7-close"></i>-->\n    </div>\n</div>')}]),angular.module("acn-one/acn-ng/components/list/sort/sort.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/list/sort/sort.tpl.html",'<div class="item tq-list-header">   <!--<div ng-click="toggle()" class="item tq-list-header"> TODO enable when sort actually ready in full -->\n    <div class="row tq-no-margin tq-no-padding">\n        <div ng-repeat="fieldApiName in listHeaderFieldSet"\n              class="col tq-no-margin tq-no-padding tq-list-header-item">\n            <!-- label -->\n            {{getFieldLabel(fieldApiName)}}\n            <!-- asc desc ordering icon TODO enable when sort actually ready in full -->\n            <i class="icon" ng-class="{\'ion-arrow-down-b\':ascending,\'ion-arrow-up-b\':!ascending}"></i>\n        </div>\n    </div>\n</div>')}]),angular.module("acn-one/acn-ng/components/map/map.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/map/map.tpl.html",'<div ng-if="mapReady">\n<google-map center="map.center" zoom="map.zoom" draggable="true" options="options">\n\t<marker ng-repeat="marker in map.markers" coords="marker.coords" idkey="marker.id" \n\t\ticon="marker.icon" events="marker.events" options="marker.options">\n\t\t<marker-label ng-if="marker.label" content="marker.label" anchor="{{pinAnchor}}" class="tq-map-pin-label {{pinClass}}" />\n\t</marker>\n</google-map>\n</div>')}]),angular.module("acn-one/acn-ng/components/media/picture/picture.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/media/picture/picture.tpl.html",'<div class="row tq-media-camera-wrapper" ng-if="takePictureBtn || pickPictureBtn">\n    <div class="col" ng-if="takePictureBtn">\n        <button class="button icon ion-camera tq-media-camera-btn"\n                ng-click="getPicture(TAKE_PICTURE)"></button>\n    </div>\n    <div class="col" ng-if="pickPictureBtn">\n        <button class="button icon ion-image tq-media-camera-btn"\n                ng-click="getPicture(PICK_PICTURE)"></button>\n    </div>\n</div>')}]),angular.module("acn-one/acn-ng/components/popup/criticalerror/criticalerror.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/popup/criticalerror/criticalerror.tpl.html","")}]),angular.module("acn-one/acn-ng/components/popup/error/error.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/popup/error/error.tpl.html",'<ul>\n    <li ng-repeat="errorMessage in errorList" ng-bind="errorMessage"></li>\n</ul>')}]),angular.module("acn-one/acn-ng/components/recorddetail/recorddetail.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/recorddetail/recorddetail.tpl.html",'<!-- error message -->\n<div class="list card error-message-panel"\n     ng-if="parentRecordError"\n     ng-animate="{enter: \'fade-in\', leave: \'fade-out\'}">\n    <ion-item class="item-icon-left">\n        <i class="icon ion-alert energized"></i>\n                <span ng-if="parentRecordError == PARENT_STORE_NOT_SYNC">\n                    Object not synchronized\n                    <p>Contact your admin in order to enable it</p>\n                </span>\n                <span ng-if="parentRecordError == PARENT_RECORD_NOT_SYNC">\n                    Record not synchronized\n                    <p>Contact your admin in order to enable it</p>\n                </span>\n    </ion-item>\n</div>\n\n<!-- fields wrapper -->\n<div class="list card tq-card">\n\n    <!-- display fields\n         > display fields in the detailFieldSet when no optional visualizations params are specified\n         > display fields in the fieldSet when is a [] String\n         > display fields in the fieldSetName when is a String\n\n         ng-repeat="(key, value) in record.rawRecord"\n    -->\n    <ion-item ng-switch="getFieldType(key)"\n              class="item item-input item-stacked-label"\n              ng-repeat="key in displayFieldSet">\n\n        <!-- label for all the field types -->\n        <span class="input-label tq-bold">{{recordLabelsMap[key]}}</span>\n\n        <!-- string | when empty add a space -->\n        <div ng-switch-when="string" ng-show="record.rawRecord[key]">{{record.rawRecord[key]}}</div>\n        <!-- textarea | for simplicity we use text area with readonly to capture \\n -->\n        <textarea readonly\n                  ng-switch-when="textarea"\n                  ng-show="record.rawRecord[key]"\n                  class="tq-input-read-only"\n                  rows="5">{{record.rawRecord[key]}}</textarea>\n        <!-- url | clickable link with cordova -->\n        <div ng-switch-when="url">\n            <span ng-click="openURL(record.rawRecord[key])"\n                  ng-show="record.rawRecord[key]">\n               {{record.rawRecord[key]}}\n            </span>\n        </div>\n        <!-- checkbox -->\n        <span ng-switch-when="boolean" ng-show="record.rawRecord[key]" class="tq-detail-checkbox-field">\n            <i ng-if="record.rawRecord[key]" class="radio-icon ion-checkmark"></i>\n        </span>\n        <!-- phone | call\n            http://demosthenes.info/blog/856/Send-a-SMS-Text-From-A-Link\n        -->\n        <a ng-switch-when="phone"\n           class="item item-icon-left phone-field-card-item"\n           ng-show="record.rawRecord[key]" href="tel:{{record.rawRecord[key]}}">\n            <i class="icon ion-ios7-telephone"></i>Call<p>{{record.rawRecord[key]}}</p>\n        </a>\n        <a ng-switch-when="phone"\n           class="item item-icon-left phone-field-card-item"\n           ng-show="record.rawRecord[key]" href="sms:{{record.rawRecord[key]}}">\n            <i class="icon ion-chatbox-working"></i>Text<p>{{record.rawRecord[key]}}</p>\n        </a>\n        <!-- email | send email -->\n        <a ng-switch-when="email"\n           ng-show="record.rawRecord[key]"\n           class="item item-icon-left email-field-card-item"\n           href="mailto:{{record.rawRecord[key]}}}">\n            <i class="icon ion-ios7-email"></i>Email<p>{{record.rawRecord[key]}}</p>\n        </a>\n        <!-- date | format TODO locale format -->\n        <div ng-switch-when="date"\n             ng-show="record.rawRecord[key]">{{record.rawRecord[key] | date:\'fullDate\'}}\n        </div>\n        <!-- datetime | format TODO locale format-->\n        <div ng-switch-when="datetime"\n             ng-show="record.rawRecord[key]">{{record.rawRecord[key] | date:\'medium\'}}\n        </div>\n        <!-- number | can be double or int TODO format in a different way? -->\n        <div ng-switch-when="double"\n             ng-show="record.rawRecord[key]">{{record.rawRecord[key] | number}}\n        </div>\n        <div ng-switch-when="int"\n             ng-show="record.rawRecord[key]">{{record.rawRecord[key] | number}}\n        </div>\n        <!-- currency | TODO multi currency\n            for the future. In salesforce usually format of currency is like: GBP 10.00 EUR 10.00\n            Or 10.00 EUR, according to the locale options. and we can use record.CurrencyISOCode to get currency value.\n        -->\n        <div ng-switch-when="currency"\n             ng-show="record.rawRecord[key]">{{record.rawRecord[key] | currency:"£"}}\n        </div>\n        <!-- percent -->\n        <div ng-switch-when="percent"\n             ng-show="record.rawRecord[key]">{{record.rawRecord[key]}}%\n        </div>\n        <!-- reference | link to related record -->\n        <a ng-switch-when="reference"\n           ng-show="record.rawRecord[key]"\n           ng-click="showParentDetails(key)"\n           class="item item-icon-left reference-field-card-item">\n            <i class="icon ion-arrow-return-right"></i>Show Detail<p>{{parentRecordsMap[key].parentRecordName}}</p>\n        </a>\n        <!-- multipicklist | show # of picked values -->\n        <!-- TODO -->\n        <!-- geolocation -->\n        <!-- TODO -->\n        <!-- base64 | show the base64?! -->\n        <!-- TODO -->\n\n        <!-- default we follow under text (picklist, multipicklist, ...) -->\n        <div ng-switch-default ng-show="record.rawRecord[key]">{{record.rawRecord[key]}}</div>\n    </ion-item>\n\n</div>\n');
}]),angular.module("acn-one/acn-ng/components/scan/barcode/barcode.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/scan/barcode/barcode.tpl.html",'<button class="button icon-left ion-qr-scanner tq-take-btn"\n        ng-click="scan()">Scan Barcode</button>')}]),angular.module("acn-one/acn-ng/components/socialsharing/sharePopoupContent.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/socialsharing/sharePopoupContent.tpl.html",'<button class="button icon-left " ng-click="shareFacebook()" ng-if="imageUrl || linkUrl">\n    <i class="icon ion-social-facebook"></i> Facebook\n</button>\n<button class="button icon-left " ng-click="shareTwitter()">\n    <i class="icon ion-social-twitter"></i> Twitter\n</button>\n<button class="button icon-left " ng-click="sharePinterest()" ng-if="imageUrl">\n    <i class="icon ion-social-pinterest"></i> Pinterest\n</button>\n<button class="button icon-left " ng-click="shareGooglePlus()" ng-if="imageUrl">\n    <i class="icon ion-social-googleplus"></i> Google Plus\n</button>\n')}]),angular.module("acn-one/acn-ng/components/viewfullimg/viewfullimg.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/components/viewfullimg/viewfullimg.tpl.html",'<ion-modal-view class="tf-viewlargerimg-modal modal slide-in-up">\n        <!-- image -->\n        <img class="image"\n             tq-lazy-src="{{url}}"\n             ng-click="closeModal()"\n             on-swipe-down="closeModal()"\n             on-swipe-up="closeModal()"\n             on-swipe-left="closeModal()"\n             on-swipe-right="closeModal()">\n        <!-- close the modal -->\n        <a class="icon-ttc-close"\n           ng-click="closeModal()"></a>\n        </img>\n        <!-- optional text -->\n        <div class="text handwriting-font" ng-show="text" ng-bind="text"></div>\n</ion-modal-view>\n\n')}]),angular.module("acn-one/acn-ng/details/details.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/details/details.tpl.html",'<ion-view view-title="{{headerTitle}}">\n\n    <!-- content injector wrapper with handle for programatically scroll via ctrl -->\n    <ion-content>\n\n        <!-- nav btns -->\n        <ion-nav-buttons side="right">\n            <button class="button button-icon ion-edit" ng-click="showEditSheet()"></button>\n        </ion-nav-buttons>\n\n        <!-- record display field set -->\n        <tq-recorddetail record="record"\n                         field-set="\'MobileAppFields\'">\n        </tq-recorddetail>\n\n        <!-- testing mode: Attachment, Contact, Opportunity on Account page only -->\n        <span ng-if="objectApiName == \'Account\'">\n\n            <tq-list-attachment parent-record-id="record.rawRecord.Id"\n                                header-label="Pictures & Files"\n                                searchable="true">\n            </tq-list-attachment>\n\n            <tq-list-related object-api-name="\'Contact\'"\n                             parent-record-id="record.rawRecord.Id"\n                             relationship-field-api-name="\'AccountId\'"\n                             searchable="true"\n                             has-header="true"\n                             list-has-header="true"\n                             sortable="false"\n                             creatable="true">\n            </tq-list-related>\n\n            <!--<!-- where="{ForecastCategoryName:{$eq: \'Pipeline\'}}" TODO add a mix of where and parent -->\n            <tq-list-related object-api-name="\'Opportunity\'"\n                             parent-record-id="record.rawRecord.Id"\n                             relationship-field-api-name="\'AccountId\'"\n                             searchable="true"\n                             has-header="true"\n                             list-has-header="true"\n                             sortable="false"\n                             creatable="true">\n            </tq-list-related>\n        </span>\n\n    </ion-content>\n</ion-view>')}]),angular.module("acn-one/acn-ng/edit/edit.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/edit/edit.tpl.html",'<ion-view view-title="{{headerTitle}}">\n\n    <!-- content injector wrapper with handle for programatically scroll via ctrl -->\n    <ion-content>\n\n        <!-- nav btns -->\n        <ion-nav-buttons side="right">\n            <button class="button button-icon ion-checkmark-round" ng-click="save()"></button>\n        </ion-nav-buttons>\n\n        <!-- error list -->\n        <div class="list card error-message-panel" ng-if="errorList.length > 0">\n            <ion-item class="item-icon-left tq-white-space-normal" ng-repeat="error in errorList">\n                <i class="icon ion-alert-circled assertive"></i>\n                {{error}}\n            </ion-item>\n        </div>\n\n        <!-- input fields wrapper -->\n        <div class="card list tq-card">\n            <!-- field with label + display > display only fields in the edit/create field set\n\n                 new => needs to be creatable ; edit => needs to be editable\n\n                 No more additional ng-if conditions is required because fieldset is generated correctly by metadata\n            -->\n            <ion-item ng-repeat="key in displayFieldSet"\n                      ng-if="record"\n                      class="item item-input item-stacked-label">\n\n                <!-- label always there -->\n                <span class="input-label tq-bold">\n                    <i ng-if="isFieldRequired(key)"\n                       class="icon ion-record tq-required-icon">\n                    </i>\n                    {{recordLabelsMap[key]}}\n                </span>\n\n                <!-- leave this span (and ion-item) in order to have the onmodal for the picklist working correctly on click -->\n                <span ng-switch="getFieldType(key)">\n\n                    <!-- switch on the field input TODO required on the layout; style input by type -->\n                    <!-- text types -->\n                    <input ng-switch-when="string" type="text" ng-model="record.rawRecord[key]"/>\n                    <textarea ng-switch-when="textarea"\n                              ng-model="record.rawRecord[key]"\n                              rows="5"/>\n                    <!-- url | TODO currectly we are not using the URL html5 type because creates problems with URL validation\n                         Ex salesforce auto adds http:// in front of every url but the underline record it\'s still without\n                         This gets transfered to the client and when we render in the input an invalid URL this one doesn\'t get rendered at all\n                    -->\n                    <input ng-switch-when="url"\n                           type="text"\n                           ng-model="record.rawRecord[key]"/>\n                    <!-- use toggle for the checkbox TODO change toggle-energized to tq-toggle that gets the color based on baseColor var -->\n                    <div ng-switch-when="boolean">\n                        <label class="toggle toggle-energized">\n                            <input type="checkbox" ng-model="record.rawRecord[key]">\n                            <div class="track">\n                                <div class="handle"></div>\n                            </div>\n                        </label>\n                    </div>\n                    <!-- number types -->\n                    <input ng-switch-when="number" type="number" ng-model="record.rawRecord[key]"/>\n                    <input ng-switch-when="percent" type="number" ng-model="record.rawRecord[key]"/>\n                    <!-- number | can be double or int -->\n                    <input ng-switch-when="double" type="number" ng-model="record.rawRecord[key]"/>\n                    <input ng-switch-when="int" type="number" ng-model="record.rawRecord[key]"/>\n                    <input ng-switch-when="currency" type="number" ng-model="record.rawRecord[key]"/>\n                    <input ng-switch-when="phone" type="tel" ng-model="record.rawRecord[key]"/>\n                    <input ng-switch-when="email" type="email" ng-model="record.rawRecord[key]"/>\n                    <tq-input-date ng-switch-when="date" date="record.rawRecord[key]"></tq-input-date>\n                    <tq-input-datetime ng-switch-when="datetime" date="record.rawRecord[key]"></tq-input-datetime>\n                    <!-- picklist TODO refactor -->\n                    <div ng-switch-when="picklist">\n                        <div ng-click="openModal(key)" class="tq-picker-field">{{record.rawRecord[key]}}</div>\n                    </div>\n                    <!-- note that sometimes (STANDARD) fields defined as picklist on salesforce are actually combobox -->\n                    <div ng-switch-when="combobox">\n                        <div ng-click="openModal(key)" class="tq-picker-field">{{record.rawRecord[key]}}</div>\n                    </div>\n                    <!-- multiselect -->\n                    <div ng-switch-when="multipicklist">\n                        <div ng-click="multi.openModal(key)" class="tq-picker-field">{{record.rawRecord[key]}}</div>\n                    </div>\n                    <!-- lookup | [errorList] to display on the edit layout the errors -->\n                    <tq-input-lookup ng-switch-when="reference"\n                                     field-api-name="key"\n                                     record="record"\n                                     error-list="errorList"/>\n\n                    <!-- base64 TODO-->\n                    <div ng-switch-when="base64">\n                        <div>TODO - base64</div>\n                    </div>\n                </span>\n            </ion-item>\n        </div>\n\n        <!-- add little margin at the end -->\n        <div class="tq-spacer"></div>\n\n    </ion-content>\n</ion-view>')}]),angular.module("acn-one/acn-ng/feedback/feedback.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/feedback/feedback.tpl.html",'<ion-view view-title="Contact AccentureONE Team">\n    <ion-content ng-controller="TqFeedbackCtrl">\n        <div class="list card error-message-panel" ng-if="errorList.length > 0">\n            <ion-item class="item-icon-left tq-white-space-normal" ng-repeat="error in errorList">\n                <i class="icon ion-alert-circled assertive"></i>\n                {{error}}\n            </ion-item>\n        </div>\n\n        <div class="list card" ng-if="sendSuccess" animation="fade-in-out">\n            <ion-item class="item-icon-left tq-white-space-normal">\n                <i class="icon ion-checkmark-circled positive"></i>\n                Your message has been successfully sent to the AccentureONE Team\n            </ion-item>\n        </div>\n\n        <div class="list card tq-card">\n            <label class="item item-input item-stacked-label tq-bold">\n                <div class="input-label">\n                    Subject\n                </div>\n                <input type="text" ng-model="record.rawRecord.Subject"/>\n            </label>\n            <label class="item item-input item-stacked-label tq-bold">\n                <div class="input-label">\n                    Description\n                </div>\n                <textarea ng-model="record.rawRecord.Description"/>\n            </label>\n            <label class="item item-input item-select tq-bold">\n                <div class="input-label">\n                    Reason\n                </div>\n                <select ng-model="record.rawRecord.Type">\n                    <option value="Problem">Problem</option>\n                    <option value="Feature Request">Feature Request</option>\n                </select>\n            </label>\n            <label class="item"  ng-if="$root.online">\n                <button class="button button-block" ng-click="reportIssue()">\n                    Submit\n                </button>\n            </label>\n            <!-- no possible to submit message -->\n            <div class="item item-icon-left tq-white-space-normal" ng-if="!$root.online">\n                <i class="icon ion-alert positive"></i>\n                You need to be online in order to submit a feedback\n            </div>\n        </div>\n    </ion-content>\n\n    <!-- app version -->\n    <ion-footer-bar class="tq-version-wrapper">\n        <span class="tq-version-label">v{{version}}</span>\n    </ion-footer-bar>\n\n</ion-view>')}]),angular.module("acn-one/acn-ng/home/home.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/home/home.tpl.html",'<ion-view view-title="<i class=\'icon-ttc-home\'></i>Home">\n    <ion-content class="home">\n        <!-- injected body -->\n    </ion-content>\n</ion-view>')}]),angular.module("acn-one/acn-ng/index.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/index.tpl.html","")}]),angular.module("acn-one/acn-ng/login/login.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/login/login.tpl.html",'<ion-view view-title="Login">\n\n    <ion-content class="tq-login"\n                 ng-controller="TqLoginCtrl"\n                 scroll="false">\n\n        <div class="tq-centered-container controls-wrapper">\n\n            <!-- Actions available when online -->\n            <div class="controls online"\n                 ng-if="online">\n\n                <label class="item item-input item-select">\n                    <div class="input-label">\n                        Environment\n                    </div>\n                    <select ng-model="selectedOption"\n                            ng-options="option.label for option in environmentOptions"\n                            ng-change="change(selectedOption)">\n                    </select>\n                </label>\n\n                <!-- Login button -->\n\n                <a class="button" ng-click="login()">\n                    <span class="label">Log in!</span>\n                </a>\n\n            </div>\n\n            <!-- Actions available when online -->\n            <div class="controls offline"\n                 ng-if="!online">\n                You need to be online in order to start the application for the first time\n            </div>\n        </div>\n\n    </ion-content>\n</ion-view>')}]),angular.module("acn-one/acn-ng/objects/objects.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/objects/objects.tpl.html",'<ion-view view-title="Objects">\n    <ion-content class="tq-top-margin-5">\n\n        <!-- showroom link -->\n        <div class="row">\n            <button class="button button-light tq-showroom-btn"\n                    ui-sref="tqshowroom">\n                <b>Showroom</b>\n            </button>\n        </div>\n\n        <!-- list of objects -->\n        <ion-list>\n            <a class="item tq-list-item" ui-sref="tqrecords({objectapiname:object.name})" ng-repeat="object in objects">\n                {{object.label}}\n                <span class="badge badge-balanced">{{object.count}}</span>\n            </a>\n        </ion-list>\n\n    </ion-content>\n</ion-view>')}]),angular.module("acn-one/acn-ng/records/records.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/records/records.tpl.html",'<ion-view view-title="{{objectLabel}}" class="hasnt-background">\n    <ion-content>\n\n        <!-- main-nav btns -->\n        <ion-nav-buttons side="right">\n            <button class="button button-icon ion-plus-round" ng-click="addNewRecord()"></button>\n        </ion-nav-buttons>\n\n        <!-- list of records for the object -->\n        <tq-list object-api-name="objectApiName">\n            <tq-list-item ng-repeat="record in records"\n                     index="$index"\n                     record="record"\n                     object-api-name="objectApiName"\n                     click="click(index, record)"\n                     swipe="swipe(action, index)"\n                     swipe-options="[\n'+"                    {action:'edit', icon: 'ion-compose'},\n                    {action:'remove', icon: 'ion-trash-b'}\n                 ]\">\n            </tq-list-item>\n        </tq-list>\n\n    </ion-content>\n</ion-view>")}]),angular.module("acn-one/acn-ng/showroom/showroom.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/showroom/showroom.tpl.html",'<ion-view view-title="{{headerTitle}}">\n    <!-- content injector wrapper -->\n    <ion-content class="tq-showroom-content-wrapper">\n       <img tq-lazy-src="/services/data/v29.0/sobjects/Attachment/00P2000000WECs5EAH/Body"\n             placeholder="assets/image-not-found.png"\n             style="width: 200px; height:200px; background-color:rgba(100,100,100,0.5);"/>\n\n        <!-- tq-list-related with optional where condition -->\n        <tq-list-related object-api-name="relatedObjectApiName"\n                         parent-record-id="parentRecordId"\n                         where="relatedObjectWhere"\n                         searchable="true"\n                         has-header="true"\n                         list-has-header="false"\n                         sortable="false"\n                         creatable="true"\n                         new-prepopulation-map="childFieldPrepopulationMap"\n                         scroll-height="300">\n        </tq-list-related>\n\n        <!-- tq-list-attachment -->\n        <tq-list-attachment parent-record-id="parentRecordId"\n                            header-label="Pictures & Files"\n                            searchable="true"\n                            scroll-height="300">\n        </tq-list-attachment>\n\n    </ion-content>\n</ion-view>')}]),angular.module("acn-one/acn-ng/synccenter/synccenter.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acn-one/acn-ng/synccenter/synccenter.tpl.html",'<ion-view view-title="Sync Center">\n\n    <!-- sync center header -->\n    <div class="bar bar-subheader sync-center-subheader">\n        <!-- buttons -->\n        <div class="button-bar">\n            <!-- force offline -->\n           <!-- <a class="button button-clear tq-no-max-height" ng-click="toggleForceOffline()">\n                <i class="icon sync-center-big-btn" ng-class="{\'flaticon-wifi36 dark\' : notForcedOffline && !isSyncing(syncStatus), \'flaticon-wifi36\' : !notForcedOffline||isSyncing(syncStatus)}"></i>\n            </a>-->\n            <!-- manual sync -->\n            <a class="button button-clear tq-no-max-height tq-sync-btn" ng-click="sync()">\n                <i class="icon sync-center-big-btn"\n                   ng-class="{\'ion-ios-refresh-outline dark\' : (!isSyncing(syncStatus))&&online, \'ion-ios-refresh rotating dark\' : isSyncing(syncStatus)&&online, \'ion-ios-refresh-outline\': !online}"></i>\n            </a>\n        </div>\n    </div>\n\n\n    <ion-content class="has-subheader tq-sync-list">\n        <!-- message and actions -->\n        <div class="card error-message-panel"\n             ng-if="errorMessage"\n             ng-animate="{enter: \'fade-in\', leave: \'fade-out\'}">\n            <div class="item item-icon-left" style="white-space: normal !important;">\n                <i class="icon ion-alert energized"></i>\n                {{errorMessage}}\n            </div>\n\n            <!-- custom actions: 1. re-auth -->\n            <button class="button button-block"\n                    ng-click="refreshAuth()"\n                    ng-if="online && showRefreshAuthBtn">\n                Re-Authenticate\n            </button>\n\n            <!-- custom actions: 2. feedback repeating error -->\n            <button class="button button-block"\n                    ng-click="submitFeedback()"\n                    ng-if="online && showFeedbackBtn">\n                Flag a repeating error\n            </button>\n        </div>\n\n        <!-- actual list of queue items -->\n        <ion-list can-swipe="true">\n            <ion-item ng-repeat="syncItem in syncItemList" item="syncItem" class="tq-list-item tq-sync-list-item">\n                <div class="row"\n                     on-hold="showAlert(syncItem)">\n                    <div class="col col-80 col-center">{{syncItem.name}}</div>\n                    <div ng-if="syncItem.status == \'Pending\'" class="col flaticon-cloud24 tq-list-icon tq-list-icon-pending"></div>\n                    <div ng-if="syncItem.status == \'Error\'" class="col flaticon-warning30 tq-list-icon tq-list-icon-error"></div>\n                    <div ng-if="syncItem.status == \'Deleted\'" class="col flaticon-delete24 tq-list-icon tq-list-icon-deleted"></div>\n                </div>\n\n                <ion-option-button class="ion-compose tq-list-sync-center-icon-btn" ng-click="edit(syncItem)"></ion-option-button>\n                <ion-option-button class="ion-refresh tq-list-sync-center-icon-btn" ng-click="reset(syncItem, $index)"></ion-option-button>\n            </ion-item>\n        </ion-list>\n\n        <!-- item list empty -->\n        <div ng-if="syncItemList.length == 0 && !errorMessage" class="empty-list-placeholder sync-empty-list">\n            <div class="row">\n                <div class="col">\n                    <span class="ion-ios7-checkmark empty-list-placeholder-checkmark"></span>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col">\n                    <label class="empty-list-placeholder-label">Your data is synchronized!</label>\n                </div>\n            </div>\n\n        </div>\n\n    </ion-content>\n</ion-view>')}]),angular.module("apps/mts/aboutMtsPopupContent.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/aboutMtsPopupContent.tpl.html","<p ng-bind=\"'FIRST_TIME_WELCOME_BODY' | translate\"></p>")}]),angular.module("apps/mts/assetcatalogue/assetcatalogue.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/assetcatalogue/assetcatalogue.tpl.html",'<!-- testing common styles -->\n<div class="asset-catalogue">\n    <div class="button-test">\n\n        <button class="button primary">button primary</button>\n        <button class="button primary disabled">button primary disabled</button>\n        <button class="button secondary">button secondary</button>\n        <button class="button secondary disabled">button secondary disabled</button>\n        <button class="button negative">button negative</button>\n        <button class="button negative disabled">button secondary negative disabled</button>\n\n\n        <button class="button-icon primary">button-icon primary</button>\n        <button class="button-icon primary disabled">button-icon primary disabled</button>\n        <button class="button-icon secondary">button-icon secondary</button>\n        <button class="button-icon secondary disabled">button-icon secondary disabled</button>\n        <button class="button-icon secondary active">button-icon secondary active</button>\n    </div>\n</div>')}]),angular.module("apps/mts/destinations/aboutDestinationsPopupContent.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/destinations/aboutDestinationsPopupContent.tpl.html",'<p>\n    Take a look at the World map to see where you have already travelled,\n    and start to build your wish list for future {{:: "TRIP_LOWER_PLURAL"|translate}}.\n</p>')}]),angular.module("apps/mts/destinations/bucketlist/bucketlist.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/destinations/bucketlist/bucketlist.tpl.html",'<ion-list>\n    <h3 class="mts-visited-caption">Wishlist</h3>\n    <div class="item mts-wishlist-item" ng-repeat="country in wishList">\n        {{country.countryData.name}}\n    </div>\n</ion-list>')}]),angular.module("apps/mts/destinations/ielayout.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/destinations/ielayout.tpl.html",'<ion-view>\n    <ion-content zooming="false" overflow-scroll="true" class="has-header" delegate-handle="main-application-scroll">\n        <div class="mtsHomeContent">\n\n            <ng-include ng-if="state.data.headerView" src="state.data.headerView"></ng-include>\n            <div acn-ion-sticky class="mtsTabs tabs mts-substates-bar tabs-dark item">\n                <a ui-sref="horizon.overview()"\n                   class="tab-item">\n                    Overview\n                </a>\n                <a ui-sref="destinations.visited()"\n                   class="selected tab-item">\n                    Destinations\n                </a>\n            </div>\n            <div class="mts-destinations-switcher">\n                <a ui-sref="destinations.visited()"\n                   class="mts-destinations-subtub"\n                   ng-class="{\'selected\' : state.name == \'destinations.visited\'}">\n                    Places Visited\n                </a>\n                <a ui-sref="destinations.bucketlist()"\n                   class="mts-destinations-subtub"\n                   ng-class="{\'selected\' : state.name == \'destinations.bucketlist\'}">\n                    Wishlist\n                </a>\n            </div>\n            <ui-view  name="contentView"></ui-view>\n        </div>\n    </ion-content>\n</ion-view>')}]),angular.module("apps/mts/destinations/layout.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/destinations/layout.tpl.html",'<ion-view>\n    <ion-content zooming="false" class="has-header" delegate-handle="main-application-scroll">\n        <div class="mtsHomeContent">\n\n            <ng-include ng-if="state.data.headerView" src="state.data.headerView"></ng-include>\n            <div acn-ion-sticky class="mtsTabs tabs mts-substates-bar tabs-dark item">\n                <a ui-sref="horizon.overview()"\n                   class="tab-item">\n                    Overview\n                </a>\n                <a ui-sref="destinations.visited()"\n                   class="selected tab-item">\n                    Destinations\n                </a>\n            </div>\n            <div class="mts-destinations-switcher">\n                <a ui-sref="destinations.visited()"\n                   class="mts-destinations-subtub"\n                   ng-class="{\'selected\' : state.name == \'destinations.visited\'}">\n                    Places Visited\n                </a>\n                <a ui-sref="destinations.bucketlist()"\n                   class="mts-destinations-subtub"\n                   ng-class="{\'selected\' : state.name == \'destinations.bucketlist\'}">\n                    Wishlist\n                </a>\n            </div>\n            <ui-view  name="contentView"></ui-view>\n        </div>\n    </ion-content>\n</ion-view>')}]),angular.module("apps/mts/destinations/map.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/destinations/map.tpl.html",'<div class="mtsTabs tabs mts-substates-bar tabs-dark item mts-destinations-info"\n     ng-if="!(infoDetails.countrySelectEnabled && countrySelectEnabled)">\n    <div class="data-block"> {{infoDetails.text}}</div>\n    <div class="action-block" ng-click="actionPress()">{{infoDetails.actionText}}</div>\n</div>\n<div class="mtsTabs tabs mts-substates-bar tabs-dark item mts-destinations-info type-country"\n     ng-if="infoDetails.countrySelectEnabled && countrySelectEnabled">\n    <div class="data-block">\n        <input type="text" ng-model="infoDetails.countryText" ng-change="renderPopupHelp($event)"\n               ng-keyup="elementKeyup($event)" />\n    </div>\n    <div class="action-block" ng-click="selectCountry()">Select</div>\n    <div class="textpopup" ng-if="popupCountries && popupCountries.length > 0">\n        <ul class="listbox">\n            <li ng-repeat="popupCounry in popupCountries" ng-click="selectCountryFromList(popupCounry)">{{::popupCounry.name}}</li>\n        </ul>\n    </div>\n</div>\n<div class="world-top-container">\n  <!--  <ion-scroll ion-svg-zoom min-zoom="0.5" max-zoom="5" direction="xy" zooming="true" locking="false"\n                style="width: 100%; height: 275px" mts-countries-map="mts-destinations-map">-->\n        <div class="mts-worldmap" mts-countries-map="mts-destinations-map">\n        <!--    <svg width="670" height="275" style="margin: auto; display: block;">-->\n        <!-- svg-pan-zoom -->\n           <svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"\n                 zoomAndPan="true" pan-enabled="true" zoom-enabled="true" dbl-click-zoom-enabled="true"\n                 min-zoom="0.9" max-zoom="5" fit="true" center="true" control-icons-enabled="true"\n                 preserveAspectRatio="xMaxYMin meet"\n                 class="datamap" viewbox="0 0 670 275"\n                 data-prevent-scroll="true"\n                 style="margin: auto; display: block;">\n                <g id="" class="datamaps-subunits" data-prevent-scroll="true">\n                    <path d="M453.1353635363537,99.6121212189469L455.03115311531155,100.34426572504418L456.45299529953,100.08960676640166L456.85923592359234,99.2301327809831L458.3487848784879,98.94364145251028L459.36438643864386,98.37065879556457L459.7706270627063,96.8745374135397L461.3278827882789,96.52438134540623L461.66641664166417,95.85590157896958L462.5466046604661,96.33338712642433L463.08825882588263,96.39705186608495L464.1715671567157,96.42888423591526L465.52570257025707,96.81087267387906L466.13506350635066,97.03369926269127L467.48919891989203,96.42888423591526L468.0985598559856,96.81087267387906L468.7079207920792,95.95139868846053L469.8589358935894,95.98323105829083L470.1297629762976,95.696739729818L470.33288328832884,94.93276285389041L471.14536453645366,94.29611545728406L472.16096609660974,94.7099362650782L471.95784578457847,95.28291892202388L472.56720672067206,95.37841603151482L472.3640864086409,96.97003452303066L473.1088608860886,97.57484954980667L473.78592859285925,97.19286111184286L474.5984098409841,97.00186689286096L475.7494249424943,96.14239290744243L477.0358535853586,96.30155475659402L478.9993499349935,96.30155475659402L479.33788378837886,96.84270504370939L478.2545754575458,97.03369926269127L477.30668066806686,97.38385533082477L475.1400640064007,97.60668191963698L473.1088608860886,98.02050272743108L472.02555255525556,98.816311973189L472.43179317931794,99.6121212189469L472.70262026202624,100.5670923138564L471.7547254725473,101.36290155961431L471.82243224322434,102.06321369588127L471.2807780778078,102.76352583214822L469.520402040204,102.6998610924876L470.2651765176518,103.94132351586994L469.04645464546456,104.41880906332467L468.23397339733975,105.53294200738576L468.3693869386939,106.67890732127714L467.6246124612461,107.18822523856221L466.9475447544755,107.02906338941062L465.45799579958,107.28372234805315L465.25487548754876,107.79304026533822L463.90074007400744,107.79304026533822L462.8174317431743,108.87534083956898L462.74972497249723,110.4669593310848L460.3122812281228,111.23093620701238L459.0258525852586,111.0717743578608L458.61961196119614,111.4855951656549L457.536303630363,111.26276857684269L455.64051405140515,111.51742753548523L452.458295829583,110.56245644057573L454.1509650965097,108.87534083956898L454.0155515551555,107.66571078601694L452.5937093709371,107.3473870877138L452.458295829583,106.13775703416178L451.8489348934894,104.6416356521369L452.66141614161415,103.62299981756675L451.8489348934894,103.33650848909393L452.32288228822887,101.96771658639032Z"\n                          class="datamaps-subunit AFG"></path>\n                    <path d="M382.9911491149115,187.21480299197754L383.1942694269427,187.78778564892323L382.92344234423445,188.71092437400242L383.2619761976198,189.60223072925126L382.9911491149115,190.30254286551823L383.1942694269427,190.93919026212455L379.26727672767277,190.90735789229424L379.13186318631864,196.8918434203937L380.4182918291829,198.45162954207922L381.63701370137017,199.6294272258009L378.18396839683965,200.3934041017285L373.6476147614762,200.10691277325566L372.3611861186119,199.21560641800681L364.7103210321032,199.31110352749775L364.43949394939494,199.43843300681903L363.2884788478848,198.57895902140046L362.0697569756976,198.51529428173984L360.9864486448645,198.83361798004302L360.03855385538554,199.21560641800681L359.9031403140314,198.0059763644548L360.1739673967397,196.38252550310864L360.7833283328333,194.63174516244123L360.91874187418745,193.83593591668335L361.52810281028104,192.14882031567657L361.9343434343434,191.38484343974898L363.01765176517654,190.14338101636665L363.62701270127013,189.31573940077843L363.83013301330135,187.91511512824448L363.7624262426243,186.83281455401374L363.15306530653066,186.1643347875771L362.6791179117912,185.0183694736857L362.2051705170517,183.90423652962463L362.34058405840585,183.52224809166083L362.8822382238224,182.75827121573323L362.34058405840585,180.9438261354052L361.9343434343434,179.70236371202287L360.9864486448645,178.49273365847085L361.1895689568957,178.14257759033737L361.9343434343434,177.88791863169484L362.47599759976,177.91975100152516L363.15306530653066,177.69692441271295L368.7050205020502,177.72875678254326L369.17896789678974,179.12938105507718L369.7206220622062,180.24351399913826L370.1268626862686,180.84832902591427L370.87163716371634,181.83513249065408L372.0903590359036,181.6759706415025L372.6997199719972,181.42131168285997L373.7830283028303,181.6759706415025L374.0538553855386,181.23031746387807L374.527802780278,180.11618451981698L375.6788178817882,180.05251978015633L375.81423142314236,179.73419608185318L376.7621262126213,179.70236371202287L376.5590059005901,180.40267584828985L378.8610361036104,180.37084347845953L378.9287428742874,181.5486411621812L379.26727672767277,182.2807856682785L378.9964496449645,183.4267509821699L379.13186318631864,184.5727162960613L379.74122412241223,185.27302843232823L379.6735173517352,187.5012943204504L380.14746474647467,187.3421324712988L380.9599459945995,187.37396484112912L382.11096109610963,187.1193058824866ZM360.91874187418745,177.5695949333917L360.3770877087709,176.13713829102744L361.1895689568957,175.34132904526953L361.73122312231226,175.02300534696636L362.4082908290829,175.65965274357268L361.73122312231226,176.04164118153648L361.460396039604,176.55095909882155L361.3926892689269,177.34676834457946Z"\n                          class="datamaps-subunit AGO"></path>\n                    <path d="M376.6944194419442,87.9614738610511L376.49129912991305,88.59812125765745L376.7621262126213,89.39393050341535L377.506900690069,89.87141605087011L377.506900690069,90.34890159832484L376.89753975397537,90.63539292679769L376.7621262126213,91.24020795357372L375.8819381938194,92.16334667865287L375.54340434043405,92.0041848295013L375.54340434043405,91.59036402170717L374.527802780278,90.98554899493116L374.3246824682468,90.06241026985198L374.46009600960093,88.78911547663932L374.73092309230924,88.21613281969366L374.46009600960093,87.8978091213905L374.3246824682468,87.3248264644448L375.1371637163716,86.4016877393656L375.20487048704877,86.75184380749909L375.7465246524652,86.5608495885172L376.15276527652765,87.07016750580227L376.6267126712671,87.26116172478416Z"\n                          class="datamaps-subunit ALB"></path>\n                    <path d="M434.9899489948995,121.06713848458014L435.3284828482848,120.9716413750892L435.3961896189619,121.48095929237424L436.8857385738574,121.19446796390142L438.44299429943,121.25813270356201L439.59400940094014,121.28996507339235L440.8804380438044,120.04850265001L442.23457345734573,118.838872596458L443.453295329533,117.6610749127363L443.7918291829183,118.29772230934259L444.0626562656266,119.79384369136747L443.1147614761476,119.79384369136747L442.9116411641164,121.03530611474983L443.25017501750176,121.28996507339235L442.43769376937695,121.67195351135615L442.43769376937695,122.43593038728375L441.8960396039604,123.19990726321133L441.8283328332833,123.96388413913891L441.422092209221,124.34587257710271L435.80243024302433,123.42273385202354L435.05765576557656,121.51279166220456Z"\n                          class="datamaps-subunit ARE"></path>\n                    <path d="M212.0992599259926,269.91529981113945L210.94824482448246,269.8516350714788L208.9170417041704,269.8516350714788L208.9170417041704,265.64976225387704L209.66181618161818,266.5092362392956L210.60971097109712,267.94169288165983L213.04715471547155,269.0558258257209L215.6877187718772,269.53331137317565L214.80753075307533,270.4882824680851L213.04715471547155,270.55194720774574ZM220.0886588658866,208.51065840845916L223.54170417041706,211.56656591216955L225.0989598959896,211.85305724064239L227.4009900990099,213.2536815131763L229.36448644864487,213.9858260192736L229.63531353135312,214.8134676348618L227.73952395239525,217.6783809195903L229.63531353135312,218.18769883687537L231.8019301930193,218.4741901653482L233.2914791479148,218.15586646704503L234.98414841484148,216.7234098246808L235.25497549754976,215.06812659350436L236.2028702870287,214.71797052537087L237.15076507650764,215.80027109960164L237.0830583058306,217.2963924816265L235.52580258025802,218.34686068602696L234.23937393739374,219.11083756195453L232.14046404640465,220.92528264228255L229.63531353135312,223.5037045985382L229.16136613661365,224.99982598056306L228.68741874187418,226.94160054021233L228.68741874187418,228.7878779903707L228.2811781178118,229.23353116799512L228.14576457645762,230.44316122154717L228.01035103510353,231.42996468628695L230.3800880088009,233.02158317780277L230.10926092609265,234.32671034084575L231.32798279827983,235.15435195643397L231.19256925692568,236.07749068151315L229.4321932193219,238.46491841878688L226.5885088508851,239.483554253357L222.86463646364638,239.8655426913208L220.7657265726573,239.67454847233893L221.17196719671966,240.82051378623026L220.7657265726573,242.2211380587642L221.10426042604263,243.17610915367368L220.02095209520954,243.81275655028003L218.05745574557457,244.06741550892258L216.2970797079708,243.39893574248592L215.55230523052307,243.87642128994065L215.82313231323133,245.7545311099293L217.04185418541854,246.32751376687503L218.12516251625163,245.72269874009902L218.66681668166817,246.70950220483883L216.90644064406442,247.2824848617845L215.41689168916895,248.46028254550623L215.14606460646064,250.33839236549488L214.67211721172117,251.357028200065L212.91174117411742,251.357028200065L211.42219221922193,252.3438316648048L210.8805380538054,253.74445593733873L212.77632763276327,255.11324784004233L214.53670367036705,255.49523627800613L213.92734273427342,257.1823518790129L211.69301930193018,258.23282008341334L210.474297429743,260.46108597153545L208.78162816281628,261.19323047763277L207.96914691469146,262.0845368328816L208.57850785078506,264.02631139253094L209.86493649364937,265.10861196676166L209.05245524552456,265.0131148572707L207.2920792079208,264.72662352879786L202.75572557255725,264.47196457015536L202.0109510951095,263.3896639959246L202.0109510951095,261.95720735356036L200.7922292229223,262.0845368328816L200.11516151615163,261.416057066445L199.9120412041204,259.410617767135L201.4015901590159,258.5829761515468L202.0109510951095,257.4051784678251L201.74012401240122,256.4502073729156L202.75572557255725,254.8267565115695L203.43279327932794,252.3438316648048L203.22967296729672,251.22969872074373L204.04215421542153,250.87954265261027L203.83903390339032,250.1792305163433L202.95884588458844,249.7972420783795L203.63591359135913,249.0014328326216L202.75572557255725,248.30112069635464L202.34948494849485,246.1365195478931L203.0942594259426,245.7545311099293L202.75572557255725,243.46260048214654L203.22967296729672,241.52082592249724L203.7036203620362,239.8655426913208L204.85463546354637,239.16523055505382L204.24527452745278,237.31895310489548L204.24527452745278,235.6000051340584L205.66711671167116,234.39037508050637L205.5994099409941,232.79875658899056L206.68271827182718,230.98431150866253L206.68271827182718,229.23353116799512L206.20877087708772,228.88337509986164L205.32858285828584,225.63647337716938L206.479597959796,223.72653118735042L206.34418441844187,221.88025373719205L207.02125212521253,220.1931381361853L208.23997399739974,218.41052542568758L209.5941094109411,217.2645601117962L208.98474847484746,216.5005832358686L209.3909890989099,215.89576820909258L209.32328232823284,212.77619596572157L211.35448544854484,211.85305724064239L212.03155315531555,209.87945031116277L211.82843284328433,209.43379713353835L213.3856885688569,207.71484916270128L215.82313231323133,208.19233471015602L216.90644064406442,209.5292942430293L217.65121512151217,208.03317286100443L219.8178317831783,208.09683760066508Z"\n                          class="datamaps-subunit ARG"></path>\n                    <path d="M419.9590459045905,89.39393050341535L422.5996099609961,89.10743917494253L422.9381438143815,89.58492472239725L423.6829182918292,89.90324842070041L423.27667766776676,90.38073396815514L424.2922792279228,91.0492137345918L423.75062506250623,91.6221963915375L424.5631063106311,92.13151430882257L425.44329432943294,92.44983800712573L425.44329432943294,93.75496517016869L424.7662266226623,93.81862990982933L424.02145214521454,92.73632933559858L424.02145214521454,92.41800563729541L423.20897089708967,92.44983800712573L422.5996099609961,91.94052008984066L422.2610761076108,91.97235245967096L421.51630163016307,91.43120217255559L420.0944594459446,90.95371662510085L420.29757975797577,90.06241026985198Z"\n                          class="datamaps-subunit ARM"></path>\n                    <path d="M467.6246124612461,258.1054906040921L468.84333433343335,258.7103056308681L470.6037103710371,258.9331322196803L470.6714171417142,259.2832882878138L470.19746974697466,260.14276227323234L467.2860786078608,260.2700917525536L467.2183718371837,259.2832882878138L467.48919891989203,258.4874790420559Z"\n                          class="datamaps-subunit ATF"></path>\n                    <path d="M611.433793379338,243.3671033726556L613.2618761876188,244.03558313909224L614.2774777477748,243.7809241804497L615.7670267026704,243.39893574248592L616.8503350335034,243.52626522180717L616.9857485748576,245.7545311099293L616.3763876387638,246.42301087636596L616.1732673267327,247.91913225839085L615.496199619962,247.40981434110577L614.2097709770976,248.71494150414873L613.8035303530353,248.61944439465782L612.6525152515253,248.55577965499714L611.5015001500151,246.96416116348132L611.2306730673067,245.72269874009902L610.1473647364737,244.06741550892258L610.2150715071507,243.20794152350402ZM607.9807480748075,192.56264112347068L608.6578157815782,194.02693013566522L609.8765376537654,193.32661799939828L610.4858985898591,194.1224272451562L611.3660866086609,194.85457175125347L611.1629662966296,195.6822133668417L611.5692069206921,197.30566422818782L611.9077407740774,198.228802953267L612.3816881688168,198.45162954207922L612.8556355635563,200.07508040342535L612.6525152515253,201.03005149833484L613.2618761876188,202.30334629154748L615.3607860786079,203.29014975628732L616.6472147214721,204.18145611153614L617.9336433643364,205.00909772712438L617.6628162816282,205.4547509047488L618.7461246124612,206.6325485884705L619.490899089909,208.66982025761075L620.2356735673568,208.25599944981664L620.9804480448045,209.0836410654049L621.454395439544,208.79714973693203L621.7929292929293,210.80258903624195L623.0793579357935,211.94855435013335L623.9595459545956,212.6488664864003L625.449094909491,214.1768202382555L625.9907490749074,215.70477399011068L626.0584558455846,216.7552421945111L625.9230423042304,217.93303987823282L626.8032303230323,219.52465836974864L626.6678167816782,221.1799416009251L626.3292829282929,222.07124795617395L625.8553355335533,223.72653118735042L625.9230423042304,224.80883176158116L625.5168016801681,226.17762366428477L624.7043204320432,227.86473926529152L623.2824782478249,228.7878779903707L622.6054105410541,230.25216700256527L621.9960496049605,231.17530572764443L621.454395439544,232.79875658899056L620.7096209620963,233.75372768390005L620.2356735673568,235.15435195643397L619.9648464846484,236.45947911947695L620.1002600260026,237.03246177642265L619.0169516951696,237.70094154285925L616.9180418041805,237.76460628251994L615.1576657665767,238.5285831584475L614.2774777477748,239.2607276645448L613.1264626462647,240.088369280133L611.5692069206921,239.22889529471445L610.4181918191819,238.9105715964113L610.7567256725672,237.9237681316715L609.7411241124113,238.27392419980498L608.0484548454846,239.6427161025086L606.423492349235,239.1333981852235L605.4078907890789,238.84690685675068L604.3245824582458,238.7195773774294L602.496499649965,238.17842709031402L601.2777777777778,237.00062940659234L600.9392439243925,235.56817276422808L600.465296529653,234.61320166931858L599.5851085108511,233.84922479339102L597.7570257025702,233.62639820457878L598.3663866386639,232.73509184932993L597.8924392439244,231.334467576796L597.0122512251226,232.63959473983897L595.3195819581958,232.98975080797248L596.2674767476748,231.93928260357202L596.6060106010601,230.85698202934128L597.2830783078307,229.9338433042621L597.1476647664766,228.53321903172815L595.6581158115812,230.12483752324397L594.439393939394,230.79331728968063L593.7623262326232,232.2894386717055L592.2727772777278,231.49362942594757L592.340484048405,230.5068259612078L591.1217621762177,229.1380340585042L590.1738673867387,228.43772192223724L590.5124012401241,227.9920687446128L588.0749574957497,226.8779358005517L586.7885288528853,226.8142710608911L584.9604460446044,225.8911323358119L581.5751075107511,226.0821265547938L579.1376637663766,226.75060632123046L577.0387538753876,227.38725371783678L575.2106710671067,227.25992423851554L573.2471747174718,228.21489533342503L571.6222122212222,228.66054851104946L571.2159715971598,229.64735197578926L570.5389038903891,230.41132885171683L568.9816481648165,230.44316122154717L567.7629262926293,230.60232307069873L566.1379637963796,230.28399937239556L564.7838283828382,230.47499359137746L563.4973997399741,230.57049070086842L562.3463846384639,231.55729416560823L561.8047304730474,231.49362942594757L560.8568356835683,232.00294734323268L559.9766476647665,232.60776237000866L558.5548054805481,232.54409763034803L557.3360836083609,232.54409763034803L555.3048804880488,231.334467576796L554.2892789278928,230.98431150866253L554.3569856985699,229.90201093443176L555.3048804880488,229.64735197578926L555.5757075707571,229.2016987981648L555.50800080008,228.53321903172815L555.7788278827883,227.2280918686852L555.5757075707571,226.11395892462411L554.5601060106011,224.20401673480515L554.2892789278928,223.1535485304047L554.3569856985699,222.07124795617395L553.6122112211222,220.86161790262193L553.5445044504451,220.28863524567623L552.7320232023202,219.55649073957898L552.4611961196119,218.0603693575541L551.3778877887789,216.59608034535955L551.1070607060706,215.7684387297713L551.9872487248724,216.59608034535955L551.3101810181018,214.84530000469212L552.2580758075808,215.38645029180753L552.7997299729973,216.1185947979048L552.7997299729973,215.1636237029953L551.8518351835183,213.6675023209704L551.6487148714871,213.09451966402474L551.2424742474248,212.52153700707905L551.445594559456,211.43923643284828L551.8518351835183,210.96175088539354L552.1226622662266,210.03861216031436L551.9195419541954,208.9244792162533L552.6643164316432,207.58751968338L552.7997299729973,209.01997632574424L553.6122112211222,207.71484916270128L555.1017601760177,207.07820176609496L556.0496549654966,206.28239252033703L557.471497149715,205.58208038407008L558.3516851685168,205.4547509047488L558.8256325632564,205.67757749356102L560.3151815181519,204.97726535729407L561.466196619662,204.78627113831215L561.7370237023702,204.37245033051806L562.2786778677869,204.18145611153614L563.2942794279428,204.2451208511968L565.2577757775778,203.6721381942511L566.2733773377338,202.84449657866287L566.7473247324732,201.85769311392306L567.8983398339834,200.90272201901357L567.9660466046604,200.13874514308597L568.0337533753376,199.12010930851585L569.3201820182019,197.52849081700003L570.1326632663266,199.1519416783462L570.9451445144514,198.7699532403824L570.2680768076807,197.87864688513352L570.8774377437744,196.95550816005434L571.6899189918992,197.36932896784845L571.8930393039304,195.93687232548422L572.9086408640865,195.01373360040503L573.382588258826,194.28158909430775L574.3304830483049,193.9632653960046L574.3304830483049,193.42211510888922L575.2106710671067,193.64494169770143L575.2106710671067,193.1674561502467L576.0231523152316,192.91279719160414L576.9710471047105,192.65813823296162L578.325182518252,193.51761221838018L579.408490849085,194.63174516244123L580.559505950595,194.63174516244123L581.7782278227822,194.82273938142316L581.3719871987199,193.7722711770227L582.2521752175218,192.27614979499785L583.1323632363237,191.7986642475431L582.7938293829383,191.32117870008832L583.6063106310631,190.23887812585758L584.7573257325732,189.57039835942095L585.7052205220522,189.79322494823316L587.3301830183019,189.4430688800997L587.2624762476248,188.48809778519018L585.9083408340834,187.88328275841417L586.9239423942395,187.59679142994133L588.1426642664267,188.07427697739607L589.1582658265827,188.8382538533237L590.7155215521552,189.31573940077843L591.2571757175717,189.1247451817965L592.4081908190819,189.69772783874222L593.5592059205921,189.15657755162684L594.2362736273627,189.31573940077843L594.7102210221021,188.96558333264494L595.522702270227,189.8887220577241L595.0487548754876,190.90735789229424L594.3039803980398,191.67133476822184L593.6946194619462,191.73499950788246L593.8977397739775,192.46714401397972L593.3560856085609,193.42211510888922L592.6790179017903,194.3452538339684L592.8144314431444,194.88640412108376L594.3039803980398,195.9050399556539L595.7258225822583,196.5098549824299L596.7414241424142,197.14650237903624L598.0955595559556,198.26063532309732L598.6372137213721,198.26063532309732L599.5851085108511,198.73812087055205L599.8559355935594,199.34293589732806L601.6840184018403,199.9795832939344L602.9027402740276,199.34293589732806L603.3089808980899,198.32430006275794L603.6475147514752,197.49665844716972L603.9183418341834,196.4461902427693L604.4599959995999,194.9500688607444L604.1891689168917,194.05876250549557L604.3245824582458,193.51761221838018L604.1214621462148,192.4353116441494L604.3922892289229,191.00285500178518L604.7308230823082,190.62086656382138L604.4599959995999,189.98421916721506L604.9339433943394,188.99741570247525L605.2724772477247,187.97877986790513L605.3401840184019,187.43762958078975L606.0172517251725,186.7373174445228L606.5589058905891,187.66045616960196L606.6943194319433,188.8382538533237L607.1682668266828,189.06108044213588L607.2359735973598,189.85688968789378L607.9130413041305,190.8118607828033L608.0484548454846,191.8623289872037Z"\n                          class="datamaps-subunit AUS"></path>\n                    <path d="M369.92374237423746,76.18349702383404L369.78832883288334,76.94747389976163L368.7050205020502,76.94747389976163L369.1112611261126,77.36129470755579L368.501900190019,78.57092476110782L368.0956595659566,78.88924845941096L366.470697069707,78.92108082924129L365.522802280228,79.3349016370354L363.9655465546555,79.20757215771413L361.25727572757273,78.73008661025936L360.85103510351036,78.06160684382272L359.0229522952296,78.37993054212588L358.75212521252126,78.76191898008969L357.66881688168814,78.47542765161687L356.6532153215322,78.44359528178653L355.84073407340736,78.09343921365306L356.1115611561156,77.61595366619828L356.0438543854386,77.29762996789512L356.58550855085514,77.20213285840418L357.533403340334,77.71145077568929L357.8042304230423,77.20213285840418L359.496899689969,77.29762996789512L360.85103510351036,76.94747389976163L361.73122312231226,77.0111386394223L362.34058405840585,77.39312707738607L362.47599759976,77.07480337908291L362.2051705170517,75.86517332553088L362.8822382238224,75.6105143668884L363.55930593059304,74.7510403814698L364.9811481148115,75.35585540824584L365.9967496749675,74.59187853231826L366.67381738173816,74.43271668316665L368.16336633663366,75.00569934011234L369.04355435543556,74.91020223062142L369.92374237423746,75.29219066858523L369.7206220622062,75.5150172573974Z"\n                          class="datamaps-subunit AUT"></path>\n                    <path d="M424.7662266226623,93.81862990982933L423.479797979798,93.56397095118682L422.53190319031904,92.70449696576824L422.2610761076108,91.97235245967096L422.5996099609961,91.94052008984066L423.20897089708967,92.44983800712573L424.02145214521454,92.41800563729541L424.02145214521454,92.73632933559858ZM429.37028702870293,88.05697097054208L430.3858885888589,89.04377443528188L431.33378337833784,90.38073396815514L432.21397139713974,90.4443987078158L432.75562556255625,90.95371662510085L431.1983698369837,91.11287847425243L430.8598359835984,92.57716748644698L430.5890089008901,93.24564725288361L429.84423442344234,93.65946806067775L429.91194119411944,94.61443915558722L429.43799379937997,94.7099362650782L428.2869786978698,93.72313280033839L428.9640464046405,92.7681617054289L428.3546854685469,92.22701141831351L427.6776177617762,92.35434089763478L425.44329432943294,93.75496517016869L425.44329432943294,92.44983800712573L424.5631063106311,92.13151430882257L423.75062506250623,91.6221963915375L424.2922792279228,91.0492137345918L423.27667766776676,90.38073396815514L423.6829182918292,89.90324842070041L422.9381438143815,89.58492472239725L422.5996099609961,89.10743917494253L423.0058505850585,88.78911547663932L424.4276927692769,89.33026576375474L425.44329432943294,89.45759524307599L425.7141214121412,89.23476865426377L424.7662266226623,88.21613281969366L425.2401740174018,87.92964149122079L425.78182818281834,87.99330623088143L427.0682568256826,89.13927154477282L427.94844484448447,89.2666010240941L428.2192719271927,88.78911547663932Z"\n                          class="datamaps-subunit AZE"></path>\n                    <path d="M393.14716471647165,175.11850245645732L393.07945794579456,172.85840419850484L392.6055105510551,171.9989302130863L393.75652565256524,172.1580920622379L394.2981798179818,171.07579148800716L395.31378137813783,171.2031209673284L395.38148814881487,171.9352654734257L395.7877287728773,172.3809186510501L395.8554355435544,172.98573367782612L395.38148814881487,173.36772211578992L394.63671367136715,174.35452558052972L393.95964596459646,175.05483771679667Z"\n                          class="datamaps-subunit BDI"></path>\n                    <path d="M344.2628762876288,70.10351438624366L345.6170117011701,70.2626762353952L347.37738773877385,69.88068779743143L348.528402840284,70.67649704318936L349.6117111711171,71.12215022081374L349.34088408840887,72.39544501402642L348.8669366936694,72.45910975368703L348.6638163816381,73.5095779580875L347.03885388538856,72.68193634249924L346.09095909590957,72.80926582182053L344.73682368236825,71.91795946657166L343.85663566356635,71.1858149604744L342.9764476447645,71.15398259064408L342.70562056205625,70.48550282420743Z"\n                          class="datamaps-subunit BEL"></path>\n                    <path d="M343.04415441544154,154.90494761420643L341.48689868986895,155.12777420301865L341.01295129512954,153.82264703997566L341.14836483648367,149.49344474305266L340.74212421242123,149.11145630508886L340.6744174417442,148.18831758000965L339.9973497349735,147.51983781357305L339.45569556955695,146.97868752645763L339.65881588158817,145.99188406171783L340.33588358835885,145.76905747290562L340.74212421242123,144.9414158573174L341.62231223122313,144.7822540081658L342.0285528552855,144.20927135122014L342.70562056205625,143.66812106410475L343.38268826882694,143.66812106410475L344.8045304530453,144.75042163833552L344.73682368236825,145.35523666511153L345.1430643064307,146.4693696091726L344.73682368236825,147.23334648510018L344.9399439943994,147.74266440238523L344.05975597559757,148.92046208610697L343.450395039504,149.49344474305266L343.11186118611863,150.67124242677434L343.17956795679567,151.88087248032636Z"\n                          class="datamaps-subunit BEN"></path>\n                    <path d="M332.6850185018502,148.53847364814317L331.39858985898593,148.0609881006884L330.518401840184,148.12465284034906L329.84133413341334,148.6021383878038L329.02885288528853,148.18831758000965L328.6903190319032,147.58350255323364L327.81013101310134,147.16968174543956L327.74242424242425,146.08738117120882L328.2163716371637,145.25973955562057L328.1486648664866,144.62309215901425L329.7059205920592,143.09513840715906L329.97674767476747,141.7900112441161L330.45069506950693,141.34435806649165L331.39858985898593,141.59901702513417L332.14336433643365,141.21702858717038L332.4141914191419,140.70771066988533L333.9037403740374,139.8800690542971L334.24227422742274,139.2752540275211L336.0026502650265,138.51127715159348L337.0182518251825,138.22478582312067L337.492199219922,138.60677426108447L338.71092109210923,138.60677426108447L338.5755075507551,139.4980806163333L338.77862786278627,140.35755460175184L339.8619361936194,141.59901702513417L339.9296429642964,142.49032338038305L342.0962596259626,142.93597655800747L342.0285528552855,144.20927135122014L341.62231223122313,144.7822540081658L340.74212421242123,144.9414158573174L340.33588358835885,145.76905747290562L339.65881588158817,145.99188406171783L338.03385338533855,145.96005169188754L337.15366536653664,145.80088984273596L336.54430443044305,146.08738117120882L335.73182318231824,145.96005169188754L332.481898189819,146.05554880137848L332.4141914191419,147.1060170057789Z"\n                          class="datamaps-subunit BFA"></path>\n                    <path d="M512.2433743374338,125.20534656252127L512.2433743374338,126.57413846522488L511.56630663066306,126.28764713675201L511.7017201720172,127.7837685187769L511.1600660066007,126.8287974238674L511.0923592359236,125.84199395912759L510.6861186118612,124.95068760387872L509.9413441344135,123.86838702964798L508.1809680968097,123.77288992015704L508.3840884088409,124.56869916591492L507.7747274727473,125.58733500048507L506.96224622462245,125.20534656252127L506.6914191419142,125.55550263065473L506.1497649764977,125.36450841167286L505.40499049904986,125.20534656252127L505.1341634163416,123.64556044083577L504.45709570957104,122.21310379847152L504.79562956295626,121.09897085441044L503.64461446144617,120.58965293712541L504.05085508550854,119.8893408008584L505.2695769576958,119.18902866459146L503.9154415441544,118.20222519985165L504.524802480248,116.92893040663901L506.01435143514345,117.75657202222723L506.96224622462245,117.85206913171817L507.0976597659766,119.15719629476115L508.8580358035804,119.41185525340369L510.61841184118407,119.38002288357339L511.7017201720172,119.69834658187654L510.82153215321534,121.28996507339235L510.0090509050905,121.38546218288329L509.3996899689969,122.46776275711404L510.48299829983,123.45456622185387L510.75382538253825,122.24493616830185L511.2954795479548,122.24493616830185Z"\n                          class="datamaps-subunit BGD"></path>\n                    <path d="M380.62141214121414,83.4731097149765L381.16306630663064,84.26891896073442L381.9078407840784,84.10975711158282L383.3296829682968,84.3962484400557L386.10566056605666,84.52357791937698L386.9858485848585,84.01426000209187L389.2201720172017,83.60043919429779L390.5743074307431,84.26891896073442L391.72532253225324,84.45991317971632L390.7097209720972,85.25572242547423L390.03265326532653,86.59268195834753L390.6420142014201,87.67498253257827L389.0170517051705,87.42032357393573L387.1212621262126,87.99330623088143L387.1212621262126,88.94827732579094L385.3608860886088,89.10743917494253L384.07445744574454,88.47079177833616L382.5849084908491,88.98010969562124L381.16306630663064,88.91644495596061L381.0276527652765,87.67498253257827L380.07975797579763,87.07016750580227L380.4182918291829,86.81550854715974L380.2151715171517,86.59268195834753L380.48599859985995,85.98786693157149L381.2307730773078,85.41488427462579L380.2828782878288,84.58724265903759L380.14746474647467,83.91876289260094Z"\n                          class="datamaps-subunit BGR"></path>\n                    <path d="M192.1934693469347,121.9902772096593L191.7195219521952,122.08577431915025L191.24557455745574,121.0034737449195L190.56850685068508,120.46232345780413L190.9747474747475,119.25269340425211L191.51640164016402,119.34819051374305L192.1934693469347,120.90797663542855ZM191.65181518151815,116.67427144799647L189.62061206120612,116.99259514629964L189.48519851985202,116.29228301003269L190.3653865386539,116.1331211608811L191.58410841084108,116.19678590054174ZM193.2090709070907,116.67427144799647L192.87053705370536,118.01123098086978L192.53200320032005,117.75657202222723L192.53200320032005,116.76976855748742L191.7195219521952,116.03762405139014L191.7195219521952,115.81479746257796Z"\n                          class="datamaps-subunit BHS"></path>\n                    <path d="M373.7153215321532,82.29531203125482L374.3923892389239,82.29531203125482L373.91844184418443,83.12295364684302L374.86633663366337,83.85509815294033L374.5955095509551,84.74640450818914L374.12156215621565,84.8100692478498L373.7830283028303,85.0010634668317L373.17366736673665,85.41488427462579L372.90284028402846,86.46535247902627L371.21017101710174,85.733207972929L370.53310331033106,84.96923109700136L369.78832883288334,84.55541028920725L368.97584758475847,83.85509815294033L368.5696069606961,83.25028312616429L367.62171217121715,82.39080914074576L368.0279527952796,81.59499989498784L368.7050205020502,82.04065307261227L369.1112611261126,81.6586646346485L369.9914491449145,81.59499989498784L371.6164116411642,81.913323593291L372.90284028402846,81.88149122346071Z"\n                          class="datamaps-subunit BIH"></path>\n                    <path d="M382.17866786678667,65.29682654186584L384.0067506750675,65.29682654186584L386.03795379537956,64.59651440559892L386.44419441944194,63.51421383136817L388.00145014501453,62.90939880459213L387.7983298329833,62.08175718900394L388.9493449344934,61.76343349070078L390.9805480548055,61.03128898460345L392.94404440444043,61.508774532058226L393.2148714871487,61.98626007951299L394.2304730473047,61.76343349070078L396.05855585558555,62.2090866683252L396.26167616761677,63.06856065374373L395.8554355435544,63.577878571028776L397.00645064506455,64.81934099441114L397.8189318931893,65.16949706254462L397.6835183518352,65.51965313067805L398.9699469946995,65.83797682898128L399.511601160116,66.34729474626631L398.7668266826683,66.76111555406041L397.2095709570957,66.6974508143998L396.8710371037104,66.85661266355135L397.34498449844983,67.49326006015767L397.75122512251227,68.67105774387942L396.1939693969397,68.79838722320069L395.5846084608461,69.21220803099479L395.44919491949196,70.16717912590427L394.70442044204424,69.97618490692237L393.0117511751175,70.07168201641332L392.537803780378,69.6260288387889L391.7930293029303,69.94435253709204L391.11596159615965,69.68969357844955L389.62641264126415,69.65786120861922L387.52750275027506,69.18037566116445L385.63171317131713,69.05304618184319L384.14216421642163,69.08487855167353L383.12656265626566,69.59419646895856L382.24637463746376,69.65786120861922L382.17866786678667,68.83021959303098L381.63701370137017,67.97074560761244L382.78802880288026,67.58875716964867L382.78802880288026,66.82478029372108L382.24637463746376,66.1244681574541Z"\n                          class="datamaps-subunit BLR"></path>\n                    <path d="M170.3918891889189,133.16343902010036L170.32418241824183,132.9087800614578L170.5950095009501,132.81328295196687L170.93354335433543,133.03610954077908L171.6106110611061,131.89014422688768L171.94914491449143,131.89014422688768L171.94914491449143,132.14480318553024L172.28767876787677,132.17663555536055L172.28767876787677,132.6859534726456L171.94914491449143,133.4817627184035L172.15226522652264,133.76825404687636L171.94914491449143,134.43673381331303L172.08455845584558,134.6277280322949L171.8137313731373,135.5826991272044L171.475197519752,136.09201704448947L171.13666366636664,136.12384941431978L170.73042304230424,136.79232918075644L170.18876887688768,136.79232918075644L170.32418241824183,134.65956040212524Z"\n                          class="datamaps-subunit BLZ"></path>\n                    <path d="M211.82843284328433,209.43379713353835L210.474297429743,209.6884560921809L209.72952295229524,207.07820176609496L208.7139213921392,204.97726535729407L209.32328232823284,203.16282027696604L208.3076807680768,202.3670110312081L208.03685368536853,200.9982191285045L207.15666566656665,199.72492433529186L208.3076807680768,197.68765266615162L207.495199519952,196.12786654446612L207.96914691469146,195.49121914785977L207.63061306130612,194.79090701159282L208.3076807680768,193.83593591668335L208.37538753875387,192.24431742516754L208.44309430943096,190.93919026212455L208.84933493349334,190.30254286551823L207.22437243724374,187.24663536180785L208.64621462146212,187.40579721095943L209.5941094109411,187.37396484112912L210.00035003500352,186.80098218418343L211.69301930193018,186.03700530825586L212.64091409140914,185.33669317198886L215.14606460646064,185.0183694736857L214.94294429442945,186.41899374621963L215.14606460646064,187.15113825231688L215.01065106510652,188.42443304552955L217.04185418541854,190.1115486465363L219.14076407640763,190.39803997500917L219.8855385538554,191.13018448110645L221.17196719671966,191.4803405492399L221.9167416741674,192.02149083635533L223.13546354635463,192.02149083635533L224.2187718771877,192.56264112347068L224.28647864786478,193.64494169770143L224.69271927192722,194.21792435464715L224.69271927192722,195.01373360040503L224.15106510651066,195.04556597023537L224.89583958395838,197.2419994885272L228.48429842984297,197.30566422818782L228.2134713471347,198.41979717224888L228.41659165916593,199.1519416783462L229.4321932193219,199.66125959563124L229.83843384338437,200.83905727935294L229.56760676067609,202.33517866137782L229.02595259525953,203.16282027696604L229.22907290729074,204.21328848136648L228.61971197119712,204.59527691933027L228.55200520052006,204.02229426238458L226.85933593359337,203.06732316747508L225.0989598959896,203.03549079764477L221.7813281328133,203.57664108476013L220.9011401140114,205.2319243159366L220.83343334333435,206.25056015050671L220.0886588658866,208.51065840845916L219.8178317831783,208.09683760066508L217.65121512151217,208.03317286100443L216.90644064406442,209.5292942430293L215.82313231323133,208.19233471015602L213.3856885688569,207.71484916270128Z"\n                          class="datamaps-subunit BOL"></path>\n                    <path d="M229.63531353135312,223.5037045985382L232.14046404640465,220.92528264228255L234.23937393739374,219.11083756195453L235.52580258025802,218.34686068602696L237.0830583058306,217.2963924816265L237.15076507650764,215.80027109960164L236.2028702870287,214.71797052537087L235.25497549754976,215.06812659350436L235.66121612161214,213.9858260192736L235.86433643364336,212.87169307521253L235.93204320432045,211.85305724064239L235.25497549754976,211.50290117250893L234.51020102010202,211.78939250098176L233.83313331333136,211.72572776132114L233.56230623062305,210.99358325522385L233.42689268926893,209.27463528438676L233.08835883588358,208.7016526274411L231.8019301930193,208.19233471015602L231.05715571557158,208.57432314811982L229.02595259525953,208.22416707998633L229.16136613661365,205.6457451237307L228.61971197119712,204.59527691933027L229.22907290729074,204.21328848136648L229.02595259525953,203.16282027696604L229.56760676067609,202.33517866137782L229.83843384338437,200.83905727935294L229.4321932193219,199.66125959563124L228.41659165916593,199.1519416783462L228.2134713471347,198.41979717224888L228.48429842984297,197.30566422818782L224.89583958395838,197.2419994885272L224.15106510651066,195.04556597023537L224.69271927192722,195.01373360040503L224.69271927192722,194.21792435464715L224.28647864786478,193.64494169770143L224.2187718771877,192.56264112347068L223.13546354635463,192.02149083635533L221.9167416741674,192.02149083635533L221.17196719671966,191.4803405492399L219.8855385538554,191.13018448110645L219.14076407640763,190.39803997500917L217.04185418541854,190.1115486465363L215.01065106510652,188.42443304552955L215.14606460646064,187.15113825231688L214.94294429442945,186.41899374621963L215.14606460646064,185.0183694736857L212.64091409140914,185.33669317198886L211.69301930193018,186.03700530825586L210.00035003500352,186.80098218418343L209.5941094109411,187.37396484112912L208.64621462146212,187.40579721095943L207.22437243724374,187.24663536180785L206.20877087708772,187.59679142994133L205.32858285828584,187.37396484112912L205.46399639963997,184.50905155640064L203.90674067406744,185.62318450046172L202.28177817781778,185.55951976080107L201.53700370037004,184.5727162960613L200.31828182818285,184.44538681674L200.65681568156816,183.6495775709821L199.64121412141213,182.5036122570907L198.89643964396438,180.81649665608396L199.37038703870388,180.46634058795047L199.37038703870388,179.67053134219253L200.52140214021404,179.12938105507718L200.31828182818285,178.11074522050706L200.7922292229223,177.4740978239007L200.92764276427644,176.5827914686519L203.0942594259426,175.30949667543922L204.5838083808381,174.95934060730573L204.85463546354637,174.67284927883287L206.54730473047303,174.73651401849352L207.42749274927493,169.57967010598227L207.42749274927493,168.78386086022437L207.15666566656665,167.7015602859936L206.34418441844187,167.00124814972665L206.34418441844187,165.66428861685336L207.35978597859787,165.34596491855018L207.76602660266025,165.5369591375321L207.83373337333734,164.80481463143482L206.75042504250425,164.6138204124529L206.68271827182718,163.43602272873122L210.33888388838886,163.49968746839184L211.01595159515952,162.8312077019552L211.48989898989902,163.43602272873122L211.8961396139614,164.5501556727923L212.23467346734674,164.29549671414975L213.25027502750277,165.3141325487199L214.73982398239826,165.18680306939862L215.0783578357836,164.6138204124529L216.500200020002,164.1681672348285L217.24497449744973,163.84984353652533L217.51580158015804,163.05403429076742L218.8022302230223,162.51288400365206L218.73452345234523,162.13089556568826L217.1095609560956,161.97173371653665L216.90644064406442,160.79393603281497L216.97414741474148,159.5206412396023L216.0939593959396,159.04315569214756L216.43249324932492,158.85216147316564L217.85433543354335,159.1068204318082L219.34388438843882,159.58430597926292L219.8855385538554,159.1386528016385L221.23967396739675,158.85216147316564L223.33858385838585,158.12001696706838L224.0156515651565,157.4197048308014L223.81253125312531,156.87855454368605L224.76042604260428,156.8148898040254L225.23437343734372,157.22871061181954L224.96354635463547,158.05635222740776L225.5729072907291,158.34284355588062L226.04685468546856,159.23414991112944L225.50520052005203,159.87079730773578L225.23437343734372,161.4942481690819L225.70832083208322,162.4492192639914L225.84373437343737,163.30869324940994L226.9947494749475,164.1999996046588L227.94264426442643,164.29549671414975L228.14576457645762,163.91350827618595L228.68741874187418,163.81801116669502L229.56760676067609,163.49968746839184L230.17696769676968,162.9903695511068L231.19256925692568,163.14953140025835L231.66651665166518,163.08586666059773L232.68211821182118,163.24502850974932L232.8852385238524,162.86304007178552L232.54670467046705,162.48105163382172L232.74982498249824,161.93990134670634L233.49459945994602,162.09906319585792L234.3747874787479,161.90806897687602L235.45809580958095,162.32188978467013L236.27057705770576,162.70387822263393L236.8799379937994,162.19456030534886L237.28617861786182,162.29005741483982L237.55700570057004,162.79937533212487L238.43719371937192,162.67204585280362L239.1819681968197,161.97173371653665L239.72362236223626,160.57110944400273L240.87463746374635,158.85216147316564L241.48399839983998,158.7566643636747L241.95794579457947,159.80713256807516L243.04125412541254,163.08586666059773L243.98914891489147,163.40419035890088L244.0568556855686,164.7093175219439L242.63501350135013,166.23727127379905L243.24437443744375,166.81025393074472L246.5620062006201,167.09674525921758L246.62971297129715,169.00668744903658L248.05155515551553,167.76522502565425L250.42129212921293,168.43370479209088L253.53580358035802,169.57967010598227L254.483698369837,170.69380305004336L254.14516451645164,171.71243888461345L256.37948794879486,171.13945622766778L260.03565356535654,172.1580920622379L262.8116311631163,172.06259495274696L265.5876087608761,173.62238107443244L268.0250525052505,175.72331748323333L269.446894689469,176.2644677703487L271.07185718571856,176.35996487983965L271.7489248924893,176.93294753678535L272.3582858285829,179.3522076438894L272.69681968196824,180.46634058795047L271.95204520452046,183.58591283132148L271.0041504150415,184.8273752547038L268.36358635863587,187.43762958078975L267.1448644864487,189.57039835942095L265.7230223022302,191.19384922076708L265.24907490749075,191.2256815905974L264.7751275127513,192.594473493301L264.9105410541054,196.12786654446612L264.36888688868885,199.0246121990249L264.1657665766577,200.26607462240725L263.5564056405641,200.9982191285045L263.2178717871787,203.5129763450995L261.3220822082208,205.96406882203388L260.98354835483553,207.90584338168316L259.49399939994,208.7334849972714L259.0200520052005,209.84761794133246L256.9888488848885,209.84761794133246L254.00975097509752,210.57976244742974L252.72332233223324,211.40740406301796L250.6244124412441,211.98038671996366L248.3900890089009,213.47650810198854L246.83283328332834,215.32278555214688L246.49429942994303,216.7234098246808L246.83283328332834,217.77387802908123L246.49429942994303,219.68382021890022L246.0880588058806,220.57512657414907L244.73392339233925,221.62559477854953L242.63501350135013,224.93616124090244L241.01005100510048,226.4322826229273L239.72362236223626,227.29175660834582L238.84343434343435,229.10620168867385L237.62471247124714,230.1566698930743L237.0830583058306,229.10620168867385L237.96324632463245,228.21489533342503L236.8799379937994,226.94160054021233L235.3903890389039,225.8911323358119L233.42689268926893,224.68150228225988L232.74982498249824,224.7451670219205L230.85403540354037,223.28087800972597Z"\n                          class="datamaps-subunit BRA"></path>\n                    <path d="M552.7997299729973,158.1518493368987L553.5445044504451,157.45153720063175L555.1017601760177,156.4329013660616L555.0340534053405,157.35604009114078L554.8986398639864,158.5338377748625L554.0184518451846,158.50200540503218L553.6122112211222,159.1386528016385Z"\n                          class="datamaps-subunit BRN"></path>\n                    <path d="M510.41529152915297,114.44600555987432L511.2277727772777,115.05082058665033L511.0923592359236,116.19678590054174L509.535103510351,116.26045064020235L507.97784778477853,116.1331211608811L506.75912591259134,116.41961248935397L505.06645664566463,115.71930035308698L504.99874987498754,115.3373119151232L506.2851785178518,113.93668764258928L507.3007800780078,113.45920209513451L508.65491549154916,113.90485527275895L509.60281028102816,113.93668764258928Z"\n                          class="datamaps-subunit BTN"></path>\n                    <path d="M393.35028502850287,208.22416707998633L390.7097209720972,209.59295898268994L389.0170517051705,210.99358325522385L388.3399839983998,212.26687804843652L387.7983298329833,212.96719018470347L386.7827282728273,213.09451966402474L386.44419441944194,214.01765838910393L386.2410741074108,214.5906410460496L385.0900590059006,215.03629422367402L383.53280328032804,214.94079711418308L382.6526152615262,214.39964682706773L381.8401340134014,214.1768202382555L380.8922392239224,214.62247341587994L380.48599859985995,215.51377977112878L379.5381038103811,216.08676242807448L378.65791579157917,216.9144040436627L377.3037803780378,217.1053982626446L376.89753975397537,216.46875086603828L377.03295329532955,215.32278555214688L375.9496449644965,213.54017284164917L375.4079907990799,213.2536815131763L375.4079907990799,207.7466815325316L377.23607360736077,207.68301679287094L377.3037803780378,200.9982191285045L378.7256225622562,200.93455438884388L381.63701370137017,200.26607462240725L382.3140814081408,201.03005149833484L383.53280328032804,200.29790699223756L384.14216421642163,200.29790699223756L385.15776577657766,199.88408618444345L385.496299629963,200.0114156637647L386.2410741074108,201.5393694156199L386.57960796079607,201.85769311392306L387.18896889688966,202.93999368815383L389.35558555855584,205.00909772712438L390.16806680668066,205.2319243159366L390.16806680668066,205.86857171254294L390.7097209720972,207.07820176609496L392.1315631563157,207.3646930945678Z"\n                          class="datamaps-subunit BWA"></path>\n                    <path d="M366.74152415241525,152.7085140959146L368.2987798779878,152.58118461659333L368.6373137313732,152.0718666993083L368.97584758475847,152.1355314389689L369.44979497949794,152.54935224676302L371.75182518251825,151.81720774066574L372.56430643064306,151.08506323456848L373.5799079907991,150.44841583796213L373.37678767876787,149.77993607152547L373.91844184418443,149.5889418525436L375.7465246524652,149.71627133186487L377.506900690069,148.8567973464463L378.8610361036104,146.78769330747576L379.8089308930893,146.02371643154817L381.0276527652765,145.70539273324502L381.2307730773078,146.5330343488332L382.3140814081408,147.67899966272464L382.3140814081408,148.47480890848252L381.9755475547555,149.2387857844101L382.11096109610963,149.8117684413558L382.78802880288026,150.3847510983015L384.2098709870987,151.18056034405942L385.22547254725475,151.944537219987L385.22547254725475,152.54935224676302L386.51190119011903,153.53615571150283L387.32438243824384,154.36379732709105L387.7983298329833,155.47793027115213L389.1524652465247,156.24190714707973L389.49099909990997,156.8148898040254L388.8816381638164,157.0377163928376L387.6629162916292,156.97405165317699L386.2410741074108,156.7830574341951L385.5640064006401,156.94221928334667L385.22547254725475,157.3878724609711L384.6161116111611,157.45153720063175L383.9390439043905,157.06954876266795L381.8401340134014,157.9926874877471L380.9599459945995,157.8016932687652L380.6891189118912,157.9608551179168L380.14746474647467,159.07498806197788L378.7256225622562,158.7248319938444L377.3714871487149,158.5338377748625L376.15276527652765,157.83352563859555L374.5955095509551,157.1968782419892L373.5799079907991,157.8016932687652L372.90284028402846,158.7566643636747L372.6997199719972,160.06179152671768L371.48099809981,159.96629441722672L370.1945694569457,159.64797071892357L369.1112611261126,160.6666065534937L368.0956595659566,162.41738689416107L367.8925392539254,161.8444042372154L367.8248324832483,160.98493025179684L366.94464446444647,160.38011522502083L366.2675767576758,159.42514413011136L366.1321632163216,158.7566643636747L365.25197519751976,157.7698608989349L365.3873887388739,157.1968782419892L365.1842684268427,156.4010689962313L365.31968196819685,154.96861235386706L365.7936293629363,154.61845628573357Z"\n                          class="datamaps-subunit CAF"></path>\n                    <path d="M218.26057605760576,79.11207504822319L219.61471147114713,79.36673400686567L221.37508750875088,79.3349016370354L220.42719271927194,80.098878512963L219.75012501250126,80.22620799228426L217.38038803880386,79.43039874652634L216.90644064406442,78.79375134992003L217.58350835083507,78.22076869297432ZM221.7813281328133,74.33721957367571L220.83343334333435,74.36905194350604L218.3959895989599,73.76423691673L216.63561356135614,72.87293056148118L217.31268126812682,72.71376871232958L219.8178317831783,73.19125425978434L221.71362136213622,73.98706350554221ZM105.73192319231921,75.4513525177368L104.7840284028403,75.70601147637933L101.66951695169516,74.8465374909608L101.12786278627863,74.17805772452415L99.43519351935194,73.5095779580875L99.09665966596663,73.0002600408024L97.20087008700872,72.65010397266897L96.45609560956095,71.63146813809884L96.5915091509151,71.1858149604744L98.62271227122716,71.5996357682685L99.77372737273728,71.88612709674139L101.53410341034103,72.07712131572326L102.14346434643463,72.74560108215992L103.09135913591359,73.63690743740878L104.98714871487147,74.40088431333636ZM232.4112911291129,71.34497680962595L231.19256925692568,73.0002600408024L232.4112911291129,72.36361264419608L233.69771977197723,72.74560108215992L233.02065206520652,73.41408084859656L234.7133213321332,73.9233987658816L235.52580258025802,73.47774558825716L237.42159215921595,74.05072824520288L236.8799379937994,75.41952014790645L238.16636663666367,75.1011964496033L238.43719371937192,76.11983228417343L238.97884788478848,77.26579759806484L238.23407340734076,78.92108082924129L237.35388538853886,78.9847455689019L236.13516351635167,78.63458950076843L236.54140414041404,77.10663574891323L235.99974997499748,76.8519767902707L233.83313331333136,78.50726002144714L232.68211821182118,78.44359528178653L234.03625362536255,77.55228892653767L232.20817081708174,77.10663574891323L230.17696769676968,77.20213285840418L226.52080208020803,77.13846811874357L226.24997499749975,76.5973178316282L227.4009900990099,75.92883806519156L226.5885088508851,75.41952014790645L228.2134713471347,74.2735548340151L230.10926092609265,71.28131206996534L231.32798279827983,70.23084386556492L232.95294529452946,69.56236409912829L233.83313331333136,69.65786120861922L233.42689268926893,70.16717912590427ZM88.3989898989899,65.04216758322335L90.22707270727076,64.88300573407174L89.6854185418542,67.01577451270296L91.3103810381038,68.54372826455814L90.56560656065605,68.54372826455814L89.41459145914595,67.68425427913961L88.73752375237518,66.82478029372108L87.78962896289627,66.21996526694504L87.45109510951096,65.39232365135683L87.518801880188,64.7875086245808ZM188.94354435443546,49.7626300646715L188.19876987698768,50.74943352941129L187.3862886288629,50.59027168025969L186.84463446344634,50.04912139314433L186.98004800480047,49.92179191382303L187.65711571157115,49.34880925687739L188.46959695969596,49.38064162670767ZM184.0009500950095,48.743994230101364L181.76662666266625,49.7626300646715L180.480198019802,49.73079769484117L180.07395739573957,49.22147977755613L181.42809280928094,48.36200579213758L184.0009500950095,48.36200579213758ZM177.83963396339632,43.205161879626345L178.17816781678167,44.03280349521452L179.1937693769377,43.7463121667417L180.2770777077708,44.22379771419642L182.30828082808281,44.86044511080274L184.474897489749,45.46526013757877L184.61031103110312,46.35656649282764L186.03215321532153,46.19740464367604L187.3862886288629,46.83405204028236L185.6936193619362,47.407034697228056L182.78222822282225,46.961381519603634L181.6989198919892,46.133739904015414L179.87083708370838,47.120543368755236L177.16256625662567,48.10734683349504L176.55320532053207,46.99321388943396L173.98034803480348,47.18420810841586L175.6053105310531,46.22923701350638L175.87613761376136,44.76494800131181L176.48549854985498,43.046000030474744ZM195.30798079807983,40.40391333455847L193.2090709070907,40.49941044404943L192.7351235123512,39.57627171897026L193.54760476047605,38.493971144739476L195.30798079807983,38.23931218609698L196.72982298229823,38.78046247321234L196.7975297529753,39.57627171897026L196.52670267026704,39.83093067761277ZM158.13696369636963,36.71135843424179L156.98594859485948,37.37983820067845L154.41309130913092,36.80685554373275L152.92354235423542,36.99784976271462L150.35068506850686,36.17020814712643L151.97564756475646,35.56539312035039L153.26207620762077,34.769583874592456L155.2932793279328,35.27890179187756L156.44429442944295,35.62905786001099L156.98594859485948,35.979213928144475ZM211.76072607260727,81.78599411396972L210.54200420042008,80.7355259095693L210.54200420042008,78.15710395331367L209.66181618161818,77.61595366619828L208.44309430943096,77.93427736450144L207.76602660266025,77.4249594472164L206.34418441844187,78.85741608958064L205.8025302530253,80.32170510177521L205.12546254625465,81.18117908719374L204.31298129812984,81.46767041566656L203.7036203620362,81.56316752515751L203.500500050005,82.04065307261227L200.04745474547457,82.04065307261227L197.2037703770377,82.04065307261227L196.39128912891292,82.39080914074576L194.3600860086009,83.72776867361905L194.15696569656967,83.88693052277061L193.54760476047605,84.61907502886793L191.78722872287227,84.61907502886793L189.95914591459146,84.61907502886793L189.14666466646665,84.93739872717109L189.41749174917493,85.28755479530457L189.55290529052905,85.86053745225021L189.55290529052905,86.05153167123215L187.11546154615462,87.00650276614164L185.15196519651965,87.29299409461449L182.98534853485347,88.2797975593543L182.511401140114,88.2797975593543L181.83433343334332,87.99330623088143L181.63121312131213,87.73864727223892L181.6989198919892,87.54765305325701L182.1051605160516,86.87917328682035L182.98534853485347,85.82870508241994L183.52700270027006,84.71457213835886L183.1884688468847,83.09112127701273L182.78222822282225,81.40400567600595L180.81873187318732,80.51269932075708L181.0218521852185,80.1625432526236L180.75102510251025,79.93971666381138L180.20937093709372,79.93971666381138L179.87083708370838,79.65322533533856L179.73542354235423,79.20757215771413L179.3968896889689,79.39856637669601L178.92294229422944,79.3349016370354L178.9906490649065,79.14390741805346L178.58440844084407,78.95291319907157L178.3812881288129,78.47542765161687L176.95944594459445,77.87061262484083L175.40219021902192,77.23396522823451L173.5741074107411,76.50182072213725L171.8137313731373,75.8333409557006L170.12106210621062,76.37449124281598L169.51170117011702,76.37449124281598L167.2096709670967,75.89700569536122L165.65241524152415,76.15166465400377L163.8243324332433,75.54684962722772L161.9285428542854,75.2603582987549L160.64211421142116,75.13302881943363L160.03275327532754,74.81470512113047L159.69421942194222,73.79606928656032L159.0848584858486,73.79606928656032L159.0171517151715,74.52821379265758L155.15786578657864,74.52821379265758L148.72572257225724,74.52821379265758L142.36128612861285,74.52821379265758L136.67391739173917,74.52821379265758L131.05425542554255,74.52821379265758L125.502300230023,74.52821379265758L119.74722472247228,74.52821379265758L117.91914191419144,74.52821379265758L112.36718671867186,74.52821379265758L107.01835183518352,74.52821379265758L106.74752475247521,74.52821379265758L103.09135913591359,72.68193634249924L101.73722372237225,71.85429472691105L98.35188518851882,71.09031785098347L97.33628362836285,69.40320224997667L97.53940394039401,68.2572369360853L95.1696669666967,67.4614276903274L94.8311331133113,65.9334739384722L92.52910291029104,64.56468203576858L92.52910291029104,63.6097109408591L93.54470447044702,62.68657221577992L93.54470447044702,61.508774532058226L90.2947794779478,60.33097684833653L88.3989898989899,58.16637569987499L87.24797479747974,56.82941616700174L85.48759875987597,55.96994218158315L84.20117011701174,55.20596530565555L83.25327532753272,54.219161840915746L81.35748574857485,54.85580923752207L79.52940294029406,55.90627744192254L77.83673367336735,54.664815018540196L76.55030503050301,53.83717340295199L74.72222222222223,53.3278554856669L72.8264326432643,53.26419074600629L72.8264326432643,42.5366821131897L72.89413941394139,35.56539312035039L76.34718471847185,36.011046297974815L79.32628262826285,36.934185023054L81.28977897789781,37.09334687220556L82.91474147414743,36.32936999627799L85.21677167716769,35.72455496950201L87.99274927492749,35.94738155831419L90.83643364336433,35.11973994272594L93.88323832383239,34.67408676510152L95.23737373737373,35.43806364102912L96.5915091509151,34.99241046340467L96.99774977497748,34.13293647798616L98.35188518851882,34.323930696968034L101.53410341034103,36.011046297974815L104.03925392539256,34.7377515047622L104.24237423742375,36.17020814712643L106.54440444044405,35.85188444882323L107.28917891789177,35.31073416170784L109.59120912091211,35.40623127119878L112.43489348934895,36.202040516956686L116.83583358335835,36.90235265322369L119.40869086908688,37.22067635152683L121.30448044804481,37.09334687220556L123.80963096309631,38.048317967115054L121.16906690669069,38.97145669219424L124.55440544054406,39.38527749998835L129.63241324132414,39.16245091117612L131.25737573757374,38.81229484304262L133.22087208720873,39.958260156934045L135.31978197819782,39.003289062024564L133.35628562856286,38.20747981626664L134.57500750075008,37.57083241966032L136.87703770377038,37.475335310169385L138.36658665866588,37.28434109118746L139.92384238423844,37.72999426881188L141.81963196319631,38.74863010338203L143.91854185418543,38.58946825423047L147.23617361736171,39.448942239649L150.14756475647565,39.16245091117612L152.85583558355836,39.19428328100646L152.65271527152714,38.01648559728474L154.34538453845386,37.698161898981596L157.25677567756773,38.33480929558792L157.25677567756773,40.11742200608565L158.4077907790779,38.62130062406075L159.96504650465045,38.65313299389106L160.77752775277528,36.77502317390241L158.74632463246326,35.62905786001099L156.57970797079707,34.86508098408342L156.71512151215123,32.79597694511284L158.94944494449445,31.427185042409292L161.45459545954594,31.713676370882098L163.35038503850387,32.541317986470375L165.9232423242324,34.67408676510152L164.23057305730575,35.597225490180705L167.75132513251324,35.979213928144475L167.68361836183618,37.889156117963495L170.25647564756477,36.424867105768925L172.490799079908,37.634497159320944L171.88143814381436,39.03512143185485L173.7095209520952,40.30841622506753L175.67301730173017,38.9396243223639L177.09485948594858,37.3161734610178L177.16256625662567,35.24706942204725L179.87083708370838,35.40623127119878L182.64681468146816,35.66089022984133L185.15196519651965,36.615861324750796L185.2873787378738,37.53900004983001L183.86553655365537,38.525803514569816L185.21967196719672,39.54443934913995L184.94884488448847,40.46757807421909L181.2926792679268,41.7727052372621L178.65211521152116,42.059196565734936L176.6886188618862,41.48621390878921L176.14696469646964,42.44118500369869L174.31888188818883,44.03280349521452L173.77722772277227,44.86044511080274L171.6106110611061,46.133739904015414L168.9023402340234,46.26106938333672L167.4127912791279,47.056878629094555L167.27737773777378,48.2665086826466L165.11076107610762,48.4893352714588L162.8087308730873,50.017289023314035L160.77752775277528,52.150057801945195L160.03275327532754,53.614346814139765L159.96504650465045,55.81078033243162L162.67331733173316,56.129104030734766L163.55350535053506,57.87988437140217L164.43369336933694,59.3123410137664L167.07425742574256,58.93035257580257L170.52730273027305,59.757994191390836L172.42309230923092,60.45830632765781L173.77722772277227,61.34961268290661L176.14696469646964,61.890762970021996L178.1104610461046,62.654739845949635L181.22497249724972,62.782069325270854L183.25617561756175,62.973063544252796L182.98534853485347,64.59651440559892L183.52700270027006,66.47462422558758L184.94884488448847,68.57556063438847L187.72482248224821,70.35817334488614L189.14666466646665,69.75335831811016L190.16226622662268,67.81158375846088L189.21437143714374,64.85117336424146L187.86023602360234,63.86436989950165L190.9070407040704,62.973063544252796L193.0059505950595,61.66793638120983L194.0892589258926,60.36280921816682L193.88613861386136,59.089514424954174L192.5997099709971,57.49789593343834L190.3653865386539,56.09727166090444L192.53200320032005,54.12366473142481L191.7195219521952,52.40471676058776L191.1101610161016,49.47613873619861L192.3965896589659,49.03048555857423L195.64651465146514,49.53980347585927L197.6100110011001,49.73079769484117L199.1672667266727,49.25331214738641L200.85993599359935,49.889959543992774L203.22967296729672,50.97226011822352L203.77132713271325,51.70440462432077L207.15666566656665,51.83173410364206L207.0889588958896,53.423352595157894L207.69831983198318,55.77894796260128L209.3909890989099,56.09727166090444L210.81283128312833,57.21140460496551L213.52110211021102,56.16093640056508L215.28147814781477,54.091832361594484L216.5679067906791,53.20052600634567L217.98974897489748,54.88764160735241L220.42719271927194,57.27506934462612L222.52610261026103,59.53516760257861L221.7813281328133,60.7129652863003L224.28647864786478,61.76343349070078L225.9791479147915,62.84573406493152L228.95824582458246,63.32321961238624L230.17696769676968,63.92803463916226L230.9217421742174,65.51965313067805L232.4112911291129,65.7743120893206L233.15606560656067,66.47462422558758L233.2914791479148,68.60739300421875L231.93734373437346,69.30770514048574L230.58320832083209,69.97618490692237L227.468696869687,70.64466467335903L225.0989598959896,72.17261842521421L221.9167416741674,72.49094212351737L217.92204220422042,72.07712131572326L215.0783578357836,72.07712131572326L213.1148614861486,72.20445079504455L211.55760576057605,73.57324269774811L209.18786878687868,74.40088431333636L206.479597959796,76.88380916010102L204.31298129812984,78.60275713093809L205.87023702370237,78.31626580246527L208.9170417041704,75.8333409557006L212.84403440344033,74.2735548340151L215.6877187718772,74.0825606150332L217.31268126812682,75.00569934011234L215.55230523052307,76.27899413332504L216.16166616661667,78.28443343263493L216.77102710271026,79.71689007499917L219.2084708470847,80.64002880007837L222.32298229822982,80.38536984143582L224.2187718771877,78.25260106280466L224.35418541854187,79.62139296550822L225.50520052005203,80.32170510177521L223.20317031703172,81.53133515532723L219.07305730573057,82.67730046921858L217.1772677267727,83.40944497531589L215.0783578357836,84.77823687801947L213.65651565156514,84.6509073986982L213.5888088808881,83.0592889071824L216.83873387338735,81.4995027854969L213.85963596359636,81.56316752515751ZM123.33568356835684,29.167086784456785L122.3877887788779,30.026560769875317L126.517901790179,29.48541048275996L129.15846584658465,30.408549207839144L131.25737573757374,29.453578112929677L133.01775177517752,30.09022550953597L134.57500750075008,31.93650295969431L135.522902290229,31.1406937139364L134.16876687668767,29.230751524117437L135.7937293729373,28.944260195644574L137.6895189518952,29.230751524117437L139.7884288428843,29.994728400045062L140.93944394439444,31.841005850203373L141.54880488048803,33.146133013246356L144.73102310231025,34.10110410815582L148.11636163616362,34.99241046340467L147.91324132413243,35.820052078992944L144.7987298729873,35.94738155831419L146.0174517451745,36.679526064411476L145.4080908090809,37.37983820067845L141.95504550455047,37.09334687220556L138.70512051205122,36.58402895492051L136.53850385038504,36.679526064411476L133.01775177517752,37.3161734610178L128.27827782778277,37.6026647894906L124.8929392939294,37.79365900847256L123.8773377337734,36.90235265322369L121.30448044804481,36.39303473593864L119.67951795179519,36.58402895492051L117.30978097809779,35.0879075728956L118.5962096209621,34.89691335391373L121.50760076007603,34.578589655610585L124.14816481648165,34.67408676510152L126.58560856085609,34.323930696968034L122.92944294429444,33.910109889173924L118.93474347434744,34.0374393684952L116.29417941794179,34.00560699866486L115.27857785778579,33.30529486239794L119.61181118111816,32.57315035630063L116.76812681268126,32.60498272613097L113.45049504950495,32.095664808845925L115.00775077507751,30.69504053631198L116.36188618861883,29.931063660384382L121.37218721872185,28.785098346493015ZM141.48109810981097,28.594104127511088L139.85613561356138,29.835566550893418L136.87703770377038,28.530439387850464L137.55410541054107,28.243948059377658L140.05925592559254,28.180283319716978ZM194.42779277927795,29.198919154287097L194.63091309130914,29.708237071572142L192.5997099709971,29.644572331911547L190.56850685068508,29.612739962081207L188.53730373037303,29.86739892072376L187.9956495649565,29.771901811232823L185.8967396739674,28.753265976662675L185.96444644464447,28.084786210226014L186.9123412341234,27.957456730904767L191.17786778677868,28.148450949886694ZM175.1990699069907,29.10342204479616L176.6886188618862,30.249387358687528L178.44899489948997,28.753265976662675L183.1884688468847,27.989289100735107L186.43839383938393,29.931063660384382L186.16756675667568,31.1406937139364L189.8914391439144,30.599543426821043L191.65181518151815,29.86739892072376L195.84963496349636,30.822370015633226L198.42249224922492,31.713676370882098L198.6256125612561,32.509485616640035L202.14636463646366,32.095664808845925L204.1098609860986,33.30529486239794L208.64621462146212,34.0374393684952L210.27117711771177,34.801416244422796L212.03155315531555,36.55219658509017L208.57850785078506,37.44350294033907L213.04715471547155,38.65313299389106L216.02625262526254,39.06695380168519L218.73452345234523,40.81773414235259L221.71362136213622,40.91323125184351L221.10426042604263,42.25019078471682L217.7866286628663,44.44662430300865L215.48459845984598,43.61898268742044L212.505500550055,41.80453760709237L210.06805680568058,42.059196565734936L209.86493649364937,43.14149713996568L211.82843284328433,44.22379771419642L214.40129012901286,45.08327169961497L215.14606460646064,45.59258961690006L216.3647864786479,47.43886706705838L215.75542554255426,48.80765896976203L213.3856885688569,48.29834105247693L208.64621462146212,46.802219670452075L211.2867786778678,48.425670531798204L213.25027502750277,49.53980347585927L213.5888088808881,50.208283242295934L208.44309430943096,49.44430636636835L204.44839483948397,48.36200579213758L202.14636463646366,47.43886706705838L202.82343234323432,46.89771677994301L199.9797479747975,45.94274568503356L197.2714771477148,45.019606959954345L197.2714771477148,45.59258961690006L191.85493549354936,45.87908094537288L190.2976797679768,45.24243354876657L191.51640164016402,43.84180927623267L195.03715371537155,43.809976906402326L198.89643964396438,43.5871503175901L198.2870787078708,42.918670551153454L198.96414641464145,41.96369945624397L201.4015901590159,40.14925437591593L200.85993599359935,39.289780390497384L200.11516151615163,38.65313299389106L197.2714771477148,37.72999426881188L193.41219121912192,37.09334687220556L194.63091309130914,36.615861324750796L192.66741674167415,35.46989601085943L190.9747474747475,35.34256653153818L189.48519851985202,34.70591913493186L188.53730373037303,35.27890179187756L185.0842584258426,35.50172838068977L178.24587458745873,35.0879075728956L174.25117511751176,34.546757285780245L171.2043704370437,34.26026595730744L169.64711471147118,33.59178619087078L171.6106110611061,32.732312205452246L168.97004700470046,32.732312205452246L168.36068606860684,30.822370015633226L169.78252825282527,29.135254414626502L171.74602460246024,28.371277538698934L176.62091209120914,27.86195962141383ZM149.26737673767377,27.798294881753208L151.501700170017,28.180283319716978L154.8870387038704,27.957456730904767L155.36098609860986,28.498607018020152L153.6006100610061,29.389913373268996L156.44429442944295,30.217554988857245L156.1057605760576,31.90467058986397L153.05895589558958,32.63681509596131L151.2308730873087,32.477653246809695L149.94444444444446,31.745508740712438L145.27267726772678,30.31305209834821L145.27267726772678,29.708237071572142L149.13196319631962,29.931063660384382L147.03305330533053,28.721433606832335ZM162.74102410241025,29.803734181063106L160.70982098209822,31.236190823427336L158.54320432043207,31.1406937139364L157.39218921892189,29.48541048275996L157.45989598959895,28.562271757680804L158.4077907790779,27.766462511922867L160.30358035803582,27.25714459463785L164.23057305730575,27.320809334298445L167.8190319031903,27.766462511922867L164.97534753475347,29.453578112929677ZM111.48699869986999,32.41398850714907L106.54440444044405,33.33712723222823L105.528802880288,32.509485616640035L101.19556955695572,31.522682151900227L102.0080508050805,30.72687290614229L103.29447944794478,29.35808100343874L104.91944194419443,28.116618580056354L103.09135913591359,26.97065326616496L109.45579557955799,26.652329567861784L112.09635963596358,27.066150375655894L116.90354035403539,27.161647485146887L118.73162316231623,27.702797772262272L120.76282628262828,28.498607018020152L118.39308930893088,28.976092565474914L113.7890289028903,30.28121972851787L111.48699869986999,31.618179261391163ZM161.9285428542854,25.665526103122005L160.9129412941294,26.39767060921926L158.20467046704672,26.238508760067702L155.9026402640264,25.76102321261294L156.91824182418242,24.90154922719438L159.62651265126513,24.392231309909363L161.25147514751475,25.060711076346024ZM152.7881288128813,22.386792010599407L154.2099709970997,23.24626599601794L154.2776777677768,24.233069460757775L153.39748974897492,25.633693733291665L150.28297829782977,25.824687952273592L148.25177517751777,25.506364253970446L148.31948194819483,24.424063679739618L145.27267726772678,24.551393159060922L145.13726372637262,23.118936516696692L147.16846684668465,23.182601256357344L149.94444444444446,22.514121489920683L152.65271527152714,22.64145096924196ZM134.507300730073,23.373595475339215L135.25207520752073,24.042075241775876L136.94474447444745,23.7237515434727L138.9082408240824,23.787416283133325L139.24677467746776,24.710555008212538L138.0957595759576,25.60186136346138L131.73132313231324,25.920185061764528L126.99184918491852,26.715994307522465L124.08045804580459,26.779659047183088L123.8773377337734,26.143011650576767L127.73662366236624,25.31537003498852L119.27327732773276,25.5381966238007L116.63271327132713,25.219872925497555L119.2055705570557,23.373595475339215L120.9659465946595,22.83244518822383L126.24707470747072,23.46909258483015L129.63241324132414,24.583225528891234L132.8823382338234,24.74238737804285L130.17406740674065,22.927942297714793L131.93444344434442,22.259462531278132L133.89793979397942,22.48228912009037ZM159.96504650465045,21.686479874332434L161.99624962496247,22.291294901108472L165.72012201220124,22.291294901108472L167.34508450845084,22.896109927884453L166.93884388438843,23.596422064151454L169.10546054605462,24.042075241775876L170.25647564756477,24.487728419400298L172.82933293329333,24.551393159060922L175.53760376037604,24.710555008212538L178.516701670167,24.2967342004184L182.37598759875988,24.13757235126681L185.42279227922793,24.2967342004184L187.45399539953996,24.997046336685344L187.86023602360234,25.76102321261294L186.70922092209221,26.270341129898043L183.86553655365537,26.684161937692124L181.495799579958,26.429502979049573L176.07925792579258,26.747826677352748L172.2199719971997,26.779659047183088L169.17316731673168,26.52500008854051L164.16286628662866,25.920185061764528L163.55350535053506,24.90154922719438L163.2826782678268,23.978410502115196L161.45459545954594,23.150768886527004L157.527602760276,22.927942297714793L155.36098609860986,22.323127270938812L156.0380538053805,21.55915039501116ZM119.47639763976397,20.636011669932003L119.2055705570557,22.100300682126573L117.78372837283726,22.736948078732894L116.02335233523354,22.83244518822383L112.50260026002599,23.66008680381205L109.52350235023502,23.946578132284912L106.95064506450643,23.53275732449083L110.13286328632864,22.132133051956885L113.99214921492145,20.890670628574583L116.90354035403539,20.922502998404838ZM161.52230223022303,20.890670628574583L160.64211421142116,20.954335368235178L157.1213621362136,20.827005888913902L156.64741474147414,20.285855601798517L160.43899389938994,20.317687971628857L161.72542254225422,20.667844039762343ZM130.78342834283427,20.540514560441068L127.26267626762677,21.081664847556453L124.486698669867,20.476849820780416L126.04395439543956,19.872034794004435L128.75222522252227,19.681040575022536L131.39278927892786,19.99936427332571ZM131.7990299029903,18.853398959434287L129.49699969997,19.203555027567774L126.38248824882487,19.203555027567774L126.38248824882487,18.94889606892525L128.34598459845984,18.375913411979525L129.2938793879388,18.471410521470517ZM157.7984298429843,19.872034794004435L155.0224522452245,20.254023231968176L153.46519651965198,19.840202424174095L152.65271527152714,19.108057918076838L152.51730173017302,18.34408104214927L154.95474547454745,18.407745781809865L156.0380538053805,18.535075261131112L158.2723772377238,19.203555027567774ZM149.80903090309033,19.362716876719333L150.55380538053805,20.15852612247724L147.50700070007,19.93569953366506L144.3924892489249,19.33088450688905L140.1946694669467,19.267219767228397L142.02275227522753,18.694237110282728L139.72072207220722,18.248583932658306L139.5853085308531,17.548271796391333L143.3091809180918,17.802930755033884L148.3871887188719,18.471410521470517ZM174.3865886588659,16.84795966012436L176.62091209120914,17.48460705673071L174.04805480548055,18.025757343846095L170.5950095009501,19.458213986210325L167.2096709670967,19.585543465531543L163.35038503850387,19.33088450688905L161.31918191819182,18.566907630961452L161.31918191819182,17.89842786452482L162.8087308730873,17.389109947239717L159.42339233923394,17.389109947239717L157.32448244824482,16.784294920463736L156.1057605760576,15.924820935045204L157.45989598959895,15.097179319456956L158.74632463246326,14.524196662511315L160.64211421142116,14.396867183190011L159.82963296329635,13.951214005565589L164.23057305730575,13.855716896074654L166.60031003100312,14.874352730644716L169.78252825282527,15.256341168608571L172.89703970397036,15.606497236742058ZM209.18786878687868,10.385988584570129L214.1981698169817,10.513318063891404L218.26057605760576,10.767977022533955L221.71362136213622,11.277294939819L221.5782078207821,11.786612857104046L217.04185418541854,12.582422102861983L212.43779377937796,12.964410540825781L210.74512451245124,13.410063718450232L214.8752375237524,13.378231348619892L210.4065906590659,14.524196662511315L207.35978597859787,15.065346949626672L204.1098609860986,16.593300701481866L200.25057505750576,16.911624399785012L199.0318531853185,17.293612837748782L193.34448444844483,17.48460705673071L195.98504850485048,17.739266015373204L194.63091309130914,18.05758971367635L196.1881688168817,18.980728438755563L194.42779277927795,19.649208205192195L191.51640164016402,20.15852612247724L190.63621362136215,20.922502998404838L187.9956495649565,21.463653285520223L188.26647664766477,21.909306463144645L191.51640164016402,21.81380935365371L191.51640164016402,22.291294901108472L186.50610061006103,23.405427845169555L181.56350635063507,22.896109927884453L176.07925792579258,23.182601256357344L173.23557355735576,22.959774667545133L169.71482148214824,22.86427755805417L169.44399439943996,21.941138832974985L172.96474647464746,21.527318025180904L172.01685168516852,20.15852612247724L173.16786678667864,20.031196643155994L178.17816781678167,20.858838258744242L175.6053105310531,19.649208205192195L172.55850585058505,19.299052137058737L174.11576157615764,18.566907630961452L177.43339333933395,18.12125445333703L177.97504750475045,17.45277468690037L175.33448344834486,16.72063018080314L174.52200220022004,15.733826716063334L179.66771677167716,15.82932382555424L181.15726572657266,16.02031804453614L184.0686568656866,15.351838278099478L179.87083708370838,15.129011689287296L173.23557355735576,15.256341168608571L169.91794179417943,14.61969377200225L168.36068606860684,13.855716896074654L166.19406940694068,13.314566608959268L165.78782878287828,12.646086842522607L168.56380638063808,12.295930774389149L170.73042304230424,12.232266034728468L174.45429542954298,11.945774706255662L177.23027302730273,11.24546256998866L179.53230323032307,11.340959679479596L181.56350635063507,11.850277596764698L182.98534853485347,10.831641762194579L185.490499049905,10.545150433721744L188.8758375837584,10.322323844909533L194.63091309130914,10.258659105248853L195.57880788078808,10.449653324230809L201.06305630563057,10.131329625927577L205.12546254625465,10.258659105248853Z"\n                          class="datamaps-subunit CAN"></path>\n                    <path d="M356.0438543854386,77.29762996789512L356.1115611561156,77.61595366619828L355.84073407340736,78.09343921365306L356.6532153215322,78.44359528178653L357.66881688168814,78.47542765161687L357.465696569657,79.23940452754445L356.6532153215322,79.55772822584761L355.2990799079908,79.3349016370354L354.8928392839284,80.098878512963L353.94494449444943,80.1625432526236L353.60641064106414,79.84421955432045L352.5908090809081,80.48086695092677L351.7106210621062,80.5763640604177L350.8981398139814,80.1625432526236L350.2210721072107,79.36673400686567L349.34088408840887,79.65322533533856L349.34088408840887,78.79375134992003L350.7627262726273,77.74328314551956L350.69501950195024,77.26579759806484L351.507500750075,77.4249594472164L352.04915491549156,77.10663574891323L353.6741174117412,77.13846811874357L354.0126512651265,76.72464731094942Z"\n                          class="datamaps-subunit CHE"></path>\n                    <path d="M208.9170417041704,265.64976225387704L208.9170417041704,269.8516350714788L210.94824482448246,269.8516350714788L212.0992599259926,269.91529981113945L211.42219221922193,270.67927668706704L209.86493649364937,271.2522593440127L208.9170417041704,271.1885946043521L207.83373337333734,271.02943275520056L206.41189118911893,270.45645009825483L204.44839483948397,270.2017911396123L202.07865786578657,269.15132293521185L200.1828682868287,268.13268710064176L197.6100110011001,266.03175069184084L199.1672667266727,266.41373912980464L201.80783078307832,267.6870339230173L204.24527452745278,268.3555136894539L205.26087608760878,267.4960397040354L205.87023702370237,266.19091254099243L207.56290629062906,265.42693566506483ZM211.82843284328433,209.43379713353835L212.03155315531555,209.87945031116277L211.35448544854484,211.85305724064239L209.32328232823284,212.77619596572157L209.3909890989099,215.89576820909258L208.98474847484746,216.5005832358686L209.5941094109411,217.2645601117962L208.23997399739974,218.41052542568758L207.02125212521253,220.1931381361853L206.34418441844187,221.88025373719205L206.479597959796,223.72653118735042L205.32858285828584,225.63647337716938L206.20877087708772,228.88337509986164L206.68271827182718,229.23353116799512L206.68271827182718,230.98431150866253L205.5994099409941,232.79875658899056L205.66711671167116,234.39037508050637L204.24527452745278,235.6000051340584L204.24527452745278,237.31895310489548L204.85463546354637,239.16523055505382L203.7036203620362,239.8655426913208L203.22967296729672,241.52082592249724L202.75572557255725,243.46260048214654L203.0942594259426,245.7545311099293L202.34948494849485,246.1365195478931L202.75572557255725,248.30112069635464L203.63591359135913,249.0014328326216L202.95884588458844,249.7972420783795L203.83903390339032,250.1792305163433L204.04215421542153,250.87954265261027L203.22967296729672,251.22969872074373L203.43279327932794,252.3438316648048L202.75572557255725,254.8267565115695L201.74012401240122,256.4502073729156L202.0109510951095,257.4051784678251L201.4015901590159,258.5829761515468L199.9120412041204,259.410617767135L200.11516151615163,261.416057066445L200.7922292229223,262.0845368328816L202.0109510951095,261.95720735356036L202.0109510951095,263.3896639959246L202.75572557255725,264.47196457015536L207.2920792079208,264.72662352879786L209.05245524552456,265.0131148572707L207.35978597859787,265.0131148572707L206.479597959796,265.4587680348951L204.78692869286928,266.15908017116215L204.44839483948397,267.9098605118295L203.7036203620362,267.94169288165983L201.53700370037004,267.3368778548838L199.37038703870388,266.03175069184084L197.06835683568357,264.9494501176101L196.45899589958998,263.7716524338884L197.0006500650065,262.65751948982734L196.05275527552755,261.416057066445L195.7819281928193,258.200987713583L196.5944094409441,256.386542633255L198.6256125612561,254.95408599089075L195.7142214221422,254.38110333394505L197.54230423042304,252.7258201027686L198.15166516651664,249.6062478593976L200.25057505750576,250.27472762583426L201.26617661766178,246.3593461367053L199.9797479747975,245.8818605892506L199.37038703870388,248.20562358686368L198.21937193719373,247.95096462822113L198.82873287328735,245.2770455624746L199.43809380938094,241.7754848811398L200.31828182818285,240.50219008792712L199.7766276627663,238.65591263776878L199.64121412141213,236.5549762289679L200.3859885988599,236.49131148930726L201.53700370037004,233.4354039855969L202.89113911391138,230.44316122154717L203.63591359135913,227.6419126764793L203.22967296729672,224.80883176158116L203.77132713271325,223.24904563989566L203.56820682068206,220.9571150121129L204.65151515151516,218.6333520144998L204.9900490049005,215.00446185384374L205.5994099409941,211.08908036471482L206.20877087708772,206.88720754711304L206.0733573357336,203.83130004340268L205.66711671167116,201.1573809776561L206.61501150115012,200.67989543020136L207.15666566656665,199.72492433529186L208.03685368536853,200.9982191285045L208.3076807680768,202.3670110312081L209.32328232823284,203.16282027696604L208.7139213921392,204.97726535729407L209.72952295229524,207.07820176609496L210.474297429743,209.6884560921809Z"\n                          class="datamaps-subunit CHL"></path>\n                    <path d="M545.487398739874,131.5399881587542L543.8624362436243,132.43129451400307L542.3051805180519,131.8583118570574L542.3051805180519,130.23486099571124L543.1853685368537,129.40721938012302L545.2842784278428,128.86606909300764L546.3675867586759,128.89790146283795L546.7738273827383,129.63004596893524L545.9613461346134,130.45768758452346ZM583.6740174017402,86.94283802648103L582.455295529553,85.82870508241994L581.7105210521052,86.87917328682035L578.7991299129912,87.70681490240858L579.0699569956996,88.69361836714839L577.4449944994499,88.62995362748775L576.564806480648,88.02513860071174L575.2783778377839,89.36209813358504L573.2471747174718,90.38073396815514L571.6899189918992,91.59036402170717L569.0493549354935,92.13151430882257L567.6952195219521,92.9909882942411L565.6640164016402,93.53213858135648L566.6796179617962,92.64083222610762L566.2733773377338,91.90868772001035L567.7629262926293,90.63539292679769L566.7473247324732,89.6804218318882L565.1223622362236,90.31706922849453L562.9557455745575,91.6221963915375L561.8047304730474,92.86365881491983L559.9766476647665,92.92732355458047L559.0287528752875,93.81862990982933L560.0443544354436,95.09192470304198L561.5339033903391,95.41024840134514L561.6016101610161,96.23789001693338L563.0911591159115,96.77904030404875L565.1900690069008,95.44208077117545L566.8827382738275,96.17422527727274L568.1014601460147,96.23789001693338L568.3722872287229,97.22469348167319L565.7317231723173,97.73401139895824L564.8515351535154,98.75264723352836L563.0234523452345,99.70761832843787L562.0755575557556,101.01274549148083L564.1067606760677,102.06321369588127L564.8515351535154,103.90949114603961L566.0025502550254,105.6284391168767L567.2212721272126,107.06089575924094L567.2212721272126,108.46152003177485L566.0702570257026,108.97083794905991L566.476497649765,109.98947378363006L567.6275127512752,110.56245644057573L567.2889788978898,112.09041019243091L566.8150315031503,113.58653157445579L565.7994299429944,113.74569342360738L564.3775877587759,115.78296509274762L562.8880388038804,118.26588993951229L561.1276627662767,120.49415582763443L558.5548054805481,122.24493616830185L555.9142414241423,123.83655465981766L553.8153315331533,124.02754887879956L552.6643164316432,124.8870228642181L551.9872487248724,124.25037546761178L550.9716471647165,125.20534656252127L548.3310831083108,126.12848528760044L546.3675867586759,126.41497661607329L545.6905190519052,128.42041591538322L544.6749174917492,128.51591302487415L544.1332633263327,127.14712112217055L544.6072107210722,126.4468089859036L542.1020602060206,125.84199395912759L541.2218721872188,126.12848528760044L539.3260826082608,125.65099974014569L538.3781878187818,124.8870228642181L538.7167216721673,123.80472228998734L536.9563456345635,123.45456622185387L536.0761576157615,122.7542540855869L534.451195119512,123.7410575503267L532.6231123112311,123.96388413913891L531.1335633563357,123.96388413913891L530.1179617961797,124.40953731676335L529.1700670067007,124.6960286452362L529.440894089409,126.86062979369773L528.425292529253,126.79696505403709L528.2898789878989,126.35131187641267L528.2221722172218,125.58733500048507L526.8680368036804,126.12848528760044L526.0555555555555,125.77832921946695L524.6337133713371,125.0780170832L525.1753675367537,123.51823096151449L523.9566456645665,123.13624252355069L523.5504050405041,121.41729455271363L521.519201920192,121.73561825101677L521.7900290029003,119.50735236289462L523.5504050405041,117.9157338713788L523.6181118111812,116.38778011952363L523.5504050405041,114.92349110732908L522.7379237923793,114.47783792970465L522.1285628562856,113.36370498564358L521.0452545254525,113.52286683479514L519.0140514051405,113.2363755063223L519.6234123412341,112.4405662605644L518.7432243224323,111.29460094667301L517.3890889088909,112.05857782260061L515.8318331833184,111.61292464497618L513.6652165216522,112.79072232869788L511.97254725472544,114.1913466012318L510.41529152915297,114.44600555987432L509.60281028102816,113.93668764258928L508.65491549154916,113.90485527275895L507.3007800780078,113.45920209513451L506.2851785178518,113.93668764258928L504.99874987498754,115.3373119151232L504.86333633363336,113.84119053309831L503.71232123212326,114.25501134089244L501.5457045704571,114.06401712191052L499.3790879087909,113.61836394428612L497.88953895389545,112.79072232869788L496.3999899989999,112.4405662605644L495.79062906290625,111.51742753548523L494.7073207320733,111.26276857684269L492.8115311531153,110.02130615346036L491.32198219821987,109.44832349651465L490.509500950095,109.89397667413908L487.93664366436644,108.58884951109613L486.0408540854085,107.41105182737441L485.56690669066904,105.34194778840384L486.9210421042105,105.56477437721607L486.9887488748875,104.60980328230656L486.17626762676275,103.65483218739709L486.3793879387939,102.12687843554191L484.34818481848185,99.93044491725009L481.30138013801377,99.16646804132249L480.75972597259727,97.70217902912792L479.33788378837886,96.84270504370939L478.9993499349935,96.30155475659402L478.72852285228527,95.21925418236324L478.7962296229623,94.48710967626599L477.6452145214522,94.07328886847185L477.0358535853586,94.26428308745376L476.5619061906191,92.51350274678637L477.10356035603564,92.09968193899225L476.83273327332734,91.6540287613678L478.5931093109311,90.76272240611895L479.9472447244725,90.38073396815514L481.91074107410736,90.63539292679769L482.65551555155525,89.42576287324567L485.02525252525254,89.20293628443346L485.7023202320232,88.47079177833616L488.6814181418142,87.45215594376606L488.95224522452247,87.03833513597193L488.8168316831683,85.95603456174116L490.1032603260326,85.47854901428646L488.41059105910597,82.19981492176387L492.1344634463446,81.43583804583629L493.08235823582356,81.02201723804214L494.43649364936493,77.6477860360286L498.1603660366037,78.28443343263493L499.1759675967597,77.4249594472164L499.3113811381138,75.54684962722772L500.86863686368633,75.35585540824584L502.2904790479048,74.11439298486349L503.0352535253526,73.95523113571194L503.50920092009204,75.2603582987549L505.06645664566463,76.27899413332504L507.7747274727473,76.97930626959196L509.06115611561165,78.47542765161687L508.3840884088409,80.70369353973898L509.06115611561165,81.4995027854969L511.2954795479548,81.81782648380006L513.8006300630063,82.0724854424426L516.0349534953496,83.25028312616429L517.2536753675367,83.4731097149765L518.0661566156616,85.19205768581357L519.2171717171717,86.30619062987465L521.2483748374838,86.27435826004437L525.1753675367537,86.68817906783848L527.6128112811282,86.43352010919592L529.5086008600861,86.72001143766882L532.2845784578458,87.86597675156017L534.5866086608661,87.86597675156017L535.399089908991,88.43895940850587L537.5657065706571,87.42032357393573L540.6125112511252,86.78367617732943L543.456195619562,86.72001143766882L545.6228122812281,86.05153167123215L546.9769476947695,85.03289583666202L548.3310831083108,84.3962484400557L547.9925492549255,83.79143341327966L547.3831883188318,83.0592889071824L548.3987898789879,81.84965885363039L549.414391439144,82.00882070278193L551.3778877887789,82.39080914074576L553.2736773677368,81.40400567600595L556.1173617361736,80.6718611699087L557.471497149715,79.43039874652634L558.8256325632564,78.88924845941096L561.5339033903391,78.63458950076843L563.0234523452345,78.85741608958064L563.2265726572658,78.18893632314398L561.5339033903391,76.88380916010102L560.0443544354436,76.27899413332504L558.5548054805481,76.97930626959196L556.7267226722672,76.66098257128881L555.6434143414342,76.91564152993135L555.1694669466947,76.15166465400377L556.5236023602359,74.2735548340151L557.4037903790379,72.84109819165086L559.7058205820582,73.57324269774811L562.3463846384639,72.36361264419608L562.2786778677869,71.53597102860789L564.0390539053906,69.56236409912829L565.0546554655466,68.95754907235224L565.0546554655466,67.90708086795183L563.9713471347135,67.4614276903274L565.528602860286,66.53828896524819L567.8983398339834,66.18813289711471L570.4034903490349,66.1244681574541L573.1794679467946,66.6974508143998L574.8721372137213,67.39776295066673L576.0231523152316,69.2758727706554L576.7002200220022,70.10351438624366L577.3772877287729,71.24947970013501L578.0543554355436,73.09575715029341L581.3719871987199,73.70057217706939L583.538603860386,75.03753170994268L584.3510851085109,76.78831205061007L587.1947694769476,76.78831205061007L588.8197319731973,76.05616754451282L591.9342434243424,75.5150172573974L590.9186418641864,77.20213285840418L590.1738673867387,77.87061262484083L589.5645064506451,79.93971666381138L588.2780778077807,81.78599411396972L586.0437543754375,81.43583804583629L584.4187918791879,82.10431781227294L584.8927392739274,83.72776867361905L584.621912191219,85.92420219191088L583.6740174017402,85.98786693157149Z"\n                          class="datamaps-subunit CHN"></path>\n                    <path d="M332.6173117311731,157.26054298164982L331.8048304830483,157.29237535148016L330.45069506950693,156.91038691351636L329.23197319731975,156.94221928334667L326.9976497649765,157.26054298164982L325.7112211221122,157.83352563859555L323.8831383138314,158.50200540503218L323.47689768976903,158.47017303520187L323.61231123112316,156.91038691351636L323.8154315431543,156.68756032470415L323.7477247724773,155.92358344877655L322.9352435243525,155.15960657284896L322.3935893589359,155.0322770935277L321.85193519351935,154.49112680641232L322.2581758175818,153.6634851908241L322.05505550555057,152.77217883557523L322.1227622762276,152.19919617862953L322.461296129613,152.19919617862953L322.52900290029004,151.40338693287163L322.3935893589359,151.02139849490783L322.59670967096713,150.76673953626528L323.27377737773776,150.54391294745307L322.7998299829983,149.0477915654282L322.3935893589359,148.2519823196703L322.52900290029004,147.61533492306398L322.8675367536754,147.4880054437427L323.13836383638363,147.29701122476084L323.6800180018002,147.58350255323364L325.1018601860186,147.61533492306398L325.44039403940394,147.0423522661183L325.7789278927893,147.07418463594863L326.3205820582058,146.8831904169667L326.5914091409141,147.67899966272464L327.0653565356536,147.4561730739124L327.81013101310134,147.16968174543956L328.6903190319032,147.58350255323364L329.02885288528853,148.18831758000965L329.84133413341334,148.6021383878038L330.518401840184,148.12465284034906L331.39858985898593,148.0609881006884L332.6850185018502,148.53847364814317L333.1589658965897,151.21239271388973L332.4141914191419,152.80401120540554L331.8725372537254,154.90494761420643L332.6850185018502,156.52839847555256Z"\n                          class="datamaps-subunit CIV"></path>\n                    <path d="M362.61141114111416,162.41738689416107L362.34058405840585,162.29005741483982L361.25727572757273,162.54471637348234L360.1062606260626,162.29005741483982L359.22607260726073,162.41738689416107L356.1792679267927,162.3855545243308L356.45009500950096,160.8894331423059L355.70532053205324,159.64797071892357L354.82513251325133,159.3296470206204L354.41889188918896,158.47017303520187L353.94494449444943,158.21551407655934L354.0126512651265,157.70619615927427L354.486598659866,156.36923662640098L355.3667866786679,154.55479154607292L355.9084408440844,154.52295917624264L357.05945594559455,153.4406586020119L357.73652365236524,153.40882623218155L358.8198319831983,154.17280310810915L360.1062606260626,153.53615571150283L360.24167416741676,152.74034646574492L360.71562156215623,152.00820195964764L360.9864486448645,151.05323086473814L362.0020502050205,150.25742161898026L362.34058405840585,148.95229445593725L362.7468246824683,148.53847364814317L363.01765176517654,147.55167018340336L363.491599159916,146.37387249968162L365.11656165616563,144.90958348748708L365.1842684268427,144.27293609088076L365.3873887388739,143.9546123925776L364.64261426142616,143.19063551665L364.7103210321032,142.58582048987398L365.25197519751976,142.49032338038305L365.9967496749675,143.69995343393506L366.1321632163216,144.9414158573174L366.06445644564457,146.18287828069975L367.0800580058006,147.90182625153685L366.06445644564457,147.8699938817065L365.522802280228,147.99732336102778L364.64261426142616,147.80632914204588L364.2363736373637,148.69763549729473L365.31968196819685,149.8117684413558L366.19986998699875,150.13009213965898L366.4029902990299,150.89406901558655L367.0123512351235,152.19919617862953L366.74152415241525,152.7085140959146L365.7936293629363,154.61845628573357L365.31968196819685,154.96861235386706L365.1842684268427,156.4010689962313L365.3873887388739,157.1968782419892L365.25197519751976,157.7698608989349L366.1321632163216,158.7566643636747L366.2675767576758,159.42514413011136L366.94464446444647,160.38011522502083L367.8248324832483,160.98493025179684L367.8925392539254,161.8444042372154L368.0956595659566,162.41738689416107L367.96024602460244,163.40419035890088L366.470697069707,162.95853718127648L364.9811481148115,162.48105163382172Z"\n                          class="datamaps-subunit CMR"></path>\n                    <path d="M395.9908490849085,160.06179152671768L395.8554355435544,162.2582250450095L396.6002100210021,162.51288400365206L395.9908490849085,163.18136377008867L395.31378137813783,163.69068168737374L394.5690069006901,164.67748515211355L394.1627662766277,165.5369591375321L394.0950595059506,167.06491288938727L393.6211121112111,167.76522502565425L393.6211121112111,169.19768166801848L393.07945794579456,169.70699958530355L393.0117511751175,170.8211325293646L392.7409240924093,170.9802943785162L392.6055105510551,171.9989302130863L393.07945794579456,172.85840419850484L393.14716471647165,175.11850245645732L393.485698569857,176.8692827971247L393.35028502850287,177.82425389203422L393.6888188818882,178.93838683609528L394.7721272127213,179.98885504049574L395.7877287728773,182.34445040793915L395.0429542954296,182.15345618895722L392.537803780378,182.4717798872604L392.0638563856386,182.6946064760726L391.522202220222,183.90423652962463L391.9284428442844,184.73187814521285L391.5899089908991,186.960144033335L391.3867886788679,188.8382538533237L391.86073607360737,189.18840992145715L393.14716471647165,189.92055442755444L393.6888188818882,189.57039835942095L393.82423242324234,191.6076700285612L392.40239023902393,191.57583765873088L391.65761576157615,190.55720182416076L390.9805480548055,189.76139257840285L389.49099909990997,189.47490124992999L389.0847584758476,188.48809778519018L387.93374337433744,189.09291281196622L386.44419441944194,188.8382538533237L385.76712671267126,187.97877986790513L384.6161116111611,187.78778564892323L383.73592359235926,187.85145038858386L383.6005100510051,187.24663536180785L382.9911491149115,187.21480299197754L382.11096109610963,187.1193058824866L380.9599459945995,187.37396484112912L380.14746474647467,187.3421324712988L379.6735173517352,187.5012943204504L379.74122412241223,185.27302843232823L379.13186318631864,184.5727162960613L378.9964496449645,183.4267509821699L379.26727672767277,182.2807856682785L378.9287428742874,181.5486411621812L378.8610361036104,180.37084347845953L376.5590059005901,180.40267584828985L376.7621262126213,179.70236371202287L375.81423142314236,179.73419608185318L375.6788178817882,180.05251978015633L374.527802780278,180.11618451981698L374.0538553855386,181.23031746387807L373.7830283028303,181.6759706415025L372.6997199719972,181.42131168285997L372.0903590359036,181.6759706415025L370.87163716371634,181.83513249065408L370.1268626862686,180.84832902591427L369.7206220622062,180.24351399913826L369.17896789678974,179.12938105507718L368.7050205020502,177.72875678254326L363.15306530653066,177.69692441271295L362.47599759976,177.91975100152516L361.9343434343434,177.88791863169484L361.1895689568957,178.14257759033737L360.91874187418745,177.5695949333917L361.3926892689269,177.34676834457946L361.460396039604,176.55095909882155L361.73122312231226,176.04164118153648L362.4082908290829,175.65965274357268L362.94994499449945,175.8506469625546L363.55930593059304,175.11850245645732L364.57490749074907,175.15033482628763L364.7103210321032,175.69148511340302L365.455095509551,176.00980881170616L366.53840384038403,174.83201112798446L367.62171217121715,173.9088724029053L368.0956595659566,173.30405737612926L368.0279527952796,171.7761036242741L368.84043404340434,169.92982617411576L369.7206220622062,168.97485507920626L370.93934393439343,168.05171635412708L371.14246424642465,167.47873369718138L371.21017101710174,166.77842156091444L371.54870487048703,166.10994179447778L371.4132913291329,165.05947359007735L371.6841184118412,163.40419035890088L372.0226522652265,162.2263926751792L372.56430643064306,161.20775684060905L372.6997199719972,160.06179152671768L372.90284028402846,158.7566643636747L373.5799079907991,157.8016932687652L374.5955095509551,157.1968782419892L376.15276527652765,157.83352563859555L377.3714871487149,158.5338377748625L378.7256225622562,158.7248319938444L380.14746474647467,159.07498806197788L380.6891189118912,157.9608551179168L380.9599459945995,157.8016932687652L381.8401340134014,157.9926874877471L383.9390439043905,157.06954876266795L384.6161116111611,157.45153720063175L385.22547254725475,157.3878724609711L385.5640064006401,156.94221928334667L386.2410741074108,156.7830574341951L387.6629162916292,156.97405165317699L388.8816381638164,157.0377163928376L389.49099909990997,156.8148898040254L390.6420142014201,158.3746759257109L391.454495449545,158.59750251452311L391.9961496149615,158.27917881621997L392.80863086308636,158.40650829554122L393.8919391939194,158.02451985757742L394.2981798179818,158.82032910333535Z"\n                          class="datamaps-subunit COD"></path>\n                    <path d="M362.4082908290829,175.65965274357268L361.73122312231226,175.02300534696636L361.1895689568957,175.34132904526953L360.3770877087709,176.13713829102744L358.8875387538754,174.16353136154783L360.30938093809385,173.1130631571474L359.5646064606461,171.87160073376504L360.24167416741676,171.3941151863103L361.52810281028104,171.1712885974981L361.66351635163517,170.34364698190987L362.6791179117912,171.23495333715871L364.3040804080408,171.29861807681937L364.9134413441344,170.4391440914008L365.11656165616563,169.16584929818816L364.9134413441344,167.7015602859936L364.03325332533257,166.5874273419325L364.8457345734573,164.42282619347102L364.3717871787179,164.04083775550723L362.94994499449945,164.1999996046588L362.47599759976,163.213196139919L362.61141114111416,162.41738689416107L364.9811481148115,162.48105163382172L366.470697069707,162.95853718127648L367.96024602460244,163.40419035890088L368.0956595659566,162.41738689416107L369.1112611261126,160.6666065534937L370.1945694569457,159.64797071892357L371.48099809981,159.96629441722672L372.6997199719972,160.06179152671768L372.56430643064306,161.20775684060905L372.0226522652265,162.2263926751792L371.6841184118412,163.40419035890088L371.4132913291329,165.05947359007735L371.54870487048703,166.10994179447778L371.21017101710174,166.77842156091444L371.14246424642465,167.47873369718138L370.93934393439343,168.05171635412708L369.7206220622062,168.97485507920626L368.84043404340434,169.92982617411576L368.0279527952796,171.7761036242741L368.0956595659566,173.30405737612926L367.62171217121715,173.9088724029053L366.53840384038403,174.83201112798446L365.455095509551,176.00980881170616L364.7103210321032,175.69148511340302L364.57490749074907,175.15033482628763L363.55930593059304,175.11850245645732L362.94994499449945,175.8506469625546Z"\n                          class="datamaps-subunit COG"></path>\n                    <path d="M196.25587558755876,166.937583410066L195.44339433943395,166.49193023244158L194.495499549955,165.88711520566557L194.02155215521555,166.17360653413843L192.3965896589659,165.9189475754959L191.92264226422643,165.12313832973797L191.58410841084108,165.1549706995683L189.68831883188318,164.07267012533754L189.48519851985202,163.49968746839184L190.16226622662268,163.34052561924028L190.0945594559456,162.41738689416107L190.50080008000802,161.71707475789412L191.44869486948696,161.58974527857285L192.26117611761177,160.41194759485117L192.93824382438243,159.42514413011136L192.26117611761177,158.9794909524869L192.5997099709971,157.89719037825617L192.1934693469347,156.17824240741908L192.5997099709971,155.668924490134L192.32888288828883,154.0773059986182L191.51640164016402,153.09050253387838L191.78722872287227,152.16736380879922L192.3965896589659,152.2946932881205L192.7351235123512,151.75354300100508L192.32888288828883,150.63941005694403L192.53200320032005,150.3529187284712L193.47989798979899,150.41658346813182L194.90174017401742,149.11145630508886L195.7142214221422,148.92046208610697L195.7142214221422,148.28381468950064L196.05275527552755,146.69219619798483L197.13606360636064,145.83272221256627L198.2870787078708,145.80088984273596L198.490199019902,145.38706903494182L199.9120412041204,145.5462308840934L201.4015901590159,144.59125978918394L202.14636463646366,144.1774389813898L203.0942594259426,143.28613262614095L203.7036203620362,143.38162973563192L204.24527452745278,143.89094765291696L203.83903390339032,144.52759504952328L202.6203120312031,144.84591874782646L202.14636463646366,145.76905747290562L201.46929692969297,146.31020776002103L200.92764276427644,147.01051989628797L200.65681568156816,148.34747942916124L200.11516151615163,149.46161237322232L201.13076307630763,149.5889418525436L201.33388338833885,150.44841583796213L201.74012401240122,150.86223664575627L201.94324432443244,151.62621352168384L201.67241724172416,152.3265256579508L201.74012401240122,152.7085140959146L202.21407140714072,152.86767594506617L202.6880188018802,153.50432334167252L205.12546254625465,153.3451614925209L206.20877087708772,153.56798808133314L207.495199519952,155.19143894267927L208.23997399739974,155.00044472369737L209.5941094109411,155.09594183318833L210.67741774177418,154.87311524437612L211.35448544854484,155.19143894267927L211.01595159515952,156.2100747772494L210.60971097109712,156.84672217385574L210.474297429743,158.183681706729L210.81283128312833,159.45697649994165L211.35448544854484,159.99812678705703L211.42219221922193,160.41194759485117L210.474297429743,161.36691868976067L211.15136513651368,161.78073949755475L211.69301930193018,162.4492192639914L212.23467346734674,164.29549671414975L211.8961396139614,164.5501556727923L211.48989898989902,163.43602272873122L211.01595159515952,162.8312077019552L210.33888388838886,163.49968746839184L206.68271827182718,163.43602272873122L206.75042504250425,164.6138204124529L207.83373337333734,164.80481463143482L207.76602660266025,165.5369591375321L207.35978597859787,165.34596491855018L206.34418441844187,165.66428861685336L206.34418441844187,167.00124814972665L207.15666566656665,167.7015602859936L207.42749274927493,168.78386086022437L207.42749274927493,169.57967010598227L206.54730473047303,174.73651401849352L205.5994099409941,173.74971055375372L205.05775577557756,173.7178781839234L206.27647764776478,171.7761036242741L204.85463546354637,170.91662963885557L203.7036203620362,171.07579148800716L203.02655265526553,170.75746778970398L202.0109510951095,171.23495333715871L200.5891089108911,171.0121267483465L199.505800580058,169.0385198188669L198.6256125612561,168.56103427141215L198.0162516251625,167.66972791616328L196.72982298229823,166.77842156091444Z"\n                          class="datamaps-subunit COL"></path>\n                    <path d="M181.96974697469747,151.21239271388973L180.95414541454144,150.76673953626528L180.54790479047907,150.3847510983015L180.81873187318732,150.06642739999833L180.75102510251025,149.65260659220422L180.20937093709372,149.2069534145798L179.46459645964597,148.824964976616L178.7875287528753,148.57030601797345L178.71982198219823,148.0291557308581L178.17816781678167,147.71083203255492L178.3135813581358,148.2519823196703L177.97504750475045,148.69763549729473L177.501100110011,148.15648521017937L176.8917391739174,147.99732336102778L176.62091209120914,147.61533492306398L176.6886188618862,147.0423522661183L176.8917391739174,146.43753723934228L176.35008500850086,146.18287828069975L176.82403240324032,145.80088984273596L177.09485948594858,145.57806325392374L178.3135813581358,146.05554880137848L178.7875287528753,145.83272221256627L179.3968896889689,145.99188406171783L179.66771677167716,146.37387249968162L180.20937093709372,146.5012019790029L180.6833183318332,146.08738117120882L181.15726572657266,147.1060170057789L181.90204020402038,147.8699938817065L182.78222822282225,148.66580312746444L182.03745374537453,148.8567973464463L182.03745374537453,149.5889418525436L182.44369436943694,149.87543318101646L182.17286728672866,150.09825976982867L182.24057405740575,150.44841583796213L182.1051605160516,150.83040427592593Z"\n                          class="datamaps-subunit CRI"></path>\n                    <path d="M183.32388238823881,123.07257778389005L184.88113811381137,123.19990726321133L186.37068706870687,123.19990726321133L188.13106310631062,123.86838702964798L188.8758375837584,124.53686679608462L190.63621362136215,124.34587257710271L191.31328132813283,124.75969338489685L192.93824382438243,125.93749106861853L194.0892589258926,126.79696505403709L194.6986198619862,126.76513268420675L195.84963496349636,127.14712112217055L195.7142214221422,127.68827140928593L197.06835683568357,127.75193614894656L198.490199019902,128.51591302487415L198.2870787078708,128.9615662024986L197.0006500650065,129.1843927913108L195.7819281928193,129.27988990080175L194.495499549955,129.1525604214805L191.78722872287227,129.31172227063206L193.0059505950595,128.29308643606194L192.26117611761177,127.7837685187769L191.04245424542455,127.65643903945562L190.43309330933096,127.11528875234023L189.95914591459146,126.0648205479398L188.8758375837584,126.12848528760044L187.11546154615462,125.61916737031538L186.5738073807381,125.23717893235158L184.13636363636365,124.91885523404842L183.459295929593,124.56869916591492L184.20407040704072,124.09121361846019L182.30828082808281,123.99571650896925L180.95414541454144,124.98251997370906L180.20937093709372,125.01435234353936L179.93854385438544,125.4600055211638L178.9906490649065,125.682832109976L178.17816781678167,125.4918378909941L179.1937693769377,124.91885523404842L179.60001000100013,124.21854309778146L180.480198019802,123.80472228998734L181.42809280928094,123.45456622185387L182.84993499349935,123.26357200287197Z"\n                          class="datamaps-subunit CUB"></path>\n                    <path d="M399.5793079307931,100.5989246836867L399.71472147214723,100.5670923138564L399.98554855485554,100.12143913623196L401.33968396839686,100.1532715060623L403.03235323532357,99.58028884911658L401.7459245924593,100.37609809487451L401.8813381338134,100.72625416300798L401.6782178217822,100.66258942334733L401.33968396839686,100.82175127249891L401.0688568856886,100.78991890266862L400.9334433443344,100.85358364232924L400.9334433443344,100.66258942334733L400.7980298029803,100.5352599440261L400.39178917891786,100.5352599440261L399.91784178417845,100.69442179317767Z"\n                          class="datamaps-subunit -99"></path>\n                    <path d="M401.8813381338134,100.72625416300798L401.94904490449045,100.88541601215955L400.0532553255326,101.64939288808715L399.1053605360536,101.39473392944463L398.6314131413141,100.66258942334733L399.5793079307931,100.5989246836867L399.91784178417845,100.69442179317767L400.39178917891786,100.5352599440261L400.7980298029803,100.5352599440261L400.9334433443344,100.66258942334733L400.9334433443344,100.85358364232924L401.0688568856886,100.78991890266862L401.33968396839686,100.82175127249891L401.6782178217822,100.66258942334733Z"\n                          class="datamaps-subunit CYP"></path>\n                    <path d="M369.92374237423746,75.29219066858523L369.04355435543556,74.91020223062142L368.16336633663366,75.00569934011234L366.67381738173816,74.43271668316665L365.9967496749675,74.59187853231826L364.9811481148115,75.35585540824584L363.55930593059304,74.7510403814698L362.47599759976,73.95523113571194L361.52810281028104,73.47774558825716L361.3249824982498,72.68193634249924L360.9864486448645,72.14078605538387L362.4082908290829,71.72696524758977L363.0853585358536,71.24947970013501L364.43949394939494,70.89932363200157L364.9134413441344,70.54916756386808L365.3873887388739,70.74016178284997L366.2675767576758,70.54916756386808L367.14776477647763,71.15398259064408L368.5696069606961,71.31314443979568L368.4341934193419,71.85429472691105L369.44979497949794,72.23628316487482L369.7206220622062,71.7587976174201L371.0070507050705,71.949791836402L371.21017101710174,72.55460686317798L372.56430643064306,72.65010397266897L373.44449444944496,73.57324269774811L372.90284028402846,73.57324269774811L372.63201320132015,73.9233987658816L372.1580658065806,74.01889587537255L372.0226522652265,74.43271668316665L371.6841184118412,74.52821379265758L371.6164116411642,74.6873756418092L371.0070507050705,74.91020223062142L370.1945694569457,74.87836986079108Z"\n                          class="datamaps-subunit CZE"></path>\n                    <path d="M356.6532153215322,63.25955487272563L356.72092209220926,63.99169937882287L358.61671167116714,64.43735255644731L358.54900490049005,65.10583232288396L360.512501250125,64.75567625475047L361.52810281028104,64.24635833746542L363.69471947194717,64.97850284356268L364.57490749074907,65.58331787033873L364.9811481148115,66.53828896524819L364.43949394939494,67.04760688253329L365.1842684268427,67.71608664896989L365.5905090509051,68.70289011370969L365.455095509551,69.37136988014635L366.2675767576758,70.54916756386808L365.3873887388739,70.74016178284997L364.9134413441344,70.54916756386808L364.43949394939494,70.89932363200157L363.0853585358536,71.24947970013501L362.4082908290829,71.72696524758977L360.9864486448645,72.14078605538387L361.3249824982498,72.68193634249924L361.52810281028104,73.47774558825716L362.47599759976,73.95523113571194L363.55930593059304,74.7510403814698L362.8822382238224,75.6105143668884L362.2051705170517,75.86517332553088L362.47599759976,77.07480337908291L362.34058405840585,77.39312707738607L361.73122312231226,77.0111386394223L360.85103510351036,76.94747389976163L359.496899689969,77.29762996789512L357.8042304230423,77.20213285840418L357.533403340334,77.71145077568929L356.58550855085514,77.20213285840418L356.0438543854386,77.29762996789512L354.0126512651265,76.72464731094942L353.6741174117412,77.13846811874357L352.04915491549156,77.10663574891323L352.2522752275227,75.76967621603994L353.2001700170017,74.49638142282731L350.49189918991897,74.14622535469381L349.6117111711171,73.63690743740878L349.74712471247125,72.80926582182053L349.34088408840887,72.39544501402642L349.6117111711171,71.12215022081374L349.2731773177318,69.14854329133414L350.42419241924193,69.14854329133414L350.8981398139814,68.4482311550672L351.30438043804384,66.72928318423008L350.96584658465844,66.09263578762376L351.37208720872087,65.67881497982967L352.92934293429346,65.58331787033873L353.2678767876788,65.99713867813281L354.5543054305431,65.07399995305367L354.1480648064807,64.3736878167867L354.0126512651265,63.29138724255594L355.434493449345,63.54604620119845Z"\n                          class="datamaps-subunit DEU"></path>\n                    <path d="M419.0111511151115,142.7768147088559L419.485098509851,143.38162973563192L419.4173917391739,144.1456066115595L418.3340834083408,144.59125978918394L419.14656465646567,145.100577706469L418.469496949695,146.1192135410391L417.9955495549555,145.76905747290562L417.5893089308931,145.9282193220572L416.50600060006,145.8963869522269L416.50600060006,145.3234042952812L416.3705870587059,144.7822540081658L416.9799479947995,143.92278002274728L417.6570157015702,143.09513840715906L418.469496949695,143.25430025631064Z"\n                          class="datamaps-subunit DJI"></path>\n                    <path d="M361.8666366636664,62.08175718900394L360.71562156215623,63.6097109408591L358.75212521252126,62.55924273645864L358.481298129813,61.76343349070078L361.25727572757273,61.15861846392474ZM356.6532153215322,63.25955487272563L355.434493449345,63.54604620119845L354.0126512651265,63.29138724255594L353.2678767876788,62.27275140798581L353.2001700170017,60.33097684833653L353.53870387038705,59.821658931051445L354.08035803580356,59.28050864393606L355.70532053205324,59.153179164614784L356.38238823882386,58.64386124732975L357.8719371937194,58.10271096021437L357.8042304230423,59.05768205512385L357.26257625762577,59.69432945173017L357.533403340334,60.20364736901526L358.54900490049005,60.49013869748808L358.0750575057506,61.190450833755065L357.533403340334,60.99945661477318L356.1792679267927,62.33641614764642Z"\n                          class="datamaps-subunit DNK"></path>\n                    <path d="M203.16196619661966,129.59821359910492L203.36508650865088,129.27988990080175L204.85463546354637,129.27988990080175L205.93794379437944,129.7573754482565L206.479597959796,129.72554307842617L206.8181318131813,130.39402284486283L207.83373337333734,130.36219047503252L207.76602660266025,130.90334076214788L208.57850785078506,130.96700550180853L209.52640264026402,131.66731763807547L208.84933493349334,132.43129451400307L207.9014401440144,132.017473706209L207.0889588958896,132.11297081569992L206.479597959796,132.017473706209L206.14106410641065,132.36762977434245L205.3962896289629,132.4631268838334L205.12546254625465,132.017473706209L204.44839483948397,132.27213266485148L203.7036203620362,133.57725982789447L203.22967296729672,133.2589361295913L203.16196619661966,132.71778584247593L203.16196619661966,132.20846792519086L202.6880188018802,131.66731763807547L203.16196619661966,131.34899393977233L203.2973797379738,130.61684943367504Z"\n                          class="datamaps-subunit DOM"></path>\n                    <path d="M360.5802080208021,122.53142749677468L354.1480648064807,126.09665291777011L348.6638163816381,129.82104018791716L346.02325232523253,130.64868180350538L343.92434243424344,130.83967602248725L343.92434243424344,129.63004596893524L343.04415441544154,129.31172227063206L341.8931393139314,128.80240435334701L341.4191919191919,127.91109799809814L335.05475547554755,123.80472228998734L328.7580258025803,119.69834658187654L321.6488148814882,115.1463176961413L321.7165216521652,114.79616162800781L321.7165216521652,114.66883214868653L321.7165216521652,112.4405662605644L324.6956195619562,111.03994198803046L326.5914091409141,110.75345065955764L328.1486648664866,110.24413274227257L328.8934393439344,109.32099401719341L331.0600560056006,108.55701714126582L331.1277627762776,107.15639286873187L332.21107110711074,106.99723101958031L333.09125912591264,106.29691888331335L335.5287028702871,106.01042755484049L335.86723672367236,105.27828304874322L335.3932893289329,104.86446224094911L334.7162216221622,102.8908553114695L334.6485148514852,101.74488999757811L333.9037403740374,100.5352599440261L335.73182318231824,99.51662410945596L337.76302630263024,99.16646804132249L338.9140414041404,98.40249116539488L340.74212421242123,97.8295085084492L343.92434243424344,97.4793524403157L347.03885388538856,97.35202296099446L347.9867486748675,97.60668191963698L349.74712471247125,96.8745374135397L351.7783278327833,96.8745374135397L352.523102310231,97.28835822133382L353.8095309530953,97.19286111184286L353.47099709970996,98.14783220675235L353.74182418241827,99.93044491725009L353.33558355835584,101.49023103893556L352.1168616861686,102.54069924333601L352.3199819981998,103.97315588570025L353.8772377237724,105.08728882976132L353.8772377237724,105.53294200738576L355.02825282528255,106.29691888331335L355.84073407340736,109.67115008532687L356.45009500950096,111.32643331650333L356.517801780178,112.21773967175218L356.1792679267927,113.74569342360738L356.31468146814683,114.60516740902592L356.1115611561156,115.62380324359603L356.24697469746974,116.80160092731775L355.502200220022,117.59741017307564L356.6532153215322,118.96620207577925L356.72092209220926,119.76201132153717L357.3979897989799,120.81247952593762L358.27817781778174,120.46232345780413L359.7677267726773,121.35362981305299Z"\n                          class="datamaps-subunit DZA"></path>\n                    <path d="M186.98004800480047,173.08123078731705L187.9956495649565,171.64877414495282L187.5894089408941,170.85296489919492L186.84463446344634,171.71243888461345L185.76132613261325,170.88479726902523L186.0998599859986,170.37547935174018L185.8290329032903,168.6565313809031L186.43839383938393,168.37004005243026L186.77692769276928,167.19224236870852L187.52170217021703,165.9826123151565L187.3862886288629,165.2186354392289L188.4018901890189,164.80481463143482L189.68831883188318,164.07267012533754L191.58410841084108,165.1549706995683L191.92264226422643,165.12313832973797L192.3965896589659,165.9189475754959L194.02155215521555,166.17360653413843L194.495499549955,165.88711520566557L195.44339433943395,166.49193023244158L196.25587558755876,166.937583410066L196.52670267026704,168.37004005243026L195.91734173417342,169.61150247581259L193.88613861386136,171.5851094052922L191.65181518151815,172.31725391138949L190.50080008000802,173.94070477273561L190.0945594559456,175.21399956594826L189.07895789578959,175.97797644187588L188.26647664766477,175.05483771679667L187.52170217021703,174.83201112798446L186.70922092209221,174.99117297713607L186.64151415141515,174.29086084086907L187.18316831683168,173.84520766324465Z"\n                          class="datamaps-subunit ECU"></path>\n                    <path d="M403.64171417141716,111.19910383718207L403.1677667766777,111.93124834327932L402.76152615261526,113.36370498564358L402.2198719871987,114.35050845038337L401.8136313631363,114.66883214868653L401.1365636563657,114.06401712191052L400.3240824082408,113.2363755063223L398.9699469946995,110.53062407074543L398.7668266826683,110.689785919897L399.5793079307931,112.69522521920692L400.73032303230326,114.5733350391956L402.15216521652167,117.50191306358471L402.82923292329235,118.52054889815483L403.43859385938595,119.6028494723856L405.13126312631266,121.67195351135615L404.7250225022502,121.9902772096593L404.7927292729273,123.23173963304166L407.02705270527053,124.91885523404842L407.2978797879788,125.3008436720122L399.85013501350136,125.3008436720122L392.6055105510551,125.3008436720122L385.02235223522354,125.3008436720122L385.02235223522354,118.36138704900324L385.02235223522354,111.6765893846368L384.480698069807,110.18046800261195L384.9546454645465,109.00267031889024L384.6161116111611,108.20686107313233L385.2931793179318,107.28372234805315L387.7983298329833,107.28372234805315L389.62641264126415,107.76120789550788L391.522202220222,108.33419055245359L392.40239023902393,108.62068188092644L393.82423242324234,108.0158668541504L394.5690069006901,107.47471656703505L396.26167616761677,107.31555471788346L397.61581158115814,107.57021367652601L398.0897589758976,108.49335240160516L398.5637063706371,107.88853737482917L400.0532553255326,108.33419055245359L401.5428042804281,108.42968766194454L402.4229922992299,107.95220211448981Z"\n                          class="datamaps-subunit EGY"></path>\n                    <path d="M417.6570157015702,143.09513840715906L416.9799479947995,142.45849101055273L416.23517351735177,141.37619043632196L415.4226922692269,140.77137540954595L414.8810381038104,140.10289564310932L413.2560756075608,139.37075113701204L411.9696469646965,139.33891876718172L411.495699569957,138.95693032921793L410.4123912391239,139.40258350684235L409.26137613761375,138.54310952142382L408.71972197219725,139.94373379395773L406.48539853985403,139.52991298616362L406.28227822782276,138.79776848006634L407.0947594759476,136.02835230482884L407.2978797879788,134.78688988144648L407.90724072407244,134.21390722450082L409.26137613761375,133.8955835261976L410.20927092709275,132.81328295196687L411.2925792579258,135.0097164702587L411.8342334233423,136.7286644410958L412.84983498349834,137.65180316617494L415.4226922692269,139.40258350684235L416.50600060006,140.48488408107312L417.52160216021605,141.5671846553039L418.06325632563255,142.20383205191018L419.0111511151115,142.7768147088559L418.469496949695,143.25430025631064Z"\n                          class="datamaps-subunit ERI"></path>\n                    <path d="M321.03945394539454,87.8978091213905L321.10716071607163,86.5608495885172L320.36238623862386,85.76504034275928L323.0029502950295,84.3962484400557L325.3049804980498,84.74640450818914L327.81013101310134,84.71457213835886L329.84133413341334,85.03289583666202L331.39858985898593,84.93739872717109L334.44539453945396,85.0010634668317L335.1901690169017,85.733207972929L338.64321432143214,86.59268195834753L339.3202820282028,86.17886115055337L341.4191919191919,87.03833513597193L343.5858085808581,86.78367617732943L343.7212221222122,87.8978091213905L341.9608460846085,89.13927154477282L339.52340234023404,89.52125998273661L339.3879887988799,90.15790737934293L338.16926692669267,91.20837558374338L337.492199219922,92.73632933559858L338.23697369736976,93.81862990982933L337.15366536653664,94.64627152541756L336.74742474247427,95.88773394879988L335.3255825582558,96.23789001693338L333.9714471447145,97.70217902912792L331.6017101710171,97.73401139895824L329.7736273627363,97.70217902912792L328.62261226122615,98.37065879556457L327.8778377837784,99.07097093183151L326.9976497649765,98.91180908267994L326.25287528752875,98.27516168607362L325.7112211221122,97.19286111184286L323.95084508450844,96.90636978337002L323.8154315431543,96.26972238676369L324.492499249925,95.56941025049673L324.7633263326333,95.06009233321166L324.15396539653966,94.51894204609629L324.62791279127913,93.27747962271395L323.8831383138314,92.13151430882257L324.6956195619562,91.97235245967096L324.7633263326333,91.11287847425243L325.1018601860186,90.82638714577959L325.1018601860186,89.36209813358504L325.9820482048205,88.85278021629998L325.44039403940394,87.8978091213905L324.3570857085709,87.83414438172986L324.0185518551855,88.08880334037238L322.9352435243525,88.08880334037238L322.461296129613,87.16566461529321L321.7165216521652,87.42032357393573Z"\n                          class="datamaps-subunit ESP"></path>\n                    <path d="M383.73592359235926,57.975381480893105L383.9390439043905,56.86124853683202L383.2619761976198,57.11590749547456L382.04325432543254,56.447427729037926L381.9078407840784,55.36512715480717L384.2775777577758,54.8239768676918L386.64731473147316,54.569317909049246L388.6785178517852,54.88764160735241L390.6420142014201,54.8239768676918L390.91284128412843,55.14230056599496L389.55870587058706,56.2246011402257L390.1003600360036,57.975381480893105L389.2878787878788,58.58019650766913L387.7983298329833,58.58019650766913L386.1733673367337,57.87988437140217L385.2931793179318,57.657057782589945Z"\n                          class="datamaps-subunit EST"></path>\n                    <path d="M417.6570157015702,143.09513840715906L416.9799479947995,143.92278002274728L416.3705870587059,144.7822540081658L416.50600060006,145.3234042952812L416.50600060006,145.8963869522269L417.5893089308931,145.9282193220572L417.9955495549555,145.76905747290562L418.469496949695,146.1192135410391L418.06325632563255,146.78769330747576L418.74032403240324,147.80632914204588L419.4173917391739,148.72946786712507L420.16216621662164,149.3979476335617L426.25577557755776,151.62621352168384L427.8807380738074,151.62621352168384L422.53190319031904,157.26054298164982L420.0944594459446,157.35604009114078L418.4017901790179,158.66116725418377L417.25077507750774,158.69299962401408L416.70912091209124,159.2978146507901L415.4226922692269,159.2978146507901L414.6779177917792,158.66116725418377L412.91754175417543,159.45697649994165L412.37588758875887,160.22095337586924L411.1571657165716,160.093623896548L410.7509250925093,159.87079730773578L410.2769776977698,159.9026296775661L409.6676167616762,159.9026296775661L407.2978797879788,158.31101118605028L406.01145114511456,158.31101118605028L405.3343834383439,157.67436378944396L405.3343834383439,156.62389558504353L404.3864886488649,156.30557188674035L403.23547354735473,154.2683002176001L402.4229922992299,153.82264703997566L402.0844584458446,153.09050253387838L401.1365636563657,152.16736380879922L399.98554855485554,152.04003432947795L400.59490949094914,150.9577337552472L401.6105110511051,150.89406901558655L401.8813381338134,150.32108635864088L401.8813381338134,148.6339707576341L402.4229922992299,146.6603638281545L403.30318031803176,146.1510459108694L403.50630063006304,145.38706903494182L404.31878187818785,143.9546123925776L405.469796979698,142.99964129766812L406.2145714571457,141.15336384750975L406.48539853985403,139.52991298616362L408.71972197219725,139.94373379395773L409.26137613761375,138.54310952142382L410.4123912391239,139.40258350684235L411.495699569957,138.95693032921793L411.9696469646965,139.33891876718172L413.2560756075608,139.37075113701204L414.8810381038104,140.10289564310932L415.4226922692269,140.77137540954595L416.23517351735177,141.37619043632196L416.9799479947995,142.45849101055273Z"\n                          class="datamaps-subunit ETH"></path>\n                    <path d="M391.7930293029303,36.77502317390241L391.522202220222,38.111982706775706L394.36588658865884,39.353445130158065L392.6055105510551,40.785901772522294L394.83983398339836,42.918670551153454L393.5534053405341,44.54212141249958L395.24607460746074,45.91091331520322L394.501300130013,47.15237573858556L397.2772777277728,48.425670531798204L396.532503250325,49.41247399653801L394.83983398339836,50.494774570768755L390.77742774277425,52.882202308042466L387.39208920892094,53.04136415719407L384.07445744574454,53.70984392363073L381.0276527652765,54.12366473142481L379.94434443444345,53.10502889685466L378.1162616261626,52.468381500248356L378.52250225022505,50.622104050090016L377.57460746074605,48.93498844908325L378.52250225022505,47.82085550502222L380.2151715171517,46.643057821300474L384.480698069807,44.60578615216025L385.76712671267126,44.22379771419642L385.5640064006401,43.4279884684385L382.92344234423445,42.5366821131897L382.3140814081408,41.80453760709237L382.24637463746376,38.90779195253363L379.33498349834986,37.634497159320944L376.82983298329833,36.71135843424179L377.9808480848085,36.202040516956686L380.01205120512054,37.22067635152683L382.51720172017207,37.1251792420359L384.54840484048407,37.57083241966032L386.3087808780878,36.74319080407207L387.2566756675668,35.34256653153818L390.16806680668066,34.70591913493186L392.537803780378,35.46989601085943Z"\n                          class="datamaps-subunit FIN"></path>\n                    <path d="M673.4531953195319,199.27927115766744L674.0625562556256,199.82042144478282L673.7917291729173,200.80722490952263L672.640714071407,201.06188386816515L671.557405740574,200.83905727935294L671.4219921992199,200.0114156637647L672.0990599059905,199.34293589732806L672.9792479247925,199.5975948559706ZM676.5,197.8151065700896L675.2812781278128,198.26063532309732L674.1302630263027,198.67445613089143L673.8594359435942,197.94231162479414L674.8073307330733,197.56032318683035L675.416691669167,197.4648260773394L676.5,196.89202313561572L676.5,197.8151065700896ZM-0.5,196.89202313561572L-0.499661500000002,196.8918434203937L-0.5,197.81498214547287L-0.5,197.81498214547287L-0.5,197.8151065700896L-0.5,196.89202313561572ZM-0.5,196.8918434203937L-0.09375937593756589,196.79634631090278L-0.36458645864587425,197.68765266615162L-0.5,197.81498214547287Z"\n                          class="datamaps-subunit FJI"></path>\n                    <path d="M222.93234323432344,264.1854732416825L225.16666666666669,263.0395079277911L226.7916291629163,263.51699347524584L227.87493749374937,262.75301659931824L229.36448644864487,263.6124905847368L228.8228322832283,264.28097035117344L226.31768176817684,264.8221206382888L225.43749374937494,264.1854732416825L223.88023802380238,265.0131148572707Z"\n                          class="datamaps-subunit FLK"></path>\n                    <path d="M355.9761476147615,87.38849120410542L355.3667866786679,88.85278021629998L354.486598659866,88.47079177833616L354.08035803580356,87.19749698512351L354.41889188918896,86.49718484885659L355.63761376137614,85.7968727125896ZM348.6638163816381,73.5095779580875L349.07005700570056,73.70057217706939L349.6117111711171,73.63690743740878L350.49189918991897,74.14622535469381L353.2001700170017,74.49638142282731L352.2522752275227,75.76967621603994L352.04915491549156,77.10663574891323L351.507500750075,77.4249594472164L350.69501950195024,77.26579759806484L350.7627262726273,77.74328314551956L349.34088408840887,78.79375134992003L349.34088408840887,79.65322533533856L350.2210721072107,79.36673400686567L350.8981398139814,80.1625432526236L350.7627262726273,80.70369353973898L351.37208720872087,81.40400567600595L350.69501950195024,81.97698833295166L351.1689668966897,83.44127734514618L352.1845684568457,83.69593630378871L351.9814481448145,84.49174554954664L350.2887788778878,85.57404612377739L346.5649064906491,85.06472820649235L343.85663566356635,85.66954323326834L343.5858085808581,86.78367617732943L341.4191919191919,87.03833513597193L339.3202820282028,86.17886115055337L338.64321432143214,86.59268195834753L335.1901690169017,85.733207972929L334.44539453945396,85.0010634668317L335.3932893289329,83.88693052277061L335.73182318231824,80.13071088279327L333.83603360336036,78.15710395331367L332.4141914191419,77.20213285840418L329.5705070507051,76.46998835230693L329.3673867386739,75.1011964496033L331.8048304830483,74.71920801163952L334.9870487048705,75.19669355909424L334.3776877687769,73.06392478046307L336.13806380638067,73.85973402622099L340.53900390039007,72.39544501402642L341.0806580658066,70.86749126217124L342.70562056205625,70.48550282420743L342.9764476447645,71.15398259064408L343.85663566356635,71.1858149604744L344.73682368236825,71.91795946657166L346.09095909590957,72.80926582182053L347.03885388538856,72.68193634249924Z"\n                          class="datamaps-subunit FRA"></path>\n                    <path d="M235.45809580958095,162.32188978467013L235.93204320432045,161.52608053891225L236.13516351635167,160.6666065534937L236.40599059905992,159.83896493790544L235.72892289228923,158.7566643636747L235.52580258025802,157.45153720063175L236.54140414041404,155.8280863392856L237.15076507650764,156.0509129280978L238.57260726072607,156.49656610572225L240.53610361036107,158.08818459723807L240.87463746374635,158.85216147316564L239.72362236223626,160.57110944400273L239.1819681968197,161.97173371653665L238.43719371937192,162.67204585280362L237.55700570057004,162.79937533212487L237.28617861786182,162.29005741483982L236.8799379937994,162.19456030534886L236.27057705770576,162.70387822263393Z"\n                          class="datamaps-subunit GUF"></path>\n                    <path d="M358.8875387538754,174.16353136154783L356.9240424042404,172.25358917172883L355.70532053205324,170.69380305004336L354.5543054305431,168.75202849039405L354.6220122012201,168.14721346361804L355.02825282528255,167.542398436842L355.502200220022,166.17360653413843L355.84073407340736,164.7729822616045L356.517801780178,164.64565278228324L359.22607260726073,164.67748515211355L359.22607260726073,162.41738689416107L360.1062606260626,162.29005741483982L361.25727572757273,162.54471637348234L362.34058405840585,162.29005741483982L362.61141114111416,162.41738689416107L362.47599759976,163.213196139919L362.94994499449945,164.1999996046588L364.3717871787179,164.04083775550723L364.8457345734573,164.42282619347102L364.03325332533257,166.5874273419325L364.9134413441344,167.7015602859936L365.11656165616563,169.16584929818816L364.9134413441344,170.4391440914008L364.3040804080408,171.29861807681937L362.6791179117912,171.23495333715871L361.66351635163517,170.34364698190987L361.52810281028104,171.1712885974981L360.24167416741676,171.3941151863103L359.5646064606461,171.87160073376504L360.30938093809385,173.1130631571474Z"\n                          class="datamaps-subunit GAB"></path>\n                    <path d="M326.3205820582058,65.3604912815265L324.89873987398744,64.97850284356268L323.7477247724773,65.01033521339302L324.15396539653966,63.99169937882287L323.7477247724773,62.973063544252796L325.3049804980498,62.90939880459213L327.3361836183619,64.08719648831382ZM332.34648464846487,56.4155953592076L330.3152815281528,58.42103465851753L332.2787778777878,58.16637569987499L334.30998099809983,58.19820806970533L333.83603360336036,59.726161821560495L332.14336433643365,61.41327742256729L334.1068606860686,61.54060690188855L334.24227422742274,61.73160112087044L335.93494349434945,63.92803463916226L337.22137213721373,64.24635833746542L338.3723872387239,66.37912711609665L338.9140414041404,67.14310399202424L341.14836483648367,67.49326006015767L340.9452445244525,68.70289011370969L339.9973497349735,69.24404040082513L340.74212421242123,70.1990114957346L339.0494549454945,71.1858149604744L336.54430443044305,71.1858149604744L333.2943794379438,71.69513287775945L332.4141914191419,71.31314443979568L331.1954695469547,72.20445079504455L329.4350935093509,71.98162420623233L328.1486648664866,72.71376871232958L327.13306330633065,72.33178027436577L329.90904090409043,70.35817334488614L331.6017101710171,69.94435253709204L331.53400340034005,69.94435253709204L328.62261226122615,69.65786120861922L328.0809580958096,68.89388433269163L330.04445444544456,68.32090167574593L329.02885288528853,67.3022658411758L329.3673867386739,66.0608034177935L332.21107110711074,66.25179763677536L332.481898189819,65.1376646927143L331.1954695469547,63.99169937882287L331.1954695469547,63.9598670089926L328.8934393439344,63.64154331068944L328.41949194919493,63.13222539340434L329.0965596559656,62.27275140798581L328.487198719872,61.76343349070078L327.471597159716,62.654739845949635L327.4038903890389,60.84029476562158L326.4559955995599,59.8853236707121L327.13306330633065,57.943549111062765L328.55490549054906,56.4155953592076L330.11216121612165,56.54292483852886Z"\n                          class="datamaps-subunit GBR"></path>\n                    <path d="M416.1674667466747,88.56628888782711L416.4382938293829,87.73864727223892L415.96434643464346,86.46535247902627L414.8810381038104,85.76504034275928L413.79772977297733,85.57404612377739L413.12066206620665,84.96923109700136L413.3914891489149,84.77823687801947L414.9487448744875,85.09656057632263L417.7247224722472,85.38305190479551L420.29757975797577,86.27435826004437L420.6361136113611,86.62451432817781L421.7871287128713,86.33802299970498L423.479797979798,86.75184380749909L424.08915891589163,87.51582068342671L425.2401740174018,87.92964149122079L424.7662266226623,88.21613281969366L425.7141214121412,89.23476865426377L425.44329432943294,89.45759524307599L424.4276927692769,89.33026576375474L423.0058505850585,88.78911547663932L422.5996099609961,89.10743917494253L419.9590459045905,89.39393050341535L418.13096309630964,88.47079177833616Z"\n                          class="datamaps-subunit GEO"></path>\n                    <path d="M339.9973497349735,155.50976264098244L337.0182518251825,156.62389558504353L336.0026502650265,157.26054298164982L334.30998099809983,157.8016932687652L332.6173117311731,157.26054298164982L332.6850185018502,156.52839847555256L331.8725372537254,154.90494761420643L332.4141914191419,152.80401120540554L333.1589658965897,151.21239271388973L332.6850185018502,148.53847364814317L332.4141914191419,147.1060170057789L332.481898189819,146.05554880137848L335.73182318231824,145.96005169188754L336.54430443044305,146.08738117120882L337.15366536653664,145.80088984273596L338.03385338533855,145.96005169188754L337.8984398439844,146.5330343488332L338.71092109210923,147.4880054437427L338.71092109210923,148.8567973464463L338.84633463346336,150.3529187284712L339.3202820282028,151.02139849490783L338.9140414041404,152.74034646574492L339.0494549454945,153.6634851908241L339.5911091109111,154.84128287454578Z"\n                          class="datamaps-subunit GHA"></path>\n                    <path d="M322.1227622762276,152.19919617862953L321.58110811081104,152.16736380879922L321.24257425742576,152.93134068472682L320.7009200920092,152.8995083148965L320.29467946794676,152.5175198769327L320.4300930093009,151.75354300100508L319.68531853185317,150.60757768711372L319.1436643664366,150.83040427592593L318.7374237423743,150.86223664575627L318.26347634763476,150.9577337552472L318.26347634763476,150.28925398881054L317.99264926492646,149.77993607152547L317.99264926492646,149.2387857844101L317.5864086408641,148.4429765386522L317.1124612461246,147.77449677221557L315.555205520552,147.77449677221557L315.1489648964897,148.12465284034906L314.60731073107314,148.15648521017937L314.33648364836483,148.57030601797345L314.0656565656566,149.11145630508886L313.1177617761776,149.93909792067706L312.23757375737574,148.824964976616L311.5605060506051,148.0609881006884L311.01885188518855,147.8381615118762L310.6126112611261,147.4561730739124L310.34178417841787,146.62853145832418L310.07095709570956,146.21471065053007L309.529302930293,145.8963869522269L310.4094909490949,144.97324822714774L310.95114511451146,145.03691296680836L311.42509250925093,144.71858926850518L311.8313331333133,144.71858926850518L312.1698669866987,144.46393030986266L311.96674667466743,143.82728291325634L312.1698669866987,143.63628869427444L312.23757375737574,142.99964129766812L313.1177617761776,143.03147366749843L314.471897189719,143.47712684512285L314.8781378137814,143.44529447529254L315.0812581258126,143.22246788648033L316.0968596859686,143.38162973563192L316.3676867686769,143.25430025631064L316.435393539354,143.9546123925776L316.77392739273927,143.9546123925776L317.24787478747874,143.69995343393506L317.5864086408641,143.76361817359572L318.0603560356036,144.24110372105045L318.87283728372836,144.400265570202L319.4144914491449,143.98644476240793L320.02385238523857,143.73178580376538L320.4300930093009,143.47712684512285L320.8363336333633,143.5089592149532L321.24257425742576,143.92278002274728L321.4456945694569,144.46393030986266L322.2581758175818,145.22790718579026L321.85193519351935,145.7372251030753L321.7842284228423,146.34204012985134L322.1904690469047,146.1510459108694L322.3935893589359,146.37387249968162L322.3258825882589,146.91502278679704L322.8675367536754,147.4880054437427L322.52900290029004,147.61533492306398L322.3935893589359,148.2519823196703L322.7998299829983,149.0477915654282L323.27377737773776,150.54391294745307L322.59670967096713,150.76673953626528L322.3935893589359,151.02139849490783L322.52900290029004,151.40338693287163L322.461296129613,152.19919617862953Z"\n                          class="datamaps-subunit GIN"></path>\n                    <path d="M306.34708470847085,141.94917309326766L306.55020502050206,141.08969910784913L308.64911491149115,141.05786673801882L309.0553555355536,140.61221356039437L309.6647164716472,140.58038119056408L310.4094909490949,141.0260343681885L310.95114511451146,141.05786673801882L311.5605060506051,140.73954303971564L311.96674667466743,141.28069332683103L311.1542654265427,141.69451413462514L310.34178417841787,141.66268176479483L309.529302930293,141.24886095700072L308.85223522352237,141.69451413462514L308.513701370137,141.72634650445545L308.03975397539756,141.98100546309797Z"\n                          class="datamaps-subunit GMB"></path>\n                    <path d="M309.529302930293,145.8963869522269L308.513701370137,145.1324100762993L307.76892689268925,145.00508059697802L307.29497949794984,144.46393030986266L307.3626862686269,144.1774389813898L306.7533253325333,143.76361817359572L306.61791179117915,143.38162973563192L307.6335133513351,143.06330603732874L308.2428742874287,143.12697077698937L308.7845284528453,142.90414418817718L312.23757375737574,142.99964129766812L312.1698669866987,143.63628869427444L311.96674667466743,143.82728291325634L312.1698669866987,144.46393030986266L311.8313331333133,144.71858926850518L311.42509250925093,144.71858926850518L310.95114511451146,145.03691296680836L310.4094909490949,144.97324822714774Z"\n                          class="datamaps-subunit GNB"></path>\n                    <path d="M355.84073407340736,164.7729822616045L355.502200220022,164.48649093313165L356.1792679267927,162.3855545243308L359.22607260726073,162.41738689416107L359.22607260726073,164.67748515211355L356.517801780178,164.64565278228324Z"\n                          class="datamaps-subunit GNQ"></path>\n                    <path d="M382.5849084908491,99.51662410945596L383.6005100510051,100.1532715060623L385.0900590059006,100.05777439657133L386.44419441944194,100.1851038758926L386.44419441944194,100.50342757419575L387.45979597959797,100.28060098538354L387.18896889688966,100.85358364232924L384.480698069807,101.01274549148083L384.54840484048407,100.69442179317767L382.24637463746376,100.31243335521387ZM386.9858485848585,89.90324842070041L385.83483348334835,89.83958368103977L384.8869386938694,89.6485894620579L382.5849084908491,90.15790737934293L383.8713371337134,91.20837558374338L382.92344234423445,91.52669928204656L381.9078407840784,91.52669928204656L380.8922392239224,90.53989581730676L380.55370537053705,90.95371662510085L380.9599459945995,92.09968193899225L381.9078407840784,92.9591559244108L381.2307730773078,93.3729767322049L382.24637463746376,94.23245071762344L383.1942694269427,94.80543337456913L383.1942694269427,95.85590157896958L381.501600160016,95.3465836616845L382.04325432543254,96.30155475659402L380.82453245324535,96.52438134540623L381.5693069306931,98.17966457658268L380.2828782878288,98.21149694641299L378.7256225622562,97.38385533082477L378.0485548554856,95.88773394879988L377.71002100210023,94.61443915558722L376.96524652465246,93.75496517016869L376.0173517351735,92.67266459593795L375.8819381938194,92.16334667865287L376.7621262126213,91.24020795357372L376.89753975397537,90.63539292679769L377.506900690069,90.34890159832484L377.506900690069,89.87141605087011L378.7256225622562,89.6804218318882L379.470397039704,89.2666010240941L380.48599859985995,89.33026576375474L380.82453245324535,88.98010969562124L381.16306630663064,88.91644495596061L382.5849084908491,88.98010969562124L384.07445744574454,88.47079177833616L385.3608860886088,89.10743917494253L387.1212621262126,88.94827732579094L387.1212621262126,87.99330623088143L388.00145014501453,88.5026241481665L387.45979597959797,89.6804218318882Z"\n                          class="datamaps-subunit GRC"></path>\n                    <path d="M250.08275827582762,11.277294939819L256.37948794879486,10.163161995757918L262.94704470447044,10.226826735418598L265.3844884488449,9.558346968981937L272.01975197519755,9.367352750000009L287.0506550655066,9.590179338812192L298.8316331633164,11.086300720837102L295.31088108810883,11.818445226934358L288.13396339633965,11.913942336425322L277.9779477947795,12.073104185576938L278.9258425842584,12.423260253710424L285.6288128812881,12.200433664898185L291.2484748474848,12.868913431334846L294.9046404640464,12.295930774389149L296.461896189619,12.964410540825781L294.4306930693069,14.046711115056553L299.2378737873787,13.346398978789551L308.37828782878285,12.614254472692295L313.9979497949795,12.996242910656065L315.0135513551355,13.792052156413973L307.3626862686269,15.129011689287296L306.2793779377938,15.574664866911718L300.3211821182118,15.892988565214864L304.65441544154413,15.9884856747058L302.487798779878,17.357277577409434L300.9305430543054,18.566907630961452L300.9982498249825,20.667844039762343L303.2325732573257,21.877474093314362L300.3211821182118,21.972971202805326L297.2066706670667,22.577786229581307L300.72742274227426,23.564589694321114L301.13366336633663,25.15620818583696L299.10246024602463,25.34720240481883L301.53990399039907,26.938820896334676L297.4097909790979,27.097982745486235L299.5764076407641,27.86195962141383L298.9670467046705,28.498607018020152L296.3264826482648,28.8169307163233L293.6859185918592,28.8169307163233L296.05565556555655,30.09022550953597L296.05565556555655,30.91786712512419L292.33178317831783,30.153890249196593L291.3838883888389,30.631375796651355L293.88903890389037,31.108861344106117L296.39418941894195,32.254826657997484L297.0712571257126,33.78278040985268L293.75362536253624,34.13293647798616L292.2640764076408,33.43262434171916L289.9620462046205,32.35032376748842L290.6391139113912,33.62361856070112L288.4047904790479,34.610422025440926L293.3473847384738,34.67408676510152L295.9879487948795,34.769583874592456L290.9099409940994,36.424867105768925L285.83193319331934,37.889156117963495L280.3476847684769,38.55763588440013L278.24877487748773,38.55763588440013L276.28527852785277,39.289780390497384L273.7124212421242,41.263387319977014L269.65001500150015,42.60034685285029L268.36358635863587,42.66401159251092L265.8584358435844,43.14149713996568L263.15016501650166,43.555317947759775L261.52520252025204,44.73311563148151L261.52520252025204,46.03824279452449L260.509600960096,47.27970521790678L257.462796279628,48.77582659993169L258.2075707570757,50.27194798195653L257.39508950895095,51.79990173381172L256.44719471947195,53.646179183970105L253.8066306630663,53.773508663291324L251.03065306530652,52.21372254160586L247.23907390739078,52.21372254160586L245.41099109910994,51.19508670703574L244.19226922692272,49.34880925687739L240.87463746374635,47.0250462592643L239.92674267426742,45.78358383588193L239.72362236223626,44.09646823487515L237.0830583058306,42.3775202640381L237.76012601260126,40.97689599150419L236.54140414041404,40.30841622506753L238.36948694869488,38.111982706775706L241.21317131713175,37.41167057050873L241.95794579457947,36.615861324750796L242.36418641864188,35.15157231255628L240.1975697569757,35.820052078992944L239.1819681968197,36.10654340746575L237.48929892989298,36.36120236610833L235.1872687268727,35.756387339332264L235.05185518551855,34.48309254611962L235.79662966296632,33.49628908137984L237.48929892989298,33.4644567115495L241.34858485848585,33.941942259004264L238.09865986598658,32.76414457528256L236.47369736973698,32.12749717867621L234.57790779077908,32.38215613731876L233.02065206520652,31.90467058986397L235.1195619561956,30.153890249196593L233.96854685468548,29.453578112929677L232.47899789979,28.148450949886694L230.17696769676968,26.174844020407022L227.8072307230723,25.442699514309766L227.8072307230723,24.646890268551857L222.7969296929693,23.564589694321114L218.8022302230223,23.405427845169555L213.79192919291927,23.50092495466049L209.18786878687868,23.628254433981766L207.02125212521253,23.02343940720573L203.7036203620362,21.84564172348405L208.64621462146212,21.240826696707984L212.43779377937796,21.145329587217077L204.3806880688069,20.667844039762343L200.1828682868287,19.903867163834775L200.3859885988599,19.171722657737433L207.56290629062906,18.28041630248859L214.40129012901286,17.357277577409434L215.14606460646064,16.6887978109728L210.06805680568058,15.9884856747058L211.69301930193018,15.256341168608571L218.26057605760576,13.951214005565589L220.96884688468847,13.728387416753378L220.1563656365637,12.90074580116513L224.62501250125013,12.391427883880084L230.44779477947796,12.10493655540725L236.2028702870287,12.073104185576938L238.23407340734076,12.677919212352919L243.24437443744375,11.627451007952487L247.71302130213024,12.327763144219404L250.35358535853587,12.48692499337102L254.28057805780583,13.091740020147057L249.81193119311934,12.073104185576938Z"\n                          class="datamaps-subunit GRL"></path>\n                    <path d="M168.56380638063808,140.83504014920658L167.61591159115912,140.51671645090343L166.46489648964896,140.48488408107312L165.5847084708471,140.10289564310932L164.5691069106911,139.33891876718172L164.63681368136815,138.76593611023603L164.83993399339934,138.35211530244192L164.5691069106911,137.97012686447812L165.44929492949296,136.44217311262292L167.88673867386737,136.44217311262292L167.95444544454443,135.8055257160166L167.61591159115912,135.67819623669536L167.4127912791279,135.29620779873156L166.73572357235724,134.8505546211071L165.9909490949095,134.21390722450082L166.87113711371137,134.21390722450082L166.87113711371137,133.16343902010036L168.63151315131515,133.16343902010036L170.3918891889189,133.16343902010036L170.32418241824183,134.65956040212524L170.18876887688768,136.79232918075644L170.73042304230424,136.79232918075644L171.40749074907492,137.1424852488899L171.54290429042905,136.85599392041706L172.08455845584558,137.07882050922927L171.2043704370437,137.81096501532653L170.32418241824183,138.3202829326116L170.18876887688768,138.7022713705754L170.32418241824183,139.0524274387089L169.9856485648565,139.52991298616362L169.51170117011702,139.6572424654849L169.64711471147118,139.8800690542971L169.24087408740874,140.071063273279L168.63151315131515,140.54854882073374Z"\n                          class="datamaps-subunit GTM"></path>\n                    <path d="M225.64061406140615,150.9259013854169L226.85933593359337,151.62621352168384L228.01035103510353,152.83584357523586L228.0780578057806,153.82264703997566L228.75512551255125,153.85447940980598L229.7707270727073,154.77761813488516L230.51550155015502,155.4460979013218L230.24467446744677,157.13321350232857L229.0936593659366,157.6106990497833L229.16136613661365,158.05635222740776L228.8228322832283,159.04315569214756L229.70302030203018,160.38011522502083L230.3123812381238,160.41194759485117L230.51550155015502,161.4624157992516L231.66651665166518,163.08586666059773L231.19256925692568,163.14953140025835L230.17696769676968,162.9903695511068L229.56760676067609,163.49968746839184L228.68741874187418,163.81801116669502L228.14576457645762,163.91350827618595L227.94264426442643,164.29549671414975L226.9947494749475,164.1999996046588L225.84373437343737,163.30869324940994L225.70832083208322,162.4492192639914L225.23437343734372,161.4942481690819L225.50520052005203,159.87079730773578L226.04685468546856,159.23414991112944L225.5729072907291,158.34284355588062L224.96354635463547,158.05635222740776L225.23437343734372,157.22871061181954L224.76042604260428,156.8148898040254L223.81253125312531,156.87855454368605L222.52610261026103,155.4460979013218L223.0000500050005,154.93677998403675L223.0000500050005,154.0773059986182L224.15106510651066,153.75898230031504L224.62501250125013,153.40882623218155L223.94794479447944,152.7085140959146L224.15106510651066,152.04003432947795Z"\n                          class="datamaps-subunit GUY"></path>\n                    <path d="M173.77722772277227,142.23566442174052L173.43869386938692,141.66268176479483L172.89703970397036,141.50351991564324L173.03245324532452,140.73954303971564L172.76162616261627,140.54854882073374L172.35538553855386,140.4212193414125L171.54290429042905,140.6440459302247L171.475197519752,140.38938697158216L170.93354335433543,140.071063273279L170.52730273027305,139.6890748353152L169.9856485648565,139.52991298616362L170.32418241824183,139.0524274387089L170.18876887688768,138.7022713705754L170.32418241824183,138.3202829326116L171.2043704370437,137.81096501532653L172.08455845584558,137.07882050922927L172.28767876787677,137.1743176187202L172.6939193919392,136.82416155058672L173.23557355735576,136.79232918075644L173.43869386938692,136.951491029908L173.7095209520952,136.85599392041706L174.5897089708971,137.04698813939893L175.46989698969898,136.9833233997383L176.07925792579258,136.79232918075644L176.2823782378238,136.5695025919442L176.8917391739174,136.66499970143516L177.2979797979798,136.79232918075644L177.83963396339632,136.7604968109261L178.17816781678167,136.6013349617745L179.05835583558357,136.85599392041706L179.32918291829185,136.88782629024738L179.93854385438544,137.23798235838086L180.480198019802,137.65180316617494L181.15726572657266,137.9382944946478L181.63121312131213,138.4794447817632L181.0218521852185,138.41578004210254L180.75102510251025,138.6704390007451L180.07395739573957,138.9250979593876L179.60001000100013,138.9250979593876L179.1937693769377,139.17975691803014L178.7875287528753,139.0842598085392L178.516701670167,138.79776848006634L178.3135813581358,138.861433219727L178.04275427542754,139.3070863973514L177.83963396339632,139.2752540275211L177.83963396339632,139.6572424654849L177.16256625662567,140.19839275260028L176.82403240324032,140.4212193414125L176.62091209120914,140.6440459302247L176.07925792579258,140.2620574922609L175.67301730173017,140.77137540954595L175.26677667766776,140.73954303971564L174.86053605360536,140.8032077793763L174.86053605360536,141.72634650445545L174.5897089708971,141.72634650445545L174.3865886588659,142.1719996820799Z"\n                          class="datamaps-subunit HND"></path>\n                    <path d="M373.37678767876787,80.32170510177521L373.85073507350734,81.05384960787246L374.46009600960093,81.59499989498784L373.7153215321532,82.29531203125482L372.90284028402846,81.88149122346071L371.6164116411642,81.913323593291L369.9914491449145,81.59499989498784L369.1112611261126,81.6586646346485L368.7050205020502,82.04065307261227L368.0279527952796,81.59499989498784L367.62171217121715,82.39080914074576L368.5696069606961,83.25028312616429L368.97584758475847,83.85509815294033L369.78832883288334,84.55541028920725L370.53310331033106,84.96923109700136L371.21017101710174,85.733207972929L372.90284028402846,86.46535247902627L372.6997199719972,86.78367617732943L370.93934393439343,86.08336404106244L369.8560356035604,85.41488427462579L368.0956595659566,84.84190161768014L366.53840384038403,83.4731097149765L366.94464446444647,83.31394786582496L366.06445644564457,82.51813862006703L365.9967496749675,81.913323593291L364.8457345734573,81.59499989498784L364.2363736373637,82.42264151057609L363.69471947194717,81.78599411396972L363.69471947194717,81.11751434753313L363.7624262426243,81.08568197770279L365.11656165616563,81.1493467173634L365.455095509551,80.86285538889058L366.06445644564457,81.1493467173634L366.80923092309234,81.18117908719374L366.80923092309234,80.6718611699087L367.48629862986303,80.48086695092677L367.62171217121715,79.71689007499917L369.17896789678974,79.20757215771413L369.7206220622062,79.43039874652634L371.14246424642465,80.25804036211454L372.6997199719972,80.60819643024803Z"\n                          class="datamaps-subunit HRV"></path>\n                    <path d="M203.16196619661966,129.59821359910492L203.2973797379738,130.61684943367504L203.16196619661966,131.34899393977233L202.6880188018802,131.66731763807547L203.16196619661966,132.20846792519086L203.16196619661966,132.71778584247593L201.87553755375538,132.39946214417276L200.9953495349535,132.55862399332435L199.84433443344335,132.39946214417276L198.96414641464145,132.74961821230625L197.94854485448545,132.17663555536055L198.15166516651664,131.57182052858454L199.84433443344335,131.82647948722706L201.26617661766178,131.98564133637865L201.94324432443244,131.57182052858454L201.13076307630763,130.74417891299632L201.13076307630763,130.01203440689903L199.9120412041204,129.72554307842617L200.3859885988599,129.21622516114112L201.53700370037004,129.31172227063206Z"\n                          class="datamaps-subunit HTI"></path>\n                    <path d="M368.501900190019,78.57092476110782L369.1112611261126,77.36129470755579L368.7050205020502,76.94747389976163L369.78832883288334,76.94747389976163L369.92374237423746,76.18349702383404L370.87163716371634,76.66098257128881L371.54870487048703,76.8519767902707L373.17366736673665,76.62915020145847L373.3090809080908,76.2471617634947L374.0538553855386,76.18349702383404L375.0017501750175,75.89700569536122L375.20487048704877,76.02433517468249L376.0850585058506,75.76967621603994L376.49129912991305,75.35585540824584L377.10066006600664,75.22852592892457L379.13186318631864,75.80150858587027L379.5381038103811,75.6105143668884L380.55370537053705,76.11983228417343L380.6891189118912,76.62915020145847L379.5381038103811,77.0111386394223L378.65791579157917,78.28443343263493L377.506900690069,79.55772822584761L376.0173517351735,79.9078842939811L374.86633663366337,79.84421955432045L373.37678767876787,80.32170510177521L372.6997199719972,80.60819643024803L371.14246424642465,80.25804036211454L369.7206220622062,79.43039874652634L369.17896789678974,79.20757215771413L368.7727272727273,78.57092476110782Z"\n                          class="datamaps-subunit HUN"></path>\n                    <path d="M564.9869486948695,185.90967582893458L564.2421742174217,185.9733405685952L561.7370237023702,184.6363810357219L563.4973997399741,184.28622496758842L564.445294529453,184.85920762453412L565.1223622362236,185.4003579116495ZM573.0440544054405,183.39491861233958L573.1794679467946,183.74507468047304L573.2471747174718,184.31805733741876L572.0284528452846,185.750513979783L570.4034903490349,186.1643347875771L570.2003700370037,185.90967582893458L570.3357835783579,185.27302843232823L571.1482648264828,184.12706311843684ZM559.7058205820582,181.8987972303147L560.3828882888289,182.40811514759977L561.5339033903391,182.24895329844816L562.0078507850786,183.0447625442061L559.8412341234124,183.4267509821699L558.5548054805481,183.68140994081242L557.5392039203921,183.6495775709821L558.2162716271627,182.56727699675136L559.2318731873188,182.56727699675136ZM569.1170617061707,181.8987972303147L568.8462346234624,182.91743306488482L566.0025502550254,183.4585833520002L563.4973997399741,183.23575676318796L563.4973997399741,182.53544462692102L564.9869486948695,182.15345618895722L566.2056705670567,182.72643884590295L567.424392439244,182.56727699675136ZM542.3051805180519,179.41587238355004L545.8936393639364,179.60686660253194L546.2998799879988,178.81105735677403L549.7529252925293,179.73419608185318L550.4299929992999,180.9438261354052L553.2736773677368,181.2939822035387L555.5757075707571,182.40811514759977L553.476797679768,183.14025965369703L551.3778877887789,182.37628277776943L549.6852185218522,182.40811514759977L547.7217221722173,182.2807856682785L545.9613461346134,181.930629600145L543.7947294729473,181.23031746387807L542.3728872887289,181.03932324489614L541.6281128112812,181.26214983370835L538.1750675067508,180.49817295778078L537.8365336533653,179.70236371202287L536.1438643864386,179.54320186287129L537.430293029303,177.76058915237357L539.7323232323233,177.8560862618645L541.2218721872188,178.5882307679618L542.0343534353435,178.74739261711338ZM591.3248824882488,178.36540417914958L590.3769876987699,179.63869897236225L590.1738673867387,178.206242329998L590.5124012401241,177.53776256356136L590.9186418641864,176.90111516695504L591.3925892589259,177.44226545407042ZM577.3095809580958,173.17672789680802L576.564806480648,173.78154292358406L575.2783778377839,173.46321922528085L574.9398439843985,172.63557760969263L576.8356335633563,172.5400805002017ZM583.3354835483549,172.47641576054104L584.0125512551255,173.9088724029053L582.455295529553,173.1448955269777L580.8980398039805,172.98573367782612L579.8147314731474,173.1130631571474L578.528302830283,173.04939841748677L578.9345434543454,171.9989302130863L581.3042804280428,171.9352654734257ZM603.1735673567357,171.5532770354619L603.1735673567357,177.69692441271295L603.2412741274127,183.8087394201337L601.548604860486,182.2807856682785L599.6528152815282,181.8987972303147L599.1788678867888,182.43994751743008L596.8091309130913,182.4717798872604L597.6216121612161,180.9438261354052L598.7726272627264,180.43450821812013L598.2986798679868,178.39723654897992L597.3507850785079,176.8056180574641L593.7623262326232,175.21399956594826L592.2050705070508,175.05483771679667L589.3613861386139,173.3358897459596L588.8197319731973,174.22719610120845L588.0749574957497,174.38635795036006L587.6687168716871,173.7178781839234L587.6687168716871,172.89023656833518L586.2468746874688,171.967097843256L588.2103710371038,171.29861807681937L589.5645064506451,171.33045044664968L589.429092909291,170.8211325293646L586.6531153115311,170.8211325293646L585.9083408340834,169.70699958530355L584.2156715671567,169.35684351717006L583.470897089709,168.43370479209088L585.9760476047604,167.98805161446646L586.9239423942395,167.35140421786014L589.9707470747074,168.14721346361804L590.2415741574157,168.847525599885L590.7832283228323,171.87160073376504L592.7467246724673,172.98573367782612L594.3039803980398,171.0121267483465L596.470597059706,169.86616143445514L598.1632663266328,169.86616143445514L599.7205220522053,170.53464120089177L601.1423642364236,171.2031209673284ZM573.5180018001801,164.0090053856769L572.0284528452846,165.85528283583525L570.6066106610662,166.23727127379905L568.7785278527853,165.85528283583525L565.6640164016402,165.9507799453262L564.0390539053906,166.2054389039687L563.7682268226823,167.63789554633297L565.393189318932,169.32501114733975L566.408790879088,168.4655371619212L569.9295429542955,167.82888976531487L569.7941294129413,168.6883637507334L568.9816481648165,168.40187242226054L568.1691669166917,169.51600536632162L566.476497649765,170.2481498724189L568.3045804580458,172.66740997952297L567.9660466046604,173.30405737612926L569.6587158715872,175.4686585245908L569.5910091009101,176.71012094797314L568.6431143114312,177.2512712350885L567.8983398339834,176.61462383848217L568.7785278527853,175.05483771679667L566.9504450445045,175.78698222289395L566.476497649765,175.27766430560888L566.6796179617962,174.54551979951162L565.3254825482549,173.43138685545054L565.528602860286,171.6169417751225L564.2421742174217,172.18992443206824L564.3775877587759,174.38635795036006L564.445294529453,177.06027701610662L563.2942794279428,177.34676834457946L562.4817981798179,176.77378568763376L563.0234523452345,175.05483771679667L562.7526252625263,173.24039263646864L561.9401440144014,173.20856026663833L561.3307830783078,171.9352654734257L562.1432643264327,170.69380305004336L562.414091409141,169.19768166801848L563.3619861986199,166.36460075312033L563.7005200520052,165.6006238771927L565.3254825482549,164.1999996046588L566.8150315031503,164.7729822616045L569.1847684768477,165.02764122024703L571.3513851385138,164.9321441107561L573.1794679467946,163.5633522080525ZM580.0178517851784,164.5501556727923L579.8824382438244,166.17360653413843L578.9345434543454,165.9826123151565L578.6637163716372,167.12857762904792L579.408490849085,168.14721346361804L578.8668366836685,168.37004005243026L578.1220622062207,167.16040999887824L577.5804080408041,164.7729822616045L577.9866486648665,163.27686087957963L578.5960096009601,162.57654874331266L578.7314231423143,163.5951845778828L579.8147314731474,163.75434642703436ZM544.2009700970098,162.89487244161583L544.5395039503951,164.13633486499816L545.8259325932594,165.2186354392289L547.0446544654466,164.83664700126513L548.2633763376339,164.9639764805864L549.3466846684669,164.0090053856769L550.2268726872687,163.84984353652533L551.9872487248724,164.39099382364068L553.5445044504451,163.9771730158466L554.492399239924,161.36691868976067L555.2371737173718,160.698438923324L555.9142414241423,158.5656701446928L558.0808580858086,158.5656701446928L559.7058205820582,158.88399384299598L558.6225122512251,160.57110944400273L559.9766476647665,162.35372215450047L559.6381138113811,163.24502850974932L561.8047304730474,164.9639764805864L559.5704070407041,165.18680306939862L558.8933393339335,166.46009786261126L559.0287528752875,168.17904583344836L557.2006700670067,169.452340626661L557.1329632963295,171.33045044664968L556.455895589559,174.22719610120845L556.1173617361736,173.55871633477182L554.0184518451846,174.38635795036006L553.2736773677368,173.24039263646864L551.9195419541954,173.1448955269777L550.9716471647165,172.5400805002017L548.7373237323732,173.20856026663833L548.0602560256026,172.28542154155917L546.8415341534153,172.41275102088042L545.2842784278428,172.18992443206824L545.0134513451345,169.6751672154732L544.0655565556556,169.13401692835782L543.1853685368537,167.542398436842L542.9145414541455,165.88711520566557L543.1176617661765,164.13633486499816ZM537.0240524052406,177.66509204288263L534.9251425142514,177.69692441271295L533.3001800180018,176.13713829102744L530.9304430443044,174.60918453917225L530.1179617961797,173.46321922528085L528.6961196119612,171.9352654734257L527.7482248224823,170.53464120089177L526.3263826382638,167.89255450497552L524.7014201420143,166.33276838329L524.0920592059206,164.7093175219439L523.4149914991499,163.24502850974932L521.7223222322233,162.0672308260276L520.7744274427444,160.44377996468145L519.3525852585259,159.39331176028102L517.3890889088909,157.32420772131047L517.1859685968597,156.36923662640098L518.404690469047,156.4329013660616L521.3160816081609,156.8148898040254L523.0087508750876,158.62933488435343L524.4305930593059,159.9026296775661L525.513901390139,160.698438923324L527.2742774277427,162.70387822263393L529.1700670067007,162.73571059246427L530.7273227322733,164.04083775550723L531.8106310631063,165.6006238771927L533.3001800180018,166.46009786261126L532.4876987698769,168.01988398429677L533.5710071007102,168.6565313809031L534.2480748074807,168.72019612056374L534.5866086608661,170.0253232836067L535.2636763676368,171.07579148800716L536.6178117811781,171.23495333715871L537.5657065706571,172.41275102088042L537.0917591759176,174.76834638832383Z"\n                          class="datamaps-subunit IDN"></path>\n                    <path d="M484.34818481848185,99.93044491725009L486.3793879387939,102.12687843554191L486.17626762676275,103.65483218739709L486.9887488748875,104.60980328230656L486.9210421042105,105.56477437721607L485.56690669066904,105.34194778840384L486.0408540854085,107.41105182737441L487.93664366436644,108.58884951109613L490.509500950095,109.89397667413908L489.3584858485849,110.75345065955764L488.6137113711372,112.50423100022505L490.441794179418,113.2363755063223L492.2021702170217,114.15951423140149L494.63961396139615,115.20998243580193L497.2124712471247,115.46464139444446L498.2957795779578,116.41961248935397L499.78532853285327,116.57877433850554L502.01965196519654,117.02442751612998L503.5769076907691,116.99259514629964L503.84773477347744,116.26045064020235L503.5769076907691,115.05082058665033L503.71232123212326,114.25501134089244L504.86333633363336,113.84119053309831L504.99874987498754,115.3373119151232L505.06645664566463,115.71930035308698L506.75912591259134,116.41961248935397L507.97784778477853,116.1331211608811L509.535103510351,116.26045064020235L511.0923592359236,116.19678590054174L511.2277727772777,115.05082058665033L510.41529152915297,114.44600555987432L511.97254725472544,114.1913466012318L513.6652165216522,112.79072232869788L515.8318331833184,111.61292464497618L517.3890889088909,112.05857782260061L518.7432243224323,111.29460094667301L519.6234123412341,112.4405662605644L519.0140514051405,113.2363755063223L521.0452545254525,113.52286683479514L521.1806680668067,114.22317897106214L520.5036003600361,114.5733350391956L520.6390139013902,115.71930035308698L519.3525852585259,115.40097665478382L516.9151415141514,116.70610381782677L516.9151415141514,117.75657202222723L515.8995399539954,119.34819051374305L515.8318331833184,120.27132923882222L514.9516451645165,121.79928299067743L513.529802980298,121.38546218288329L513.462096209621,123.32723674253259L512.9881488148815,123.96388413913891L513.1912691269126,124.75969338489685L512.2433743374338,125.20534656252127L511.2954795479548,122.24493616830185L510.75382538253825,122.24493616830185L510.48299829983,123.45456622185387L509.3996899689969,122.46776275711404L510.0090509050905,121.38546218288329L510.82153215321534,121.28996507339235L511.7017201720172,119.69834658187654L510.61841184118407,119.38002288357339L508.8580358035804,119.41185525340369L507.0976597659766,119.15719629476115L506.96224622462245,117.85206913171817L506.01435143514345,117.75657202222723L504.524802480248,116.92893040663901L503.9154415441544,118.20222519985165L505.2695769576958,119.18902866459146L504.05085508550854,119.8893408008584L503.64461446144617,120.58965293712541L504.79562956295626,121.09897085441044L504.45709570957104,122.21310379847152L505.1341634163416,123.64556044083577L505.40499049904986,125.20534656252127L505.1341634163416,125.87382632895789L503.84773477347744,125.84199395912759L501.5457045704571,126.25581476692172L501.6811181118112,127.65643903945562L500.66551655165523,128.7705719835167L497.95724572457243,130.04386677672937L495.8583358335834,132.2403002950212L494.43649364936493,133.44993034857322L492.54070407040706,134.65956040212524L492.54070407040706,135.51903438754377L491.6605160516052,135.9965199349985L489.9001400140014,136.66499970143516L489.08765876587654,136.7604968109261L488.47829782978295,138.19295345329033L488.88453845384544,140.6440459302247L488.95224522452247,142.20383205191018L488.2074707470747,143.98644476240793L488.2074707470747,147.20151411526987L487.1918691869187,147.2651788549305L486.3793879387939,148.72946786712507L486.9210421042105,149.33428289390105L485.22837283728376,149.87543318101646L484.551305130513,151.14872797422908L483.80653065306535,151.6898782613445L482.0461546154616,149.93909792067706L481.16596659665964,147.29701122476084L480.4211921192119,145.38706903494182L479.81183118311833,144.495762679693L478.7962296229623,142.71314996919526L478.32228222822283,140.35755460175184L477.9837483748375,139.17975691803014L476.29107910791083,136.6013349617745L475.47859785978596,132.94061243128814L474.93694369436946,130.55318469401442L474.93694369436946,128.26125406623163L474.5984098409841,126.51047372556424L471.82243224322434,127.62460666962531L470.53600360036,127.4017800808131L468.0985598559856,125.14168182286063L468.9787478747875,124.44136968659367L468.43709370937097,123.70922518049639L466.20277027702775,122.11760668898057L467.48919891989203,120.84431189576793L471.6193119311931,120.87614426559823L471.2130713071307,119.25269340425211L470.19746974697466,118.29772230934259L469.9266426642664,116.83343329714805L468.7079207920792,116.00579168155983L470.80683068306826,114.03218475208021L472.9734473447345,114.15951423140149L474.93694369436946,112.21773967175218L476.15566556655665,110.30779748193322L477.9837483748375,108.39785529211424L477.91604160416045,107.06089575924094L479.5410041004101,105.97859518501019L477.9837483748375,105.055456459931L477.3743874387439,103.78216166671837L476.69731973197315,102.12687843554191L477.6452145214522,101.33106918978399L480.488898889889,101.77672236740842L482.5878087808781,101.49023103893556Z"\n                          class="datamaps-subunit IND"></path>\n                    <path d="M326.3205820582058,65.3604912815265L326.6591159115912,66.6974508143998L325.2372737273727,68.38456641540654L321.91964196419644,69.49869935946761L319.2113711371137,69.21220803099479L320.7686268626863,67.23860110151517L319.75302530253026,65.32865891169618L322.3258825882589,63.86436989950165L323.7477247724773,62.973063544252796L324.15396539653966,63.99169937882287L323.7477247724773,65.01033521339302L324.89873987398744,64.97850284356268Z"\n                          class="datamaps-subunit IRL"></path>\n                    <path d="M439.3908890889089,96.71537556438811L441.0835583558356,96.33338712642433L442.3699869986999,95.28291892202388L443.65641564156414,95.31475129185421L444.468896889689,94.96459522372072L445.8230323032303,95.15558944270263L447.9219421942194,96.1105605376121L449.4114911491149,96.30155475659402L451.510401040104,97.98867035760077L452.93224322432246,98.0523350972614L453.1353635363537,99.6121212189469L452.32288228822887,101.96771658639032L451.8489348934894,103.33650848909393L452.66141614161415,103.62299981756675L451.8489348934894,104.6416356521369L452.458295829583,106.13775703416178L452.5937093709371,107.3473870877138L454.0155515551555,107.66571078601694L454.1509650965097,108.87534083956898L452.458295829583,110.56245644057573L453.40619061906193,111.54925990531554L454.1509650965097,112.69522521920692L455.9790479047905,113.52286683479514L456.0467546754676,115.17815006597161L456.9269426942694,115.49647376427477L457.0623562356236,116.35594774969331L454.35408540854087,117.3109188446028L453.6770177017702,119.50735236289462L450.0885588558856,118.93436970594894L448.0573557355736,118.52054889815483L445.9584458445845,118.26588993951229L445.1459645964597,115.9421269418992L444.2657765776578,115.62380324359603L442.7762276227623,115.97395931172952L440.8804380438044,116.86526566697836L438.5784078407841,116.22861827037204L436.68261826182624,114.79616162800781L434.8545354535454,114.25501134089244L433.63581358135815,112.47239863039471L432.21397139713974,109.95764141379972L431.1983698369837,110.27596511210288L430.04735473547356,109.63931771549656L429.3025802580258,110.40329459142416L428.2869786978698,109.38465875685404L428.2869786978698,108.39785529211424L427.6776177617762,108.39785529211424L428.0161516151615,107.02906338941062L427.00055005500553,105.5966067470464L424.6985198519852,104.57797091247625L423.41209120912094,102.79535820197853L423.8183318331833,101.33106918978399L424.7662266226623,100.66258942334733L424.63081308130813,99.58028884911658L423.41209120912094,99.00730619217089L422.19336933693376,96.77904030404875L421.17776777677767,95.25108655219357L421.51630163016307,94.67810389524787L420.9746474647465,92.51350274678637L422.2610761076108,91.97235245967096L422.53190319031904,92.70449696576824L423.479797979798,93.56397095118682L424.7662266226623,93.81862990982933L425.44329432943294,93.75496517016869L427.6776177617762,92.35434089763478L428.3546854685469,92.22701141831351L428.9640464046405,92.7681617054289L428.2869786978698,93.72313280033839L429.43799379937997,94.7099362650782L429.91194119411944,94.61443915558722L430.52130213021303,95.98323105829083L432.2816781678168,96.39705186608495L433.63581358135815,97.32019059116412L436.2763776377638,97.63851428946728L439.25547554755474,97.16102874201255Z"\n                          class="datamaps-subunit IRN"></path>\n                    <path d="M429.3025802580258,110.40329459142416L428.2192719271927,110.30779748193322L426.93284328432844,110.14863563278163L425.57870787078707,111.93124834327932L422.0579557955796,111.80391886395809L416.7768276827683,108.0158668541504L414.00085008500855,106.71073969110745L411.6988198819882,106.2014217738224L410.95404540454047,103.90949114603961L415.0841584158416,101.93588421656L415.82893289328933,99.67578595860753L415.6258125812582,98.30699405590393L416.70912091209124,97.8295085084492L417.6570157015702,96.65171082472747L418.469496949695,96.36521949625465L420.6361136113611,96.61987845489718L421.3131813181318,97.09736400235191L422.19336933693376,96.77904030404875L423.41209120912094,99.00730619217089L424.63081308130813,99.58028884911658L424.7662266226623,100.66258942334733L423.8183318331833,101.33106918978399L423.41209120912094,102.79535820197853L424.6985198519852,104.57797091247625L427.00055005500553,105.5966067470464L428.0161516151615,107.02906338941062L427.6776177617762,108.39785529211424L428.2869786978698,108.39785529211424L428.2869786978698,109.38465875685404Z"\n                          class="datamaps-subunit IRQ"></path>\n                    <path d="M310.74802480248024,41.67720812777111L310.27407740774083,42.918670551153454L312.37298729872987,44.19196534436615L309.93554355435543,45.6244219867304L304.51900190019,46.92954914977334L302.8940394039404,47.2478728480765L300.45659565956595,46.99321388943396L295.1754675467547,46.38839886265798L297.0712571257126,45.56075724706973L292.9411441144115,44.63761852199053L296.25877587758777,44.25563008402675L296.1910691069107,43.71447979691138L292.2640764076408,43.26882661928694L293.5505050505051,42.059196565734936L296.39418941894195,41.7727052372621L299.3055805580558,43.046000030474744L302.14926492649266,42.027364195904596L304.51900190019,42.56851448301998L307.5658065806581,41.54987864844988Z"\n                          class="datamaps-subunit ISL"></path>\n                    <path d="M405.1989698969897,105.15095356942196L404.8604360436044,105.75576859619798L404.1833683368337,105.50110963755543L403.7771277127713,106.74257206093777L404.25107510751076,106.96539864975L403.7771277127713,107.22005760839252L403.7094209420942,107.69754315584726L404.5896089608961,107.44288419720473L404.5896089608961,108.17502870330202L403.64171417141716,111.19910383718207L402.4229922992299,107.95220211448981L402.96464646464653,107.3473870877138L402.82923292329235,107.22005760839252L403.37088708870886,106.36058362297399L403.7094209420942,104.92812698060975L403.98024802480245,104.45064143315498L404.04795479547954,104.45064143315498L404.65731573157314,104.45064143315498L404.8604360436044,104.10048536502151L405.3343834383439,104.10048536502151L405.4020902090209,104.86446224094911L405.13126312631266,105.15095356942196Z"\n                          class="datamaps-subunit ISR"></path>\n                    <path d="M367.2154715471547,94.77360100473881L366.53840384038403,96.23789001693338L366.80923092309234,96.84270504370939L366.4029902990299,97.79767613861885L364.9811481148115,97.09736400235191L364.03325332533257,96.8745374135397L361.3926892689269,95.91956631863022L361.66351635163517,94.96459522372072L363.83013301330135,95.15558944270263L365.7259225922592,94.93276285389041ZM355.2990799079908,89.17110391460314L356.45009500950096,90.50806344747643L356.1792679267927,92.9909882942411L355.2990799079908,92.86365881491983L354.5543054305431,93.50030621152617L353.8772377237724,92.9909882942411L353.74182418241827,90.73089003628864L353.33558355835584,89.6485894620579L354.35118511851186,89.74408657154883ZM363.9655465546555,79.20757215771413L363.7624262426243,80.13071088279327L364.2363736373637,80.92652012855119L362.7468246824683,80.6718611699087L361.1895689568957,81.308508566515L361.25727572757273,82.26347966142448L361.0541554155416,82.80462994853985L361.66351635163517,83.75960104344934L363.4238923892389,84.68273976852853L364.3717871787179,86.24252589021404L366.470697069707,87.77047964206922L367.96024602460244,87.77047964206922L368.4341934193419,88.18430044986333L367.8925392539254,88.53445651799682L369.58520852085206,89.23476865426377L370.93934393439343,89.80775131120947L372.56430643064306,90.76272240611895L372.7674267426743,91.11287847425243L372.42889288928893,91.81319061051938L371.34558455845587,90.92188425527056L369.7206220622062,90.60356055696737L368.90814081408143,91.84502298034973L370.26227622762275,92.51350274678637L370.0591559155916,93.50030621152617L369.31438143814387,93.62763569084743L368.2987798779878,95.21925418236324L367.48629862986303,95.37841603151482L367.48629862986303,94.80543337456913L367.8925392539254,93.786797539999L368.2987798779878,93.4048091020352L367.55400540054006,92.29067615797416L367.0123512351235,91.36753743289496L366.19986998699875,91.11287847425243L365.6582158215822,90.31706922849453L364.43949394939494,89.96691316036106L363.62701270127013,89.20293628443346L362.2051705170517,89.07560680511219L360.7833283328333,88.24796518952395L359.0229522952296,87.00650276614164L357.73652365236524,85.92420219191088L357.19486948694873,84.07792474175255L356.24697469746974,83.85509815294033L354.68971897189715,83.21845075633397L353.8772377237724,83.4731097149765L352.7939293929393,84.36441607022537L351.9814481448145,84.49174554954664L352.1845684568457,83.69593630378871L351.1689668966897,83.44127734514618L350.69501950195024,81.97698833295166L351.37208720872087,81.40400567600595L350.7627262726273,80.70369353973898L350.8981398139814,80.1625432526236L351.7106210621062,80.5763640604177L352.5908090809081,80.48086695092677L353.60641064106414,79.84421955432045L353.94494449444943,80.1625432526236L354.8928392839284,80.098878512963L355.2990799079908,79.3349016370354L356.6532153215322,79.55772822584761L357.465696569657,79.23940452754445L357.66881688168814,78.47542765161687L358.75212521252126,78.76191898008969L359.0229522952296,78.37993054212588L360.85103510351036,78.06160684382272L361.25727572757273,78.73008661025936Z"\n                          class="datamaps-subunit ITA"></path>\n                    <path d="M192.1257625762576,131.89014422688768L193.41219121912192,132.04930607603927L194.3600860086009,132.526791623494L194.6986198619862,133.03610954077908L193.41219121912192,133.06794191060942L192.8028302830283,133.38626560891257L191.78722872287227,133.06794191060942L190.7039203920392,132.39946214417276L190.9070407040704,131.95380896654834L191.7195219521952,131.82647948722706Z"\n                          class="datamaps-subunit JAM"></path>\n                    <path d="M404.8604360436044,105.75576859619798L405.1989698969897,105.15095356942196L407.2978797879788,105.91493044534955L410.95404540454047,103.90949114603961L411.6988198819882,106.2014217738224L411.3602860286029,106.45608073246493L407.56870687068704,107.41105182737441L409.46449644964497,109.28916164736307L408.8551355135513,109.60748534566625L408.51660166016603,110.24413274227257L407.0947594759476,110.49879170091509L406.62081208120816,111.16727146735175L405.8083308330833,111.77208649412776L403.7094209420942,111.45376279582459L403.64171417141716,111.19910383718207L404.5896089608961,108.17502870330202L404.5896089608961,107.44288419720473L404.8604360436044,106.90173391008935Z"\n                          class="datamaps-subunit JOR"></path>\n                    <path d="M591.1894689468947,102.44520213384506L591.460296029603,103.08184953045138L590.3769876987699,104.22781484434277L589.6322132213221,103.62299981756675L588.6166116611662,104.0686529951912L588.1426642664267,105.15095356942196L586.9239423942395,104.6416356521369L586.9239423942395,103.75032929688803L587.9395439543955,102.60436398299665L589.0228522852285,102.82719057180886L589.8353335333534,102.03138132605093ZM603.1058605860586,96.81087267387906L602.428792879288,98.30699405590393L602.6996199619962,99.26196515081342L601.7517251725174,100.5989246836867L599.38198819882,101.45839866910526L596.0643564356435,101.58572814842654L593.3560856085609,103.71849692705771L592.0696569656966,103.01818479079074L592.0019501950195,101.61756051825685L588.7520252025203,102.03138132605093L586.517701770177,102.8908553114695L584.3510851085109,102.95452005113015L586.2468746874688,104.32331195383374L584.9604460446044,107.53838130669567L583.7417241724172,108.30235818262327L582.8615361536154,107.57021367652601L583.3354835483549,105.88309807551923L582.1167616761677,105.34194778840384L581.3719871987199,104.03682062536089L583.1323632363237,103.46383796841518L584.1479647964796,102.28604028469348L586.0437543754375,101.33106918978399L587.3978897889789,100.02594202674103L591.1217621762177,99.48479173962565L593.1529652965296,99.86678017758945L595.1164616461647,96.52438134540623L596.4028902890288,97.41568770065507L599.1111611161116,95.53757788066642L600.1944694469446,94.80543337456913L601.4131913191319,92.51350274678637L601.0746574657466,90.38073396815514L601.8194319431943,89.20293628443346L603.8506350635064,88.85278021629998L604.8662366236624,91.46303454238593L604.7985298529853,92.9909882942411L603.1058605860586,94.86909811422977ZM608.6578157815782,83.60043919429779L609.9442444244424,83.98242763226156L611.2983798379837,83.18661838650368L611.7046204620463,85.31938716513484L608.9286428642865,85.82870508241994L607.2359735973598,87.70681490240858L604.3245824582458,86.4016877393656L603.3089808980899,88.47079177833616L601.2100710071009,88.5026241481665L600.9392439243925,86.62451432817781L601.8871387138714,85.1602253159833L603.8506350635064,85.06472820649235L604.3922892289229,82.45447388040637L605.0016501650166,80.99018486821184L607.1682668266828,82.96379179769147Z"\n                          class="datamaps-subunit JPN"></path>\n                    <path d="M471.4161916191619,87.19749698512351L470.40059005900594,87.51582068342671L467.89543954395447,88.85278021629998L467.0829582958296,90.18973974917327L466.3381838183819,90.18973974917327L465.86423642364235,89.2984333939244L463.4267926792679,89.23476865426377L463.08825882588263,87.70681490240858L462.14036403640364,87.70681490240858L462.27577757775776,85.7968727125896L460.0414541454146,84.42808080988598L456.7915291529153,84.58724265903759L454.6249124912492,84.84190161768014L452.79682968296834,83.15478601667334L451.30728072807284,82.45447388040637L448.3958895889589,81.08568197770279L447.98964896489656,80.92652012855119L443.1824682468247,82.04065307261227L443.25017501750176,88.98010969562124L442.3022802280228,89.07560680511219L440.94814481448145,87.61131779291765L439.72942294229426,87.07016750580227L437.5628062806281,87.45215594376606L436.75032503250327,88.08880334037238L436.61491149114914,87.64315016274796L437.08885888588856,86.84734091699003L436.75032503250327,86.17886115055337L434.5837083708371,85.54221375394707L433.70352035203524,83.85509815294033L432.6879187918792,83.37761260548557L432.6202120212021,82.77279757870953L434.44829482948296,82.96379179769147L434.51600160016005,81.56316752515751L436.0732573257326,81.27667619668469L437.7659265926593,81.56316752515751L438.10446044604464,79.71689007499917L437.7659265926593,78.57092476110782L435.87013701370137,78.63458950076843L434.2451745174518,78.18893632314398L432.07855785578556,79.01657793873224L430.3181818181818,79.39856637669601L429.37028702870293,79.11207504822319L429.5734073407341,78.12527158348337L428.3546854685469,76.88380916010102L427.00055005500553,76.94747389976163L425.3755875587559,75.674179106549L426.458895889589,74.24172246418476L425.9172417241724,73.85973402622099L427.4067906790679,71.79062998725038L429.37028702870293,72.87293056148118L429.5734073407341,71.50413865877756L433.500400040004,69.46686698963734L436.4117911791179,69.40320224997667L440.541904190419,70.70832941301964L442.7762276227623,71.47230628894724L444.8074307430743,70.67649704318936L447.7865286528653,70.64466467335903L450.1562656265627,71.5996357682685L450.6979197919792,71.05848548115313L453.33848384838484,71.12215022081374L453.8124312431243,70.23084386556492L450.7656265626563,68.95754907235224L452.5937093709371,68.0344103472731L452.2551755175518,67.525092429988L454.0155515551555,67.04760688253329L452.66141614161415,65.74247971949028L453.54160416041606,65.10583232288396L460.58310831083105,64.43735255644731L461.463296329633,63.99169937882287L466.20277027702775,63.29138724255594L467.89543954395447,62.52741036662836L471.2807780778078,62.90939880459213L471.8901390139014,64.85117336424146L473.8536353635364,64.40552018661703L476.22337233723374,65.04216758322335L476.08795879587956,66.0608034177935L477.91604160416045,65.9653063083025L482.5878087808781,64.18269359780481L481.91074107410736,64.7875086245808L484.28047804780476,66.25179763677536L488.47829782978295,71.0266531113228L489.49389938993903,70.03984964658298L492.1344634463446,71.12215022081374L494.7750275027503,70.61283230352869L495.8583358335834,70.96298837166218L496.73852385238524,72.04528894589293L498.0926592659266,72.42727738385676L498.8374337433744,73.22308662961463L501.2748774877489,72.96842767097213L502.2904790479048,74.11439298486349L500.86863686368633,75.35585540824584L499.3113811381138,75.54684962722772L499.1759675967597,77.4249594472164L498.1603660366037,78.28443343263493L494.43649364936493,77.6477860360286L493.08235823582356,81.02201723804214L492.1344634463446,81.43583804583629L488.41059105910597,82.19981492176387L490.1032603260326,85.47854901428646L488.8168316831683,85.95603456174116L488.95224522452247,87.03833513597193L487.8012301230124,86.75184380749909L486.8533353335333,86.08336404106244L484.00965096509657,85.89236982208055L480.8951395139514,85.82870508241994L480.21807180718076,86.01969930140183L477.5775077507751,85.25572242547423L476.494199419942,85.637710863438L476.22337233723374,86.75184380749909L473.1088608860886,86.08336404106244L471.8901390139014,86.36985536953532Z"\n                          class="datamaps-subunit KAZ"></path>\n                    <path d="M416.23517351735177,169.8343290646248L414.8810381038104,170.5983059405524L414.4070907090709,171.36228281648L413.7300230023003,171.48961229580124L413.45919591959193,172.82657182867453L412.84983498349834,173.59054870460213L412.51130113011305,174.83201112798446L411.6988198819882,175.4686585245908L408.9905490549055,173.59054870460213L408.92284228422847,172.47641576054104L402.0844584458446,168.6565313809031L401.7459245924593,168.4655371619212L401.7459245924593,166.46009786261126L402.28757875787585,165.6961209866837L403.23547354735473,164.45465856330134L403.9125412541254,163.08586666059773L403.03235323532357,160.92126551213624L402.82923292329235,159.96629441722672L401.94904490449045,158.66116725418377L403.1000600060006,157.54703431012268L404.3864886488649,156.30557188674035L405.3343834383439,156.62389558504353L405.3343834383439,157.67436378944396L406.01145114511456,158.31101118605028L407.2978797879788,158.31101118605028L409.6676167616762,159.9026296775661L410.2769776977698,159.9026296775661L410.7509250925093,159.87079730773578L411.1571657165716,160.093623896548L412.37588758875887,160.22095337586924L412.91754175417543,159.45697649994165L414.6779177917792,158.66116725418377L415.4226922692269,159.2978146507901L416.70912091209124,159.2978146507901L415.0841584158416,161.43058342942126L415.0841584158416,168.2745429429393Z"\n                          class="datamaps-subunit KEN"></path>\n                    <path d="M471.4161916191619,87.19749698512351L471.8901390139014,86.36985536953532L473.1088608860886,86.08336404106244L476.22337233723374,86.75184380749909L476.494199419942,85.637710863438L477.5775077507751,85.25572242547423L480.21807180718076,86.01969930140183L480.8951395139514,85.82870508241994L484.00965096509657,85.89236982208055L486.8533353335333,86.08336404106244L487.8012301230124,86.75184380749909L488.95224522452247,87.03833513597193L488.6814181418142,87.45215594376606L485.7023202320232,88.47079177833616L485.02525252525254,89.20293628443346L482.65551555155525,89.42576287324567L481.91074107410736,90.63539292679769L479.9472447244725,90.38073396815514L478.5931093109311,90.76272240611895L476.83273327332734,91.6540287613678L477.10356035603564,92.09968193899225L476.5619061906191,92.51350274678637L472.9734473447345,92.79999407525919L470.6714171417142,92.19517904848318L468.64021402140213,92.32250852780446L468.84333433343335,91.24020795357372L470.8745374537454,91.55853165187688L471.5516051605161,90.98554899493116L472.9734473447345,91.17654321391306L475.41089108910893,89.80775131120947L473.17656765676566,88.82094784646966L471.82243224322434,89.2984333939244L470.40059005900594,88.59812125765745L472.02555255525556,87.3566588342751Z"\n                          class="datamaps-subunit KGZ"></path>\n                    <path d="M530.9304430443044,143.76361817359572L530.4564956495649,141.47168754581293L531.6752175217522,139.91190142412742L534.1126612661266,139.56174535599393L535.8730373037304,139.8164043146365L537.430293029303,140.54854882073374L538.2427742774278,139.2752540275211L539.9354435443545,139.94373379395773L540.3416841684169,141.21702858717038L540.1385638563856,143.47712684512285L536.9563456345635,144.90958348748708L537.8365336533653,146.05554880137848L535.8053305330533,146.18287828069975L534.1803680368037,146.94685515662735L532.6231123112311,146.6603638281545L531.8783378337835,145.70539273324502Z"\n                          class="datamaps-subunit KHM"></path>\n                    <path d="M579.3407840784079,94.04145649864155L580.9657465746575,96.26972238676369L581.439693969397,97.4793524403157L581.439693969397,99.64395358877722L580.7626262626263,100.69442179317767L579.0699569956996,101.04457786131114L577.5804080408041,101.84038710706906L575.8877387738775,101.99954895622064L575.6846184618462,100.98091312165053L576.0231523152316,99.54845647928629L575.1429642964297,97.60668191963698L576.564806480648,97.28835822133382L575.2783778377839,95.66490735998767L575.4137913791379,95.50574551083609L576.2262726272627,95.56941025049673L576.9710471047105,94.7099362650782L578.325182518252,94.64627152541756L579.0699569956996,94.51894204609629Z"\n                          class="datamaps-subunit KOR"></path>\n                    <path d="M376.6944194419442,87.9614738610511L376.6267126712671,87.26116172478416L376.15276527652765,87.07016750580227L375.7465246524652,86.5608495885172L376.0850585058506,86.1470287807231L376.5590059005901,86.01969930140183L376.82983298329833,85.38305190479551L377.1683668366837,85.28755479530457L377.4391939193919,85.54221375394707L377.7777277727773,85.66954323326834L377.9808480848085,85.98786693157149L378.3193819381938,86.05153167123215L378.65791579157917,86.4016877393656L378.9287428742874,86.4016877393656L378.7256225622562,86.84734091699003L378.52250225022505,87.07016750580227L378.5902090209021,87.22932935495385L378.18396839683965,87.29299409461449L377.03295329532955,87.57948542308732L376.96524652465246,87.9614738610511Z"\n                          class="datamaps-subunit -99"></path>\n                    <path d="M428.2192719271927,110.30779748193322L428.6255125512551,111.13543909752144L428.42239223922394,111.54925990531554L429.03175317531753,112.98171654767978L427.74532453245325,113.01354891751011L427.2713771377138,112.12224256226125L425.57870787078707,111.93124834327932L426.93284328432844,110.14863563278163Z"\n                          class="datamaps-subunit KWT"></path>\n                    <path d="M535.8730373037304,139.8164043146365L536.4823982398241,138.98876269904827L536.550105010501,137.39714420753245L535.0605560556055,135.74186097635598L534.9251425142514,133.8955835261976L533.503300330033,132.36762977434245L532.0814581458146,132.2403002950212L531.6752175217522,132.8769476916275L530.5919091909191,132.94061243128814L530.0502550255026,132.622288732985L528.0190519051905,133.73642167704605L528.0190519051905,132.04930607603927L528.49299929993,130.07569914655966L527.2065706570658,129.98020203706872L527.0711571157116,128.83423672317733L526.2586758675868,128.26125406623163L526.6649164916491,127.59277429979498L528.2898789878989,126.35131187641267L528.425292529253,126.79696505403709L529.440894089409,126.86062979369773L529.1700670067007,124.6960286452362L530.1179617961797,124.40953731676335L531.2689768976898,125.90565869878823L532.0814581458146,127.62460666962531L534.3834883488349,127.62460666962531L535.1282628262827,129.27988990080175L533.9095409540955,129.7573754482565L533.3678867886788,130.42585521469314L535.6699169916992,131.57182052858454L537.2271727172717,133.80008641670668L538.3781878187818,135.45536964788312L539.8000300030003,136.7604968109261L540.2739773977398,138.06562397396908L539.9354435443545,139.94373379395773L538.2427742774278,139.2752540275211L537.430293029303,140.54854882073374Z"\n                          class="datamaps-subunit LAO"></path>\n                    <path d="M405.3343834383439,104.10048536502151L404.8604360436044,104.10048536502151L404.65731573157314,104.45064143315498L404.04795479547954,104.45064143315498L404.7250225022502,102.8908553114695L405.67291729172916,101.58572814842654L405.67291729172916,101.5220634087659L406.55310531053107,101.61756051825685L406.8239323932393,102.34970502435412L405.8083308330833,103.05001716062108Z"\n                          class="datamaps-subunit LBN"></path>\n                    <path d="M323.47689768976903,158.47017303520187L323.0029502950295,158.47017303520187L321.03945394539454,157.578866679953L319.3467846784679,156.1464100375888L317.72182218221826,155.12777420301865L316.503100310031,153.91814414946663L316.90934093409345,153.31332912269062L317.0447544754476,152.77217883557523L317.85723572357233,151.7217106311748L318.7374237423743,150.86223664575627L319.1436643664366,150.83040427592593L319.68531853185317,150.60757768711372L320.4300930093009,151.75354300100508L320.29467946794676,152.5175198769327L320.7009200920092,152.8995083148965L321.24257425742576,152.93134068472682L321.58110811081104,152.16736380879922L322.1227622762276,152.19919617862953L322.05505550555057,152.77217883557523L322.2581758175818,153.6634851908241L321.85193519351935,154.49112680641232L322.3935893589359,155.0322770935277L322.9352435243525,155.15960657284896L323.7477247724773,155.92358344877655L323.8154315431543,156.68756032470415L323.61231123112316,156.91038691351636Z"\n                          class="datamaps-subunit LBR"></path>\n                    <path d="M365.92904290429044,123.67739281066606L364.57490749074907,124.37770494693305L363.55930593059304,123.32723674253259L360.5802080208021,122.53142749677468L359.7677267726773,121.35362981305299L358.27817781778174,120.46232345780413L357.3979897989799,120.81247952593762L356.72092209220926,119.76201132153717L356.6532153215322,118.96620207577925L355.502200220022,117.59741017307564L356.24697469746974,116.80160092731775L356.1115611561156,115.62380324359603L356.31468146814683,114.60516740902592L356.1792679267927,113.74569342360738L356.517801780178,112.21773967175218L356.45009500950096,111.32643331650333L355.84073407340736,109.67115008532687L356.72092209220926,109.22549690770244L356.9240424042404,108.42968766194454L356.72092209220926,107.66571078601694L358.00735073507354,106.93356627991966L358.54900490049005,106.32875125314365L359.496899689969,105.78760096602828L359.63231323132317,104.35514432366404L361.7989298929893,104.99179172027038L362.61141114111416,104.83262987111877L364.1686668666867,105.15095356942196L366.67381738173816,105.97859518501019L367.55400540054006,107.66571078601694L369.2466746674668,108.0158668541504L371.88723872387243,108.81167609990834L373.91844184418443,109.73481482498751L374.79862986298633,109.25732927753276L375.6788178817882,108.39785529211424L375.2725772577258,106.96539864975L375.8819381938194,106.0422599246708L377.23607360736077,105.15095356942196L378.52250225022505,104.89629461077942L381.0276527652765,105.27828304874322L381.7047204720472,106.13775703416178L382.3817881788179,106.13775703416178L382.9911491149115,106.45608073246493L384.8869386938694,106.67890732127714L385.2931793179318,107.28372234805315L384.6161116111611,108.20686107313233L384.9546454645465,109.00267031889024L384.480698069807,110.18046800261195L385.02235223522354,111.6765893846368L385.02235223522354,118.36138704900324L385.02235223522354,125.3008436720122L385.02235223522354,129.05706331198957L382.85573557355735,129.05706331198957L382.85573557355735,129.85287255774745L375.34028402840283,126.25581476692172L367.8248324832483,122.65875697609596Z"\n                          class="datamaps-subunit LBY"></path>\n                    <path d="M491.7959295929594,152.5175198769327L491.52510251025103,154.49112680641232L490.7126212621263,155.00044472369737L489.08765876587654,155.4460979013218L488.2074707470747,153.9499765192969L487.86893689368935,151.24422508372004L488.7491249124913,148.18831758000965L490.03555355535553,149.2387857844101L490.9157415741574,150.5757453172834Z"\n                          class="datamaps-subunit LKA"></path>\n                    <path d="M392.47009700970096,221.11627686126445L393.14716471647165,221.68925951821015L392.537803780378,222.61239824328933L392.2669766976698,223.21721327006534L391.1836683668367,223.5037045985382L390.8451345134514,224.1085196253142L390.16806680668066,224.2995138442961L388.74622462246225,222.83522483210155L389.7618261826183,221.65742714837984L390.77742774277425,220.92528264228255L391.65761576157615,220.54329420431878Z"\n                          class="datamaps-subunit LSO"></path>\n                    <path d="M380.75682568256826,64.50101729610797L380.62141214121414,64.02353174865321L380.82453245324535,63.51421383136817L379.94434443444345,63.19589013306502L377.9808480848085,62.87756643476179L377.57460746074605,61.285947943246L379.74122412241223,60.7129652863003L382.92344234423445,60.84029476562158L384.7515251525152,60.649300546639694L385.02235223522354,61.03128898460345L386.03795379537956,61.15861846392474L387.7983298329833,62.08175718900394L388.00145014501453,62.90939880459213L386.44419441944194,63.51421383136817L386.03795379537956,64.59651440559892L384.0067506750675,65.29682654186584L382.17866786678667,65.29682654186584L381.7047204720472,64.69201151508986Z"\n                          class="datamaps-subunit LTU"></path>\n                    <path d="M349.34088408840887,72.39544501402642L349.74712471247125,72.80926582182053L349.6117111711171,73.63690743740878L349.07005700570056,73.70057217706939L348.6638163816381,73.5095779580875L348.8669366936694,72.45910975368703Z"\n                          class="datamaps-subunit LUX"></path>\n                    <path d="M377.57460746074605,61.285947943246L377.64231423142314,59.8853236707121L378.5902090209021,58.70752598699035L380.3505850585059,58.07087859038404L381.8401340134014,59.471502862917944L383.3296829682968,59.439670493087675L383.73592359235926,57.975381480893105L385.2931793179318,57.657057782589945L386.1733673367337,57.87988437140217L387.7983298329833,58.58019650766913L389.2878787878788,58.58019650766913L390.23577357735775,59.025849685293565L390.3711871187119,59.91715604054238L390.9805480548055,61.03128898460345L388.9493449344934,61.76343349070078L387.7983298329833,62.08175718900394L386.03795379537956,61.15861846392474L385.02235223522354,61.03128898460345L384.7515251525152,60.649300546639694L382.92344234423445,60.84029476562158L379.74122412241223,60.7129652863003Z"\n                          class="datamaps-subunit LVA"></path>\n                    <path d="M333.9037403740374,100.5352599440261L334.6485148514852,101.74488999757811L334.7162216221622,102.8908553114695L335.3932893289329,104.86446224094911L335.86723672367236,105.27828304874322L335.5287028702871,106.01042755484049L333.09125912591264,106.29691888331335L332.21107110711074,106.99723101958031L331.1277627762776,107.15639286873187L331.0600560056006,108.55701714126582L328.8934393439344,109.32099401719341L328.1486648664866,110.24413274227257L326.5914091409141,110.75345065955764L324.6956195619562,111.03994198803046L321.7165216521652,112.4405662605644L321.7165216521652,114.66883214868653L321.4456945694569,114.66883214868653L321.4456945694569,115.65563561342634L320.29467946794676,115.71930035308698L319.68531853185317,116.16495353071141L318.8051305130513,116.16495353071141L318.12806280628064,115.91029457206889L316.57080708070805,116.10128879105078L315.96144614461446,117.56557780324533L315.35208520852086,117.72473965239692L314.471897189719,120.08033501984033L311.8990399039904,122.11760668898057L311.2896789678968,124.6960286452362L310.477197719772,125.55550263065473L310.27407740774083,126.22398239709139L306.00855085508556,126.38314424624296L306.0762576257626,125.52367026082442L306.8210321032103,124.98251997370906L307.43039303930396,124.02754887879956L307.29497949794984,123.39090148219324L307.97204720472047,122.05394194931995L308.9876487648765,120.84431189576793L309.5970097009701,120.55782056729507L310.13866386638665,119.44368762323401L310.13866386638665,118.45688415849418L310.8157315731573,117.2790864747725L312.1021602160216,116.61060670833584L313.32088208820886,114.70066451851687L313.32088208820886,114.66883214868653L314.26877687768774,113.93668764258928L316.02915291529155,113.74569342360738L317.51870187018704,112.4405662605644L318.466596659666,111.93124834327932L320.02385238523857,110.37146222159384L319.54990499049904,108.04769922398074L320.22697269726973,106.42424836263459L320.49779977997804,105.4374448978948L321.7165216521652,104.16415010468216L323.61231123112316,103.3046761192636L325.03415341534156,102.5088668735057L326.25287528752875,100.5670923138564L326.86223622362235,99.42112699996501L328.2163716371637,99.42112699996501L329.3673867386739,100.2169362457229L331.1277627762776,100.08960676640166L333.09125912591264,100.50342757419575Z"\n                          class="datamaps-subunit MAR"></path>\n                    <path d="M388.06915691569156,75.99250280485217L388.475397539754,75.70601147637933L389.7618261826183,75.5150172573974L391.11596159615965,76.11983228417343L391.9284428442844,76.18349702383404L392.7409240924093,76.69281494111914L392.6055105510551,77.32946233772545L393.35028502850287,77.61595366619828L393.6211121112111,78.4117629119562L394.2304730473047,78.88924845941096L394.0950595059506,79.1757397878838L394.43359335933593,79.36673400686567L393.95964596459646,79.49406348618695L392.8763376337634,79.46223111635668L392.67321732173224,79.1757397878838L392.2669766976698,79.3349016370354L392.40239023902393,79.68505770516889L391.9284428442844,80.28987273194487L391.5899089908991,80.92652012855119L391.11596159615965,81.11751434753313L390.77742774277425,80.25804036211454L390.9805480548055,79.46223111635668L390.91284128412843,78.63458950076843L389.82953295329537,77.52045655670734L389.2201720172017,76.72464731094942L388.6108110811081,76.18349702383404Z"\n                          class="datamaps-subunit MDA"></path>\n                    <path d="M431.1983698369837,190.1115486465363L431.6723172317231,190.90735789229424L432.14626462646265,192.14882031567657L432.41709170917096,194.40891857362902L432.8910391039104,195.3002249288779L432.75562556255625,196.19153128412677L432.41709170917096,196.76451394107244L431.7400240024003,195.65038099701138L431.40149014901493,196.22336365395705L431.7400240024003,197.59215555666066L431.6046104610461,198.3879648024186L431.06295629562953,198.83361798004302L430.9952495249525,200.42523647155883L430.2504750475048,202.62166998985066L429.3025802580258,205.20009194610628L428.1515651565157,208.76531736710172L427.4067906790679,211.37557169318765L426.5943094309431,213.57200521147948L425.03705370537057,214.01765838910393L423.41209120912094,214.8134676348618L422.3287828782878,214.33598208740707L420.8392339233923,213.6675023209704L420.29757975797577,212.68069885623063L420.16216621662164,210.99358325522385L419.485098509851,209.497461873199L419.3496849684969,208.1605023403257L419.6882188218822,206.7917104376221L420.5684068406841,206.47338673931895L420.5684068406841,205.8367393427126L421.4485948594859,204.40428270034835L421.5840084008401,203.22648501662667L421.17776777677767,202.33517866137782L420.8392339233923,201.1255486078258L420.7038203820382,199.40660063698868L421.3131813181318,198.35613243258825L421.5840084008401,197.14650237903624L422.53190319031904,197.08283763937558L423.54750475047507,196.70084920141178L424.2922792279228,196.38252550310864L425.1047604760476,196.35069313327833L426.18806880688066,195.26839255904756L427.74532453245325,194.1224272451562L428.2869786978698,193.1674561502467L428.0161516151615,192.37164690448878L428.8286328632864,192.594473493301L429.84423442344234,191.28934633025804L429.91194119411944,190.14338101636665L430.52130213021303,189.31573940077843Z"\n                          class="datamaps-subunit MDG"></path>\n                    <path d="M155.2932793279328,118.01123098086978L154.61621162116214,119.6665142120462L154.2776777677768,121.03530611474983L154.14226422642264,123.55006333134482L153.93914391439142,124.47320205642399L154.2776777677768,125.4918378909941L154.8870387038704,126.41497661607329L155.22557255725573,127.84743325843753L156.51200120012,129.24805753097144L156.91824182418242,130.33035810520218L157.66301630163017,131.2534968302814L159.62651265126513,131.76281474756644L160.43899389938994,132.55862399332435L162.06395639563954,132.017473706209L163.485798579858,131.82647948722706L164.9076407640764,131.4763234190936L166.12636263626362,131.15799972079043L167.27737773777378,130.39402284486283L167.75132513251324,129.31172227063206L167.88673867386737,127.72010377911626L168.22527252725274,127.17895349200089L169.51170117011702,126.66963557471581L171.475197519752,126.25581476692172L173.16786678667864,126.31947950658233L174.31888188818883,126.16031765743074L174.72512251225123,126.54230609539454L174.65741574157417,127.46544482047373L173.64181418141817,128.5795777645348L173.23557355735576,129.72554307842617L173.5741074107411,130.04386677672937L173.30328032803283,130.8715083923176L172.82933293329333,132.33579740451214L172.35538553855386,131.8583118570574L171.94914491449143,131.89014422688768L171.6106110611061,131.89014422688768L170.93354335433543,133.03610954077908L170.5950095009501,132.81328295196687L170.32418241824183,132.9087800614578L170.3918891889189,133.16343902010036L168.63151315131515,133.16343902010036L166.87113711371137,133.16343902010036L166.87113711371137,134.21390722450082L165.9909490949095,134.21390722450082L166.73572357235724,134.8505546211071L167.4127912791279,135.29620779873156L167.61591159115912,135.67819623669536L167.95444544454443,135.8055257160166L167.88673867386737,136.44217311262292L165.44929492949296,136.44217311262292L164.5691069106911,137.97012686447812L164.83993399339934,138.35211530244192L164.63681368136815,138.76593611023603L164.5691069106911,139.33891876718172L162.4024902490249,137.30164709804146L161.45459545954594,136.69683207126545L159.89733973397338,136.1875141539804L158.88173817381738,136.346676003132L157.39218921892189,137.04698813939893L156.44429442944295,137.23798235838086L155.09015901590158,136.7286644410958L153.6683168316832,136.3785083729623L151.90794079407942,135.51903438754377L150.486098609861,135.26437542890125L148.3871887188719,134.37306907365237L146.82993299329934,133.4817627184035L146.35598559855984,132.97244480111846L145.27267726772678,132.8769476916275L143.37688768876887,132.27213266485148L142.5644064406441,131.41265867943298L140.53320332033203,130.33035810520218L139.5853085308531,129.1525604214805L139.17906790679066,128.22942169640135L139.7884288428843,128.07025984724973L139.5853085308531,127.52910956013434L140.05925592559254,127.0197916428493L140.05925592559254,126.38314424624296L139.38218821882188,125.52367026082442L139.24677467746776,124.79152575472715L138.63741374137416,123.83655465981766L136.94474447444745,121.958444839829L135.04895489548954,120.49415582763443L134.16876687668767,119.31635814391274L132.54380438043805,118.55238126798514L132.20527052705268,118.10672809036072L132.47609760976098,116.92893040663901L131.52820282028202,116.5151095988449L130.37718771877186,115.59197087376573L129.90324032403242,114.28684371072274L128.95534553455346,114.12768186157116L127.80433043304333,113.14087839683135L126.92414241424146,112.21773967175218L126.85643564356434,111.61292464497618L125.84083408340834,110.21230037244227L125.16376637663765,108.77984373007803L125.23147314731472,108.04769922398074L123.8773377337734,107.31555471788346L123.20027002700269,107.3792194575441L122.18466846684669,106.86990154025904L121.84613461346137,107.63387841618662L122.18466846684669,108.52518477143548L122.32008200820081,109.95764141379972L122.99714971497153,110.7216182897273L124.4189918991899,112.02674545277029L124.68981898189818,112.47239863039471L124.96064606460646,112.59972810971598L125.23147314731472,113.2363755063223L125.57000700070006,113.20454313649199L125.97624762476246,114.41417319004401L126.517901790179,114.89165873749874L126.92414241424146,115.5601385039354L128.07515751575158,116.5151095988449L128.75222522252227,118.26588993951229L129.2938793879388,119.09353155510053L129.83553355335533,119.98483791034938L129.90324032403242,120.9716413750892L130.78342834283427,121.03530611474983L131.59590959095908,121.89478010016836L132.27297729772974,122.7224217157566L132.20527052705268,123.07257778389005L131.39278927892786,123.7410575503267L131.05425542554255,123.7410575503267L130.58030803080308,122.59509223643532L129.36158615861586,121.54462403203487L128.00745074507452,120.6214853069557L127.05955595559556,120.14399975950096L127.12726272627262,118.77520785679737L126.78872887288728,117.75657202222723L125.9085408540854,117.15175699545122L124.62211221122112,116.32411537986299L124.35128512851284,116.57877433850554L123.8773377337734,116.06945642122048L122.72632263226325,115.62380324359603L121.64301430143016,114.54150266936529L121.77842784278428,114.3823408202137L122.52320232023203,114.50967029953495L123.26797679767975,113.809358163268L123.33568356835684,112.94988417784947L121.84613461346137,111.61292464497618L120.76282628262828,111.0717743578608L120.0857585758576,109.92580904396941L119.34098409840982,108.68434662058706L118.52850285028501,107.18822523856221L117.71602160216023,105.46927726772512L119.88263826382641,105.34194778840384L122.25237523752372,105.11912119959163L122.11696169616962,105.50110963755543L124.8929392939294,106.42424836263459L129.2261726172617,107.7293755256776L132.95004500450048,107.7293755256776L134.43959395939595,107.7293755256776L134.43959395939595,106.96539864975L137.6895189518952,106.96539864975L138.36658665866588,107.6020460463563L139.38218821882188,108.20686107313233L140.46549654965497,109.03450268872055L141.07485748574857,110.02130615346036L141.54880488048803,111.03994198803046L142.5644064406441,111.61292464497618L144.12166216621662,112.18590730192187L145.27267726772678,110.689785919897L146.82993299329934,110.65795355006668L148.11636163616362,111.42193042599426L149.06425642564255,112.69522521920692L149.74132413241324,113.809358163268L150.82463246324633,114.89165873749874L151.2308730873087,116.19678590054174L151.77252725272527,117.08809225579058L153.26207620762077,117.6610749127363L154.61621162116214,118.07489572053038Z"\n                          class="datamaps-subunit MEX"></path>\n                    <path d="M376.6944194419442,87.9614738610511L376.96524652465246,87.9614738610511L377.03295329532955,87.57948542308732L378.18396839683965,87.29299409461449L378.5902090209021,87.22932935495385L379.1995699569957,87.10199987563257L380.07975797579763,87.07016750580227L381.0276527652765,87.67498253257827L381.16306630663064,88.91644495596061L380.82453245324535,88.98010969562124L380.48599859985995,89.33026576375474L379.470397039704,89.2666010240941L378.7256225622562,89.6804218318882L377.506900690069,89.87141605087011L376.7621262126213,89.39393050341535L376.49129912991305,88.59812125765745Z"\n                          class="datamaps-subunit MKD"></path>\n                    <path d="M315.0812581258126,139.17975691803014L315.7583258325833,138.82960084989668L316.02915291529155,137.7154679058356L316.63851385138514,137.68363553600528L317.99264926492646,138.19295345329033L319.00825082508254,137.84279738515687L319.75302530253026,137.97012686447812L320.02385238523857,137.556306056684L327.60701070107007,137.5244736868537L328.0132513251325,136.1875141539804L327.6747174717472,135.9646875651682L326.7945294529453,127.84743325843753L325.8466346634663,119.73017895170685L328.7580258025803,119.69834658187654L335.05475547554755,123.80472228998734L341.4191919191919,127.91109799809814L341.8931393139314,128.80240435334701L343.04415441544154,129.31172227063206L343.92434243424344,129.63004596893524L343.92434243424344,130.83967602248725L346.02325232523253,130.64868180350538L346.02325232523253,134.97788410042838L345.0076507650765,136.2193465238107L344.8722372237224,137.39714420753245L343.17956795679567,137.68363553600528L340.6067106710671,137.84279738515687L339.9296429642964,138.51127715159348L338.71092109210923,138.60677426108447L337.492199219922,138.60677426108447L337.0182518251825,138.22478582312067L336.0026502650265,138.51127715159348L334.24227422742274,139.2752540275211L333.9037403740374,139.8800690542971L332.4141914191419,140.70771066988533L332.14336433643365,141.21702858717038L331.39858985898593,141.59901702513417L330.45069506950693,141.34435806649165L329.97674767476747,141.7900112441161L329.7059205920592,143.09513840715906L328.1486648664866,144.62309215901425L328.2163716371637,145.25973955562057L327.74242424242425,146.08738117120882L327.81013101310134,147.16968174543956L327.0653565356536,147.4561730739124L326.5914091409141,147.67899966272464L326.3205820582058,146.8831904169667L325.7789278927893,147.07418463594863L325.44039403940394,147.0423522661183L325.1018601860186,147.61533492306398L323.6800180018002,147.58350255323364L323.13836383638363,147.29701122476084L322.8675367536754,147.4880054437427L322.3258825882589,146.91502278679704L322.3935893589359,146.37387249968162L322.1904690469047,146.1510459108694L321.7842284228423,146.34204012985134L321.85193519351935,145.7372251030753L322.2581758175818,145.22790718579026L321.4456945694569,144.46393030986266L321.24257425742576,143.92278002274728L320.8363336333633,143.5089592149532L320.4300930093009,143.47712684512285L320.02385238523857,143.73178580376538L319.4144914491449,143.98644476240793L318.87283728372836,144.400265570202L318.0603560356036,144.24110372105045L317.5864086408641,143.76361817359572L317.24787478747874,143.69995343393506L316.77392739273927,143.9546123925776L316.435393539354,143.9546123925776L316.3676867686769,143.25430025631064L316.435393539354,142.68131759936495L316.2999799979998,141.94917309326766L315.555205520552,141.43985517598261L315.21667166716674,140.35755460175184Z"\n                          class="datamaps-subunit MLI"></path>\n                    <path d="M523.3472847284729,147.99732336102778L523.1441644164416,146.59669908849384L523.7535253525352,145.1642424461296L523.0764576457647,144.05010950206855L523.2795779577957,141.98100546309797L522.4670967096711,141.0260343681885L521.8577357735774,138.76593611023603L521.519201920192,136.3785083729623L520.7067206720671,134.81872225127682L519.48799879988,135.7736933461863L517.3213821382138,137.1106528790596L516.3057805780578,136.951491029908L515.1547654765477,136.50583785228358L515.7641264126413,134.18207485467047L515.3578857885789,132.39946214417276L513.9360436043605,130.23486099571124L514.1391639163917,129.5663812292746L513.0558555855586,129.34355464046237L511.7017201720172,127.7837685187769L511.56630663066306,126.28764713675201L512.2433743374338,126.57413846522488L512.2433743374338,125.20534656252127L513.1912691269126,124.75969338489685L512.9881488148815,123.96388413913891L513.462096209621,123.32723674253259L513.529802980298,121.38546218288329L514.9516451645165,121.79928299067743L515.8318331833184,120.27132923882222L515.8995399539954,119.34819051374305L516.9151415141514,117.75657202222723L516.9151415141514,116.70610381782677L519.3525852585259,115.40097665478382L520.6390139013902,115.71930035308698L520.5036003600361,114.5733350391956L521.1806680668067,114.22317897106214L521.0452545254525,113.52286683479514L522.1285628562856,113.36370498564358L522.7379237923793,114.47783792970465L523.5504050405041,114.92349110732908L523.6181118111812,116.38778011952363L523.5504050405041,117.9157338713788L521.7900290029003,119.50735236289462L521.519201920192,121.73561825101677L523.5504050405041,121.41729455271363L523.9566456645665,123.13624252355069L525.1753675367537,123.51823096151449L524.6337133713371,125.0780170832L526.0555555555555,125.77832921946695L526.8680368036804,126.12848528760044L528.2221722172218,125.58733500048507L528.2898789878989,126.35131187641267L526.6649164916491,127.59277429979498L526.2586758675868,128.26125406623163L525.1753675367537,128.70690724385605L524.0920592059206,129.5345488594443L522.7379237923793,129.59821359910492L521.9254425442545,131.6354852682452L521.1129612961297,131.98564133637865L522.0608560856085,133.6409245675551L523.2118711871187,135.0097164702587L524.0243524352435,136.25117889364105L523.2795779577957,137.87462975498715L522.6702170217021,138.22478582312067L523.0764576457647,139.17975691803014L524.3628862886288,140.67587830005502L524.5660066006601,141.72634650445545L524.5660066006601,142.58582048987398L525.3107810781078,144.30476846071107L524.2274727472748,146.05554880137848Z"\n                          class="datamaps-subunit MMR"></path>\n                    <path d="M374.46009600960093,87.8978091213905L374.0538553855386,87.77047964206922L373.51220122012205,87.16566461529321L372.6997199719972,86.78367617732943L372.90284028402846,86.46535247902627L373.17366736673665,85.41488427462579L373.7830283028303,85.0010634668317L374.12156215621565,84.8100692478498L374.6632163216322,85.12839294615296L374.93404340434046,85.41488427462579L375.54340434043405,85.60587849360773L376.22047204720474,85.98786693157149L376.0850585058506,86.1470287807231L375.7465246524652,86.5608495885172L375.20487048704877,86.75184380749909L375.1371637163716,86.4016877393656L374.3246824682468,87.3248264644448Z"\n                          class="datamaps-subunit MNE"></path>\n                    <path d="M503.0352535253526,73.95523113571194L504.99874987498754,73.63690743740878L508.5872087208721,72.01345657606261L511.43089308930894,71.12215022081374L513.0558555855586,71.69513287775945L515.0193519351935,71.72696524758977L516.3057805780578,72.61827160283863L518.2015701570158,72.68193634249924L520.9098409840984,73.15942188995402L522.7379237923793,71.85429472691105L521.9931493149315,70.74016178284997L523.8889388938894,68.79838722320069L525.9878487848786,69.56236409912829L527.7482248224823,69.7851906879405L529.9148414841484,70.2626762353952L530.3210821082108,71.66330050792916L532.9616461646165,72.45910975368703L534.7220222022202,72.10895368555354L537.1594659465947,71.88612709674139L538.9875487548754,72.10895368555354L540.8833383338334,73.03209241063274L541.9666466646665,73.98706350554221L543.7270227022702,73.95523113571194L546.0967596759676,74.2735548340151L547.8571357135713,73.79606928656032L550.2945794579458,73.5095779580875L553.0705570557055,72.17261842521421L554.2215721572157,72.36361264419608L555.1694669466947,73.0002600408024L557.4037903790379,72.84109819165086L556.5236023602359,74.2735548340151L555.1694669466947,76.15166465400377L555.6434143414342,76.91564152993135L556.7267226722672,76.66098257128881L558.5548054805481,76.97930626959196L560.0443544354436,76.27899413332504L561.5339033903391,76.88380916010102L563.2265726572658,78.18893632314398L563.0234523452345,78.85741608958064L561.5339033903391,78.63458950076843L558.8256325632564,78.88924845941096L557.471497149715,79.43039874652634L556.1173617361736,80.6718611699087L553.2736773677368,81.40400567600595L551.3778877887789,82.39080914074576L549.414391439144,82.00882070278193L548.3987898789879,81.84965885363039L547.3831883188318,83.0592889071824L547.9925492549255,83.79143341327966L548.3310831083108,84.3962484400557L546.9769476947695,85.03289583666202L545.6228122812281,86.05153167123215L543.456195619562,86.72001143766882L540.6125112511252,86.78367617732943L537.5657065706571,87.42032357393573L535.399089908991,88.43895940850587L534.5866086608661,87.86597675156017L532.2845784578458,87.86597675156017L529.5086008600861,86.72001143766882L527.6128112811282,86.43352010919592L525.1753675367537,86.68817906783848L521.2483748374838,86.27435826004437L519.2171717171717,86.30619062987465L518.0661566156616,85.19205768581357L517.2536753675367,83.4731097149765L516.0349534953496,83.25028312616429L513.8006300630063,82.0724854424426L511.2954795479548,81.81782648380006L509.06115611561165,81.4995027854969L508.3840884088409,80.70369353973898L509.06115611561165,78.47542765161687L507.7747274727473,76.97930626959196L505.06645664566463,76.27899413332504L503.50920092009204,75.2603582987549Z"\n                          class="datamaps-subunit MNG"></path>\n                    <path d="M402.96464646464653,188.32893593603862L404.3864886488649,188.16977408688703L406.6885188518852,188.71092437400242L407.1624662466247,188.45626541535987L408.448894889489,188.42443304552955L409.1259625962596,187.85145038858386L410.2769776977698,187.88328275841417L412.30818081808184,187.15113825231688L413.79772977297733,186.06883767808614L414.1362636263626,186.89647929367436L414.0685568556856,188.77458911366304L414.27167716771675,190.4298723448395L414.3393839383939,193.3584503692286L414.6779177917792,194.28158909430775L414.1362636263626,195.65038099701138L413.3914891489149,196.95550816005434L412.17276727672765,198.10147347394573L410.480098009801,198.83361798004302L408.3811881188119,199.72492433529186L406.2145714571457,201.7621960044321L405.53750375037504,202.11235207256559L404.1833683368337,203.44931160543888L403.43859385938595,203.863132413233L403.23547354735473,205.20009194610628L404.1833683368337,206.6325485884705L404.521902190219,207.7466815325316L404.521902190219,208.28783181964695L404.8604360436044,208.19233471015602L404.7927292729273,210.03861216031436L404.521902190219,210.92991851556323L404.92814281428144,211.24824221386638L404.65731573157314,212.04405145962428L403.9125412541254,212.71253122606095L402.3552855285529,213.34917862266727L400.0532553255326,214.3678144572374L399.2407740774077,215.03629422367402L399.443894389439,215.83210346943196L399.91784178417845,215.9594329487532L399.71472147214723,216.946236413493L398.2928792879288,216.946236413493L398.1574657465747,216.1185947979048L397.8866386638664,215.25912081248623L397.6835183518352,214.5906410460496L398.0220522052205,212.48970463724874L397.54810481048105,211.15274510437544L396.66791679167915,208.51065840845916L398.6314131413141,206.37788962982796L399.1053605360536,205.00909772712438L399.443894389439,204.8499358779728L399.64701470147014,203.7358029339117L399.30848084808486,203.19465264679633L399.3761876187619,201.79402837426244L399.78242824282427,200.48890121121946L399.78242824282427,198.10147347394573L398.7668266826683,197.49665844716972L397.8866386638664,197.36932896784845L397.480398039804,196.8918434203937L396.6002100210021,196.5098549824299L395.0429542954296,196.54168735226023L394.9075407540754,195.84137521599325L394.7721272127213,194.50441568312L400.459495949595,192.94462956143448L401.5428042804281,193.83593591668335L402.0844584458446,193.67677406753174L402.82923292329235,194.1542596149865L402.89693969396944,194.88640412108376L402.490699069907,195.77771047633263L402.62611261126114,197.11467000920592L403.9125412541254,198.26063532309732L404.454195419542,196.95550816005434L405.2666766676668,196.57351972209057L405.13126312631266,194.1542596149865L404.31878187818785,192.7854677122829L403.64171417141716,192.18065268550689L402.96464646464653,192.2124850553372L402.490699069907,189.76139257840285Z"\n                          class="datamaps-subunit MOZ"></path>\n                    <path d="M315.0812581258126,139.17975691803014L313.8625362536254,137.87462975498715L312.7115211521152,136.50583785228358L311.492799279928,135.9965199349985L310.6126112611261,135.45536964788312L309.529302930293,135.48720201771346L308.64911491149115,135.86919045567726L307.7012201220122,135.71002860652564L307.02415241524153,136.31484363330165L306.8887388738874,135.29620779873156L307.43039303930396,134.37306907365237L307.6335133513351,132.622288732985L307.43039303930396,130.74417891299632L307.22727272727275,129.82104018791716L307.3626862686269,128.86606909300764L306.8887388738874,127.97476273775878L305.9408440844084,127.17895349200089L306.34708470847085,126.54230609539454L313.65941594159415,126.57413846522488L313.32088208820886,123.83655465981766L313.7948294829483,122.88158356490817L315.555205520552,122.7224217157566L315.487498749875,117.88390150154851L321.6488148814882,118.01123098086978L321.6488148814882,115.1463176961413L328.7580258025803,119.69834658187654L325.8466346634663,119.73017895170685L326.7945294529453,127.84743325843753L327.6747174717472,135.9646875651682L328.0132513251325,136.1875141539804L327.60701070107007,137.5244736868537L320.02385238523857,137.556306056684L319.75302530253026,137.97012686447812L319.00825082508254,137.84279738515687L317.99264926492646,138.19295345329033L316.63851385138514,137.68363553600528L316.02915291529155,137.7154679058356L315.7583258325833,138.82960084989668Z"\n                          class="datamaps-subunit MRT"></path>\n                    <path d="M402.96464646464653,188.32893593603862L402.490699069907,189.76139257840285L402.96464646464653,192.2124850553372L403.64171417141716,192.18065268550689L404.31878187818785,192.7854677122829L405.13126312631266,194.1542596149865L405.2666766676668,196.57351972209057L404.454195419542,196.95550816005434L403.9125412541254,198.26063532309732L402.62611261126114,197.11467000920592L402.490699069907,195.77771047633263L402.89693969396944,194.88640412108376L402.82923292329235,194.1542596149865L402.0844584458446,193.67677406753174L401.5428042804281,193.83593591668335L400.459495949595,192.94462956143448L399.443894389439,192.46714401397972L400.0532553255326,190.71636367331232L400.66261626162617,190.0478839068757L400.25637563756374,188.48809778519018L400.66261626162617,186.960144033335L401.00115011501146,186.45082611604994L400.52720272027204,184.85920762453412L399.5793079307931,184.0315660089459L401.475097509751,184.3817220770794L401.8136313631363,184.89103999436443L402.490699069907,185.7823463496133Z"\n                          class="datamaps-subunit MWI"></path>\n                    <path d="M530.0502550255026,154.96861235386706L530.5242024202421,155.12777420301865L531.6075107510751,156.27373951691004L532.4199919991999,157.54703431012268L532.5554055405541,158.788496733505L532.3522852285229,159.64797071892357L532.4876987698769,160.3164504853602L532.6231123112311,161.43058342942126L533.3001800180018,161.93990134670634L534.0449544954496,163.5951845778828L533.9772477247725,164.23183197448913L532.6908190819082,164.35916145381037L530.8627362736274,162.95853718127648L528.6961196119612,161.4624157992516L528.425292529253,160.5074447043421L527.3419841984199,159.26598228095978L527.0711571157116,157.70619615927427L526.3940894089409,156.68756032470415L526.6649164916491,155.31876842200055L526.1909690969096,154.52295917624264L526.5295029502951,154.17280310810915L528.0867586758676,155.00044472369737L528.2221722172218,155.95541581860687L529.440894089409,155.73258922979466ZM559.7058205820582,158.88399384299598L558.0808580858086,158.5656701446928L555.9142414241423,158.5656701446928L555.2371737173718,160.698438923324L554.492399239924,161.36691868976067L553.5445044504451,163.9771730158466L551.9872487248724,164.39099382364068L550.2268726872687,163.84984353652533L549.3466846684669,164.0090053856769L548.2633763376339,164.9639764805864L547.0446544654466,164.83664700126513L545.8259325932594,165.2186354392289L544.5395039503951,164.13633486499816L544.2009700970098,162.89487244161583L545.6228122812281,163.53151983822215L547.0446544654466,163.18136377008867L547.450895089509,161.58974527857285L548.2633763376339,161.2395892104394L550.4976997699771,160.82576840264525L551.8518351835183,159.3296470206204L552.7997299729973,158.1518493368987L553.6122112211222,159.1386528016385L554.0184518451846,158.50200540503218L554.8986398639864,158.5338377748625L555.0340534053405,157.35604009114078L555.1017601760177,156.4329013660616L556.5913091309131,155.12777420301865L557.5392039203921,153.63165282099376L558.2839783978399,153.63165282099376L559.2318731873188,154.58662391590326L559.2995799579958,155.41426553149148L560.5860086008602,155.92358344877655L562.1432643264327,156.49656610572225L562.0078507850786,157.22871061181954L560.7214221422142,157.32420772131047L561.0599559955997,158.24734644638963Z"\n                          class="datamaps-subunit MYS"></path>\n                    <path d="M368.7050205020502,220.4159647249975L367.35088508850885,218.98350808263328L366.6061106110611,217.61471617992967L366.19986998699875,215.7684387297713L365.7259225922592,214.431479196898L365.11656165616563,211.53473354233924L365.0488548854886,209.27463528438676L364.8457345734573,208.25599944981664L364.1009600960096,207.46019020405873L363.0853585358536,205.93223645220354L362.13746374637464,203.6721381942511L361.73122312231226,202.49434051052938L360.1739673967397,200.64806306037104L360.03855385538554,199.21560641800681L360.9864486448645,198.83361798004302L362.0697569756976,198.51529428173984L363.2884788478848,198.57895902140046L364.43949394939494,199.43843300681903L364.7103210321032,199.31110352749775L372.3611861186119,199.21560641800681L373.6476147614762,200.10691277325566L378.18396839683965,200.3934041017285L381.63701370137017,199.6294272258009L383.1942694269427,199.18377404817647L384.41299129912994,199.31110352749775L385.15776577657766,199.72492433529186L385.15776577657766,199.88408618444345L384.14216421642163,200.29790699223756L383.53280328032804,200.29790699223756L382.3140814081408,201.03005149833484L381.63701370137017,200.26607462240725L378.7256225622562,200.93455438884388L377.3037803780378,200.9982191285045L377.23607360736077,207.68301679287094L375.4079907990799,207.7466815325316L375.4079907990799,213.2536815131763L375.4079907990799,220.1931381361853L373.7153215321532,221.1481092310948L372.6997199719972,221.27543871041604L371.54870487048703,220.92528264228255L370.6685168516852,220.7979531629613L370.39768976897693,220.0021439172034L369.65291529152915,219.460993630088Z"\n                          class="datamaps-subunit NAM"></path>\n                    <path d="M649.7558255825583,206.31422489016734L651.3130813081309,207.46019020405873L652.2609760976097,208.3514965593076L651.583908390839,208.79714973693203L650.500600060006,208.28783181964695L649.2141714171418,207.42835783422842L647.9954495449545,206.4415543694886L646.7090209020902,205.10459483661532L646.4381938193819,204.467947440009L647.2506750675068,204.4997798098393L648.3339833983399,205.13642720644566L649.1464646464647,205.77307460305195Z"\n                          class="datamaps-subunit NCL"></path>\n                    <path d="M342.0285528552855,144.20927135122014L342.0962596259626,142.93597655800747L339.9296429642964,142.49032338038305L339.8619361936194,141.59901702513417L338.77862786278627,140.35755460175184L338.5755075507551,139.4980806163333L338.71092109210923,138.60677426108447L339.9296429642964,138.51127715159348L340.6067106710671,137.84279738515687L343.17956795679567,137.68363553600528L344.8722372237224,137.39714420753245L345.0076507650765,136.2193465238107L346.02325232523253,134.97788410042838L346.02325232523253,130.64868180350538L348.6638163816381,129.82104018791716L354.1480648064807,126.09665291777011L360.5802080208021,122.53142749677468L363.55930593059304,123.32723674253259L364.57490749074907,124.37770494693305L365.92904290429044,123.67739281066606L366.4029902990299,126.60597083505517L367.0800580058006,127.08345638250992L367.14776477647763,127.68827140928593L367.8925392539254,128.32491880589225L367.48629862986303,129.12072805165016L366.74152415241525,132.94061243128814L366.67381738173816,135.3917049082225L364.3040804080408,137.1743176187202L363.491599159916,139.6572424654849L364.2363736373637,140.35755460175184L364.2363736373637,141.5671846553039L365.455095509551,141.59901702513417L365.25197519751976,142.49032338038305L364.7103210321032,142.58582048987398L364.64261426142616,143.19063551665L364.3040804080408,143.22246788648033L363.01765176517654,141.1851962173401L362.61141114111416,141.08969910784913L361.1218621862186,142.14016731224956L359.7000200020002,141.59901702513417L358.6844184418442,141.50351991564324L358.14276427642767,141.75817887428576L356.99174917491746,141.69451413462514L355.9084408440844,142.49032338038305L354.96054605460546,142.55398812004367L352.65851585158515,141.5671846553039L351.7783278327833,142.04467020275862L350.83043304330437,142.0128378329283L350.1533653365337,141.28069332683103L348.2575757575758,140.58038119056408L346.2263726372637,140.8032077793763L345.7524252425243,141.21702858717038L345.481598159816,142.29932916140115L344.9399439943994,143.06330603732874L344.8045304530453,144.75042163833552L343.38268826882694,143.66812106410475L342.70562056205625,143.66812106410475Z"\n                          class="datamaps-subunit NER"></path>\n                    <path d="M354.0126512651265,157.70619615927427L352.04915491549156,158.3746759257109L351.30438043804384,158.27917881621997L350.62731273127315,158.69299962401408L349.07005700570056,158.66116725418377L348.05445544554453,157.48336957046206L347.44509450945094,156.11457766775845L346.15866586658666,154.87311524437612L344.73682368236825,154.90494761420643L343.04415441544154,154.90494761420643L343.17956795679567,151.88087248032636L343.11186118611863,150.67124242677434L343.450395039504,149.49344474305266L344.05975597559757,148.92046208610697L344.9399439943994,147.74266440238523L344.73682368236825,147.23334648510018L345.1430643064307,146.4693696091726L344.73682368236825,145.35523666511153L344.8045304530453,144.75042163833552L344.9399439943994,143.06330603732874L345.481598159816,142.29932916140115L345.7524252425243,141.21702858717038L346.2263726372637,140.8032077793763L348.2575757575758,140.58038119056408L350.1533653365337,141.28069332683103L350.83043304330437,142.0128378329283L351.7783278327833,142.04467020275862L352.65851585158515,141.5671846553039L354.96054605460546,142.55398812004367L355.9084408440844,142.49032338038305L356.99174917491746,141.69451413462514L358.14276427642767,141.75817887428576L358.6844184418442,141.50351991564324L359.7000200020002,141.59901702513417L361.1218621862186,142.14016731224956L362.61141114111416,141.08969910784913L363.01765176517654,141.1851962173401L364.3040804080408,143.22246788648033L364.64261426142616,143.19063551665L365.3873887388739,143.9546123925776L365.1842684268427,144.27293609088076L365.11656165616563,144.90958348748708L363.491599159916,146.37387249968162L363.01765176517654,147.55167018340336L362.7468246824683,148.53847364814317L362.34058405840585,148.95229445593725L362.0020502050205,150.25742161898026L360.9864486448645,151.05323086473814L360.71562156215623,152.00820195964764L360.24167416741676,152.74034646574492L360.1062606260626,153.53615571150283L358.8198319831983,154.17280310810915L357.73652365236524,153.40882623218155L357.05945594559455,153.4406586020119L355.9084408440844,154.52295917624264L355.3667866786679,154.55479154607292L354.486598659866,156.36923662640098Z"\n                          class="datamaps-subunit NGA"></path>\n                    <path d="M176.82403240324032,145.80088984273596L176.14696469646964,145.22790718579026L175.26677667766776,144.46393030986266L174.86053605360536,143.82728291325634L174.04805480548055,143.22246788648033L173.16786678667864,142.3948262708921L173.3709870987099,142.10833494241925L173.64181418141817,142.3948262708921L173.77722772277227,142.23566442174052L174.3865886588659,142.1719996820799L174.5897089708971,141.72634650445545L174.86053605360536,141.72634650445545L174.86053605360536,140.8032077793763L175.26677667766776,140.73954303971564L175.67301730173017,140.77137540954595L176.07925792579258,140.2620574922609L176.62091209120914,140.6440459302247L176.82403240324032,140.4212193414125L177.16256625662567,140.19839275260028L177.83963396339632,139.6572424654849L177.83963396339632,139.2752540275211L178.04275427542754,139.3070863973514L178.3135813581358,138.861433219727L178.516701670167,138.79776848006634L178.7875287528753,139.0842598085392L179.1937693769377,139.17975691803014L179.60001000100013,138.9250979593876L180.07395739573957,138.9250979593876L180.75102510251025,138.6704390007451L181.0218521852185,138.41578004210254L181.63121312131213,138.4794447817632L181.495799579958,138.63860663091475L181.36038603860388,139.0524274387089L181.56350635063507,139.75273957497583L181.15726572657266,140.38938697158216L180.95414541454144,141.15336384750975L180.88643864386438,141.98100546309797L180.95414541454144,142.45849101055273L181.0218521852185,143.31796499597127L180.75102510251025,143.5089592149532L180.54790479047907,144.30476846071107L180.6833183318332,144.7822540081658L180.2770777077708,145.29157192545088L180.4124912491249,145.80088984273596L180.6833183318332,146.08738117120882L180.20937093709372,146.5012019790029L179.66771677167716,146.37387249968162L179.3968896889689,145.99188406171783L178.7875287528753,145.83272221256627L178.3135813581358,146.05554880137848L177.09485948594858,145.57806325392374Z"\n                          class="datamaps-subunit NIC"></path>\n                    <path d="M350.96584658465844,66.09263578762376L351.30438043804384,66.72928318423008L350.8981398139814,68.4482311550672L350.42419241924193,69.14854329133414L349.2731773177318,69.14854329133414L349.6117111711171,71.12215022081374L348.528402840284,70.67649704318936L347.37738773877385,69.88068779743143L345.6170117011701,70.2626762353952L344.2628762876288,70.10351438624366L345.2107710771077,69.59419646895856L346.83573357335734,66.82478029372108L349.40859085908596,66.02897104796315Z"\n                          class="datamaps-subunit NLD"></path>\n                    <path d="M396.464796479648,35.85188444882323L393.28257825782583,36.615861324750796L391.7930293029303,36.77502317390241L392.537803780378,35.46989601085943L390.16806680668066,34.70591913493186L387.2566756675668,35.34256653153818L386.3087808780878,36.74319080407207L384.54840484048407,37.57083241966032L382.51720172017207,37.1251792420359L380.01205120512054,37.22067635152683L377.9808480848085,36.202040516956686L376.82983298329833,36.71135843424179L375.6788178817882,36.77502317390241L375.4079907990799,38.01648559728474L371.81953195319534,37.72999426881188L371.34558455845587,38.78046247321234L369.51750175017503,38.74863010338203L368.2987798779878,40.08558963625531L366.4029902990299,42.1865260450562L363.491599159916,44.828612740972446L364.1686668666867,45.46526013757877L363.491599159916,46.22923701350638L361.66351635163517,46.19740464367604L360.444794479448,47.94818498434344L360.5802080208021,50.462942200938414L361.73122312231226,51.38608092601761L361.1218621862186,53.614346814139765L359.5646064606461,54.88764160735241L358.75212521252126,55.96994218158315L357.465696569657,54.8239768676918L353.74182418241827,57.020410385983624L351.23667366736674,57.43423119377772L348.6638163816381,56.47926009886824L347.9867486748675,54.47382079955831L347.37738773877385,50.11278613280497L349.13776377637765,48.903156079252966L354.08035803580356,47.34336995756746L357.8042304230423,45.40159539791817L361.25727572757273,42.79134107183218L365.7259225922592,39.13061854134584L368.90814081408143,37.72999426881188L374.0538553855386,35.374398901368494L378.18396839683965,34.546757285780245L381.2984798479848,34.64225439527118L384.14216421642163,33.08246827358573L387.5952095209521,33.177965383076696L390.9805480548055,32.79597694511284L396.8710371037104,34.164768847816475L394.43359335933593,34.67408676510152ZM384.480698069807,20.254023231968176L380.2828782878288,21.0180001078958L376.96524652465246,20.60417930010169L378.2516751675168,20.094861382816646L377.1683668366837,19.490046356040608L381.0276527652765,19.13989028790718L381.77242724272423,19.840202424174095ZM372.2934793479348,16.784294920463736L378.52250225022505,18.184919192997626L373.7830283028303,18.917063699094967L372.7674267426743,20.317687971628857L371.0747574757476,20.667844039762343L370.1945694569457,22.22763016144782L367.8925392539254,22.291294901108472L363.89783978397844,21.145329587217077L365.5905090509051,20.476849820780416L362.7468246824683,19.93569953366506L359.0906590659066,18.34408104214927L357.66881688168814,16.87979202995467L362.7468246824683,16.21131226351804L363.83013301330135,16.84795966012436L366.470697069707,16.84795966012436L367.2154715471547,16.1794798936877L369.92374237423746,16.115815154027104ZM385.83483348334835,15.447335387590442L389.55870587058706,16.115815154027104L386.7827282728273,17.134450988597223L381.2984798479848,17.357277577409434L375.7465246524652,17.038953879106288L375.4079907990799,16.529635961821185L372.6997199719972,16.497803591990902L370.6685168516852,15.638329606572313L376.49129912991305,15.097179319456956L379.1995699569957,15.542832497081378L381.0953595359536,15.001682209965992Z"\n                          class="datamaps-subunit NOR"></path>\n                    <path d="M503.71232123212326,114.25501134089244L503.5769076907691,115.05082058665033L503.84773477347744,116.26045064020235L503.5769076907691,116.99259514629964L502.01965196519654,117.02442751612998L499.78532853285327,116.57877433850554L498.2957795779578,116.41961248935397L497.2124712471247,115.46464139444446L494.63961396139615,115.20998243580193L492.2021702170217,114.15951423140149L490.441794179418,113.2363755063223L488.6137113711372,112.50423100022505L489.3584858485849,110.75345065955764L490.509500950095,109.89397667413908L491.32198219821987,109.44832349651465L492.8115311531153,110.02130615346036L494.7073207320733,111.26276857684269L495.79062906290625,111.51742753548523L496.3999899989999,112.4405662605644L497.88953895389545,112.79072232869788L499.3790879087909,113.61836394428612L501.5457045704571,114.06401712191052Z"\n                          class="datamaps-subunit NPL"></path>\n                    <path d="M663.3648864886488,243.62176233129813L663.7711271127114,244.38573920722573L665.1252625262528,243.62176233129813L665.6669166916691,244.41757157705604L665.6669166916691,245.21338082281395L664.9898489848986,246.07285480823248L663.7711271127114,247.47347908076642L662.8232323232323,248.237455956694L663.500300030003,249.12876231194286L662.0107510751075,249.16059468177318L660.4534953495349,249.86090681804012L659.9118411841184,251.10236924142248L658.8285328532854,253.01231143124144L657.4066906690668,253.8399530468297L656.458795879588,254.38110333394505L654.6984198419842,254.34927096411474L653.4796979697969,253.71262356750844L651.448494849485,253.58529408818714L651.1099609960997,252.8849819519202L652.1255625562557,251.5161900492166L654.495299529953,249.6380802292279L655.7140214021401,249.28792416109445L657.0681568156816,248.58761202482748L658.6931193119312,247.60080856008767L659.7764276427642,246.61400509534786L660.6566156615662,245.21338082281395L661.3336833683369,244.7358952753592L661.6722172217221,243.68542707095878L662.9586458645865,242.82595308554022ZM666.3439843984399,234.64503403914892L667.6981198119812,236.65047333845885L667.7658265826583,235.34534617541587L668.6460146014603,235.85466409270094L668.9168416841685,237.28712073506517L670.4063906390639,237.89193576184118L671.6928192819282,238.05109761099277L672.7761276127613,237.3507854747258L673.7240224022402,237.5417796937077L673.2500750075008,239.22889529471445L672.7084208420843,240.31119586894522L671.2188718871887,240.2793634991149L670.7449244924493,240.8523461560606L670.9480448044806,241.6481554018185L670.6772177217722,241.998311469952L669.9324432443244,243.01694730452212L668.9845484548455,244.32207446756507L667.5627062706271,245.05421897366236L667.2241724172418,244.57673342620762L666.4116911691169,244.2902420977348L667.4949994999499,242.7622883458796L666.8856385638564,241.71182014147914L664.8544354435444,240.97967563538185L664.9221422142215,240.2793634991149L666.2762776277627,239.6427161025086L666.6148114811481,238.17842709031402L666.5471047104711,236.968797036762L665.7346234623462,235.69550224354936L665.8023302330232,235.37717854524618L664.9221422142215,234.5813692994883L663.4325932593259,232.9260860683118L662.6201120112012,231.58912653543854L663.3648864886488,231.4617970561173L664.380488048805,232.51226526051772L665.8023302330232,232.98975080797248Z"\n                          class="datamaps-subunit NZL"></path>\n                    <path d="M437.9013401340134,135.35987253839218L437.29197919791983,134.05474537534923L435.80243024302433,130.9351731319782L441.422092209221,129.05706331198957L442.70852085208526,125.3008436720122L441.8283328332833,123.96388413913891L441.8960396039604,123.19990726321133L442.43769376937695,122.43593038728375L442.43769376937695,121.67195351135615L443.25017501750176,121.28996507339235L442.9116411641164,121.03530611474983L443.1147614761476,119.79384369136747L444.0626562656266,119.79384369136747L444.8751375137514,121.06713848458014L445.9584458445845,121.76745062084709L447.3125812581258,122.02210957948964L448.46359635963597,122.34043327779278L449.2760776077608,123.42273385202354L449.81773177317734,124.05938124862986L450.494799479948,124.28220783744207L450.494799479948,124.6960286452362L449.81773177317734,125.84199395912759L449.479197919792,126.35131187641267L448.6667166716672,126.95612690318868L447.98964896489656,128.26125406623163L447.1094609460946,128.1657569567407L446.77092709270926,128.61141013436512L446.43239323932397,129.5663812292746L446.7032203220322,130.80784365265694L446.500100010001,131.03067024146918L445.61991199119916,131.03067024146918L444.468896889689,131.73098237773613L444.2657765776578,132.65412110281528L443.85953595359535,133.03610954077908L442.64081408140817,133.03610954077908L441.9637463746375,133.5135950882338L441.9637463746375,134.27757196416144L441.01585158515854,134.78688988144648L440.0002500250025,134.6277280322949L438.71382138213824,135.2325430590709ZM443.7918291829183,118.29772230934259L443.453295329533,117.6610749127363L443.99494949494954,117.02442751612998L444.1980698069807,117.18358936528155L444.0626562656266,117.97939861103944Z"\n                          class="datamaps-subunit OMN"></path>\n                    <path d="M479.33788378837886,96.84270504370939L480.75972597259727,97.70217902912792L481.30138013801377,99.16646804132249L484.34818481848185,99.93044491725009L482.5878087808781,101.49023103893556L480.488898889889,101.77672236740842L477.6452145214522,101.33106918978399L476.69731973197315,102.12687843554191L477.3743874387439,103.78216166671837L477.9837483748375,105.055456459931L479.5410041004101,105.97859518501019L477.91604160416045,107.06089575924094L477.9837483748375,108.39785529211424L476.15566556655665,110.30779748193322L474.93694369436946,112.21773967175218L472.9734473447345,114.15951423140149L470.80683068306826,114.03218475208021L468.7079207920792,116.00579168155983L469.9266426642664,116.83343329714805L470.19746974697466,118.29772230934259L471.2130713071307,119.25269340425211L471.6193119311931,120.87614426559823L467.48919891989203,120.84431189576793L466.20277027702775,122.11760668898057L464.8486348634864,121.64012114152584L464.2392739273928,120.27132923882222L462.8174317431743,118.838872596458L459.36438643864386,119.2208610344218L456.31758175817583,119.25269340425211L453.6770177017702,119.50735236289462L454.35408540854087,117.3109188446028L457.0623562356236,116.35594774969331L456.9269426942694,115.49647376427477L456.0467546754676,115.17815006597161L455.9790479047905,113.52286683479514L454.1509650965097,112.69522521920692L453.40619061906193,111.54925990531554L452.458295829583,110.56245644057573L455.64051405140515,111.51742753548523L457.536303630363,111.26276857684269L458.61961196119614,111.4855951656549L459.0258525852586,111.0717743578608L460.3122812281228,111.23093620701238L462.74972497249723,110.4669593310848L462.8174317431743,108.87534083956898L463.90074007400744,107.79304026533822L465.25487548754876,107.79304026533822L465.45799579958,107.28372234805315L466.9475447544755,107.02906338941062L467.6246124612461,107.18822523856221L468.3693869386939,106.67890732127714L468.23397339733975,105.53294200738576L469.04645464546456,104.41880906332467L470.2651765176518,103.94132351586994L469.520402040204,102.6998610924876L471.2807780778078,102.76352583214822L471.82243224322434,102.06321369588127L471.7547254725473,101.36290155961431L472.70262026202624,100.5670923138564L472.43179317931794,99.6121212189469L472.02555255525556,98.816311973189L473.1088608860886,98.02050272743108L475.1400640064007,97.60668191963698L477.30668066806686,97.38385533082477L478.2545754575458,97.03369926269127Z"\n                          class="datamaps-subunit PAK"></path>\n                    <path d="M191.51640164016402,153.09050253387838L190.9070407040704,152.54935224676302L190.50080008000802,151.5307164121929L190.9747474747475,151.02139849490783L190.50080008000802,150.89406901558655L190.16226622662268,150.25742161898026L189.21437143714374,149.7481037016952L188.4018901890189,149.87543318101646L187.9956495649565,150.51208057762278L187.25087508750875,150.98956612507752L186.84463446344634,151.05323086473814L186.64151415141515,151.46705167253228L187.52170217021703,152.48568750710237L187.04775477547756,152.7085140959146L186.77692769276928,152.99500542438744L185.8967396739674,153.09050253387838L185.55820582058206,151.97636958981732L185.2873787378738,152.2946932881205L184.6780178017802,152.16736380879922L184.33948394839487,151.40338693287163L183.52700270027006,151.3078898233807L183.05305530553053,151.08506323456848L182.24057405740575,151.08506323456848L182.17286728672866,151.49888404236256L181.96974697469747,151.21239271388973L182.1051605160516,150.83040427592593L182.24057405740575,150.44841583796213L182.17286728672866,150.09825976982867L182.44369436943694,149.87543318101646L182.03745374537453,149.5889418525436L182.03745374537453,148.8567973464463L182.78222822282225,148.66580312746444L183.459295929593,149.3661152637314L183.39158915891588,149.7481037016952L184.13636363636365,149.84360081118612L184.33948394839487,149.68443896203453L184.88113811381137,150.13009213965898L185.76132613261325,150.0027626603377L186.5738073807381,149.52527711288297L187.72482248224821,149.14328867491918L188.33418341834184,148.6021383878038L189.41749174917493,148.69763549729473L189.34978497849787,148.88862971627665L190.3653865386539,148.95229445593725L191.17786778677868,149.27061815424042L191.85493549354936,149.84360081118612L192.53200320032005,150.3529187284712L192.32888288828883,150.63941005694403L192.7351235123512,151.75354300100508L192.3965896589659,152.2946932881205L191.78722872287227,152.16736380879922Z"\n                          class="datamaps-subunit PAN"></path>\n                    <path d="M207.15666566656665,199.72492433529186L206.61501150115012,200.67989543020136L205.66711671167116,201.1573809776561L203.77132713271325,200.10691277325566L203.63591359135913,199.31110352749775L199.9120412041204,197.43299370750907L196.52670267026704,195.36388966853852L195.03715371537155,194.21792435464715L194.29237923792383,192.65813823296162L194.56320632063208,192.11698794584626L193.0059505950595,189.66589546891188L191.1101610161016,186.19616715740742L189.34978497849787,182.43994751743008L188.60501050105012,181.58047353201155L187.9956495649565,180.21168162930795L186.5738073807381,178.9702192059256L185.21967196719672,178.206242329998L185.8290329032903,177.37860071440977L184.88113811381137,175.56415563408174L185.490499049905,174.2590284710388L186.98004800480047,173.08123078731705L187.18316831683168,173.84520766324465L186.64151415141515,174.29086084086907L186.70922092209221,174.99117297713607L187.52170217021703,174.83201112798446L188.26647664766477,175.05483771679667L189.07895789578959,175.97797644187588L190.0945594559456,175.21399956594826L190.50080008000802,173.94070477273561L191.65181518151815,172.31725391138949L193.88613861386136,171.5851094052922L195.91734173417342,169.61150247581259L196.52670267026704,168.37004005243026L196.25587558755876,166.937583410066L196.72982298229823,166.77842156091444L198.0162516251625,167.66972791616328L198.6256125612561,168.56103427141215L199.505800580058,169.0385198188669L200.5891089108911,171.0121267483465L202.0109510951095,171.23495333715871L203.02655265526553,170.75746778970398L203.7036203620362,171.07579148800716L204.85463546354637,170.91662963885557L206.27647764776478,171.7761036242741L205.05775577557756,173.7178781839234L205.5994099409941,173.74971055375372L206.54730473047303,174.73651401849352L204.85463546354637,174.67284927883287L204.5838083808381,174.95934060730573L203.0942594259426,175.30949667543922L200.92764276427644,176.5827914686519L200.7922292229223,177.4740978239007L200.31828182818285,178.11074522050706L200.52140214021404,179.12938105507718L199.37038703870388,179.67053134219253L199.37038703870388,180.46634058795047L198.89643964396438,180.81649665608396L199.64121412141213,182.5036122570907L200.65681568156816,183.6495775709821L200.31828182818285,184.44538681674L201.53700370037004,184.5727162960613L202.28177817781778,185.55951976080107L203.90674067406744,185.62318450046172L205.46399639963997,184.50905155640064L205.32858285828584,187.37396484112912L206.20877087708772,187.59679142994133L207.22437243724374,187.24663536180785L208.84933493349334,190.30254286551823L208.44309430943096,190.93919026212455L208.37538753875387,192.24431742516754L208.3076807680768,193.83593591668335L207.63061306130612,194.79090701159282L207.96914691469146,195.49121914785977L207.495199519952,196.12786654446612L208.3076807680768,197.68765266615162Z"\n                          class="datamaps-subunit PER"></path>\n                    <path d="M575.6846184618462,150.83040427592593L575.8200320032004,152.1036990691386L575.9554455445544,153.15416727353903L575.3460846084608,154.87311524437612L574.6013101310132,152.9631730545571L573.7211221122112,153.91814414946663L574.3304830483049,155.28693605217023L573.7888288828883,156.17824240741908L571.6222122212222,155.064109463358L571.0805580558056,153.72714993048473L571.6222122212222,152.83584357523586L570.471197119712,151.944537219987L569.8618361836184,152.7085140959146L568.9816481648165,152.64484935625396L567.5598059805981,153.69531756065442L567.2889788978898,153.15416727353903L568.0337533753376,151.5625487820232L569.1847684768477,151.02139849490783L570.2003700370037,150.32108635864088L570.8774377437744,151.18056034405942L572.2992799279929,150.63941005694403L572.6378137813781,149.8117684413558L573.9242424242424,149.77993607152547L573.8565356535654,148.31564705933093L575.3460846084608,149.2069534145798L575.5492049204921,150.16192450948927ZM571.1482648264828,147.32884359459112L570.471197119712,147.96549099119744L569.8618361836184,149.14328867491918L569.3201820182019,149.68443896203453L568.1691669166917,148.4111441688219L568.507700770077,147.90182625153685L568.9816481648165,147.36067596442143L569.1847684768477,146.21471065053007L570.2680768076807,146.08738117120882L569.9295429542955,147.36067596442143L571.3513851385138,145.5462308840934ZM560.8568356835683,149.14328867491918L558.3516851685168,150.9259013854169L559.2995799579958,149.6207742223739L560.6537153715371,148.4429765386522L561.7370237023702,147.13784937560922L562.7526252625263,145.29157192545088L563.0911591159115,146.81952567730607L561.8724372437243,147.8699938817065ZM567.2212721272126,144.30476846071107L568.3045804580458,144.87775111765677L569.523302330233,144.87775111765677L569.523302330233,145.67356036341468L568.6431143114312,146.4693696091726L567.424392439244,147.0423522661183L567.3566856685668,146.1510459108694L567.4920992099211,145.19607481595995ZM573.9919491949195,143.795450543426L574.533603360336,145.8963869522269L573.1117611761176,145.38706903494182L573.1117611761176,146.02371643154817L573.5857085708572,147.20151411526987L572.7055205520552,147.61533492306398L572.6378137813781,146.2783753901907L572.0284528452846,146.18287828069975L571.7576257625764,145.03691296680836L572.8409340934095,145.19607481595995L572.8409340934095,144.495762679693L571.6899189918992,143.06330603732874L573.5180018001801,143.09513840715906ZM566.5442044204422,142.07650257258894L566.0702570257026,143.69995343393506L565.2577757775778,142.7768147088559L564.2421742174217,141.34435806649165L565.8671367136714,141.4080228061523ZM566.1379637963796,131.8583118570574L567.2889788978898,132.39946214417276L567.8983398339834,131.921976596718L568.0337533753376,132.39946214417276L567.7629262926293,133.16343902010036L568.3722872287229,134.53223092280396L567.8983398339834,136.09201704448947L566.8150315031503,136.69683207126545L566.476497649765,138.22478582312067L566.9504450445045,139.72090720514552L567.8983398339834,139.94373379395773L568.7785278527853,139.72090720514552L571.0805580558056,140.73954303971564L570.9451445144514,141.75817887428576L571.5545054505451,142.23566442174052L571.3513851385138,143.09513840715906L569.8618361836184,142.1719996820799L569.1847684768477,141.1851962173401L568.7108210821083,141.88550835360704L567.4920992099211,140.73954303971564L565.7994299429944,141.0260343681885L564.8515351535154,140.61221356039437L564.9192419241924,139.8164043146365L565.528602860286,139.33891876718172L564.9869486948695,138.9250979593876L564.7161216121613,139.59357772582428L563.7682268226823,138.51127715159348L563.4973997399741,137.68363553600528L563.4296929692969,135.90102282550757L564.1744674467446,136.50583785228358L564.3775877587759,133.57725982789447L564.9869486948695,131.8583118570574Z"\n                          class="datamaps-subunit PHL"></path>\n                    <path d="M631.1364636463646,179.47953712321066L630.5948094809481,179.67053134219253L629.7823282328233,178.9702192059256L628.9698469846985,177.76058915237357L628.563606360636,176.32813251000934L628.8344334433444,176.13713829102744L629.0375537553755,176.71012094797314L629.5792079207921,177.12394175576725L630.527102710271,178.33357180931927L631.4072907290729,178.9702192059256ZM623.8241324132414,176.9647799066157L622.8085308530854,177.12394175576725L622.537703770377,177.66509204288263L621.522102210221,178.11074522050706L620.5065006500649,178.5563983981315L619.5586058605861,178.5563983981315L618.0013501350136,177.98341574118578L616.9180418041805,177.4740978239007L617.0534553455345,176.90111516695504L618.7461246124612,177.15577412559756L619.7617261726173,177.02844464627628L620.1002600260026,176.10530592119713L620.3710871087109,176.07347355136682L620.5065006500649,177.06027701610662L621.5898089808982,176.93294753678535L622.1314631463146,176.29630014017903L623.2147714771477,175.6278203737424L622.9439443944394,174.5136874296813L624.0949594959496,174.481855059851L624.5012001200121,174.76834638832383L624.4334933493349,175.81881459272427ZM603.2412741274127,183.8087394201337L603.1735673567357,177.69692441271295L603.1735673567357,171.5532770354619L606.423492349235,172.85840419850484L609.8765376537654,173.94070477273561L611.1629662966296,174.89567586764508L612.2462746274628,175.8506469625546L612.5171017101711,176.93294753678535L615.6316131613162,178.11074522050706L616.1055605560556,179.09754868524686L614.412891289129,179.32037527405907L614.8191319131913,180.5618376974414L616.511801180118,181.80330012082376L617.7305230523052,183.77690705030338L618.7461246124612,183.71324231064273L618.6784178417843,184.5727162960613L620.1679667966796,184.89103999436443L619.5586058605861,185.24119606249792L621.5898089808982,186.03700530825586L621.3866886688669,186.57815559537121L620.1679667966796,186.70548507469246L619.6940194019402,186.19616715740742L618.0690569056906,186.00517293842552L616.1732673267327,185.71868160995265L614.6837183718371,184.50905155640064L613.6004100410041,183.49041572183052L612.6525152515253,181.83513249065408L610.2150715071507,181.00749087506586L608.5901090109011,181.5486411621812L607.439093909391,182.18528855878756L607.7099209920992,183.55408046149117L606.2203720372038,184.1907278580975L605.1370637063707,183.90423652962463ZM625.9907490749074,175.11850245645732L625.3813881388139,175.6278203737424L625.0428542854286,174.5136874296813L624.6366136613661,173.78154292358406L623.7564256425643,173.17672789680802L622.6731173117312,172.3809186510501L621.3189818981898,171.8079359941044L621.8606360636063,171.36228281648L622.8762376237624,171.90343310359538L623.485598559856,172.31725391138949L624.2980798079808,172.7629070890139L625.0428542854286,173.55871633477182L625.7876287628764,174.16353136154783Z"\n                          class="datamaps-subunit PNG"></path>\n                    <path d="M366.2675767576758,70.54916756386808L365.455095509551,69.37136988014635L365.5905090509051,68.70289011370969L365.1842684268427,67.71608664896989L364.43949394939494,67.04760688253329L364.9811481148115,66.53828896524819L364.57490749074907,65.58331787033873L365.86133613361335,65.01033521339302L368.7727272727273,64.15086122797449L371.14246424642465,63.51421383136817L373.0382538253825,63.83253752967133L373.17366736673665,64.27819070729576L375.0017501750175,64.31002307712603L377.3037803780378,64.53284966593826L380.75682568256826,64.50101729610797L381.7047204720472,64.69201151508986L382.17866786678667,65.29682654186584L382.24637463746376,66.1244681574541L382.78802880288026,66.82478029372108L382.78802880288026,67.58875716964867L381.63701370137017,67.97074560761244L382.17866786678667,68.83021959303098L382.24637463746376,69.65786120861922L383.1942694269427,71.31314443979568L382.9911491149115,71.85429472691105L382.04325432543254,72.04528894589293L380.3505850585059,73.63690743740878L380.82453245324535,74.46454905299697L380.4182918291829,74.36905194350604L378.65791579157917,73.63690743740878L377.3037803780378,73.89156639605127L376.42359235923595,73.70057217706939L375.2725772577258,74.11439298486349L374.3246824682468,73.44591321842684L373.5799079907991,73.70057217706939L373.44449444944496,73.57324269774811L372.56430643064306,72.65010397266897L371.21017101710174,72.55460686317798L371.0070507050705,71.949791836402L369.7206220622062,71.7587976174201L369.44979497949794,72.23628316487482L368.4341934193419,71.85429472691105L368.5696069606961,71.31314443979568L367.14776477647763,71.15398259064408Z"\n                          class="datamaps-subunit POL"></path>\n                    <path d="M213.3856885688569,131.8583118570574L214.33358335833583,132.017473706209L214.67211721172117,132.39946214417276L214.1981698169817,132.8769476916275L212.77632763276327,132.8451153217972L211.62531253125314,132.9087800614578L211.55760576057605,132.11297081569992L211.82843284328433,131.82647948722706Z"\n                          class="datamaps-subunit PRI"></path>\n                    <path d="M583.6740174017402,86.94283802648103L583.9448444844485,87.26116172478416L583.2000700070007,87.16566461529321L582.387588758876,87.80231201189953L581.8459345934594,88.43895940850587L581.9136413641364,89.77591894137915L580.9657465746575,90.18973974917327L580.6272127212721,90.53989581730676L579.8824382438244,91.08104610442213L578.6637163716372,91.39936980272529L577.8512351235124,91.90868772001035L577.7835283528353,92.70449696576824L577.5804080408041,92.92732355458047L578.325182518252,93.21381488305332L579.3407840784079,94.04145649864155L579.0699569956996,94.51894204609629L578.325182518252,94.64627152541756L576.9710471047105,94.7099362650782L576.2262726272627,95.56941025049673L575.4137913791379,95.50574551083609L575.2783778377839,95.66490735998767L574.3981898189819,95.31475129185421L574.1273627362737,95.66490735998767L573.5857085708572,95.82406920913925L573.5180018001801,95.4739131410058L573.0440544054405,95.31475129185421L572.502400240024,94.99642759355102L573.0440544054405,94.16878597796283L573.5180018001801,93.9459593891506L573.3148814881488,93.59580332101712L573.7888288828883,92.60899985627732L573.6534153415341,92.29067615797416L572.5701070107011,92.06784956916194L571.6899189918992,91.59036402170717L573.2471747174718,90.38073396815514L575.2783778377839,89.36209813358504L576.564806480648,88.02513860071174L577.4449944994499,88.62995362748775L579.0699569956996,88.69361836714839L578.7991299129912,87.70681490240858L581.7105210521052,86.87917328682035L582.455295529553,85.82870508241994Z"\n                          class="datamaps-subunit PRK"></path>\n                    <path d="M321.03945394539454,87.8978091213905L321.7165216521652,87.42032357393573L322.461296129613,87.16566461529321L322.9352435243525,88.08880334037238L324.0185518551855,88.08880334037238L324.3570857085709,87.83414438172986L325.44039403940394,87.8978091213905L325.9820482048205,88.85278021629998L325.1018601860186,89.36209813358504L325.1018601860186,90.82638714577959L324.7633263326333,91.11287847425243L324.6956195619562,91.97235245967096L323.8831383138314,92.13151430882257L324.62791279127913,93.27747962271395L324.15396539653966,94.51894204609629L324.7633263326333,95.06009233321166L324.492499249925,95.56941025049673L323.8154315431543,96.26972238676369L323.95084508450844,96.90636978337002L323.2060706070607,97.38385533082477L322.2581758175818,97.12919637218224L321.24257425742576,97.32019059116412L321.58110811081104,95.85590157896958L321.3779877987799,94.7099362650782L320.5655065506551,94.51894204609629L320.0915591559156,93.81862990982933L320.22697269726973,92.57716748644698L320.97174717471745,91.90868772001035L321.10716071607163,91.14471084408277L321.513401340134,89.99874553019136L321.4456945694569,89.20293628443346L321.10716071607163,88.53445651799682Z"\n                          class="datamaps-subunit PRT"></path>\n                    <path d="M220.0886588658866,208.51065840845916L220.83343334333435,206.25056015050671L220.9011401140114,205.2319243159366L221.7813281328133,203.57664108476013L225.0989598959896,203.03549079764477L226.85933593359337,203.06732316747508L228.55200520052006,204.02229426238458L228.61971197119712,204.59527691933027L229.16136613661365,205.6457451237307L229.02595259525953,208.22416707998633L231.05715571557158,208.57432314811982L231.8019301930193,208.19233471015602L233.08835883588358,208.7016526274411L233.42689268926893,209.27463528438676L233.56230623062305,210.99358325522385L233.83313331333136,211.72572776132114L234.51020102010202,211.78939250098176L235.25497549754976,211.50290117250893L235.93204320432045,211.85305724064239L235.86433643364336,212.87169307521253L235.66121612161214,213.9858260192736L235.25497549754976,215.06812659350436L234.98414841484148,216.7234098246808L233.2914791479148,218.15586646704503L231.8019301930193,218.4741901653482L229.63531353135312,218.18769883687537L227.73952395239525,217.6783809195903L229.63531353135312,214.8134676348618L229.36448644864487,213.9858260192736L227.4009900990099,213.2536815131763L225.0989598959896,211.85305724064239L223.54170417041706,211.56656591216955Z"\n                          class="datamaps-subunit PRY"></path>\n                    <path d="M433.5681068106811,120.11216738967065L433.43269326932693,118.74337548696704L433.9066406640664,117.75657202222723L434.44829482948296,117.56557780324533L434.9899489948995,118.13856046019103L435.05765576557656,119.25269340425211L434.6514151415141,120.36682634831318L434.1097609760976,120.49415582763443Z"\n                          class="datamaps-subunit QAT"></path>\n                    <path d="M380.6891189118912,76.62915020145847L381.501600160016,76.21532939366438L382.6526152615262,76.43815598247659L383.8713371337134,76.43815598247659L384.7515251525152,76.88380916010102L385.42859285928597,76.5973178316282L386.7827282728273,76.43815598247659L387.2566756675668,75.99250280485217L388.06915691569156,75.99250280485217L388.6108110811081,76.18349702383404L389.2201720172017,76.72464731094942L389.82953295329537,77.52045655670734L390.91284128412843,78.63458950076843L390.9805480548055,79.46223111635668L390.77742774277425,80.25804036211454L391.11596159615965,81.11751434753313L391.9284428442844,81.46767041566656L392.80863086308636,81.18117908719374L393.6888188818882,81.4995027854969L393.6888188818882,81.97698833295166L392.80863086308636,82.39080914074576L392.1992699269927,82.19981492176387L391.72532253225324,84.45991317971632L390.5743074307431,84.26891896073442L389.2201720172017,83.60043919429779L386.9858485848585,84.01426000209187L386.10566056605666,84.52357791937698L383.3296829682968,84.3962484400557L381.9078407840784,84.10975711158282L381.16306630663064,84.26891896073442L380.62141214121414,83.4731097149765L380.2828782878288,83.15478601667334L380.6891189118912,82.8364623183702L380.2151715171517,82.61363572955797L379.6735173517352,83.02745653735208L378.52250225022505,82.4863062502367L378.3870887088709,81.69049700447877L377.23607360736077,81.24484382685435L377.03295329532955,80.6718611699087L376.0173517351735,79.9078842939811L377.506900690069,79.55772822584761L378.65791579157917,78.28443343263493L379.5381038103811,77.0111386394223Z"\n                          class="datamaps-subunit ROU"></path>\n                    <path d="M608.1161616161617,71.21764733030473L610.0119511951195,74.56004616248792L607.2359735973598,73.95523113571194L606.0849584958496,76.66098257128881L607.9130413041305,78.60275713093809L607.8453345334533,79.9078842939811L606.423492349235,78.76191898008969L605.2047704770478,80.22620799228426L604.8662366236624,78.63458950076843L605.0693569356936,76.82014442044041L604.8662366236624,74.78287275130013L605.2724772477247,73.3504161089359L605.4078907890789,70.83565889234092L604.2568756875688,68.98938144218258L604.4599959995999,66.44279185575726L606.1526652665266,65.55148550050839L605.4078907890789,64.69201151508986L606.2880788078808,64.43735255644731L606.7620262026203,65.67881497982967L607.439093909391,67.49326006015767L607.3713871387139,69.33953751031606ZM380.75682568256826,64.50101729610797L377.3037803780378,64.53284966593826L375.0017501750175,64.31002307712603L375.4079907990799,63.48238146153784L377.9808480848085,62.87756643476179L379.94434443444345,63.19589013306502L380.82453245324535,63.51421383136817L380.62141214121414,64.02353174865321ZM-0.5,36.96601739288431L4.104060406040617,38.39847403524854L9.04665466546652,40.276583855237206L8.84353435343536,41.454381538958884L10.12996299629964,41.93186708641366L9.723722372237205,40.56307518371007L14.801730173017233,40.81773414235259L18.525602560256004,42.60034685285029L16.62981298129813,43.4279884684385L13.51530153015301,43.61898268742044L13.51530153015301,45.433427767748455L12.770527052705233,45.84724857554255L11.010151015101485,45.78358383588193L9.520602060206045,45.115104069445294L7.083158315831611,44.57395378232991L6.609210921092085,43.7463121667417L4.713421342134211,43.45982083826884L2.6145114511451197,43.682647427081065L1.531203120312,43.046000030474744L1.9374437443744341,42.34568789420776L-0.2968796879688398,42.79134107183218L0.5833083308330629,43.682647427081065L-0.5,44.47845667283899ZM676.5,32.816778040794134L676.4996615,33.4644567115495L674.4687968796879,33.55995382104044L674.1302630263027,32.95513879426446L676.5,32.19126765705761L676.5,32.816778040794134ZM-0.5,32.19126765705761L-0.499661500000002,32.19116191833686L-0.5,32.19116191833686L-0.5,32.816778040794134L-0.5,32.19126765705761ZM-0.5,32.19116191833686L-0.2291729172917485,32.095664808845925L1.3280828082808398,32.095664808845925L4.036353635363582,32.63681509596131L3.9009400940093997,32.891474054603776L1.9374437443744341,33.33712723222823L-0.5,33.4644567115495ZM608.0484548454846,28.976092565474914L605.2047704770478,29.007924935305226L601.3454845484549,28.785098346493015L601.0069506950695,28.68960123700208L602.8350335033504,27.957456730904767L605.1370637063707,27.766462511922867L607.8453345334533,28.498607018020152ZM621.454395439544,25.474531884140106L619.2877787778777,26.206676390237362L616.3086808680869,26.047514541085803L612.7879287928794,25.31537003498852L613.2618761876188,24.678722638382197L616.7149214921492,24.965213966855003ZM610.8244324432444,24.551393159060922L609.3348834883489,25.952017431594868L602.428792879288,25.920185061764528L599.3142814281429,26.365838239388978L595.5904090409041,25.12437581600662L596.6060106010601,23.851081022793977L599.1111611161116,23.50092495466049L604.0537553755375,23.564589694321114ZM446.22927292729275,33.68728330036171L445.0782578257826,33.8464451495133L438.9169416941694,33.59178619087078L438.44299429943,32.76414457528256L435.05765576557656,32.254826657997484L434.7868286828683,31.236190823427336L436.68261826182624,30.822370015633226L436.61491149114914,29.803734181063106L440.33878387838786,28.212115689547318L438.64611461146114,27.989289100735107L443.1147614761476,26.334005869558638L442.64081408140817,25.474531884140106L446.83863386338635,24.487728419400298L452.9999499949995,23.27809836584828L459.2966796679668,22.927942297714793L462.5466046604661,22.22763016144782L466.20277027702775,21.972971202805326L467.48919891989203,22.705115708902582L466.20277027702775,23.30993073567862L459.5675067506751,24.233069460757775L453.8124312431243,25.12437581600662L447.98964896489656,26.938820896334676L445.1459645964597,28.753265976662675L442.23457345734573,30.56771105699073L442.57310731073113,32.12749717867621ZM676.5,44.478568279777775L674.0625562556256,45.306098288427165L671.6251125112511,45.17876880910595L673.3177817781778,46.165572273845754L674.4687968796879,47.72535839553122L675.3489848984899,48.234676312816305L675.552105210521,48.9986531887439L675.0781578157817,49.50797110602895L671.557405740574,49.09415029823485L666.2762776277627,50.494774570768755L664.583608360836,50.71760115958095L661.7399239923993,52.05456069245426L659.0316531653166,53.20052600634567L658.2868786878689,54.059999991764215L655.6463146314632,52.75487282872125L650.7037203720372,54.219161840915746L649.8912391239124,53.51884970464883L648.0631563156317,54.346491320237035L645.5580058005801,54.091832361594484L644.9486448644865,55.30146241514652L642.7143214321434,57.1477398653049L642.7820282028204,57.91171674123248L644.8809380938094,58.32553754902659L644.6101110111011,61.06312135443379L642.9174417441744,61.1267860940944L642.1049604960497,62.68657221577992L642.8497349734973,63.51421383136817L639.5998099809981,64.46918492627763L638.9227422742274,66.60195370490887L636.1467646764677,67.07943925236357L635.5374037403741,68.98938144218258L632.8291329132912,70.74016178284997L632.1520652065207,69.435034619807L631.3395839583959,66.6974508143998L630.3239823982399,62.52741036662836L631.2041704170417,59.91715604054238L632.7614261426143,58.803023096481354L632.8968396839684,57.91171674123248L635.8082308230823,57.49789593343834L639.1935693569358,55.11046819616463L642.3757875787579,53.20052600634567L645.7611261126112,51.67257225449043L647.3183818381838,49.03048555857423L645.0163516351636,49.189647407725786L643.8653365336534,50.74943352941129L639.1258625862587,52.81853756838184L637.568606860686,50.494774570768755L632.6937193719372,51.131421967375076L628.0219521952196,54.28282658057641L629.5792079207921,55.42879189446778L625.3813881388139,55.93810981175288L622.4699969997,56.129104030734766L622.6054105410541,54.76031212803113L619.6940194019402,54.47382079955831L617.3242824282429,55.396959524637495L611.5692069206921,55.07863582633429L605.4078907890789,55.65161848327999L599.3142814281429,59.3123410137664L592.1373637363737,63.73704042018039L595.0487548754876,63.99169937882287L595.9966496649665,65.16949706254462L597.8247324732474,65.58331787033873L599.0434543454346,64.62834677542925L601.0746574657466,64.75567625475047L603.7829282928293,66.82478029372108L603.8506350635064,68.41639878523686L602.428792879288,70.29450860522553L602.2256725672567,72.55460686317798L601.4131913191319,75.54684962722772L598.5695069506951,78.28443343263493L597.9601460146015,79.5895605956779L595.3872887288729,81.78599411396972L592.8144314431444,83.95059526243126L591.5957095709572,85.06472820649235L589.0905590559056,86.1470287807231L587.9395439543955,86.17886115055337L586.7885288528853,85.25572242547423L584.2156715671567,86.65634669800814L583.9448444844485,87.26116172478416L583.6740174017402,86.94283802648103L583.6740174017402,85.98786693157149L584.621912191219,85.92420219191088L584.8927392739274,83.72776867361905L584.4187918791879,82.10431781227294L586.0437543754375,81.43583804583629L588.2780778077807,81.78599411396972L589.5645064506451,79.93971666381138L590.1738673867387,77.87061262484083L590.9186418641864,77.20213285840418L591.9342434243424,75.5150172573974L588.8197319731973,76.05616754451282L587.1947694769476,76.78831205061007L584.3510851085109,76.78831205061007L583.538603860386,75.03753170994268L581.3719871987199,73.70057217706939L578.0543554355436,73.09575715029341L577.3772877287729,71.24947970013501L576.7002200220022,70.10351438624366L576.0231523152316,69.2758727706554L574.8721372137213,67.39776295066673L573.1794679467946,66.6974508143998L570.4034903490349,66.1244681574541L567.8983398339834,66.18813289711471L565.528602860286,66.53828896524819L563.9713471347135,67.4614276903274L565.0546554655466,67.90708086795183L565.0546554655466,68.95754907235224L564.0390539053906,69.56236409912829L562.2786778677869,71.53597102860789L562.3463846384639,72.36361264419608L559.7058205820582,73.57324269774811L557.4037903790379,72.84109819165086L555.1694669466947,73.0002600408024L554.2215721572157,72.36361264419608L553.0705570557055,72.17261842521421L550.2945794579458,73.5095779580875L547.8571357135713,73.79606928656032L546.0967596759676,74.2735548340151L543.7270227022702,73.95523113571194L541.9666466646665,73.98706350554221L540.8833383338334,73.03209241063274L538.9875487548754,72.10895368555354L537.1594659465947,71.88612709674139L534.7220222022202,72.10895368555354L532.9616461646165,72.45910975368703L530.3210821082108,71.66330050792916L529.9148414841484,70.2626762353952L527.7482248224823,69.7851906879405L525.9878487848786,69.56236409912829L523.8889388938894,68.79838722320069L521.9931493149315,70.74016178284997L522.7379237923793,71.85429472691105L520.9098409840984,73.15942188995402L518.2015701570158,72.68193634249924L516.3057805780578,72.61827160283863L515.0193519351935,71.72696524758977L513.0558555855586,71.69513287775945L511.43089308930894,71.12215022081374L508.5872087208721,72.01345657606261L504.99874987498754,73.63690743740878L503.0352535253526,73.95523113571194L502.2904790479048,74.11439298486349L501.2748774877489,72.96842767097213L498.8374337433744,73.22308662961463L498.0926592659266,72.42727738385676L496.73852385238524,72.04528894589293L495.8583358335834,70.96298837166218L494.7750275027503,70.61283230352869L492.1344634463446,71.12215022081374L489.49389938993903,70.03984964658298L488.47829782978295,71.0266531113228L484.28047804780476,66.25179763677536L481.91074107410736,64.7875086245808L482.5878087808781,64.18269359780481L477.91604160416045,65.9653063083025L476.08795879587956,66.0608034177935L476.22337233723374,65.04216758322335L473.8536353635364,64.40552018661703L471.8901390139014,64.85117336424146L471.2807780778078,62.90939880459213L467.89543954395447,62.52741036662836L466.20277027702775,63.29138724255594L461.463296329633,63.99169937882287L460.58310831083105,64.43735255644731L453.54160416041606,65.10583232288396L452.66141614161415,65.74247971949028L454.0155515551555,67.04760688253329L452.2551755175518,67.525092429988L452.5937093709371,68.0344103472731L450.7656265626563,68.95754907235224L453.8124312431243,70.23084386556492L453.33848384838484,71.12215022081374L450.6979197919792,71.05848548115313L450.1562656265627,71.5996357682685L447.7865286528653,70.64466467335903L444.8074307430743,70.67649704318936L442.7762276227623,71.47230628894724L440.541904190419,70.70832941301964L436.4117911791179,69.40320224997667L433.500400040004,69.46686698963734L429.5734073407341,71.50413865877756L429.37028702870293,72.87293056148118L427.4067906790679,71.79062998725038L425.9172417241724,73.85973402622099L426.458895889589,74.24172246418476L425.3755875587559,75.674179106549L427.00055005500553,76.94747389976163L428.3546854685469,76.88380916010102L429.5734073407341,78.12527158348337L429.37028702870293,79.11207504822319L430.3181818181818,79.39856637669601L429.505700570057,80.51269932075708L427.6776177617762,80.83102301906024L425.78182818281834,82.77279757870953L427.47449744974494,84.55541028920725L427.3390839083909,85.82870508241994L429.37028702870293,88.05697097054208L428.2192719271927,88.78911547663932L427.94844484448447,89.2666010240941L427.0682568256826,89.13927154477282L425.78182818281834,87.99330623088143L425.2401740174018,87.92964149122079L424.08915891589163,87.51582068342671L423.479797979798,86.75184380749909L421.7871287128713,86.33802299970498L420.6361136113611,86.62451432817781L420.29757975797577,86.27435826004437L417.7247224722472,85.38305190479551L414.9487448744875,85.09656057632263L413.3914891489149,84.77823687801947L413.12066206620665,84.96923109700136L410.7509250925093,83.40944497531589L408.5843084308431,82.67730046921858L406.95934593459344,81.59499989498784L408.31348134813487,81.27667619668469L409.87073707370735,79.71689007499917L408.8551355135513,78.95291319907157L411.63111311131115,78.18893632314398L411.56340634063406,77.7751155153499L409.87073707370735,78.09343921365306L409.93844384438444,77.26579759806484L410.88633863386343,76.72464731094942L412.7144214421442,76.5973178316282L413.05295529552956,75.96067043502183L412.5790079007901,74.91020223062142L413.3914891489149,73.95523113571194L413.32378237823787,73.38224847876623L410.54780478047803,72.77743345199019L409.46449644964497,72.80926582182053L408.31348134813487,71.91795946657166L406.8916391639164,72.20445079504455L404.521902190219,71.56780339843817L404.521902190219,71.1858149604744L403.8448344834484,70.35817334488614L402.3552855285529,70.2626762353952L402.2198719871987,69.68969357844955L402.69381938193817,69.30770514048574L401.475097509751,68.2572369360853L399.511601160116,68.41639878523686L398.9699469946995,68.32090167574593L398.49599959996,68.76655485337037L397.75122512251227,68.67105774387942L397.34498449844983,67.49326006015767L396.8710371037104,66.85661266355135L397.2095709570957,66.6974508143998L398.7668266826683,66.76111555406041L399.511601160116,66.34729474626631L398.9699469946995,65.83797682898128L397.6835183518352,65.51965313067805L397.8189318931893,65.16949706254462L397.00645064506455,64.81934099441114L395.8554355435544,63.577878571028776L396.26167616761677,63.06856065374373L396.05855585558555,62.2090866683252L394.2304730473047,61.76343349070078L393.2148714871487,61.98626007951299L392.94404440444043,61.508774532058226L390.9805480548055,61.03128898460345L390.3711871187119,59.91715604054238L390.23577357735775,59.025849685293565L389.2878787878788,58.58019650766913L390.1003600360036,57.975381480893105L389.55870587058706,56.2246011402257L390.91284128412843,55.14230056599496L390.6420142014201,54.8239768676918L392.7409240924093,53.773508663291324L390.77742774277425,52.882202308042466L394.83983398339836,50.494774570768755L396.532503250325,49.41247399653801L397.2772777277728,48.425670531798204L394.501300130013,47.15237573858556L395.24607460746074,45.91091331520322L393.5534053405341,44.54212141249958L394.83983398339836,42.918670551153454L392.6055105510551,40.785901772522294L394.36588658865884,39.353445130158065L391.522202220222,38.111982706775706L391.7930293029303,36.77502317390241L393.28257825782583,36.615861324750796L396.464796479648,35.85188444882323L398.42829282928295,35.21523705221691L401.5428042804281,36.32936999627799L406.6885188518852,36.77502317390241L413.79772977297733,38.90779195253363L415.21957195719574,39.79909830778249L415.35498549854987,41.072393100995114L413.2560756075608,42.059196565734936L410.20927092709275,42.5366821131897L401.8136313631363,41.13605784065574L400.39178917891786,41.35888442946795L403.43859385938595,42.72767633217158L403.57400740074013,43.61898268742044L403.7094209420942,45.52892487723939L406.1468646864687,46.10190753418509L407.63641364136413,46.579393081639864L407.83953395339535,45.68808672639099L406.6885188518852,44.86044511080274L407.90724072407244,44.16013297453583L412.4435943594359,45.337930658257505L414.0685568556856,44.86044511080274L412.7821282128213,43.491653208099166L417.1830683068307,41.64537575794081L418.87573757375736,41.7727052372621L420.6361136113611,42.40935263386842L421.71942194219423,41.13605784065574L420.16216621662164,40.02192489659464L421.11006100610064,38.8759595827033L419.6882188218822,37.72999426881188L424.9693469346935,38.30297692575758L426.05265526552654,39.38527749998835L423.6829182918292,39.608104088800545L423.6829182918292,40.65857229320103L425.1724672467247,41.295219689807354L428.0838583858386,40.88139888201323L428.55780578057806,39.671768828461225L432.484798479848,38.78046247321234L439.0523552355236,37.18884398169649L440.40649064906495,37.28434109118746L438.5784078407841,38.39847403524854L440.94814481448145,38.62130062406075L442.23457345734573,37.95282085762409L445.7553255325533,37.920988487793835L448.59900990099015,37.1251792420359L450.6979197919792,38.271144555927236L452.8645364536454,37.029682132544934L450.9010401040104,35.91554918848388L451.8489348934894,35.31073416170784L457.4008900890089,35.88371681865357L460.0414541454146,36.45669947559924L466.81213121312135,38.62130062406075L468.0985598559856,37.634497159320944L466.20277027702775,36.647693694581136L466.13506350635066,36.233872886787026L463.83303330333035,36.042878667805155L464.51010101010104,35.15157231255628L463.494499449945,33.68728330036171L463.4267926792679,33.08246827358573L466.87983798379844,31.39535267257895L468.0985598559856,29.676404701741887L469.520402040204,29.3262486336084L474.530703070307,29.803734181063106L474.86923692369237,30.854202385463566L473.1088608860886,32.38215613731876L474.2598759875988,32.9869711640948L474.86923692369237,34.29209832713775L474.46299629963,36.87052028339335L476.5619061906191,38.01648559728474L475.7494249424943,39.289780390497384L472.02555255525556,41.96369945624397L474.1921692169217,42.21835841488648L474.93694369436946,41.54987864844988L477.0358535853586,41.072393100995114L477.509800980098,40.14925437591593L479.13476347634764,39.22611565083679L478.0514551455145,38.1756474464363L478.9316431643165,36.934185023054L476.83273327332734,36.77502317390241L476.42649264926496,35.72455496950201L477.91604160416045,33.8464451495133L475.47859785978596,32.318491397658136L478.8639363936394,31.045196604445465L478.38998899889987,29.708237071572142L479.33788378837886,29.644572331911547L480.35348534853483,30.69504053631198L479.6087108710871,32.509485616640035L481.57220722072213,32.85964168477352L480.75972597259727,31.490849782069887L483.87423742374244,30.75870527597263L487.8012301230124,30.663208166481667L491.2542754275428,31.745508740712438L489.56160616061607,30.185722619026905L489.4261926192619,28.180283319716978L492.67611761176124,27.798294881753208L497.2124712471247,27.86195962141383L501.2748774877489,27.639133032601592L499.71762176217624,26.652329567861784L501.95194519451945,25.410867144479454L504.05085508550854,25.34720240481883L507.70702070207017,24.424063679739618L512.7173217321733,24.169404721097152L513.3266826682669,23.66008680381205L518.2692769276928,23.46909258483015L519.8265326532653,23.9147457624546L524.0243524352435,22.896109927884453L527.477397739774,22.927942297714793L528.0190519051905,22.132133051956885L529.7794279427943,21.336323806199005L534.2480748074807,20.540514560441068L537.49799979998,21.145329587217077L534.9251425142514,21.62281513467184L539.1906690669067,21.909306463144645L539.6646164616462,22.83244518822383L541.3572857285728,22.386792010599407L546.9092409240924,22.418624380429748L551.1070607060706,23.341763105508875L552.6643164316432,24.042075241775876L552.1903690369037,24.997046336685344L550.0914591459147,25.57002899363104L545.1488648864887,26.620497198031472L543.7270227022702,27.161647485146887L546.0967596759676,27.41630644378941L548.8727372737275,27.89379199124417L550.5654065406541,27.543635923110656L551.513301330133,28.753265976662675L552.3257825782579,28.275780429207913L555.3048804880488,27.957456730904767L561.3984898489849,28.275780429207913L561.8047304730474,29.167086784456785L569.6587158715872,29.453578112929677L569.7941294129413,27.989289100735107L573.7888288828883,28.339445168868593L576.7679267926793,28.307612799038253L579.8147314731474,29.3262486336084L580.6949194919491,30.50404631733008L579.5439043904391,31.299855563087988L581.9136413641364,32.79597694511284L584.8927392739274,33.55995382104044L586.7208220822083,31.586346891560822L589.6999199919992,32.41398850714907L592.9498449844984,31.90467058986397L596.538303830383,32.477653246809695L597.9601460146015,31.96833532952465L601.0069506950695,32.22299428816714L599.6528152815282,30.47221394749974L602.1579657965797,29.676404701741887L619.1523652365237,30.886034755293906L620.7773277327733,32.00016769935493L625.6522152215222,33.43262434171916L633.2353735373538,33.08246827358573L637.0269526952695,33.40079197188888L638.5842084208422,34.164768847816475L638.3133813381337,35.56539312035039L640.6831183118312,36.07471103763541L643.1882688268827,35.69272259967167L646.5059005900591,35.66089022984133L650.0266526652665,36.011046297974815L653.6151115111511,35.820052078992944L656.9327432743274,37.475335310169385L659.2347734773477,36.87052028339335L657.6775177517752,35.69272259967167L658.5577057705771,34.83324861425311L664.515901590159,35.374398901368494L668.442894289429,35.24706942204725L673.8594359435942,36.17020814712643L676.5,36.96591198996717L676.5,44.478568279777775ZM-0.5,36.96591198996717L-0.499661500000002,36.96601739288431L-0.5,44.47845667283899L-0.5,44.47845667283899L-0.5,44.478568279777775L-0.5,36.96591198996717ZM535.6022102210221,19.394549246549673L524.9722472247224,20.126693752646958L528.425292529253,17.67560127571261L529.9825482548255,17.45277468690037L531.4043904390439,17.580104166221645L536.1438643864386,18.630572370622076ZM434.1774677467747,15.192676428947891L431.6723172317231,15.447335387590442L429.9796479647965,15.574664866911718L429.7088208820882,15.892988565214864L427.47449744974494,16.21131226351804L425.44329432943294,15.765659085893617L426.52660266026606,15.160844059117636L422.3287828782878,15.097179319456956L425.9849484948495,14.77885562115381L428.8963396339634,14.74702325132347L429.23487348734875,15.256341168608571L430.3181818181818,14.810687990984121L432.07855785578556,14.492364292680975L434.92224222422243,14.906185100475057ZM525.9201420142015,18.31224867231893L521.8577357735774,18.566907630961452L516.5766076607661,18.025757343846095L513.462096209621,17.293612837748782L512.0402540254025,15.95665330487546L509.467396739674,15.574664866911718L514.3422842284228,14.301370073699076L518.404690469047,13.855716896074654L522.0608560856085,14.810687990984121L526.3940894089409,16.62513307131212Z"\n                          class="datamaps-subunit RUS"></path>\n                    <path d="M395.1783678367837,168.81569323005468L395.9231423142314,169.86616143445514L395.8554355435544,170.9802943785162L395.31378137813783,171.2031209673284L394.2981798179818,171.07579148800716L393.75652565256524,172.1580920622379L392.6055105510551,171.9989302130863L392.7409240924093,170.9802943785162L393.0117511751175,170.8211325293646L393.07945794579456,169.70699958530355L393.6211121112111,169.19768166801848L394.0950595059506,169.38867588700037Z"\n                          class="datamaps-subunit RWA"></path>\n                    <path d="M321.7165216521652,114.66883214868653L321.7165216521652,114.79616162800781L321.6488148814882,115.1463176961413L321.6488148814882,118.01123098086978L315.487498749875,117.88390150154851L315.555205520552,122.7224217157566L313.7948294829483,122.88158356490817L313.32088208820886,123.83655465981766L313.65941594159415,126.57413846522488L306.34708470847085,126.54230609539454L305.9408440844084,127.17895349200089L306.00855085508556,126.38314424624296L310.27407740774083,126.22398239709139L310.477197719772,125.55550263065473L311.2896789678968,124.6960286452362L311.8990399039904,122.11760668898057L314.471897189719,120.08033501984033L315.35208520852086,117.72473965239692L315.96144614461446,117.56557780324533L316.57080708070805,116.10128879105078L318.12806280628064,115.91029457206889L318.8051305130513,116.16495353071141L319.68531853185317,116.16495353071141L320.29467946794676,115.71930035308698L321.4456945694569,115.65563561342634L321.4456945694569,114.66883214868653Z"\n                          class="datamaps-subunit ESH"></path>\n                    <path d="M418.469496949695,135.93285519533788L418.19866986698673,135.10521357974963L417.6570157015702,134.56406329263427L417.52160216021605,133.80008641670668L416.50600060006,133.13160665027002L415.490399039904,131.5399881587542L415.0164516451645,130.01203440689903L413.66231623162315,128.73873961368636L412.84983498349834,128.42041591538322L411.63111311131115,126.63780320488551L411.3602860286029,125.33267604184252L411.495699569957,124.21854309778146L410.4123912391239,122.11760668898057L409.53220322032206,121.38546218288329L408.51660166016603,121.0034737449195L407.83953395339535,119.92117317068875L407.9749474947495,119.50735236289462L407.43329332933297,118.52054889815483L406.8916391639164,118.10672809036072L406.1468646864687,116.70610381782677L404.9958495849585,115.17815006597161L404.04795479547954,113.90485527275895L403.1000600060006,113.90485527275895L403.43859385938595,112.8543870683585L403.50630063006304,112.21773967175218L403.7094209420942,111.45376279582459L405.8083308330833,111.77208649412776L406.62081208120816,111.16727146735175L407.0947594759476,110.49879170091509L408.51660166016603,110.24413274227257L408.8551355135513,109.60748534566625L409.46449644964497,109.28916164736307L407.56870687068704,107.41105182737441L411.3602860286029,106.45608073246493L411.6988198819882,106.2014217738224L414.00085008500855,106.71073969110745L416.7768276827683,108.0158668541504L422.0579557955796,111.80391886395809L425.57870787078707,111.93124834327932L427.2713771377138,112.12224256226125L427.74532453245325,113.01354891751011L429.03175317531753,112.98171654767978L429.77652765276525,114.60516740902592L430.72442244224425,115.01898821682002L431.06295629562953,115.68746798325668L432.2816781678168,116.48327722901456L432.41709170917096,117.24725410494216L432.21397139713974,117.88390150154851L432.484798479848,118.52054889815483L433.02645264526456,119.02986681543989L433.2972797279728,119.6665142120462L433.5681068106811,120.11216738967065L434.1097609760976,120.49415582763443L434.6514151415141,120.36682634831318L434.9899489948995,121.06713848458014L435.05765576557656,121.51279166220456L435.80243024302433,123.42273385202354L441.422092209221,124.34587257710271L441.8283328332833,123.96388413913891L442.70852085208526,125.3008436720122L441.422092209221,129.05706331198957L435.80243024302433,130.9351731319782L430.3858885888589,131.66731763807547L428.6255125512551,132.4949592536637L427.2713771377138,134.4685661831433L426.39118911891194,134.78688988144648L425.9172417241724,134.15024248484016L425.1724672467247,134.2457395943311L423.34438443844385,134.05474537534923L423.0058505850585,133.8955835261976L420.8392339233923,133.92741589602795L420.3652865286529,134.0865777451795L419.55280528052805,133.6090921977248L419.0788578857886,134.53223092280396L419.2819781978198,135.32804016856184Z"\n                          class="datamaps-subunit SAU"></path>\n                    <path d="M401.8813381338134,148.8567973464463L401.6105110511051,148.824964976616L401.6105110511051,147.90182625153685L401.4073907390739,147.2651788549305L400.459495949595,146.5012019790029L400.1886688668867,145.1642424461296L400.459495949595,143.76361817359572L399.5793079307931,143.63628869427444L399.443894389439,144.05010950206855L398.2928792879288,144.1456066115595L398.7668266826683,144.68675689867487L398.9022402240224,145.83272221256627L397.8866386638664,146.8513580471364L396.93874387438746,148.22014994984L395.9908490849085,148.4111441688219L394.43359335933593,147.32884359459112L393.6888188818882,147.71083203255492L393.485698569857,148.2519823196703L392.537803780378,148.6021383878038L392.47009700970096,148.9841268257676L390.5743074307431,148.9841268257676L390.3711871187119,148.6021383878038L389.0170517051705,148.53847364814317L388.3399839983998,148.8567973464463L387.7983298329833,148.69763549729473L386.8504350435044,147.61533492306398L386.51190119011903,147.07418463594863L385.15776577657766,147.36067596442143L384.6161116111611,148.22014994984L384.14216421642163,149.90726555084674L383.46509650965095,150.25742161898026L382.92344234423445,150.44841583796213L382.78802880288026,150.3847510983015L382.11096109610963,149.8117684413558L381.9755475547555,149.2387857844101L382.3140814081408,148.47480890848252L382.3140814081408,147.67899966272464L381.2307730773078,146.5330343488332L381.0276527652765,145.70539273324502L381.0276527652765,145.25973955562057L380.3505850585059,144.71858926850518L380.2828782878288,143.60445632444413L379.94434443444345,142.87231181834684L379.26727672767277,142.99964129766812L379.470397039704,142.29932916140115L379.94434443444345,141.50351991564324L379.74122412241223,140.73954303971564L380.3505850585059,140.16656038276994L379.94434443444345,139.72090720514552L380.4182918291829,138.57494189125413L381.2984798479848,137.1743176187202L382.92344234423445,137.30164709804146L382.85573557355735,129.85287255774745L382.85573557355735,129.05706331198957L385.02235223522354,129.05706331198957L385.02235223522354,125.3008436720122L392.6055105510551,125.3008436720122L399.85013501350136,125.3008436720122L407.2978797879788,125.3008436720122L407.90724072407244,127.14712112217055L407.50100010001,127.46544482047373L407.7718271827183,129.40721938012302L408.51660166016603,131.66731763807547L409.1936693669367,132.11297081569992L410.20927092709275,132.81328295196687L409.26137613761375,133.8955835261976L407.90724072407244,134.21390722450082L407.2978797879788,134.78688988144648L407.0947594759476,136.02835230482884L406.28227822782276,138.79776848006634L406.48539853985403,139.52991298616362L406.2145714571457,141.15336384750975L405.469796979698,142.99964129766812L404.31878187818785,143.9546123925776L403.50630063006304,145.38706903494182L403.30318031803176,146.1510459108694L402.4229922992299,146.6603638281545L401.8813381338134,148.6339707576341Z"\n                          class="datamaps-subunit SDN"></path>\n                    <path d="M401.8813381338134,148.8567973464463L401.8813381338134,150.32108635864088L401.6105110511051,150.89406901558655L400.59490949094914,150.9577337552472L399.98554855485554,152.04003432947795L401.1365636563657,152.16736380879922L402.0844584458446,153.09050253387838L402.4229922992299,153.82264703997566L403.23547354735473,154.2683002176001L404.3864886488649,156.30557188674035L403.1000600060006,157.54703431012268L401.94904490449045,158.66116725418377L400.7980298029803,159.55247360943264L399.443894389439,159.5206412396023L397.9543454345434,159.96629441722672L396.73562356235624,159.55247360943264L395.9908490849085,160.06179152671768L394.2981798179818,158.82032910333535L393.8919391939194,158.02451985757742L392.80863086308636,158.40650829554122L391.9961496149615,158.27917881621997L391.454495449545,158.59750251452311L390.6420142014201,158.3746759257109L389.49099909990997,156.8148898040254L389.1524652465247,156.24190714707973L387.7983298329833,155.47793027115213L387.32438243824384,154.36379732709105L386.51190119011903,153.53615571150283L385.22547254725475,152.54935224676302L385.22547254725475,151.944537219987L384.2098709870987,151.18056034405942L382.92344234423445,150.44841583796213L383.46509650965095,150.25742161898026L384.14216421642163,149.90726555084674L384.6161116111611,148.22014994984L385.15776577657766,147.36067596442143L386.51190119011903,147.07418463594863L386.8504350435044,147.61533492306398L387.7983298329833,148.69763549729473L388.3399839983998,148.8567973464463L389.0170517051705,148.53847364814317L390.3711871187119,148.6021383878038L390.5743074307431,148.9841268257676L392.47009700970096,148.9841268257676L392.537803780378,148.6021383878038L393.485698569857,148.2519823196703L393.6888188818882,147.71083203255492L394.43359335933593,147.32884359459112L395.9908490849085,148.4111441688219L396.93874387438746,148.22014994984L397.8866386638664,146.8513580471364L398.9022402240224,145.83272221256627L398.7668266826683,144.68675689867487L398.2928792879288,144.1456066115595L399.443894389439,144.05010950206855L399.5793079307931,143.63628869427444L400.459495949595,143.76361817359572L400.1886688668867,145.1642424461296L400.459495949595,146.5012019790029L401.4073907390739,147.2651788549305L401.6105110511051,147.90182625153685L401.6105110511051,148.824964976616Z"\n                          class="datamaps-subunit SSD"></path>\n                    <path d="M306.55020502050206,141.08969910784913L305.8054305430543,139.62541009565456L304.8575357535754,138.95693032921793L305.67001700170016,138.60677426108447L306.61791179117915,137.30164709804146L307.02415241524153,136.31484363330165L307.7012201220122,135.71002860652564L308.64911491149115,135.86919045567726L309.529302930293,135.48720201771346L310.6126112611261,135.45536964788312L311.492799279928,135.9965199349985L312.7115211521152,136.50583785228358L313.8625362536254,137.87462975498715L315.0812581258126,139.17975691803014L315.21667166716674,140.35755460175184L315.555205520552,141.43985517598261L316.2999799979998,141.94917309326766L316.435393539354,142.68131759936495L316.3676867686769,143.25430025631064L316.0968596859686,143.38162973563192L315.0812581258126,143.22246788648033L314.8781378137814,143.44529447529254L314.471897189719,143.47712684512285L313.1177617761776,143.03147366749843L312.23757375737574,142.99964129766812L308.7845284528453,142.90414418817718L308.2428742874287,143.12697077698937L307.6335133513351,143.06330603732874L306.61791179117915,143.38162973563192L306.34708470847085,141.94917309326766L308.03975397539756,141.98100546309797L308.513701370137,141.72634650445545L308.85223522352237,141.69451413462514L309.529302930293,141.24886095700072L310.34178417841787,141.66268176479483L311.1542654265427,141.69451413462514L311.96674667466743,141.28069332683103L311.5605060506051,140.73954303971564L310.95114511451146,141.05786673801882L310.4094909490949,141.0260343681885L309.6647164716472,140.58038119056408L309.0553555355536,140.61221356039437L308.64911491149115,141.05786673801882Z"\n                          class="datamaps-subunit SEN"></path>\n                    <path d="M642.8497349734973,186.38716137638932L643.3913891389138,187.02380877299564L642.1049604960497,187.02380877299564L641.3601860186018,185.84601108927393L642.511201120112,186.32349663672866ZM640.4799979997999,185.24119606249792L639.7352235223523,185.27302843232823L638.5842084208422,185.08203421334633L638.2456745674567,184.7955428848735L638.3133813381337,184.0633983787762L639.5998099809981,184.34988970724905L640.2091709170918,184.73187814521285ZM642.0372537253725,184.73187814521285L641.7664266426643,185.08203421334633L640.3445844584459,183.4267509821699L640.0060506050604,182.3126180381088L640.6154115411541,182.3126180381088L641.2924792479248,183.8087394201337ZM638.6519151915192,182.34445040793915L638.7196219621962,182.72643884590295L637.2300730073008,181.930629600145L636.2144714471447,181.26214983370835L635.5374037403741,180.62550243710206L635.8082308230823,180.43450821812013L636.6884188418842,180.88016139574458L638.2456745674567,181.73963538116314ZM634.2509750975098,180.49817295778078L633.9124412441245,180.59367006727174L633.0322532253226,180.14801688964732L632.2874787478747,179.38404001371973L632.3551855185518,179.06571631541652L633.506200620062,179.86152556117446Z"\n                          class="datamaps-subunit SLB"></path>\n                    <path d="M316.503100310031,153.91814414946663L315.96144614461446,153.75898230031504L314.60731073107314,152.99500542438744L313.65941594159415,152.00820195964764L313.32088208820886,151.3078898233807L313.1177617761776,149.93909792067706L314.0656565656566,149.11145630508886L314.33648364836483,148.57030601797345L314.60731073107314,148.15648521017937L315.1489648964897,148.12465284034906L315.555205520552,147.77449677221557L317.1124612461246,147.77449677221557L317.5864086408641,148.4429765386522L317.99264926492646,149.2387857844101L317.99264926492646,149.77993607152547L318.26347634763476,150.28925398881054L318.26347634763476,150.9577337552472L318.7374237423743,150.86223664575627L317.85723572357233,151.7217106311748L317.0447544754476,152.77217883557523L316.90934093409345,153.31332912269062Z"\n                          class="datamaps-subunit SLE"></path>\n                    <path d="M172.89703970397036,141.50351991564324L172.6939193919392,141.94917309326766L171.6106110611061,141.91734072343735L170.93354335433543,141.72634650445545L170.12106210621062,141.34435806649165L169.10546054605462,141.24886095700072L168.56380638063808,140.83504014920658L168.63151315131515,140.54854882073374L169.24087408740874,140.071063273279L169.64711471147118,139.8800690542971L169.51170117011702,139.6572424654849L169.9856485648565,139.52991298616362L170.52730273027305,139.6890748353152L170.93354335433543,140.071063273279L171.475197519752,140.38938697158216L171.54290429042905,140.6440459302247L172.35538553855386,140.4212193414125L172.76162616261627,140.54854882073374L173.03245324532452,140.73954303971564Z"\n                          class="datamaps-subunit SLV"></path>\n                    <path d="M427.8807380738074,151.62621352168384L426.25577557755776,151.62621352168384L420.16216621662164,149.3979476335617L419.4173917391739,148.72946786712507L418.74032403240324,147.80632914204588L418.06325632563255,146.78769330747576L418.469496949695,146.1192135410391L419.14656465646567,145.100577706469L419.75592559255927,145.45073377460247L420.0944594459446,146.24654302036038L420.9746474647465,147.01051989628797L421.92254225422545,147.0423522661183L423.6829182918292,146.5330343488332L425.7141214121412,146.31020776002103L427.4067906790679,145.7372251030753L428.2869786978698,145.60989562375403L428.9640464046405,145.25973955562057L430.04735473547356,145.19607481595995L430.04735473547356,145.22790718579026L430.04735473547356,146.02371643154817L430.04735473547356,147.90182625153685L430.04735473547356,148.88862971627665L429.16716671667166,150.03459503016802Z"\n                          class="datamaps-subunit -99"></path>\n                    <path d="M416.23517351735177,169.8343290646248L415.0841584158416,168.2745429429393L415.0841584158416,161.43058342942126L416.70912091209124,159.2978146507901L417.25077507750774,158.69299962401408L418.4017901790179,158.66116725418377L420.0944594459446,157.35604009114078L422.53190319031904,157.26054298164982L427.8807380738074,151.62621352168384L429.16716671667166,150.03459503016802L430.04735473547356,148.88862971627665L430.04735473547356,147.90182625153685L430.04735473547356,146.02371643154817L430.04735473547356,145.22790718579026L430.04735473547356,145.19607481595995L430.6567156715672,145.1642424461296L431.53690369036906,144.87775111765677L432.484798479848,144.68675689867487L433.43269326932693,144.05010950206855L434.1097609760976,144.05010950206855L434.1774677467747,144.5594274193536L433.9743474347435,145.67356036341468L433.9743474347435,146.6603638281545L433.5681068106811,147.32884359459112L433.0941594159416,149.3661152637314L432.14626462646265,151.46705167253228L430.9952495249525,153.85447940980598L429.37028702870293,156.62389558504353L427.81303130313034,158.7248319938444L425.57870787078707,161.30325395010001L423.6829182918292,162.8312077019552L420.8392339233923,164.67748515211355L419.14656465646567,166.10994179447778L417.0476547654766,168.40187242226054L416.64141414141415,169.38867588700037Z"\n                          class="datamaps-subunit SOM"></path>\n                    <path d="M380.62141214121414,83.4731097149765L380.14746474647467,83.91876289260094L380.2828782878288,84.58724265903759L381.2307730773078,85.41488427462579L380.48599859985995,85.98786693157149L380.2151715171517,86.59268195834753L380.4182918291829,86.81550854715974L380.07975797579763,87.07016750580227L379.1995699569957,87.10199987563257L378.5902090209021,87.22932935495385L378.52250225022505,87.07016750580227L378.7256225622562,86.84734091699003L378.9287428742874,86.4016877393656L378.65791579157917,86.4016877393656L378.3193819381938,86.05153167123215L377.9808480848085,85.98786693157149L377.7777277727773,85.66954323326834L377.4391939193919,85.54221375394707L377.1683668366837,85.28755479530457L376.82983298329833,85.38305190479551L376.5590059005901,86.01969930140183L376.0850585058506,86.1470287807231L376.22047204720474,85.98786693157149L375.54340434043405,85.60587849360773L374.93404340434046,85.41488427462579L374.6632163216322,85.12839294615296L374.12156215621565,84.8100692478498L374.5955095509551,84.74640450818914L374.86633663366337,83.85509815294033L373.91844184418443,83.12295364684302L374.3923892389239,82.29531203125482L373.7153215321532,82.29531203125482L374.46009600960093,81.59499989498784L373.85073507350734,81.05384960787246L373.37678767876787,80.32170510177521L374.86633663366337,79.84421955432045L376.0173517351735,79.9078842939811L377.03295329532955,80.6718611699087L377.23607360736077,81.24484382685435L378.3870887088709,81.69049700447877L378.52250225022505,82.4863062502367L379.6735173517352,83.02745653735208L380.2151715171517,82.61363572955797L380.6891189118912,82.8364623183702L380.2828782878288,83.15478601667334Z"\n                          class="datamaps-subunit SRB"></path>\n                    <path d="M230.51550155015502,155.4460979013218L232.81753175317533,155.79625396945528L232.95294529452946,155.47793027115213L234.51020102010202,155.35060079183086L236.54140414041404,155.8280863392856L235.52580258025802,157.45153720063175L235.72892289228923,158.7566643636747L236.40599059905992,159.87079730773578L236.13516351635167,160.6666065534937L235.93204320432045,161.52608053891225L235.45809580958095,162.32188978467013L234.3747874787479,161.90806897687602L233.49459945994602,162.09906319585792L232.74982498249824,161.93990134670634L232.54670467046705,162.48105163382172L232.8852385238524,162.86304007178552L232.68211821182118,163.24502850974932L231.66651665166518,163.08586666059773L230.51550155015502,161.4624157992516L230.3123812381238,160.41194759485117L229.70302030203018,160.38011522502083L228.8228322832283,159.04315569214756L229.16136613661365,158.05635222740776L229.0936593659366,157.6106990497833L230.24467446744677,157.13321350232857Z"\n                          class="datamaps-subunit SUR"></path>\n                    <path d="M373.44449444944496,73.57324269774811L373.5799079907991,73.70057217706939L374.3246824682468,73.44591321842684L375.2725772577258,74.11439298486349L376.42359235923595,73.70057217706939L377.3037803780378,73.89156639605127L378.65791579157917,73.63690743740878L380.4182918291829,74.36905194350604L379.87663766376636,74.8465374909608L379.5381038103811,75.6105143668884L379.13186318631864,75.80150858587027L377.10066006600664,75.22852592892457L376.49129912991305,75.35585540824584L376.0850585058506,75.76967621603994L375.20487048704877,76.02433517468249L375.0017501750175,75.89700569536122L374.0538553855386,76.18349702383404L373.3090809080908,76.2471617634947L373.17366736673665,76.62915020145847L371.54870487048703,76.8519767902707L370.87163716371634,76.66098257128881L369.92374237423746,76.18349702383404L369.7206220622062,75.5150172573974L369.92374237423746,75.29219066858523L370.1945694569457,74.87836986079108L371.0070507050705,74.91020223062142L371.6164116411642,74.6873756418092L371.6841184118412,74.52821379265758L372.0226522652265,74.43271668316665L372.1580658065806,74.01889587537255L372.63201320132015,73.9233987658816L372.90284028402846,73.57324269774811Z"\n                          class="datamaps-subunit SVK"></path>\n                    <path d="M363.9655465546555,79.20757215771413L365.522802280228,79.3349016370354L366.470697069707,78.92108082924129L368.0956595659566,78.88924845941096L368.501900190019,78.57092476110782L368.7727272727273,78.57092476110782L369.17896789678974,79.20757215771413L367.62171217121715,79.71689007499917L367.48629862986303,80.48086695092677L366.80923092309234,80.6718611699087L366.80923092309234,81.18117908719374L366.06445644564457,81.1493467173634L365.455095509551,80.86285538889058L365.11656165616563,81.1493467173634L363.7624262426243,81.08568197770279L364.2363736373637,80.92652012855119L363.7624262426243,80.13071088279327Z"\n                          class="datamaps-subunit SVN"></path>\n                    <path d="M358.75212521252126,55.96994218158315L359.5646064606461,54.88764160735241L361.1218621862186,53.614346814139765L361.73122312231226,51.38608092601761L360.5802080208021,50.462942200938414L360.444794479448,47.94818498434344L361.66351635163517,46.19740464367604L363.491599159916,46.22923701350638L364.1686668666867,45.46526013757877L363.491599159916,44.828612740972446L366.4029902990299,42.1865260450562L368.2987798779878,40.08558963625531L369.51750175017503,38.74863010338203L371.34558455845587,38.78046247321234L371.81953195319534,37.72999426881188L375.4079907990799,38.01648559728474L375.6788178817882,36.77502317390241L376.82983298329833,36.71135843424179L379.33498349834986,37.634497159320944L382.24637463746376,38.90779195253363L382.3140814081408,41.80453760709237L382.92344234423445,42.5366821131897L379.74122412241223,43.077832400305056L377.9131413141314,44.382959563348024L378.18396839683965,45.52892487723939L375.20487048704877,47.056878629094555L371.54870487048703,48.6484971206104L370.1945694569457,51.322416186357L371.54870487048703,52.627543349399986L373.3090809080908,53.67801155380039L371.6164116411642,55.81078033243162L369.65291529152915,56.25643351005604L368.90814081408143,59.407838123257335L367.8925392539254,61.15861846392474L365.5905090509051,60.96762424494284L364.50720072007203,62.46374562696771L362.34058405840585,62.55924273645864L361.73122312231226,60.77663002596097L360.1739673967397,58.64386124732975Z"\n                          class="datamaps-subunit SWE"></path>\n                    <path d="M398.2928792879288,216.946236413493L397.9543454345434,217.77387802908123L396.8033303330333,217.96487224806316L395.72002200220027,216.946236413493L395.72002200220027,216.3095890168867L396.1939693969397,215.60927688061975L396.39708970897095,215.06812659350436L396.93874387438746,214.90896474435277L397.8866386638664,215.25912081248623L398.1574657465747,216.1185947979048Z"\n                          class="datamaps-subunit SWZ"></path>\n                    <path d="M410.95404540454047,103.90949114603961L407.2978797879788,105.91493044534955L405.1989698969897,105.15095356942196L405.13126312631266,105.15095356942196L405.4020902090209,104.86446224094911L405.3343834383439,104.10048536502151L405.8083308330833,103.05001716062108L406.8239323932393,102.34970502435412L406.55310531053107,101.61756051825685L405.67291729172916,101.5220634087659L405.53750375037504,100.08960676640166L406.01145114511456,99.29379752064374L406.48539853985403,98.87997671284964L406.95934593459344,98.46615590505552L407.0947594759476,97.41568770065507L407.7041204120412,97.79767613861885L409.8030303030303,97.25652585150348L410.7509250925093,97.63851428946728L412.30818081808184,97.60668191963698L414.474797479748,96.90636978337002L415.490399039904,96.93820215320032L417.6570157015702,96.65171082472747L416.70912091209124,97.8295085084492L415.6258125812582,98.30699405590393L415.82893289328933,99.67578595860753L415.0841584158416,101.93588421656Z"\n                          class="datamaps-subunit SYR"></path>\n                    <path d="M365.25197519751976,142.49032338038305L365.455095509551,141.59901702513417L364.2363736373637,141.5671846553039L364.2363736373637,140.35755460175184L363.491599159916,139.6572424654849L364.3040804080408,137.1743176187202L366.67381738173816,135.3917049082225L366.74152415241525,132.94061243128814L367.48629862986303,129.12072805165016L367.8925392539254,128.32491880589225L367.14776477647763,127.68827140928593L367.0800580058006,127.08345638250992L366.4029902990299,126.60597083505517L365.92904290429044,123.67739281066606L367.8248324832483,122.65875697609596L375.34028402840283,126.25581476692172L382.85573557355735,129.85287255774745L382.92344234423445,137.30164709804146L381.2984798479848,137.1743176187202L380.4182918291829,138.57494189125413L379.94434443444345,139.72090720514552L380.3505850585059,140.16656038276994L379.74122412241223,140.73954303971564L379.94434443444345,141.50351991564324L379.470397039704,142.29932916140115L379.26727672767277,142.99964129766812L379.94434443444345,142.87231181834684L380.2828782878288,143.60445632444413L380.3505850585059,144.71858926850518L381.0276527652765,145.25973955562057L381.0276527652765,145.70539273324502L379.8089308930893,146.02371643154817L378.8610361036104,146.78769330747576L377.506900690069,148.8567973464463L375.7465246524652,149.71627133186487L373.91844184418443,149.5889418525436L373.37678767876787,149.77993607152547L373.5799079907991,150.44841583796213L372.56430643064306,151.08506323456848L371.75182518251825,151.81720774066574L369.44979497949794,152.54935224676302L368.97584758475847,152.1355314389689L368.6373137313732,152.0718666993083L368.2987798779878,152.58118461659333L366.74152415241525,152.7085140959146L367.0123512351235,152.19919617862953L366.4029902990299,150.89406901558655L366.19986998699875,150.13009213965898L365.31968196819685,149.8117684413558L364.2363736373637,148.69763549729473L364.64261426142616,147.80632914204588L365.522802280228,147.99732336102778L366.06445644564457,147.8699938817065L367.0800580058006,147.90182625153685L366.06445644564457,146.18287828069975L366.1321632163216,144.9414158573174L365.9967496749675,143.69995343393506Z"\n                          class="datamaps-subunit TCD"></path>\n                    <path d="M341.48689868986895,155.12777420301865L339.9973497349735,155.50976264098244L339.5911091109111,154.84128287454578L339.0494549454945,153.6634851908241L338.9140414041404,152.74034646574492L339.3202820282028,151.02139849490783L338.84633463346336,150.3529187284712L338.71092109210923,148.8567973464463L338.71092109210923,147.4880054437427L337.8984398439844,146.5330343488332L338.03385338533855,145.96005169188754L339.65881588158817,145.99188406171783L339.45569556955695,146.97868752645763L339.9973497349735,147.51983781357305L340.6744174417442,148.18831758000965L340.74212421242123,149.11145630508886L341.14836483648367,149.49344474305266L341.01295129512954,153.82264703997566Z"\n                          class="datamaps-subunit TGO"></path>\n                    <path d="M530.9304430443044,143.76361817359572L529.2377737773777,142.87231181834684L527.6128112811282,142.93597655800747L527.8836383638363,141.43985517598261L526.2586758675868,141.43985517598261L526.1232623262326,143.5089592149532L525.1076607660766,146.2783753901907L524.4305930593059,147.93365862136716L524.5660066006601,149.30245052407074L525.7847284728473,149.3661152637314L526.5972097209722,151.05323086473814L526.9357435743574,152.7085140959146L527.9513451345135,153.75898230031504L529.1023602360236,153.98180888912725L530.0502550255026,154.96861235386706L529.440894089409,155.73258922979466L528.2221722172218,155.95541581860687L528.0867586758676,155.00044472369737L526.5295029502951,154.17280310810915L526.1909690969096,154.52295917624264L525.446194619462,153.79081467014535L525.1753675367537,152.86767594506617L524.1597659765978,151.78537537083542L523.2118711871187,150.89406901558655L522.9410441044105,152.00820195964764L522.6025102510251,150.9577337552472L522.8056305630563,149.77993607152547L523.3472847284729,147.99732336102778L524.2274727472748,146.05554880137848L525.3107810781078,144.30476846071107L524.5660066006601,142.58582048987398L524.5660066006601,141.72634650445545L524.3628862886288,140.67587830005502L523.0764576457647,139.17975691803014L522.6702170217021,138.22478582312067L523.2795779577957,137.87462975498715L524.0243524352435,136.25117889364105L523.2118711871187,135.0097164702587L522.0608560856085,133.6409245675551L521.1129612961297,131.98564133637865L521.9254425442545,131.6354852682452L522.7379237923793,129.59821359910492L524.0920592059206,129.5345488594443L525.1753675367537,128.70690724385605L526.2586758675868,128.26125406623163L527.0711571157116,128.83423672317733L527.2065706570658,129.98020203706872L528.49299929993,130.07569914655966L528.0190519051905,132.04930607603927L528.0190519051905,133.73642167704605L530.0502550255026,132.622288732985L530.5919091909191,132.94061243128814L531.6752175217522,132.8769476916275L532.0814581458146,132.2403002950212L533.503300330033,132.36762977434245L534.9251425142514,133.8955835261976L535.0605560556055,135.74186097635598L536.550105010501,137.39714420753245L536.4823982398241,138.98876269904827L535.8730373037304,139.8164043146365L534.1126612661266,139.56174535599393L531.6752175217522,139.91190142412742L530.4564956495649,141.47168754581293Z"\n                          class="datamaps-subunit THA"></path>\n                    <path d="M471.5516051605161,90.98554899493116L470.8745374537454,91.55853165187688L468.84333433343335,91.24020795357372L468.64021402140213,92.32250852780446L470.6714171417142,92.19517904848318L472.9734473447345,92.79999407525919L476.5619061906191,92.51350274678637L477.0358535853586,94.26428308745376L477.6452145214522,94.07328886847185L478.7962296229623,94.48710967626599L478.72852285228527,95.21925418236324L478.9993499349935,96.30155475659402L477.0358535853586,96.30155475659402L475.7494249424943,96.14239290744243L474.5984098409841,97.00186689286096L473.78592859285925,97.19286111184286L473.1088608860886,97.57484954980667L472.3640864086409,96.97003452303066L472.56720672067206,95.37841603151482L471.95784578457847,95.28291892202388L472.16096609660974,94.7099362650782L471.14536453645366,94.29611545728406L470.33288328832884,94.93276285389041L470.1297629762976,95.696739729818L469.8589358935894,95.98323105829083L468.7079207920792,95.95139868846053L468.0985598559856,96.81087267387906L467.48919891989203,96.42888423591526L466.13506350635066,97.03369926269127L465.52570257025707,96.81087267387906L466.6090109010901,94.90093048406008L466.20277027702775,93.50030621152617L464.8486348634864,93.05465303390174L465.3225822582258,92.22701141831351L466.87983798379844,92.32250852780446L467.7600260026003,91.27204032340401L468.3693869386939,90.06241026985198L470.8745374537454,89.6485894620579L470.46829682968297,90.50806344747643L470.7391239123912,91.0492137345918Z"\n                          class="datamaps-subunit TJK"></path>\n                    <path d="M453.1353635363537,99.6121212189469L452.93224322432246,98.0523350972614L451.510401040104,97.98867035760077L449.4114911491149,96.30155475659402L447.9219421942194,96.1105605376121L445.8230323032303,95.15558944270263L444.468896889689,94.96459522372072L443.65641564156414,95.31475129185421L442.3699869986999,95.28291892202388L441.0835583558356,96.33338712642433L439.3908890889089,96.71537556438811L439.0523552355236,95.37841603151482L439.32318231823183,93.4048091020352L437.8336333633364,92.7681617054289L438.3752875287529,91.49486691221622L437.08885888588856,91.36753743289496L437.495099509951,89.80775131120947L439.25547554755474,90.25340448883391L440.94814481448145,89.6485894620579L439.59400940094014,88.53445651799682L439.0523552355236,87.45215594376606L437.495099509951,87.92964149122079L437.29197919791983,89.2984333939244L436.75032503250327,88.08880334037238L437.5628062806281,87.45215594376606L439.72942294229426,87.07016750580227L440.94814481448145,87.61131779291765L442.3022802280228,89.07560680511219L443.25017501750176,88.98010969562124L445.34908490849085,88.94827732579094L445.0782578257826,88.02513860071174L446.7032203220322,87.3566588342751L448.2604760476048,86.27435826004437L450.7656265626563,87.26116172478416L450.96874687468744,88.75728310680903L451.7135213521352,89.13927154477282L453.7447244724473,89.07560680511219L454.35408540854087,89.39393050341535L455.3019801980198,91.33570506306465L457.468596859686,92.64083222610762L458.6873187318732,93.53213858135648L460.6508150815082,94.45527730643565L463.15596559655967,95.25108655219357L463.08825882588263,96.39705186608495L462.5466046604661,96.33338712642433L461.66641664166417,95.85590157896958L461.3278827882789,96.52438134540623L459.7706270627063,96.8745374135397L459.36438643864386,98.37065879556457L458.3487848784879,98.94364145251028L456.85923592359234,99.2301327809831L456.45299529953,100.08960676640166L455.03115311531155,100.34426572504418Z"\n                          class="datamaps-subunit TKM"></path>\n                    <path d="M573.0440544054405,183.39491861233958L573.2471747174718,182.94926543471516L574.8721372137213,182.53544462692102L576.1585658565857,182.4717798872604L576.7679267926793,182.21712092861787L577.4449944994499,182.4717798872604L576.7679267926793,182.98109780454544L574.8044304430443,183.77690705030338L573.2471747174718,184.31805733741876L573.1794679467946,183.74507468047304Z"\n                          class="datamaps-subunit TLS"></path>\n                    <path d="M221.9844484448445,146.43753723934228L223.06775677567757,146.18287828069975L223.47399739973997,146.24654302036038L223.40629062906288,147.6471672928943L221.84903490349035,147.8699938817065L221.510501050105,147.67899966272464L222.05215521552157,147.16968174543956Z"\n                          class="datamaps-subunit TTO"></path>\n                    <path d="M355.84073407340736,109.67115008532687L355.02825282528255,106.29691888331335L353.8772377237724,105.53294200738576L353.8772377237724,105.08728882976132L352.3199819981998,103.97315588570025L352.1168616861686,102.54069924333601L353.33558355835584,101.49023103893556L353.74182418241827,99.93044491725009L353.47099709970996,98.14783220675235L353.8095309530953,97.19286111184286L355.9084408440844,96.42888423591526L357.19486948694873,96.65171082472747L357.12716271627164,97.60668191963698L358.75212521252126,96.90636978337002L358.8875387538754,97.28835822133382L357.93964396439645,98.21149694641299L357.93964396439645,99.07097093183151L358.54900490049005,99.54845647928629L358.3458845884589,101.1719073406324L357.05945594559455,102.09504606571157L357.465696569657,103.14551427011202L358.4135913591359,103.17734663994236L358.8875387538754,104.0686529951912L359.63231323132317,104.35514432366404L359.496899689969,105.78760096602828L358.54900490049005,106.32875125314365L358.00735073507354,106.93356627991966L356.72092209220926,107.66571078601694L356.9240424042404,108.42968766194454L356.72092209220926,109.22549690770244Z"\n                          class="datamaps-subunit TUN"></path>\n                    <path d="M416.1674667466747,88.56628888782711L418.13096309630964,88.47079177833616L419.9590459045905,89.39393050341535L420.29757975797577,90.06241026985198L420.0944594459446,90.95371662510085L421.51630163016307,91.43120217255559L422.2610761076108,91.97235245967096L420.9746474647465,92.51350274678637L421.51630163016307,94.67810389524787L421.17776777677767,95.25108655219357L422.19336933693376,96.77904030404875L421.3131813181318,97.09736400235191L420.6361136113611,96.61987845489718L418.469496949695,96.36521949625465L417.6570157015702,96.65171082472747L415.490399039904,96.93820215320032L414.474797479748,96.90636978337002L412.30818081808184,97.60668191963698L410.7509250925093,97.63851428946728L409.8030303030303,97.25652585150348L407.7041204120412,97.79767613861885L407.0947594759476,97.41568770065507L406.95934593459344,98.46615590505552L406.48539853985403,98.87997671284964L406.01145114511456,99.29379752064374L405.2666766676668,98.4343235352252L406.01145114511456,97.73401139895824L404.8604360436044,97.89317324810983L403.30318031803176,97.4793524403157L402.01675167516754,98.56165301454648L399.1053605360536,98.75264723352836L397.61581158115814,97.76584376878856L395.5846084608461,97.70217902912792L395.1783678367837,98.46615590505552L393.82423242324234,98.68898249386773L392.0638563856386,97.70217902912792L389.9649464946495,97.73401139895824L388.8816381638164,95.85590157896958L387.45979597959797,94.80543337456913L388.4076907690769,93.34114436237459L387.18896889688966,92.44983800712573L389.2878787878788,90.667225296628L392.1992699269927,90.57172818713705L393.0117511751175,89.13927154477282L396.6002100210021,89.39393050341535L398.83453345334533,88.18430044986333L401.00115011501146,87.64315016274796L404.11566156615663,87.61131779291765L407.43329332933297,88.94827732579094L410.14156415641565,89.6485894620579L412.30818081808184,89.36209813358504L413.93314331433146,89.55309235256695ZM386.9858485848585,89.90324842070041L387.45979597959797,89.6804218318882L388.00145014501453,88.5026241481665L387.1212621262126,87.99330623088143L389.0170517051705,87.42032357393573L390.6420142014201,87.67498253257827L390.8451345134514,88.40712703867554L392.537803780378,89.01194206545155L392.1992699269927,89.45759524307599L389.9649464946495,89.55309235256695L389.1524652465247,90.15790737934293L387.5952095209521,91.14471084408277L386.9858485848585,90.2852368586642Z"\n                          class="datamaps-subunit TUR"></path>\n                    <path d="M567.0181518151816,120.78064715610728L565.8671367136714,123.80472228998734L565.0546554655466,125.36450841167286L564.1067606760677,123.77288992015704L563.8359335933594,122.3722656476231L564.9869486948695,120.52598819746476L566.476497649765,119.09353155510053L567.3566856685668,119.6665142120462Z"\n                          class="datamaps-subunit TWN"></path>\n                    <path d="M401.7459245924593,168.4655371619212L402.0844584458446,168.6565313809031L408.92284228422847,172.47641576054104L408.9905490549055,173.59054870460213L411.6988198819882,175.4686585245908L410.88633863386343,177.7924215222039L410.95404540454047,178.8428897266043L412.17276727672765,179.54320186287129L412.24047404740475,180.02068741032605L411.6988198819882,181.1666527242174L411.8342334233423,181.73963538116314L411.6988198819882,182.63094173641196L412.37588758875887,183.8087394201337L413.12066206620665,185.65501687029203L413.79772977297733,186.06883767808614L412.30818081808184,187.15113825231688L410.2769776977698,187.88328275841417L409.1259625962596,187.85145038858386L408.448894889489,188.42443304552955L407.1624662466247,188.45626541535987L406.6885188518852,188.71092437400242L404.3864886488649,188.16977408688703L402.96464646464653,188.32893593603862L402.490699069907,185.7823463496133L401.8136313631363,184.89103999436443L401.475097509751,184.3817220770794L399.5793079307931,184.0315660089459L398.5637063706371,183.4585833520002L397.34498449844983,183.14025965369703L396.6002100210021,182.82193595539388L395.7877287728773,182.34445040793915L394.7721272127213,179.98885504049574L393.6888188818882,178.93838683609528L393.35028502850287,177.82425389203422L393.485698569857,176.8692827971247L393.14716471647165,175.11850245645732L393.95964596459646,175.05483771679667L394.63671367136715,174.35452558052972L395.38148814881487,173.36772211578992L395.8554355435544,172.98573367782612L395.7877287728773,172.3809186510501L395.38148814881487,171.9352654734257L395.31378137813783,171.2031209673284L395.8554355435544,170.9802943785162L395.9231423142314,169.86616143445514L395.1783678367837,168.81569323005468L395.8554355435544,168.56103427141215L397.9543454345434,168.59286664124247Z"\n                          class="datamaps-subunit TZA"></path>\n                    <path d="M395.1783678367837,168.81569323005468L394.0950595059506,169.38867588700037L393.6211121112111,169.19768166801848L393.6211121112111,167.76522502565425L394.0950595059506,167.06491288938727L394.1627662766277,165.5369591375321L394.5690069006901,164.67748515211355L395.31378137813783,163.69068168737374L395.9908490849085,163.18136377008867L396.6002100210021,162.51288400365206L395.8554355435544,162.2582250450095L395.9908490849085,160.06179152671768L396.73562356235624,159.55247360943264L397.9543454345434,159.96629441722672L399.443894389439,159.5206412396023L400.7980298029803,159.55247360943264L401.94904490449045,158.66116725418377L402.82923292329235,159.96629441722672L403.03235323532357,160.92126551213624L403.9125412541254,163.08586666059773L403.23547354735473,164.45465856330134L402.28757875787585,165.6961209866837L401.7459245924593,166.46009786261126L401.7459245924593,168.4655371619212L397.9543454345434,168.59286664124247L395.8554355435544,168.56103427141215Z"\n                          class="datamaps-subunit UGA"></path>\n                    <path d="M397.75122512251227,68.67105774387942L398.49599959996,68.76655485337037L398.9699469946995,68.32090167574593L399.511601160116,68.41639878523686L401.475097509751,68.2572369360853L402.69381938193817,69.30770514048574L402.2198719871987,69.68969357844955L402.3552855285529,70.2626762353952L403.8448344834484,70.35817334488614L404.521902190219,71.1858149604744L404.521902190219,71.56780339843817L406.8916391639164,72.20445079504455L408.31348134813487,71.91795946657166L409.46449644964497,72.80926582182053L410.54780478047803,72.77743345199019L413.32378237823787,73.38224847876623L413.3914891489149,73.95523113571194L412.5790079007901,74.91020223062142L413.05295529552956,75.96067043502183L412.7144214421442,76.5973178316282L410.88633863386343,76.72464731094942L409.93844384438444,77.26579759806484L409.87073707370735,78.09343921365306L408.3811881188119,78.25260106280466L407.1624662466247,78.85741608958064L405.4020902090209,78.95291319907157L403.7771277127713,79.65322533533856L403.8448344834484,80.83102301906024L404.7927292729273,81.27667619668469L406.6885188518852,81.1493467173634L406.34998499849985,81.81782648380006L404.25107510751076,82.16798255193355L401.7459245924593,83.25028312616429L400.66261626162617,82.86829468820052L401.0688568856886,81.97698833295166L399.03765376537655,81.43583804583629L399.3761876187619,81.05384960787246L401.1365636563657,80.44903458109647L400.59490949094914,80.00338140347205L397.6835183518352,79.52589585601729L397.54810481048105,78.8255837197503L395.8554355435544,79.08024267839285L395.1106610661066,80.098878512963L393.6888188818882,81.4995027854969L392.80863086308636,81.18117908719374L391.9284428442844,81.46767041566656L391.11596159615965,81.11751434753313L391.5899089908991,80.92652012855119L391.9284428442844,80.28987273194487L392.40239023902393,79.68505770516889L392.2669766976698,79.3349016370354L392.67321732173224,79.1757397878838L392.8763376337634,79.46223111635668L393.95964596459646,79.49406348618695L394.43359335933593,79.36673400686567L394.0950595059506,79.1757397878838L394.2304730473047,78.88924845941096L393.6211121112111,78.4117629119562L393.35028502850287,77.61595366619828L392.6055105510551,77.32946233772545L392.7409240924093,76.69281494111914L391.9284428442844,76.18349702383404L391.11596159615965,76.11983228417343L389.7618261826183,75.5150172573974L388.475397539754,75.70601147637933L388.06915691569156,75.99250280485217L387.2566756675668,75.99250280485217L386.7827282728273,76.43815598247659L385.42859285928597,76.5973178316282L384.7515251525152,76.88380916010102L383.8713371337134,76.43815598247659L382.6526152615262,76.43815598247659L381.501600160016,76.21532939366438L380.6891189118912,76.62915020145847L380.55370537053705,76.11983228417343L379.5381038103811,75.6105143668884L379.87663766376636,74.8465374909608L380.4182918291829,74.36905194350604L380.82453245324535,74.46454905299697L380.3505850585059,73.63690743740878L382.04325432543254,72.04528894589293L382.9911491149115,71.85429472691105L383.1942694269427,71.31314443979568L382.24637463746376,69.65786120861922L383.12656265626566,69.59419646895856L384.14216421642163,69.08487855167353L385.63171317131713,69.05304618184319L387.52750275027506,69.18037566116445L389.62641264126415,69.65786120861922L391.11596159615965,69.68969357844955L391.7930293029303,69.94435253709204L392.537803780378,69.6260288387889L393.0117511751175,70.07168201641332L394.70442044204424,69.97618490692237L395.44919491949196,70.16717912590427L395.5846084608461,69.21220803099479L396.1939693969397,68.79838722320069Z"\n                          class="datamaps-subunit UKR"></path>\n                    <path d="M229.63531353135312,223.5037045985382L230.85403540354037,223.28087800972597L232.74982498249824,224.7451670219205L233.42689268926893,224.68150228225988L235.3903890389039,225.8911323358119L236.8799379937994,226.94160054021233L237.96324632463245,228.21489533342503L237.0830583058306,229.10620168867385L237.62471247124714,230.1566698930743L236.81223122312232,231.36629994662633L234.7133213321332,232.38493578119645L233.2914791479148,232.03477971306296L232.27587758775877,232.2257739320449L230.51550155015502,231.42996468628695L229.29677967796778,231.4617970561173L228.14576457645762,230.44316122154717L228.2811781178118,229.23353116799512L228.68741874187418,228.7878779903707L228.68741874187418,226.94160054021233L229.16136613661365,224.99982598056306Z"\n                          class="datamaps-subunit URY"></path>\n                    <path d="M45.47289728972896,130.77601128282663L45.20207020702071,131.09433498112978L44.728122812281185,130.83967602248725L44.79582958295828,130.29852573537187L44.525002500250025,129.63004596893524L44.59270927092706,129.40721938012302L44.9312431243124,129.08889568181985L44.79582958295828,128.73873961368636L44.86353635363531,128.5477453947045L45.066656665666585,128.5795777645348L45.74372437243727,128.89790146283795L46.08225822582256,129.05706331198957L46.4207920792079,129.31172227063206L46.89473947394737,129.98020203706872L46.82703270327033,130.07569914655966L46.08225822582256,130.48951995435377ZM44.457295729572934,127.84743325843753L43.847934793479396,127.97476273775878L43.509400940094,127.59277429979498L43.30628062806284,127.43361245064341L43.30628062806284,127.30628297132213L43.509400940094,127.14712112217055L44.11876187618765,127.33811534115247L44.66041604160415,127.62460666962531ZM43.238573857385745,126.8287974238674L43.17086708670871,127.05162401267961L42.15526552655268,126.98795927301897L42.29067906790681,126.76513268420675ZM41.54590459045903,126.57413846522488L41.410491049104905,126.66963557471581L41.27507750775072,126.63780320488551L40.66571657165713,126.57413846522488L40.39488948894888,126.16031765743074L40.32718271827184,126.09665291777011L40.80113011301131,125.84199395912759L41.00425042504247,125.93749106861853ZM38.36368636863688,125.33267604184252L38.092859285928625,125.52367026082442L37.483498349834974,125.17351419269093L37.551205120512066,125.04618471336968L37.88973897389741,124.85519049438778L38.295979597959786,124.8870228642181ZM211.76072607260727,81.78599411396972L212.0992599259926,82.39080914074576L210.06805680568058,83.31394786582496L208.10456045604562,83.95059526243126L206.14106410641065,84.52357791937698L205.12546254625465,85.637710863438L204.85463546354637,86.05153167123215L204.78692869286928,87.03833513597193L205.46399639963997,88.05697097054208L206.20877087708772,88.08880334037238L206.00565056505653,87.42032357393573L206.54730473047303,87.83414438172986L206.41189118911893,88.37529466884524L205.12546254625465,88.66178599731809L204.24527452745278,88.62995362748775L202.89113911391138,88.94827732579094L202.07865786578657,89.04377443528188L200.92764276427644,89.13927154477282L199.37038703870388,89.6804218318882L202.14636463646366,89.33026576375474L202.6880188018802,89.6804218318882L200.04745474547457,90.25340448883391L198.89643964396438,90.25340448883391L198.89643964396438,90.03057790002168L198.35478547854785,90.53989581730676L198.89643964396438,90.63539292679769L198.490199019902,92.0041848295013L197.13606360636064,93.43664147186554L197.0006500650065,92.9591559244108L196.5944094409441,92.86365881491983L195.98504850485048,92.3861732674651L196.32358235823583,93.4048091020352L196.7975297529753,93.72313280033839L196.86523652365236,94.45527730643565L196.25587558755876,95.18742181253293L195.1725672567257,96.6835431945578L195.03715371537155,96.58804608506684L195.57880788078808,95.31475129185421L194.63091309130914,94.61443915558722L194.42779277927795,93.05465303390174L194.0892589258926,93.85046227965964L194.42779277927795,95.06009233321166L193.2090709070907,94.74176863490851L194.495499549955,95.3465836616845L194.56320632063208,97.16102874201255L195.1048604860486,97.28835822133382L195.30798079807983,97.92500561794014L195.57880788078808,99.80311543792881L194.42779277927795,101.20373971046271L192.46429642964299,101.77672236740842L191.24557455745574,102.85902294163917L190.2976797679768,102.98635242096043L189.34978497849787,103.68666455722739L189.07895789578959,104.32331195383374L186.98004800480047,105.53294200738576L185.8967396739674,106.42424836263459L185.01655165516553,107.53838130669567L184.74572457245725,108.87534083956898L185.0842584258426,110.18046800261195L185.6936193619362,111.80391886395809L186.5738073807381,113.10904602700106L186.5738073807381,113.93668764258928L187.45399539953996,116.1331211608811L187.3862886288629,117.37458358426343L187.3185818581858,118.10672809036072L186.84463446344634,119.25269340425211L186.3029802980298,119.50735236289462L185.35508550855087,119.28452577408241L185.0842584258426,118.45688415849418L184.33948394839487,118.01123098086978L183.32388238823881,116.38778011952363L182.44369436943694,114.9553234771594L182.17286728672866,114.22317897106214L182.5791079107911,112.98171654767978L182.03745374537453,111.93124834327932L180.54790479047907,110.37146222159384L179.87083708370838,110.08497089312098L177.97504750475045,110.94444487853951L177.63651365136514,110.84894776904858L176.6886188618862,109.95764141379972L175.53760376037604,109.51198823617528L173.3709870987099,109.73481482498751L171.74602460246024,109.51198823617528L170.32418241824183,109.67115008532687L169.51170117011702,109.95764141379972L169.85023502350234,110.43512696125447L169.85023502350234,111.19910383718207L170.18876887688768,111.58109227514588L169.85023502350234,111.83575123378839L169.17316731673168,111.54925990531554L168.42839283928396,111.89941597344904L167.07425742574256,111.83575123378839L165.72012201220124,110.84894776904858L164.02745274527453,111.1036067276911L162.67331733173316,110.65795355006668L161.52230223022303,110.78528302938794L159.89733973397338,111.23093620701238L158.20467046704672,112.63156047954628L156.37658765876589,113.4273697253042L155.2932793279328,114.31867608055308L154.8870387038704,115.17815006597161L154.8870387038704,116.48327722901456L154.95474547454745,117.37458358426343L155.2932793279328,118.01123098086978L154.61621162116214,118.07489572053038L153.26207620762077,117.6610749127363L151.77252725272527,117.08809225579058L151.2308730873087,116.19678590054174L150.82463246324633,114.89165873749874L149.74132413241324,113.809358163268L149.06425642564255,112.69522521920692L148.11636163616362,111.42193042599426L146.82993299329934,110.65795355006668L145.27267726772678,110.689785919897L144.12166216621662,112.18590730192187L142.5644064406441,111.61292464497618L141.54880488048803,111.03994198803046L141.07485748574857,110.02130615346036L140.46549654965497,109.03450268872055L139.38218821882188,108.20686107313233L138.36658665866588,107.6020460463563L137.6895189518952,106.96539864975L134.43959395939595,106.96539864975L134.43959395939595,107.7293755256776L132.95004500450048,107.7293755256776L129.2261726172617,107.7293755256776L124.8929392939294,106.42424836263459L122.11696169616962,105.50110963755543L122.25237523752372,105.11912119959163L119.88263826382641,105.34194778840384L117.71602160216023,105.46927726772512L117.44519451945192,104.51430617281562L116.22647264726473,103.43200559858488L115.34628462846283,103.20917900977267L115.14316431643164,102.66802872265728L114.05985598559855,102.57253161316635L113.38278827882786,102.06321369588127L111.62241224122411,101.87221947689936L111.14846484648467,101.58572814842654L110.94534453445345,100.5670923138564L109.11726172617261,98.65715012403743L107.56000600060005,96.04689579795146L107.62771277127715,95.60124262032704L106.74752475247521,94.99642759355102L105.32568256825684,93.4048091020352L105.05485548554856,91.87685535018002L104.03925392539256,90.85821951560992L104.44549454945496,89.2984333939244L104.37778777877787,87.67498253257827L103.83613361336134,86.24252589021404L104.513201320132,84.45991317971632L104.7840284028403,82.77279757870953L104.98714871487147,81.05384960787246L104.64861486148618,78.53909239127748L104.03925392539256,76.91564152993135L103.497599759976,76.05616754451282L103.76842684268425,75.674179106549L106.47669766976696,76.31082650315531L107.49229922992296,78.09343921365306L107.96624662466243,77.61595366619828L107.62771277127715,76.05616754451282L107.01835183518352,74.52821379265758L112.36718671867186,74.52821379265758L117.91914191419144,74.52821379265758L119.74722472247228,74.52821379265758L125.502300230023,74.52821379265758L131.05425542554255,74.52821379265758L136.67391739173917,74.52821379265758L142.36128612861285,74.52821379265758L148.72572257225724,74.52821379265758L155.15786578657864,74.52821379265758L159.0171517151715,74.52821379265758L159.0848584858486,73.79606928656032L159.69421942194222,73.79606928656032L160.03275327532754,74.81470512113047L160.64211421142116,75.13302881943363L161.9285428542854,75.2603582987549L163.8243324332433,75.54684962722772L165.65241524152415,76.15166465400377L167.2096709670967,75.89700569536122L169.51170117011702,76.37449124281598L170.12106210621062,76.37449124281598L171.8137313731373,75.8333409557006L173.5741074107411,76.50182072213725L175.40219021902192,77.23396522823451L176.95944594459445,77.87061262484083L178.3812881288129,78.47542765161687L178.58440844084407,78.95291319907157L178.9906490649065,79.14390741805346L178.92294229422944,79.3349016370354L179.3968896889689,79.39856637669601L179.73542354235423,79.20757215771413L179.87083708370838,79.65322533533856L180.20937093709372,79.93971666381138L180.75102510251025,79.93971666381138L181.0218521852185,80.1625432526236L180.81873187318732,80.51269932075708L182.78222822282225,81.40400567600595L183.1884688468847,83.09112127701273L183.52700270027006,84.71457213835886L182.98534853485347,85.82870508241994L182.1051605160516,86.87917328682035L181.6989198919892,87.54765305325701L181.63121312131213,87.73864727223892L181.83433343334332,87.99330623088143L182.511401140114,88.2797975593543L182.98534853485347,88.2797975593543L185.15196519651965,87.29299409461449L187.11546154615462,87.00650276614164L189.55290529052905,86.05153167123215L189.55290529052905,85.86053745225021L189.41749174917493,85.28755479530457L189.14666466646665,84.93739872717109L189.95914591459146,84.61907502886793L191.78722872287227,84.61907502886793L193.54760476047605,84.61907502886793L194.15696569656967,83.88693052277061L194.3600860086009,83.72776867361905L196.39128912891292,82.39080914074576L197.2037703770377,82.04065307261227L200.04745474547457,82.04065307261227L203.500500050005,82.04065307261227L203.7036203620362,81.56316752515751L204.31298129812984,81.46767041566656L205.12546254625465,81.18117908719374L205.8025302530253,80.32170510177521L206.34418441844187,78.85741608958064L207.76602660266025,77.4249594472164L208.44309430943096,77.93427736450144L209.66181618161818,77.61595366619828L210.54200420042008,78.15710395331367L210.54200420042008,80.7355259095693ZM50.28007800780074,59.24867627410579L48.384288428842865,59.98082078020305L47.436393639363985,59.503335232748285L47.16556655665562,58.61202887749941L48.85823582358233,57.943549111062765L49.87383738373842,57.657057782589945L51.09255925592561,57.784387261911206L51.90504050405042,58.35736991885693ZM26.650415041504118,53.99633525210355L25.43169316931693,54.28282658057641L24.21297129712974,53.932670512442925L23.06195619561953,53.423352595157894L24.957745774577404,53.10502889685466L26.447294729472958,53.296023115836604ZM15.072557255725542,46.70672256096114L16.223572357235753,47.088710998924896L17.374587458745907,46.89771677994301L18.93184318431838,47.37520232739779L20.75992599259922,47.62986128604028L20.624512451245096,47.85268787485248L19.20267026702669,48.234676312816305L17.780828082808284,47.82085550502222L17.036053605360507,47.47069943688872L15.411091109110885,47.59802891621L14.937143714371416,47.43886706705838ZM72.89413941394139,35.56539312035039L72.8264326432643,42.5366821131897L72.8264326432643,53.26419074600629L74.72222222222223,53.3278554856669L76.55030503050301,53.83717340295199L77.83673367336735,54.664815018540196L79.52940294029406,55.90627744192254L81.35748574857485,54.85580923752207L83.25327532753272,54.219161840915746L84.20117011701174,55.20596530565555L85.48759875987597,55.96994218158315L87.24797479747974,56.82941616700174L88.3989898989899,58.16637569987499L90.2947794779478,60.33097684833653L93.54470447044702,61.508774532058226L93.54470447044702,62.68657221577992L92.52910291029104,63.6097109408591L91.51350135013499,62.90939880459213L89.82083208320833,62.30458377781615L89.2791779177918,60.649300546639694L86.84173417341731,59.153179164614784L85.82613261326131,57.370566454117125L84.06575657565762,57.24323697479585L81.08665866586654,57.17957223513518L78.85233523352338,56.6384219480198L74.99304930493048,54.696647388370536L73.16496649664964,54.346491320237035L69.84733473347336,53.67801155380039L67.2744774477448,53.83717340295199L63.55060506050603,52.977699417533444L61.31628162816281,52.181890171775535L59.285078507850756,52.563878609739305L59.623612361236155,53.86900577278227L58.60801080108007,53.99633525210355L56.441394139413944,54.378323690067376L54.74872487248723,55.0149710866737L52.71752175217517,55.42879189446778L52.44669466946692,54.31465895040671L53.25917591759173,52.468381500248356L55.29037903790379,51.89539884330266L54.74872487248723,51.41791329584794L52.37898789878983,52.468381500248356L51.09255925592561,53.70984392363073L48.384288428842865,55.04680345650401L49.73842384238429,55.96994218158315L47.97804780478049,57.306901714456444L45.94684468446843,58.10271096021437L44.05105510551056,58.67569361716009L43.57710771077109,59.503335232748285L40.66571657165713,60.49013869748808L40.056355635563534,61.38144505273695L37.88973897389741,62.17725429849487L36.53560356035604,62.01809244934327L34.84293429342932,62.55924273645864L32.87943794379436,63.19589013306502L31.322182218221826,63.83253752967133L28.139963996399672,64.34185544695637L27.80143014301433,64.05536411848354L29.90034003400342,63.16405776323468L31.72842284228426,62.59107510628897L33.691919191919226,61.54060690188855L36.06165616561657,61.34961268290661L37.00955095509545,60.55380343714876L39.58240824082412,59.439670493087675L39.9886488648865,59.05768205512385L41.410491049104905,58.38920228868719L41.74902490249025,56.988578016153284L42.696919691969185,55.874445072092215L40.530303030303,56.447427729037926L39.92094209420941,56.09727166090444L38.90534053405344,56.7975837971714L37.68661866186625,55.84261270226193L37.14496449644969,56.511092468698536L36.467896789679,55.587953743619394L34.572107210721015,56.32009824971664L33.42109210921092,56.32009824971664L33.2179717971797,55.20596530565555L33.5565056505651,54.537485539218906L32.40549054905489,53.83717340295199L29.90034003400342,54.219161840915746L28.343084308430832,53.3278554856669L27.056655665566552,52.882202308042466L27.056655665566552,51.79990173381172L25.567106710671055,51.00409248805386L26.311881188118832,49.92179191382303L27.869136913691364,48.871323709422626L28.546204620461992,47.916352614513144L30.035753575357546,47.78902313519188L31.322182218221826,48.0755144636647L32.87943794379436,47.18420810841586L34.23357335733573,47.34336995756746L35.655415541554135,46.738554930791395L35.31688168816879,45.87908094537288L34.23357335733573,45.56075724706973L35.655415541554135,44.828612740972446L34.50440044004398,44.86044511080274L32.47319731973198,45.274265918596896L31.931543154315477,45.68808672639099L30.441994199419923,45.274265918596896L27.80143014301433,45.46526013757877L25.025452545254495,45.019606959954345L24.21297129712974,44.25563008402675L21.84323432343234,43.173329509796005L24.483798379837992,42.3775202640381L28.681618161816175,41.454381538958884L30.238873887388763,41.454381538958884L29.96804680468051,42.40935263386842L33.96274627462748,42.34568789420776L32.40549054905489,41.16789021048605L30.103460346034637,40.43574570438881L28.749324932493266,39.51260697930961L26.988948894889518,38.7167977335517L24.4160916091609,38.111982706775706L25.43169316931693,37.1251792420359L28.749324932493266,37.061514502375246L31.11906190619061,36.202040516956686L31.593009300930078,35.27890179187756L33.48879887988795,34.387595436628686L35.38458845884588,34.19660121764676L38.90534053405344,33.33712723222823L40.66571657165713,33.4644567115495L43.509400940094,32.477653246809695L46.35308530853081,32.85964168477352L47.77492749274927,33.71911567019205L48.58740874087408,33.36895960205854L51.76962696269629,33.4644567115495L51.63421342134217,33.910109889173924L54.54560456045601,34.2284335874771L56.441394139413944,34.0374393684952L60.43609360936091,34.610422025440926L64.02455245524555,34.801416244422796L65.44639463946396,35.05607520306535L67.95154515451549,34.7377515047622L70.7952295229523,35.31073416170784Z"\n                          class="datamaps-subunit USA"></path>\n                    <path d="M463.08825882588263,96.39705186608495L463.15596559655967,95.25108655219357L460.6508150815082,94.45527730643565L458.6873187318732,93.53213858135648L457.468596859686,92.64083222610762L455.3019801980198,91.33570506306465L454.35408540854087,89.39393050341535L453.7447244724473,89.07560680511219L451.7135213521352,89.13927154477282L450.96874687468744,88.75728310680903L450.7656265626563,87.26116172478416L448.2604760476048,86.27435826004437L446.7032203220322,87.3566588342751L445.0782578257826,88.02513860071174L445.34908490849085,88.94827732579094L443.25017501750176,88.98010969562124L443.1824682468247,82.04065307261227L447.98964896489656,80.92652012855119L448.3958895889589,81.08568197770279L451.30728072807284,82.45447388040637L452.79682968296834,83.15478601667334L454.6249124912492,84.84190161768014L456.7915291529153,84.58724265903759L460.0414541454146,84.42808080988598L462.27577757775776,85.7968727125896L462.14036403640364,87.70681490240858L463.08825882588263,87.70681490240858L463.4267926792679,89.23476865426377L465.86423642364235,89.2984333939244L466.3381838183819,90.18973974917327L467.0829582958296,90.18973974917327L467.89543954395447,88.85278021629998L470.40059005900594,87.51582068342671L471.4161916191619,87.19749698512351L472.02555255525556,87.3566588342751L470.40059005900594,88.59812125765745L471.82243224322434,89.2984333939244L473.17656765676566,88.82094784646966L475.41089108910893,89.80775131120947L472.9734473447345,91.17654321391306L471.5516051605161,90.98554899493116L470.7391239123912,91.0492137345918L470.46829682968297,90.50806344747643L470.8745374537454,89.6485894620579L468.3693869386939,90.06241026985198L467.7600260026003,91.27204032340401L466.87983798379844,92.32250852780446L465.3225822582258,92.22701141831351L464.8486348634864,93.05465303390174L466.20277027702775,93.50030621152617L466.6090109010901,94.90093048406008L465.52570257025707,96.81087267387906L464.1715671567157,96.42888423591526Z"\n                          class="datamaps-subunit UZB"></path>\n                    <path d="M203.83903390339032,144.52759504952328L203.77132713271325,144.97324822714774L202.6880188018802,145.19607481595995L203.2973797379738,146.02371643154817L203.2973797379738,147.01051989628797L202.484898489849,148.12465284034906L203.16196619661966,149.6207742223739L203.97444744474447,149.49344474305266L204.3806880688069,148.12465284034906L203.83903390339032,147.4561730739124L203.7036203620362,146.02371643154817L206.0733573357336,145.25973955562057L205.8025302530253,144.400265570202L206.479597959796,143.795450543426L207.15666566656665,145.100577706469L208.44309430943096,145.1324100762993L209.66181618161818,146.18287828069975L209.72952295229524,146.81952567730607L211.42219221922193,146.81952567730607L213.45339533953393,146.62853145832418L214.53670367036705,147.4880054437427L215.95854585458548,147.71083203255492L217.04185418541854,147.13784937560922L217.04185418541854,146.6603638281545L219.34388438843882,146.5330343488332L221.64591459145916,146.5012019790029L220.02095209520954,147.07418463594863L220.6980198019802,147.96549099119744L222.1875687568757,148.09282047051872L223.6094109410941,149.0159591955979L223.88023802380238,150.54391294745307L224.89583958395838,150.48024820779247L225.64061406140615,150.9259013854169L224.15106510651066,152.04003432947795L223.94794479447944,152.7085140959146L224.62501250125013,153.40882623218155L224.15106510651066,153.75898230031504L223.0000500050005,154.0773059986182L223.0000500050005,154.93677998403675L222.52610261026103,155.4460979013218L223.81253125312531,156.87855454368605L224.0156515651565,157.4197048308014L223.33858385838585,158.12001696706838L221.23967396739675,158.85216147316564L219.8855385538554,159.1386528016385L219.34388438843882,159.58430597926292L217.85433543354335,159.1068204318082L216.43249324932492,158.85216147316564L216.0939593959396,159.04315569214756L216.97414741474148,159.5206412396023L216.90644064406442,160.79393603281497L217.1095609560956,161.97173371653665L218.73452345234523,162.13089556568826L218.8022302230223,162.51288400365206L217.51580158015804,163.05403429076742L217.24497449744973,163.84984353652533L216.500200020002,164.1681672348285L215.0783578357836,164.6138204124529L214.73982398239826,165.18680306939862L213.25027502750277,165.3141325487199L212.23467346734674,164.29549671414975L211.69301930193018,162.4492192639914L211.15136513651368,161.78073949755475L210.474297429743,161.36691868976067L211.42219221922193,160.41194759485117L211.35448544854484,159.99812678705703L210.81283128312833,159.45697649994165L210.474297429743,158.183681706729L210.60971097109712,156.84672217385574L211.01595159515952,156.2100747772494L211.35448544854484,155.19143894267927L210.67741774177418,154.87311524437612L209.5941094109411,155.09594183318833L208.23997399739974,155.00044472369737L207.495199519952,155.19143894267927L206.20877087708772,153.56798808133314L205.12546254625465,153.3451614925209L202.6880188018802,153.50432334167252L202.21407140714072,152.86767594506617L201.74012401240122,152.7085140959146L201.67241724172416,152.3265256579508L201.94324432443244,151.62621352168384L201.74012401240122,150.86223664575627L201.33388338833885,150.44841583796213L201.13076307630763,149.5889418525436L200.11516151615163,149.46161237322232L200.65681568156816,148.34747942916124L200.92764276427644,147.01051989628797L201.46929692969297,146.31020776002103L202.14636463646366,145.76905747290562L202.6203120312031,144.84591874782646Z"\n                          class="datamaps-subunit VEN"></path>\n                    <path d="M541.2218721872188,126.12848528760044L538.7167216721673,127.75193614894656L537.0917591759176,129.5345488594443L536.6855185518551,130.83967602248725L538.1750675067508,132.81328295196687L539.8677367736774,135.26437542890125L541.6281128112812,136.44217311262292L542.7791279127914,137.9382944946478L543.591609160916,141.4080228061523L543.388488848885,144.71858926850518L541.7635263526353,145.96005169188754L539.6646164616462,147.16968174543956L538.1073607360736,148.72946786712507L535.7376237623763,150.48024820779247L535.0605560556055,149.30245052407074L535.6022102210221,148.0291557308581L534.1803680368037,146.94685515662735L535.8053305330533,146.18287828069975L537.8365336533653,146.05554880137848L536.9563456345635,144.90958348748708L540.1385638563856,143.47712684512285L540.3416841684169,141.21702858717038L539.9354435443545,139.94373379395773L540.2739773977398,138.06562397396908L539.8000300030003,136.7604968109261L538.3781878187818,135.45536964788312L537.2271727172717,133.80008641670668L535.6699169916992,131.57182052858454L533.3678867886788,130.42585521469314L533.9095409540955,129.7573754482565L535.1282628262827,129.27988990080175L534.3834883488349,127.62460666962531L532.0814581458146,127.62460666962531L531.2689768976898,125.90565869878823L530.1179617961797,124.40953731676335L531.1335633563357,123.96388413913891L532.6231123112311,123.96388413913891L534.451195119512,123.7410575503267L536.0761576157615,122.7542540855869L536.9563456345635,123.45456622185387L538.7167216721673,123.80472228998734L538.3781878187818,124.8870228642181L539.3260826082608,125.65099974014569Z"\n                          class="datamaps-subunit VNM"></path>\n                    <path d="M653.6151115111511,197.623987926491L653.0057505750575,197.87864688513352L652.3963896389639,197.0510052695453L652.464096409641,196.54168735226023ZM652.2609760976097,194.7590746417625L652.5318031803181,196.2551960237874L652.0578557855786,196.03236943497518L651.6516151615161,196.12786654446612L651.3807880788079,195.61854862718104L651.3807880788079,194.1860919848168Z"\n                          class="datamaps-subunit VUT"></path>\n                    <path d="M404.8604360436044,105.75576859619798L404.8604360436044,106.90173391008935L404.5896089608961,107.44288419720473L403.7094209420942,107.69754315584726L403.7771277127713,107.22005760839252L404.25107510751076,106.96539864975L403.7771277127713,106.74257206093777L404.1833683368337,105.50110963755543Z"\n                          class="datamaps-subunit PSE"></path>\n                    <path d="M437.9013401340134,135.35987253839218L436.47949794979496,135.86919045567726L436.1409640964097,136.69683207126545L436.0732573257326,137.3334794678718L434.2451745174518,138.1292887136297L431.1983698369837,139.02059506887855L429.5734073407341,140.32572223192153L428.6932193219322,140.4212193414125L428.1515651565157,140.32572223192153L427.0682568256826,141.12153147767944L425.8495349534954,141.47168754581293L424.2922792279228,141.5671846553039L423.8183318331833,141.66268176479483L423.41209120912094,142.1719996820799L422.8704370437044,142.29932916140115L422.5996099609961,142.7768147088559L421.6517151715172,142.74498233902557L421.04235423542355,142.99964129766812L419.75592559255927,142.90414418817718L419.2819781978198,141.7900112441161L419.3496849684969,140.77137540954595L419.0111511151115,140.23022512243057L418.6726172617262,138.82960084989668L418.13096309630964,138.06562397396908L418.469496949695,137.97012686447812L418.3340834083408,137.1106528790596L418.5372037203721,136.7286644410958L418.469496949695,135.93285519533788L419.2819781978198,135.32804016856184L419.0788578857886,134.53223092280396L419.55280528052805,133.6090921977248L420.3652865286529,134.0865777451795L420.8392339233923,133.92741589602795L423.0058505850585,133.8955835261976L423.34438443844385,134.05474537534923L425.1724672467247,134.2457395943311L425.9172417241724,134.15024248484016L426.39118911891194,134.78688988144648L427.2713771377138,134.4685661831433L428.6255125512551,132.4949592536637L430.3858885888589,131.66731763807547L435.80243024302433,130.9351731319782L437.29197919791983,134.05474537534923Z"\n                          class="datamaps-subunit YEM"></path>\n                    <path d="M368.7050205020502,220.4159647249975L369.65291529152915,219.460993630088L370.39768976897693,220.0021439172034L370.6685168516852,220.7979531629613L371.54870487048703,220.92528264228255L372.6997199719972,221.27543871041604L373.7153215321532,221.1481092310948L375.4079907990799,220.1931381361853L375.4079907990799,213.2536815131763L375.9496449644965,213.54017284164917L377.03295329532955,215.32278555214688L376.89753975397537,216.46875086603828L377.3037803780378,217.1053982626446L378.65791579157917,216.9144040436627L379.5381038103811,216.08676242807448L380.48599859985995,215.51377977112878L380.8922392239224,214.62247341587994L381.8401340134014,214.1768202382555L382.6526152615262,214.39964682706773L383.53280328032804,214.94079711418308L385.0900590059006,215.03629422367402L386.2410741074108,214.5906410460496L386.44419441944194,214.01765838910393L386.7827282728273,213.09451966402474L387.7983298329833,212.96719018470347L388.3399839983998,212.26687804843652L389.0170517051705,210.99358325522385L390.7097209720972,209.59295898268994L393.35028502850287,208.22416707998633L394.0950595059506,208.22416707998633L395.0429542954296,208.5424907782895L395.6523152315232,208.3196641894773L396.66791679167915,208.51065840845916L397.54810481048105,211.15274510437544L398.0220522052205,212.48970463724874L397.6835183518352,214.5906410460496L397.8866386638664,215.25912081248623L396.93874387438746,214.90896474435277L396.39708970897095,215.06812659350436L396.1939693969397,215.60927688061975L395.72002200220027,216.3095890168867L395.72002200220027,216.946236413493L396.8033303330333,217.96487224806316L397.9543454345434,217.77387802908123L398.2928792879288,216.946236413493L399.71472147214723,216.946236413493L399.2407740774077,218.31502831619662L399.03765376537655,219.87481443788212L398.5637063706371,220.73428842330065L397.2772777277728,221.68925951821015L396.93874387438746,221.94391847685267L396.12626262626264,222.89888957176217L395.5846084608461,223.88569303650198L394.501300130013,225.22265256937527L392.40239023902393,227.16442712902457L391.04825482548256,228.31039244291594L389.62641264126415,229.1380340585042L387.6629162916292,229.87017856460147L386.71502150215025,229.9656756740924L386.51190119011903,230.5068259612078L385.3608860886088,230.22033463273493L384.41299129912994,230.57049070086842L382.3817881788179,230.22033463273493L381.2307730773078,230.44316122154717L380.4182918291829,230.3476641120562L378.52250225022505,231.07980861815346L376.89753975397537,231.39813231645667L375.7465246524652,232.09844445272358L374.86633663366337,232.13027682255392L374.12156215621565,231.4617970561173L373.44449444944496,231.42996468628695L372.63201320132015,230.60232307069873L372.56430643064306,230.85698202934128L372.2934793479348,230.3476641120562L372.2934793479348,229.26536353782546L371.6841184118412,227.9920687446128L372.2934793479348,227.6419126764793L372.2934793479348,226.20945603411508L371.0070507050705,224.45867569344767L370.0591559155916,222.86705720193186L370.0591559155916,222.83522483210155ZM392.47009700970096,221.11627686126445L391.65761576157615,220.54329420431878L390.77742774277425,220.92528264228255L389.7618261826183,221.65742714837984L388.74622462246225,222.83522483210155L390.16806680668066,224.2995138442961L390.8451345134514,224.1085196253142L391.1836683668367,223.5037045985382L392.2669766976698,223.21721327006534L392.537803780378,222.61239824328933L393.14716471647165,221.68925951821015Z"\n                          class="datamaps-subunit ZAF"></path>\n                    <path d="M399.5793079307931,184.0315660089459L400.52720272027204,184.85920762453412L401.00115011501146,186.45082611604994L400.66261626162617,186.960144033335L400.25637563756374,188.48809778519018L400.66261626162617,190.0478839068757L400.0532553255326,190.71636367331232L399.443894389439,192.46714401397972L400.459495949595,192.94462956143448L394.7721272127213,194.50441568312L394.9075407540754,195.84137521599325L393.485698569857,196.0960341746358L392.47009700970096,196.82817868073306L392.1992699269927,197.49665844716972L391.522202220222,197.623987926491L389.8972397239724,199.18377404817647L388.8816381638164,200.3934041017285L388.2045704570457,200.45706884138914L387.5952095209521,200.23424225257693L385.496299629963,200.0114156637647L385.15776577657766,199.88408618444345L385.15776577657766,199.72492433529186L384.41299129912994,199.31110352749775L383.1942694269427,199.18377404817647L381.63701370137017,199.6294272258009L380.4182918291829,198.45162954207922L379.13186318631864,196.8918434203937L379.26727672767277,190.90735789229424L383.1942694269427,190.93919026212455L382.9911491149115,190.30254286551823L383.2619761976198,189.60223072925126L382.92344234423445,188.71092437400242L383.1942694269427,187.78778564892323L382.9911491149115,187.21480299197754L383.6005100510051,187.24663536180785L383.73592359235926,187.85145038858386L384.6161116111611,187.78778564892323L385.76712671267126,187.97877986790513L386.44419441944194,188.8382538533237L387.93374337433744,189.09291281196622L389.0847584758476,188.48809778519018L389.49099909990997,189.47490124992999L390.9805480548055,189.76139257840285L391.65761576157615,190.55720182416076L392.40239023902393,191.57583765873088L393.82423242324234,191.6076700285612L393.6888188818882,189.57039835942095L393.14716471647165,189.92055442755444L391.86073607360737,189.18840992145715L391.3867886788679,188.8382538533237L391.5899089908991,186.960144033335L391.9284428442844,184.73187814521285L391.522202220222,183.90423652962463L392.0638563856386,182.6946064760726L392.537803780378,182.4717798872604L395.0429542954296,182.15345618895722L395.7877287728773,182.34445040793915L396.6002100210021,182.82193595539388L397.34498449844983,183.14025965369703L398.5637063706371,183.4585833520002Z"\n                          class="datamaps-subunit ZMB"></path>\n                    <path d="M396.66791679167915,208.51065840845916L395.6523152315232,208.3196641894773L395.0429542954296,208.5424907782895L394.0950595059506,208.22416707998633L393.35028502850287,208.22416707998633L392.1315631563157,207.3646930945678L390.7097209720972,207.07820176609496L390.16806680668066,205.86857171254294L390.16806680668066,205.2319243159366L389.35558555855584,205.00909772712438L387.18896889688966,202.93999368815383L386.57960796079607,201.85769311392306L386.2410741074108,201.5393694156199L385.496299629963,200.0114156637647L387.5952095209521,200.23424225257693L388.2045704570457,200.45706884138914L388.8816381638164,200.3934041017285L389.8972397239724,199.18377404817647L391.522202220222,197.623987926491L392.1992699269927,197.49665844716972L392.47009700970096,196.82817868073306L393.485698569857,196.0960341746358L394.9075407540754,195.84137521599325L395.0429542954296,196.54168735226023L396.6002100210021,196.5098549824299L397.480398039804,196.8918434203937L397.8866386638664,197.36932896784845L398.7668266826683,197.49665844716972L399.78242824282427,198.10147347394573L399.78242824282427,200.48890121121946L399.3761876187619,201.79402837426244L399.30848084808486,203.19465264679633L399.64701470147014,203.7358029339117L399.443894389439,204.8499358779728L399.1053605360536,205.00909772712438L398.6314131413141,206.37788962982796Z"\n                          class="datamaps-subunit ZWE"></path>\n                </g>\n            </svg>\n        </div>\n    </ion-scroll>\n</div>');
}]),angular.module("apps/mts/destinations/visited/visited.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/destinations/visited/visited.tpl.html",'<ion-list>\n    <h3 class="mts-visited-caption">Countries visited</h3>\n    <span ng-repeat="continent in continents">\n        <div class="item  item-icon-right ion-content mts-continent-data"\n             ng-click="selectContinent(continent)"\n             ng-class="{\'header-expanded\': continent.expanded}">\n            <p>{{continent.percentage}}% of {{continent.name}} </p>\n           <!-- <p ng-if="!continent.percentage">No countries of {{continent.name}} have been visited yet </p>-->\n            <img ao-sf-src="assets/{{continent.image}}"/>\n            <i class="icon ion-chevron-right" ng-if="continent.visited > 0"></i>\n        </div>\n        <div class="mts-continent-countries" ng-class="{expanded: continent.expanded}">\n            <div class="item" ng-repeat="country in continent.countries">\n                {{country.name}}\n            </div>\n        </div>\n    </span>\n</ion-list>')}]),angular.module("apps/mts/horizon/aboutHorizonPopoupContent.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/horizon/aboutHorizonPopoupContent.tpl.html",'<div ng-bind="\'HORIZON_OVERVIEW_INTRODUCTION_TITLE\' | translate" class="tq-heading-one"></div>\n<p ng-bind="\'HORIZON_OVERVIEW_INTRODUCTION_CONTENT\' | translate"></p>')}]),angular.module("apps/mts/horizon/horizon.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/horizon/horizon.tpl.html","")}]),angular.module("apps/mts/horizon/overview/header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/horizon/overview/header.tpl.html",'<div class="hero item mts-horizon overview header">\n</div>')}]),angular.module("apps/mts/horizon/overview/overview.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/horizon/overview/overview.tpl.html",'<div class="mts-horizon overview">\n\n    <!-- quotes -->\n    <div class="section quotes">\n        <div class="title">My Quotes</div>\n        <ul class="list">\n            <!-- list -->\n            <li ng-repeat="item in overview.quotes"\n                class="item">\n                <span class="icon quote-icon"></span>\n                <span class="info">\n                    <div class="name">{{item.rawRecord.Tour_Name__c}}</div>\n                    <div class="request-date">Requested on: {{item.rawRecord.Date_Ordered__c | date:"dd.MM.yyyy"}}</div>\n                    <!--<div class="type">-->\n                        <!--<i class="ion-checkmark"-->\n                           <!--ng-show="item.rawRecord.Virtual_Brochure_URL__c"></i>-->\n                        <!--<span ng-show="item.rawRecord.Virtual_Brochure_URL__c">e-brochure</span>-->\n                        <!--<i ng-show="item.rawRecord.Virtual_Brochure_URL__c"-->\n                           <!--data-title="On e-brochure you can download the brochure pdf here"-->\n                           <!--data-animation="fade"-->\n                           <!--class="ion-ios-information-outline tq-tooltip"></i>-->\n                    <!--</div>-->\n                </span>\n                <!--<span class="action"-->\n                      <!--ng-show="item.rawRecord.Virtual_Brochure_URL__c">-->\n                    <!--&lt;!&ndash; small-layout &ndash;&gt;-->\n                    <!--<a ng-href="{{item.rawRecord.Virtual_Brochure_URL__c}}"-->\n                       <!--class="mts-link download-icon ion-ios-download"-->\n                       <!--target="_blank"></a>-->\n                    <!--&lt;!&ndash; big-layout &ndash;&gt;-->\n                    <!--<a ng-href="{{item.rawRecord.Virtual_Brochure_URL__c}}"-->\n                       <!--class="mts-link download-button"-->\n                       <!--target="_blank"><button class="button primary">Download</button></a>-->\n                <!--</span>-->\n            </li>\n            <!-- empty -->\n            <div class="empty" ng-if="overview.quotes.length === 0">No quote requests</div>\n        </ul>\n    </div>\n\n\n    <!-- brochures -->\n    <div class="section brochure">\n        <div class="title">My Brochures</div>\n        <ul class="list">\n            <!-- list -->\n            <li ng-repeat="item in overview.brochures"\n                class="item">\n                <span class="icon brochure-icon"></span>\n                <span class="info">\n                    <div class="name">{{item.rawRecord.Brochure_Name__c}}</div>\n                    <div class="wrap">\n                        <div class="request-date">Requested on: {{item.rawRecord.Date_Ordered__c | date:"dd.MM.yyyy"}}</div>\n                        <div class="type">\n                            <i class="ion-checkmark"\n                               ng-show="item.rawRecord.Virtual_Brochure_URL__c"></i>\n                            <span ng-show="item.rawRecord.Virtual_Brochure_URL__c">e-brochure</span>\n                            <i ng-show="item.rawRecord.Virtual_Brochure_URL__c"\n                               data-title="On e-brochure you can download the brochure pdf here"\n                               data-animation="fade"\n                               class="ion-ios-information-outline tq-tooltip"></i>\n                        </div>\n                    </div>\n                </span>\n                <span class="action"\n                      ng-show="item.rawRecord.Virtual_Brochure_URL__c">\n                    <!-- small-layout -->\n                    <a ng-href="{{item.rawRecord.Virtual_Brochure_URL__c}}"\n                       class="mts-link download-icon ion-ios-download"\n                       target="_blank"></a>\n                    <!-- big-layout -->\n                    <a ng-href="{{item.rawRecord.Virtual_Brochure_URL__c}}"\n                       class="mts-link download-button"\n                       target="_blank"><button class="button primary">Download</button></a>\n                </span>\n            </li>\n            <!-- empty -->\n            <div class="empty" ng-if="overview.brochures.length === 0">No brochure requests</div>\n        </ul>\n    </div>\n\n    <!-- inspirations -->\n    <div class="section inspirations">\n        <div class="title">\n            Do you need inspiration to decide where you would like to go?\n        </div>\n        <div class="tq-content">\n            The Travel Corporation Top 10 Bucket List is incredibly special to us. <a href="https://ttc.com/topten/" class="mts-link" target="_blank">Discover why here</a>\n        </div>\n    </div>\n</div>')}]),angular.module("apps/mts/index.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/index.tpl.html",'<ion-side-menus ion-menu-overlay>\n\n    <!--There could be a left hand side menu here, but it\'s not a requirement for MTS-->\n\n    <!--The actual content that will be wrapped by the side menu component-->\n    <ion-side-menu-content edge-drag-threshold="20">\n        <ng-include src="\'apps/mts/layout/navbar/navbar.tpl.html\'"></ng-include>\n\n        <!-- inject ion-view content -->\n        <ion-nav-view class="main-container">\n        </ion-nav-view>\n\n    </ion-side-menu-content>\n\n    <!-- Right menu -->\n    <ion-side-menu side="right" class="mtsSideMenu" width="{{$root.sideMenuWidth}}">\n        <ng-include src="\'apps/mts/layout/sidemenu/sidemenu.tpl.html\'"></ng-include>\n    </ion-side-menu>\n\n</ion-side-menus>')}]),angular.module("apps/mts/layout/applayout.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/layout/applayout.tpl.html",'<ion-view  ng-class="state.data.templateClass">\n    <ion-content zooming="false" class="has-header" delegate-handle="main-application-scroll">\n        <div class="mtsHomeContent">\n\n            <ng-include ng-if="state.data.headerView" src="state.data.headerView"></ng-include>\n            <ng-include src="\'apps/mts/layout/tabbar/tabbar.tpl.html\'"></ng-include>\n            <!--TODO Review Animations-->\n            <!--class="animate-fade-slide-in animate-fade-slide-in-right animate-ripple"-->\n            <ui-view  name="contentView"></ui-view>\n        </div>\n    </ion-content>\n</ion-view>')}]),angular.module("apps/mts/layout/navbar/navbar.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/layout/navbar/navbar.tpl.html",'<!-- note force align-title center otherwise not working on android -->\n<ion-nav-bar class="tq-main-nav-bar"\n             align-title="center"\n             delegate-handle="main"\n        >\n    <ion-nav-back-button class="button-icon ion-chevron-left" ng-show="shouldShowBack">\n        <span class="hide-phone"> Back </span>\n        <span><!--This is just dummy to stop ionic adding it\'s default behavior-->  </span>\n    </ion-nav-back-button>\n\n    <ion-nav-buttons side="left">\n    </ion-nav-buttons>\n\n    <ion-nav-title>\n        <div class="nav-brand-logo"></div>\n    </ion-nav-title>\n\n    <ion-nav-buttons side="right">\n        <button  menu-toggle="right" class="icon ion-navicon-round">\n            <span class="nav-bar-menu-span">MENU</span>\n        </button>\n    </ion-nav-buttons>\n</ion-nav-bar>')}]),angular.module("apps/mts/layout/sidemenu/sidemenu.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/layout/sidemenu/sidemenu.tpl.html",'\n<ion-nav-bar class="tq-main-nav-bar">\n    <ion-nav-buttons side="left">\n        <button menu-close="right" class="icon ion-navicon-round"></button>\n    </ion-nav-buttons>\n</ion-nav-bar>\n<ion-content class="has-header">\n    <ion-list>\n\n        <!--MY PROFILE-->\n        <ion-item class="item item-avatar item-icon-left mts-side-menu-item set-border"\n                ui-sref="profile.edit" ng-click="closeSideMenu()">\n            <img ng-src="{{userAvatar}}" class="mtsBorderedIcon">\n            <div>MY PROFILE</div>\n        </ion-item>\n\n        <!-- TRIP LIST -->\n        <div ng-include="\'apps/mts/layout/sidemenu/triplist/triplist.tpl.html\'" ng-controller="TripListCtrl" data-ng-class="!toggleAddMyBooking ? \'trip-full-list\' : \'\' ">\n        </div>\n\n        <!--MY HORIZON-->\n        <ion-item class="item item-avatar item-icon-left mts-side-menu-item set-border"\n                ui-sref="horizon.overview" ng-click="closeSideMenu()"\n                ttc-if-enabled="myHorizon">\n            <i class="icon ion-icon ion-ios-location"></i>\n            <div>MY HORIZON</div>\n        </ion-item>\n\n\n        <!--DESTINATIONS-->\n       <!-- <ion-item class="item item-avatar item-icon-left mts-side-menu-item"\n                ttc-if-enabled="destinations" ui-sref="destinations.visited">\n            <i class="icon ion-icon ion-earth"></i>\n            <div>My Destinations</div>\n        </ion-item>-->\n\n        <ion-item class="item item-avatar item-icon-left mts-side-menu-item set-border item-complex"\n                  ng-click="backToSite()">\n            <a class="item-content item-height">\n                <i class="icon ion-icon ion-ios-home"></i>\n                <div>RETURN TO WEBSITE</div>\n            </a>\n        </ion-item>\n\n        <ion-item class="item item-avatar item-icon-left mts-side-menu-item set-border item-complex"\n                  ng-click="goToContactUs()">\n            <a class="item-content item-height">\n                <i class="icon ion-icon ion-chatbox-working"></i>\n                <div>CONTACT US</div>\n            </a>\n        </ion-item>\n\n        <!--LOGOUT-->\n        <ion-item class="item item-avatar item-icon-left mts-side-menu-item set-border item-complex">\n            <a class="item-content item-height" ng-click="singleLogout()">\n                <i class="icon ion-icon ion-power"></i>\n                <div>LOGOUT</div>\n            </a>\n        </ion-item>\n\n    </ion-list>\n</ion-content>')}]),angular.module("apps/mts/layout/sidemenu/triplist/triplist.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/layout/sidemenu/triplist/triplist.tpl.html",'<ion-item class="item item-icon-left mts-side-menu-item" data-ng-class="toggleAddMyBooking ? \'remove-border\' : \'set-border\'" \n ng-click="toggleAddMyBookingSection()">\n <i class="icon ion-icon ion-ios-location"></i>\n <i data-ng-if="!toggleAddMyBooking" class="icon ion-icon ion-ios-arrow-down my-trip"></i>\n <i data-ng-if="toggleAddMyBooking" class="icon ion-icon ion-ios-arrow-up my-trip"></i>\t\n <div>MY TRIPS</div>\n \t</ion-item>\n\n \n <div data-ng-if="toggleAddMyBooking" data-ng-class="{\'toggle-section\': pastPassengers.length > 0}"> \n <div class="add-another-booking-section" data-ng-if="currentPassengers.length == 0 && pastPassengers.length > 0" data-ng-class="{\'section-enable\': isAddAnotherBooking}">\n <i class="icon ion-icon ion-link"></i>\n <a data-ng-click="showAddAnotherBookingDialog()">Add another booking </a>\n \n</div>\n \n <div data-ng-if="currentPassengers.length > 0">\n <div data-ng-repeat="passenger in currentPassengers track by $index" class="mts-triplist-selected-trip-container"\n data-ng-class="{\'hide-img-section\': (passenger !== selectedPassenger && !passenger.rawRecord.isNewPassenger)}" data-ng-click="onPassengerClicked(passenger, $index)">\n\n <a data-ng-if="passenger ===selectedPassenger || passenger.rawRecord.isNewPassenger" data-ng-click="onSelectedPassengerImageClicked(passenger, $event)"><div class="mts-triplist-selected-trip-image"\n data-ng-style="{\'background-image\' : \'url(\' + passenger.rawRecord.Tour_Product__r.Background_URL__c + \'?w=500)\'}">\n</div>\n</a>\n<a data-ng-click="onSelectedPassengerImageClicked(passenger, $event)" data-ng-if="passenger ===selectedPassenger || passenger.rawRecord.isNewPassenger" class="added-trip-section" auto-focus>\n </a>\n<div class="trip-img-overlay" data-ng-class="{\'manage-trip-section\': passenger !==selectedPassenger && !passenger.rawRecord.isNewPassenger}"> </div>\n\n <a class="mts-triplist-selected-trip-details-frame"data-ng-class="{\'minimize-section\': passenger !==selectedPassenger && !passenger.rawRecord.isNewPassenger}">\n <div class="tour-name-wrapper tq-hero-title mts-triplist-selected-trip-details-name">\n  \n<span data-ng-bind="getTourProductName(passenger.rawRecord.Tour_Product__r.Product_Name__c)"></span> \n<div class="tool-tip-link" data-ng-if="(passenger === selectedPassenger || passenger.rawRecord.isNewPassenger)" data-ng-click="onSelectedPassengerImageClicked(passenger, $event)">\n </div>  \n <div data-ng-if="passenger.rawRecord.Tour_Product__r.Product_Name__c.length > 37" class="tq-hero-title mts-triplist-selected-trip-details-name tooltip" data-ng-class="{\'first-trip-section\': $first && passenger !== selectedPassenger && !passenger.rawRecord.isNewPassenger}"\n data-ng-bind="passenger.rawRecord.Tour_Product__r.Product_Name__c">\n</div>\n </div>\n <div class="product-display">\n <div class="mts-triplist-selected-trip-details-dates tq-hero-subtitle"\n data-ng-bind="localeShortDateFormat(passenger.rawRecord.Passenger_Start_Date__c)"> </div>\n </div>\n\n <div class="booking-ref-display">\n <div class="tq-hero-title mts-triplist-selected-trip-details-booking-ref">Booking:</div>\n<div class="tq-hero-title mts-triplist-selected-trip-details-booking-ref ref-font-weight"\n data-ng-bind="passenger.rawRecord.Booking_Name__c"> </div>\n </div>\n\n </a>\n </div>\n\n \n<div class="add-another-booking-section" data-ng-class="{\'section-enable\': isAddAnotherBooking}">\n <i class="icon ion-icon ion-link"></i>\n <a data-ng-click="showAddAnotherBookingDialog()">Add another booking </a>\n \n</div>\n </div><ion-item class="item mts-side-menu-trip-item mts-side-menu-trip-section find-booking no-height" data-ng-if="((currentPassengers.length==0 && pastPassengers.length==0) || isAddAnotherBooking) && !noBookingFoundMessage">\n <div data-ng-if="isAddAnotherBooking && (currentPassengers.length > 0 || pastPassengers.length > 0)" class="add-booking-cancel">\n <a class="cancel-btn" data-ng-click="closeAddAnotherBooking()">\n <i class="icon ion-icon ion-close md-close"></i>\n </a>\n </div>\n \n<div class="tq-hero-section-title find-booking-bg tq-hero-section-title-notrips my-trip-font">\n <div>\n <span>CAN\'T FIND YOUR BOOKING?</span>\n <div class="booking-info"> \n <span class="find-booking">Please wait \n <span class="find-booking-heading">24 hours</span>\n after making your booking. Bookings will only appear at circa <span class="find-booking-heading">45 days</span> prior to departure.</span> </div></div>\n <div class="booking-info">\n<form name="addMyBooking" class="simple-form" novalidate>\n <div class="add-booking-input">\n <label for="firstName">\n <input \n class="mts-input find-booking-text add-booking-input" name="firstName" data-ng-model="passengerData.firstName" placeholder="John" required/>\n </label>\n </div>\n <div class="add-booking-input"> <label for="lastName">\n <input \n class="mts-input find-booking-text add-booking-input" name="lastName" data-ng-model="passengerData.lastName" placeholder="Appleseed" required/>\n </label>\n </div>\n <div class="add-booking-input">\n <label for="bookingRef">\n <input class="mts-input find-booking-text add-booking-input pax-help" pattern=".{7,}" maxlength="7" name="bookingRef" data-ng-model="passengerData.bookingRef" placeholder="Booking Ref i.e A000000" required/>\n </label>\n <div>\n <input class="help-button" data-ng-click="displayBookingRefHelp()" type="button" value="?"/>\n </div>\n\n <div class="booking-ref-help-popup" data-ng-class="multiplePassengersFound ? \'pax-input-displayed\':\'\'" data-ng-if="showBookingReferenceHelp">\n <a data-ng-click="displayBookingRefHelp()">\n <i class="icon ion-icon ion-ios-close-empty help-poup"> </i>\n </a>\n <div class="help-message">\n <span class="help-booking-popup">Your booking ref can be found in your confirmation email.</span>\n </div>\n </div>\n \n</div>\n <div class="multiple-pax-info" data-ng-if="!multiplePassengersFound">\n <span class="find-booking"> Your details above must match what was on your booking. </span>\n </div>\n <div data-ng-if="multiplePassengersFound">\n <div class="multiple-pax-info">\n <span class="find-booking"> There are multiple persons on this booking with same name. </span> \n </div>\n <div class="booking-info">\n <span> Please select your passenger number.</span>\n </div>\n <div class="booking-info">\n <label for="passengerNumber">\n <select name="paxNumber" id="paxNumber" data-ng-model="paxRecord.paxNumber" required class="find-booking-text add-booking-input mts-input pax-help pax-num-dropdown ion-input-select"> \n <option value="" disabled selected hidden>i.e 001</option>\n <option data-ng-repeat="passenger in passengerNumberList | orderBy:passenger:false track by $index" value="{{passenger}}">{{passenger}}</option>\n </select>\n\n </label>\n \n <input data-ng-click="showPassengerNumberHelp()" class="help-button" type="button" value="?"/> \n </div>\n \n<div data-ng-if="paxNumberHelp" class="booking-ref-help-popup pax-help-message">\n <a data-ng-click="showPassengerNumberHelp()">\n <i class="icon ion-icon ion-ios-close-empty help-poup"> </i>\n </a>\n <div class="help-message">\n <span class="help-booking-popup">Your passenger number can be found in your confirmation email.</span>\n </div>\n </div>\n\n </div>\n <div class="booking-info">\n <input data-ng-click="addBookingToMyTrips()" data-ng-disabled="addMyBooking.$invalid" type="button" value="ADD MY BOOKING" class="button button-block add-my-booking-btn"/>\n </div>\n </form>\n\n </div>\n </div>\n </ion-item>\n \n\n <ion-item class="item mts-side-menu-trip-item mts-side-menu-trip-section find-booking no-height" data-ng-if="noBookingFoundMessage">\n <div class="tq-hero-section-title find-booking-bg tq-hero-section-title-notrips">\n\n <div>\n <span>Sorry we were unable to find your booking.</span>\n <div class="booking-info"> \n <span class="find-booking">\n Please ensure your details match what was on your booking, it has been <span class="find-booking-heading">24 hours</span> since the booking was made and your tour is at least <span class="find-booking-heading">45 days</span> away from departure.</span>\n </div>\n </div>\n <div class="booking-info">\n <form name="bookingNotFound" class="simple-form" novalidate>\n <div class="multiple-pax-info">\n <input data-ng-click="backToMTSTripSearch()" value="BACK" class="button button-block add-my-booking-btn" type="button">\n </div>\n </form>\n </div>\n </div>\n </ion-item>\n\n <ion-item class="item mts-side-menu-trip-item mts-side-menu-trip-section" data-ng-if="pastPassengers.length > 0">\n <a ng-bind="\'SIDE_MENU_PAS_TRIPS\' | translate" class="tq-hero-section-title"> </a>\n </ion-item>\n\n <div data-ng-repeat="passenger in pastPassengers track by $index"\n data-ng-class="(passenger === selectedPassenger || passenger.rawRecord.isNewPassenger) ? \'mts-triplist-selected-trip-container past-trip last-item\': \'item mts-side-menu-trip-item\'"\n data-ng-click="onPastPassengerClicked(passenger, $index)"\n class="mts-past-trip-item">\n\n <div data-ng-style="{\'background-image\' : \'url(\' + passenger.rawRecord.Tour_Product__r.Background_URL__c + \'?w=500)\'}"\n class="mts-triplist-selected-trip-image">\n </div>\n <a style="" data-ng-click="onSelectedPassengerImageClicked(passenger, $event)" data-ng-if="passenger===selectedPassenger" class="added-trip-section"> </a>\n<div class="trip-img-overlay past-trip"></div>\n <a class="mts-triplist-selected-trip-details-frame"\n data-ng-if="passenger===selectedPassenger || passenger.rawRecord.isNewPassenger"\n data-ng-click="onSelectedPassengerImageClicked(passenger, $event)">\n <div class="tour-name-wrapper tq-hero-title mts-triplist-selected-trip-details-name">\n \n<span data-ng-bind="getTourProductName(passenger.rawRecord.Tour_Product__r.Product_Name__c)"></span> \n<div class="tool-tip-link" data-ng-if="(passenger===selectedPassenger || passenger.rawRecord.isNewPassenger)" data-ng-click="onSelectedPassengerImageClicked(passenger, $event)">\n </div>\n <div data-ng-if="passenger.rawRecord.Tour_Product__r.Product_Name__c.length > 37" class="tq-hero-title mts-triplist-selected-trip-details-name tooltip"\n data-ng-bind="passenger.rawRecord.Tour_Product__r.Product_Name__c">\n </div>\n </div>\n \n<div class="product-display">\n <div data-ng-bind="localeShortDateFormat(passenger.rawRecord.Passenger_Start_Date__c)"\n class="tq-hero-subtitle mts-triplist-selected-trip-details-dates"></div>\n </div>\n\n\n <div class="booking-ref-display">\n <div class="tq-hero-title mts-triplist-selected-trip-details-booking-ref"> Booking:</div>\n <div data-ng-bind="passenger.rawRecord.Booking_Name__c"\n class="tq-hero-title mts-triplist-selected-trip-details-booking-ref ref-font-weight"> </div>\n </div>\n\n </a>\n\n <a data-ng-bind="passenger.rawRecord.Tour_Product__r.Product_Name__c"\n data-ng-if="passenger !==selectedPassenger && !passenger.rawRecord.isNewPassenger"\n class="tq-hero-subtitle tq-hero-tourtitle past-trip"> </a>\n <a data-ng-bind="displayDate(passenger)"\n data-ng-if="passenger !==selectedPassenger && !passenger.rawRecord.isNewPassenger"\n class="tq-hero-subtitle-date"> </a>\n\n </div></div>')}]),angular.module("apps/mts/layout/tabbar/tabbar.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/layout/tabbar/tabbar.tpl.html",'<div acn-ion-sticky class="mtsTabs tabs mts-substates-bar tabs-dark item">\n    <a ng-repeat="tab in state.data.tabs"\n       ui-sref="{{tab.state}}({{state.params|json}})"\n       ttc-if-enabled="{{tab.functionality}}"\n       ng-class="{\'selected\': tab.state == state.name}"\n       class="tab-item {{tab.cssClass}}">\n        {{tab.name}}\n        <div class="badge" ng-if="tab.badgeValue" ng-bind="tab.badgeValue">\n        </div>\n    </a>\n</div>')}]),angular.module("apps/mts/profile/header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/profile/header.tpl.html",'<div class="hero item">\n    <div class="mts-profile-blur-background" ng-style="{\'background-image\': backgroundImageCss()}"></div>\n    <div class="mts-profile-picutre-change" tq-input-file-attachment="saveUserAvatarToServer($event)">\n        <div class="mts-profile-picture" ng-style="{\'background-image\': backgroundImageCss()}">\n        </div>\n        <div class="mts-avatar-username" ng-bind="getProperUserName()"></div>\n        <div class="mts-avatar-change-text">\n            ADD / CHANGE\n        </div>\n    </div>\n</div>')}]),angular.module("apps/mts/profile/myprofile/aboutProfilePopoupContent.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/profile/myprofile/aboutProfilePopoupContent.tpl.html","<p ng-bind=\"'MY_PROFILE_INTRODUCTION' | translate\"></p>")}]),angular.module("apps/mts/profile/myprofile/edit.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/profile/myprofile/edit.tpl.html",'<div class="mts-myprofile mts-edit-profile">\n    <div class="mts-myprofile mts-my-profile-edit">\n        <div ttc-if-enabled="myProfile.aboutMe">\n            <label class="mts-view-field">\n                <span class="mts-edit-label" tq-bind-settings="profile.aboutMeLabel">About Me</span>\n                <textarea class="mts-about-me-textarea" rows="3" ng-model="currentUser.rawRecord.AboutMe"\n                          ng-focus="doScrolling($event)"\n                          old-focus="removeNextAndPrevious($event)"\n                          old-blur="addNextAndPrevious($event)"\n                          maxlength="1000" placeholder="{{::\'MY_BIO_INPUT_PLACEHOLDER\' | translate}}"></textarea>\n            </label>\n        </div>\n        <div class="mts-responsive-columns">\n            <div class="col mts-column">\n                <label class="mts-view-field mts-height-105">\n                    <span class="mts-edit-label" tq-bind-settings="profile.fullNameLabel">Full Name</span>\n                    <div class="mts-view-detail">{{::getProperUserName()}}</div>\n                </label>\n                <label class="mts-view-field mts-height-110">\n                    <span class="mts-edit-label" tq-bind-settings="profile.preferredNameLabel">Preferred Name</span>\n                    <input type="text" class="mts-input mts-top-15" maxlength="100"\n                           ng-model="personAccount.rawRecord.Preferred_Name__pc"\n                           name="Preferred_Name__pc" ng-keyup="validateFieldInline($event, \'\\\\d\', \'g\')" />\n                </label>\n                <label class="mts-view-field mts-height-110">\n                    <span class="mts-edit-label" tq-bind-settings="profile.middleNameLabel">Middle Name</span>\n                    <input type="text" class="mts-input mts-top-15" maxlength="100"\n                           name="Middle_Name_or_Initials__pc" ng-keyup="validateFieldInline($event, \'\\\\W|\\\\d|_\', \'g\')"\n                           ng-model="personAccount.rawRecord.Middle_Name_or_Initials__pc" />\n                </label>\n                <!-- address -->\n                <div class="mts-view-field mts-height-240">\n                    <span class="mts-edit-label" tq-bind-settings="profile.addressLabel">Address</span>\n                    <input type="text" class="mts-input" placeholder="Street" maxlength="230"\n                           ng-model="personAccount.rawRecord.BillingStreet" />\n                    <input type="text" class="mts-input" placeholder="City" maxlength="230"\n                           ng-model="personAccount.rawRecord.BillingCity" />\n                    <!-- country selection -->\n                    <div class="mts-input item-select country">\n                        <select ng-model="personAccount.rawRecord.BillingCountry"\n                                ng-options="option.alpha2 as option.name for option in countryCodes"\n                                ng-change="isPostalCodeRequired()">\n                            <option value="">Country</option>\n                        </select>\n                    </div>\n                    <!-- postal code only for countries that requires it -->\n                    <input type="text" class="mts-input" ng-attr-placeholder="{{postalCodeLabel}}" maxlength="230"\n                           ng-model="personAccount.rawRecord.BillingPostalCode"\n                           ng-show="postalCodeIsRequired"/>\n                </div>\n                <div class="mts-view-field mts-height-185">\n                    <span class="mts-edit-label" tq-bind-settings="profile.addressLabel">Update Your Email Address</span>\n                    <input type="text" class="mts-input" placeholder="Email" maxlength="230"\n                           ng-model="userEmail" />\n                    <input type="text" class="mts-input" placeholder="Email confirmation" maxlength="230"\n                           ng-model="userEmailConfirmation" />\n                </div>\n                <div class="mts-view-field">\n                    <button class="mts-profile-change-button" ng-click="redirectToChangePassword()">Change Your Password</button>\n                </div>\n            </div>\n            <div class="col mts-column">\n                <label class="mts-view-field mts-height-105">\n                    <span class="mts-edit-label" tq-bind-settings="profile.dateOfBirthLabel">Date of Birth</span>\n                    <!--<input type="date" class="mts-input" ng-if="!ageIsDefined" placeholder="dd/mm/yyyy"\n                           ng-model="personAccount.rawRecord.PersonBirthdate" />-->\n                    <ionic-datepicker  ng-if="!ageIsDefined" input-obj="datepickerObjectPopup">\n                        <button class="mts-view-detail mts-datepicker-button" ng-bind="getDatePickerValue()"></button>\n                    </ionic-datepicker>\n\n                    <div class="mts-view-detail" ng-if="ageIsDefined">\n                        {{::localeShortDateFormat(personAccount.rawRecord.PersonBirthdate)}}\n                    </div>\n                </label>\n\n                <!-- phone tour -->\n                <div class="mts-view-field mts-height-110">\n                    <span class="mts-edit-label" maxlength="40" tq-bind-settings="profile.tourPhoneLabel">On {{::"TRIP"|translate}} Phone Number</span>\n                    <div class="mts-profile-phone-flex">\n                        <div class="mts-input item-select">\n                            <select ng-model="personAccount.rawRecord.On_Tour_Number_Intl_Country__c"\n                                    ng-options="option.telephoneCodeLabel as option.telephoneCodeLabel for option in countryCodes">\n                                <option value="">Country</option>\n                            </select>\n                        </div>\n                        <input type="tel" placeholder="Area" name="On_Tour_Number_Area__c" ng-keyup="validateFieldInline($event, \'\\\\D\', \'g\')"\n                               class="mts-input area-code" ng-model="personAccount.rawRecord.On_Tour_Number_Area__c"/>\n                        <input type="tel" placeholder="Number" name="On_Tour_Number_Base__c" ng-keyup="validateFieldInline($event, \'\\\\D\', \'g\')"\n                               class="mts-input base-number" ng-model="personAccount.rawRecord.On_Tour_Number_Base__c"/>\n                    </div>\n                </div>\n                <!-- phone home-->\n                <div class="mts-view-field mts-height-110">\n                    <span class="mts-edit-label" maxlength="40" tq-bind-settings="profile.phoneLabel">Home Phone Number</span>\n                    <div class="mts-profile-phone-flex">\n                        <div class="mts-input item-select">\n                            <select ng-model="personAccount.rawRecord.Home_Phone_Intl_Code_Country__c"\n                                    ng-options="option.telephoneCodeLabel as option.telephoneCodeLabel for option in countryCodes">\n                                <option value="">Country</option>\n                            </select>\n                        </div>\n                        <input type="tel" placeholder="Area" name="Home_Phone_Area_Code__c" ng-keyup="validateFieldInline($event, \'\\\\D\', \'g\')" class="mts-input area-code" ng-model="personAccount.rawRecord.Home_Phone_Area_Code__c"/>\n                        <input type="tel" placeholder="Number" name="Home_Phone_Base_Number__c" ng-keyup="validateFieldInline($event, \'\\\\D\', \'g\')" class="mts-input base-number" ng-model="personAccount.rawRecord.Home_Phone_Base_Number__c"/>\n                    </div>\n                </div>\n                <!-- phone mobile (single field) -->\n                <label class="mts-view-field mts-height-240">\n                    <span class="mts-edit-label" style="margin-bottom: 1px" tq-bind-settings="profile.mobileLabel">Mobile Phone Number</span>\n                    <div class="mts-profile-phone-flex">\n                        <input type="tel" placeholder="Number" name="PersonMobilePhone" ng-keyup="validateFieldInline($event, \'\\\\D\', \'g\')"\n                               class="mts-input" ng-model="personAccount.rawRecord.PersonMobilePhone"/>\n                    </div>\n                </label>\n\n                <div class="mts-view-field mts-height-185">\n                    <span class="mts-edit-label" tq-bind-settings="profile.emergencyLabel">Emergency Contact Information</span>\n                    <input type="text" class="mts-input" maxlength="100" placeholder="Emergency Contact Name"\n                           ng-model="personAccount.rawRecord.Emergency_Contact_Name__c"\n                           name="Emergency_Contact_Name__c" ng-keyup="validateFieldInline($event, \'\\\\d\', \'g\')" />\n                    <input type="text" class="mts-input" maxlength="100" placeholder="Emergency Contact Relationship"\n                           ng-model="personAccount.rawRecord.Emergency_Contact_Relationship__c"\n                           name="Emergency_Contact_Relationship__c" ng-keyup="validateFieldInline($event, \'\\\\W|\\\\d|_\', \'g\')" />\n                    <!-- phone emergency contact -->\n                    <div class="mts-profile-phone-flex" style="margin: -10px 0px">\n                        <div class="mts-input item-select">\n                            <select ng-model="personAccount.rawRecord.Emergency_Contact_Intl_Country__c"\n                                    ng-options="option.telephoneCodeLabel as option.telephoneCodeLabel for option in countryCodes">\n                                <option value="">Country</option>\n                            </select>\n                        </div>\n                        <input type="tel" placeholder="Area" name="Emergency_Contact_Area__c" ng-keyup="validateFieldInline($event, \'\\\\D\', \'g\')" class="mts-input area-code" ng-model="personAccount.rawRecord.Emergency_Contact_Area__c"/>\n                        <input type="tel" placeholder="Phone" name="Emergency_Contact_Base__c" ng-keyup="validateFieldInline($event, \'\\\\D\', \'g\')" class="mts-input base-number" ng-model="personAccount.rawRecord.Emergency_Contact_Base__c"/>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div style="min-height: 200px;"></div>\n\n    <ion-content-fixed>\n        <button class="round-right-button" ng-click="saveChanges()">\n            SAVE\n        </button>\n    </ion-content-fixed>\n</div>');
}]),angular.module("apps/mts/profile/myprofile/view.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/profile/myprofile/view.tpl.html",'<div class="mts-myprofile mts-my-profile-view">\n    <!-- currentUser personAccount -->\n    <div ttc-if-enabled="myProfile.aboutMe">\n        <div class="mts-view-field">\n            <label class="mts-view-label" tq-bind-settings="profile.aboutMeLabel">About Me</label>\n            <div class="mts-view-detail" ng-bind="currentUser.rawRecord.AboutMe"></div>\n        </div>\n    </div>\n    <div class="mts-responsive-columns">\n        <div class="col mts-column">\n            <div class="mts-view-field">\n                <label class="mts-view-label" tq-bind-settings="profile.fullNameLabel">Full Name</label>\n                <div class="mts-view-detail" ng-bind="getProperUserName()"></div>\n            </div>\n            <div class="mts-view-field"\n                 ng-class="{\'mts-height-95\': personAccount.rawRecord.Preferred_Contact_Method__pc == \'Mobile\'}">\n                <label class="mts-view-label" tq-bind-settings="profile.preferredNameLabel">Preferred Name</label>\n                <div class="mts-view-detail" ng-bind="personAccount.rawRecord.Preferred_Name__pc"></div>\n            </div>\n            <div class="mts-view-field"\n                 ng-class="{\'mts-height-95\': personAccount.rawRecord.Preferred_Contact_Method__pc == \'Phone\'}">\n                <label class="mts-view-label" tq-bind-settings="profile.middleNameLabel">Middle Name</label>\n                <div class="mts-view-detail" ng-bind="personAccount.rawRecord.Middle_Name_or_Initials__pc"></div>\n            </div>\n            <div class="mts-view-field">\n                <label class="mts-view-label" tq-bind-settings="addressLabel">Address</label>\n                <div class="mts-view-detail" ng-bind="getFullAddress()"></div>\n            </div>\n        </div>\n        <div class="col mts-column">\n            <div class="mts-view-field">\n                <label class="mts-view-label" tq-bind-settings="profile.dateOfBirthLabel">Date of Birth</label>\n                <div class="mts-view-detail" ng-bind="localeShortDateFormat(personAccount.rawRecord.PersonBirthdate)"></div>\n            </div>\n            <div class="mts-view-field"\n                 ng-class="{\'mts-height-95\': personAccount.rawRecord.Preferred_Contact_Method__pc == \'Mobile\'}">\n                <label class="mts-view-label" tq-bind-settings="profile.mobileLabel">Mobile Number</label>\n                <div class="flex">\n                    <div class="mts-view-detail col" ng-bind="personAccount.rawRecord.PersonMobilePhone"></div>\n                    <div class="mts-preferred-method" ng-if="personAccount.rawRecord.Preferred_Contact_Method__pc == \'Mobile\'">\n                        Preferred method of contact to use\n                    </div>\n                </div>\n            </div>\n            <div class="mts-view-field"\n                 ng-class="{\'mts-height-95\': personAccount.rawRecord.Preferred_Contact_Method__pc == \'Phone\'}">\n                <label class="mts-view-label" tq-bind-settings="profile.phoneLabel">Telephone Number</label>\n                <div class="flex">\n                    <div class="mts-view-detail col" ng-bind="personAccount.rawRecord.Phone"></div>\n                    <div class="mts-preferred-method" ng-if="personAccount.rawRecord.Preferred_Contact_Method__pc == \'Phone\'">\n                        Preferred method of contact to use\n                    </div>\n                </div>\n            </div>\n            <div class="mts-view-field">\n                <label class="mts-view-label" tq-bind-settings="profile.emergencyLabel">Emergency Contact</label>\n                <div class="mts-view-detail" ng-bind="getEmergencyContact()"></div>\n            </div>\n        </div>\n    </div>\n    <div>\n\n    </div>\n    <ion-content-fixed ttc-if-enabled="myProfile.edit">\n        <button class="round-right-button" ng-class="{disabled: !personAccount}" ng-click="goToEditPage()">\n            EDIT\n        </button>\n    </ion-content-fixed>\n</div>')}]),angular.module("apps/mts/profile/preferences/preferences.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/profile/preferences/preferences.tpl.html",'<div class="mts-preferences"\n     ng-class="{\'android-native-browser\' : isAndroidNativeBrowser}">\n\n    <!-- auto fields -->\n    <div ng-repeat="field in layout"\n         class="field"\n         ng-if="shouldDisplayField(field.name)">\n\n        <div class="tq-field-label">\n            {{getFiledLabel(field[\'label\'])}}\n        </div>\n        <ul class="values-container">\n            <li ng-if="field.isMultipicklist || field.isPicklist" ng-repeat="option in field.picklistValues">\n                <!-- multiselect is radio -->\n                <ion-checkbox ng-if="field.isMultipicklist"\n                              ng-model="mutlipicklistMap[field.name][option]"\n                              ng-value="option"\n                              name="{{field.name}}[]"\n                              class="value-item multiselect"\n                              ng-change="onFieldValueChange(field.name)">\n                    <div class="value-label">{{option}}</div>\n                </ion-checkbox>\n\n                <!-- select is radio -->\n                <ion-radio ng-if="field.isPicklist"\n                           ng-model="preferencesRecord.rawRecord[field.name]"\n                           ng-value="option"\n                           name="{{field.name}}"\n                           icon="ion-ios-circle-filled"\n                           class="value-item select"\n                           ng-change="onFieldValueChange(field.name)">\n                    <!-- static icon when radio not selected -->\n                    <i class="radio-not-checked ion-ios-circle-outline"></i>\n                    <!-- radio\'s value -->\n                    <div class="value-label">{{option}}</div>\n\n                </ion-radio>\n            </li>\n            <li ng-if="field.type == \'boolean\'">\n                <ion-checkbox ng-model="preferencesRecord.rawRecord[field.name]"\n                              name="{{field.name}}"\n                              class="value-item multiselect"\n                              ng-change="onFieldValueChange(field.name)">\n                    <div class="value-label">Yes</div>\n                </ion-checkbox>\n            </li>\n            <li ng-if="field.type == \'string\' || field.type == \'textarea\'" class="mts-textfield-list-element">\n                <input class="mts-input" type="text" ng-model="preferencesRecord.rawRecord[field.name]"/>\n            </li>\n        </ul>\n\n        <!-- tick all exception on marketing -->\n        <div class="values-container"\n             ng-if="field.isMultipicklist">\n            <ion-checkbox class="value-item tick-all multiselect"\n                          ng-model="supportingFields.tickAll[field.name]"\n                          ng-change="toggleAllOptions(field.name)">\n                <div class="value-label">Select/Unselect all</div>\n            </ion-checkbox>\n        </div>\n\n    </div>\n\n    <!-- marketing only -->\n    <div ng-if="state.data.preferences === \'Marketing\'">\n        <!-- social networks -->\n        <div class="social section">\n            <div class="tq-heading-two">Connect with {{brandFullName}}</div>\n            <ul>\n                <li><button class="button"\n                            ng-click="open(\'facebook\')">Facebook</button></li>\n                <li><button class="button"\n                            ng-click="open(\'twitter\')">Twitter</button></li>\n                <li><button class="button"\n                            ng-click="open(\'pinterest\')">Pinterest</button></li>\n                <li><button class="button"\n                            ng-click="open(\'google\')">Google+</button></li>\n            </ul>\n        </div>\n\n        <!-- subscriptions -->\n        <div class="subscriptions section">\n\n            <div class="field">\n                <!-- brand -->\n                <div class="values-container extra-margin"\n                     ng-click="brandMarketingConsentRecord.rawRecord[\'Opt_In__c\'] = !brandMarketingConsentRecord.rawRecord[\'Opt_In__c\']">\n                    <div class="item value-item item-checkbox multiselect full-width">\n                        <div class="checkbox checkbox-input-hidden disable-pointer-events checkbox-circle">\n                            <input type="checkbox"\n                                   ng-model="brandMarketingConsentRecord.rawRecord[\'Opt_In__c\']"\n                                   ng-click="$event.stopPropagation()"\n                                   name="Opt_In__c">\n                            </input>\n                            <i class="checkbox-icon"></i>\n                        </div>\n                        <div class="value-label">I would like to receive special offers and communications from {{brandFullName}}</div>\n                    </div>\n                </div>\n                <!-- ttc -->\n                <div class="values-container extra-margin"\n                     ng-click="ttcMarketingConsentRecord.rawRecord[\'Opt_In__c\'] = !ttcMarketingConsentRecord.rawRecord[\'Opt_In__c\']">\n                    <div class="item value-item item-checkbox multiselect full-width">\n                        <div class="checkbox checkbox-input-hidden disable-pointer-events checkbox-circle">\n                            <input type="checkbox"\n                                   ng-model="ttcMarketingConsentRecord.rawRecord[\'Opt_In__c\']"\n                                   ng-click="$event.stopPropagation()"\n                                   name="Opt_In__c">\n                            </input>\n                            <i class="checkbox-icon"></i>\n                        </div>\n                        <div class="value-label">I would like to receive special offers and communications from <a ng-href="{{brandUrl}}" class="mts-link" target="_blank">The Travel Corporation</a></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <ion-content-fixed>\n        <button class="round-right-button" ng-click="save()">\n            SAVE\n        </button>\n    </ion-content-fixed>\n</div>\n\n\n<style>\n\n\n\n</style>')}]),angular.module("apps/mts/trip/chatter/aboutChatterPopupContent.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/chatter/aboutChatterPopupContent.tpl.html","<p ng-bind=\"'CHATTER_INTRODUCTION' | translate\"></p>\n")}]),angular.module("apps/mts/trip/chatter/actionbuttons.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/chatter/actionbuttons.tpl.html",'<div class="mts-chatter-content-actions" ng-controller="MtsChatterActionsCtrl">\n        <div class="mts-chatter-like" ng-click="actionButtonsExtended.displayComments(record)">\n            <a>\n                <i class="icon icon-mts-bubble mts-round-icon"\n                    ng-class="{\'mts-chatter-like-highlighted\' : record.displayComments}"></i>\n            </a>\n            <a class="mts-chatter-like-text-link">\n                <span class="mts-chatter-like-text">\n                    <span class="mts-chatter-like-count" ng-bind="record.rawRecord.CommentCount"></span>\n                    Comment<span ng-if="record.rawRecord.CommentCount == 0 || record.rawRecord.CommentCount > 1">s</span>\n                </span>\n            </a>\n        </div>\n\n        <div class="mts-chatter-like">\n            <a ng-click="actionButtonsExtended.toggleLike(record)">\n                <i class="icon icon-mts-thumbsup mts-round-icon"\n                    ng-class="{\'mts-chatter-like-highlighted\' : record.chatterData.LikedByCurrentUser}"></i>\n            </a>\n            <a class="mts-chatter-like-text-link" ng-click="actionButtonsExtended.displayLike(record)">\n                <span class="mts-chatter-like-text">\n                    <span class="mts-chatter-like-count" ng-bind="record.rawRecord.LikeCount"></span>\n                    Like<span ng-if="record.rawRecord.LikeCount == 0 || record.rawRecord.LikeCount > 1">s</span>\n                </span>\n            </a>\n        </div>\n        <a class="test tq-button-share" ng-click="actionButtonsExtended.share(record, \'share-pop-up\')">\n            <i class="icon-mts-share2 icon mts-round-icon"></i>\n        </a>\n</div>\n')}]),angular.module("apps/mts/trip/chatter/chatter.side.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/chatter/chatter.side.tpl.html",'<ion-content class="mts-chatter-side-post">\n    <ng-include ng-controller="MtsChatterPostController" src="\'apps/mts/trip/chatter/header.tpl.html\'"></ng-include>\n    <div ng-controller="MtsChatterSideCtrl">\n        <ng-include ng-if="displayChatter" src="\'apps/mts/trip/chatter/chatter.tpl.html\'"></ng-include>\n    </div>\n</ion-content>')}]),angular.module("apps/mts/trip/chatter/chatter.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/chatter/chatter.tpl.html",'<div class="mts-chatter-content">\n    <tq-chatter-feed feed-type="chatter.chatterFeedType" feed-object-id="chatter.chatterFeedObjectId"\n                     delegate-handle="trip-chatter-feed"\n                     readonly="isTripArchived"\n                     ng-if="chatter.chatterFeedObjectId"\n                     ng-class="{\'readonly-feed\' : isTripArchived || isChatterGroupArchived}">\n\n        <div class="tq-list-content">\n            <ion-list class="tq-list-items-wrapper" can-swipe="swipable">\n                <div ng-repeat="record in records">\n                    <tq-chatter-feeditem record="record"\n                                         deletable="true"\n                                         index="$index"\n                                         record="record"\n                                         object-api-name="\'FeedIten"\n                                         click="click(index, record)">\n                        <tq-chatter-action-buttons\n                                template-url="apps/mts/trip/chatter/actionbuttons.tpl.html">\n                        </tq-chatter-action-buttons>\n                    </tq-chatter-feeditem>\n                    <div class="mts-chatter-post-likes" ng-show="record.displayLikes && record.rawRecord.LikeCount > 0">{{record.chatterData.LikesMessage}}</div>\n\n                    <div class="mts-comments-display" ng-if="record.displayComments"\n                         ng-init="initList(record.comments)"\n                         ng-controller="MtsChatterCommentsCtrl">\n                        <div class="mts-chatter-post-likes mts-chatter-comments-count"\n                             ng-click="loadAllComments(record)"\n                             ng-if="record.rawRecord.CommentCount > 0 && (!commentsList || commentsList.length < record.rawRecord.CommentCount) ">\n                            Show all {{record.rawRecord.CommentCount}} comments\n                        </div>\n                        <tq-chatter-feed-comment ng-if="record.displayComments"\n                                                 ng-repeat="feedComment in commentsList"\n                                                 deletable="false"\n                                                 record="feedComment">\n                            <tq-chatter-action-buttons template-url="apps/mts/trip/chatter/commentbuttons.tpl.html">\n                            </tq-chatter-action-buttons>\n                        </tq-chatter-feed-comment>\n                        <div class="mts-send-message mts-send-comment" ng-if="!readonly">\n                            <textarea ng-model="comment.text" ng-disabled="comment.isSending"></textarea>\n                            <button ng-disabled="comment.isSending || !comment.text || comment.text == \'\'"\n                                    ng-click="sendComment(comment, record)">\n                                <ion-spinner icon="spiral" ng-if="comment.isSending"></ion-spinner>\n                                <span ng-if="!comment.isSending">COMMENT</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </ion-list>\n        </div>\n        <ion-infinite-scroll ng-if="shouldLoadMore()" on-infinite="loadMore()" distance="10%">\n            <ion-spinner icon="spiral"></ion-spinner>\n        </ion-infinite-scroll>\n    </tq-chatter-feed>\n</div>\n')}]),angular.module("apps/mts/trip/chatter/commentbuttons.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/chatter/commentbuttons.tpl.html",'<div class="mts-chatter-content-actions mts-comment-buttons" ng-controller="MtsChatterActionsCtrl">\n\t<div class="mts-chatter-time" ng-bind="actionButtonsExtended.chatterFormatDate(record)"></div>\n    <div class="mts-chatter-like">\n        <a ng-click="actionButtonsExtended.toggleLike(record)">\n            <i class="icon icon-mts-thumbsup mts-round-icon"\n               ng-class="{\'mts-chatter-like-highlighted\' : record.chatterData.LikedByCurrentUser}"></i>\n        </a>\n    </div>\n</div>\n\n')}]),angular.module("apps/mts/trip/chatter/header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/chatter/header.tpl.html",'<div class="hero item mts-chatter-header-hero" ng-controller="MtsChatterPostController">\n\t<div class="chatter-post-actions">\n\t    <div class="chatter-post-comment">\n\t\t\t<label class="item-input chatter-post-comment-label">\n\t\t\t    <textarea ng-model="post.input"\n\t\t\t              input="post.input"\n                          ng-disabled="isTripArchived || isChatterGroupArchived"\n                          ng-readonly="isTripArchived || isChatterGroupArchived"\n                          ng-attr-placeholder="{{::getChatterAvailabilityMessage()}}"\n                          ng-style="post.hideText"\n\t\t\t              class="chatter-post-comment-area"></textarea>\n\t\t\t</label>\n\t\t</div>\n\t\t<div class="row post-button-row chatter-post-attachment" >\n\t            <i class="icon icon-mts-camera mts-round-icon chatter-post-attachment-btn"\n                    ng-if="!isTripArchived && !isChatterGroupArchived"\n\t            \ttq-input-file-attachment="attachChatterPhoto($event)"\n\t                ng-hide="userCanDeleteAttachment()"></i>\n\t            <i class="icon icon-mts-cancel-circle mts-round-icon chatter-post-attachment-btn chatter-post-attachment-remove-btn" ng-show="userCanDeleteAttachment()" ng-click="removeAttachment()"></i>\n\t        <img ng-src="{{getAttachmentPreview()}}" \n\t        \tng-show="userCanDeleteAttachment()"\n\t        \tclass="chatter-post-attachment-preview" />\n\t    </div>\n\t</div>\n\t<div class="chatter-post-comment-button">\n        <button ng-disabled="post.isDisabled || isTripArchived || isChatterGroupArchived" ng-click="post.addHashTagAndSend(post)"\n                class="button mts-post-send-button" \n                ng-class="{\'chatter-post-comment-button-highlighted\': (post.input.length > 0 || userCanDeleteAttachment())}">Post\n        </button>\n    </div>\n</div>')}]),angular.module("apps/mts/trip/community/aboutCommunityPopoupContent.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/community/aboutCommunityPopoupContent.tpl.html","<p ng-bind=\"'COMMUNITY_INTRODUCTION' | translate\"></p>\n")}]),angular.module("apps/mts/trip/community/community.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/community/community.tpl.html",'<div class="mts-community-content">\n    <div ng-if="travelDirector" class="item item-avatar item-icon-right mts-community-member mts-community-director">\n        <img ng-src="{{travelDirector.rawRecord.SmallPhotoUrl}}"/>\n\n        <h2 ng-bind="travelDirector.rawRecord.Name"></h2>\n        <p>{{ ::\'TRAVEL_DIRECTOR\' | translate}}</p>\n    </div>\n    <p class="mts-loading-display" ng-if="areFollowersLoading">\n        <ion-spinner icon="spiral"></ion-spinner>\n    </p>\n    <div ng-if="!areFollowersLoading" ng-repeat="communityMember in communityList"\n         class="item item-avatar item-icon-right mts-community-member"\n         ui-sref="trip.conversation({id: passengerId, memberId: communityMember.userData.Id})"\n         ng-class="{\'mts-conversation-selected\' : isSelectedConversation(communityMember)}"\n         ng-click="openConversation($event, communityMember)">\n        <img ng-src="{{communityMember.photoData.standardEmailPhotoUrl}}"/>\n\n        <div class="mts-community-midddle-block">\n            <div class="mts-community-member-top">\n                <h2>{{communityMember.userData.Name}}</h2>\n                <div class="mts-community-date">\n                    {{communityMember.conversationData.rawRecord.Last_Message_Datetime__c | date:"dd.MM.yyyy"}}\n                </div>\n            </div>\n            <p class="display-all-text" ng-bind="communityMember.userData.AboutMe"></p>\n        </div>\n        <div class="item-image item-data mts-community-button round-right-button-unsized">\n            <img ao-sf-src="assets/email@2x.png">\n            <div class="badge"\n                 ng-if="communityMember.conversationData.rawRecord.Unread_Messages_Count__c && !isSelectedConversation(communityMember)"\n                 ng-bind="communityMember.conversationData.rawRecord.Unread_Messages_Count__c">\n            </div>\n        </div>\n        <div class="mts-community-button mts-mute-button"\n             ng-if="!isTripArchived"\n             ng-click="toggleMute(communityMember, $event)"\n             ng-class="getCommunityMemberClass(communityMember)">\n        </div>\n    </div>\n</div>')}]),angular.module("apps/mts/trip/conversation/conversation.side.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/conversation/conversation.side.tpl.html",'<ion-content ng-controller="MtsRightCommunityListCtrl" class="mts-community-side-list">\n    <ng-include src="\'apps/mts/trip/community/community.tpl.html\'"></ng-include>\n</ion-content>')}]),angular.module("apps/mts/trip/conversation/conversation.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/conversation/conversation.tpl.html",'<div class="mts-community-conversation">\n    <div class="item item-avatar item-icon-right mts-conversation">\n        <img ng-src="{{recipient.rawRecord.SmallPhotoUrl}}"/>\n\n        <h2 ng-bind="recipient.rawRecord.Name"></h2>\n    </div>\n    <p class="mts-loading-display" ng-if="false">\n        <ion-spinner icon="spiral"></ion-spinner>\n    </p>\n    <tq-chatter-conversation delegate-handle="trip-conversation" conversation-id="conversationId"\n            on-refresh="setNewLatestSeenDate($response)">\n        <div ng-repeat="message in messages" class="item mts-message mts-message"\n             ng-class="{\'your-message\': message.chatterData.SentByYou}">\n            <p class="mts-message-text display-all-text" ng-bind-html="message.rawRecord.Body"></p>\n            <div class="mts-message-description">\n                <span ng-if="message.chatterData.SentByYou">You </span>\n                <span ng-if="!message.chatterData.SentByYou" ng-bind-html="message.chatterData.UserName"></span>\n                 wrote on {{message.rawRecord.SentDate | date: "HH:mm, dd.MM.yyyy"}}.\n            </div>\n        </div>\n        <ion-infinite-scroll ng-if="shouldLoadMore()" on-infinite="loadMore()" distance="10%"></ion-infinite-scroll>\n    </tq-chatter-conversation>\n    <div class="mts-text-post-spacer" ng-if="!isTripArchived"></div>\n    <ion-content-fixed>\n        <div class="mts-send-message mts-send-private-message" ng-hide="isTripArchived">\n            <textarea ng-model="message.text" ng-disabled="message.isSending || isReceiverMuted()"\n                      ng-focus="doTextAreaFocus()"\n                      ng-attr-placeholder="{{getPlaceholderMessage()}}"></textarea>\n            <button ng-disabled="message.isSending || !message.text || message.text == \'\' || isReceiverMuted()"\n                    ng-click="sendPrivateMessage(message)">\n                <ion-spinner icon="spiral" ng-if="message.isSending"></ion-spinner>\n                <span ng-if="!message.isSending">SEND</span>\n            </button>\n        </div>\n    </ion-content-fixed>\n</div>')}]),angular.module("apps/mts/trip/header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/header.tpl.html",'<div>\n    <div class="hero item trip-hero"\n         ng-style="{\'background-image\' : \'url(\' + tourProduct.rawRecord.Background_URL__c + \')\'}">\n        <div class="content"  >\n            <h2>\n                <a class="light">{{::exploreText()}}</a>\n            </h2>\n        </div>\n    </div>\n</div>\n')}]),angular.module("apps/mts/trip/itinerary/aboutItineraryPopoupContent.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/itinerary/aboutItineraryPopoupContent.tpl.html","<p ng-bind=\"'ITINERARY_INTRODUCTION' | translate\"></p>\n")}]),angular.module("apps/mts/trip/itinerary/header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/itinerary/header.tpl.html",'<div class="hero item mts-itinerary-header-hero" \n\tng-class="{\'full-height-map\' : fullHeightMap, \'modal-map\' : modalMap}">\n\t<img class="mts-itinerary-map" \n\t\ttq-lazy-src="{{tourProduct.rawRecord.Map_URL__c}}" \n\t\tng-click="toggleMap()" />\n    <i class="icon ion-arrow-expand mts-itinerary-expand" ng-click="toggleMap()"></i>\n</div>')}]),angular.module("apps/mts/trip/itinerary/itinerary.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/itinerary/itinerary.tpl.html",'<div class="mts-itinerary-content">\n  <ul class="accordion">\n    <li ng-repeat="item in itineraryItems" ng-class="{active: $index == selected}"\n        ng-attr-id="{{item.rawRecord.Id}}">\n        <h2 class="block-header" ng-click="open($index)">\n            <div class="itinerary-date">\n                <div>\n                    {{monthDay(itineraryItemsMap[item.rawRecord.Id])}}\n                </div>\n                <div>\n                    {{weekDay(itineraryItemsMap[item.rawRecord.Id])}}\n                </div>\n            </div>\n            <div class="itinerary-title">{{item.rawRecord.Title__c}}</div>\n        </h2>\n        <div class=\'mts-accordion-details\'>\n          <div class="mts-itinerary-details">\n            <span>{{::item.rawRecord.Text__c}}</span><br/>\n            <h5 ng-if="item.rawRecord.Accomodation__c.length > 0">Accomodation</h5>\n            <span>{{::item.rawRecord.Accomodation__c}}</span>\n\n            <div ng-if="itineraryReviewsMap[item.rawRecord.Id]"\n               ng-init="itemReview = itineraryReviewsMap[item.rawRecord.Id]"\n               class="mts-itinerary-item-review-block">\n              <div class="mts-itinerary-item-review" ng-if="!isCommentFunctionallityDisabled">\n                  <h5 ng-if="itemReview.rawRecord.Comment__c">Your review</h5>\n                  <span>{{::itemReview.rawRecord.Comment__c}}</span>\n              </div>\n              <div class="itinerary-item-thumbs-selected itinerary-item-thumb"\n                   ng-class="{\'icon-mts-thumbsup\' : itemReview.rawRecord.Rating__c === \'Like\', \'icon-mts-thumbsdown\': itemReview.rawRecord.Rating__c === \'Dislike\'}">\n              </div>\n            </div>\n\n            <div class="thumbs-container" ng-if="itineraryCouldBeReviewed[item.rawRecord.Id] && !isTripArchived">\n                <div class="icon-mts-thumbsup itinerary-item-thumb"\n                     ng-class="{\'itinerary-item-thumbs-selected\' : newItineryItemReview.rawRecord.Rating__c == \'Like\'}"\n                     ng-click="makeNewItineraryReview(item, true, true)" style=""></div>\n                <div class="icon-mts-thumbsdown itinerary-item-thumb"\n                     ng-class="{\'itinerary-item-thumbs-selected\' : newItineryItemReview.rawRecord.Rating__c == \'Dislike\'}"\n                     ng-click="makeNewItineraryReview(item, false, isCommentFunctionallityDisabled)"></div>\n            </div>\n\n            <div class="itinerary-item-comment"\n                 ng-if="selectedInterviewId == item.rawRecord.Id && !isTripArchived && !isCommentFunctionallityDisabled">\n              <label class="item item-input item-stacked-label">\n                  <span class="input-label">Your Feedback:</span>\n                  <textarea ng-model="newItineryItemReview.rawRecord.Comment__c" rows="4" ng-attr-placeholder="{{itineraryReviewPlaceholder}}" class="ng-pristine ng-valid ng-touched" style=""></textarea>\n              </label>\n              <div class="itinerary-item-comment-actions">\n                  <button class="button button-cancel" ng-click="cancelItineryItemReview()">Cancel</button>\n                  <button class="button button-submit" ng-click="itineraryItemThumb(\'down\')">Submit</button>\n              </div>\n            </div>\n          </div>\n        </div>\n    </li>\n  </ul>\n</div>\n')}]),angular.module("apps/mts/trip/journal/aboutJournalPopoupContent.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/journal/aboutJournalPopoupContent.tpl.html","<p ng-bind=\"'JOURNAL_INTRODUCTION' | translate\"></p>\n")}]),angular.module("apps/mts/trip/journal/header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/journal/header.tpl.html",'<div class="hero item mts-chatter-header-hero mts-journal-hero" >\n\t<div class="hero item trip-hero"\n         ng-style="{\'background-image\' : \'url(\' + tourProduct.rawRecord.Background_URL__c + \')\'}">\n\t\t<div tq-carousel="mtsJournalCarousel"></div>\n    </div>\n</div>')}]),angular.module("apps/mts/trip/journal/journal-day-dropdown.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/journal/journal-day-dropdown.tpl.html",'<ion-popover-view class="mtsJournalPopover">\n    <ion-content>\n        <ion-list>\n            <a ng-repeat="indexOfDay in daysInDropDown"\n               ng-class="{\'selected\': indexOfDay === numberOfSelectedDay}"\n               ui-sref="trip.journal({numberOfDay : indexOfDay})"\n               class="tab-item item">\n                Day&nbsp;{{indexOfDay}}\n            </a>\n        </ion-list>\n    </ion-content>\n</ion-popover-view>')}]),angular.module("apps/mts/trip/journal/journal.note.edit.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/journal/journal.note.edit.tpl.html",'<div class="mts-journal-note-edit-frame">\n\n    <ion-list>\n\n        <ion-item class="mts-journal-note-title-item" ng-if="itineraryItem.rawRecord.Title__c">\n            <b>\n                <div>{{::itineraryItem.rawRecord.Title__c}}</div>\n            </b>\n        </ion-item>\n\n        <ion-item>\n            <input class="mts-journal-note-title-input input"\n                   ng-model="selectedNote.rawRecord.Title__c"\n                   ng-maxlength="255"\n                   ng-attr-placeholder="{{\'JOURNAL_NOTE_TITLE_PLACEHOLDER\' | translate}}"/>\n\n            <i class="mts-cancel-note-edit icon ion-close-round" ng-click="cancelEditing()"></i>\n        </ion-item>\n\n        <ion-item>\n            <textarea class="mts-journal-note-body-textarea"\n                      rows="4"\n                      ng-model="selectedNote.rawRecord.Body__c"\n                      maxlength="1000"\n                      ng-attr-placeholder="{{\'JOURNAL_NOTE_BODY_PLACEHOLDER\' | translate}}"></textarea>\n        </ion-item>\n    </ion-list>\n\n    <ion-content-fixed>\n\n        <button class="round-right-button mts-journal-note-save-button"\n                ng-click="onSaveNoteClicked($event, selectedNote)"\n                ng-bind="\'SAVE_NOTE\' | translate">\n        </button>\n\n    </ion-content-fixed>\n</div>\n');
}]),angular.module("apps/mts/trip/journal/journal.note.view.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/journal/journal.note.view.tpl.html",'<div class="mts-journal-note-view-frame" ng-click="onEditNoteClicked()">\n\n    <ion-list>\n\n        <ion-item class="mts-journal-note-date-item">\n\n            <div ng-bind="selectedNote.rawRecord.MomentTimeCFormatted"></div>\n        </ion-item>\n\n        <ion-item class="mts-journal-note-title-item" ng-if="itineraryItem.rawRecord.Title__c">\n            <b>\n                <div>{{::itineraryItem.rawRecord.Title__c}}</div>\n            </b>\n        </ion-item>\n\n        <ion-item class="mts-journal-note-title-item"\n                  ng-if="selectedNote.rawRecord.Title__c && selectedNote.rawRecord.Title__c != \'\'">\n            <b>\n                <div>{{::selectedNote.rawRecord.Title__c}}</div>\n            </b>\n        </ion-item>\n\n        <ion-item class="mts-journal-note-body-item">\n            <div class="journal-copy">{{::selectedNote.rawRecord.Body__c}}</div>\n        </ion-item>\n\n    </ion-list>\n</div>\n\n<ion-content-fixed>\n    <div class="mts-journal-share-button">\n        <a class="tq-button-share-left" ng-if="selectedNote.rawRecord.Body__c && selectedNote.rawRecord.Body__c != \'\'"\n           ng-click="shareNote(selectedNote)">\n            <i class="icon-mts-share2 icon mts-round-icon"></i>\n        </a>\n    </div>\n</ion-content-fixed>\n\n<ion-content-fixed>\n\n    <div class="mts-circular-menu">\n\n      <!--  <div ng-class="{toggled: isJournalCircularMenuOpened}"\n             ng-click="toggleJournalCircularMenu()"\n             class="mts-circular-menu-content">\n\n            <a class="button-element top">\n                <i class="icon ion-ios-camera round-right-button-unsized"></i>\n\n                <div ng-bind="\'ADD_POSTCARD\' | translate"\n                    tq-input-file-attachment="onAddNoteClicked($event)"\n                ></div>\n            </a>\n        </div>-->\n\n        <!-- ng-click="toggleJournalCircularMenu()"-->\n\n        <div ng-class="{toggled: isJournalCircularMenuOpened}" ng-hide="isTripArchived"\n                tq-input-file-attachment="createNewPostcardForPhoto($event)"\n\n                class="icon icon-mts-camera round-right-button mts-journal-add-button">\n        </div>\n\n    </div>\n</ion-content-fixed>\n')}]),angular.module("apps/mts/trip/journal/journal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/journal/journal.tpl.html",'<div class="mts-journal-content">\n\n\n    <div acn-ion-sticky class="mtsTabs tabs tabs-dark item">\n\n        <a ng-click="goToPreviousPage()" class="tab-item mts-journal-pager-arrow">\n            <i class="ion-icon ion-chevron-left"></i>\n        </a>\n\n        <a ng-repeat="indexOfDay in pagerItems"\n           ng-class="{\'selected\': indexOfDay === numberOfSelectedDay}"\n           ui-sref="trip.journal({numberOfDay : indexOfDay})"\n           ng-style="getStyleOfPagerItem(indexOfDay)"\n           class="tab-item">\n            <div class="mts-journal-month-day">\n                {{::monthDaysMap[indexOfDay]}}\n            </div>\n            <div class="mts-journal-week-day">\n                {{::weekDaysMap[indexOfDay]}}\n            </div>\n        </a>\n\n        <a ng-click="goToNextPage()" class="tab-item mts-journal-pager-arrow">\n            <i class="ion-icon ion-chevron-right"></i>\n        </a>\n    </div>\n\n    <div ng-if="!inEditMode">\n        <ng-include src="\'apps/mts/trip/journal/journal.note.view.tpl.html\'"></ng-include>\n    </div>\n\n    <div ng-if="inEditMode">\n        <ng-include src="\'apps/mts/trip/journal/journal.note.edit.tpl.html\'"></ng-include>\n    </div>\n\n</div>')}]),angular.module("apps/mts/trip/journal/popup.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/journal/popup.tpl.html",'<i class="mts-popup-close icon ion-close-round" ng-click="popup.close()"></i>\n<div class="mts-popup-photo" ng-style="{\'background-image\': \'url(\' + getAttachUrl() + \')\'}"></div>\n<textarea class="mts-postcard-text" ng-model="postcard.rawRecord.Body__c"\n          ng-readonly="!isNewObject || readonly"\n          ng-attr-placeholder="{{isNewObject ? \'Add a caption here...\' : \'\'}}"></textarea>\n')}]),angular.module("apps/mts/trip/layout.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/layout.tpl.html",'<ion-view>\n    <ion-content class="has-header" delegate-handle="main-application-scroll">\n        <div class="mtsHomeContent">\n\n           <ng-include ng-if="state.data.headerView" src="state.data.headerView"></ng-include>\n            <div ui-view="headerView"></div>\n\n            <ng-include src="\'apps/mts/layout/tabbar/tabbar.tpl.html\'"></ng-include>\n\n            <div class="row mts-no-spacing">\n                <div class="col mts-no-spacing">\n                    <!--  class="animate-fade-slide-in animate-fade-slide-in-right animate-ripple"-->\n                    <ui-view name="contentView"></ui-view>\n                </div>\n                <div class="right-switch-block mts-no-spacing"\n                     ttc-if-enabled="myBookings.chatter">\n                    <div class="mts-sticky-tab" sticky-top="48">\n                        <ng-include src="state.data.sideContentView"></ng-include>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ion-content>\n</ion-view>\n\n')}]),angular.module("apps/mts/trip/overview/overview.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/overview/overview.tpl.html",'<div class="mts-overview-content">\n    <div class="list">\n\n        <div class="item item-avatar" ng-if="isFutureTrip">\n            <div class="item-image icon ion-icon ion-information">\n            </div>\n\n            <p class="display-all-text">\n                Thank you for booking your holiday with {{::alertSenderCompanyName}}.\n                It gives us great pleasure to welcome you to our family and hope that you have a fantastic time with us.\n            </p>\n        </div>\n\n        <a class="item item-avatar" ng-if="shouldShowTravelAlert && isFutureTrip" ng-href="{{::completeRegistrationUrl}}"\n           target="_blank" ng-style="{cursor: \'pointer\'}">\n            <div class="item-image">\n                <img ao-sf-src="assets/alarm@2x.png" />\n            </div>\n\n            <h2>Alert from {{::alertSenderCompanyName}}</h2>\n\n            <p class="display-all-text">\n                Please complete the registration process for this {{:: "TRIP_LOWER" | translate}} by clicking on the\n                Manage My Booking orange icon below.\n            </p>\n        </a>\n\n        <div class="item item-avatar" ng-if="isFutureTrip">\n            <div class="item-image icon ion-icon ion-plane">\n            </div>\n\n            <h2>About My Contiki</h2>\n\n            <p class="display-all-text">\n                This is your space; use it to tell us what you like, where you want to go,\n                what or when you want to hear from us. When you’ve booked your {{:: "TRIP_LOWER" | translate}}, come to view your itinerary,\n                update your profile and chat with fellow guests.\n            </p>\n        </div>\n\n        <!--TD ALERT-->\n        <div ng-if="passenger.rawRecord.Trip_Tour_Director_Alert__c && !isTDAlertExpired && !isPastTrip"\n             class="item item-avatar item-icon-right">\n            <img ng-src="{{travelDirector.rawRecord.SmallPhotoUrl}}" />\n\n            <h2>{{ ::\'TRAVEL_DIRECTOR_ALERT\' | translate}}</h2>\n\n            <p class="display-all-text">{{::passenger.rawRecord.Trip_Tour_Director_Alert__c}}</p>\n        </div>\n\n\n        <div class="item item-avatar" ng-if="!isPastTrip && (isFutureTrip || shouldShowTravelDirector())">\n\n            <img ng-src="{{travelDirector.rawRecord.SmallPhotoUrl}}"\n                 ng-if="travelDirector && travelDirector.rawRecord.SmallPhotoUrl" />\n            <div class="item-image" ng-if="!travelDirector && !travelDirector.rawRecord.SmallPhotoUrl">\n                <img ao-sf-src="assets/eye-horizons@2x.png" />\n            </div>\n\n            <h2>{{ \'TRAVEL_DIRECTOR_ABOUT\' | translate}}</h2>\n\n            <p class="display-all-text" ng-if="travelDirector.rawRecord.AboutMe">\n                {{::travelDirector.rawRecord.AboutMe}}\n            </p>\n            <p class="display-all-text" ng-if="!travelDirector.rawRecord.AboutMe">\n                Stay tuned! {{::\'TRAVEL_DIRECTOR\' | translate}} profile feature coming soon\n            </p>\n        </div>\n\n\n        <div class="item item-avatar" ng-if="shouldShowCurrentItineraryItem() && !isTripArchived && !isPastTrip">\n            <div class="itinerary-item-date" ng-click="displayItineraryItems()">\n                <div class="day-of-month">\n                    {{::monthDay(currentDate)}}\n                </div>\n                <div class="day-of-week">\n                    {{::weekDay(currentDate)}}\n                </div>\n            </div>\n\n            <div class="itinerary-item-container" ng-class="{\'itinerary-review-edit\': itineraryItemReviewShowComment}">\n                <div class="itinerary-item-content">\n                    <h2 class="itinerary-item-title clickable" ng-click="displayItineraryItems()">\n                        {{currentItineraryItem.rawRecord.Title__c}}\n                    </h2>\n                    <p class="itinerary-item-subtitle display-all-text"\n                       ng-click="displayItineraryItems()"\n                       ng-show="!itineraryItemReviewShowComment">\n                        {{::currentItineraryItem.rawRecord.Text__c | limitTo: 255}}<span ng-if="currentItineraryItem.rawRecord.Text__c.length > 255">...</span>\n                    </p>\n                    <p class="itinerary-item-subtitle display-all-text"\n                       ng-if="!itineraryItemReviewShowComment && currentItineraryItemReview.rawRecord.Comment__c">\n                        <b>Your Review:</b><br/>\n                        {{currentItineraryItemReview.rawRecord.Comment__c}}\n                    </p>\n                    <div class="itinerary-item-comment" ng-show="itineraryItemReviewShowComment">\n                        <div class="thumbs-container">\n                            <div class="icon-mts-thumbsup itinerary-item-thumb"\n                                 ng-class="{\'itinerary-item-thumbs-selected\' : itineraryItemThumbsUp}"\n                                 ng-click="itineraryItemThumb(\'up\')"></div>\n                            <div class="icon-mts-thumbsdown itinerary-item-thumb"\n                                 ng-class="{\'itinerary-item-thumbs-selected\' : itineraryItemThumbsDown}"\n                                 ng-click="itineraryItemReviewComment()"></div>\n                        </div>\n\n                        <label class="item item-input item-stacked-label">\n                            <span class="input-label">Your Feedback:</span>\n                            <textarea ng-model="reviewComment.comment" rows="4"\n                                      placeholder="Tell us why you didn\'t like it"></textarea>\n                        </label>\n                        <div class="itinerary-item-comment-actions">\n                            <button class="button button-cancel" ng-click="itineraryItemReviewCancelComment()" >Cancel</button>\n                            <button class="button button-submit" ng-click="itineraryItemThumb(\'down\')" >Submit</button>\n                        </div>\n                    </div>\n                </div>\n                <div class="thumbs-container">\n                    <div class="icon-mts-thumbsup itinerary-item-thumb"\n                         ng-class="{\'itinerary-item-thumbs-selected\' : itineraryItemThumbsUp}"\n                         ng-click="itineraryItemThumb(\'up\')"></div>\n                    <div class="icon-mts-thumbsdown itinerary-item-thumb"\n                         ng-class="{\'itinerary-item-thumbs-selected\' : itineraryItemThumbsDown}"\n                         ng-click="itineraryItemReviewComment()"></div>\n                </div>\n            </div>\n        </div>\n\n        <div class="item item-avatar" ng-if="isCurrentTrip">\n            <div class="item-image icon ion-icon ion-information">\n            </div>\n\n            <p class="display-all-text">\n                Remember that you can use Chatter and Direct Messaging in Community to communicate with other guests\n                on your {{:: "TRIP_LOWER" | translate}}, and share your special moments with friends and family on your social networks.\n    </p>\n        </div>\n\n\n        <div class="item item-avatar" ng-if="isPastTrip">\n            <div class="item-image icon ion-icon ion-information">\n            </div>\n\n            <h2>{{:: "TRIP" | translate}} is complete</h2>\n\n            <p class="display-all-text">\n                This {{:: "TRIP_LOWER" | translate}} is now complete, but you can keep the memories going and continue to use Chatter and Community\n                to share your experiences, and also review or update your private Journal until {{::archiveTimeText}}.\n            </p>\n        </div>\n\n\n        <div class="item item-avatar" ng-if="isPastTrip">\n            <div class="item-image icon ion-icon ion-earth">\n            </div>\n\n            <h2>What’s next?</h2>\n\n            <p class="display-all-text">\n                Do you know where you will be going next? We can help you start planning your next {{:: "TRIP_LOWER" | translate}} with My Horizon:\n                View the quotes and brochures you have requested; take a look at the World map and build your wish list\n                for future {{:: "TRIP_LOWER_PLURAL" | translate}}, and much more coming soon…\n            </p>\n        </div>\n\n\n\n        <div class="itinerary-vertical-spacing">\n\n        </div>\n\n        <ion-content-fixed>\n            <div class="mts-circular-menu">\n                <div class="mts-circular-menu-content" ng-class="{toggled: menuIsOpened}" ng-hide="isTripArchived"\n                     ng-click="toggleMenu()">\n                    <a class="button-element" ng-class="{true: \'top\', false:\'middle\'}[invoiceLinkDisplayed]"\n                       ng-href="{{mmbUrl}}" ng-disabled="isPastTrip" target="_blank" ng-click="linkClick($event)">\n                        <i class="icon ion-ios-gear round-right-button-unsized"></i>\n                        <div>Manage my booking</div>\n                    </a>\n\n                    <a class="button-element left" ng-if="invoiceLinkDisplayed" ng-href="{{invoiceUrl}}" target="_blank"\n                       ng-disabled="isPastTrip" ng-click="linkClick($event)">\n                        <i class="icon ion-android-document round-right-button-unsized"></i>\n                        <div>View my invoice</div>\n                    </a>\n                </div>\n                <button class="icon ion-plus round-right-button" ng-hide="isTripArchived"\n                        ng-class="{toggled: menuIsOpened}" ng-click="toggleMenu()"></button>\n            </div>\n        </ion-content-fixed>\n    </div>\n</div>\n')}]),angular.module("apps/mts/trip/trip.side.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/mts/trip/trip.side.tpl.html","<ion-content>\n\n</ion-content>\n")}]),angular.module("apps/myTrafalgar/abstracttripstate/chatter/chatter.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/abstracttripstate/chatter/chatter.tpl.html",'<ion-view>\n    <ion-nav-title ng-bind-html="chatter.title">{{ \'Chatter\' + abstractTripState.title }}</ion-nav-title>\n    <ion-nav-buttons side="right">\n        <button class="button button-icon ion-chevron-right icon-right"\n                ng-click="abstractTripState.goNext()">Next</button>\n    </ion-nav-buttons>\n\n    <ion-content>\n        <div class="tf-chatter viewport-height" id="chatter">\n            <!--<div ng-controller="TQChatterExtensionCtrl">-->\n            <div class="wrap tf-transparent-container">\n                <div class="avatar-image" tq-lazy-src="{{user.getUserFullImage()}}"></div>\n\n                <p class="tf-title">Hi <span class="tf-red" ng-bind="user.getUserName()"></span>. Chatter is\n                    the\n                    place to get to know your\n                    travel friends and prepare for an incredible trip together. So get connected - post your\n                    comments, questions and photos here\n                </p>\n            </div>\n\n            <div class="background-white ">\n                <!--This pill navigates the main state-->\n                <div class="tf-pill tf-cta" id="state-change-pill">\n\n                    <!--ng-class="chatter.chatterActivated"-->\n                    <button\n                            class="button tf-button-rounded"\n                            ng-class="lastSelectedMainWas(\'abstractTripState.chatter.main.chatter\')"\n                            ng-click="onChatterClickedPhone()">\n                        Chatter\n                    </button>\n                    <button ng-disabled="hasNoDirector"\n                            ng-class="lastSelectedMainWas(\'abstractTripState.chatter.main.travelDirector\')"\n                            ng-click="onTravelDirectorClickedPhone()"\n                            class="button tf-button-rounded">Travel\n                        Director\n                    </button>\n                    <button\n                            ng-click="onOtherGuestsClickedPhone()"\n                            ng-class="lastSelectedMainWas(\'abstractTripState.chatter.main.otherGuests\')"\n                            class="button tf-button-rounded"\n                            >\n                        Other Guests\n                    </button>\n                </div>\n                <div class="wrapper">\n                    <!--Chatter main-->\n                    <ion-nav-view name="main"\n                                  id="chatter-main"\n                                  class="flex">\n                    </ion-nav-view>\n\n                    <!--Travel director and other guest side menu, only available on tablet-->\n                    <div ng-if="!$root.isPhone" class="side-bar">\n\n                        <div class="tf-pill tf-cta" id="side-bar-pill">\n                            <button\n                                    class="button tf-button-rounded"\n                                    ng-class="lastSelectedSideWas(\'abstractTripState.chatter.side.otherGuests\')"\n                                    ui-sref-active="selected"\n                                    nav-transition="none"\n                                    ui-sref="abstractTripState.chatter.side.otherGuests"\n                                    ng-click="onOtherGuestsClickedTablet()">\n                                Who\'s on my trip?\n                            </button>\n\n                            <!--This pill navigates the side menu-->\n                            <button class="button tf-button-rounded"\n                                    ng-class="lastSelectedSideWas(\'abstractTripState.chatter.side.travelDirector\')"\n                                    ui-sref-active="selected"\n                                    nav-transition="none"\n                                    ui-sref="abstractTripState.chatter.side.travelDirector"\n                                    ng-disabled="hasNoDirector"\n                                    ng-click="onMyTravelDirectorClickedTablet()">\n                                My Travel Director\n                            </button>\n                        </div>\n\n                        <ion-nav-view nav-transition="none" name="side" id="chatter-side"></ion-nav-view>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ion-content>\n</ion-view>\n')}]),angular.module("apps/myTrafalgar/abstracttripstate/chatter/substates/chatter-substate.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/abstracttripstate/chatter/substates/chatter-substate.tpl.html",'<tq-chatter-feed feed-type="chatter.chatterFeedType" feed-object-id="chatter.chatterFeedObjectId">\n\n    <tq-chatter-post template-url="appMyTrafalgar/components/chatter/post/post.tpl.html">\n    </tq-chatter-post>\n\n    <!-- feed list -->\n    <div class="tq-list-content">\n        <ion-list class="tq-list-items-wrapper" can-swipe="swipable">\n\n            <tq-chatter-feeditem ng-repeat="record in records"\n                                 record="record"\n                                 deletable="true"\n                                 index="$index"\n                                 record="record"\n                                 object-api-name="\'FeedIten"\n                                 click="click(index, record)">\n                <!-- actions -->\n                <tq-chatter-action-buttons\n                        template-url="appMyTrafalgar/components/chatter/actionbuttons/actionbuttons.tpl.html">\n                </tq-chatter-action-buttons>\n            </tq-chatter-feeditem>\n\n        </ion-list>\n    </div>\n    <ion-infinite-scroll ng-if="moreDataCanBeLoaded" on-infinite="loadMore()" distance="10%"></ion-infinite-scroll>\n\n\n</tq-chatter-feed>\n\n')}]),angular.module("apps/myTrafalgar/abstracttripstate/chatter/substates/otherguest-substate.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/abstracttripstate/chatter/substates/otherguest-substate.tpl.html",'<tq-follower-list feed-object-id="abstractTripState.tourInstance.rawRecord.Id">\n    <div class="tq-follower-content">\n        <ion-list>\n            <div class="card tq-follower" ng-repeat="follower in followers">\n                <!-- user avatar -->\n                <div class="item item-thumbnail-left item-text-wrap">\n                    <div tq-lazy-src="{{getAvatarUrl(follower)}}" class="tq-chatter-user-avatar"></div>\n                    <div class="text-body">\n                        <h2>{{follower.userData.Name}}</h2>\n                        <p class="feed-body" ng-if="follower.userData.Show_My_Email_Address__c">\n                            {{follower.userData.Email__c}}\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </ion-list>\n    </div>\n</tq-follower-list>\n')}]),angular.module("apps/myTrafalgar/abstracttripstate/chatter/substates/traveldirector-substate.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/abstracttripstate/chatter/substates/traveldirector-substate.tpl.html",'<div class="travel-director-wrapper">\n    <div class="travel-director">\n        <div class="border">\n        <div class="img" tq-lazy-src="{{chatter.travelDirector.photo}}" ></div>\n        </div>\n        <div class="details">\n            <span class="tf-title" ng-bind="chatter.travelDirector.Name"></span>\n            <span class="tf-content"  ng-bind="chatter.travelDirector.Country__c"></span>\n        </div>\n\n    </div>\n    <h3 class="tf-title arial-font">About me</h3>\n\n    <p class="tf-content" ng-bind="chatter.travelDirector.AboutMe">\n    </p>\n\n    <h3 class="tf-title arial-font" ng-if="chatter.travelDirector.Show_My_Email_Address__c"></h3>\n    <span class="tf-content" \n        ng-if="chatter.travelDirector.Show_My_Email_Address__c"\n        ng-bind="chatter.travelDirector.Email__c"></span>\n</div>\n<div class="bottom-spacer"></div>')}]),angular.module("apps/myTrafalgar/abstracttripstate/itinerary/itinerary.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/abstracttripstate/itinerary/itinerary.tpl.html",'<ion-view>\n    <ion-nav-buttons side="right">\n        <button class="button button-icon ion-chevron-right icon-right"\n                ng-show="abstractTripState.showNext"\n                ng-click="abstractTripState.goNext()">Next\n        </button>\n    </ion-nav-buttons>\n\n\n    <ion-content delegate-handle="itinerary">\n        <div class="tf-countdown viewport-height"\n             ng-if="$stateParams.type == \'future\' "\n             id="countdown">\n            <div class="wrap-cornerbox">\n                <div class="row">\n                    <div class="col tf-transparent-container">\n                        <ng-include src="\'apps/myTrafalgar/components/cornerbox/cornerbox.tpl.html\'"></ng-include>\n                        <h1 class="tf-title title-font">Only.</h1>\n\n                        <div class="flipclock">\n                        </div>\n                        <p class="tf-description">Until your <span\n                                ng-bind="abstractTripState.product.rawRecord.Product_Name__c"></span>. Find out more\n                            about your trip.</p>\n                    </div>\n                </div>\n                <!--<span class="icon-ttc-down tf-transparent" ng-click="selectedTrip.goToSection(\'itinerary\')"></span>-->\n            </div>\n\n        </div>\n        <!-- Welcome/About -->\n        <div class="tf-welcome viewport-height"\n             ng-if="abstractTripState.isFirstDay || $stateParams.type === \'brochure\'"\n             id="welcome">\n            <div class="wrap-cornerbox">\n                <div class="row">\n                    <div class="col tf-transparent-container">\n                        <ng-include src="\'apps/myTrafalgar/components/cornerbox/cornerbox.tpl.html\'"></ng-include>\n\n                        <!-- trip instance -->\n                        <div class="trip-instance-welcome-content-wrapper"\n                             ng-if="$stateParams.type !== \'brochure\'">\n                            <h1 class="tf-title title-font">Welcome to <span class="tf-red"\n                                                                             ng-bind="abstractTripState.product.rawRecord.Product_Name__c"></span>\n                            </h1>\n\n                            <p class="tf-description">Here you will find information on your trip, chat to new\n                                friends,\n                                find tools to help you plan your spare time and document your favourite moments so\n                                that\n                                you can look\n                                back at them later.</p>\n                        </div>\n\n                        <!-- brochure detail -->\n                        <div class="brochure-welcome-content-wrapper tf-content"\n                             ng-if="$stateParams.type === \'brochure\'">\n                            <div class="brochure-details">\n\n                                <ion-scroll ng-if="!isPhone" delegate-handle="brochureScroll">\n                                    <div class="brochure-description"\n                                         ng-bind="abstractTripState.product.rawRecord.Description__c">\n                                    </div>\n                                </ion-scroll>\n\n                                <div ng-if="isPhone" class="brochure-description"\n                                     ng-bind="abstractTripState.product.rawRecord.Description__c">\n                                </div>\n\n                                <div class="brochure-codes-wrapper">\n                                        <span class="type">\n                                            Trip type: <span class="red-text"\n                                                             ng-bind="abstractTripState.product.rawRecord.Type__c"></span>\n                                        </span>\n                                        <span class="code">\n                                            Trip code: <span ng-bind="abstractTripState.product.rawRecord.Name"></span>\n                                        </span>\n                                </div>\n                            </div>\n                            <div class="brochure-find-out-more title-font">\n                                <div class="text">\n                                    Need help? Call us on <br/>\n                                    <span class="phone">0800 533 5616</span> <br/>\n                                    of contact your Travel Agent\n                                </div>\n                                <button class="button tf-button"\n                                        ui-sref="enquiry">\n                                    <span class="label">Find out more</span>\n                                    <span class="after-icon icon-ttc-forward"></span>\n                                </button>\n                            </div>\n                        </div>\n\n                        <!--<p class="tf-description"-->\n                        <!--ng-if="abstractTripState.TRIP_STATUS !== \'brochure\'">Swipe up or use the T navigation to continue</p>-->\n                    </div>\n                </div>\n                <!--<span class="icon-ttc-down tf-transparent" ng-click="selectedTrip.goToSection(\'itinerary\')"></span>-->\n            </div>\n        </div>\n\n        <div class="tf-itinerary-wrapper viewport-height" id="itinerary">\n            <tf-itinerary itinerary-items="itinerary.itineraryItems"\n                          product="abstractTripState.product"\n                          scroll-delegate="itinerary"\n                          selected-trip="abstractTripState.trip"></tf-itinerary>\n\n            <div class="tf-tips-and-tricks viewport-height"\n                 id="tipsntricks">\n                <div class="tf-itinerary tf-optionals" tq-accordion>\n                    <!-- A. items -->\n                    <div class="itinerary-items">\n                        <div class="accordion-item "\n                             ng-repeat="extraType in itinerary.extrasToShow"\n                             ng-if="!itinerary.isAnEmptySection(itinerary[extraType.type])"\n                             ng-class="extraType.type">\n                            <!-- fixed -->\n                            <!--START EXTRAS SECTION -->\n                            <div class="accordion-header"\n\n                                 ng-click="toggleItemBody(extraType, \'itinerary\')">\n                                <div class="title tf-title">\n                                    {{ extraType.name }}\n                                </div>\n                                <i class="accordion-icon icon-ttc-plus"\n                                   ng-class="{true: \'rotate\', false: \'\'}[isToggled(extraType, \'itinerary\')]"></i>\n                            </div>\n                            <!-- not fixed -->\n                            <div ng-class="extraType.type"\n                                    class="accordion-body"\n                                    ng-show="isToggled(extraType)">\n                                <!--Group by city and display the title, adult price and text. Order by "ExternalID".-->\n                                <!--Add the "Notes" text (static label)-->\n                                <div ng-if="extraType.type === \'optionals\'">\n                                    <h3 class="tf-title">Notes</h3>\n\n                                    <p>Optional Experiences are subject to change. Your Travel Director will supply you\n                                        with a final list of Optional Experiences available on your trip. Optional\n                                        Experiences cannot be booked online; they can be purchased during your trip\n                                        through your Travel Director.</p>\n\n                                </div>\n                                <!--For Optionals and WAI we have the concept of subsections!-->\n                                <div ng-if="extraType.type === \'whatsAlwaysIncluded\' || extraType.type === \'optionals\'">\n                                    <div ng-repeat="subsection in itinerary[extraType.type]">\n                                        <h4 class="subsectionTitle">\n                                            {{ subsection.subSection | lowercase}}\n                                        </h4>\n\n                                        <li class="item-bullet" ng-repeat="item in subsection.items">\n                                            <h4 class="item-title" ng-if="item.rawRecord.Title__c"><b>{{item.rawRecord.Title__c}}</b></h4>\n\n                                            <span ng-if="extraType.type === \'optionals\'">Adult price: <b>{{\n                                                itinerary.getCurrencySymbolForCode(item.rawRecord.CurrencyIsoCode) }}{{\n                                                item.rawRecord.Adult_Price__c }}</b></span>\n\n\n                                            <div class="text tf-content"\n                                                 ng-bind-html="item.rawRecord.Text__c">\n                                            </div>\n\n                                        </li>\n                                    </div>\n                                </div>\n\n                                <!--But if you\'re just in theTrafalgarDifference, ya don\'t need all this complication!-->\n\n                                <ul ng-if="extraType.type === \'theTrafalgarDifference\' " >\n                                <li ng-repeat="item in itinerary[extraType.type]">\n                                    <h4 class="item-title ttd">{{item.rawRecord.Title__c}}</h4>\n                                    <p class="text tf-content"\n                                         ng-bind-html="item.rawRecord.Text__c">\n                                    </p>\n                                </li>\n\n                               </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- add sharing buttons -->\n                <div class="tf-brochure-buttons-wrapper"\n                     ng-if="$stateParams.type === \'brochure\'">\n\n                    <button class="button tf-button" ui-sref="enquiry" href="#/enquiry">\n                        <span class="label">Find out more</span>\n                        <span class="after-icon icon-ttc-forward"></span>\n                    </button>\n\n                    <div class="right">\n                        <button ng-click="shareTrip()" class="button tf-button tf-button-secondary">\n\n                            <span class="label">Share Trip</span>\n\n                            <span class="after-icon icon-ttc-forward"></span>\n                        </button>\n                        <button class="button tf-button"\n                                ng-click="showAvailabilityAndPrices()"\n                                ng-disabled="!$root.online">\n                            <span class="label">Prices and Availability</span>\n                            <span class="after-icon icon-ttc-forward"></span>\n                        </button>\n                    </div>\n                </div>\n\n                <!--<span class="icon-ttc-down tf-transparent"-->\n                <!--ng-click="Trip.goToSection(\'tipsntricks\')"-->\n                <!--ng-if="selectedTrip.showTipsAndTricks && !selectedTrip.brochure">-->\n\n                <!--</span>-->\n\n                <!--<span class="icon-ttc-down tf-transparent"-->\n                <!--ng-click="selectedTrip.goToSection(\'chatter\')"-->\n                <!--ng-if="!selectedTrip.showTipsAndTricks && !selectedTrip.brochure">-->\n                <!--</span>-->\n            </div>\n    </ion-content>\n</ion-view>\n');
}]),angular.module("apps/myTrafalgar/abstracttripstate/kbyg/kbyg.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/abstracttripstate/kbyg/kbyg.tpl.html",'<ion-view>\n    <ion-nav-title ng-bind-html="\'<i class=\\\'icon-ttc-tips\\\'></i> Know Before You Go\' + abstractTripState.title">This is a really long title. SUPER SUPER LONG!</ion-nav-title>\n    <ion-nav-buttons side="right">\n        <button class="button button-icon ion-chevron-right icon-right"\n                ng-click="abstractTripState.goNext()">Next</button>\n    </ion-nav-buttons>\n\n    <ion-content delegate-handle="kbyg">\n        <div class="tf-tips-and-tricks viewport-height"\n             id="tipsntricks">\n            <div class="tf-itinerary">\n                <!-- A. items -->\n                <div class="itinerary-items">\n                    <div class="accordion-item tf-content"\n                         ng-repeat="(key, item) in tipsAndTricks.tips">\n                        <!-- fixed -->\n                        <div class="accordion-header"\n                             ng-click="abstractTripState.toggleItemBody(item)">\n                            <div class="title tf-title">\n                                {{item.Field_Label}}\n                            </div>\n                            <i class="accordion-icon"\n                               ng-class="{true: \'icon-ttc-plus rotate\', false: \'icon-ttc-plus\'}[abstractTripState.isToggled(item)]"></i>\n                        </div>\n\n                        <!-- not fixed -->\n                        <div class="accordion-body" ng-show="abstractTripState.isToggled(item)">\n\n                            <div class="country-details" ng-repeat="country in item.Countries">\n                                <h3 class="tf-title">{{country.Country}}</h3>\n\n                                <div class="text tf-content" ng-bind-html="country.Content">\n                                </div>\n\n                            </div>\n\n                        </div>\n                    </div>\n                    <!-- no items -->\n                    <div ng-if="itinerary.itineraryItems.length == 0">\n                        Oops! Tips are not available\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ion-content>\n</ion-view>\n')}]),angular.module("apps/myTrafalgar/abstracttripstate/nextbutton.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/abstracttripstate/nextbutton.tpl.html",'<ion-nav-buttons side="right">\n    <button class="button button-icon ion-chevron-right icon-right"\n            ng-click="abstractTripState.goNext()">Next</button>\n</ion-nav-buttons>\n')}]),angular.module("apps/myTrafalgar/brochure/brochure.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/brochure/brochure.tpl.html",'<ion-view title="{{brochure.headerTitle}}"\n          hide-back-button="true"\n          class="tf-brochure">\n\n    <!-- download the full brochure -->\n    <ion-nav-buttons side="right">\n        <button class="button button-icon ion-arrow-down-a icon-right"\n                ng-if="showDownloadBrochureBtn"\n                ng-click="downloadBrochure()"></button>\n    </ion-nav-buttons>\n\n\n    <ion-content delegate-handle="tf-brochure-main">\n\n        <!-- search component -->\n        <form ng-submit="search()">\n            <div class="search-wrapper tf-transparent-container">\n                <div class="title tf-title title-font">I want to go to...</div>\n                <div class="controls">\n                    <ul>\n                       <li class="destination">\n                           <label class="item item-input text">\n                               <input type="text"\n                                      name="destination"\n                                      placeholder="Destination"\n                                      ng-keyup="onSearchInputKeyUp($event)"\n                                      ng-model="brochure.destination"/>\n                           </label>\n                           <label class="item item-input item-select select">\n                               <select ng-model="brochure.destination"\n                                       ng-change="onDestinationCountryChanged(brochure.destination)"\n                                       name="destinations">\n                                   <option ng-repeat="destination in brochure.destinations"\n                                           value="{{destination.name}}">{{destination.name}}</option>\n                               </select>\n                               <div class="fixed-placeholder">\n                                    Choose\n                               </div>\n                           </label>\n                       </li>\n                       <li class="tf-content">In</li>\n                       <li class="date">\n                           <div class="date-select-focus-fixer"></div>\n                           <label class="item item-input item-select">\n                               <select ng-model="brochure.date"\n                                       name="date">\n                                   <option value=\'\'>Date</option>\n                                   <option ng-repeat="date in brochure.dates"\n                                           value="{{date.value}}">{{date.name}}</option>\n                               </select>\n                           </label>\n                       </li>\n                       <li class="search-btn">\n                           <button class="button tf-button">\n                               <span class="label">Search</span>\n                               <span class="after-icon icon-ttc-forward">\n                           </button>\n                       </li>\n                    </ul>\n                </div>\n            </div>\n        </form>\n\n        <!-- list - load only when we have a valid query.where set -->\n        <tq-list object-api-name="brochure.query.objectApiName"\n                 where="brochure.query.where"\n                 orderby="[\'Available_From__c ASC\', \'Product_Name__c ASC\']"\n                 searchable="false"\n                 sortable="false"\n                 has-header="false"\n                 empty-list-text="No Result"\n                 on-list-item-click="brochure.onListItemClick"\n                 delegate-handle="brochureList"\n                 ng-if="showSearchResults">\n\n            <!-- item !note! this block gets transcluded using it\'s own isolated scope, so we need the parent (tq-list) to pass the scope.onClick to it -->\n            <tf-brochure-item on-click="brochure.onListItemClick"\n                              on-tour-product-image-clicked="$parent.$parent.onTourProductImageClicked"\n                              on-tour-product-name-clicked="$parent.$parent.onTourProductNameClicked"\n                              on-prices-and-availability-clicked="$parent.$parent.onPricesAndAvailabilityClicked"\n                              on-see-trip-details-clicked="$parent.$parent.onSeeTripDetailsClicked"\n                              ng-repeat="record in records"\n                              record="record">\n            </tf-brochure-item>\n        </tq-list>\n\n        <!-- wait for result -->\n        <div class="search-help tf-content"\n             ng-if="!showSearchResults">\n            <!--<div class="icon"><i class="icon-ttc-down"></i></div>-->\n            <div class="text">Use the filters above to find your next trip</div>\n        </div>\n\n        <div class="bottom-spacer"></div>\n\n    </ion-content>\n</ion-view>')}]),angular.module("apps/myTrafalgar/brochure/item/item.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/brochure/item/item.tpl.html",'<div class="tf-brochure-item">\n\n    <div class="content tf-content"\n         ng-click="showDetails()">\n\n        <div class="image"\n             ng-click="onTourProductImageClicked(this.record)"\n             tq-lazy-src="{{brochure.record.rawRecord.Background_URL__c}}"\n             placeholder="">\n        </div>\n\n        <div class="info">\n            <div class="name" ng-click="onTourProductNameClicked(this.record)"><b>{{brochure.record.rawRecord.Product_Name__c}}</b></div>\n            <!-- on table hold here the description -->\n            <div class="description description-tablet"\n                 ng-if="!$root.isPhone"\n                 ng-bind-html="brochure.record.rawRecord.Description__c"></div>\n            <div class="duration"><span class="duration-label">Duration: </span>{{brochure.record.rawRecord.Duration__c}} days</div>\n        </div>\n    </div>\n\n    <!-- on phone move down the description -->\n    <div class="description description-tablet"\n         ng-if="$root.isPhone"\n         ng-bind-html="brochure.record.rawRecord.Description__c"></div>\n\n    <div class="controls">\n\n        <button class="button tf-button tf-button-secondary"\n                ng-click="showDetails(); onSeeTripDetailsClicked();">\n            <span class="label"><b>See trip details</b></span>\n            <span class="after-icon icon-ttc-forward"></span>\n        </button>\n        <button class="button tf-button"\n                ng-click="showAvailabilityAndPrices(); onPricesAndAvailabilityClicked();"\n                ng-disabled="!$root.online">\n            <span class="label">Prices and Availability</span>\n            <span class="after-icon icon-ttc-forward"></span>\n        </button>\n    </div>\n\n</div>')}]),angular.module("apps/myTrafalgar/comments/comments.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/comments/comments.tpl.html",'<ion-modal-view class="tf-chatter tq-chatter tf-chatter-comments">\n\n    <a class="icon-ttc-close close-modal"\n       ng-click="closeModal()"></a>\n\n    <tq-chatter-comment-list ng-if="feedItem" feed-item="feedItem" scroll-delegate-handle="commentListScrollDelegate">\n        <ion-content class="background-white" delegate-handle="commentListScrollDelegate">\n            <tq-chatter-feeditem record="feedItem">\n                <!-- actions -->\n                <tq-chatter-action-buttons template-url="client/components/chatter/actionbuttons/actionbuttons.tpl.html">\n                </tq-chatter-action-buttons>\n            </tq-chatter-feeditem>\n            <ion-list>\n                <tq-chatter-feed-comment ng-repeat="feedComment in feedComments" record="feedComment" deletable="true">\n                    <tq-chatter-action-buttons template-url="client/components/chatter/actionbuttons/commentbuttons.tpl.html">\n                    </tq-chatter-action-buttons>\n                </tq-chatter-feed-comment>\n            </ion-list>\n            <a class="tf-load-comments-button" ng-if="canLoadMoreFromServer && !loadingFromServer" href=""\n               ng-click="loadMoreCommentsFromServer()">\n                Load more comments\n            </a>\n            <div class="tf-load-comments-button" ng-if="loadingFromServer">\n                <i class="icon ion-loading-c"></i> Loading...\n            </div>\n        </ion-content>\n        <div class="tr-post tr-comment-post">\n            <div class="row">\n                <div class="col col-100">\n                    <label class="item-input">\n                        <textarea ng-model="newCommentText"\n                                  type="text"\n                                  placeholder="Type comment here..."\n                                  max-chars="500"\n                                  input="newCommentText"\n                                  ></textarea>\n                    </label>\n                </div>\n                <div class="tf-button-container">\n                    <button ng-click="createNewComment($event)" class="button tf-button tf-post-send-button"> Send <span class="mirror">\n                        <i class="icon-ttc-forward"></i></span>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </tq-chatter-comment-list>\n</ion-modal-view>\n')}]),angular.module("apps/myTrafalgar/components/chatter/actionbuttons/actionbuttons.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/chatter/actionbuttons/actionbuttons.tpl.html",'<div class="tf-action-buttons" ng-controller="tfActionButtonsController">\n    <a ng-click="actionButtonsExtended.toggleLike(record)">\n        <i class="icon icon-ttc-like" ng-class="{\'tf-chatter-like-highlighted\' : record.chatterData.LikedByCurrentUser}"></i>\n        <span class="link-text">Like</span>\n        <span class="tf-chatter-like-count" ng-bind="record.rawRecord.LikeCount"></span>\n    </a>\n    <a class="tq-button-comment" ng-click="actionButtonsExtended.goToCommentsPage(record)">\n        <i class="icon-ttc-chatter"></i><span class="link-text">Comment</span>\n        <span class="tf-chatter-comment-count" ng-bind="record.rawRecord.CommentCount"></span>\n    </a>\n    <a class="tq-button-share" ng-click="actionButtonsExtended.share(record)">\n        <i class="icon-ttc-share"></i><span class="link-text">Share</span>\n    </a>\n</div>\n\n')}]),angular.module("apps/myTrafalgar/components/chatter/actionbuttons/commentbuttons.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/chatter/actionbuttons/commentbuttons.tpl.html",'<div class="tf-action-buttons" ng-controller="tfActionButtonsController">\n    <a ng-click="actionButtons.toggleLike(record)">\n        <i class="icon icon-ttc-like" ng-class="{\'tf-chatter-like-highlighted\' : record.chatterData.LikedByCurrentUser}"></i>\n        <span class="link-text">Like</span>\n    </a>\n    <a class="tq-button-share" ng-click="actionButtonsExtended.share(record)">\n        <i class="icon-ttc-share"></i><span class="link-text">Share</span>\n    </a>\n</div>\n\n')}]),angular.module("apps/myTrafalgar/components/chatter/chatter.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/chatter/chatter.tpl.html","<tq-chatter-feed></tq-chatter-feed>")}]),angular.module("apps/myTrafalgar/components/chatter/post/post.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/chatter/post/post.tpl.html",'<div class="tr-post" ng-controller="tfPostController">\n    <div class="row post-button-row">\n        <div class="links">\n            <button class="tf-button-rounded" ng-class="{selected: post.activatedHashtag}"\n                    ng-click="post.toggleHashtag(post);" href=""><i\n                    class="icon-ttc-hash"></i>{{post.hashtagText}}</span></button>\n            <button class="tf-button-rounded" ng-click="post.getPhotoOverride();" href=""\n                    ng-class="{\'disabled\':(post.attachmentImageUrl)}">\n                <i class="icon-ttc-camera"></i>Add Photo\n            </button>\n        </div>\n    </div>\n    <div class="row send-wrap">\n        <label class="item-input">\n            <!--<img src="assets/arrow.png" class="up-arrow">-->\n                <textarea ng-model="post.input"\n                          type="text"\n                          input="post.input"\n                          placeholder="Type message here..."\n                          max-chars="500"\n                          ng-style="post.hideText"></textarea>\n        </label>\n        <button ng-disabled="post.isDisabled" ng-click="post.addHashTagAndSend(post)"\n                class="button tf-button tf-post-send-button"> Send <span class="mirror"></i><i\n                class="icon-ttc-forward"></i></span>\n        </button>\n    </div>\n</div>\n\n<div class="tr-attachment" ng-if="post.attachmentImageUrl">\n    <img tq-lazy-src="{{post.attachmentImageUrl}}"/>\n    <i class="ion-close-circled" ng-click="post.removeAttachment()"/>\n</div>\n\n</div>')}]),angular.module("apps/myTrafalgar/components/cornerbox/cornerbox.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/cornerbox/cornerbox.tpl.html",'<div id="tf-cornerbox-container">\n    <div id="tf-corner-topleft"\n         class="tf-cornerbox"></div>\n    <div id="tf-corner-bottomleft"\n         class="tf-cornerbox"></div>\n    <div id="tf-corner-topright"\n         class="tf-cornerbox"></div>\n\t<div id="tf-corner-logo">\n\t\t<!--<img ng-src="assets/logo.png" />-->\n\t</div>\n</div>')}]),angular.module("apps/myTrafalgar/components/date/display/display.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/date/display/display.tpl.html",'<div class="tf-date-display">\n    <!--<i class="cal-icon icon-ttc-calendar"></i>-->\n    <span class="day-number">Day {{dateDisplay.dayNumber}}</span>\n    <span class="day-name">{{dateDisplay.dayName}}</span>\n    <span class="date">{{dateDisplay.datepart}}</span>\n</div>')}]),angular.module("apps/myTrafalgar/components/date/picker/picker.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/date/picker/picker.tpl.html",'<div class="tf-date-picker">\n\n    <!-- background when picker opened; click to close -->\n    <div class="tf-backdrop"\n         ng-show="datePicker.selectMode"\n         ng-click="datePicker.togglePicker()"></div>\n\n    <!-- selected day -->\n    <tf-date-display date="datePicker.date"\n                     day-number="{{datePicker.dayNumber}}"\n                     ng-click="datePicker.togglePicker()"\n                     ng-class="{true: \'lighter\', false: \'\'}[datePicker.selectMode]">\n    </tf-date-display>\n\n    <!-- picker list -->\n    <ul ng-show="datePicker.selectMode">\n        <li ng-repeat="day in datePicker.days"\n            day="day">\n            <tf-date-display date="day"\n                             day-number="{{$index+1}}"\n                             ng-class="{true: \'selected\', false:\'\'}[$index+1 == datePicker.dayNumber]"\n                             ng-click="datePicker.pickDate(day, $index+1)">\n            </tf-date-display>\n        </li>\n    </ul>\n</div>')}]),angular.module("apps/myTrafalgar/components/feedback/bugmodal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/feedback/bugmodal.tpl.html",'<ion-modal-view class="tf-feedback-popup" ng-controller="TfFeedbackController">\n    <ion-header-bar align-title="centre">\n        <h1 class="title">Report an issue</h1>\n\n        <div class="button button-clear" ng-click="feedback.closeModal()"><span class="icon ion-close"></span></div>\n    </ion-header-bar>\n\n    <ion-content\n            class="tf-content padding"\n            padding="true"\n            has-header="true">\n        <form ng-submit="feedback.submitFeedback(\'bug\')">\n\n            <p>Please describe the issue</p>\n\n            <div class="tf-text-block">\n\n\n            <textarea class="tf-moment-body"\n                      placeholder=""\n                      rows="10"\n                      ng-focus="textareaFocus()"\n                      ng-readonly="bodyIsReadOnly"\n                      ng-model="rawRecord.Feedback_Text__c"\n                    ></textarea>\n            </div>\n\n             <tq-media-picture\n                     template-url="client/components/feedback/button.tpl.html"\n                     take-picture-btn="false"\n                     on-picture-success="feedback.storeAndShowPicture">\n             </tq-media-picture>\n\n            <div class="photo-holder" ng-if="feedback.attachmentImageUrl">\n                <div class="img" tq-lazy-src="{{feedback.attachmentImageUrl}}">\n                </div>\n                <i class="ion-close-circled" ng-click="feedback.clearPhoto()"></i>\n            </div>\n\n            <div class="popup-buttons">\n                <button type="submit" class="tf-red button button-full button-positive">\n                    Report issue\n                </button>\n                <div ng-click="feedback.closeModal()" class="button button-full button-cancel">\n                    Cancel\n                </div>\n            </div>\n        </form>\n    </ion-content>\n\n</ion-modal-view>\n')}]),angular.module("apps/myTrafalgar/components/feedback/button.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/feedback/button.tpl.html",'<div class="photo-add">\n    <div ng-click="getPicture(PICK_PICTURE)">\n        Add a screenshot <i class="icon-ttc-camera"></i>\n    </div>\n</div>')}]),angular.module("apps/myTrafalgar/components/feedback/feedbackmodal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/feedback/feedbackmodal.tpl.html",'<ion-modal-view class="tf-feedback-popup" ng-controller="TfFeedbackController">\n    <ion-header-bar align-title="centre">\n        <h1 class="title">Feedback</h1>\n\n        <div class="button button-clear" ng-click="feedback.closeModal()"><span class="icon ion-close"></span></div>\n    </ion-header-bar>\n\n    <ion-content\n            class="tf-content padding"\n            padding="true"\n            has-header="true">\n        <form ng-submit="feedback.submitFeedback(\'feedback\')">\n            <p ng-bind="feedback.metadata.Overall_Experience__c.inlineHelpText"></p>\n\n            <div star-rating rating-value="rawRecord.Overall_Experience__c"></div>\n            <p> How would you rate your experience with:</p>\n\n            <p ng-bind="feedback.metadata.Feedback_Field_1__c.inlineHelpText"></p>\n\n            <div star-rating rating-value="rawRecord.Feedback_Field_1__c"></div>\n\n            <p ng-bind="feedback.metadata.Feedback_Field_2__c.inlineHelpText"></p>\n\n            <div star-rating rating-value="rawRecord.Feedback_Field_2__c"></div>\n\n            <p ng-bind="feedback.metadata.Feedback_Field_3__c.inlineHelpText"></p>\n\n            <div star-rating rating-value="rawRecord.Feedback_Field_3__c"></div>\n\n            <p>Any other feedback?</p>\n            <div class="tf-text-block">\n\n            <textarea class="tf-moment-body"\n                      placeholder=""\n                      rows="5"\n                      ng-focus="textareaFocus()"\n                      ng-readonly="bodyIsReadOnly"\n                      ng-model="rawRecord.Feedback_Text__c"\n                      ></textarea>\n            </div>\n\n            <div class="popup-buttons">\n                <button type="submit" class="tf-red button button-full button-positive">\n                    Send feedback\n                </button>\n                <div ng-click="feedback.closeModal()" class="button button-full button-cancel">\n                    Cancel\n                </div>\n            </div>\n        </form>\n    </ion-content>\n\n</ion-modal-view>\n')}]),angular.module("apps/myTrafalgar/components/footer/footer.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/footer/footer.tpl.html",'<ion-footer-bar class="tf-footer">\n\n    <!-- left -->\n    <div class="pull-left" ng-hide="tfFooterService.isNavigationLocked()">\n        <button class="button button-icon icon icon-ttc-home" ui-sref="tripnavigator" ng-click="tfAnalytics.navigationHome()"></button>\n        <button class="button button-icon icon icon-ttc-profile" ui-sref="profile" ng-click="tfAnalytics.navigationMyProfile()"></button>\n    </div>\n\n    <!-- menu -->\n    <div class="tq-circular-menu tf-circular-menu"\n         links="links"\n         on-item-clicked="onCircularMenuItemClicked"\n         on-inactive-btn-clicked="onInactiveBtnClicked"\n         on-filter-active-nav-items-mapping="tfTripBrowser.filterActiveNavItemsMapping"\n         tq-circular-menu></div>\n\n    <!-- right -->\n    <div class="pull-right" ng-hide="tfFooterService.isNavigationLocked()">\n        <!-- journal !accessible for future trips -->\n        <button class="button button-icon icon icon-ttc-brochure" ng-click="goToBrochure()"></button>\n        <button class="button button-icon icon icon-ttc-help" ng-click="onHelpButtonClicked()"></button>\n        <button class="button button-icon icon icon-ttc-logout" ng-click="logout(); tfAnalytics.navigationLogout();" ng-if="logoutAvailable"></button>\n    </div>\n\n</ion-footer-bar>\n')}]),angular.module("apps/myTrafalgar/components/itinerary/itinerary.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/itinerary/itinerary.tpl.html",'<div class="tf-itinerary">\n\n    <!-- A. items -->\n    <div class="itinerary-items">\n\n        <div class="accordion-item tf-content"\n             ng-repeat="item in itinerary.itineraryItems">\n\n            <!-- fixed -->\n            <div class="accordion-header"\n                 ng-click="toggleItemBody(item)"\n                 in-view>\n                <div class="day-indicator tf-title"\n                     ng-class="{true: \'active\'}[isToggled(item)]">\n                    {{$index+1}}.\n                </div>\n                <div class="title tf-title">\n                    {{item.rawRecord.Title__c}}\n                </div>\n                <i class="accordion-icon"\n                   ng-class="{true: \'icon-ttc-plus rotate\', false: \'icon-ttc-plus\'}[isToggled(item)]"></i>\n            </div>\n\n            <!-- not fixed - inView directive working on page load to make sure active item is visible -->\n            <div class="accordion-body"\n                 ng-show="isToggled(item)"\n                 in-view="isToggled(item)">\n\n                <div class="text">\n                    {{item.rawRecord.Text__c}}\n                </div>\n                <div class="extra-info">\n                    <div class="meal"\n                         ng-if="item.rawRecord.Meal__c">\n                        <div class="tf-title">Meal(s)</div>\n                        {{item.rawRecord.Meal__c}}\n                    </div>\n                    <div class="accomodation"\n                         ng-if="item.rawRecord.Accomodation__c">\n                        <div class="tf-title">Accomodation</div>\n                        {{item.rawRecord.Accomodation__c}}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- no items > invite to download -->\n        <div ng-show="itinerary.itineraryItems.length == 0 && !$root.online">\n            You must be online, or have already downloaded this brochure in the Where to next? section, to access itinerary information\n        </div>\n        <div ng-show="itinerary.itineraryItems.length == 0 && $root.online">\n            No itinerary information\n        </div>\n    </div>\n\n    <!-- B. minimap -->\n    <div class="tf-itinerary-map-wrapper"\n         tq-lazy-src="{{itinerary.tourProduct.rawRecord.Map_URL__c}}"\n         ng-click="viewFullMap(itinerary.tourProduct.rawRecord.Map_URL__c)">\n\n        <!-- no map -->\n        <div ng-if="itinerary.tourProduct.rawRecord.Map_URL__c === null">\n            Ops! Map is not available\n        </div>\n    </div>\n</div>')}]),angular.module("apps/myTrafalgar/components/journal/momentpopup/momentpopup.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/journal/momentpopup/momentpopup.tpl.html",'<div class="tf-moment-popup-form" ng-controller="TqMomentPopupController">\n    <div class="tf-moment-time-box">\n        <i class="icon-ttc-calendar"></i>\n        <!-- date picker -->\n        <tf-date-picker date="momentDetails.date"\n                        start-date="startDate"\n                        end-date="endDate">\n        </tf-date-picker>\n        <!-- time component -->\n        <input type="hidden" ng-model="moment.rawRecord.isQuote__c" autofocus="true"/>\n\n        <div class="tf-moment-time"><input type="time" name="usr_time" ng-model="momentDetails.time"/></div>\n    </div>\n    <div class="tf-moment-data-block" ng-class="{\'tf-postcard-data-block\' : isPostcard()}">\n        <div class="tf-image-block"\n             ng-if="isPostcard()"\n             ng-click="updateImage()"\n             tq-lazy-src="{{moment.rawRecord.TQ_Attachment_Link__c}}">\n        </div>\n        <div class="tf-text-block">\n            <textarea class="tf-moment-body"\n                      placeholder="{{getPlaceHolder()}}"\n                      ng-class="{\'tf-block-quote\' : moment.rawRecord.isQuote__c, \'ios\':isIOS}"\n                      ng-model="momentDetails.body"\n                      ng-focus="textareaFocus($event)"\n                      ng-readonly="bodyIsReadOnly"\n                    ></textarea>\n\n            <div class="tf-moment-author"\n                 ng-if="moment.rawRecord.isQuote__c">\n                {{moment.rawRecord.Quote_Author_Name__c}}\n            </div>\n        </div>\n    </div>\n    <div class="tf-moment-action-buttons">\n\n        <div class="flex tf-flex">&nbsp;</div>\n        <a class="tf-cancel-button" href="" ng-click="cancel()">Cancel</a>\n\n        <button ng-if="isPostcard()"\n                class="tf-button-rounded"\n                ng-class="{selected: activatedHashtag}"\n                ng-click="toggleHashtag($event)">\n            <i class="icon-ttc-hash"></i>{{hashtagText}}\n        </button>\n        <div class="">&nbsp;</div>\n\n        <button class="button tf-button tf-post-send-button tf-post-moment-button" ng-click="postToJournal($event)">\n            Post to Journal <span class="mirror"></i><i class="icon-ttc-forward"></i></span>\n        </button>\n    </div>\n</div>')}]),angular.module("apps/myTrafalgar/components/viewfullimg/viewfullimg.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/components/viewfullimg/viewfullimg.tpl.html",'<ion-modal-view class="tf-viewlargerimg-modal modal slide-in-up">\n        <!-- image -->\n        <img class="image"\n             tq-lazy-src="{{url}}"\n             ng-click="closeModal()"\n             on-swipe-down="closeModal()"\n             on-swipe-up="closeModal()"\n             on-swipe-left="closeModal()"\n             on-swipe-right="closeModal()">\n        <!-- close the modal -->\n        <a class="icon-ttc-close"\n           ng-click="closeModal()"></a>\n        </img>\n        <!-- optional text -->\n        <div class="text handwriting-font" ng-show="text" ng-bind="text"></div>\n</ion-modal-view>\n\n')}]),angular.module("apps/myTrafalgar/enquiry/enquiry-invalid-form-popup.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/enquiry/enquiry-invalid-form-popup.tpl.html",'The following fields are not filled out properly:<br/>\n<ul>\n    <li ng-repeat="requiredError in enquiryFormCtrl.$error.required">\n        {{requiredError.$name}}\n    </li>\n</ul>')}]),angular.module("apps/myTrafalgar/enquiry/enquiry.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/enquiry/enquiry.tpl.html",'<ion-view title="<i class=\'icon-ttc-brochure\'></i> Find out more"\n          class="tf-use-cornerbox tf-enquiry tf-profile">\n    <ion-content>\n        <!-- Body with the list of actions -->\n\n\n        <form name="$parent.enquiryFormCtrl"\n              class="tf-enquiry-container">\n            <h1 class="tf-title">{{tourProduct.rawRecord.Product_Name__c}}</h1>\n\n            <div class="tf-profile-content">\n\n                <!-- Text inputs-->\n                <div class="tf-section-name">\n                    <ul class="list list-inset tf-input-list">\n                        <!--ADDRESS ENTRY-->\n\n                        <li class="tf-item tf-country-select">\n                            <label class="item item-input item-select tf-item-input">\n                                <select ng-model="request.rawRecord.Departure_Date__c">\n                                    <option value=\'\'>Pick a date</option>\n                                    <option ng-repeat="date in availableDates"\n                                            value="{{date.value}}">{{date.name}}\n                                    </option>\n                                </select>\n                            </label>\n                        </li>\n\n                        <li class="tf-item">\n                            <label class="item item-input tf-item-input">\n                                <input name="Email" type="text" ng-disabled="true" ng-required="true"\n                                       placeholder="Email"\n                                       ng-model="request.rawRecord.Email__c"/>\n                            </label>\n                        </li>\n\n                        <li class="tf-item">\n                            <label class="item item-input tf-item-input">\n                                <input name="Phone" type="text" placeholder="Phone"\n                                       ng-model="request.rawRecord.Phone__c"/>\n                            </label>\n                        </li>\n\n                    </ul>\n                </div>\n\n                <div class="tf-section-aboutme">\n\n                    <label class="item item-input tf-aboutme-areacontainer">\n                        <textarea class="tf-aboutme-area" name="Comments"\n                                  placeholder="Any questions?" ng-model="request.rawRecord.Comments__c"></textarea>\n                    </label>\n                </div>\n            </div>\n            <li class="item item-checkbox tf-checkbox-assertive tf-item-checkbox">\n                <label class="checkbox">\n                    <input type="checkbox" ng-model="request.rawRecord.Received_Brochure__c"/>\n                </label>\n                <span class="tf-checkbox-label ng-binding">Post me a brochure</span>\n            </li>\n            <div ng-if="request.rawRecord.Received_Brochure__c" class="brochure-details address">\n\n                <li class="tf-item small">\n                    <label class="item item-input tf-item-input">\n                        <input name="House / Flat Number" type="text" placeholder="House / Flat Number"\n                               ng-model="request.rawRecord.Address_3__c"\n                               ng-required="true"/>\n                    </label>\n                </li>\n                <li class="tf-item large">\n                    <label class="item item-input tf-item-input">\n                        <input name="Address 1" type="text" placeholder="Address Line 1"\n                               ng-model="request.rawRecord.Address_1__c"\n                               ng-required="true"/>\n                    </label>\n                </li>\n                <li class="tf-item large">\n                    <label class="item item-input tf-item-input">\n                        <input name="Address 2" type="text" placeholder="Address Line 2"\n                               ng-model="request.rawRecord.Address_2__c"/>\n                    </label>\n                </li>\n                <li class="tf-item small">\n                    <label class="item item-input tf-item-input">\n                        <input name="State" type="text" placeholder="State / County"\n                               ng-model="request.rawRecord.State__c"/>\n                    </label>\n                </li>\n\n\n                <li class="tf-item large tf-country-select" style="margin-bottom: 1px">\n                    <label class="item item-input item-select tf-item-input">\n                        <select name="Country" ng-model="request.rawRecord.Country__c" ng-required="true">\n\n                            <option value=\'\'>Pick a country</option>\n                            <option ng-repeat="country in countries"\n                                    ng-selected="request.rawRecord.Country__c === country.name"\n                                    value="{{country.name}}">{{country.name}}\n                            </option>\n                        </select>\n                    </label>\n\n                </li>\n                <li class="tf-item extra-margin large">\n                    <label class="item item-input tf-item-input">\n                        <input type="text" name="Postal Code" placeholder="Zip/Postal code"\n                               ng-model="request.rawRecord.Postal_Code__c"\n                               ng-required="true"/>\n                    </label>\n                </li>\n\n            </div>\n\n            <br/>\n\n            <!--BUTTON BAR-->\n            <div class="wrapper">\n\n                <button class="button tf-button save-button tf-enquiry-cancel-button"\n                        ng-click="onCancelClicked()">\n                    <span class="tf-navigator-button-label">Cancel</span>\n                </button>\n\n                <button class="button tf-button save-button" ng-click="onSubmitClicked()">\n                    <span class="tf-navigator-button-label">Send</span>\n                    <span class="tf-navigator-button-arrow"><i class="icon-ttc-forward"></i></span>\n                </button>\n\n            </div>\n        </form>\n        <div class="bottom-spacer"></div>\n\n    </ion-content>\n</ion-view>');
}]),angular.module("apps/myTrafalgar/help/help.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/help/help.tpl.html",'<ion-view title="{{headerTitle}}"\n          hide-back-button="true">\n\n    <ion-content>\n        Help\n    </ion-content>\n</ion-view>')}]),angular.module("apps/myTrafalgar/index.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/index.tpl.html",'<!-- note force align-title center otherwise not working on android -->\n<ion-nav-bar class="tq-main-nav-bar"\n             align-title="center"\n             delegate-handle="main"\n        >\n    <ion-nav-back-button class="button-icon ion-chevron-left" ng-click="appGoBack()" ng-show="shouldShowBack"><span class="hide-phone"> Back </span>\n        <span><!--This is just dummy to stop ionic adding it\'s default behavior-->  </span>\n    </ion-nav-back-button>\n</ion-nav-bar>\n\n\n<!-- inject ion-view content -->\n<ion-nav-view class="main-container">\n</ion-nav-view>\n\n<!-- footer | do not show in login and activation -->\n<tf-footer ng-if="showFooter"></tf-footer>')}]),angular.module("apps/myTrafalgar/journal/journal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/journal/journal.tpl.html",'<ion-view>\n    <!--<ion-nav-buttons side="right">-->\n        <!--<button class="button button-icon ion-chevron-right icon-right"-->\n                <!--ng-click="abstractTripState.goNext()">Next</button>-->\n    <!--</ion-nav-buttons>-->\n    <ion-nav-title ng-bind-html="\'<i class=\\\'icon-ttc-journal\\\'></i> Journal -\' +  journal.tourProduct.rawRecord.Product_Name__c">SUPER long title!</ion-nav-title>\n    <!-- add note btn -->\n    <ion-nav-buttons side="right">\n        <button class="button button-icon ion-chevron-right icon-right"\n                ng-click="abstractTripState.goNext()">Next</button>\n    </ion-nav-buttons>\n\n    <!--Fixed button icon-->\n    <button ng-class="journal.showNotes ? \'icon-ttc-postcards\' : \'icon-ttc-notes\'"\n            class="show-phone button button-icon"\n            ng-click="journal.toggleView()"\n            id="toggle-button">\n    </button>\n\n\n    <div class="tf-journal">\n        <!-- bar -->\n\n\n        <div class="day-repeat viewport-height">\n            <ul class="journal-day-container">\n                <li ng-repeat="day in journal.days"\n                    ng-click="journal.changeDay(day)"\n                    ng-class="{\'selected\' : journal.selectedTripDay === day}"\n                    class="journal-day">\n                    {{day}}\n                </li>\n            </ul>\n        </div>\n        <!-- content -->\n        <div class="wrapper flex">\n            <!-- notes -->\n            <div ng-show="journal.showNotes || journal.isUndefined(journal.showNotes)" class="flex">\n                <div ng-style="" ng-include class="notes-wrapper" src="\'apps/myTrafalgar/journal/notes.tpl.html\'">\n                </div>\n            </div>\n            <!-- postcard -->\n            <div class="flex" ng-show="!journal.showNotes || journal.isUndefined(journal.showNotes)">\n                <div ng-include src="\'apps/myTrafalgar/journal/postcards.tpl.html\'" ng-controller="TfJournalPostcardsCtrl">\n                </div>\n            </div>\n\n        </div>\n    </div>\n</ion-view>\n')}]),angular.module("apps/myTrafalgar/journal/notes.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/journal/notes.tpl.html",'<div class="relative tf-notes">\n    <ion-content scrollbar-y="false" has-header="false">\n        <div ng-controller="tfJournalNotesCtrl" class="paper">\n            <div class="wrapper">\n                <h1 class="flex title-font tf-title tf-red">Day {{journal.selectedTripDay}}</h1>\n                <span class="flex date tf-content" ng-bind="notes.getDate()"></span>\n                <button class="button button-icon icon-ttc-plus" id="add-note-plus"\n                        ng-click="addNote()"></button>\n            </div>\n            <div  class="tf-content no-notes"\n                  ng-if="notes.noNotes"\n                    ng-click="addNote()">\n                Tap the <span class="icon-ttc-plus"></span> icon to add </br>\n                a new journal entry\n            </div>\n            <div class="note" ng-repeat="note in notes.list">\n\n                <div class="tf-content" ng-class="notes.isQuote(note)">\n                    <!-- controls -->\n                    <div class="editWrapper tf-content">\n                        <i class="button-icon icon-ttc-trash"\n                           ng-click="removeNote(note)"></i>\n                        <i class="button-icon icon-ttc-edit"\n                           ng-click="editNote(note)"></i>\n                        <span class="tf-red" ng-bind="notes.getTimeForNote(note)"></span>\n                    </div>\n                    <!-- text -->\n                    <span ng-bind="note.rawRecord.Body__c"></span>\n                </div>\n\n                <div class="quote-author" ng-bind="note.rawRecord.Quote_Author_Name__c"></div>\n            </div>\n        </div>\n    </ion-content>\n</div>')}]),angular.module("apps/myTrafalgar/journal/postcards.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/journal/postcards.tpl.html",'<div class="tf-postcards flex">\n    <div class="tf-current-postcard">\n        <div class="tf-postcard-image" ng-if="postcards.selectedPostcard"\n             tq-lazy-src="{{postcards.selectedPostcard.rawRecord.TQ_Attachment_Link__c}}"\n             ng-click="postcards.viewfullscreen()">\n        </div>\n        <div class="tf-postcard-image no-image" ng-if="!postcards.selectedPostcard"\n             tq-lazy-src="{{postcards.selectedPostcard.rawRecord.TQ_Attachment_Link__c}}"\n             ng-click="postcards.create()">\n             <div class="tf-postcard-upload-message">\n                Upload or take a new photo - just click the <i class="icon-ttc-camera"></i> icon\n             </div>\n        </div>\n        <!--<img class="tf-postcard-stamp" src="assets/stamp.png"/>-->\n        <div class="tf-postcard-details">\n            <div class="tf-postcard-title flex handwriting-font"\n                 ng-if="postcards.selectedPostcard"\n                 ng-click="postcards.viewfullscreen()">\n                {{postcards.selectedPostcard.rawRecord.Body__c}}\n            </div>\n            <div class="tf-postcard-control-buttons" ng-if="postcards.selectedPostcard">\n                <i class="button-icon icon-ttc-trash"\n                   ng-click="postcards.remove(postcards.selectedPostcard)"></i>\n                <i class="button-icon icon-ttc-edit"\n                   ng-click="postcards.edit(postcards.selectedPostcard)"></i>\n            </div>\n        </div>\n    </div>\n    <button class="button tf-button tf-post-send-button tf-postcard-share"\n            ng-class="{\'disabled\': !postcards.selectedPostcard}"\n            ng-click="postcards.share(postcards.selectedPostcard)">\n        Share my postcard <span class="mirror"></i><i class="icon-ttc-forward"></i></span>\n    </button>\n    <div class="tf-add-photo-label title-font">\n        Add your photo here\n    </div>\n    <div class="tf-photo-collection">\n        <div class="tf-photo-box">\n            <a class="tf-add-photo thumbnail" href=""\n                 ng-click="postcards.create()">\n                <i class="icon-ttc-camera"></i>\n            </a>\n        </div>\n        <div class="tf-carousel-backward-icon" ng-class="{\'visible\': postcards.currentPage > 0}">\n            <i class="icon-ttc-back"></i>\n        </div>\n        <ul rn-carousel rn-carousel-index="postcards.currentPage" class="image tf-photo-carousel">\n            <li ng-repeat="page in postcards.pages" ng-init="pageIndex = $index">\n                <div class="tf-photo-box" ng-repeat="postcard in page"\n                     ng-class="{\'tf-photo-box-selected\' : isSelected(postcard)}">\n                    <div class="tf-postcard-thumb" ng-if="postcard && closeToSelectedPage(postcards.currentPage, pageIndex)"\n                         tq-lazy-src="{{postcard.rawRecord.TQ_Attachment_Link__c}}"\n                         ng-click="postcards.select(postcard)"></div>\n                </div>\n            </li>\n        </ul>\n        <div class="tf-carousel-forward-icon" ng-class="{\'visible\': postcards.currentPage < postcards.pages.length - 1}">\n            <i class="icon-ttc-forward"></i>\n        </div>\n    </div>\n</div>')}]),angular.module("apps/myTrafalgar/login/login.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/login/login.tpl.html",'<ion-view view-title="Login">\n    <ion-content class="login-page"\n                 ng-controller="TqLoginCtrl"\n                 scroll="false">\n        \n        <!-- Actions available when online -->\n        <div class="tf-login-main" ng-if="$root.online">\n\n            <!-- Login button -->\n            <div class="tf-login-container">\n                <button class="button tf-button tf-login-button" ng-click="login()">\n                    <span class="tf-login-button-label">Log in</span>\n                    <span class="tf-login-button-arrow"><i class="icon-ttc-forward"></i></span>\n                </button>\n            </div>\n\n            <!-- Register button -->\n            <div class="tf-login-container">\n                <button class="button tf-button-secondary tf-button-reverse tf-login-button" ng-click="register()">\n                    <span class="tf-login-button-label">Register</span>\n                    <span class="tf-login-button-arrow"><i class="icon-ttc-forward"></i></span>\n                </button>\n            </div>\n\n        </div>\n\n        <!-- Actions available when online -->\n        <div class="tf-login-main tf-login-offline tf-content" ng-if="!$root.online">\n            <div class="tf-login-container">\n                You need to be online in order to start the application for the first time\n            </div>\n        </div>\n\n    </ion-content>\n</ion-view>')}]),angular.module("apps/myTrafalgar/profile/profile.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/profile/profile.tpl.html",'<ion-view title="{{headerTitle}}"\n          class="tf-use-cornerbox tf-profile"\n          hide-back-button="true">\n    <ion-content>\n        <!-- Body with the list of actions -->\n        <div id="tf-profile-optionbox-container">\n\n            <!--corner box brand identity-->\n            <ng-include src="\'apps/myTrafalgar/components/cornerbox/cornerbox.tpl.html\'"></ng-include>\n\n            <!-- Welcome Banner -->\n            <div ng-if="hasWelcomeBanner" class="tf-transparent-container tf-profile-welcome-container">\n                <h1 class="tf-title title-font">\n                    Welcome to your <span class="tf-red">TRAFALGAR</span> journey\n                </h1>\n\n                <p class="tf-title-tagline">To start your trip of a lifetime, create your profile</p>\n            </div>\n\n            <div class="tf-transparent-container tf-profile-content">\n\n                <!-- 1. Intro and checkboxes-->\n                <div class="tf-section-intro">\n                    <!-- Intro -->\n                    <div ng-bind="appVersion"></div>\n\n                    <div class="tf-profile-intro">\n                        Meet your fellow travellers and tap into our travel tips with this handy app.\n                        Just fill in your details and click save to get started.\n                    </div>\n\n                    <!-- Intro -->\n\n                    <ul class="list">\n                        <li class="item item-checkbox tf-checkbox-assertive tf-item-checkbox">\n                            <label class="checkbox">\n                                <input type="checkbox" ng-model="runningUser.rawRecord.Default_Trafalgar_Hashtag__c"\n                                       ng-click="onAddHashtagClicked()"/>\n                            </label>\n                            <span class="tf-checkbox-label">Add {{hashtag}} to my posts</span>\n                        </li>\n                        <li class="item item-checkbox tf-checkbox-assertive tf-item-checkbox">\n                            <label class="checkbox">\n                                <input type="checkbox" ng-model="runningUser.rawRecord.Show_My_Email_Address__c"\n                                       ng-click="onShowEmailClicked()"/>\n                            </label>\n                            <span class="tf-checkbox-label">{{userLabels["Show_My_Email_Address__c"]}}</span>\n                        </li>\n                    </ul>\n                </div>\n\n                <!-- 2. Avatar and inputs -->\n\n\n                <!-- Avatar-->\n                <div class="tf-section-avatar"\n                     tq-input-file-attachment="saveAvatar($event)">\n                    <div class="tf-section-avatar-box">\n                        <i class="tf-section-avatar-icon icon-ttc-profile"></i>\n\n                        <div class="tf-profile-avatar" tq-lazy-src="{{userAvatarUrl}}"></div>\n                    </div>\n                    <div class="update-avatar-text-helptext">Choose photo<br/>Take a new photo</div>\n                </div>\n\n                <!-- Text inputs-->\n                <div class="tf-section-name">\n                    <ul class="list list-inset tf-input-list">\n                        <li class="tf-item first-name-wrapper">\n                            <label class="item item-input item-select tf-item-input title">\n                                <select ng-model="runningUser.rawRecord.Title"\n                                        ng-options="title.name as title.value for title in titles">\n                                    <option value="">{{userLabels[\'Title\']}}</option>\n                                </select>\n                            </label>\n                            <label class="item item-input tf-item-input first-name">\n                                <input type="text" placeholder="{{userLabels[\'FirstName\']}}"\n                                       ng-model="runningUser.rawRecord.FirstName"/>\n                            </label>\n                        </li>\n                        <li class="tf-item">\n                            <label class="item item-input tf-item-input">\n                                <input type="text" placeholder="{{userLabels[\'LastName\']}}"\n                                       ng-model="runningUser.rawRecord.LastName"/>\n                            </label>\n                        </li>\n                        <li class="tf-item tf-country-select">\n                            <label class="item item-input item-select tf-item-input">\n                                <div class="input-label">{{userLabels[\'Country__c\']}}</div>\n                                <select ng-model="runningUser.rawRecord.Country__c">\n                                    <option value="" class="tf-placeholder-option">Country of residence</option>\n                                    <option ng-repeat="country in countries" value="{{country.value}}">\n                                        {{country.name}}\n                                    </option>\n                                </select>\n                            </label>\n                        </li>\n                    </ul>\n                </div>\n\n\n                <!-- 3. About me and buttons-->\n                <div class="tf-section-aboutme">\n\n                    <label class="item-input tf-aboutme-areacontainer">\n                        <textarea class="tf-aboutme-area" placeholder="A bit about me..."\n                                  ng-model="runningUser.rawRecord.AboutMe"></textarea>\n                    </label>\n\n                    <button class="button tf-button save-button" ng-click="save()">\n                        <span class="tf-navigator-button-label">Save</span>\n                        <span class="tf-navigator-button-arrow"><i class="icon-ttc-forward"></i></span>\n                    </button>\n                </div>\n            </div>\n            <div class="bottom-spacer"></div>\n        </div>\n    </ion-content>\n</ion-view>')}]),angular.module("apps/myTrafalgar/register/addtrip.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/register/addtrip.tpl.html",'<ion-view title="Add Trip" class="tf-addtrip">\n    <div class="tf-addtrip-form">\n        \n        <div class="tf-data">\n            <input type="text" ng-model="userData.reservationNumber" placeholder="Reservation number, e.g. TTCANS-A839603"\n                   ng-class="{\'tf-error\': errorMap[\'reservationNumber\']}"/>\n        </div>\n\n        <div class="tf-login-container">\n            <button class="button tf-button tf-login-button" ng-click="addtrip()">\n                <span class="tf-login-button-label">Add Trip</span>\n                <span class="tf-login-button-arrow"><i class="icon-ttc-forward"></i></span>\n            </button>\n        </div>\n    </div>\n</ion-view>')}]),angular.module("apps/myTrafalgar/register/register.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/register/register.tpl.html",'<ion-view title="Register" class="tf-register">\n    <!-- Body with the list of actions -->\n\n  <ion-content>\n\n    <div class="tf-register-form">\n<div class="warning-block">\n<i class="ion-alert-circled"></i>  All fields are mandatory\n</div>\n        <div class="tf-username-container">\n            <div class="tf-data tf-firstname" ng-class="{\'tf-error\': errorMap[\'firsName\']}">\n                <i class="icon-ttc-profile"></i>\n                <input type="text" ng-model="userData.firstName" placeholder="First Name"/>\n            </div>\n            <div class="tf-data tf-lastname" ng-class="{\'tf-error\': errorMap[\'lastName\']}">\n                <input type="text" ng-model="userData.lastName" placeholder="Last Name"/>\n            </div>\n        </div>\n        <div class="tf-data">\n            <label class="item item-input item-select tf-data-select">\n                <div class="input-label">Country of residence</div>\n                <select class="input-select" ng-model="userData.country">\n                    <option value="">Select a Country</option>\n                    <option ng-repeat="country in countries" value="{{country.value}}">{{country.name}}</option>\n                </select>\n            </label>\n        </div>\n        <div class="tf-data">\n            <input type="text" ng-model="userData.email"\n                   ng-focus="inputFocus()"\n                   placeholder="Email" ng-class="{\'tf-error\': errorMap[\'email\']}">\n        </div>\n        <div class="tf-data">\n            <input type="text" ng-model="userData.emailConfirm" placeholder="Confirm Email"\n                   ng-focus="inputFocus()"\n                   ng-class="{\'tf-error\': errorMap[\'emailConfirm\']}">\n        </div>\n        <div class="tf-data">\n           <input type="password" ng-model="userData.password" placeholder="Password"\n                  ng-focus="inputFocus()"\n                  ng-class="{\'tf-error\': errorMap[\'password\']}"/>\n        </div>\n        <div class="tf-data">\n            <input type="password" ng-model="userData.confirmPassword" placeholder="Confirm password"\n                   ng-focus="inputFocus()"\n                   ng-class="{\'tf-error\': errorMap[\'confirmPassword\']}"/>\n        </div>\n        <div class="tf-data">\n            <input type="text" ng-model="userData.reservationNumber" placeholder="Reservation number, e.g. TTCANS-A839603"\n                   ng-focus="inputFocus()"\n                   ng-class="{\'tf-error\': errorMap[\'reservationNumber\']}"/>\n        </div>\n\n        <div class="tf-login-container">\n            <button class="button tf-button tf-login-button" ng-click="register()">\n                <span class="tf-login-button-label">Register new user</span>\n                <span class="tf-login-button-arrow"><i class="icon-ttc-forward"></i></span>\n            </button>\n        </div>\n    </div>\n  </ion-content>\n</ion-view>')}]),angular.module("apps/myTrafalgar/selectedtrip/selectedtrip.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/selectedtrip/selectedtrip.tpl.html",'<ion-view hide-back-button="true">\n    <ion-nav-title ng-bind-html="selectedTrip.title"></ion-nav-title>\n    <ion-content scroll="true"\n                 delegate-handle="selectedTrip"\n                 class="tf-selected-trip-page hidden"\n                 on-scroll="selectedTrip.onScroll()"\n                 scroll-event-interval="300">\n        <div class="tf-selected-trip">\n            <!-- Countdown -->\n\n            <!-- Itinerary -->\n            <div class="tf-itinerary-wrapper viewport-height" id="itinerary">\n                <tf-itinerary ng-cloak\n                              itinerary-items="selectedTrip.itineraryItems"\n                              product="selectedTrip.product"\n                              selected-trip="selectedTrip.trip"></tf-itinerary>\n\n                <!-- add sharing buttons -->\n                <div class="tf-brochure-buttons-wrapper"\n                     ng-if="selectedTrip.brochure">\n\n                    <button class="button tf-button"\n                            ng-click="shareTrip()">\n                        <span class="label">Share Trip</span>\n                        <span class="after-icon icon-ttc-forward"></span>\n                    </button>\n                    <div class="right">\n                        <button class="button tf-button tf-button-secondary"\n                                ng-click="showAvailabilityAndPrices()"\n                                ng-disabled="!$root.online">\n                            <span class="label">Prices and Availability</span>\n                            <span class="after-icon icon-ttc-forward"></span>\n                        </button>\n                        <button class="button tf-button"\n                                ui-sref="enquiry">\n                            <span class="label">Find out more</span>\n                            <span class="after-icon icon-ttc-forward"></span>\n                        </button>\n                    </div>\n                </div>\n\n                <span class="icon-ttc-down tf-transparent"\n                      ng-click="selectedTrip.goToSection(\'tipsntricks\')"\n                      ng-if="selectedTrip.showTipsAndTricks && !selectedTrip.brochure">\n\n                </span>\n\n                <span class="icon-ttc-down tf-transparent"\n                      ng-click="selectedTrip.goToSection(\'chatter\')"\n                      ng-if="!selectedTrip.showTipsAndTricks && !selectedTrip.brochure">\n                </span>\n\n            </div>\n\n            <!-- Tips and Tricks (not available on past trips) -->\n            <div ng-if="selectedTrip.showTipsAndTricks && !selectedTrip.brochure"\n                 class="tf-tips-and-tricks viewport-height"\n                 id="tipsntricks">\n                <div class="tf-itinerary">\n\n                    <!-- A. items -->\n                    <div class="itinerary-items">\n                        <div class="accordion-item tf-content"\n                             ng-repeat="(key, item) in selectedTrip.tips">\n                            <!-- fixed -->\n                            <div class="accordion-header"\n                                 ng-click="selectedTrip.toggleItemBody(item)"\n                                 in-view>\n                                <div class="title tf-title">\n                                    {{item.Field_Label}}\n                                </div>\n                                <i class="accordion-icon"\n                                   ng-class="{true: \'icon-ttc-plus rotate\', false: \'icon-ttc-plus\'}[selectedTrip.isToggled(item)]"></i>\n                            </div>\n\n                            <!-- not fixed -->\n                            <div class="accordion-body" ng-show="selectedTrip.isToggled(item)">\n\n                                <div class="country-details" ng-repeat="country in item.Countries">\n                                    <h3 class="tf-title">{{country.Country}}</h3>\n\n                                    <div class="text tf-content" ng-bind-html="country.Content">\n                                    </div>\n\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <span class="icon-ttc-down tf-transparent"\n                      ng-click="selectedTrip.goToSection(\'chatter\')"\n                      ng-if="selectedTrip.showTipsAndTricks && !selectedTrip.brochure"></span>\n            </div>\n\n            <!-- Chatter -->\n            <div class="tf-chatter viewport-height" id="chatter"\n                 ng-if="!selectedTrip.brochure">\n                <div ng-controller="TQChatterExtensionCtrl">\n                    <div class="wrap tf-transparent-container">\n                        <div class="avatar-image" tq-lazy-src="{{user.getUserFullImage()}}"></div>\n\n                        <p class="tf-title">Hi <span class="tf-red" ng-bind="user.getUserName()"></span>. Chatter is\n                            the\n                            place to get to know your\n                            travel friends and prepare for an incredible trip together. So get connected - post your\n                            comments, questions and photos here\n                        </p>\n                    </div>\n\n                    <div class="background-white ">\n\n                        <!--This pill navigates the main state-->\n                        <div class="tf-pill tf-cta" id="state-change-pill">\n                            <button nav-transition="none"\n                                    class="button tf-button-rounded"\n                                    ng-class="selectedTrip.mainSectionActivated"\n                                    ui-sref-active="selected"\n                                    ng-click="onChatterClickedPhone()"\n                                    ui-sref="selectedTrip.main.chatter">\n                                Chatter\n                            </button>\n                            <button nav-transition="none"\n                                    ng-click="onTravelDirectorClickedPhone()"\n                                    class="button tf-button-rounded"\n                                    ui-sref-active="selected"\n                                    ui-sref="selectedTrip.main.travelDirector">Travel\n                                Director\n                            </button>\n                            <button nav-transition="none"\n                                    ng-click="onOtherGuestsClickedPhone()"\n                                    class="button tf-button-rounded"\n                                    ui-sref-active="selected"\n                                    ui-sref="selectedTrip.main.otherGuests">\n                                Other Guests\n                            </button>\n                        </div>\n\n                        <div class="wrapper">\n                            <!--Chatter main-->\n                            <ion-nav-view name="main"\n                                          class="flex">\n                            </ion-nav-view>\n\n                            <!--Travel director and other guest side menu, only available on tablet-->\n                            <div ng-if="!$root.isPhone" class="side-bar">\n                                <div class="tf-pill tf-cta" id="side-bar-pill">\n\n                                    <button nav-transition="none"\n                                            class="button tf-button-rounded"\n                                            ui-sref-active="selected"\n                                            ui-sref="selectedTrip.side.otherGuests"\n                                            ng-click="onOtherGuestsClickedTablet()">\n                                        Who\'s on my trip?\n                                    </button>\n\n                                    <!--This pill navigates the side menu-->\n                                    <button class="button tf-button-rounded"\n                                            nav-transition="none"\n                                            ui-sref-active="selected"\n                                            ui-sref="selectedTrip.side.travelDirector"\n                                            ng-click="onMyTravelDirectorClickedTablet()">\n                                        My Travel Director\n                                    </button>\n                                </div>\n                                <ion-nav-view name="side"></ion-nav-view>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <!-- extra space at the bottom -->\n            <div class="bottom-spacer"></div>\n        </div>\n    </ion-content>\n</ion-view>')}]),angular.module("apps/myTrafalgar/selectedtrip/substates/chatter-substate.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/selectedtrip/substates/chatter-substate.tpl.html",'<!--<ion-content scroll="false">-->\n    <tq-chatter-feed feed-type="chatterFeedType" feed-object-id="chatterFeedObjectId">\n\n        <!-- extend the tq-chatter-feed controller\n            (note does have to stay inside the directive scope, and not on the directive element (would clash having two controllers on same element)) -->\n        <!-- new functionality specific to the trafalgar chatter feed -->\n        <!-- post component -->\n\n        <tq-chatter-post template-url="client/components/chatter/post/post.tpl.html">\n        </tq-chatter-post>\n\n        <div class="tq-list-content">\n            <ion-list class="tq-list-items-wrapper" can-swipe="swipable">\n                <tq-chatter-feeditem ng-cloak ng-repeat="record in records" record="record" index="$index"\n                                     record="record" object-api-name="\'FeedIten"\n                                     deletable="true"\n                                     click="click(index, record)">\n                    <!-- actions -->\n                    <tq-chatter-action-buttons\n                            template-url="client/components/chatter/actionbuttons/actionbuttons.tpl.html">\n                    </tq-chatter-action-buttons>\n                </tq-chatter-feeditem>\n            </ion-list>\n        </div>\n        <ion-infinite-scroll ng-if="moreDataCanBeLoaded" on-infinite="loadMore()" distance="10%"></ion-infinite-scroll>\n\n    </tq-chatter-feed>\n\n')}]),angular.module("apps/myTrafalgar/tripnavigator/triplist/item/item.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/tripnavigator/triplist/item/item.tpl.html",'<div class="tf-triplist-item"\n     ng-click="onClick(record)">\n\n    <div class="image-wrapper">\n        <div class="image"\n             tq-lazy-src="{{triplistitem.record.rawRecord.Background_URL__c}}"\n             placeholder="">\n        </div>\n    </div>\n\n    <div class="content-actions">\n        <div class="tf-content content">\n            <div class="name">{{triplistitem.record.rawRecord.Product_Name__c}}</div>\n            <div class="startdate">{{triplistitem.record.rawRecord.Start_Date__c | date:\'dd/MM/yyyy\'}}</div>\n        </div>\n        <button class="button tf-button">\n            <span class="tf-navigator-button-label">View trip</span>\n            <span class="tf-navigator-button-arrow"><i class="icon-ttc-forward"></i></span>\n        </button>\n    </div>\n</div>');
}]),angular.module("apps/myTrafalgar/tripnavigator/triplist/triplist.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/tripnavigator/triplist/triplist.tpl.html",'<ion-view title="{{headerTitle}}"\n          class="tf-triplist">\n\n    <ion-content>\n\n        <!-- list of past or future trips -->\n        <tq-list object-api-name="triplist.query.objectApiName"\n                 where="triplist.query.where"\n                 orderby="\'Start_Date__c ASC\'"\n                 searchable="true"\n                 sortable="false"\n                 has-header="false"\n                 delegate-handle="tripListDelegateHandle"\n                 on-before-search="onBeforeSearch()"\n                 empty-list-text="No Trips"\n                 search-name="Product_Name__c"\n                 on-list-item-click="onListItemClick">\n\n            <!-- item !note! this block gets transcluded using it\'s own isolated scope, so we need the parent (tq-list) to pass the scope.onClick to it -->\n            <tf-triplist-item on-click="onListItemClick"\n                              ng-repeat="record in records"\n                              record="record">\n            </tf-triplist-item>\n\n        </tq-list>\n\n        <!-- add trip btn (future holidays) -->\n        <button class="button tf-button tf-add-trip-button"\n                ng-if="triplist.listType == \'future\'"\n                ng-click="onAddTripClicked()">\n            <span class="tf-navigator-button-label">Add trip</span>\n            <span class="tf-navigator-button-arrow"><i class="icon-ttc-forward"></i></span>\n        </button>\n\n    </ion-content>\n</ion-view>')}]),angular.module("apps/myTrafalgar/tripnavigator/tripnavigator.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/tripnavigator/tripnavigator.tpl.html",'<ion-view title="<i class=\'icon-ttc-home\'></i> Home"\n          class="tf-use-cornerbox tf-navigator"\n          hide-back-button="true">\n\n    <ul class="tf-navigator-items">\n        <ng-include src="\'apps/myTrafalgar/components/cornerbox/cornerbox.tpl.html\'"></ng-include>\n\n        <!-- My Past Holidays -->\n        <li class="tf-transparent-container tf-navigator-option"\n            ng-click="showPastTrips()">\n            <div class="tf-navigator-icon button-icon">\n                <i class="icon-ttc-passport"></i>\n            </div>\n            <button class="button tf-button tf-navigator-button">\n                <span class="tf-navigator-button-label">My Past <br/>Trips</span>\n                <span class="tf-navigator-button-arrow"><i class="icon-ttc-forward"></i></span>\n            </button>\n        </li>\n\n        <!-- My Current Holidays -->\n        <li class="tf-transparent-container tf-navigator-option"\n            ng-click="showCurrentTrip()">\n            <div class="tf-navigator-icon button-icon">\n                <i class="icon-ttc-current"></i>\n            </div>\n            <button class="button tf-button tf-navigator-button">\n                <span class="tf-navigator-button-label">My Current <br/>Trip</span>\n                <span class="tf-navigator-button-arrow"><i class="icon-ttc-forward"></i></span>\n            </button>\n        </li>\n\n        <!-- My Future Holidays -->\n        <li class="tf-transparent-container tf-navigator-option"\n            ng-click="showFutureTrips()">\n            <div class="tf-navigator-icon button-icon">\n                <i class="icon-ttc-case"></i>\n            </div>\n            <button class="button tf-button tf-navigator-button">\n                <span class="tf-navigator-button-label">My Future <br/>Trips</span>\n                <span class="tf-navigator-button-arrow"><i class="icon-ttc-forward"></i></span>\n            </button>\n\n        </li>\n\n        <!-- Brochure -->\n        <li class="tf-transparent-container tf-navigator-option"\n            ng-click="goToBrochure()">\n            <div class="tf-navigator-icon button-icon">\n                <i class="icon-ttc-brochure"></i>\n            </div>\n            <button class="button tf-button tf-navigator-button">\n                <span class="tf-navigator-button-label">Where to <br/>next?</span>\n                <span class="tf-navigator-button-arrow"><i class="icon-ttc-forward"></i></span>\n            </button>\n        </li>\n    </ul>\n\n</ion-view>')}]),angular.module("apps/myTrafalgar/useragreement/useragreement.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/useragreement/useragreement.tpl.html",'<ion-view title="<i class=\'icon-ttc-profile\'></i> User Agreement"\n          class="tf-use-cornerbox tf-profile"\n          hide-back-button="true">\n        <!-- Body with the list of actions -->\n        <div class="tf-useragreement-container">\n\n            <!--corner box brand identity-->\n            <ng-include src="\'apps/myTrafalgar/components/cornerbox/cornerbox.tpl.html\'"></ng-include>\n\n            <div class="tf-transparent-container tf-profile-content">\n\n                <!-- 1. Intro and checkboxes-->\n                <div class="tf-section-intro">\n                    <!-- Intro -->\n                    <ion-content>\n                        <div class="tf-profile-intro">\n                            <h3 class="tf-title">End User Licence Agreement (EULA)</h3>\n                            <div class="tf-content" id="eula-text">{{ userAgreement }}</div>\n                        </div>\n                    </ion-content>\n\n                    <div ng-if="wasUserAgreementAccepted" class="tf-agreement-accepted">\n                        <span>\n                            <b>\n                                Accepted: {{policyAcceptedCFormatted}}\n                            </b>\n                        </span>\n                    </div>\n                    <div ng-if="!wasUserAgreementAccepted" class="tf-user-agreement-button-bar">\n                        <button class="button tf-button save-button back" ng-click="onRejectClicked()">\n                            <span class="tf-navigator-button-arrow"><i class="icon-ttc-back"></i></span>\n                            <span class="tf-navigator-button-label">Reject</span>\n                        </button>\n\n                        <button class="button tf-button save-button" ng-click="onAcceptClicked()">\n                            <span class="tf-navigator-button-label">Accept</span>\n                            <span class="tf-navigator-button-arrow"><i class="icon-ttc-forward"></i></span>\n                        </button>\n                    </div>\n                </div>\n\n            </div>\n            <br/>\n            <br/>\n            <br/>\n            <br/>\n        </div>\n</ion-view>')}]),angular.module("apps/myTrafalgar/wizard/wizard.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/myTrafalgar/wizard/wizard.tpl.html",'<ion-view title=\'<i class="icon-ttc-help"></i> Wizard\'\n          class="tf-wizard"\n          hide-back-button="true">\n    <ion-content>\n\n        <div class="wizard-wrapper">\n\n            <img responsive-image-map\n                 ng-src="assets/wiz{{wizard.stage}}-{{wizard.type}}.png"\n                 usemap="#wizardMap">\n\n            <map name="wizardMap" ng-if="!$root.isPhone">\n                <!--Get Started-->\n                <area shape="rect"  ng-click="wizard.next()" coords="547, 360, 1098, 462" ng-if="wizard.stage == 1"/>\n                <!--skip-->\n                <area shape="rect"  ng-click="wizard.skip()"  coords="1317, 653, 1655, 798" />\n\n                <!--Next chevron-->\n                <area shape="rect"  ng-click="wizard.next()" coords="1483, 225, 1649, 556" ng-if="wizard.stage != 1 && wizard.stage != 12" />\n\n                <!--back-->\n                <area shape="rect" ng-click="wizard.back()"  coords="7, 714, 169, 785" ng-if="wizard.stage != 1"/>\n\n            </map>\n\n            <map name="wizardMap" ng-if="$root.isPhone">\n                <!--get started-->\n                <area shape="rect" coords="31, 376, 630, 476" ng-click="wizard.next(wizard.stage)" ng-if="wizard.stage == 1" />\n\n                <!--skip-->\n                <area shape="rect" coords="491, 740, 659, 848" ng-click="wizard.skip()"  ng-if="wizard.stage !== 12"/>\n\n                <!--Close-->\n                <area shape="rect" coords="18, 543, 649, 655" ng-click="wizard.skip()" ng-if="wizard.stage == 12"/>\n\n                <!--Next-->\n                <area shape="rect" ng-click="wizard.next(wizard.stage)" coords="541, 324, 659, 533" ng-if="wizard.stage != 1 && wizard.stage != 12"  />\n\n                <!--Back-->\n                <area shape="rect"  ng-click="wizard.back()" coords="0, 760, 150, 850" ng-if="wizard.stage != 1"   />\n            </map>\n\n        </div>\n\n    </ion-content>\n</ion-view>\n\n\n')}]),angular.module("apps/tops/index.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/index.tpl.html",'<div ng-if="!$root.showAppLayout">\n    <ion-nav-view class="main-container">\n    </ion-nav-view>\n</div>\n\n<ion-side-menus ng-if="$root.showAppLayout">\n\n    <!--The actual content that will be wrapped by the side menu component-->\n    <ion-side-menu-content>\n        <ng-include src="\'apps/tops/navbar/navbar.tpl.html\'"></ng-include>\n\n        <!-- inject ion-view content -->\n        <ion-nav-view class="main-container">\n        </ion-nav-view>\n\n    </ion-side-menu-content>\n\n\n    <!-- Right menu -->\n    <ion-side-menu side="right" class="topsSideMenu">\n        <ng-include src="\'apps/tops/sidemenu-right/sidemenu-right.tpl.html\'"></ng-include>\n    </ion-side-menu>\n\n</ion-side-menus>')}]),angular.module("apps/tops/navbar/navbar.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/navbar/navbar.tpl.html",'<!-- note force align-title center otherwise not working on android -->\n<ion-nav-bar class="tq-main-nav-bar"\n             align-title="center"\n             delegate-handle="main">\n    <ion-nav-title>\n        <div class="nav-brand-logo"></div>\n    </ion-nav-title>\n\n    <ion-nav-buttons side="right">\n        <button class="icon ion-navicon-round" ng-click="toggleMenu()"></button>\n    </ion-nav-buttons>\n</ion-nav-bar>')}]),angular.module("apps/tops/profile/allocations/allocations.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/profile/allocations/allocations.tpl.html","<h1>ALLOCATIONS.TPL.HTML</h1>")}]),angular.module("apps/tops/profile/profile-header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/profile/profile-header.tpl.html",'<tq-hero-profile-picture tq-user-name="{{getUserOrPersonAccountName()}}"\n                         tq-user-profile-image-url="{{currentUser.rawRecord.SmallPhotoUrl}}"\n                         tq-avatar-change-text-class="topsAvatarChangeText"\n                         tq-avatar-user-name-class="topsAvatarUserName">\n</tq-hero-profile-picture>')}]),angular.module("apps/tops/profile/profile-left-menu.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/profile/profile-left-menu.tpl.html",'<ion-list class="topsLeftMenuFrame">\n\n    <ion-item class="topsLeftMenuTitle">\n        {{\'MY_PROFILE\' | translate}}\n    </ion-item>\n\n    <ion-item ng-href="#/profile/crew-info" class="topsLeftMenuSubTitle">\n        {{\'CREW_INFO\' | translate}}\n    </ion-item>\n\n    <ion-item ng-href="#/profile/contact-info" class="topsLeftMenuSubTitle">\n        {{\'CONTACT_INFO\' | translate}}\n    </ion-item>\n\n    <ion-item ng-href="#/profile/skills" class="topsLeftMenuSubTitle">\n        {{\'SKILLS\' | translate}}\n    </ion-item>\n\n    <ion-item ng-href="#/profile/next-of-kin" class="topsLeftMenuSubTitle">\n        {{\'NEXT_OF_KIN\' | translate}}\n    </ion-item>\n\n    <ion-item ng-href="#/profile/allocations" class="topsLeftMenuSubTitle">\n        {{\'ALLOCATIONS\' | translate}}\n    </ion-item>\n\n    <ion-item ng-href="#/profile/ctq" class="topsLeftMenuSubTitle">\n        {{\'CTQ\' | translate}}\n    </ion-item>\n</ion-list>')}]),angular.module("apps/tops/profile/profile.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/profile/profile.tpl.html",'<ion-view>\n    <ion-content class="has-header topsMainIonContent topsProfile" delegate-handle="main-application-scroll">\n\n        <ng-include ng-if="state.data.headerTemplateUrl" src="state.data.headerTemplateUrl"></ng-include>\n\n        <div class="row">\n            <div class="col-25">\n                <ng-include ng-if="state.data.leftMenuTemplateUrl" src="state.data.leftMenuTemplateUrl"></ng-include>\n            </div>\n            <div class="col-75">\n                <ui-view name="contentView"></ui-view>\n            </div>\n        </div>\n\n    </ion-content>\n</ion-view>')}]),angular.module("apps/tops/profile/skills/skills.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/profile/skills/skills.tpl.html","<h1>SKILLS.TPL.HTML</h1>")}]),angular.module("apps/tops/sidemenu-right/sidemenu-right.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/sidemenu-right/sidemenu-right.tpl.html",'<ion-content>\n    <ion-list>\n\n        <!--MY PROFILE-->\n        <ion-item class="item item-avatar item-icon-left tops-side-menu-item"\n                  ui-sref="profile.allocations">\n\n            <i class="icon ion-icon ion-ios-user"></i>\n            <div class="topsRightMenuTitle" ng-bind="\'MY_PROFILE\' | translate"></div>\n        </ion-item>\n\n        <!--MY AVAILABILITY-->\n        <ion-item class="item item-avatar item-icon-left tops-side-menu-item"\n                  ui-sref="docs">\n            <i class="icon ion-icon ion-thumbsup"></i>\n\n            <div class="topsRightMenuTitle" ng-bind="\'MY_AVAILABILITY\' | translate"></div>\n        </ion-item>\n\n        <!--COMMS-->\n        <ion-item class="item item-avatar item-icon-left tops-side-menu-item"\n                  ui-sref="docs">\n            <i class="icon ion-icon ion-chatbubbles"></i>\n\n            <div class="topsRightMenuTitle" ng-bind="\'COMMS\' | translate"></div>\n        </ion-item>\n\n        <!--MY DOCS-->\n        <ion-item class="item item-avatar item-icon-left tops-side-menu-item"\n                  ui-sref="docs">\n            <i class="icon ion-icon ion-folder"></i>\n\n            <div class="topsRightMenuTitle" ng-bind="\'MY_DOCS\' | translate"></div>\n        </ion-item>\n\n        <!--MY TRIP-->\n        <ion-item class="item item-avatar item-icon-left tops-side-menu-item"\n                  ui-sref="trip.overview({tourInstanceId: \'a1eg0000000pbjdAAA\'})">\n            <i class="icon ion-icon ion-ios-location"></i>\n\n            <div class="topsRightMenuTitle" ng-bind="\'MY_TRIP\' | translate"></div>\n        </ion-item>\n\n\n    </ion-list>\n</ion-content>')}]),angular.module("apps/tops/trip/overview/overview.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/trip/overview/overview.tpl.html",'<h1 class="tq-hero-title">OVERVIEW.TPL.HTML</h1>')}]),angular.module("apps/tops/trip/trip-header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/trip/trip-header.tpl.html",'<div>\n    <div class="hero item trip-hero"\n         ng-style="{\'background-image\' : \'url(\' + tourProduct.rawRecord.Background_URL__c + \')\'}">\n        <div class="content">\n            <h2>\n                <a class="light" ng-bind="tourProduct.rawRecord.Description__c"></a>\n            </h2>\n        </div>\n    </div>\n</div>\n')}]),angular.module("apps/tops/trip/trip-left-menu.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/trip/trip-left-menu.tpl.html",'<ion-list class="topsLeftMenuFrame">\n\n    <ion-item class="topsLeftMenuTitle">\n        {{\'MY_TRIP\' | translate}}\n    </ion-item>\n\n    <ion-item class="topsLeftMenuSubTitle">\n        {{\'OVERVIEW\' | translate}}\n    </ion-item>\n\n    <tq-item-group tq-item-groups="leftMenuItemGroups"\n                   tq-item-group-header-class="topsLeftMenuSubTitle"\n                   tq-item-group-member-class="topsLeftMenuSubTitle">\n    </tq-item-group>\n\n    <ion-item class="topsLeftMenuSubTitle">\n        {{\'ROOMING\' | translate}}\n    </ion-item>\n\n    <ion-item class="topsLeftMenuSubTitle">\n        {{\'GENERAL\' | translate}}\n    </ion-item>\n\n</ion-list>')}]),angular.module("apps/tops/trip/trip.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("apps/tops/trip/trip.tpl.html",'<ion-view>\n    <ion-content class="has-header topsMainIonContent topsTrip" delegate-handle="main-application-scroll">\n\n        <ng-include ng-if="state.data.headerTemplateUrl" src="state.data.headerTemplateUrl"></ng-include>\n\n        <div class="row">\n            <div class="col-25">\n                <ng-include ng-if="state.data.leftMenuTemplateUrl" src="state.data.leftMenuTemplateUrl"></ng-include>\n            </div>\n            <div class="col-75">\n                <ui-view name="contentView"></ui-view>\n            </div>\n        </div>\n\n    </ion-content>\n</ion-view>')}]),angular.module("you-one/index.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("you-one/index.tpl.html",'<!-- note force align-title center otherwise not working on android -->\n<ion-nav-bar class="tq-main-nav-bar"\n             align-title="center"\n             delegate-handle="main"\n        >\n    <ion-nav-back-button class="button-icon ion-chevron-left" ng-click="appGoBack()" ng-show="shouldShowBack"><span class="hide-phone"> Back </span>\n        <span><!--This is just dummy to stop ionic adding it\'s default behavior-->  </span>\n    </ion-nav-back-button>\n</ion-nav-bar>\n\n\n<!-- inject ion-view content -->\n<ion-nav-view class="main-container">\n</ion-nav-view>')}]),angular.module("you-one/popup/about/about.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("you-one/popup/about/about.tpl.html",'<!-- dynamic custom area -->\n<ng-include src="customContentTpl"></ng-include>\n<!-- controls -->\n<div class="turn-off-message-control">\n    <ion-checkbox ng-model="about.turnOffMessage">Please turn off this message</ion-checkbox>\n</div>')}]),angular.module("you-one/terms/terms.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("you-one/terms/terms.tpl.html",'<ul class="error-container" ng-if="errorsList && errorsList.length">\n    <li ng-repeat="error in errorsList">{{error}}</li>\n</ul>\n<ul class="values-container">\n    <li>\n        <ion-checkbox ng-model="confirmed.age"\n                      name="age"\n                      class="value-item multiselect">\n            <div class="value-label">{{::"LEGAL_AGE_CONFIRMATION" | translate}}</div>\n        </ion-checkbox>\n    </li>\n\n    <li class="item value-item item-checkbox" ng-click="confirmed.terms = !confirmed.terms">\n        <div  class="checkbox checkbox-input-hidden disable-pointer-events checkbox-circle">\n            <input type="checkbox"\n                   ng-model="confirmed.terms" ng-click="$event.stopPropagation()"/>\n            <i class="checkbox-icon"></i>\n        </div>\n        <div class="value-label">\n            I have read and accepted\n            <span ng-if="!termsLink">My Travel Space Terms of Use</span>\n            <a ng-if="termsLink" target="_blank"  ng-click="$event.stopPropagation()"\n               ng-href="{{::termsLink}}">My Travel Space Terms of Use</a>\n        </div>\n    </li>\n\n\n    <li class="item value-item item-checkbox" ng-click="confirmed.policy = !confirmed.policy">\n        <div  class="checkbox checkbox-input-hidden disable-pointer-events checkbox-circle">\n            <input type="checkbox"\n                   ng-model="confirmed.policy" ng-click="$event.stopPropagation()"/>\n            <i class="checkbox-icon"></i>\n        </div>\n        <div class="value-label">\n            I have read and accepted\n            <span ng-if="!privacyPolicyLink">My Travel Space Privacy Policy</span>\n            <a ng-if="privacyPolicyLink" target="_blank"  ng-click="$event.stopPropagation()"\n               ng-href="{{::privacyPolicyLink}}">My Travel Space Privacy Policy</a>\n        </div>\n    </li>\n\n</ul>')}])}),define("templatesCommon",["angular"],function(angular){angular.module("templates-common",[])}),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(window,angular,undefined){function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function merge(dst){return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)})}),dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function objectKeys(object){if(Object.keys)return Object.keys(object);var result=[];return angular.forEach(object,function(val,key){result.push(key)}),result}function indexOf(array,value){if(Array.prototype.indexOf)return array.indexOf(value,Number(arguments[2])||0);var len=array.length>>>0,from=Number(arguments[2])||0;for(from=0>from?Math.ceil(from):Math.floor(from),0>from&&(from+=len);len>from;from++)if(from in array&&array[from]===value)return from;return-1}function inheritParams(currentParams,newParams,$current,$to){var parentParams,parents=ancestors($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i].params&&(parentParams=objectKeys(parents[i].params),parentParams.length))for(var j in parentParams)indexOf(inheritList,parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=currentParams[parentParams[j]]);return extend({},inherited,newParams)}function equalForKeys(a,b,keys){if(!keys){keys=[];for(var n in a)keys.push(n)}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return!1}return!0}function filterByKeys(keys,values){var filtered={};return forEach(keys,function(name){filtered[name]=values[name]}),filtered}function omit(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var key in obj)-1==indexOf(keys,key)&&(copy[key]=obj[key]);return copy}function filter(collection,callback){var array=isArray(collection),result=array?[]:{};return forEach(collection,function(val,i){callback(val,i)&&(result[array?result.length:i]=val)}),result}function map(collection,callback){var result=isArray(collection)?[]:{};return forEach(collection,function(val,i){result[i]=callback(val,i)}),result}function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){function visit(value,key){if(visited[key]!==VISIT_DONE){if(cycle.push(key),visited[key]===VISIT_IN_PROGRESS)throw cycle.splice(0,indexOf(cycle,key)),new Error("Cyclic dependency: "+cycle.join(" -> "));if(visited[key]=VISIT_IN_PROGRESS,isString(value))plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES);else{var params=$injector.annotate(value);forEach(params,function(param){param!==key&&invocables.hasOwnProperty(param)&&visit(invocables[param],param)}),plan.push(key,value,params)}cycle.pop(),visited[key]=VISIT_DONE}}function isResolve(value){return isObject(value)&&value.then&&value.$$promises}if(!isObject(invocables))throw new Error("'invocables' must be an object");var invocableKeys=objectKeys(invocables||{}),plan=[],cycle=[],visited={};return forEach(invocables,visit),invocables=cycle=visited=null,function(locals,parent,self){function done(){--wait||(merged||merge(values,parent.$$values),result.$$values=values,result.$$promises=result.$$promises||!0,delete result.$$inheritedValues,resolution.resolve(values))}function fail(reason){result.$$failure=reason,resolution.reject(reason)}function invoke(key,invocable,params){function onfailure(reason){invocation.reject(reason),fail(reason)}function proceed(){if(!isDefined(result.$$failure))try{invocation.resolve($injector.invoke(invocable,self,values)),invocation.promise.then(function(result){values[key]=result,done()},onfailure)}catch(e){onfailure(e)}}var invocation=$q.defer(),waitParams=0;forEach(params,function(dep){promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)&&(waitParams++,promises[dep].then(function(result){values[dep]=result,--waitParams||proceed()},onfailure))}),waitParams||proceed(),promises[key]=invocation.promise}if(isResolve(locals)&&self===undefined&&(self=parent,parent=locals,locals=null),locals){if(!isObject(locals))throw new Error("'locals' must be an object")}else locals=NO_LOCALS;if(parent){if(!isResolve(parent))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else parent=NO_PARENT;var resolution=$q.defer(),result=resolution.promise,promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=!1;if(isDefined(parent.$$failure))return fail(parent.$$failure),result;parent.$$inheritedValues&&merge(values,omit(parent.$$inheritedValues,invocableKeys)),extend(promises,parent.$$promises),parent.$$values?(merged=merge(values,omit(parent.$$values,invocableKeys)),result.$$inheritedValues=omit(parent.$$values,invocableKeys),done()):(parent.$$inheritedValues&&(result.$$inheritedValues=omit(parent.$$inheritedValues,invocableKeys)),parent.then(done,fail));for(var i=0,ii=plan.length;ii>i;i+=3)locals.hasOwnProperty(plan[i])?done():invoke(plan[i],plan[i+1],plan[i+2]);return result}},this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}function $TemplateFactory($http,$templateCache,$injector){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null},this.fromString=function(template,params){return isFunction(template)?template(params):template},this.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:$http.get(url,{cache:$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data})},this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}function UrlMatcher(pattern,config,parentMatcher){function addParameter(id,type,config,location){if(paramNames.push(id),parentParams[id])return parentParams[id];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(params[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");return params[id]=new $$UMFP.Param(id,type,config,location),params[id]}function quoteRegExp(string,pattern,squash){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!pattern)return result;switch(squash){case!1:surroundPattern=["(",")"];break;case!0:surroundPattern=["?(",")?"];break;default:surroundPattern=["("+squash+"|",")?"]}return result+surroundPattern[0]+pattern+surroundPattern[1]}function matchDetails(m,isSearch){var id,regexp,segment,type,cfg;return id=m[2]||m[3],cfg=config.params[id],segment=pattern.substring(last,m.index),regexp=isSearch?m[4]:m[4]||("*"==m[1]?".*":null),type=$$UMFP.type(regexp||"string")||inherit($$UMFP.type("string"),{pattern:new RegExp(regexp)}),{id:id,regexp:regexp,segment:segment,type:type,cfg:cfg}}config=extend({params:{}},isObject(config)?config:{});var m,placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,compiled="^",last=0,segments=this.segments=[],parentParams=parentMatcher?parentMatcher.params:{},params=this.params=parentMatcher?parentMatcher.params.$$new():new $$UMFP.ParamSet,paramNames=[];this.source=pattern;for(var p,param,segment;(m=placeholder.exec(pattern))&&(p=matchDetails(m,!1),!(p.segment.indexOf("?")>=0));)param=addParameter(p.id,p.type,p.cfg,"path"),compiled+=quoteRegExp(p.segment,param.type.pattern.source,param.squash),segments.push(p.segment),last=placeholder.lastIndex;segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);if(segment=segment.substring(0,i),this.sourcePath=pattern.substring(0,last+i),search.length>0)for(last=0;m=searchPlaceholder.exec(search);)p=matchDetails(m,!0),param=addParameter(p.id,p.type,p.cfg,"search"),last=placeholder.lastIndex}else this.sourcePath=pattern,this.sourceSearch="";compiled+=quoteRegExp(segment)+(config.strict===!1?"/?":"")+"$",segments.push(segment),this.regexp=new RegExp(compiled,config.caseInsensitive?"i":undefined),this.prefix=segments[0],this.$$paramNames=paramNames}function Type(config){extend(this,config)}function $UrlMatcherFactory(){function valToString(val){return null!=val?val.toString().replace(/\//g,"%2F"):val}function valFromString(val){return null!=val?val.toString().replace(/%2F/g,"/"):val}function regexpMatches(val){return this.pattern.test(val)}function getDefaultConfig(){return{strict:isStrictMode,caseInsensitive:isCaseInsensitive}}function isInjectable(value){return isFunction(value)||isArray(value)&&isFunction(value[value.length-1])}function flushTypeQueue(){for(;typeQueue.length;){var type=typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");angular.extend($types[type.name],injector.invoke(type.def))}}function ParamSet(params){extend(this,params||{})}$$UMFP=this;var injector,isCaseInsensitive=!1,isStrictMode=!0,defaultSquashPolicy=!1,$types={},enqueue=!0,typeQueue=[],defaultTypes={string:{encode:valToString,decode:valFromString,is:regexpMatches,pattern:/[^\/]*/},int:{encode:valToString,decode:function(val){return parseInt(val,10)},is:function(val){return isDefined(val)&&this.decode(val.toString())===val},pattern:/\d+/},bool:{encode:function(val){return val?1:0},decode:function(val){return 0!==parseInt(val,10)},is:function(val){return val===!0||val===!1},pattern:/0|1/},date:{encode:function(val){return this.is(val)?[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-"):undefined},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):undefined},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:angular.toJson,decode:angular.fromJson,is:angular.isObject,equals:angular.equals,pattern:/[^\/]*/},any:{encode:angular.identity,decode:angular.identity,is:angular.identity,equals:angular.equals,pattern:/.*/}};$UrlMatcherFactory.$$getDefaultValue=function(config){if(!isInjectable(config.value))return config.value;if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.value)},this.caseInsensitive=function(value){return isDefined(value)&&(isCaseInsensitive=value),isCaseInsensitive},this.strictMode=function(value){return isDefined(value)&&(isStrictMode=value),isStrictMode},this.defaultSquashPolicy=function(value){if(!isDefined(value))return defaultSquashPolicy;if(value!==!0&&value!==!1&&!isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");
return defaultSquashPolicy=value,value},this.compile=function(pattern,config){return new UrlMatcher(pattern,extend(getDefaultConfig(),config))},this.isMatcher=function(o){if(!isObject(o))return!1;var result=!0;return forEach(UrlMatcher.prototype,function(val,name){isFunction(val)&&(result=result&&isDefined(o[name])&&isFunction(o[name]))}),result},this.type=function(name,definition,definitionFn){if(!isDefined(definition))return $types[name];if($types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return $types[name]=new Type(extend({name:name},definition)),definitionFn&&(typeQueue.push({name:name,def:definitionFn}),enqueue||flushTypeQueue()),this},forEach(defaultTypes,function(type,name){$types[name]=new Type(extend({name:name},type))}),$types=inherit($types,{}),this.$get=["$injector",function($injector){return injector=$injector,enqueue=!1,flushTypeQueue(),forEach(defaultTypes,function(type,name){$types[name]||($types[name]=new Type(type))}),this}],this.Param=function(id,type,config,location){function unwrapShorthand(config){var keys=isObject(config)?objectKeys(config):[],isShorthand=-1===indexOf(keys,"value")&&-1===indexOf(keys,"type")&&-1===indexOf(keys,"squash")&&-1===indexOf(keys,"array");return isShorthand&&(config={value:config}),config.$$fn=isInjectable(config.value)?config.value:function(){return config.value},config}function getType(config,urlType,location){if(config.type&&urlType)throw new Error("Param '"+id+"' has two type configurations.");return urlType?urlType:config.type?config.type instanceof Type?config.type:new Type(config.type):"config"===location?$types.any:$types.string}function getArrayMode(){var arrayDefaults={array:"search"===location?"auto":!1},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{};return extend(arrayDefaults,arrayParamNomenclature,config).array}function getSquashPolicy(config,isOptional){var squash=config.squash;if(!isOptional||squash===!1)return!1;if(!isDefined(squash)||null==squash)return defaultSquashPolicy;if(squash===!0||isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}function getReplace(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?undefined:""},{from:null,to:isOptional||arrayMode?undefined:""}];return replace=isArray(config.replace)?config.replace:[],isString(squash)&&replace.push({from:squash,to:undefined}),configuredKeys=map(replace,function(item){return item.from}),filter(defaultPolicy,function(item){return-1===indexOf(configuredKeys,item.from)}).concat(replace)}function $$getDefaultValue(){if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.$$fn)}function $value(value){function hasReplaceVal(val){return function(obj){return obj.from===val}}function $replace(value){var replacement=map(filter(self.replace,hasReplaceVal(value)),function(obj){return obj.to});return replacement.length?replacement[0]:value}return value=$replace(value),isDefined(value)?self.type.decode(value):$$getDefaultValue()}function toString(){return"{Param:"+id+" "+type+" squash: '"+squash+"' optional: "+isOptional+"}"}var self=this;config=unwrapShorthand(config),type=getType(config,type,location);var arrayMode=getArrayMode();type=arrayMode?type.$asArray(arrayMode,"search"===location):type,"string"!==type.name||arrayMode||"path"!==location||config.value!==undefined||(config.value="");var isOptional=config.value!==undefined,squash=getSquashPolicy(config,isOptional),replace=getReplace(config,arrayMode,isOptional,squash);extend(this,{id:id,type:type,location:location,array:arrayMode,squash:squash,replace:replace,isOptional:isOptional,value:$value,dynamic:undefined,config:config,toString:toString})},ParamSet.prototype={$$new:function(){return inherit(this,extend(new ParamSet,{$$parent:this}))},$$keys:function(){for(var keys=[],chain=[],parent=this,ignore=objectKeys(ParamSet.prototype);parent;)chain.push(parent),parent=parent.$$parent;return chain.reverse(),forEach(chain,function(paramset){forEach(objectKeys(paramset),function(key){-1===indexOf(keys,key)&&-1===indexOf(ignore,key)&&keys.push(key)})}),keys},$$values:function(paramValues){var values={},self=this;return forEach(self.$$keys(),function(key){values[key]=self[key].value(paramValues&&paramValues[key])}),values},$$equals:function(paramValues1,paramValues2){var equal=!0,self=this;return forEach(self.$$keys(),function(key){var left=paramValues1&&paramValues1[key],right=paramValues2&&paramValues2[key];self[key].type.equals(left,right)||(equal=!1)}),equal},$$validates:function(paramValues){var isOptional,val,param,result=!0,self=this;return forEach(this.$$keys(),function(key){param=self[key],val=paramValues[key],isOptional=!val&&param.isOptional,result=result&&(isOptional||!!param.type.is(val))}),result},$$parent:undefined},this.ParamSet=ParamSet}function $UrlRouterProvider($locationProvider,$urlMatcherFactory){function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return null!=prefix?prefix[1].replace(/\\(.)/g,"$1"):""}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]})}function handleIfMatch($injector,handler,match){if(!match)return!1;var result=$injector.invoke(handler,handler,{$match:match});return isDefined(result)?result:!0}function $get($location,$rootScope,$injector,$browser){function appendBasePath(url,isHtml5,absolute){return"/"===baseHref?url:isHtml5?baseHref.slice(0,-1)+url:absolute?baseHref.slice(1)+url:url}function update(evt){function check(rule){var handled=rule($injector,$location);return handled?(isString(handled)&&$location.replace().url(handled),!0):!1}if(!evt||!evt.defaultPrevented){var ignoreUpdate=lastPushedUrl&&$location.url()===lastPushedUrl;if(lastPushedUrl=undefined,ignoreUpdate)return!0;var i,n=rules.length;for(i=0;n>i;i++)if(check(rules[i]))return;otherwise&&check(otherwise)}}function listen(){return listener=listener||$rootScope.$on("$locationChangeSuccess",update)}var lastPushedUrl,baseHref=$browser.baseHref(),location=$location.url();return interceptDeferred||listen(),{sync:function(){update()},listen:function(){return listen()},update:function(read){return read?void(location=$location.url()):void($location.url()!==location&&($location.url(location),$location.replace()))},push:function(urlMatcher,params,options){$location.url(urlMatcher.format(params||{})),lastPushedUrl=options&&options.$$avoidResync?$location.url():undefined,options&&options.replace&&$location.replace()},href:function(urlMatcher,params,options){if(!urlMatcher.validates(params))return null;var isHtml5=$locationProvider.html5Mode();angular.isObject(isHtml5)&&(isHtml5=isHtml5.enabled);var url=urlMatcher.format(params);if(options=options||{},isHtml5||null===url||(url="#"+$locationProvider.hashPrefix()+url),url=appendBasePath(url,isHtml5,options.absolute),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",port=$location.port();return port=80===port||443===port?"":":"+port,[$location.protocol(),"://",$location.host(),port,slash,url].join("")}}}var listener,rules=[],otherwise=null,interceptDeferred=!1;this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");return rules.push(rule),this},this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");return otherwise=rule,this},this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)&&(what=$urlMatcherFactory.compile(what)),!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){return handlerIsString&&(redirect=$urlMatcherFactory.compile(handler),handler=["$match",function($match){return redirect.format($match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))},{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");return handlerIsString&&(redirect=handler,handler=["$match",function($match){return interpolate(redirect,$match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))},{prefix:regExpPrefix(what)})}},check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check)if(check[n])return this.rule(strategies[n](what,handler));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(defer){defer===undefined&&(defer=!0),interceptDeferred=defer},this.$get=$get,$get.$inject=["$location","$rootScope","$injector","$browser"]}function $StateProvider($urlRouterProvider,$urlMatcherFactory){function isRelative(stateName){return 0===stateName.indexOf(".")||0===stateName.indexOf("^")}function findState(stateOrName,base){if(!stateOrName)return undefined;var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name,path=isRelative(name);if(path){if(!base)throw new Error("No reference point given for path '"+name+"'");base=findState(base);for(var rel=name.split("."),i=0,pathLength=rel.length,current=base;pathLength>i;i++)if(""!==rel[i]||0!==i){if("^"!==rel[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent}else current=base;rel=rel.slice(i).join("."),name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];return!state||!isStr&&(isStr||state!==stateOrName&&state.self!==stateOrName)?undefined:state}function queueState(parentName,state){queue[parentName]||(queue[parentName]=[]),queue[parentName].push(state)}function flushQueuedChildren(parentName){for(var queued=queue[parentName]||[];queued.length;)registerState(queued.shift())}function registerState(state){state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}});var name=state.name;if(!isString(name)||name.indexOf("@")>=0)throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"'' is already defined");var parentName=-1!==name.indexOf(".")?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:isObject(state.parent)&&isString(state.parent.name)?state.parent.name:"";if(parentName&&!states[parentName])return queueState(parentName,state.self);for(var key in stateBuilder)isFunction(stateBuilder[key])&&(state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]));return states[name]=state,!state[abstractKey]&&state.url&&$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){$state.$current.navigable==state&&equalForKeys($match,$stateParams)||$state.transitionTo(state,$match,{inherit:!0,location:!1})}]),flushQueuedChildren(name),state}function isGlob(text){return text.indexOf("*")>-1}function doesStateMatchGlob(glob){var globSegments=glob.split("."),segments=$state.$current.name.split(".");if("**"===globSegments[0]&&(segments=segments.slice(indexOf(segments,globSegments[1])),segments.unshift("**")),"**"===globSegments[globSegments.length-1]&&(segments.splice(indexOf(segments,globSegments[globSegments.length-2])+1,Number.MAX_VALUE),segments.push("**")),globSegments.length!=segments.length)return!1;for(var i=0,l=globSegments.length;l>i;i++)"*"===globSegments[i]&&(segments[i]="*");return segments.join("")===globSegments.join("")}function decorator(name,func){return isString(name)&&!isDefined(func)?stateBuilder[name]:isFunction(func)&&isString(name)?(stateBuilder[name]&&!stateBuilder.$delegates[name]&&(stateBuilder.$delegates[name]=stateBuilder[name]),stateBuilder[name]=func,this):this}function state(name,definition){return isObject(name)?definition=name:definition.name=name,registerState(definition),this}function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$urlRouter,$location,$urlMatcherFactory){function handleRedirect(redirect,state,params,options){var evt=$rootScope.$broadcast("$stateNotFound",redirect,state,params);if(evt.defaultPrevented)return $urlRouter.update(),TransitionAborted;if(!evt.retry)return null;if(options.$retry)return $urlRouter.update(),TransitionFailed;var retryTransition=$state.transition=$q.when(evt.retry);return retryTransition.then(function(){return retryTransition!==$state.transition?TransitionSuperseded:(redirect.options.$retry=!0,$state.transitionTo(redirect.to,redirect.toParams,redirect.options))},function(){return TransitionAborted}),$urlRouter.update(),retryTransition}function resolveState(state,params,paramsAreFiltered,inherited,dst,options){var $stateParams=paramsAreFiltered?params:filterByKeys(state.params.$$keys(),params),locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals})];return inherited&&promises.push(inherited),forEach(state.views,function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:locals,params:$stateParams,notify:options.notify})||""}],promises.push($resolve.resolve(injectables,locals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,locals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else result.$$controller=view.controller;result.$$state=state,result.$$controllerAs=view.controllerAs,dst[name]=result}))}),$q.all(promises).then(function(values){return dst})}var TransitionSuperseded=$q.reject(new Error("transition superseded")),TransitionPrevented=$q.reject(new Error("transition prevented")),TransitionAborted=$q.reject(new Error("transition aborted")),TransitionFailed=$q.reject(new Error("transition failed"));return root.locals={resolve:null,globals:{$stateParams:{}}},$state={params:{},current:root.self,$current:root,transition:null},$state.reload=function(){return $state.transitionTo($state.current,$stateParams,{reload:!0,inherit:!1,notify:!0})},$state.go=function(to,params,options){return $state.transitionTo(to,params,extend({inherit:!0,relative:$state.$current},options))},$state.transitionTo=function(to,toParams,options){toParams=toParams||{},options=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},options||{});var evt,from=$state.$current,fromParams=$state.params,fromPath=from.path,toState=findState(to,options.relative);if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options},redirectResult=handleRedirect(redirect,from.self,fromParams,options);if(redirectResult)return redirectResult;if(to=redirect.to,toParams=redirect.toParams,options=redirect.options,toState=findState(to,options.relative),!isDefined(toState)){if(!options.relative)throw new Error("No such state '"+to+"'");throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'")}}if(toState[abstractKey])throw new Error("Cannot transition to abstract state '"+to+"'");if(options.inherit&&(toParams=inheritParams($stateParams,toParams||{},$state.$current,toState)),!toState.params.$$validates(toParams))return TransitionFailed;toParams=toState.params.$$values(toParams),to=toState;var toPath=to.path,keep=0,state=toPath[keep],locals=root.locals,toLocals=[];if(!options.reload)for(;state&&state===fromPath[keep]&&state.ownParams.$$equals(toParams,fromParams);)locals=toLocals[keep]=state.locals,keep++,state=toPath[keep];if(shouldTriggerReload(to,from,locals,options))return to.self.reloadOnSearch!==!1&&$urlRouter.update(),$state.transition=null,$q.when($state.current);if(toParams=filterByKeys(to.params.$$keys(),toParams||{}),options.notify&&$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams).defaultPrevented)return $urlRouter.update(),TransitionPrevented;for(var resolved=$q.when(locals),l=keep;l<toPath.length;l++,state=toPath[l])locals=toLocals[l]=inherit(locals),resolved=resolveState(state,toParams,state===to,resolved,locals,options);var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition)return TransitionSuperseded;for(l=fromPath.length-1;l>=keep;l--)exiting=fromPath[l],exiting.self.onExit&&$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals),exiting.locals=null;for(l=keep;l<toPath.length;l++)entering=toPath[l],entering.locals=toLocals[l],entering.self.onEnter&&$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);return $state.transition!==transition?TransitionSuperseded:($state.$current=to,$state.current=to.self,$state.params=toParams,copy($state.params,$stateParams),$state.transition=null,options.location&&to.navigable&&$urlRouter.push(to.navigable.url,to.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===options.location}),options.notify&&$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams),$urlRouter.update(!0),$state.current)},function(error){return $state.transition!==transition?TransitionSuperseded:($state.transition=null,evt=$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error),evt.defaultPrevented||$urlRouter.update(),$q.reject(error))});return transition},$state.is=function(stateOrName,params,options){options=extend({relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);return isDefined(state)?$state.$current!==state?!1:params?equalForKeys(state.params.$$values(params),$stateParams):!0:undefined},$state.includes=function(stateOrName,params,options){if(options=extend({relative:$state.$current},options||{}),isString(stateOrName)&&isGlob(stateOrName)){if(!doesStateMatchGlob(stateOrName))return!1;stateOrName=$state.$current.name}var state=findState(stateOrName,options.relative);return isDefined(state)?isDefined($state.$current.includes[state.name])?params?equalForKeys(state.params.$$values(params),$stateParams,objectKeys(params)):!0:!1:undefined},$state.href=function(stateOrName,params,options){options=extend({lossy:!0,inherit:!0,absolute:!1,relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);if(!isDefined(state))return null;options.inherit&&(params=inheritParams($stateParams,params||{},$state.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&nav.url!==undefined&&null!==nav.url?$urlRouter.href(nav.url,filterByKeys(state.params.$$keys(),params||{}),{absolute:options.absolute}):null},$state.get=function(stateOrName,context){if(0===arguments.length)return map(objectKeys(states),function(name){return states[name].self});var state=findState(stateOrName,context||$state.$current);return state&&state.self?state.self:null},$state}function shouldTriggerReload(to,from,locals,options){return to!==from||(locals!==from.locals||options.reload)&&to.self.reloadOnSearch!==!1?void 0:!0}var root,$state,states={},queue={},abstractKey="abstract",stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){return state.parent&&state.parent.data&&(state.data=state.self.data=extend({},state.parent.data,state.data)),state.data},url:function(state){var url=state.url,config={params:state.params||{}};if(isString(url))return"^"==url.charAt(0)?$urlMatcherFactory.compile(url.substring(1),config):(state.parent.navigable||root).url.concat(url,config);if(!url||$urlMatcherFactory.isMatcher(url))return url;throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},ownParams:function(state){var params=state.url&&state.url.params||new $$UMFP.ParamSet;return forEach(state.params||{},function(config,id){params[id]||(params[id]=new $$UMFP.Param(id,null,config,"config"))}),params},params:function(state){return state.parent&&state.parent.params?extend(state.parent.params.$$new(),state.ownParams):new $$UMFP.ParamSet},views:function(state){var views={};return forEach(isDefined(state.views)?state.views:{"":state},function(view,name){name.indexOf("@")<0&&(name+="@"+state.parent.name),views[name]=view}),views},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes},$delegates:{}};root=registerState({name:"",url:"^",views:null,abstract:!0}),root.navigable=null,this.decorator=decorator,this.state=state,this.$get=$get,$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function $ViewProvider(){function $get($rootScope,$templateFactory){return{load:function(name,options){var result,defaults={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return options=extend(defaults,options),options.view&&(result=$templateFactory.fromConfig(options.view,options.params,options.locals)),result&&options.notify&&$rootScope.$broadcast("$viewContentLoading",options),result}}}this.$get=$get,$get.$inject=["$rootScope","$templateFactory"]}function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){$timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}function $ViewDirective($state,$injector,$uiViewScroll,$interpolate){function getService(){return $injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}}}function getRenderer(attrs,scope){var statics=function(){return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}};if($animate)return{enter:function(element,target,cb){var promise=$animate.enter(element,null,target,cb);promise&&promise.then&&promise.then(cb)},leave:function(element,cb){var promise=$animate.leave(element,cb);promise&&promise.then&&promise.then(cb)}};if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target),cb()},leave:function(element,cb){animate.leave(element),cb()}}}return statics()}var service=getService(),$animator=service("$animator"),$animate=service("$animate"),directive={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){function cleanupLastView(){previousEl&&(previousEl.remove(),previousEl=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentEl&&(renderer.leave(currentEl,function(){previousEl=null}),previousEl=currentEl,currentEl=null)}function updateView(firstTime){var newScope,name=getUiViewName(scope,attrs,$element,$interpolate),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(firstTime||previousLocals!==latestLocals){newScope=scope.$new(),latestLocals=$state.$current.locals[name];var clone=$transclude(newScope,function(clone){renderer.enter(clone,$element,function(){currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),cleanupLastView()});currentEl=clone,currentScope=newScope,currentScope.$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}}var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope);scope.$on("$stateChangeSuccess",function(){updateView(!1)}),scope.$on("$viewContentLoading",function(){updateView(!1)}),updateView(!0)}}};return directive}function $ViewDirectiveFill($compile,$controller,$state,$interpolate){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element,attrs){var current=$state.$current,name=getUiViewName(scope,attrs,$element,$interpolate),locals=current&&current.locals[name];if(locals){$element.data("$uiView",{name:name,state:locals.$$state}),$element.html(locals.$template?locals.$template:initial);var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope;var controller=$controller(locals.$$controller,locals);locals.$$controllerAs&&(scope[locals.$$controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}}}function getUiViewName(scope,attrs,element,$interpolate){var name=$interpolate(attrs.uiView||attrs.name||"")(scope),inherited=element.inheritedData("$uiView");return name.indexOf("@")>=0?name:name+"@"+(inherited?inherited.state.name:"")}function parseStateRef(ref,current){var parsed,preparsed=ref.match(/^\s*({[^}]*})\s*$/);if(preparsed&&(ref=current+"("+preparsed[1]+")"),parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!parsed||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");return stateData&&stateData.state&&stateData.state.name?stateData.state:void 0}function $StateRefDirective($state,$timeout){var allowedOptions=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var ref=parseStateRef(attrs.uiSref,$state.current.name),params=null,base=stateContext(element)||$state.$current,newHref=null,isAnchor="A"===element.prop("tagName"),isForm="FORM"===element[0].nodeName,attr=isForm?"action":"href",nav=!0,options={relative:base,inherit:!0},optionsOverride=scope.$eval(attrs.uiSrefOpts)||{};angular.forEach(allowedOptions,function(option){option in optionsOverride&&(options[option]=optionsOverride[option])});var update=function(newVal){if(newVal&&(params=angular.copy(newVal)),nav){newHref=$state.href(ref.state,params,options);var activeDirective=uiSrefActive[1]||uiSrefActive[0];return activeDirective&&activeDirective.$$setStateInfo(ref.state,params),null===newHref?(nav=!1,!1):void attrs.$set(attr,newHref)}};ref.paramExpr&&(scope.$watch(ref.paramExpr,function(newVal,oldVal){newVal!==params&&update(newVal)},!0),params=angular.copy(scope.$eval(ref.paramExpr))),update(),isForm||element.bind("click",function(e){var button=e.which||e.button;if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||element.attr("target"))){var transition=$timeout(function(){$state.go(ref.state,params,options)});e.preventDefault();var ignorePreventDefaultCount=isAnchor&&!newHref?1:0;e.preventDefault=function(){ignorePreventDefaultCount--<=0&&$timeout.cancel(transition)}}})}}}function $StateRefActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function update(){isMatch()?$element.addClass(activeClass):$element.removeClass(activeClass)}function isMatch(){return"undefined"!=typeof $attrs.uiSrefActiveEq?state&&$state.is(state.name,params):state&&$state.includes(state.name,params)}var state,params,activeClass;activeClass=$interpolate($attrs.uiSrefActiveEq||$attrs.uiSrefActive||"",!1)($scope),this.$$setStateInfo=function(newState,newParams){state=$state.get(newState,stateContext($element)),params=newParams,update()},$scope.$on("$stateChangeSuccess",update)}]}}function $IsStateFilter($state){var isFilter=function(state){return $state.is(state)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state){return $state.includes(state)};return includesFilter.$stateful=!0,includesFilter}var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy;angular.module("ui.router.util",["ng"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util"]),angular.module("ui.router",["ui.router.state"]),angular.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],angular.module("ui.router.util").service("$resolve",$Resolve),$TemplateFactory.$inject=["$http","$templateCache","$injector"],angular.module("ui.router.util").service("$templateFactory",$TemplateFactory);var $$UMFP;UrlMatcher.prototype.concat=function(pattern,config){var defaultConfig={caseInsensitive:$$UMFP.caseInsensitive(),strict:$$UMFP.strictMode(),squash:$$UMFP.defaultSquashPolicy()};return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch,extend(defaultConfig,config),this)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(path,searchParams){function decodePathArray(string){function reverseString(str){return str.split("").reverse().join("")}function unquoteDashes(str){return str.replace(/\\-/,"-")}var split=reverseString(string).split(/-(?!\\)/),allReversed=map(split,reverseString);return map(allReversed,unquoteDashes).reverse()}var m=this.regexp.exec(path);if(!m)return null;searchParams=searchParams||{};var i,j,paramName,paramNames=this.parameters(),nTotal=paramNames.length,nPath=this.segments.length-1,values={};if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;nPath>i;i++){paramName=paramNames[i];var param=this.params[paramName],paramVal=m[i+1];for(j=0;j<param.replace;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);paramVal&&param.array===!0&&(paramVal=decodePathArray(paramVal)),values[paramName]=param.value(paramVal)}for(;nTotal>i;i++)paramName=paramNames[i],values[paramName]=this.params[paramName].value(searchParams[paramName]);return values},UrlMatcher.prototype.parameters=function(param){return isDefined(param)?this.params[param]||null:this.$$paramNames},UrlMatcher.prototype.validates=function(params){return this.params.$$validates(params)},UrlMatcher.prototype.format=function(values){function encodeDashes(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})}values=values||{};var segments=this.segments,params=this.parameters(),paramset=this.params;if(!this.validates(values))return null;var i,search=!1,nPath=segments.length-1,nTotal=params.length,result=segments[0];for(i=0;nTotal>i;i++){var isPathParam=nPath>i,name=params[i],param=paramset[name],value=param.value(values[name]),isDefaultValue=param.isOptional&&param.type.equals(param.value(),value),squash=isDefaultValue?param.squash:!1,encoded=param.type.encode(value);if(isPathParam){var nextSegment=segments[i+1];if(squash===!1)null!=encoded&&(result+=isArray(encoded)?map(encoded,encodeDashes).join("-"):encodeURIComponent(encoded)),result+=nextSegment;else if(squash===!0){var capture=result.match(/\/$/)?/\/?(.*)/:/(.*)/;result+=nextSegment.match(capture)[1]}else isString(squash)&&(result+=squash+nextSegment)}else{if(null==encoded||isDefaultValue&&squash!==!1)continue;isArray(encoded)||(encoded=[encoded]),encoded=map(encoded,encodeURIComponent).join("&"+name+"="),result+=(search?"&":"?")+(name+"="+encoded),search=!0}}return result},Type.prototype.is=function(val,key){return!0},Type.prototype.encode=function(val,key){return val},Type.prototype.decode=function(val,key){return val},Type.prototype.equals=function(a,b){return a==b},Type.prototype.$subPattern=function(){var sub=this.pattern.toString();
return sub.substr(1,sub.length-2)},Type.prototype.pattern=/.*/,Type.prototype.toString=function(){return"{Type:"+this.name+"}"},Type.prototype.$asArray=function(mode,isSearch){function ArrayType(type,mode){function bindTo(type,callbackName){return function(){return type[callbackName].apply(type,arguments)}}function arrayWrap(val){return isArray(val)?val:isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return undefined;case 1:return"auto"===mode?val[0]:val;default:return val}}function falsey(val){return!val}function arrayHandler(callback,allTruthyMode){return function(val){val=arrayWrap(val);var result=map(val,callback);return allTruthyMode===!0?0===filter(result,falsey).length:arrayUnwrap(result)}}function arrayEqualsHandler(callback){return function(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}}this.encode=arrayHandler(bindTo(type,"encode")),this.decode=arrayHandler(bindTo(type,"decode")),this.is=arrayHandler(bindTo(type,"is"),!0),this.equals=arrayEqualsHandler(bindTo(type,"equals")),this.pattern=type.pattern,this.$arrayMode=mode}if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)},angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory),angular.module("ui.router.util").run(["$urlMatcherFactory",function($urlMatcherFactory){}]),$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.state").value("$stateParams",{}).provider("$state",$StateProvider),$ViewProvider.$inject=[],angular.module("ui.router.state").provider("$view",$ViewProvider),angular.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider),$ViewDirective.$inject=["$state","$injector","$uiViewScroll","$interpolate"],$ViewDirectiveFill.$inject=["$compile","$controller","$state","$interpolate"],angular.module("ui.router.state").directive("uiView",$ViewDirective),angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateRefActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateRefActiveDirective).directive("uiSrefActiveEq",$StateRefActiveDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)}(window,window.angular),define("uiRouter",["angular"],function(){}),define("components/popup/criticalerror/criticalerror",["angular","coreapi"],function(angular){return angular.module("tq.popup.criticalerror",["ionic","tq.coreapi"]).service("tqPopupCriticalError",function(tqCoreConnector,$ionicPopup){this.show=function(config){return config.title=config.title?config.title:"Critical Error",config.okText=config.okText?config.okText:"Restart",config.restart=angular.isDefined(config.restart)?config.restart:!0,config.customAction=angular.isDefined(config.customAction)?config.customAction:!1,$ionicPopup.alert({title:config.title,subTitle:null,template:config.message,okText:config.okText,okType:"tq-popup-criticalerror-btn"}).then(function(userHasConfirmed){return userHasConfirmed?(config.restart&&tqCoreConnector.device.platform.restart(),config.customAction&&config.customAction(),userHasConfirmed):userHasConfirmed})}})}),define("components/analytics/analytics",["angular"],function(angular){"use strict";return angular.module("tq.analytics",[]).config(function(){}).run(function(){}).provider("tqAnalytics",function(){var provider=this,self=null;this.trackingId="",this.setTrackingId=function(theTrackingId){angular.isString(theTrackingId)?provider.trackingId=theTrackingId:window.console.error("Invalid analytics tracking ID has been provided. Analytics will not work.")},this.$get=function($window,$log){var TqAnalytics=function(){};TqAnalytics._isAnalyticsPluginAvailable=function(){return angular.isObject($window.analytics)},TqAnalytics.prototype._init=function(){TqAnalytics._isAnalyticsPluginAvailable()?($window.analytics.startTrackerWithId(provider.trackingId),$window.analytics.trackEvent("Technical","App-Launch","WebView-Load"),self.initDebugMode()):$log.warn("Tracking will not work because the Cordova analytics plugin is not available. Ignore this if you are not running in a mobile web view.")},TqAnalytics.prototype.initDebugMode=function(){var deploymentEnv;try{deploymentEnv=$window.ENV_VARS.deploymentEnv}catch(error){$log.error("Failed to retrieve the current deployment environment from $window.ENV_VARS.deploymentEnv",error)}"develop"===deploymentEnv&&($log.info("tq.analytcs - Debug mode enabled based on deployment environment:",deploymentEnv),$window.analytics.debugMode())};var pluginAvailable=TqAnalytics._isAnalyticsPluginAvailable();return TqAnalytics.prototype.setUserId=pluginAvailable?$window.analytics.setUserId:angular.noop,TqAnalytics.prototype.trackException=pluginAvailable?$window.analytics.trackException:angular.noop,TqAnalytics.prototype.trackTiming=pluginAvailable?$window.analytics.trackTiming:angular.noop,TqAnalytics.prototype.trackView=pluginAvailable?$window.analytics.trackView:angular.noop,TqAnalytics.prototype.trackEvent=pluginAvailable?$window.analytics.trackEvent:angular.noop,TqAnalytics.prototype.addCustomDimension=pluginAvailable?$window.analytics.addCustomDimension:angular.noop,TqAnalytics.prototype.addTransaction=pluginAvailable?$window.analytics.addTransaction:angular.noop,TqAnalytics.prototype.addTransactionItem=pluginAvailable?$window.analytics.addTransactionItem:angular.noop,null===self&&(self=new TqAnalytics,self._init()),self}})}),define("components/loading/loading",["angular"],function(angular){return angular.module("tq.loading",[]).service("tqLoading",function($ionicLoading){var getSplashScreen=function(){return angular.element("#SPLASHSCREEN")};return{show:function(){var splashscreen=getSplashScreen();splashscreen&&splashscreen.length?splashscreen.show():$ionicLoading.show({template:'<ion-spinner icon="spiral"></ion-spinner>'})},hide:function(){var splashscreen=getSplashScreen();splashscreen&&splashscreen.length?(splashscreen.find(".tq-after-hide").remove(),splashscreen.hide()):$ionicLoading.hide()}}})}),angular.module("pascalprecht.translate",["ng"]).run(["$translate",function($translate){var key=$translate.storageKey(),storage=$translate.storage(),fallbackFromIncorrectStorageValue=function(){var preferred=$translate.preferredLanguage();angular.isString(preferred)?$translate.use(preferred):storage.put(key,$translate.use())};storage?storage.get(key)?$translate.use(storage.get(key))["catch"](fallbackFromIncorrectStorageValue):fallbackFromIncorrectStorageValue():angular.isString($translate.preferredLanguage())&&$translate.use($translate.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY","$windowProvider",function($STORAGE_KEY,$windowProvider){var $preferredLanguage,$languageKeyAliases,$fallbackLanguage,$fallbackWasString,$uses,$nextLang,$storageFactory,$storagePrefix,$missingTranslationHandlerFactory,$interpolationFactory,$loaderFactory,$loaderOptions,$notFoundIndicatorLeft,$notFoundIndicatorRight,loaderCache,$translationTable={},$availableLanguageKeys=[],$storageKey=$STORAGE_KEY,$interpolatorFactories=[],$interpolationSanitizationStrategy=!1,$cloakClassName="translate-cloak",$postCompilingEnabled=!1,NESTED_OBJECT_DELIMITER=".",directivePriority=0,version="2.6.1",getFirstBrowserLanguage=function(){var i,language,nav=$windowProvider.$get().navigator,browserLanguagePropertyKeys=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(nav.languages))for(i=0;i<nav.languages.length;i++)if(language=nav.languages[i],language&&language.length)return language;for(i=0;i<browserLanguagePropertyKeys.length;i++)if(language=nav[browserLanguagePropertyKeys[i]],language&&language.length)return language;return null};getFirstBrowserLanguage.displayName="angular-translate/service: getFirstBrowserLanguage";var getLocale=function(){return(getFirstBrowserLanguage()||"").split("-").join("_")};getLocale.displayName="angular-translate/service: getLocale";var indexOf=function(array,searchElement){for(var i=0,len=array.length;len>i;i++)if(array[i]===searchElement)return i;return-1},trim=function(){return this.replace(/^\s+|\s+$/g,"")},negotiateLocale=function(preferred){for(var avail=[],locale=angular.lowercase(preferred),i=0,n=$availableLanguageKeys.length;n>i;i++)avail.push(angular.lowercase($availableLanguageKeys[i]));if(indexOf(avail,locale)>-1)return preferred;if($languageKeyAliases){var alias;for(var langKeyAlias in $languageKeyAliases){var hasWildcardKey=!1,hasExactKey=Object.prototype.hasOwnProperty.call($languageKeyAliases,langKeyAlias)&&angular.lowercase(langKeyAlias)===angular.lowercase(preferred);if("*"===langKeyAlias.slice(-1)&&(hasWildcardKey=langKeyAlias.slice(0,-1)===preferred.slice(0,langKeyAlias.length-1)),(hasExactKey||hasWildcardKey)&&(alias=$languageKeyAliases[langKeyAlias],indexOf(avail,angular.lowercase(alias))>-1))return alias}}var parts=preferred.split("_");return parts.length>1&&indexOf(avail,angular.lowercase(parts[0]))>-1?parts[0]:preferred},translations=function(langKey,translationTable){if(!langKey&&!translationTable)return $translationTable;if(langKey&&!translationTable){if(angular.isString(langKey))return $translationTable[langKey]}else angular.isObject($translationTable[langKey])||($translationTable[langKey]={}),angular.extend($translationTable[langKey],flatObject(translationTable));return this};this.translations=translations,this.cloakClassName=function(name){return name?($cloakClassName=name,this):$cloakClassName};var flatObject=function(data,path,result,prevKey){var key,keyWithPath,keyWithShortPath,val;path||(path=[]),result||(result={});for(key in data)Object.prototype.hasOwnProperty.call(data,key)&&(val=data[key],angular.isObject(val)?flatObject(val,path.concat(key),result,key):(keyWithPath=path.length?""+path.join(NESTED_OBJECT_DELIMITER)+NESTED_OBJECT_DELIMITER+key:key,path.length&&key===prevKey&&(keyWithShortPath=""+path.join(NESTED_OBJECT_DELIMITER),result[keyWithShortPath]="@:"+keyWithPath),result[keyWithPath]=val));return result};this.addInterpolation=function(factory){return $interpolatorFactories.push(factory),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(factory){return $interpolationFactory=factory,this},this.useSanitizeValueStrategy=function(value){return $interpolationSanitizationStrategy=value,this},this.preferredLanguage=function(langKey){return setupPreferredLanguage(langKey),this};var setupPreferredLanguage=function(langKey){return langKey&&($preferredLanguage=langKey),$preferredLanguage};this.translationNotFoundIndicator=function(indicator){return this.translationNotFoundIndicatorLeft(indicator),this.translationNotFoundIndicatorRight(indicator),this},this.translationNotFoundIndicatorLeft=function(indicator){return indicator?($notFoundIndicatorLeft=indicator,this):$notFoundIndicatorLeft},this.translationNotFoundIndicatorRight=function(indicator){return indicator?($notFoundIndicatorRight=indicator,this):$notFoundIndicatorRight},this.fallbackLanguage=function(langKey){return fallbackStack(langKey),this};var fallbackStack=function(langKey){return langKey?(angular.isString(langKey)?($fallbackWasString=!0,$fallbackLanguage=[langKey]):angular.isArray(langKey)&&($fallbackWasString=!1,$fallbackLanguage=langKey),angular.isString($preferredLanguage)&&indexOf($fallbackLanguage,$preferredLanguage)<0&&$fallbackLanguage.push($preferredLanguage),this):$fallbackWasString?$fallbackLanguage[0]:$fallbackLanguage};this.use=function(langKey){if(langKey){if(!$translationTable[langKey]&&!$loaderFactory)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+langKey+"'");return $uses=langKey,this}return $uses};var storageKey=function(key){return key?void($storageKey=key):$storagePrefix?$storagePrefix+$storageKey:$storageKey};this.storageKey=storageKey,this.useUrlLoader=function(url,options){return this.useLoader("$translateUrlLoader",angular.extend({url:url},options))},this.useStaticFilesLoader=function(options){return this.useLoader("$translateStaticFilesLoader",options)},this.useLoader=function(loaderFactory,options){return $loaderFactory=loaderFactory,$loaderOptions=options||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(storageFactory){return $storageFactory=storageFactory,this},this.storagePrefix=function(prefix){return prefix?($storagePrefix=prefix,this):prefix},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(factory){return $missingTranslationHandlerFactory=factory,this},this.usePostCompiling=function(value){return $postCompilingEnabled=!!value,this},this.determinePreferredLanguage=function(fn){var locale=fn&&angular.isFunction(fn)?fn():getLocale();return $preferredLanguage=$availableLanguageKeys.length?negotiateLocale(locale):locale,this},this.registerAvailableLanguageKeys=function(languageKeys,aliases){return languageKeys?($availableLanguageKeys=languageKeys,aliases&&($languageKeyAliases=aliases),this):$availableLanguageKeys},this.useLoaderCache=function(cache){return cache===!1?loaderCache=void 0:cache===!0?loaderCache=!0:"undefined"==typeof cache?loaderCache="$translationCache":cache&&(loaderCache=cache),this},this.directivePriority=function(priority){return void 0===priority?directivePriority:(directivePriority=priority,this)},this.$get=["$log","$injector","$rootScope","$q",function($log,$injector,$rootScope,$q){var Storage,fallbackIndex,startFallbackIteration,defaultInterpolator=$injector.get($interpolationFactory||"$translateDefaultInterpolation"),pendingLoader=!1,interpolatorHashMap={},langPromises={},$translate=function(translationId,interpolateParams,interpolationId,defaultTranslationText){if(angular.isArray(translationId)){var translateAll=function(translationIds){for(var results={},promises=[],translate=function(translationId){var deferred=$q.defer(),regardless=function(value){results[translationId]=value,deferred.resolve([translationId,value])};return $translate(translationId,interpolateParams,interpolationId,defaultTranslationText).then(regardless,regardless),deferred.promise},i=0,c=translationIds.length;c>i;i++)promises.push(translate(translationIds[i]));return $q.all(promises).then(function(){return results})};return translateAll(translationId)}var deferred=$q.defer();translationId&&(translationId=trim.apply(translationId));var promiseToWaitFor=function(){var promise=$preferredLanguage?langPromises[$preferredLanguage]:langPromises[$uses];if(fallbackIndex=0,$storageFactory&&!promise){var langKey=Storage.get($storageKey);if(promise=langPromises[langKey],$fallbackLanguage&&$fallbackLanguage.length){var index=indexOf($fallbackLanguage,langKey);fallbackIndex=0===index?1:0,indexOf($fallbackLanguage,$preferredLanguage)<0&&$fallbackLanguage.push($preferredLanguage)}}return promise}();return promiseToWaitFor?promiseToWaitFor.then(function(){determineTranslation(translationId,interpolateParams,interpolationId,defaultTranslationText).then(deferred.resolve,deferred.reject)},deferred.reject):determineTranslation(translationId,interpolateParams,interpolationId,defaultTranslationText).then(deferred.resolve,deferred.reject),deferred.promise},applyNotFoundIndicators=function(translationId){return $notFoundIndicatorLeft&&(translationId=[$notFoundIndicatorLeft,translationId].join(" ")),$notFoundIndicatorRight&&(translationId=[translationId,$notFoundIndicatorRight].join(" ")),translationId},useLanguage=function(key){$uses=key,$rootScope.$emit("$translateChangeSuccess",{language:key}),$storageFactory&&Storage.put($translate.storageKey(),$uses),defaultInterpolator.setLocale($uses),angular.forEach(interpolatorHashMap,function(interpolator,id){interpolatorHashMap[id].setLocale($uses)}),$rootScope.$emit("$translateChangeEnd",{language:key})},loadAsync=function(key){if(!key)throw"No language key specified for loading.";var deferred=$q.defer();$rootScope.$emit("$translateLoadingStart",{language:key}),pendingLoader=!0;var cache=loaderCache;"string"==typeof cache&&(cache=$injector.get(cache));var loaderOptions=angular.extend({},$loaderOptions,{key:key,$http:angular.extend({},{cache:cache},$loaderOptions.$http)});return $injector.get($loaderFactory)(loaderOptions).then(function(data){var translationTable={};$rootScope.$emit("$translateLoadingSuccess",{language:key}),angular.isArray(data)?angular.forEach(data,function(table){angular.extend(translationTable,flatObject(table))}):angular.extend(translationTable,flatObject(data)),pendingLoader=!1,deferred.resolve({key:key,table:translationTable}),$rootScope.$emit("$translateLoadingEnd",{language:key})},function(key){$rootScope.$emit("$translateLoadingError",{language:key}),deferred.reject(key),$rootScope.$emit("$translateLoadingEnd",{language:key})}),deferred.promise};if($storageFactory&&(Storage=$injector.get($storageFactory),!Storage.get||!Storage.put))throw new Error("Couldn't use storage '"+$storageFactory+"', missing get() or put() method!");angular.isFunction(defaultInterpolator.useSanitizeValueStrategy)&&defaultInterpolator.useSanitizeValueStrategy($interpolationSanitizationStrategy),$interpolatorFactories.length&&angular.forEach($interpolatorFactories,function(interpolatorFactory){var interpolator=$injector.get(interpolatorFactory);interpolator.setLocale($preferredLanguage||$uses),angular.isFunction(interpolator.useSanitizeValueStrategy)&&interpolator.useSanitizeValueStrategy($interpolationSanitizationStrategy),interpolatorHashMap[interpolator.getInterpolationIdentifier()]=interpolator});var getTranslationTable=function(langKey){var deferred=$q.defer();return Object.prototype.hasOwnProperty.call($translationTable,langKey)?deferred.resolve($translationTable[langKey]):langPromises[langKey]?langPromises[langKey].then(function(data){translations(data.key,data.table),deferred.resolve(data.table)},deferred.reject):deferred.reject(),deferred.promise},getFallbackTranslation=function(langKey,translationId,interpolateParams,Interpolator){var deferred=$q.defer();return getTranslationTable(langKey).then(function(translationTable){if(Object.prototype.hasOwnProperty.call(translationTable,translationId)){Interpolator.setLocale(langKey);var translation=translationTable[translationId];"@:"===translation.substr(0,2)?getFallbackTranslation(langKey,translation.substr(2),interpolateParams,Interpolator).then(deferred.resolve,deferred.reject):deferred.resolve(Interpolator.interpolate(translationTable[translationId],interpolateParams)),Interpolator.setLocale($uses)}else deferred.reject()},deferred.reject),deferred.promise},getFallbackTranslationInstant=function(langKey,translationId,interpolateParams,Interpolator){var result,translationTable=$translationTable[langKey];if(translationTable&&Object.prototype.hasOwnProperty.call(translationTable,translationId)){if(Interpolator.setLocale(langKey),result=Interpolator.interpolate(translationTable[translationId],interpolateParams),"@:"===result.substr(0,2))return getFallbackTranslationInstant(langKey,result.substr(2),interpolateParams,Interpolator);Interpolator.setLocale($uses)}return result},translateByHandler=function(translationId){if($missingTranslationHandlerFactory){var resultString=$injector.get($missingTranslationHandlerFactory)(translationId,$uses);return void 0!==resultString?resultString:translationId}return translationId},resolveForFallbackLanguage=function(fallbackLanguageIndex,translationId,interpolateParams,Interpolator,defaultTranslationText){var deferred=$q.defer();if(fallbackLanguageIndex<$fallbackLanguage.length){var langKey=$fallbackLanguage[fallbackLanguageIndex];getFallbackTranslation(langKey,translationId,interpolateParams,Interpolator).then(deferred.resolve,function(){resolveForFallbackLanguage(fallbackLanguageIndex+1,translationId,interpolateParams,Interpolator,defaultTranslationText).then(deferred.resolve)})}else defaultTranslationText?deferred.resolve(defaultTranslationText):deferred.resolve(translateByHandler(translationId));return deferred.promise},resolveForFallbackLanguageInstant=function(fallbackLanguageIndex,translationId,interpolateParams,Interpolator){var result;if(fallbackLanguageIndex<$fallbackLanguage.length){var langKey=$fallbackLanguage[fallbackLanguageIndex];result=getFallbackTranslationInstant(langKey,translationId,interpolateParams,Interpolator),result||(result=resolveForFallbackLanguageInstant(fallbackLanguageIndex+1,translationId,interpolateParams,Interpolator))}return result},fallbackTranslation=function(translationId,interpolateParams,Interpolator,defaultTranslationText){return resolveForFallbackLanguage(startFallbackIteration>0?startFallbackIteration:fallbackIndex,translationId,interpolateParams,Interpolator,defaultTranslationText)},fallbackTranslationInstant=function(translationId,interpolateParams,Interpolator){return resolveForFallbackLanguageInstant(startFallbackIteration>0?startFallbackIteration:fallbackIndex,translationId,interpolateParams,Interpolator)},determineTranslation=function(translationId,interpolateParams,interpolationId,defaultTranslationText){var deferred=$q.defer(),table=$uses?$translationTable[$uses]:$translationTable,Interpolator=interpolationId?interpolatorHashMap[interpolationId]:defaultInterpolator;if(table&&Object.prototype.hasOwnProperty.call(table,translationId)){var translation=table[translationId];"@:"===translation.substr(0,2)?$translate(translation.substr(2),interpolateParams,interpolationId,defaultTranslationText).then(deferred.resolve,deferred.reject):deferred.resolve(Interpolator.interpolate(translation,interpolateParams))}else{var missingTranslationHandlerTranslation;$missingTranslationHandlerFactory&&!pendingLoader&&(missingTranslationHandlerTranslation=translateByHandler(translationId)),$uses&&$fallbackLanguage&&$fallbackLanguage.length?fallbackTranslation(translationId,interpolateParams,Interpolator,defaultTranslationText).then(function(translation){deferred.resolve(translation)},function(_translationId){deferred.reject(applyNotFoundIndicators(_translationId))}):$missingTranslationHandlerFactory&&!pendingLoader&&missingTranslationHandlerTranslation?defaultTranslationText?deferred.resolve(defaultTranslationText):deferred.resolve(missingTranslationHandlerTranslation):defaultTranslationText?deferred.resolve(defaultTranslationText):deferred.reject(applyNotFoundIndicators(translationId))}return deferred.promise},determineTranslationInstant=function(translationId,interpolateParams,interpolationId){var result,table=$uses?$translationTable[$uses]:$translationTable,Interpolator=defaultInterpolator;if(interpolatorHashMap&&Object.prototype.hasOwnProperty.call(interpolatorHashMap,interpolationId)&&(Interpolator=interpolatorHashMap[interpolationId]),table&&Object.prototype.hasOwnProperty.call(table,translationId)){var translation=table[translationId];result="@:"===translation.substr(0,2)?determineTranslationInstant(translation.substr(2),interpolateParams,interpolationId):Interpolator.interpolate(translation,interpolateParams)}else{var missingTranslationHandlerTranslation;$missingTranslationHandlerFactory&&!pendingLoader&&(missingTranslationHandlerTranslation=translateByHandler(translationId)),$uses&&$fallbackLanguage&&$fallbackLanguage.length?(fallbackIndex=0,result=fallbackTranslationInstant(translationId,interpolateParams,Interpolator)):result=$missingTranslationHandlerFactory&&!pendingLoader&&missingTranslationHandlerTranslation?missingTranslationHandlerTranslation:applyNotFoundIndicators(translationId)}return result};if($translate.preferredLanguage=function(langKey){return langKey&&setupPreferredLanguage(langKey),$preferredLanguage},$translate.cloakClassName=function(){return $cloakClassName},$translate.fallbackLanguage=function(langKey){if(void 0!==langKey&&null!==langKey){if(fallbackStack(langKey),$loaderFactory&&$fallbackLanguage&&$fallbackLanguage.length)for(var i=0,len=$fallbackLanguage.length;len>i;i++)langPromises[$fallbackLanguage[i]]||(langPromises[$fallbackLanguage[i]]=loadAsync($fallbackLanguage[i]));$translate.use($translate.use())}return $fallbackWasString?$fallbackLanguage[0]:$fallbackLanguage},$translate.useFallbackLanguage=function(langKey){if(void 0!==langKey&&null!==langKey)if(langKey){var langKeyPosition=indexOf($fallbackLanguage,langKey);langKeyPosition>-1&&(startFallbackIteration=langKeyPosition)}else startFallbackIteration=0},$translate.proposedLanguage=function(){return $nextLang},$translate.storage=function(){return Storage},$translate.use=function(key){if(!key)return $uses;var deferred=$q.defer();$rootScope.$emit("$translateChangeStart",{language:key});var aliasedKey=negotiateLocale(key);return aliasedKey&&(key=aliasedKey),$translationTable[key]||!$loaderFactory||langPromises[key]?(deferred.resolve(key),useLanguage(key)):($nextLang=key,langPromises[key]=loadAsync(key).then(function(translation){return translations(translation.key,translation.table),deferred.resolve(translation.key),useLanguage(translation.key),$nextLang===key&&($nextLang=void 0),translation},function(key){$nextLang===key&&($nextLang=void 0),$rootScope.$emit("$translateChangeError",{language:key}),deferred.reject(key),$rootScope.$emit("$translateChangeEnd",{language:key})})),deferred.promise},$translate.storageKey=function(){return storageKey()},$translate.isPostCompilingEnabled=function(){return $postCompilingEnabled},$translate.refresh=function(langKey){function resolve(){deferred.resolve(),$rootScope.$emit("$translateRefreshEnd",{language:langKey})}function reject(){deferred.reject(),$rootScope.$emit("$translateRefreshEnd",{language:langKey})}if(!$loaderFactory)throw new Error("Couldn't refresh translation table, no loader registered!");var deferred=$q.defer();if($rootScope.$emit("$translateRefreshStart",{language:langKey}),langKey)$translationTable[langKey]?loadAsync(langKey).then(function(data){translations(data.key,data.table),langKey===$uses&&useLanguage($uses),resolve()},reject):reject();else{var tables=[],loadingKeys={};if($fallbackLanguage&&$fallbackLanguage.length)for(var i=0,len=$fallbackLanguage.length;len>i;i++)tables.push(loadAsync($fallbackLanguage[i])),loadingKeys[$fallbackLanguage[i]]=!0;$uses&&!loadingKeys[$uses]&&tables.push(loadAsync($uses)),$q.all(tables).then(function(tableData){angular.forEach(tableData,function(data){$translationTable[data.key]&&delete $translationTable[data.key],translations(data.key,data.table)}),$uses&&useLanguage($uses),resolve()})}return deferred.promise},$translate.instant=function(translationId,interpolateParams,interpolationId){if(null===translationId||angular.isUndefined(translationId))return translationId;if(angular.isArray(translationId)){for(var results={},i=0,c=translationId.length;c>i;i++)results[translationId[i]]=$translate.instant(translationId[i],interpolateParams,interpolationId);return results}if(angular.isString(translationId)&&translationId.length<1)return translationId;translationId&&(translationId=trim.apply(translationId));var result,possibleLangKeys=[];$preferredLanguage&&possibleLangKeys.push($preferredLanguage),$uses&&possibleLangKeys.push($uses),$fallbackLanguage&&$fallbackLanguage.length&&(possibleLangKeys=possibleLangKeys.concat($fallbackLanguage));for(var j=0,d=possibleLangKeys.length;d>j;j++){var possibleLangKey=possibleLangKeys[j];if($translationTable[possibleLangKey]&&("undefined"!=typeof $translationTable[possibleLangKey][translationId]?result=determineTranslationInstant(translationId,interpolateParams,interpolationId):($notFoundIndicatorLeft||$notFoundIndicatorRight)&&(result=applyNotFoundIndicators(translationId))),"undefined"!=typeof result)break}return result||""===result||(result=defaultInterpolator.interpolate(translationId,interpolateParams),$missingTranslationHandlerFactory&&!pendingLoader&&(result=translateByHandler(translationId))),result},$translate.versionInfo=function(){return version},$translate.loaderCache=function(){return loaderCache},$translate.directivePriority=function(){return directivePriority},$loaderFactory&&(angular.equals($translationTable,{})&&$translate.use($translate.use()),$fallbackLanguage&&$fallbackLanguage.length))for(var processAsyncResult=function(translation){return translations(translation.key,translation.table),$rootScope.$emit("$translateChangeEnd",{language:translation.key}),translation},i=0,len=$fallbackLanguage.length;len>i;i++)langPromises[$fallbackLanguage[i]]=loadAsync($fallbackLanguage[i]).then(processAsyncResult);return $translate}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function($interpolate){var $locale,$translateInterpolator={},$identifier="default",$sanitizeValueStrategy=null,sanitizeValueStrategies={escaped:function(params){var result={};for(var key in params)Object.prototype.hasOwnProperty.call(params,key)&&(angular.isNumber(params[key])?result[key]=params[key]:result[key]=angular.element("<div></div>").text(params[key]).html());return result}},sanitizeParams=function(params){var result;return result=angular.isFunction(sanitizeValueStrategies[$sanitizeValueStrategy])?sanitizeValueStrategies[$sanitizeValueStrategy](params):params};return $translateInterpolator.setLocale=function(locale){$locale=locale},$translateInterpolator.getInterpolationIdentifier=function(){return $identifier},$translateInterpolator.useSanitizeValueStrategy=function(value){return $sanitizeValueStrategy=value,this},$translateInterpolator.interpolate=function(string,interpolateParams){return $sanitizeValueStrategy&&(interpolateParams=sanitizeParams(interpolateParams)),$interpolate(string)(interpolateParams||{})},$translateInterpolator}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function($translate,$q,$interpolate,$compile,$parse,$rootScope){var trim=function(){return this.replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:$translate.directivePriority(),compile:function(tElement,tAttr){var translateValuesExist=tAttr.translateValues?tAttr.translateValues:void 0,translateInterpolation=tAttr.translateInterpolation?tAttr.translateInterpolation:void 0,translateValueExist=tElement[0].outerHTML.match(/translate-value-+/i),interpolateRegExp="^(.*)("+$interpolate.startSymbol()+".*"+$interpolate.endSymbol()+")(.*)",watcherRegExp="^(.*)"+$interpolate.startSymbol()+"(.*)"+$interpolate.endSymbol()+"(.*)";return function(scope,iElement,iAttr){scope.interpolateParams={},scope.preText="",scope.postText="";var translationIds={},observeElementTranslation=function(translationId){if(angular.isFunction(observeElementTranslation._unwatchOld)&&(observeElementTranslation._unwatchOld(),observeElementTranslation._unwatchOld=void 0),angular.equals(translationId,"")||!angular.isDefined(translationId)){var interpolateMatches=trim.apply(iElement.text()).match(interpolateRegExp);if(angular.isArray(interpolateMatches)){scope.preText=interpolateMatches[1],scope.postText=interpolateMatches[3],translationIds.translate=$interpolate(interpolateMatches[2])(scope.$parent);var watcherMatches=iElement.text().match(watcherRegExp);angular.isArray(watcherMatches)&&watcherMatches[2]&&watcherMatches[2].length&&(observeElementTranslation._unwatchOld=scope.$watch(watcherMatches[2],function(newValue){
translationIds.translate=newValue,updateTranslations()}))}else translationIds.translate=iElement.text().replace(/^\s+|\s+$/g,"")}else translationIds.translate=translationId;updateTranslations()},observeAttributeTranslation=function(translateAttr){iAttr.$observe(translateAttr,function(translationId){translationIds[translateAttr]=translationId,updateTranslations()})},firstAttributeChangedEvent=!0;iAttr.$observe("translate",function(translationId){"undefined"==typeof translationId?observeElementTranslation(""):""===translationId&&firstAttributeChangedEvent||(translationIds.translate=translationId,updateTranslations()),firstAttributeChangedEvent=!1});for(var translateAttr in iAttr)iAttr.hasOwnProperty(translateAttr)&&"translateAttr"===translateAttr.substr(0,13)&&observeAttributeTranslation(translateAttr);if(iAttr.$observe("translateDefault",function(value){scope.defaultText=value}),translateValuesExist&&iAttr.$observe("translateValues",function(interpolateParams){interpolateParams&&scope.$parent.$watch(function(){angular.extend(scope.interpolateParams,$parse(interpolateParams)(scope.$parent))})}),translateValueExist){var observeValueAttribute=function(attrName){iAttr.$observe(attrName,function(value){var attributeName=angular.lowercase(attrName.substr(14,1))+attrName.substr(15);scope.interpolateParams[attributeName]=value})};for(var attr in iAttr)Object.prototype.hasOwnProperty.call(iAttr,attr)&&"translateValue"===attr.substr(0,14)&&"translateValues"!==attr&&observeValueAttribute(attr)}var updateTranslations=function(){for(var key in translationIds)translationIds.hasOwnProperty(key)&&updateTranslation(key,translationIds[key],scope,scope.interpolateParams,scope.defaultText)},updateTranslation=function(translateAttr,translationId,scope,interpolateParams,defaultTranslationText){translationId?$translate(translationId,interpolateParams,translateInterpolation,defaultTranslationText).then(function(translation){applyTranslation(translation,scope,!0,translateAttr)},function(translationId){applyTranslation(translationId,scope,!1,translateAttr)}):applyTranslation(translationId,scope,!1,translateAttr)},applyTranslation=function(value,scope,successful,translateAttr){if("translate"===translateAttr){successful||"undefined"==typeof scope.defaultText||(value=scope.defaultText),iElement.html(scope.preText+value+scope.postText);var globallyEnabled=$translate.isPostCompilingEnabled(),locallyDefined="undefined"!=typeof tAttr.translateCompile,locallyEnabled=locallyDefined&&"false"!==tAttr.translateCompile;(globallyEnabled&&!locallyDefined||locallyEnabled)&&$compile(iElement.contents())(scope)}else{successful||"undefined"==typeof scope.defaultText||(value=scope.defaultText);var attributeName=iAttr.$attr[translateAttr].substr(15);iElement.attr(attributeName,value)}};scope.$watch("interpolateParams",updateTranslations,!0);var unbind=$rootScope.$on("$translateChangeSuccess",updateTranslations);iElement.text().length&&observeElementTranslation(""),updateTranslations(),scope.$on("$destroy",unbind)}}}}]),angular.module("pascalprecht.translate").directive("translateCloak",["$rootScope","$translate",function($rootScope,$translate){return{compile:function(tElement){var applyCloak=function(){tElement.addClass($translate.cloakClassName())},removeCloak=function(){tElement.removeClass($translate.cloakClassName())},removeListener=$rootScope.$on("$translateChangeEnd",function(){removeCloak(),removeListener(),removeListener=null});return applyCloak(),function(scope,iElement,iAttr){iAttr.translateCloak&&iAttr.translateCloak.length&&iAttr.$observe("translateCloak",function(translationId){$translate(translationId).then(removeCloak,applyCloak)})}}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function($parse,$translate){var translateFilter=function(translationId,interpolateParams,interpolation){return angular.isObject(interpolateParams)||(interpolateParams=$parse(interpolateParams)(this)),$translate.instant(translationId,interpolateParams,interpolation)};return translateFilter.$stateful=!0,translateFilter}]),define("angularTranslate",["angular"],function(){}),angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",["$q","$http",function($q,$http){return function(options){if(!(options&&(angular.isArray(options.files)||angular.isString(options.prefix)&&angular.isString(options.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");options.files||(options.files=[{prefix:options.prefix,suffix:options.suffix}]);for(var load=function(file){if(!file||!angular.isString(file.prefix)||!angular.isString(file.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var deferred=$q.defer();return $http(angular.extend({url:[file.prefix,options.key,file.suffix].join(""),method:"GET",params:""},options.$http)).success(function(data){deferred.resolve(data)}).error(function(data){deferred.reject(options.key)}),deferred.promise},deferred=$q.defer(),promises=[],length=options.files.length,i=0;length>i;i++)promises.push(load({prefix:options.files[i].prefix,key:options.key,suffix:options.files[i].suffix}));return $q.all(promises).then(function(data){for(var length=data.length,mergedData={},i=0;length>i;i++)for(var key in data[i])mergedData[key]=data[i][key];deferred.resolve(mergedData)},function(data){deferred.reject(data)}),deferred.promise}}]),define("angularTranslateLoaderStaticFiles",["angularTranslate"],function(){}),define("components/translations/translations",["angular","angularTranslate","angularTranslateLoaderStaticFiles"],function(angular){"use strict";return angular.module("tq.translations",["pascalprecht.translate"]).constant("ACN_NG_TRANSLATION_FILES",[window.getSfdcStaticResourcePathSafe().concat("src/acn-one/acn-ng/components/translations/ACN_EN")]).config(function($translateProvider,ACN_NG_TRANSLATION_FILES){$translateProvider.useStaticFilesLoader({prefix:"",suffix:".json"}),$translateProvider.preferredLanguage(_.last(ACN_NG_TRANSLATION_FILES))})}),define("components/bootstrap/bootstrap",["angular","coreapi","components/popup/criticalerror/criticalerror","components/analytics/analytics","components/loading/loading","components/translations/translations"],function(angular){return angular.module("tq.bootstrap",["tq.coreapi","tq.translations","tq.analytics","tq.loading","tq.popup.criticalerror"]).provider("tqBootstrap",function(){var thisTqBootstrap,loginPage="/tqlogin",loginParams={},activationPage="/tqactivation",activationFinishedDeferredList=[],coreBootstrapFinishDeferredList=[];this.setDefaultLoginPage=function(defualtLoginPage,defaultLoginParams){return loginPage=defaultLoginPage,defaultLoginParams&&(loginParams=defaultLoginParams),this},this.setDefaultActivationPage=function(defaultActivationPage){return activationPage=defaultActivationPage,this},this.addTaskOnActivationFinish=function(eventHandlingMethod){return activationFinishedDeferredList.push(eventHandlingMethod),this},this.addTaskOnCoreBootstrapFinish=function(eventHandlingMethod){return coreBootstrapFinishDeferredList.push(eventHandlingMethod),this},this.$get=function($rootScope,$location,$timeout,tqCoreConnector,tqPopupCriticalError,$q,tqRedirector,$translate,tqLoading,$injector){var processBootstrapError=function(error){tqLoading.hide(),error&&-100!==error.code&&tqPopupCriticalError.show({title:"",message:$translate.instant("REPORT_IF_ISSUE_PERSISTS")})};return thisTqBootstrap||(thisTqBootstrap={start:function(){tqRedirector.saveCurrentState(),tqRedirector.clearState(),tqCoreConnector.session.isAuthenticated()?thisTqBootstrap.authenticate():$location.path(loginPage,loginParams,{relative:null})},getLoginPage:function(){return loginPage},getActivationPage:function(){return activationPage},coreBootstrap:function(){tqLoading.show(),tqCoreConnector.bootstrap.start().then(function(){thisTqBootstrap.executeTasksAfterCoreBootstrap().then(function(){tqCoreConnector.appstatus.isActivated()?thisTqBootstrap.executePostActivationTasks():(tqLoading.hide(),$location.path(activationPage),$timeout(function(){$rootScope.$broadcast("tqBootstrapFinished")},800))},processBootstrapError)},processBootstrapError)},executePostActivationTasks:function(executedAfterActivation){var deferredList=[];return angular.forEach(activationFinishedDeferredList,function(promiseMethod){deferredList.push($q.when($injector.invoke(promiseMethod)))}),$q.all(deferredList).then(function(){executedAfterActivation||(tqLoading.hide(),$timeout(function(){$rootScope.$broadcast("tqBootstrapFinished")},800)),tqRedirector.routeToStartState()},processBootstrapError)},executeTasksAfterCoreBootstrap:function(){var deferredList=[];return angular.forEach(coreBootstrapFinishDeferredList,function(promiseMethod){deferredList.push($q.when($injector.invoke(promiseMethod)))}),$q.all(deferredList)},authenticate:function(environment){tqLoading.show(),tqCoreConnector.session.login(environment).then(function(){thisTqBootstrap.coreBootstrap()},processBootstrapError)}}),thisTqBootstrap}})}),define("components/auth/auth",["angular","coreapi","components/popup/criticalerror/criticalerror","components/loading/loading"],function(angular){"use strict";return angular.module("tq.auth",["ui.router","tq.coreapi","tq.popup.criticalerror"]).service("tqAuth",function($q,$log,$ionicLoading,$timeout,$state,$ionicPopup,tqRedirector,tqLoading,tqCoreConnector,tqPopupCriticalError){var self=this;this.DEFAULT_POLLING_INTERVAL_MS=500,this.logout=function(noPopup){return $ionicPopup.confirm({title:"Are you sure you would like to logout?",cssClass:"tf-popup-confirm",cancelType:"button-cancel"}).then(function(affermative){if(affermative){if(!tqCoreConnector.appstatus.isOnline())return self._showHaveToBeOnlineMessage();if(!tqCoreConnector.syncstatus.isSyncing())return tqLoading.show(),self.directLogout();self._showSyncInProgressError()}}).then(tqLoading.hide)},this.logoutOrWaitForSync=function(){tqCoreConnector.syncstatus.isSyncing()?($ionicLoading.show(),$timeout(self.logoutOrWaitForSync,self.DEFAULT_POLLING_INTERVAL_MS)):self.directLogout()},this._showHaveToBeOnlineMessage=function(){return $ionicPopup.alert({title:"You have to be online in order to logout"})},this._showSyncInProgressError=function(){tqPopupCriticalError.show({title:"Logout",message:"It is not possible to logout while a sync is in process",okText:"Ok",restart:!1})},this.directLogout=function(){return $log.info("Logging the user out now..."),tqRedirector.clearState(),tqCoreConnector.session.logout().then(function(){$state.go("tqlogin")})["catch"](function(err){$ionicPopup.alert({title:"Impossible to logout. Please try again"})})}})}),define("acnNg/home/home",["angular","uiRouter","coreapi","components/bootstrap/bootstrap"],function(angular){return angular.module("tq.home",["ui.router","tq.coreapi","tq.bootstrap"]).config(function($stateProvider){$stateProvider.state("tqhome",{url:"/tqhome",controller:"TqHomeCtrl",templateUrl:"acn-one/acn-ng/home/home.tpl.html",data:{pageTitle:"Home"}})}).controller("TqHomeCtrl",function($scope,tqCoreConnector){})}),define("acnNg/login/login",["angular","uiRouter","coreapi","components/bootstrap/bootstrap"],function(angular){return angular.module("tq.login",["ui.router","tq.coreapi","tq.bootstrap","tq.analytics"]).config(function($stateProvider){$stateProvider.state("tqlogin",{url:"/tqlogin",cache:!1,controller:"TqLoginCtrl",templateUrl:"acn-one/acn-ng/login/login.tpl.html",data:{pageTitle:"Login"}})}).controller("TqLoginCtrl",function($scope,$state,$q,$location,tqCoreConnector,tqBootstrap,$ionicHistory,tqLoading){tqLoading.hide(),$ionicHistory.nextViewOptions({disableBack:!0});var selectedEnvironment=tqCoreConnector.session.getSelectedEnvironment();$scope.selectedOption=null,$scope.environmentOptions=tqCoreConnector.session.getEnvironmentsList(),_.each($scope.environmentOptions,function(option){option.environment==selectedEnvironment.environment&&($scope.selectedOption=option)}),$scope.change=function(selectedOption){$scope.selectedOption=selectedOption},$scope.login=function(){var environmentURL=$scope.selectedOption?$scope.selectedOption.value:null;tqBootstrap.authenticate(environmentURL)}})}),angular.module("angular.directives-round-progress",[]).directive("angRoundProgress",[function(){var compilationFunction=function(templateElement,templateAttributes,transclude){if(1===templateElement.length){var node=templateElement[0],width=node.getAttribute("data-round-progress-width")||"400",height=node.getAttribute("data-round-progress-height")||"400",canvas=document.createElement("canvas");canvas.setAttribute("width",width),canvas.setAttribute("height",height),canvas.style.margin="auto",canvas.setAttribute("data-round-progress-model",node.getAttribute("data-round-progress-model")),node.parentNode.replaceChild(canvas,node);var outerCircleWidth=node.getAttribute("data-round-progress-outer-circle-width")||"20",innerCircleWidth=node.getAttribute("data-round-progress-inner-circle-width")||"5",outerCircleBackgroundColor=node.getAttribute("data-round-progress-outer-circle-background-color")||"#505769",outerCircleForegroundColor=node.getAttribute("data-round-progress-outer-circle-foreground-color")||"#12eeb9",innerCircleColor=node.getAttribute("data-round-progress-inner-circle-color")||"#505769",labelColor=node.getAttribute("data-round-progress-label-color")||"#12eeb9",outerCircleRadius=node.getAttribute("data-round-progress-outer-circle-radius")||"100",innerCircleRadius=node.getAttribute("data-round-progress-inner-circle-radius")||"70",labelFont=node.getAttribute("data-round-progress-label-font")||"50pt Calibri";return{pre:function(scope,instanceElement,instanceAttributes,controller){var expression=canvas.getAttribute("data-round-progress-model");scope.$watch(expression,function(newValue,oldValue){var ctx=canvas.getContext("2d");ctx.clearRect(0,0,width,height);var x=width/2,y=height/2;ctx.beginPath(),ctx.arc(x,y,parseInt(outerCircleRadius),0,2*Math.PI,!1),ctx.lineWidth=parseInt(outerCircleWidth),ctx.strokeStyle=outerCircleBackgroundColor,ctx.stroke(),ctx.beginPath(),ctx.arc(x,y,parseInt(innerCircleRadius),0,2*Math.PI,!1),ctx.lineWidth=parseInt(innerCircleWidth),ctx.strokeStyle=innerCircleColor,ctx.stroke(),ctx.font=labelFont,ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillStyle=labelColor,ctx.fillText(newValue.label,x,y);var startAngle=-(Math.PI/2),endAngle=2*Math.PI*newValue.percentage-Math.PI/2,anticlockwise=!1;ctx.beginPath(),ctx.arc(x,y,parseInt(outerCircleRadius),startAngle,endAngle,anticlockwise),ctx.lineWidth=parseInt(outerCircleWidth),ctx.strokeStyle=outerCircleForegroundColor,ctx.stroke()},!0)},post:function(scope,instanceElement,instanceAttributes,controller){}}}},roundProgress={compile:compilationFunction,replace:!0};return roundProgress}]),define("angularRoundProgress",["angular"],function(){}),define("acnNg/activation/activation",["angular","uiRouter","angularRoundProgress","components/bootstrap/bootstrap","components/auth/auth","components/popup/criticalerror/criticalerror","components/translations/translations"],function(angular){return angular.module("tq.activation",["ui.router","angular.directives-round-progress","tq.bootstrap","tq.analytics","tq.translations","tq.auth","tq.popup.criticalerror"]).config(function($stateProvider){$stateProvider.state("tqactivation",{url:"/tqactivation",cache:!1,controller:"TqActivationCtrl",templateUrl:"acn-one/acn-ng/activation/activation.tpl.html",data:{pageTitle:"Activation"}})}).controller("TqActivationCtrl",function($scope,$location,$rootScope,tqCoreConnector,tqPopupCriticalError,tqBootstrap,$timeout,$translate,$ionicPopup,tqRedirector,$ionicHistory,tqAuth,tqLoading,tqAnalytics){function _getPopup(){return popup?popup:popup=$ionicPopup.show({title:"Cancelled",template:"You cannot use the app without full synchronisation. Please try again",buttons:[{text:"Logout",type:"tq-popup-criticalerror-btn",onTap:function(){return tqCoreConnector.sync.cancelActivation(),activationCancelled=!0,popup.close(),tqLoading.show(),tqAuth.directLogout()}},{text:"Cancel",type:"button-cancel",onTap:function(e){return!1}}]})}$ionicHistory.nextViewOptions({disableBack:!0}),$scope.activating=!1,$scope.backButtonHidden=!0,$scope.roundProgressData={label:"Initializing",percentage:0},$scope.$watch("roundProgressData",function(newValue,oldValue){newValue.percentage>0&&(newValue.label=newValue.percentage>1?"Processing":Math.ceil(100*newValue.percentage)+"%")},!0);var popup,activationCancelled=!1;$scope.cancelActivation=function(){return _getPopup()},$scope.activate=function(){function successCallback(result){return"/tqobjects"===$rootScope.preActivationState||"/tqobjects"===TQ.config.Client.defaultStartState?tqCoreConnector.getTrackedObjectsList():void 0}function failCallback(err){$scope.activating=!1,$scope.roundProgressData.percentage=0,tqCoreConnector.utils.connectivity.isTimeoutError(err.error)||tqCoreConnector.utils.connectivity.isOfflineError(err.error)||activationCancelled?activationCancelled&&tqLoading.hide():tqPopupCriticalError.show({title:"",message:$translate.instant("REPORT_IF_ISSUE_PERSISTS")}),$scope.$evalAsync()}function notifyCallback(downloadProgressPercent){$scope.roundProgressData.percentage=Math.ceil(downloadProgressPercent)/100,100==downloadProgressPercent&&setTimeout(function(){$scope.roundProgressData.percentage=1.01},400)}function finishActivation(){tqBootstrap.executePostActivationTasks(!0)}$scope.activating=!0,tqCoreConnector.sync.startSync().then(successCallback,failCallback,notifyCallback).then(finishActivation)}})}),define("acnNg/feedback/feedback",["angular","uiRouter","coreapi"],function(angular){return angular.module("tq.feedback",["ui.router","tq.coreapi"]).config(function($stateProvider){$stateProvider.state("tqfeedback",{url:"/tqfeedback",controller:"TqFeedbackCtrl",templateUrl:"acn-one/acn-ng/feedback/feedback.tpl.html",data:{pageTitle:"Contact AccentureONE Team"}})}).service("TqFeedbackUtils",function(){var getDeviceType=function(){return navigator.userAgent.indexOf("Android")>0?"Android":navigator.userAgent.indexOf("iPhone")>0?"iPhone":navigator.userAgent.indexOf("iPod")>0?"iPod":navigator.userAgent.indexOf("iPad")>0?"iPad":window.device.model},getDeviceVars=function(){return window.device?{cordova:window.device.cordova,model:window.device.model,platform:window.device.platform,uuid:window.device.uuid,version:window.device.version,device:getDeviceType()}:!1};return{getDeviceVars:getDeviceVars}}).controller("TqFeedbackCtrl",function($scope,tqCoreConnector,$ionicScrollDelegate,$timeout,tqFeedbackUtils){$scope.record=tqCoreConnector.record.getTrackedObjectRecordInstance("Case"),$scope.errorList=[],$scope.sendSuccess=!1,$scope.caseRecordType="TQONE_Issue",$scope.recordTypeId=tqCoreConnector.metadata.getRecordTypeId("Case",$scope.caseRecordType),$scope.version=window.appVersion,$scope.getDeviceType=tqFeedbackUtils.getDeviceType,$scope.getDeviceType=tqFeedbackUtils.getDeviceVars,$scope.initCaseValues=function(rawCase){rawCase.Subject="",rawCase.Description="",rawCase.Origin="AccentureONE",rawCase.Type="Problem",$scope.recordTypeId&&(rawCase.RecordTypeId=$scope.recordTypeId);var deviceVars=FeedbackUtils.getDeviceVars;if(deviceVars)rawCase.TQ1_Cordova_Version__c=deviceVars.cordova,rawCase.TQ1_Device_Model__c=deviceVars.model,rawCase.TQ1_Platform__c=deviceVars.platform,rawCase.TQ1_UUID__c=deviceVars.uuid,rawCase.TQ1_OS_Version__c=deviceVars.version,rawCase.TQ1_Device_Type__c=deviceVars.device;else{rawCase.TQ1_Device_Model__c="Desktop "+navigator.appCodeName,rawCase.TQ1_Platform__c=navigator.platform;var deviceVersion=navigator.appCodeName+" "+navigator.appVersion;deviceVersion.indexOf(")")>0&&(deviceVersion=deviceVersion.substring(0,deviceVersion.indexOf(")")+1)),rawCase.TQ1_Device_Type__c=deviceVersion}},$scope.initCaseValues($scope.record.rawRecord),$scope.reportIssue=function(){$scope.sendSuccess=!1;var contentScroller=$ionicScrollDelegate.$getByHandle("ionContentScrollHandle");if($scope.validateCase()){var uploadDef=tqCoreConnector.sync.immediateUpload($scope.record);uploadDef.then(function(response){response&&response.body&&response.body[0].success===!1?$scope.errorList=["Failed to send your message. Please check internet connection and try again."]:($scope.sendSuccess=!0,$scope.record=tqCoreConnector.metadata.getTrackedObjectRecordInstance("Case"),$scope.initCaseValues($scope.record.rawRecord),$timeout(function(){$scope.sendSuccess=!1},3e3)),contentScroller.scrollTop(!0)},function(error){$scope.errorList=["Failed to send your message. Please check internet connection and try again."],contentScroller.scrollTop(!0)})}else contentScroller.scrollTop(!0)},$scope.validateCase=function(){return $scope.errorList=[],$scope.record.rawRecord.Subject&&""!==$scope.record.rawRecord.Subject||$scope.errorList.push("Please enter Subject of your message"),$scope.record.rawRecord.Description&&""!==$scope.record.rawRecord.Description||$scope.errorList.push("Please enter Description of your problem"),0===$scope.errorList.length}})}),define("components/popup/photo/photo",["angular","coreapi","components/translations/translations"],function(angular){return angular.module("tq.popup.photo",["ionic","tq.coreapi","tq.translations"]).service("tqPhotoPicker",function(tqCoreConnector,$ionicPopup,$q,$translate){this.show=function(){var pickDefer=$q.defer();if(tqCoreConnector.device.platform.isDevice()){var SOURCE_PICK=tqCoreConnector.device.media.picture.PICK_PICTURE,SOURCE_TAKE=tqCoreConnector.device.media.picture.TAKE_PICTURE,getPicture=function(source){return function(event){tqCoreConnector.device.media.picture.getPicture(source).then(function(sourceUrl){pickDefer.resolve(sourceUrl)},function(error){pickDefer.reject(error)})}};$ionicPopup.show({cssClass:"tq-photo-popup",buttons:[{text:"Take a Photo",type:"button-positive",onTap:getPicture(SOURCE_TAKE)},{text:"Choose from Library",type:"button-positive",onTap:getPicture(SOURCE_PICK)},{text:"Cancel",type:"button-cancel",onTap:function(){pickDefer.reject()}}]})["catch"](function(error){pickDefer.reject(error)})}else $q.when($ionicPopup.alert({template:$translate.instant("OPERATION_FAILED")}))["finally"](function(){pickDefer.reject()});return pickDefer.promise}})}),define("components/popup/social/social",["angular","coreapi"],function(angular){return angular.module("tq.popup.social",["ionic","tq.coreapi","tq.translations"]).service("tqSocialSharePopup",function(tqCoreConnector,$ionicPopup,$q,$translate){this.ErrorCode={NOT_MOBILE_DEVICE:"NotMobileDevice",OFFLINE:"Offline",POPUP_ERROR:"PopupError",NO_IMAGE:"NoImage",CANCELED:"Canceled"},this.getExternalButtons=function(messageText,imageUrl,link){return[]},this.shouldDisplayPopup=function(){return tqCoreConnector.device.platform.isDevice()?tqCoreConnector.appstatus.isOnline()?!0:(this.deferError.displayMessage="You you need be online to share your data in social networks",this.deferError.errCode=this.ErrorCode.OFFLINE,this.pickDefer.reject(this.deferError),!1):(this.deferError.displayMessage="You need to work on device to share your data",this.deferError.errCode=this.ErrorCode.NOT_MOBILE_DEVICE,this.pickDefer.reject(this.deferError),!1)},this.showAndShare=function(messageText,imageUrl,link){var _this=this,pickDefer=$q.defer(),deferError={};if(deferError.displayMessage=null,this.pickDefer=pickDefer,this.deferError=deferError,this.shouldDisplayPopup()){var imagePresent=!_.isEmpty(imageUrl),socialShareMethod=function(shareType){return function(){return tqCoreConnector.appstatus.isOnline()?null!=imageUrl||shareType!=tqCoreConnector.device.share.ShareType.Instagram&&shareType!=tqCoreConnector.device.share.ShareType.Pinterest?void tqCoreConnector.device.share.shareVia(shareType,messageText,imageUrl,link).then(function(shouldShowAlert){shouldShowAlert&&$ionicPopup.alert({template:$translate.instant("CHATTER_SHARE_SUCCESSFUL")})["finally"](function(){pickDefer.resolve()})},function(error){_.isString(error)?deferError.displayMessage=error:deferError.displayMessage="Operation has failed",deferError.details=error,pickDefer.reject(deferError)}):(_this.deferError.displayMessage="You can share only data with image to "+shareType,_this.deferError.errCode=_this.ErrorCode.OFFLINE,void _this.pickDefer.reject(_this.deferError)):(_this.deferError.displayMessage="You you need be online to share your data in social networks",_this.deferError.errCode=_this.ErrorCode.OFFLINE,void _this.pickDefer.reject(_this.deferError))}},getButtons=function(){var buttons=[{text:"Facebook",type:"button-facebook",onTap:socialShareMethod(tqCoreConnector.device.share.ShareType.Facebook)},{text:"Twitter",type:"button-twitter",onTap:socialShareMethod(tqCoreConnector.device.share.ShareType.Twitter)},{text:"Instagram",type:imagePresent?"button-instagram":"button-instagram-disabled",onTap:socialShareMethod(tqCoreConnector.device.share.ShareType.Instagram)},{text:"Pinterest",type:imagePresent?"button-pinterest":"button-pinterest-disabled",onTap:socialShareMethod(tqCoreConnector.device.share.ShareType.Pinterest)}];tqCoreConnector.device.platform.isIOS()||buttons.push({text:"Google+",type:"button-google",onTap:socialShareMethod(tqCoreConnector.device.share.ShareType.GooglePlus)});var externalButtons=_this.getExternalButtons(messageText,imageUrl,link);if(!_.isEmpty(externalButtons))for(var index=0;index<externalButtons.length;index++)buttons.push(externalButtons[index]);return buttons.push({text:"Cancel",type:"button-cancel",onTap:function(){deferError.errCode=_this.ErrorCode.CANCELED,pickDefer.reject(deferError)}}),buttons},cssClass=tqCoreConnector.appstatus.isOnline()?"tq-social-popup":"tq-social-popup tq-social-popup-offline";$ionicPopup.show({cssClass:cssClass,title:"Share via",buttons:getButtons()})["catch"](function(error){deferError.errCode=_this.ErrorCode.POPUP_ERROR,deferError.details=error,pickDefer.reject(deferError)})}var deferPromise=pickDefer.promise;return deferPromise["catch"](function(error){null!=error.displayMessage&&$ionicPopup.alert({template:error.displayMessage})})["finally"](function(){_this.pickDefer=null,_this.deferError=null}),deferPromise}})}),define("components/chatter/actionbuttons/actionbuttons",["angular","uiRouter","coreapi","components/popup/photo/photo","components/popup/social/social"],function(angular){return angular.module("tq.chatter.actionbuttons",["ui.router","tq.coreapi","tq.popup.social"]).directive("tqChatterActionButtons",function(){return{restrict:"E",templateUrl:function(elem,attrs){return attrs.templateUrl||"acn-one/acn-ng/components/chatter/actionbuttons/actionbuttons.tpl.html"},link:function(scope,attrs){scope.actionButtons["class"]=attrs.iClass||"tabs-icon-left"},controller:function($scope,tqCoreConnector,tqSocialSharePopup,$ionicPopup,$timeout){$scope.actionButtons={},$scope.actionButtons.comment=function(){},$scope.likeDelayed=!1,$scope.actionButtons.toggleLike=function(record,callback){if(!$scope.likeDelayed){var isFeedItem="FeedItem"===record.objectApiName;$scope.likeDelayed=!0,record.chatterData.LikedByCurrentUser?tqCoreConnector.chatter.dislikeFeedEntity(record,isFeedItem).then(function(){angular.isUndefined(callback)||callback()},function(error){}):tqCoreConnector.chatter.likeFeedEntity(record,isFeedItem).then(function(){angular.isUndefined(callback)||callback()},function(error){}),$timeout(function(){$scope.likeDelayed=!1},800)}},$scope.actionButtons.share=function(record){var messageText=record.rawRecord.Body,imageUrl=record.rawRecord.ContentData;tqSocialSharePopup.showAndShare(messageText,imageUrl).then(function(){},function(error){})}}}})}),define("components/chatter/feeditem/feeditem",["angular","uiRouter","coreapi","components/chatter/actionbuttons/actionbuttons"],function(angular){return angular.module("tq.chatter.feedItem",["ui.router","tq.coreapi","tq.chatter.actionbuttons"]).directive("tqChatterFeeditem",function(){return{transclude:!0,restrict:"E",require:"^?tqChatterFeed",scope:{record:"=",deletable:"&?"},templateUrl:function(attrs,elem){return attrs.templateUrl||"acn-one/acn-ng/components/chatter/feeditem/feeditem.tpl.html"},link:function(scope,elem,attrs,tqChatterFeedCtrl,transcludeFn){transcludeFn(scope,function(transcludedElement){transcludedElement.each(function(index,node){switch(node.nodeName.toLowerCase()){case"tq-chatter-action-buttons":elem.find("#actionButtonsInsert").html(node);break;case"tq-chatter-comment-list":elem.find("#commentListInsert").html(node)}})}),scope.chatterFeedCtrl=tqChatterFeedCtrl},controller:function($scope,$state,tqCoreConnector){if($scope.deletable=angular.isUndefined($scope.deletable)?!1:!!$scope.deletable(),$scope.currentUserId=tqCoreConnector.user.getId(),$scope.textPost=function(){return"TextPost"===$scope.record.rawRecord.Type},$scope.deletionPossible=function(){return $scope.deletable&&$scope.chatterFeedCtrl&&angular.isFunction($scope.chatterFeedCtrl.deleteItem)&&$scope.record.rawRecord.CreatedById===$scope.currentUserId},$scope.deleteItem=function(){$scope.chatterFeedCtrl&&angular.isFunction($scope.chatterFeedCtrl.deleteItem)&&$scope.chatterFeedCtrl.deleteItem($scope.record)},$scope.chatterFormatDate=function(dateArg){return moment(dateArg).fromNow()},_.isEmpty($scope.pictureClick)){$scope.pictureClick=function(){};for(var parentScope=$scope.$parent;null!=parentScope;){if(_.isFunction(parentScope.pictureClick)){$scope.pictureClick=parentScope.pictureClick;break}parentScope=parentScope.$parent}}}}})}),define("components/chatter/post/post",["angular","uiRouter","coreapi","components/popup/photo/photo"],function(angular){return angular.module("tq.chatter.post",["ui.router","tq.coreapi","tq.popup.photo"]).directive("tqChatterPost",function(){return{restrict:"E",require:"^tqChatterFeed",templateUrl:function(elem,attrs){return attrs.templateUrl||"acn-one/acn-ng/components/chatter/post/post.tpl.html"},link:function(scope,$elem,attrs,tqChatterFeedCtrl){tqChatterFeedCtrl&&angular.isFunction(tqChatterFeedCtrl.postNewItemInFeed)&&(scope.postNewItemInFeed=function(record){tqChatterFeedCtrl.postNewItemInFeed(record)})},controller:function($scope,$state,tqCoreConnector,tqPhotoPicker,$ionicPopup,$translate){$scope.post={},$scope.post.attachmentImageUrl=null;var cleanAttachmentImage=function(){null!=$scope.post.attachmentImageUrl&&tqCoreConnector.device.file.removeFile($scope.post.attachmentImageUrl).then(function(){$scope.post.attachmentImageUrl=null})};$scope.post.removeAttachment=cleanAttachmentImage,$scope.post.send=function(post){return _.isEmpty(post.input)&&_.isEmpty($scope.post.attachmentImageUrl)?void $ionicPopup.alert({template:$translate.instant("POST_NOT_EMPTY")}):tqCoreConnector.chatter.createFeedItemForRecordFeed($scope.feedObjectId,post.input,$scope.post.attachmentImageUrl).then(function(feedItem){post.input="",$scope.post.attachmentImageUrl=null,angular.isFunction($scope.postNewItemInFeed)&&$scope.postNewItemInFeed(feedItem)})},$scope.post.getPhoto=function(){$scope.post.attachmentImageUrl||tqPhotoPicker.show().then(function(imageUrl){$scope.post.attachmentImageUrl=imageUrl})},$scope.$on("$destroy",function(){cleanAttachmentImage()})}}})}),define("components/chatter/feed/feed",["angular","uiRouter","coreapi","components/chatter/feeditem/feeditem","components/chatter/post/post"],function(angular){return angular.module("tq.chatter.feed",["ui.router","tq.coreapi","tq.chatter.feedItem","tq.chatter.post"]).constant("TQ_CHATTER_PAGE_SIZE",10).constant("TQ_MAX_FEED_PAGE_SIZE",100).service("tqChatterFeedDelegate",ionic.DelegateService(["deleteItem","postNewItemInFeed"])).directive("tqChatterFeed",function($timeout){return{restrict:"E",templateUrl:"acn-one/acn-ng/components/chatter/feed/feed.tpl.html",transclude:!0,scope:{feedType:"=?",feedObjectId:"=?",delegateHandle:"@?",readonly:"=?"},link:function(scope,element,attrs,controller,transcludeFn){transcludeFn(scope,function(clone,scope){element.html(clone)})},controller:function($rootScope,$scope,$state,$timeout,$q,tqChatterFeedDelegate,$ionicPopup,tqCoreConnector,TQ_CHATTER_PAGE_SIZE,TQ_MAX_FEED_PAGE_SIZE){
var self=this;_.isEmpty($scope.feedType)&&($scope.feedType=tqCoreConnector.chatter.FeedType.FeedTypeRecord);var deregisterInstance=null;angular.isString($scope.delegateHandle)&&""!==$scope.delegateHandle&&(deregisterInstance=tqChatterFeedDelegate._registerInstance(this,$scope.delegateHandle)),$scope._initList=function(){$scope.records=[],$scope.recordsMap={},$scope.page=0,$scope.pagesize=TQ_CHATTER_PAGE_SIZE,$scope.nextFeedPageUrl=null,$scope.moreDataCanBeLoaded=!0,$scope.lastDeferred=null},$scope._initList(),$scope.feedType!=tqCoreConnector.chatter.FeedType.FeedTypeRecord&&$scope.feedType!=tqCoreConnector.chatter.FeedType.FeedTypeGroups||!$scope.feedObjectId?$scope.chatterWhereCondition=void 0:$scope.chatterWhereCondition={ParentId:{$eq:$scope.feedObjectId}};var refreshRecordWithNewValues=function(record,newValues){var key;for(key in newValues.rawRecord)_.isEqual(record.rawRecord[key],newValues.rawRecord[key])||(record.rawRecord[key]=newValues.rawRecord[key]);if(newValues.chatterData)for(key in newValues.chatterData)_.isEqual(record.chatterData[key],newValues.chatterData[key])||"ContentBody"==key||(record.chatterData[key]=newValues.chatterData[key]);newValues.comments&&(record.comments=newValues.comments)},getRecordIdInScope=function(serverId){return $scope.recordsMap[serverId]?serverId:self.localAssignmentsMap&&self.localAssignmentsMap[serverId]?self.localAssignmentsMap[serverId]:null},updateRecordInList=function(newRecordValues){var localListId=getRecordIdInScope(newRecordValues.rawRecord.Id);if(localListId){var originalRecord=$scope.recordsMap[localListId];originalRecord&&refreshRecordWithNewValues(originalRecord,newRecordValues)}},insertRecordToList=function(newRecord,toTheTop){toTheTop=!!toTheTop;var localListId=getRecordIdInScope(newRecord.rawRecord.Id);localListId||($scope.recordsMap[newRecord.rawRecord.Id]=newRecord,toTheTop?$scope.records.unshift(newRecord):$scope.records.push(newRecord))},upsertRecordToList=function(newRecord,toTheTop){var localListId=getRecordIdInScope(newRecord.rawRecord.Id);localListId&&$scope.recordsMap[localListId]?updateRecordInList(newRecord):insertRecordToList(newRecord,toTheTop)},removeRecordIdFromList=function(recordId){var localListId=getRecordIdInScope(recordId);if($scope.recordsMap[localListId]){delete $scope.recordsMap[localListId];for(var index=0;index<$scope.records.length;index++)if($scope.records[index].rawRecord.Id==localListId){$scope.records.splice(index,1);break}}};this.postNewItemInFeed=function(newFeedItem){$scope.readonly||insertRecordToList(newFeedItem,!0)},this.loadMore=$scope.loadMore=function(fullReload){if($scope.moreDataCanBeLoaded){var page=fullReload?0:$scope.page,pageSize=$scope.pagesize;fullReload&&(pageSize=Math.max(Math.min($scope.page*$scope.pagesize,TQ_MAX_FEED_PAGE_SIZE),TQ_CHATTER_PAGE_SIZE));var currentDeferred=tqCoreConnector.chatter.getChatterFeedPage($scope.feedType,$scope.feedObjectId,page,pageSize,fullReload?null:$scope.nextFeedPageUrl);$scope.lastDeferred=currentDeferred,currentDeferred.then(function(responseData){if($scope.lastDeferred==currentDeferred){if(fullReload)$scope.records=responseData.records,$scope.page=responseData.records.length/TQ_CHATTER_PAGE_SIZE;else{var records=responseData.records;angular.forEach(records,function(record){upsertRecordToList(record)}),$scope.page++,$scope.nextFeedPageUrl=responseData.nextPageUrl,$scope.nextFeedPageUrl||($scope.moreDataCanBeLoaded=!1)}$scope.$broadcast("scroll.infiniteScrollComplete")}},function(error){$scope.lastDeferred==currentDeferred&&($scope.moreDataCanBeLoaded=!1,$scope.nextFeedPageUrl=null,$scope.$broadcast("scroll.infiniteScrollComplete"))})["finally"](function(){$scope.firstLoading=!1})}},$scope.shouldLoadMore=function(){return $scope.moreDataCanBeLoaded&&!$scope.firstLoading},this.refreshWithUpdates=function(updatesData){angular.isArray(updatesData.created)||(updatesData.created=[]);var upsertElementIds=updatesData.created;angular.isArray(updatesData.updated)&&(upsertElementIds=_.union(upsertElementIds,updatesData.updated));var allIds=upsertElementIds;return angular.isArray(updatesData.deleted)&&(allIds=_.union(allIds,updatesData.deleted)),upsertElementIds.length>=TQ_MAX_FEED_PAGE_SIZE||upsertElementIds.length>0&&0===$scope.records.length||upsertElementIds.length>$scope.records.length?($scope._initList(),this.loadMore()):(self.localAssignmentsMap=tqCoreConnector.sync.getLocalIdsForServerIds(allIds),angular.isArray(updatesData.deleted)&&angular.forEach(updatesData.deleted,function(deletedId){removeRecordIdFromList(updatesData.deleted[indx])}),tqCoreConnector.chatter.getFeedItemsByIds(upsertElementIds).then(function(feedItems){for(var index=0;index<feedItems.length;index++)_.contains(updatesData.created,feedItems[index].rawRecord.Id)?upsertRecordToList(feedItems[index],!0):updateRecordInList(feedItems[index])},function(error){})["finally"](function(){self.localAssignmentsMap=null}),void 0)};var startCallback=function(){},isNotEmptyResponse=function(response){return!(_.isEmpty(response)||_.isEmpty(response.created)&&_.isEmpty(response.deleted)&&_.isEmpty(response.updated))},successCallback=function(event,response){isNotEmptyResponse(response)&&self.refreshWithUpdates(response)},failCallback=function(error){},stopFeedObserving=tqCoreConnector.chatter.startFeedObserving($scope.feedType,$scope.feedObjectId,{when:"every 20 seconds"},startCallback,successCallback,failCallback);this.deleteItem=$scope.deleteItem=function(feedItem){$ionicPopup.confirm({title:"Are you sure you want to delete chatter post?",cssClass:"tf-popup-confirm",cancelType:"button-cancel"}).then(function(affermative){affermative&&tqCoreConnector.chatter.removeFeedItem(feedItem).then(function(){removeRecordIdFromList(feedItem.rawRecord.Id)},function(error){})})},$scope.firstLoading=!0,this.loadMore(),$scope.$on("$destroy",function(){angular.isFunction(stopFeedObserving)&&(stopFeedObserving(),stopFeedObserving=null),angular.isFunction(deregisterInstance)&&(deregisterInstance(),deregisterInstance=null)})}}})}),define("acnNg/chatter/chatter",["angular","uiRouter","coreapi","components/chatter/feed/feed"],function(angular){return angular.module("tq.chatter",["ui.router","tq.coreapi","tq.chatter.feed"]).config(function($stateProvider){$stateProvider.state("tqchatter",{url:"/tqchatter",controller:"TqChatterCtrl",templateUrl:"acn-one/acn-ng/chatter/chatter.tpl.html",data:{pageTitle:"Chatter"}})}).controller("TqChatterCtrl",function($scope,tqCoreConnector,$ionicScrollDelegate,$timeout){$scope.parentId=null})}),define("components/lazysrc/lazysrc",["angular","coreapi"],function(angular){return angular.module("tq.lazysrc",["tq.coreapi"]).directive("tqLazySrc",["tqCoreConnector",function(tqCoreConnector){return{restrict:"A",link:function(scope,element,attrs){var updateImageAttribute=function(elem,value){if(elem.is("img"))elem.attr("src",value);else{var cssValue=_.isEmpty(value)?"":"url("+value+")";elem.css("background-image",cssValue)}},fileLoadedCallback=function(localUrl){localUrl&&updateImageAttribute(element,localUrl)},fileFailedCallback=function(error){};element.is("img")&&element.bind("error",function(){var placeholder=element.attr("placeholder");_.isEmpty(placeholder)||element.attr("src")==placeholder||updateImageAttribute(element,placeholder)}),attrs.$observe("tqLazySrc",function(newSrc,oldSrc){newSrc!=oldSrc&&(oldSrc?tqCoreConnector.sync.offFileLoad(oldSrc,fileLoadedCallback,fileFailedCallback):_.isEmpty(attrs.placeholder)||updateImageAttribute(element,attrs.placeholder),newSrc&&""!==newSrc?0===newSrc.indexOf("data:")?updateImageAttribute(element,newSrc):tqCoreConnector.sync.onFileLoad(newSrc,fileLoadedCallback,fileFailedCallback):updateImageAttribute(element,null))}),scope.$on("$destroy",function(){var lazySrcValue=element.attr("tq-lazy-src");lazySrcValue&&""!==lazySrcValue&&tqCoreConnector.sync.offFileLoad(lazySrcValue,fileLoadedCallback,fileFailedCallback),element.unbind("error")})}}}])}),define("components/list/related/related",["angular","coreapi"],function(angular){return angular.module("tq.list.related",["tq.coreapi"]).directive("tqListRelated",function(){return{restrict:"E",templateUrl:"acn-one/acn-ng/components/list/related/related.tpl.html",scope:{parentRecordId:"=",objectApiName:"=",relationshipFieldApiName:"=",hasHeader:"&?",headerLabel:"@?",creatable:"&?",newPrepopulationMap:"&?",listHasHeader:"&?",where:"=?",orderby:"=?",searchable:"&?",sortable:"&?",onListItemClick:"&?",scrollHeight:"&?"},link:function(scope){scope.$watch("parentRecordId",function(newValue,oldValue){(newValue||scope.where)&&(newValue===oldValue&&scope.where||scope.prepareWhereCondition(newValue))},!0)},controller:function($scope,$state,tqCoreConnector){$scope.hasHeader=angular.isDefined($scope.hasHeader())?$scope.hasHeader():!0,$scope.creatable=angular.isDefined($scope.creatable())?$scope.creatable():!0,$scope.listHasHeader=angular.isDefined($scope.listHasHeader())?$scope.listHasHeader():!0,$scope.newPrepopulationMap=$scope.newPrepopulationMap()?$scope.newPrepopulationMap():{},$scope.searchable=angular.isDefined($scope.searchable())?$scope.searchable():!0,$scope.sortable=angular.isDefined($scope.sortable())?$scope.sortable():!0,$scope.onListItemClick=$scope.onListItemClick()?$scope.onListItemClick():null,$scope.scrollHeight=$scope.scrollHeight()?$scope.scrollHeight():null,$scope.prepareWhereCondition=function(parentRecordId){var newWhere={};if($scope.where&&parentRecordId){var parentWhere={};parentWhere[$scope.relationshipFieldApiName]={$eq:parentRecordId},newWhere={$and:[$scope.where,parentWhere]}}else $scope.where&&!parentRecordId?newWhere=$scope.where:parentRecordId&&(newWhere[$scope.relationshipFieldApiName]={$eq:parentRecordId});$scope.relationshipFieldApiName&&parentRecordId&&($scope.newPrepopulationMap[$scope.relationshipFieldApiName]=parentRecordId),$scope.where=newWhere},$scope.isCreatable=function(){return tqCoreConnector.metadata.isTrackedObjectCreatable($scope.objectApiName)&&tqCoreConnector.metadata.isTrackedObjectDisplayable($scope.objectApiName)},$scope.getHeaderLabel=function(){return $scope.headerLabel?$scope.headerLabel:tqCoreConnector.metadata.getTrackedObjectLabel($scope.objectApiName,!0)},$scope.newRecord=function(){$state.go("tqnew",{objectapiname:$scope.objectApiName,prepopulationRawRecordMap:$scope.getPrepopulationRawRecordMapAsParam()})},$scope.getPrepopulationRawRecordMapAsParam=function(){var prepopulationRawRecordMap=$scope.newPrepopulationMap||{};return JSON.stringify(prepopulationRawRecordMap)}}}})}),define("components/list/search/search",["angular"],function(angular){return angular.module("tq.list.search",[]).directive("tqListSearch",function(){return{restrict:"E",replace:"true",templateUrl:"acn-one/acn-ng/components/list/search/search.tpl.html",scope:{keyword:"=",search:"&",reset:"&"}}})}),define("components/list/sort/sort",["angular"],function(angular){return angular.module("tq.list.sort",[]).directive("tqListSort",function(){return{restrict:"E",replace:"true",templateUrl:"acn-one/acn-ng/components/list/sort/sort.tpl.html",scope:{isAscending:"=",sort:"&",objectApiName:"&?"},controller:function($scope,tqCoreConnector){$scope.ascending=!0,$scope.toggle=function(){$scope.ascending=!$scope.ascending,$scope.sort()},$scope.getFieldLabel=function(fieldApiName){return fieldApiName?tqCoreConnector.metadata.getFieldLabel($scope.objectApiName(),fieldApiName):void 0},$scope.listHeaderFieldSet=tqCoreConnector.metadata.getTrackedObjectHeaderFieldSet($scope.objectApiName()),_.isEmpty($scope.listHeaderFieldSet)?$scope.listHeaderFieldSet.push(tqCoreConnector.metadata.getNameField($scope.objectApiName())):($scope.deviceType="tablet","browser"===$scope.deviceType?$scope.nCols=10:"tablet"===$scope.deviceType?$scope.nCols=5:$scope.nCols=2,$scope.listHeaderFieldSet=$scope.listHeaderFieldSet.slice(0,$scope.nCols))}}})}),define("components/list/item/item",["angular","coreapi"],function(angular){return angular.module("tq.list.item",["tq.coreapi"]).directive("tqListItem",function(){return{restrict:"E",scope:{index:"=",record:"=?",objectApiName:"&?",label:"=?",icon:"=",swipeOptions:"=",click:"&",swipe:"&"},templateUrl:"acn-one/acn-ng/components/list/item/item.tpl.html",controller:function($scope,tqCoreConnector){$scope.listHeaderFieldSet=tqCoreConnector.metadata.getTrackedObjectHeaderFieldSet($scope.objectApiName()),_.isEmpty($scope.listHeaderFieldSet)?$scope.listHeaderFieldSet.push(tqCoreConnector.metadata.getNameField($scope.objectApiName())):($scope.deviceType="tablet","browser"===$scope.deviceType?$scope.nCols=10:"tablet"===$scope.deviceType?$scope.nCols=5:$scope.nCols=2,$scope.listHeaderFieldSet=$scope.listHeaderFieldSet.slice(0,$scope.nCols)),$scope.getFieldType=function(fieldApiName){return fieldApiName?tqCoreConnector.metadata.getFieldMetadata($scope.objectApiName(),fieldApiName).type:void 0},$scope.swipeOptionClicked=function(action,$event){$scope.swipe({action:action,index:$scope.index}),$event.stopPropagation&&$event.stopPropagation(),$event.preventDefault&&$event.preventDefault(),$event.cancelBubble=!0,$event.returnValue=!1}}}})}),define("components/media/picture/picture",["angular","coreapi","components/popup/criticalerror/criticalerror"],function(angular){return angular.module("tq.media.picture",["tq.coreapi","tq.popup.criticalerror"]).directive("tqMediaPicture",function(){return{restrict:"E",templateUrl:function(elem,attrs){return attrs.templateUrl?attrs.templateUrl:"acn-one/acn-ng/components/media/picture/picture.tpl.html"},scope:{parentRecordId:"=",onPictureSuccess:"=?",onPictureError:"=?",broadcastSuccessEvent:"&?",broadcastErrorEvent:"&?",takePictureBtn:"&?",pickPictureBtn:"&?"},controller:function($rootScope,$scope,tqCoreConnector,tqDeviceMediaPicture,tqPopupCriticalError){$scope.TAKE_PICTURE=tqCoreConnector.device.media.picture.TAKE_PICTURE,$scope.PICK_PICTURE=tqCoreConnector.device.media.picture.PICK_PICTURE,$scope.takePictureBtn=angular.isDefined($scope.takePictureBtn())?$scope.takePictureBtn():!0,$scope.pickPictureBtn=angular.isDefined($scope.pickPictureBtn())?$scope.pickPictureBtn():!0,$scope.broadcastSuccessEvent=angular.isDefined($scope.broadcastSuccessEvent())?$scope.broadcastSuccessEvent():!1,$scope.broadcastSuccessEvent=angular.isDefined($scope.broadcastErrorEvent())?$scope.broadcastErrorEvent():!1,$scope.getPicture=function(source){tqDeviceMediaPicture.getPicture(source).then(function(fileName){if($scope.parentRecordId){var attachment=tqCoreConnector.record.getTrackedObjectRecordInstance("Attachment");attachment.rawRecord.Body=fileName,attachment.rawRecord.ParentId=$scope.parentRecordId,attachment.rawRecord.Name=fileName,tqCoreConnector.storage.upsert(attachment).then(function(){$scope.onPictureSuccess&&_.isFunction($scope.onPictureSuccess)?$scope.onPictureSuccess(attachment):$scope.broadcastSuccessEvent&&$rootScope.$broadcast(tqDeviceMediaPicture.events.PICTURE_ATTACHMENT_CREATED_SUCCESS,"Attachment")},function(err){$scope.onPictureError&&_.isFunction($scope.onPictureError)?$scope.onPictureError(err):$scope.broadcastErrorEvent&&$rootScope.$broadcast(tqDeviceMediaPicture.events.PICTURE_ERROR,err)})}else $scope.onPictureSuccess&&_.isFunction($scope.onPictureSuccess)?$scope.onPictureSuccess(fileName):$scope.broadcastSuccessEvent&&$rootScope.$broadcast(tqDeviceMediaPicture.events.PICTURE_SUCCESS)},function(err){err===tqCoreConnector.device.media.picture.NO_IMAGE_SELECTED||(err===tqCoreConnector.device.media.picture.PICTURE_NOT_AVAILABLE?tqPopupCriticalError.show({title:"Pictures",message:"Pictures work only on device",okText:"Ok",restart:!1}):$scope.onPictureError&&_.isFunction($scope.onPictureError)?$scope.onPictureError(err):$scope.broadcastErrorEvent&&$rootScope.$broadcast(tqDeviceMediaPicture.events.PICTURE_ERROR,err))})}}}}).service("tqDeviceMediaPicture",function(tqCoreConnector){this.events={PICTURE_ERROR:"tq.media.picture.error",PICTURE_SUCCESS:"tq.media.picture.success",PICTURE_ATTACHMENT_CREATED_SUCCESS:"tq.media.picture.success.attachment"},this.getPicture=function(source){return tqCoreConnector.device.media.picture.getPicture(source)}})}),define("components/list/list",["angular","uiRouter","coreapi","components/list/search/search","components/list/sort/sort","components/list/item/item","components/media/picture/picture"],function(angular){return angular.module("tq.list",["ui.router","tq.coreapi","tq.list.sort","tq.list.search","tq.list.item","tq.media.picture"]).directive("tqList",function($timeout,$templateCache,$compile){return{restrict:"E",templateUrl:"acn-one/acn-ng/components/list/list.tpl.html",scope:{objectApiName:"=",delegateHandle:"@?",onListItemClick:"&?",onPullRefresh:"&?",onBeforeSearch:"&?",pullingText:"@?",where:"=?",orderby:"=?",hasHeader:"&?",searchable:"&?",searchName:"@?",sortable:"&?",swipable:"&?",scrollHeight:"&?",emptyListText:"@"},transclude:!0,controller:"TqListController",link:function(scope,elem,attrs,TqListController,transcludeFn){scope.showInside=!0,scope.showOutside=!0,scope.fitScrollContent=function(){var parentContainer=elem.find(".tq-list-parent-container"),scrollableContent=parentContainer.find(".scroll");parentContainer.height()>scrollableContent.height()&&parentContainer.height(scrollableContent.height()+10)};var isEmptyContent=function(content){return content.context&&content.context.wholeText&&0===content.context.wholeText.trim().length&&content.length<=1};transcludeFn(scope,function(toTransclude){scope.scrollHeight?tplToCompile=$templateCache.get("acn-one/acn-ng/components/list/listwithscroller.tpl.html"):tplToCompile=$templateCache.get("acn-one/acn-ng/components/list/listwithoutscroller.tpl.html");var compiledTpl=$compile(tplToCompile)(scope);elem.find(".tq-list-content").html(compiledTpl),isEmptyContent(toTransclude)||elem.find(".tq-list-items-wrapper").html(toTransclude)}),scope.$watch("where",function(newValue,oldValue){newValue!==oldValue&&scope.refresh()},!0)}}}).service("tqListDelegate",ionic.DelegateService(["refresh","insertNewRecord","removeRecord","refreshWithUpdates"])).controller("TqListController",["$rootScope","$scope","$state","tqCoreConnector","tqDeviceMediaPicture","$timeout","tqListDelegate",function($rootScope,$scope,$state,tqCoreConnector,tqDeviceMediaPicture,$timeout,tqListDelegate){function getQueryBase(){var newQuery={objectApiName:$scope.objectApiName};if($scope.search.keyword){var keyword="%"+$scope.search.keyword+"%",searchWhere={};searchWhere[$scope.searchName]={$like:keyword};var whereObject;whereObject=$scope.where?{$and:[$scope.where,searchWhere]}:searchWhere,newQuery.where=whereObject}else $scope.where&&(newQuery.where=$scope.where);return $scope.orderby&&(newQuery.orderby=$scope.orderby),newQuery}function getObjectQuery(offset,limit){var newQuery=getQueryBase();return newQuery.offset=offset,newQuery.limit=limit,newQuery}$scope.orderby=$scope.orderby?$scope.orderby:tqCoreConnector.metadata.getNameField($scope.objectApiName),$scope.onListItemClick=angular.isFunction($scope.onListItemClick)?$scope.onListItemClick():null,$scope.swipable=angular.isFunction($scope.swipable)?$scope.swipable():!0,$scope.searchable=angular.isFunction($scope.searchable)?$scope.searchable():!0,$scope.sortable=angular.isFunction($scope.sortable)?$scope.sortable():!1,$scope.hasHeader=angular.isFunction($scope.hasHeader)?$scope.hasHeader():!0,$scope.scrollHeight=angular.isFunction($scope.scrollHeight)?$scope.scrollHeight():null,$scope.pullingText=$scope.pullingText||"Pull to refresh",$scope.searchName=$scope.searchName||"Name";var that=this,deregisterInstance=null;_.isEmpty($scope.delegateHandle)||(deregisterInstance=tqListDelegate._registerInstance(this,$scope.delegateHandle)),$scope.objectNameField=tqCoreConnector.metadata.getNameField($scope.objectApiName),$scope.search={keyword:""},$scope._initList=function(){$scope.records=[],$scope.offset=0,$scope.limit=10,$scope.moreDataCanBeLoaded=!0,$scope.queryDeferred=null},$scope.limit=10,$scope._initList(),$rootScope.$on(tqDeviceMediaPicture.events.PICTURE_ATTACHMENT_CREATED_SUCCESS,function(event,objectApiName){objectApiName===$scope.objectApiName&&$scope.refresh()}),$scope.loadMore=function(doRefresh){if($scope.moreDataCanBeLoaded||doRefresh){var offset=doRefresh?0:$scope.offset,limit=doRefresh?$scope.offset:$scope.limit;limit<$scope.limit&&(limit=$scope.limit);var newQuery=getObjectQuery(offset,limit),thisDeferred=$scope.queryDeferred=tqCoreConnector.storage.find(newQuery);thisDeferred.then(function(records){if(thisDeferred==$scope.queryDeferred){if(doRefresh){var currentOffset=$scope.offset;$scope._initList(),$scope.offset=currentOffset}records.length>0&&($scope.records=$scope.records.concat(records)),!doRefresh&&records.length<$scope.limit&&($scope.moreDataCanBeLoaded=!1),$timeout(function(){$scope.$apply()}),$scope.queryDeferred=null,$scope.$broadcast("scroll.infiniteScrollComplete"),!$scope.moreDataCanBeLoaded&&$scope.scrollHeight&&$timeout(function(){$scope.fitScrollContent()},400),doRefresh||($scope.offset+=$scope.limit)}},function(err){$scope.moreDataCanBeLoaded=!1,$scope.queryDeferred=null,$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.scrollHeight&&$timeout(function(){$scope.fitScrollContent()},400)})}},$scope.doSearch=function(){try{$scope.onBeforeSearch()}catch(error){}$scope.refresh()},this.refresh=function(startLoadingManually){startLoadingManually===!0?$scope.loadMore(!0):($scope._initList(),$scope.loadMore())},this.insertNewRecord=function(newRecord){$scope.records.unshift(newRecord),$scope.offset++},this.removeRecord=function(record){var recordIndex=_.indexOf($scope.records,record);-1!==recordIndex&&($scope.records.splice(recordIndex,1),$scope.offset--,$scope.$evalAsync())};var smartRecordUpdate=function(record,newVersion){return angular.forEach(newVersion,function(newValue,key){var recordValue=record[key];!_.isObject(newValue)||_.isArray(newValue)||_.isDate(newValue)||!_.isObject(recordValue)||_.isArray(recordValue)||_.isDate(recordValue)?record[key]!=newValue&&(record[key]=newValue):smartRecordUpdate(recordValue,newValue)}),record};this.refreshWithUpdates=function(updatesMap){if(!_.isEmpty(updatesMap)){var updatedCount=0,updatedIds=[];for(var key in updatesMap)_.isArray(updatesMap[key])&&(updatedCount+=updatesMap[key].length,updatedIds=_.union(updatedIds,updatesMap[key]));if(0!==updatedCount){if(updatedCount>=100)return this.refresh(!0);var self=this,query=getQueryBase();_.isEmpty(query.where)?query.where={Id:{$in:updatedIds}}:query.where={$and:[query.where,{Id:{$in:updatedIds}}]},tqCoreConnector.storage.find(query).then(function(result){if(_.isArray(result)&&result.length>$scope.records.length)return self.refresh(!0);var index,key,recordIndexMap={};for(index=0;index<$scope.records.length;index++)recordIndexMap[$scope.records[index].rawRecord.Id]=index;if(!_.isEmpty(result)&&_.isArray(result)){var resultMap={};for(index=0;index<result.length;index++)resultMap[result[index].rawRecord.Id]=result[index];if(!_.isEmpty(updatesMap.deleted))for(index=0;index<updatesMap.deleted.length;index++){var deletedId=updatesMap.deleted[index];if(null!=recordIndexMap[deletedId]){for(key in recordIndexMap)recordIndexMap[key]>recordIndexMap[deletedId]&&recordIndexMap[key]--;$scope.records.splice(recordIndexMap[deletedId],1),$scope.offset--,delete recordIndexMap[deletedId]}}if(!_.isEmpty(updatesMap.updated))for(index=0;index<updatesMap.updated.length;index++){var updatedId=updatesMap.updated[index];null!=recordIndexMap[updatedId]&&null!=resultMap[updatedId]&&smartRecordUpdate($scope.records[recordIndexMap[updatedId]],resultMap[updatedId])}if(!_.isEmpty(updatesMap.created)){var localIdsMap=tqCoreConnector.sync.getLocalIdsForServerIds(updatesMap.created);for(index=0;index<updatesMap.created.length;index++){var createdId=updatesMap.created[index],recordIndex=null;if(null!=resultMap[createdId])if(null!=recordIndexMap[createdId]?recordIndex=recordIndexMap[createdId]:null!=recordIndexMap[localIdsMap[createdId]]&&(recordIndex=recordIndexMap[localIdsMap[createdId]]),null!=recordIndex)smartRecordUpdate($scope.records[recordIndex],resultMap[createdId]);else{$scope.records.unshift(resultMap[createdId]),$scope.offset++;for(key in recordIndexMap)recordIndexMap[key]++;recordIndexMap[createdId]=0}}}$scope.$evalAsync()}})}}},$scope.refresh=function(){that.refresh()},$scope.cancelSearch=function(){$scope.search.keyword="",$scope.doSearch()},$scope.sort=function(){$scope.orderBy===$scope.objectNameField+" ASC"?$scope.orderBy=$scope.objectNameField+" DESC":$scope.orderBy=$scope.objectNameField+" ASC",$scope.doSearch()},$scope.click=function(index,record){$scope.onListItemClick&&_.isFunction($scope.onListItemClick)?$scope.onListItemClick(record):$state.go("tqdetails",{objectapiname:$scope.objectApiName,recordid:record.rawRecord.Id})},$scope.editRecord=function(record){$state.go("tqedit",{objectapiname:$scope.objectApiName,recordid:record.rawRecord.Id})},$scope.swipe=function(action,index){switch(action){case"remove":$scope.removeRecord($scope.records[index]);break;case"edit":$scope.editRecord($scope.records[index])}},$scope.removeRecord=function(record){tqCoreConnector.storage.remove(record).then(function(){var index=$scope.records.indexOf(record);$scope.records.splice(index,1);var indexToUpload=$scope.offset-1,oneRecordQuery=getObjectQuery(indexToUpload,1);$scope.offset--,tqCoreConnector.storage.find(oneRecordQuery).then(function(result){result.length>0&&($scope.records.push(result[0]),$scope.offset++)},function(err){})},function(err){})},$scope.pullRefresh=function(){$scope.onPullRefresh?$scope.onPullRefresh().then(function(){$scope.refresh(),$scope.$broadcast("scroll.refreshComplete")},function(err){$scope.$broadcast("scroll.refreshComplete")}):($scope.refresh(),$scope.$broadcast("scroll.refreshComplete"))},$scope.loadMore(),$scope.$on("$destroy",function(){_.isEmpty(deregisterInstance)||deregisterInstance()})}])}),define("components/list/attachment/attachment",["angular","coreapi","components/list/list","components/media/picture/picture","components/popup/criticalerror/criticalerror"],function(angular){return angular.module("tq.list.attachment",["ionic","tq.coreapi","tq.media.picture","tq.list","tq.popup.criticalerror"]).directive("tqListAttachment",function(){return{restrict:"E",templateUrl:"acn-one/acn-ng/components/list/attachment/attachment.tpl.html",scope:{parentRecordId:"=",searchable:"&?",hasHeader:"&?",headerLabel:"@?",scrollHeight:"&?"},link:function(scope){scope.relatedObjectApiName="Attachment",scope.$watch("parentRecordId",function(newValue,oldValue){newValue!==oldValue&&(scope.relatedParentRecordId=newValue)},!0)},controller:function($scope,tqCoreConnector,tqPopupCriticalError,$ionicLoading){$scope.searchable=angular.isDefined($scope.searchable())?$scope.searchable():!1,$scope.hasHeader=angular.isDefined($scope.hasHeader())?$scope.hasHeader():!0,$scope.headerLabel=$scope.headerLabel?$scope.headerLabel:"Attachments",$scope.scrollHeight=$scope.scrollHeight()?$scope.scrollHeight():null,$scope.relatedParentRecordId=$scope.parentRecordId,$scope.openFile=function(record){tqCoreConnector.device.platform.isDevice()?($ionicLoading.show({template:"Loading..."}),tqCoreConnector.device.file.openFile(record).then(function(){$ionicLoading.hide()},function(err){$ionicLoading.hide(),err===tqCoreConnector.device.connection.OFFLINE?$scope.showErrorMsg("Open of a remote file is available only when online"):err===tqCoreConnector.device.file.LOAD_FILE_FROM_SERVER_ERROR?$scope.showErrorMsg("Error while downloading the file. Try again"):$scope.showErrorMsg("Generic error. Contact your admin")})):$scope.showErrorMsg("Attachments work only on device")},$scope.showErrorMsg=function(message){tqPopupCriticalError.show({title:"Open File",message:message,okText:"Ok",restart:!1})}}}})}),define("acnNg/showroom/showroom",["angular","uiRouter","coreapi","components/lazysrc/lazysrc","components/list/related/related","components/list/attachment/attachment"],function(angular){return angular.module("tq.showroom",["ui.router","tq.coreapi","tq.lazysrc","tq.list.related","tq.list.attachment"]).config(function($stateProvider){$stateProvider.state("tqshowroom",{url:"/tqshowroom",controller:"TqShowroomCtrl",templateUrl:"acn-one/acn-ng/showroom/showroom.tpl.html",data:{pageTitle:"Showroom"}})}).controller("TqShowroomCtrl",function($scope,tqCoreConnector,$timeout){$scope.headerTitle="Showroom",$scope.relatedObjectApiName="Attachment",$scope.relatedObjectWhere={Name:{$eq:"amazing.png"}};var query={objectApiName:"Contact",where:{Id:{$eq:"0032000001JsZCqAAN"}}};tqCoreConnector.storage.find(query).then(function(result){$scope.parentRecordId=result[0].rawRecord.Id})})}),define("acnNg/objects/objects",["angular","uiRouter","coreapi","acnNg/showroom/showroom"],function(){return angular.module("tq.objects",["ui.router","tq.coreapi","tq.showroom"]).config(function($stateProvider){$stateProvider.state("tqobjects",{url:"/tqobjects",controller:"TqObjectsCtrl",templateUrl:"acn-one/acn-ng/objects/objects.tpl.html",data:{pageTitle:"Objects"}})}).controller("TqObjectsCtrl",function($scope,tqCoreConnector){$scope.objects=[],tqCoreConnector.getTrackedObjectsList().then(function(objects){$scope.objects=objects})})}),define("acnNg/records/records",["angular","uiRouter","coreapi","components/list/list","components/list/item/item"],function(angular){return angular.module("tq.records",["ui.router","tq.coreapi","tq.list","tq.list.item"]).config(function($stateProvider){$stateProvider.state("tqrecords",{url:"/tqrecords/:objectapiname",controller:"TqRecordsCtrl",templateUrl:"acn-one/acn-ng/records/records.tpl.html",data:{pageTitle:"Records"}})}).controller("TqRecordsCtrl",function($scope,$state,$stateParams,tqCoreConnector){$scope.objectApiName=$stateParams.objectapiname,$scope.objectLabel=tqCoreConnector.metadata.getTrackedObjectLabel($scope.objectApiName),$scope.addNewRecord=function(){var params={objectapiname:$scope.objectApiName,prepopulationRawRecordMap:$scope.getPrepopulationRawRecordMapAsParam({})};$state.go("tqnew",params)},$scope.getPrepopulationRawRecordMapAsParam=function(prepopulationRawRecordMap){return JSON.stringify(prepopulationRawRecordMap)}})}),define("components/recorddetail/recorddetail",["angular","coreapi"],function(angular){return angular.module("tq.recorddetail",[]).directive("tqRecorddetail",function(){return{restrict:"E",templateUrl:"acn-one/acn-ng/components/recorddetail/recorddetail.tpl.html",scope:{record:"=",fieldSet:"&?"},link:function(scope){scope.$watch("record",function(newValue,oldValue){newValue!==oldValue&&scope.displayRecord()},!0)},controller:function($scope,tqCoreConnector,$ionicScrollDelegate,$timeout,$state){$scope.PARENT_STORE_NOT_SYNC=-2,$scope.PARENT_RECORD_NOT_SYNC=-1,$scope.displayFieldSet=[],$scope.generateDisplayFieldSet=function(){var customRequestedFieldSet=null;customRequestedFieldSet=_.isString($scope.fieldSet())?tqCoreConnector.metadata.getTrackedObjectFieldSet($scope.objectApiName,$scope.fieldSet()):$scope.fieldSet(),_.isNull($scope.fieldSet())||_.isUndefined($scope.fieldSet())||!customRequestedFieldSet||_.isEmpty($scope.fieldSet())?$scope.displayFieldSet=tqCoreConnector.metadata.getTrackedObjectMetadata($scope.objectApiName).detailFieldSet:(_.forEach(customRequestedFieldSet,function(fieldApiName){$scope.isDisplayable(fieldApiName)&&$scope.displayFieldSet.push(fieldApiName)}),_.isEmpty($scope.displayFieldSet)&&($scope.displayFieldSet=tqCoreConnector.metadata.getTrackedObjectMetadata($scope.objectApiName).detailFieldSet))},$scope.displayRecord=function(){$scope.objectApiName=$scope.record.objectApiName,$scope.recordLabelsMap=tqCoreConnector.metadata.getFieldApiNameLabelsMap($scope.record,$scope.objectApiName),$scope.parentRecordsMap={},$scope.parentRecordError=!1,$scope.generateDisplayFieldSet(),tqCoreConnector.storage.generateParentRecordMap($scope.record).then(function(parentRecordMap){$scope.parentRecordsMap=parentRecordMap,$timeout(function(){$scope.$apply()})},function(err){})},$scope.showParentDetails=function(fieldApiName){var contentScroller=$ionicScrollDelegate.$getByHandle("ionContentScrollHandle");
tqCoreConnector.storage.storeExist($scope.parentRecordsMap[fieldApiName].parentRecordObjectApiName)?"Information not available"==$scope.parentRecordsMap[fieldApiName].parentRecordName?($scope.parentRecordError=$scope.PARENT_RECORD_NOT_SYNC,contentScroller.scrollTop(!0)):$state.go("tqdetails",{objectapiname:$scope.parentRecordsMap[fieldApiName].parentRecordObjectApiName,recordid:$scope.parentRecordsMap[fieldApiName].parentRecordId}):($scope.parentRecordError=$scope.PARENT_STORE_NOT_SYNC,contentScroller.scrollTop(!0)),$timeout(function(){$scope.parentRecordError=!1},3e3)},$scope.isDisplayable=function(fieldApiName){return tqCoreConnector.metadata.isDisplayable($scope.objectApiName,fieldApiName)},$scope.getFieldType=function(fieldApiName){return fieldApiName?tqCoreConnector.metadata.getFieldMetadata($scope.objectApiName,fieldApiName).type:void 0},$scope.openURL=function(url){url="https://"+url,window.device?window.open(url,"_system","location=yes"):window.open(url)}}}})}),define("acnNg/details/details",["angular","ionic","uiRouter","coreapi","components/recorddetail/recorddetail","components/list/related/related","components/list/attachment/attachment"],function(angular){return angular.module("tq.details",["ui.router","tq.coreapi","ionic","tq.recorddetail","tq.list.related","tq.list.attachment"]).config(function($stateProvider){$stateProvider.state("tqdetails",{url:"/tqdetails/:objectapiname/:recordid",controller:"TqDetailsCtrl",templateUrl:function(attributes){return"acn-one/acn-ng/details/details.tpl.html"},data:{pageTitle:"Details"}})}).controller("TqDetailsCtrl",function($scope,$state,$location,$stateParams,$ionicActionSheet,tqCoreConnector,$ionicScrollDelegate,$timeout){$scope.objectApiName=$stateParams.objectapiname,$scope.objectLabel=tqCoreConnector.metadata.getTrackedObjectLabel($scope.objectApiName),$scope.objectNameField=tqCoreConnector.metadata.getNameField($scope.objectApiName),$scope.record={},$scope.headerTitle="",$scope.recordId=$stateParams.recordid,tqCoreConnector.storage.storeExist($scope.objectApiName)?tqCoreConnector.storage.findRecordById($scope.objectApiName,$scope.recordId).then(function(record){$scope.record=record[0],$scope.headerTitle=$scope.record.rawRecord[$scope.objectNameField]||$scope.objectLabel,$timeout(function(){$scope.$apply()})}):tqCoreConnector.logger.warn({message:"object "+$scope.objectApiName+" is not synchronized"}),$scope.showEditSheet=function(){$ionicActionSheet.show({buttons:[{text:"Edit"}],destructiveText:"Delete",destructiveButtonClicked:function(){return tqCoreConnector.storage.remove($scope.record).then(function(){$state.go("tqrecords",{objectapiname:$scope.objectApiName})},function(err){}),!0},cancelText:"Cancel",cancel:function(){},buttonClicked:function(index){return 0===index&&$state.go("tqedit",{objectapiname:$scope.objectApiName,recordid:$scope.recordId}),!0}})}})}),define("acnNg/synccenter/synccenter",["angular","uiRouter","coreapi"],function(){return angular.module("tq.synccenter",["ui.router","tq.coreapi"]).config(function($stateProvider){$stateProvider.state("tqsynccenter",{url:"/tqsynccenter",controller:"TqSyncCtrl",templateUrl:"acn-one/acn-ng/synccenter/synccenter.tpl.html",data:{pageTitle:"Sync"}})}).controller("TqSyncCtrl",function($rootScope,$scope,$timeout,$state,tqCoreConnector){$scope.notForcedOffline=!tqCoreConnector.appstatus.getIsOfflineForced(),$scope.errorMessage=tqCoreConnector.syncstatus.getSyncErrorMessage(),$scope.showRefreshAuthBtn=!1,$scope.showFeedbackBtn=!1,$scope.calculateErrorSection=function(){var appstatus=tqCoreConnector.appstatus.getErrorStatus();appstatus.action===tqCoreConnector.appstatus.PERFORM_LOGOUT?($scope.errorMessage="Your access has expired. It is required to re-authenticate in order to continue using the app. Your data is not going to be lost",$scope.showRefreshAuthBtn=!0):($scope.errorMessage=tqCoreConnector.syncstatus.getSyncErrorMessage(),$scope.showFeedbackBtn=!0)},$scope.submitFeedback=function(){$state.go("tqfeedback")},$scope.toggleForceOffline=function(){tqCoreConnector.appstatus.toggleForceOffline(),$scope.notForcedOffline=!$scope.notForcedOffline};var reloadList=function(){$scope.load()};tqCoreConnector.schedule.onJobSuccess("Sync",reloadList),tqCoreConnector.schedule.onJobFail("Sync",reloadList);var unwatchErrorMessage=$rootScope.$watch("syncErrorMessage",function(){$scope.calculateErrorSection(),$timeout(function(){$scope.$apply()})});$scope.isSyncing=function(currentSyncStatus){return currentSyncStatus===tqCoreConnector.syncstatus.SYNCHRONIZING},$scope.sync=function(){tqCoreConnector.appstatus.isOnline()&&tqCoreConnector.sync.startSync()},$scope.edit=function(syncItem){$state.go("tqedit",{objectapiname:syncItem.objectApiName,recordid:syncItem.id})},$scope.reset=function(syncItem,index){tqCoreConnector.storage.findRecordById(syncItem.objectApiName,syncItem.id,!0).then(function(recordList){var recordToReset=recordList[0];tqCoreConnector.storage.resetLocalChanges(recordToReset).then(function(){index||(index=$scope.syncItemList.indexOf(syncItem)),$scope.syncItemList.splice(index,1)},function(err){})},function(err){})},$scope.load=function(){return $scope.syncItemList=[],tqCoreConnector.sync.getQueue().then(function(recordList){$scope.syncItemList=[],_.each(recordList,function(record){var status;status=record.rawRecord.IsDeleted===!0?"Deleted":"AWAITING_SYNCHRONISATION"===record.syncStatus?"Pending":"Error";var nameField=tqCoreConnector.metadata.getNameField(record.objectApiName),syncItem=record;syncItem.name=nameField?record.rawRecord[nameField]:record.objectApiName,syncItem.status=status,$scope.syncItemList.push(syncItem),$timeout(function(){$scope.$apply()})})})},$scope.load(),$scope.calculateErrorSection(),$scope.$on("$destroy",function(){unwatchErrorMessage(),tqCoreConnector.schedule.offJobSuccess("Sync",reloadList),tqCoreConnector.schedule.offJobFail("Sync",reloadList)}),$scope.appVersion=window.appVersion,$scope.showAlert=function(record){$scope.record=record;var alertPopup=$ionicPopup.alert({scope:$scope,template:"{{record|json}}"});alertPopup.then(function(){record.errorList.length>0&&tqCoreConnector.logger.info({namespace:"ticket-completion",labels:"synccenter-confirm-alert",details:record.errorList,message:record.name})})}})}),define("components/input/lookup/lookup",["angular","coreapi","components/list/list","components/list/item/item"],function(angular){return angular.module("tq.input.lookup",["tq.coreapi","tq.list","tq.list.item"]).controller("TqLookupCtrl",function($scope,$ionicModal,tqCoreConnector,$timeout){$scope.fieldValue=$scope.record.rawRecord[$scope.fieldApiName],$scope.displayValue=null,$scope.getDisplayValue=function(){tqCoreConnector.storage.generateParentRecordMap($scope.record).then(function(parentRecordMap){$scope.parentRecordsMap=parentRecordMap,parentMapEntry=$scope.parentRecordsMap[$scope.fieldApiName],$scope.displayValue=parentMapEntry?parentMapEntry.parentRecordName:null,$timeout(function(){$scope.$apply()})},function(err){})},$scope.$watch("fieldValue",function(newValue,oldValue){$scope.record.rawRecord[$scope.fieldApiName]=newValue,$scope.getDisplayValue()}),$scope.parentObjectApiName=tqCoreConnector.metadata.getFieldMetadata($scope.record.objectApiName,$scope.fieldApiName).referenceTo[0],$scope.getHeaderLabel=function(){return tqCoreConnector.metadata.getTrackedObjectLabel($scope.parentObjectApiName,!0)},$scope.openModal=function(){tqCoreConnector.storage.storeExist($scope.parentObjectApiName)?$scope.modal?$scope.modal.show():$ionicModal.fromTemplateUrl("acn-one/acn-ng/components/input/lookup/lookupmodal.tpl.html",{scope:$scope,animation:"slide-in-up",backdropClickToClose:!1,focusFirstInput:!1}).then(function(modal){$scope.modal=modal,$scope.closeModal=function(){$scope.modal.remove(),$scope.modal=null},$scope.clearValue=function(){$scope.setPickedValue(null)},$scope.setPickedValue=function(tqRecord){$scope.fieldValue=tqRecord.rawRecord.Id,$scope.closeModal()},$scope.modal.show()}):void 0!==$scope.errorList&&null!==$scope.errorList&&$scope.errorList.push($scope.fieldApiName+" refers to an Object not synchronized. Contact your admin in order to enable it")}}).directive("tqInputLookup",function(){return{restrict:"E",templateUrl:"acn-one/acn-ng/components/input/lookup/lookup.tpl.html",scope:{fieldApiName:"=",record:"=",errorList:"=?"}}})}),define("components/input/select/select",["angular","uiRouter","coreapi","components/list/search/search","components/list/sort/sort","components/list/item/item"],function(angular){return angular.module("tq.input.select",["ui.router","tq.coreapi","tq.list.search","tq.list.sort","tq.list.item"]).directive("tqInputSelect",function(){return{restrict:"E",replace:"true",templateUrl:"acn-one/acn-ng/components/input/select/select.tpl.html",scope:{itemList:"=",selectedItem:"=",itemChange:"&",sortable:"=",objectApiName:"&"},controller:function($scope){$scope.objectApiName=$scope.objectApiName(),$scope.reverse=!1,$scope.search={keyword:""},$scope.sort=function(){$scope.reverse=!$scope.reverse},$scope.isSelected=function(item){return item===$scope.selectedItem},$scope.click=function(item){$scope.selectedItem=item,$scope.itemChange()}}}})}),define("components/input/multiselect/multiselect",["angular","uiRouter","coreapi","components/list/search/search","components/list/sort/sort","components/list/item/item"],function(angular){return angular.module("tq.input.multiselect",["ui.router","tq.coreapi","tq.list.search","tq.list.sort","tq.list.item"]).directive("tqInputMultiselect",function(){return{restrict:"E",replace:"true",templateUrl:"acn-one/acn-ng/components/input/multiselect/multiselect.tpl.html",scope:{itemList:"=",selectedItems:"=",done:"&",cancel:"&",sortable:"=",objectApiName:"&"},controller:function($scope){$scope.objectApiName=$scope.objectApiName(),$scope.reverse=!1,$scope.search={keyword:""},$scope.isSelected=function(item){return _.contains($scope.selectedItems,item)},$scope.sort=function(){$scope.reverse=!$scope.reverse},$scope.click=function(selectedItem){$scope.selectedItems.indexOf(selectedItem)>-1?$scope.selectedItems.splice($scope.selectedItems.indexOf(selectedItem),1):$scope.selectedItems.push(selectedItem)}}}})}),define("components/input/date/date",["angular"],function(angular){return angular.module("tq.input.date",[]).directive("tqInputDate",function(){return{restrict:"E",scope:{date:"=",dateFormat:"@?"},templateUrl:"acn-one/acn-ng/components/input/date/date.tpl.html",controller:function($scope,$filter){$scope.$watch("$scope.date",function(){var dateValue=new Date($scope.date);_.isDate(dateValue)&&!_.isNaN(dateValue.getTime())&&($scope.formattedDate=$filter("date")(dateValue,$scope.format))}),$scope.getPlaceholder=function(){return $scope.format=$scope.dateFormat||"yyyy-MM-dd",$scope.format.toLowerCase()},$scope.dateChanged=function(){""===$scope.formattedDate?$scope.date=null:$scope.date=new Date($scope.formattedDate)}}}})}),define("components/input/datetime/datetime",["angular"],function(angular){return angular.module("tq.input.datetime",[]).directive("tqInputDatetime",function(){return{restrict:"E",scope:{date:"="},templateUrl:"acn-one/acn-ng/components/input/datetime/datetime.tpl.html",controller:function($scope,$filter){$scope.$watch("$scope.date",function(){if($scope.date){var dateValue=new Date($scope.date);_.isDate(dateValue)&&!_.isNaN(dateValue.getTime())&&($scope.timezone=$scope.date.toString().split(" ").splice(5,2),$scope.formattedDate=$filter("date")($scope.date,"yyyy-MM-ddTHH:mm:ss"))}else $scope.formattedDate=""}),$scope.dateChanged=function(){if(""===$scope.formattedDate)$scope.date=null;else{var date=$scope.formattedDate.split("T")[0].split("-").join("/"),time=$scope.formattedDate.split("T")[1],datetime=date+" "+time;$scope.dateWithDefaultTimezone=new Date(datetime).toString().split(" "),$scope.dateWithDefaultTimezone.splice(5,2),$scope.date=new Date($scope.dateWithDefaultTimezone.concat($scope.timezone).join(" "))}}}}})}),define("acnNg/edit/edit",["angular","ionic","uiRouter","coreapi","components/input/lookup/lookup","components/input/select/select","components/input/multiselect/multiselect","components/input/date/date","components/input/datetime/datetime"],function(angular){return angular.module("tq.edit",["ui.router","tq.coreapi","ionic","tq.input.lookup","tq.input.select","tq.input.multiselect","tq.input.date","tq.input.datetime"]).config(function($stateProvider){$stateProvider.state("tqnew",{url:"/tqnew/:objectapiname/:prepopulationRawRecordMap",controller:"TqEditCtrl",templateUrl:"acn-one/acn-ng/edit/edit.tpl.html",data:{pageTitle:"Edit"}}).state("tqedit",{url:"/tqedit/:objectapiname/:recordid",controller:"TqEditCtrl",templateUrl:"acn-one/acn-ng/edit/edit.tpl.html",data:{pageTitle:"Edit"}})}).controller("TqEditCtrl",function($scope,$state,$stateParams,$ionicPopup,$ionicModal,$window,tqCoreConnector,$ionicScrollDelegate){$scope.objectApiName=$stateParams.objectapiname,$scope.objectLabel=tqCoreConnector.metadata.getTrackedObjectLabel($scope.objectApiName),$scope.recordLabelsMap={},$scope.errorList=[],$scope.headerTitle="",$scope.prepopulationRawRecordMap=$stateParams.prepopulationRawRecordMap,$scope.objectNameField=tqCoreConnector.metadata.getNameField($scope.objectApiName);var objectMetadata=tqCoreConnector.metadata.getTrackedObjectMetadata($scope.objectApiName);$stateParams.recordid&&-1===$stateParams.recordid.indexOf("Local")?$scope.displayFieldSet=objectMetadata.editFieldSet:$scope.displayFieldSet=objectMetadata.createFieldSet,$scope.prepopulateRawRecord=function(){if(void 0!==$scope.prepopulationRawRecordMap){var prepopulationRawRecordMap=JSON.parse($scope.prepopulationRawRecordMap);_.isEmpty(prepopulationRawRecordMap)||_.forEach(prepopulationRawRecordMap,function(fieldValue,fieldApiName){tqCoreConnector.metadata.getFieldMetadata($scope.objectApiName,fieldApiName)&&(("date"==$scope.getFieldType(fieldApiName)||"datetime"==$scope.getFieldType(fieldApiName))&&(fieldValue=new Date(fieldValue)),$scope.record.rawRecord[fieldApiName]=fieldValue)})}},$scope.getFieldType=function(fieldApiName){return tqCoreConnector.metadata.getFieldMetadata($scope.objectApiName,fieldApiName).type},$scope.isEdit=function(){return void 0!==$stateParams.recordid&&-1===$stateParams.recordid.indexOf("Local")},$stateParams.recordid?tqCoreConnector.storage.findRecordById($scope.objectApiName,$stateParams.recordid).then(function(record){$scope.record=record[0],$scope.errorList=$scope.record.errorList,$scope.recordLabelsMap=tqCoreConnector.metadata.getFieldApiNameLabelsMap($scope.record,$scope.objectApiName),$scope.headerTitle=$scope.record.rawRecord[$scope.objectNameField]||"Edit "+$scope.objectLabel}):($scope.record=tqCoreConnector.record.getTrackedObjectRecordInstance($scope.objectApiName),$scope.prepopulateRawRecord(),$scope.recordLabelsMap=tqCoreConnector.metadata.getFieldApiNameLabelsMap($scope.record,$scope.record.objectApiName),$scope.headerTitle="New "+$scope.objectLabel),$scope.isFieldRequired=function(fieldApiName){return tqCoreConnector.metadata.getTrackedObjectRequiredFieldsMap($scope.objectApiName)[fieldApiName]},$scope.isUpdatable=function(fieldApiName){return tqCoreConnector.metadata.isUpdatable($scope.objectApiName,fieldApiName)},$scope.isCreatable=function(fieldApiName){return tqCoreConnector.metadata.isCreatable($scope.objectApiName,fieldApiName)},$scope.hasError=function(){return tqCoreConnector.record.hasError($scope.record)},$scope.openModal=function(key){$scope.picklistItems=tqCoreConnector.metadata.getActivePicklistValues($scope.objectApiName,key);var fieldLabel=$scope.recordLabelsMap[key],templatePrefix='<ion-modal-view><ion-header-bar class="tq-modal-header"><div class="buttons"><button class="button" ng-click="closeModal()">Cancel</button></div><h1 class="title">'+fieldLabel+'</h1></ion-header-bar><ion-content><tq-input-select sortable="false" object-api-name="\''+$scope.objectApiName+"'\" ",templatePostfix=' item-change="closeModal()"></tq-input-select></ion-content></ion-modal-view>',templatePicklist='item-list="picklistItems" selected-item="record.rawRecord[\''+key+"']\"",template=templatePrefix+templatePicklist+templatePostfix;$scope.modal=$ionicModal.fromTemplate(template,{scope:$scope,backdropClickToClose:!1,animation:"slide-in-up"}),$scope.modal.show()},$scope.closeModal=function(){$scope.modal.hide()},$scope.multi={},$scope.multi.openModal=function(key){$scope.multi.key=key,$scope.multi.itemList=tqCoreConnector.metadata.getActivePicklistValues($scope.objectApiName,key),$scope.multi.selectedItems=$scope.record.rawRecord[key]?$scope.record.rawRecord[key].split(";"):[];var fieldLabel=$scope.recordLabelsMap[key],templatePrefix='<ion-modal-view><ion-header-bar class="tq-modal-header"><div class="buttons"><button class="button" ng-click="multi.cancel()">Cancel</button></div><h1 class="title">'+fieldLabel+'</h1><div class="buttons"><button class="button" ng-click="multi.done()">Done</button></div></ion-header-bar><ion-content><tq-input-multiselect sortable="false" object-api-name="\''+$scope.objectApiName+"'\" ",templatePostfix=' done="done()" cancel="cancel()"></tq-input-multiselect></ion-content></ion-modal-view>',templatePicklist='item-list="multi.itemList" selected-items="multi.selectedItems"',template=templatePrefix+templatePicklist+templatePostfix;$scope.multi.modal=$ionicModal.fromTemplate(template,{scope:$scope,backdropClickToClose:!1,animation:"slide-in-up"}),$scope.multi.modal.show()},$scope.multi.done=function(){var orderedSelectedItems=_.filter($scope.multi.itemList,function(item){return _.contains($scope.multi.selectedItems,item)});orderedSelectedItems.length>0?$scope.record.rawRecord[$scope.multi.key]=orderedSelectedItems.join(";"):$scope.record.rawRecord[$scope.multi.key]=null,$scope.multi.modal.hide()},$scope.multi.cancel=function(){$scope.multi.modal.hide()},$scope.save=function(){var validationErrors=tqCoreConnector.storage.validateRecord($scope.record);0===validationErrors.length?tqCoreConnector.storage.upsert($scope.record).then(function(){$window.history.back()}):($scope.errorList=validationErrors,$ionicScrollDelegate.$getByHandle("ionContentScrollHandle").scrollTop(!0))}})}),define("acnNg/app",["angular","templatesApp","templatesCommon","uiRouter","coreapi","components/bootstrap/bootstrap","components/auth/auth","acnNg/home/home","acnNg/login/login","acnNg/activation/activation","acnNg/feedback/feedback","acnNg/chatter/chatter","acnNg/objects/objects","acnNg/records/records","acnNg/details/details","acnNg/synccenter/synccenter","acnNg/edit/edit"],function(){return angular.module("acnone",["templates-app","templates-common","ui.router","tq.coreapi","tq.bootstrap","tq.auth","tq.home","tq.login","tq.activation","tq.objects","tq.records","tq.details","tq.synccenter","tq.edit","tq.feedback","tq.chatter"]).constant("tqScreenBreakpoints",{GRID_RESPONSIVE_SM_BREAK:567}).config(function($compileProvider){var isDevEnvironment="develop"===ENV_VARS.deploymentEnv;window.console.info("Environment:",ENV_VARS.deploymentEnv),window.console.info("DebugInfoEnabled: ",isDevEnvironment),$compileProvider.debugInfoEnabled(isDevEnvironment)}).run(function($rootScope,$location,$state,$timeout,$ionicPopup,tqCoreConnector,tqPopupCriticalError,tqRedirector,tqScreenBreakpoints,tqAuth,tqBootstrap,tqLoading,$window){function isPhone(){$("body").width()<tqScreenBreakpoints.GRID_RESPONSIVE_SM_BREAK?$rootScope.isPhone=!0:$rootScope.isPhone=!1}tqBootstrap.start(),$rootScope.offlineForced=tqCoreConnector.appstatus.getIsOfflineForced(),$rootScope.backButtonHidden=!1,$rootScope.showFooter=!1,$rootScope.online=tqCoreConnector.appstatus.isOnline(),tqCoreConnector.appstatus.connectionStatusChanged(function(isOnline){$rootScope.online=isOnline,$rootScope.$evalAsync()});var animation=tqCoreConnector.config.getEnableAnimations(),view=document.getElementsByTagName("ion-nav-view")[0];animation||view.setAttribute("animation","no-animation");var updateSideMenuWidth=function(){var totalMinusLeftMargin=$window.innerWidth-50;$rootScope.sideMenuWidth=275>totalMinusLeftMargin?275:totalMinusLeftMargin,$rootScope.sideMenuWidth=$rootScope.sideMenuWidth>310?310:$rootScope.sideMenuWidth,window.innerWidth&&$rootScope.sideMenuWidth>window.innerWidth&&($rootScope.sideMenuWidth=window.innerWidth)};angular.element($window).resize(updateSideMenuWidth),angular.element($window).resize(isPhone).trigger("resize"),tqCoreConnector.syncstatus.onSyncStatusChange(function(eventData){$rootScope.syncStatus=eventData.syncStatus,eventData.successType===tqCoreConnector.sync.type.ACTIVATION?(tqRedirector.saveCurrentState(),$location.path("/tqactivation")):($rootScope.syncErrorMessage=eventData.syncErrorMessage,$rootScope.recordErrorCount=eventData.recordErrorCount,$rootScope.pendingRecordCount=eventData.pendingRecordCount),$rootScope.$evalAsync()}),$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){tqRedirector.processRequset(event,toState,toParams,fromState,fromParams),$rootScope.showAppLayout=$rootScope.showFooter=!("tqlogin"==toState.name||"tqhome"==toState.name||"tqactivation"==toState.name||"register"==toState.name)}),$rootScope.logout=function(){tqAuth.logout()},$rootScope.refreshAuth=function(){tqCoreConnector.session.refreshAuth()},$rootScope.ENV_VARS=window.ENV_VARS,$rootScope.appVersion=window.appVersion,$rootScope.frameworkVersion=window.frameworkVersion,$rootScope.rootTemplate="acn-one/acn-ng/index.tpl.html",tqCoreConnector.logger.log("frameworkVersion: "+$rootScope.frameworkVersion),$rootScope.localeShortDateFormat=function(date){return moment(date).format("L")},$rootScope.localeFullDateFormat=function(date){return moment(date).format("LLL")},$rootScope.localeDateFormat=function(date,locale){return moment(date).format(locale)}}).controller("AcnCtrl",function(){})}),define("acnNg/components/sticky/sticky",["angular"],function(angular){return angular.module("ao.ion-sticky",[]).directive("acnIonSticky",function($ionicPosition,$compile,$timeout){var ACN_STICKY_CLONE="acn-sticky-clone",createStickyClone=function(theElement){var theClone=theElement.clone();return theClone[0].className+=" ng-hide ".concat(ACN_STICKY_CLONE),theClone},compileStickyClone=function(theClone,theScope,theScroller){var scrollersDistanceFromTopInPx=$ionicPosition.position(theScroller).top+"px";theClone.css({position:"absolute",top:scrollersDistanceFromTopInPx,left:0,right:0}),theScroller.parent().append(theClone),$compile(theClone)(theScope)},linkerFn=function(theClone,$scope,$element,$attr,$ionicScroll){var theScroller=angular.element($ionicScroll.element),original=$element,thisIsAClone=original.hasClass(ACN_STICKY_CLONE);if(!thisIsAClone){compileStickyClone(theClone,$scope,theScroller);var hideClone=function(){theClone.addClass("ng-hide"),theClone.removeClass("ng-show")},showClone=function(){theClone.removeClass("ng-hide"),theClone.addClass("ng-show")},updateSticky=function(){var scrollersDistanceFromTop=$ionicPosition.offset(theScroller).top,originalsDistanceFromTop=$ionicPosition.offset(original).top,originalIsStillInViewPort=originalsDistanceFromTop-scrollersDistanceFromTop>0;(originalIsStillInViewPort?hideClone:showClone).call()},throttledUpdateSticky=ionic.throttle(updateSticky,150),timeoutUpdateSticky=function(){$timeout(updateSticky,200)};theScroller.on("scroll",throttledUpdateSticky),theScroller.on("scroll-resize",timeoutUpdateSticky),$scope.$on("$destroy",function(){theClone&&angular.isFunction(theClone.remove)&&theClone.remove(),theScroller.off("scroll",throttledUpdateSticky),theScroller.off("scroll-resize",timeoutUpdateSticky)})}};return{restrict:"A",require:"^$ionicScroll",compile:function($element){var thisIsAClone=$element.hasClass(ACN_STICKY_CLONE);if(!thisIsAClone){var clone=createStickyClone($element);return linkerFn.bind(null,clone)}}}})}),define("acnNg/components/content/contentfixed",["angular"],function(angular){return angular.module("tq.content.fixed",[]).directive("ionContentFixed",function(){return{restrict:"E",require:"^$ionicScroll",transclude:!0,link:function(scope,element,attr,$ionicScroll,transcludeFn){var ionContent=angular.element($ionicScroll.element),contentToRemove=null;transcludeFn(scope,function(clone,scope){contentToRemove=clone,ionContent.append(clone)}),scope.$on("$destroy",function(){contentToRemove&&angular.isFunction(contentToRemove.remove)&&(contentToRemove.remove(),contentToRemove=null)})}}})}),define("acnNg/components/menu/overlay",["angular"],function(angular){return angular.module("tq.menu.overlay",[]).directive("ionMenuOverlay",["$timeout",function($timeout){return{restrict:"A",require:"^ionSideMenus",link:function($scope,$element,$attr,$ionicSideMenus){var sideMenusController=$ionicSideMenus,amountValue=0,minOpacity=.5,contentAnimationElement=null;$scope.$watch(function(){return sideMenusController.right},function(rightMenu){rightMenu&&rightMenu.el&&(rightMenu.el.style[ionic.CSS.TRANSFORM]="translate3d("+rightMenu.width+"px,0,0)",rightMenu.el.style.zIndex=1,angular.element(rightMenu.el).addClass("menu-animated"))}),$scope.$watch(function(){return sideMenusController.left},function(leftMenu){leftMenu&&leftMenu.el&&(leftMenu.el.style[ionic.CSS.TRANSFORM]="translate3d("+rightMenu.width+"px,0,0)",leftMenu.el.style.zIndex=1,angular.element(leftMenu.el).addClass("menu-animated"))}),$scope.$watch(function(){return sideMenusController.content},function(controllerContent){if(controllerContent&&controllerContent.element){contentAnimationElement=controllerContent.element;var navView=angular.element(controllerContent).children("ion-nav-view");navView.length>0&&(contentAnimationElement=navView.get(0)),contentAnimationElement.style[ionic.CSS.TRANSITION]="transform 200ms ease"}});var processOpen=!1;sideMenusController.openAmount=function(amountLength){var newWidth;if(Math.abs(amountLength-amountValue)>160){if(processOpen)return;processOpen=!0,$timeout(function(){processOpen=!1},200)}if(0>amountLength&&-amountLength>sideMenusController.right.width&&(amountLength=-sideMenusController.right.width),amountLength>0&&amountLength>sideMenusController.left.width&&(amountLength=sideMenusController.left.width),contentAnimationElement&&(!(amountLength>0)||sideMenusController.left.el)&&(!(0>amountLength)||sideMenusController.right.el)){var animationContent=angular.element(contentAnimationElement);animationContent.children("ion-nav-view").length>0&&(animationContent=animationContent.children("ion-nav-view"));var maxLength=Math.max(sideMenusController.right&&sideMenusController.right.width,sideMenusController.left&&sideMenusController.left.width,100),calculatedOpacity=1-Math.abs(amountLength)/maxLength*(1-minOpacity);animationContent.css({opacity:calculatedOpacity})}0>=amountLength&&sideMenusController.right.el&&(newWidth=sideMenusController.right.width+amountLength,sideMenusController.right.el.style[ionic.CSS.TRANSFORM]="translate3d("+newWidth+"px,0,0)"),amountLength>=0&&sideMenusController.left.el&&sideMenusController.left.el&&(newWidth=-amountLength,sideMenusController.left.el.style[ionic.CSS.TRANSFORM]="translate3d("+newWidth+"px,0,0)"),amountValue=amountLength},sideMenusController.getOpenAmount=function(){return amountValue}}}}])}),define("components/settings/settings",["angular","components/bootstrap/bootstrap"],function(angular){return angular.module("tq.settings",["tq.bootstrap"]).constant("SFDC_STATIC_RESOURCE_PATH",window.getSfdcStaticResourcePathSafe()).provider("$settings",function(){var settingsMap={global:{},theme:{},app:{},appTheme:{}},salesforceConfig={},getAppId=function(){return window.sfAppId},getThemeId=function(){return window.themeId},provider=this;this.getAppId=getAppId,this.getThemeId=getThemeId,this.setGlobalSettings=function(settingsObject){angular.merge(settingsMap.global,settingsObject)},this.setAppSettings=function(settingsObject,appId){angular.isDefined(appId)||(appId=getAppId()),settingsMap.app[appId]||(settingsMap.app[appId]={}),angular.merge(settingsMap.app[appId],settingsObject)},this.setThemeSettings=function(settingsObject,themeId){angular.isDefined(themeId)||(themeId=getThemeId()),settingsMap.theme[themeId]||(settingsMap.theme[themeId]={}),angular.merge(settingsMap.theme[themeId],settingsObject)},this.set=function(settingsObject,themeId,appId){angular.isDefined(appId)||(appId=getAppId()),angular.isDefined(themeId)||(themeId=getThemeId()),settingsMap.appTheme[appId]||(settingsMap.appTheme[appId]={}),settingsMap.appTheme[appId][themeId]||(settingsMap.appTheme[appId][themeId]={}),angular.merge(settingsMap.appTheme[appId][themeId],settingsObject)},this.setSalesforceSettings=function(config){if(config&&config.settingsApiName&&config.map){var stringKey=config.settingsApiName+":"+(config.appFieldApiName?config.appFieldApiName:"")+":"+(config.themeFieldApiName?config.themeFieldApiName:"");config[stringKey]?angular.merge(salesforceConfig[stringKey].map,config.map):salesforceConfig[stringKey]=angular.copy(config)}},this.$get=function($q,tqCoreConnector){var getAppThemeSettings=function(appId,themeId){return settingsMap.appTheme&&settingsMap.appTheme[appId]&&settingsMap.appTheme[appId][themeId]?settingsMap.appTheme[appId][themeId]:void 0},getSettingsInObject=function(object,keyComponents){for(var index=0;index<keyComponents.length;index++){if(!object)return;object=object[keyComponents[index]]}return object},generateFieldsArray=function(data,fieldsArray){if(angular.isString(data)){var position=data.indexOf(":");fieldsArray.push(-1==position?data:data.substring(0,position))}else angular.isObject(data)&&!angular.isDate(data)&&angular.forEach(data,function(value){generateFieldsArray(value,fieldsArray)})},getWhereCondition=function(config){var condition,conditionsArray=[];return config.appFieldApiName&&(condition={},condition[config.appFieldApiName]={$in:[getAppId().toLowerCase(),getAppId().toUpperCase(),getAppId()]},conditionsArray.push(condition)),config.themeFieldApiName&&(condition={},condition[config.themeFieldApiName]={$in:[getThemeId().toLowerCase(),getThemeId().toUpperCase(),getThemeId()]},conditionsArray.push(condition)),config.where&&(angular.isFunction(config.where)?conditionsArray.push(config.where(getAppId(),getThemeId())):conditionsArray.push(config.where)),0===conditionsArray.length?void 0:conditionsArray},setCustomSettingsToSettingsObject=function(settingsObject,settingsValues){if(angular.isString(settingsObject)){var components=/^([^:]*)(:(.*))?$/.exec(settingsObject),fieldName=components[1],value=settingsValues[fieldName];if(components.length>3&&angular.isString(value)){if("ARRAY"==components[3])return value.split(",");if("JSON"==components[3])return angular.fromJson(value)}return value}return!angular.isDate(settingsObject)&&angular.isObject(settingsObject)&&angular.forEach(settingsObject,function(value,key){settingsObject[key]=setCustomSettingsToSettingsObject(value,settingsValues),angular.isUndefined(settingsObject[key])&&delete settingsObject[key]}),settingsObject},getSettingsUpdateMethod=function(config){return"appTheme"===config.level||config.appFieldApiName&&config.themeFieldApiName?provider.set:"app"===config.level||config.appFieldApiName?provider.setAppSettings:"theme"===config.level||config.themeFieldApiName?provider.setThemeSettings:provider.setGlobalSettings};return{get:function(settingName,defaultValue,appId,themeId){angular.isDefined(appId)||(appId=getAppId()),angular.isDefined(themeId)||(themeId=getThemeId());var keyComponents=settingName.split(/\./),appThemeSettings=getAppThemeSettings(appId,themeId),settingValue=angular.copy(getSettingsInObject(settingsMap.global,keyComponents)),settingLevels=[];return settingsMap.theme[themeId]&&settingLevels.push(getSettingsInObject(settingsMap.theme[themeId],keyComponents)),settingsMap.app[appId]&&settingLevels.push(getSettingsInObject(settingsMap.app[appId],keyComponents)),appThemeSettings&&settingLevels.push(getSettingsInObject(appThemeSettings,keyComponents)),angular.forEach(settingLevels,function(settingValueToMerge){angular.isUndefined(settingValueToMerge)||(angular.isObject(settingValue)&&!angular.isDate(settingValue)&&angular.isObject(settingValueToMerge)&&!angular.isDate(settingValueToMerge)?angular.merge(settingValue,settingValueToMerge):settingValue=angular.copy(settingValueToMerge));
}),angular.isDefined(settingValue)?settingValue:defaultValue},loadSalesforceData:function(){return deferredArray=[],angular.forEach(salesforceConfig,function(config){var query={objectApiName:config.settingsApiName,fields:[],where:getWhereCondition(config),limit:1};generateFieldsArray(config.map,query.fields),deferredArray.push(tqCoreConnector.storage.find(query).then(function(results){if(angular.isArray(results)&&results.length>0){var customSettings=results[0].rawRecord,settingsObject=angular.copy(config.map);setCustomSettingsToSettingsObject(settingsObject,customSettings),getSettingsUpdateMethod(config).call(provider,settingsObject)}}))}),$q.all(deferredArray)}}}}).config(function(tqBootstrapProvider){tqBootstrapProvider.addTaskOnActivationFinish(function($settings){$settings.loadSalesforceData()})}).directive("tqBindSettings",["$settings",function($settings){return{restrict:"A",transclude:!0,link:function(scope,element,attrs,controllers,transcludeFn){var defaultContent="",dataIsCustom=!1;transcludeFn(scope,function(clone,scope){defaultContent=clone,dataIsCustom||(element.html(clone),dataIsCustom=!1)}),attrs.$observe("tqBindSettings",function(newKey,oldKey){if(newKey!=oldKey){var dataValue=$settings.get(newKey);angular.isDefined(dataValue)?(dataIsCustom=!0,element.html(dataValue)):dataIsCustom&&(element.html(defaultContent),dataIsCustom=!1)}})}}}])}),define("youOne/functional.config",["angular","components/settings/settings"],function(angular){return angular.module("youone.functional.config",["tq.settings"]).config(["$settingsProvider",function($settingsProvider){$settingsProvider.setGlobalSettings({functionality:{myProfile:{enabled:!0,directMessagingSwitch:{enabled:!0},aboutMe:{enabled:!0},edit:{enabled:!0},travelPreferences:{enabled:!0},marketingPreferences:{enabled:!0}},myBookings:{enabled:!0,overview:{enabled:!0,bookingAlert:{enabled:!0},TDAlert:{enabled:!0},daysItinerary:{enabled:!0},manageMyBooking:{enabled:!0},viewMyInvoice:{enabled:!0}},chatter:{enabled:!0,postText:{enabled:!0},postPhoto:{enabled:!0},share:{enabled:!0}},itinerary:{enabled:!0,comment:{enabled:!0}},journal:{enabled:!0,addNote:{enabled:!0},addPostcard:{enabled:!0},share:{enabled:!0},addHashtag:{enabled:!0}},community:{enabled:!0,details:{enabled:!0},sendMessages:{enabled:!0},mute:{enabled:!0}}},myHorizon:{enabled:!0,overview:{enabled:!0},brochures:{enabled:!0,request:{enabled:!0},eBrochures:{enabled:!0}},quotes:{enabled:!0},favourites:{enabled:!0},hyperlinks:{enabled:!0}},destinations:{enabled:!0,visited:{enabled:!0},bucketList:{enabled:!0}}}})}])}),define("youOne/functionality/functionality",["angular","coreapi","components/settings/settings"],function(angular){function getBlockNodes(nodes){var node=nodes[0],endNode=nodes[nodes.length-1],blockNodes=[node];do{if(node=node.nextSibling,!node)break;blockNodes.push(node)}while(node!==endNode);return angular.element(blockNodes)}return angular.module("ttc.settings.functionality",["tq.coreapi","tq.settings"]).service("ttcFunctionalitySettings",function($settings,tqCoreConnector){var getUserProfile=function(){return tqCoreConnector.user.userInfo.getUserFieldValue("ProfileId")},getBusinessUnit=function(){return"UK"};this.isEnabled=function(functionalityModule){if(!angular.isString(functionalityModule)||""===functionalityModule)return!0;0!==functionalityModule.indexOf("functionality.")&&(functionalityModule="functionality."+functionalityModule);var functionalSettings=$settings.get(functionalityModule);if(angular.isUndefined(functionalSettings))return!0;if(functionalSettings===!1||functionalSettings===!0)return functionalSettings;if(angular.isObject(functionalSettings)){if(functionalSettings.enabled===!1)return!1;if(angular.isArray(functionalSettings.profiles)&&-1===functionalSettings.profiles.indexOf(getUserProfile()))return!1;if(angular.isArray(functionalSettings.businessUnits)&&-1===functionalSettings.businessUnits.indexOf(getBusinessUnit()))return!1}return!0}}).directive("ttcIfEnabled",["ttcFunctionalitySettings","$animate",function(ttcFunctionalitySettings,$animate){return{multiElement:!0,transclude:"element",priority:99,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements,trackEnabled=function(key){var isEnabled=!0;if(angular.isString(key)){var functionalities=key.split(",");angular.forEach(functionalities,function(functionality){isEnabled=isEnabled&&ttcFunctionalitySettings.isEnabled(functionality)})}isEnabled?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=document.createComment(" end ttcIfEnabled: "+$attr.ttcIfEnabled+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).then(function(){previousElements=null}),block=null))};$attr.$observe("ttcIfEnabled",function(newKey,oldKey){newKey!=oldKey&&trackEnabled(newKey)}),$scope.$on("tqSalesforceSettingsLoaded",function(){trackEnabled($attr.ttcIfEnabled)})}}}]).directive("ttcIfAnyEnabled",["ttcFunctionalitySettings","$animate",function(ttcFunctionalitySettings,$animate){return{multiElement:!0,transclude:"element",priority:99,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements,trackEnabled=function(key){var isEnabled=!1;if(angular.isString(key)){var functionalities=key.split(",");angular.forEach(functionalities,function(functionality){isEnabled=isEnabled||ttcFunctionalitySettings.isEnabled(functionality)})}isEnabled?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=document.createComment(" end ttcIfAnyEnabled: "+$attr.ttcIfEnabled+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).then(function(){previousElements=null}),block=null))};$attr.$observe("ttcIfAnyEnabled",function(newKey,oldKey){newKey!=oldKey&&trackEnabled(newKey)}),$scope.$on("tqSalesforceSettingsLoaded",function(){trackEnabled($attr.ttcIfAnyEnabled)})}}}])}),define("youOne/translations/translations",["angular","angularTranslate","angularTranslateLoaderStaticFiles","components/translations/translations"],function(angular){"use strict";return angular.module("yo.translations",["tq.translations","pascalprecht.translate"]).constant("YOU_ONE_TRANSLATION_FILES",[window.getSfdcStaticResourcePathSafe().concat("src/you-one/translations/you-one.en")]).config(function($translateProvider,ACN_NG_TRANSLATION_FILES,YOU_ONE_TRANSLATION_FILES){var languageStack=[];languageStack=languageStack.concat(ACN_NG_TRANSLATION_FILES),languageStack=languageStack.concat(YOU_ONE_TRANSLATION_FILES);var topLevelLanguageInStack=languageStack.pop();$translateProvider.fallbackLanguage(languageStack),$translateProvider.preferredLanguage(topLevelLanguageInStack)})}),define("youOne/app",["angular","isoCountries","coreapi","youOne/functional.config","acnNg/app","components/settings/settings","youOne/functionality/functionality","youOne/translations/translations"],function(angular,isoCountries){return window.iso=isoCountries,angular.module("youone",["ionic","acnone","youone.functional.config","yo.translations","tq.coreapi","tq.settings","ttc.settings.functionality"]).config(["$settingsProvider",function($settingsProvider){$settingsProvider.setGlobalSettings({legalAge:18,copyright:{year:"2015",company:"TTC",text:"All rights reserved. Copyright by TTC, 2015"},trip:{monthCountBeforeArchiving:6}})}]).run(["$settings","$rootScope","ttcFunctionalitySettings","$ionicPopup","$ionicLoading",function($settings,$rootScope,ttcFunctionalitySettings,$ionicPopup,$ionicLoading){window.accentureONECore&&window.accentureONECore.locale&&-1===window.accentureONECore.locale.indexOf("{!")&&moment.locale(window.accentureONECore.locale),$rootScope.rootTemplate="you-one/index.tpl.html",$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){toState.data&&(ttcFunctionalitySettings.isEnabled(toState.data.parentFunctionality)&&ttcFunctionalitySettings.isEnabled(toState.data.functionality)||($ionicPopup.alert({title:"Cannot open page",template:"You don't have access to this functionality"}),event.preventDefault()))})}])}),define("youOne/selectedtrip/selectedtrip",["angular","uiRouter","coreapi"],function(angular){return angular.module("ttc.selectedtrip",["ui.router","tq.coreapi"]).service("ttcSelectedTrip",function($q,tqCoreConnector){this.lastSelectedSideSubsection="abstractTripState.chatter.side.travelDirector",this.lastSelectedMainSubsection="abstractTripState.chatter.main.chatter",this.getTripObjectApiName=function(){var isTravelDirector=tqCoreConnector.user.userInfo.getUserFieldValue("Is_Travel_Director__c");return isTravelDirector?"Tour_Instance__c":"Booking_Component__c"},this.getProductReferenceField=function(){var isTravelDirector=tqCoreConnector.user.userInfo.getUserFieldValue("Is_Travel_Director__c");return isTravelDirector?"Tour_Product__c":"Product__c"},this.getRecordTourProductId=function(record){return"Tour_Product__c"==record.objectApiName?record.rawRecord.Id:"Booking_Component__c"==record.objectApiName?record.rawRecord.Product__c:record.rawRecord.Tour_Product__c},this.getRecordTourInstanceId=function(tripRecord){return"Tour_Instance__c"===tripRecord.objectApiName?tripRecord.rawRecord.Id:tripRecord.rawRecord.Tour_Instance__c},this.loadSelectedTourInstance=function(selectedTourInstanceId,required){var defer=$q.defer();return tqCoreConnector.storage.find({objectApiName:"Tour_Instance__c",where:{Id:{$eq:selectedTourInstanceId}}}).then(function(trip){trip.length>0?defer.resolve(trip[0]):required?defer.reject({message:"SELECTED_TRIP_NOT_FOUND",errorCode:tqCoreConnector.errors.DATA}):defer.resolve(null)},function(err){defer.reject({errorCode:tqCoreConnector.errors.STORAGE,error:err})}),defer.promise},this.loadSelectedTourInstanceForTrip=function(tripObject,required){return tripObject?"Tour_Instance__c"===tripObject.objectApiName?$q.when(tripObject):this.loadSelectedTourInstance(tripObject.rawRecord.Tour_Instance__c,required):$q.when(null)},this.loadSelectedTrip=function(selectedTripId){var defer=$q.defer();return tqCoreConnector.storage.find({objectApiName:this.getTripObjectApiName(),where:{Id:{$eq:selectedTripId}}}).then(function(trip){angular.isArray(trip)&&trip.length>0?defer.resolve(trip[0]):defer.reject({message:"SELECTED_TRIP_NOT_FOUND",errorCode:tqCoreConnector.errors.DATA})},function(err){defer.reject({errorCode:tqCoreConnector.errors.STORAGE,error:err})}),defer.promise},this.loadSelectedPassenger=function(passengerId){var where={Id:{$eq:passengerId}},personAccountId=tqCoreConnector.user.userInfo.getUserFieldValue("AccountId");return personAccountId?where.Account__c={$eq:personAccountId}:where.User__c={$eq:tqCoreConnector.user.userInfo.getUserId()},tqCoreConnector.storage.findOne({objectApiName:"Passenger__c",where:where})},this.loadSelectedBooking=function(bookingId){var deferred=$q.defer();return tqCoreConnector.storage.find({objectApiName:"Booking__c",where:{Id:{$eq:bookingId}}}).then(function(product){product.length>0?deferred.resolve(product[0]):deferred.reject({message:"BOOKING_PRODUCT_NOT_FOUND",errorCode:tqCoreConnector.errors.DATA})})["catch"](function(err){deferred.reject({errorCode:tqCoreConnector.errors.STORAGE,error:err})}),deferred.promise},this.loadSelectedBookingForTrip=function(tripObject){return tripObject&&"Booking__c"!=tripObject.objectApiName?"Tour_Instance__c"==tripObject.objectApiName?$q.when(null):this.loadSelectedBooking(tripObject.rawRecord.Booking_Number__c):$q.when(tripObject)},this.loadTourProduct=function(tourProductId){var deferred=$q.defer();return tqCoreConnector.storage.find({objectApiName:"Tour_Product__c",where:{Id:{$eq:tourProductId}}}).then(function(product){product.length>0?deferred.resolve(product[0]):deferred.reject({message:"TOUR_PRODUCT_NOT_FOUND",errorCode:tqCoreConnector.errors.DATA})})["catch"](function(err){deferred.reject({errorCode:tqCoreConnector.errors.STORAGE,error:err})}),deferred.promise},this.loadItineraryItems=function(tourProduct){var deferred=$q.defer(),recordTypeId=tqCoreConnector.metadata.getRecordTypeId("Itinerary_Item__c","Itinerary Item");return angular.isUndefined(recordTypeId)?deferred.reject({message:"RECORD_TYPE_NOT_FOUND",errorCode:tqCoreConnector.errors.DATA}):tqCoreConnector.storage.find({objectApiName:"Itinerary_Item__c",fields:["Id","Title__c","Text__c","Accomodation__c","Start_Day__c","Duration__c"],where:{$and:[{RecordTypeId:{$eq:recordTypeId}},{Archive__c:{$eq:!1}},{Tour_Product__c:{$eq:tourProduct.rawRecord.Id}}]},orderby:"Start_Day__c ASC"}).then(function(itineraryItems){deferred.resolve(itineraryItems)})["catch"](function(err){deferred.reject({errorCode:tqCoreConnector.errors.STORAGE,error:err})}),deferred.promise}})}),define("youOne/tripbrowser/tripbrowser",["angular","coreapi","youOne/selectedtrip/selectedtrip"],function(angular){return angular.module("ttc.tripbrowser",["tq.coreapi","ttc.selectedtrip"]).service("ttcTripBrowser",function($q,tqCoreConnector,$state,$ionicHistory,ttcSelectedTrip,$stateParams,$settings,$filter){var self=this;this._CLASS_LOCALSTORAGE_NAMESPACE="ttcTripBrowser",this._ENDPOINT_URL="https://www.trafalgar.com/",this.bookingPassengerIds=[],this.loadBookingPassengerIds=function(){var loadDeferred=$q.defer();return self.bookingPassengerIds=[],tqCoreConnector.user.getUserDataPromise().then(function(currentUser){var personAccountId=currentUser.rawRecord.AccountId;personAccountId?tqCoreConnector.storage.find({fields:["Id"],objectApiName:"Booking_Passenger__c",where:{Customer__c:{$eq:personAccountId}}}).then(function(bookingPassengerList){angular.isArray(bookingPassengerList)&&angular.forEach(bookingPassengerList,function(bookingPassenger){self.bookingPassengerIds.push(bookingPassenger.rawRecord.Id)})})["finally"](function(){loadDeferred.resolve()}):loadDeferred.resolve()},function(error){loadDeferred.reject("No User Loaded")}),loadDeferred.promise},this._selectedTripId=null,this._selectedTripType=null,this.setSelectedTripId=function(tripId){store.set("_CLASS_LOCALSTORAGE_NAMESPACE",tripId),this._selectedTripId=tripId},this.getSelectedTripId=function(){if(this._selectedTripId)return this._selectedTripId;var storedValue=store.get("_CLASS_LOCALSTORAGE_NAMESPACE");return this.setSelectedTripId(storedValue),this._selectedTripId},this.setSelectedTripType=function(type){this._selectedTripType=type},this.getSelectedTripType=function(){return this._selectedTripType},this.filterActiveNavItemsMapping=function(availableItems){var filteredItems=[];return availableItems.forEach(function(item){"selectedTrip-tipsAndTricks"!=item.name?filteredItems.push(item):"selectedTrip-tipsAndTricks"===item.name&&"past"!=$stateParams.type&&filteredItems.push(item)}),filteredItems},this.setSelectedTripAndGo=function(record,type,id){$ionicHistory.clearCache();var currentTripId=id||record.rawRecord.Id;ttcSelectedTrip.lastSelectedSideSubsection="abstractTripState.chatter.side.travelDirector",ttcSelectedTrip.lastSelectedMainSubsection="abstractTripState.chatter.main.chatter",this.setSelectedTripId(currentTripId),this.setSelectedTripType(type),$state.go("abstractTripState.itinerary",{type:type,id:currentTripId})},this.getCurrentTrip=function(){return tqCoreConnector.storage.find(this._getCurrentTripQuery()).then(function(trip){return trip.length>0?trip[0].rawRecord:null},function(err){return{errorCode:tqCoreConnector.errors.STORAGE,error:err}})},this.getBrandPicklistValue=function(){return $settings.get("brand.bookingPicklistValue","Trafalgar")},this.getOwnerCondition=function(isPassenger){var personAccountId=tqCoreConnector.user.userInfo.getUserFieldValue("AccountId");return personAccountId?{Customer__c:{$eq:personAccountId}}:isPassenger?{User__c:{$eq:tqCoreConnector.user.userInfo.getUserId()}}:null},this.getPassengerOwnerCondition=function(){var personAccountId=tqCoreConnector.user.userInfo.getUserFieldValue("AccountId");return personAccountId?{Account__c:{$eq:personAccountId}}:{User__c:{$eq:tqCoreConnector.user.userInfo.getUserId()}}},this.applyBookingComponentValidation=function(){return{$and:[{Status__c:{$eq:"CF"}},{Product_Type__c:{$eq:"T"}}]}},this.applyBookingValidation=function(){return{"Booking_Number__r.Status__c":{$in:["CO","UC"]}}},this.applyPassengerValidation=function(){return{Booking_Status__c:{$in:["CO","UC"]}}},this.getBrandCondition=function(){return{"Booking_Number__r.Brand__c":{$eq:self.getBrandPicklistValue()}}},this.getPassengerBrandCondition=function(){return{Brand__c:{$eq:self.getBrandPicklistValue()}}},this.getClosestTrip=function(){var tripQuery={objectApiName:ttcSelectedTrip.getTripObjectApiName(),where:{End_Date__c:{$gte:moment().startOf("day").toDate()}},orderby:"Start_Date__c",limit:1};return angular.merge(tripQuery.where,this.getOwnerCondition(),this.getBrandCondition()),tqCoreConnector.storage.find(tripQuery).then(function(result){return angular.isArray(result)&&result.length>0?result[0]:null})},this.getClosestPassenger=function(){var passengerQuery={objectApiName:"Passenger__c",where:{Passenger_End_Date__c:{$gte:moment().startOf("day").toDate()}},orderby:"Passenger_Start_Date__c",limit:1};return angular.merge(passengerQuery.where,this.getPassengerOwnerCondition(),this.getPassengerBrandCondition()),tqCoreConnector.storage.find(passengerQuery).then(function(result){return angular.isArray(result)&&result.length>0?result[0]:null})},this.getPastTripsQuery=function(){return{objectApiName:ttcSelectedTrip.getTripObjectApiName(),where:{End_Date__c:{$lt:new Date}}}},this.getFutureTripsQuery=function(){var MIN_DAYS_BEFORE_SHOWING=45;return{objectApiName:ttcSelectedTrip.getTripObjectApiName(),where:{$and:[{Start_Date__c:{$gt:new Date}},{Start_Date__c:{$lte:moment().add(MIN_DAYS_BEFORE_SHOWING,"days").startOf("day").toDate()}}]}}},this._getCurrentTripQuery=function(){return{objectApiName:ttcSelectedTrip.getTripObjectApiName(),where:{$and:[{Start_Date__c:{$lte:new Date}},{End_Date__c:{$gte:moment().startOf("day").toDate()}}]}}},this.showAvailabilityAndPrices=function(tourProduct){var webBrochureURL=this.getSharingURL(tourProduct);if(webBrochureURL+="&page=availability",tfLoading.show(),"undefined"!=typeof cordova){var child=window.open(webBrochureURL,"_blank","location=no,toolbar=yes,closebuttoncaption=Close,hidden=yes");child.addEventListener("loadstop",function(){tfLoading.hide(),child.show()}),child.addEventListener("loaderror",function(){tfLoading.hide(),child.show()})}else window.open(webBrochureURL,"_blank","location=no,toolbar=yes,closebuttoncaption=Close"),tfLoading.hide()},this.getSharingURL=function(tourProduct){var mv=tourProduct.rawRecord.Name,userISO=tqCoreConnector.user.userInfo.getUserFieldValue("Country__c");return this._ENDPOINT_URL+"tripredirect?mvcode="+mv+"&country="+userISO},this.getCurrentBookingComponents=function(){var yesterdayMidnight=moment().startOf("day").toDate(),endDateCondition={End_Date__c:{$gte:yesterdayMidnight}};return self._getMtsBookingComponents(endDateCondition)},this.getPastBookingComponents=function(){var yesterdayMidnight=moment().startOf("day").toDate(),endDateCondition={End_Date__c:{$lt:yesterdayMidnight}};return self._getMtsBookingComponents(endDateCondition,["End_Date__c DESC","Start_Date__c DESC"])},this.getPastAndRunningBookingComponents=function(brandIndependent){return self._getMtsBookingComponents({Start_Date__c:{$lt:new Date}},null,brandIndependent)},this.getCurrentPassengers=function(){var yesterdayMidnight=moment().startOf("day").toDate(),endDateCondition={Passenger_End_Date__c:{$gte:yesterdayMidnight}};return self._getMtsPassengers(endDateCondition)},this.getPastPassengers=function(){var yesterdayMidnight=moment().startOf("day").toDate(),endDateCondition={Passenger_End_Date__c:{$lt:yesterdayMidnight}};return self._getMtsPassengers(endDateCondition,["End_Date__c DESC","Start_Date__c DESC"])},this.getPastAndRunningPassengers=function(brandIndependent){return self._getMtsPassengers({Passenger_Start_Date__c:{$lt:new Date}},null,brandIndependent)},this._getMtsBookingComponents=function(endDateCondition,orderby,brandIndependent){endDateCondition=endDateCondition||{};var queryObject={objectApiName:"Booking_Component__c",fields:["Id","Name","End_Date__c","Start_Date__c","Booking_Number__c","Product__c","Background_URL__c","Product_Name__c","Booking_Number__r.Name"],where:{$and:[endDateCondition,self.getOwnerCondition(),self.applyBookingValidation(),self.applyBookingComponentValidation()]},orderby:orderby||["Start_Date__c ASC","End_Date__c ASC"]};return brandIndependent||queryObject.where.$and.push(self.getBrandCondition()),tqCoreConnector.storage.find(queryObject)},this._getMtsPassengers=function(endDateCondition,orderby,brandIndependent){endDateCondition=endDateCondition||{};var queryObject={objectApiName:"Passenger__c",fields:["Id","Name","Passenger_End_Date__c","Passenger_Start_Date__c","Booking_Number__c","Tour_Product__c","Tour_Product__r.Background_URL__c","Tour_Product__r.Product_Name__c","Booking_Name__c"],where:{$and:[endDateCondition,self.getPassengerOwnerCondition(),self.applyPassengerValidation(),self.applyBookingComponentValidation()]},orderby:orderby||["Passenger_Start_Date__c ASC","Passenger_End_Date__c ASC"]};return brandIndependent||queryObject.where.$and.push(self.getPassengerBrandCondition()),tqCoreConnector.storage.find(queryObject)},this.getCurrentDayNumber=function(startDate){var currentMoment=window.moment(new Date),startDateMoment=window.moment(startDate);return currentMoment.diff(startDateMoment,"days")+1},this.getTourTotalDuration=function(itineraryItems){var totalDuration=0;return angular.forEach(itineraryItems,function(itineraryItem){!angular.isUndefined(itineraryItem)&&!angular.isUndefined(itineraryItem.rawRecord.Duration__c)&&itineraryItem.rawRecord.Duration__c>0&&(totalDuration+=itineraryItem.rawRecord.Duration__c)}),totalDuration},this.getCurrentItineraryItem=function(startDate,itineraryItems){if(angular.isUndefined(itineraryItems)||0===itineraryItems.length||angular.isUndefined(startDate))return itineraryItems;var currentDayNumber=this.getCurrentDayNumber(startDate),sortedItineraryItems=itineraryItems;if(0>=currentDayNumber)return sortedItineraryItems[0];var keepGoing=!0,selectedItineraryItem=null;return angular.forEach(sortedItineraryItems,function(itineraryItem){keepGoing&&itineraryItem.rawRecord.Start_Day__c<=currentDayNumber&&currentDayNumber<itineraryItem.rawRecord.Start_Day__c+itineraryItem.rawRecord.Duration__c&&(selectedItineraryItem=itineraryItem,keepGoing=!1)}),null!=selectedItineraryItem?selectedItineraryItem:itineraryItems[0]},this.getItineraryItemReview=function(passenger,itineraryItem){var deferred=$q.defer();return angular.isUndefined(passenger)||angular.isUndefined(passenger.rawRecord)||angular.isUndefined(passenger.rawRecord.Id)||angular.isUndefined(itineraryItem)||angular.isUndefined(itineraryItem.rawRecord)||angular.isUndefined(itineraryItem.rawRecord.Id)?deferred.reject("No itinerary item or booking found"):tqCoreConnector.storage.findOne({objectApiName:"Itinerary_Item_Review__c",where:{$and:[{Passenger__c:{$eq:passenger.rawRecord.Id}},{Itinerary_Item__c:{$eq:itineraryItem.rawRecord.Id}}]}}).then(function(itineraryItemReview){return deferred.resolve(itineraryItemReview)})["catch"](function(error){deferred.reject("Loading itinerary item review exception "+error)}),deferred.promise}})}),define("youOne/sso/ssoservice",["angular","coreapi","youOne/selectedtrip/selectedtrip"],function(angular){return angular.module("ttc.ssoservice",["tq.coreapi","ttc.selectedtrip"]).service("ttcSsoService",function($q,$window,tqCoreConnector,$timeout){var self=this;self.isNotLoggedIn=function(){return null==self.ssoHelper?!1:void self.ssoHelper.isLoggedIn(function(loggedInfo){return loggedInfo})},self.logout=function(){return null!=self.ssoHelper?(self.ssoHelper.logout(),window.localStorage&&window.localStorage.removeItem&&window.localStorage.removeItem("isBurgerMenuDisplayedAfterLogin"),window.accentureONECore&&window.accentureONECore.siteUrl&&window.accentureONECore.siteUrl.length>0&&$timeout(function(){window.localStorage&&window.localStorage.clear(),window.location=window.accentureONECore.siteUrl+"/secur/logout.jsp?retUrl="+window.sitePrefix+"/apex/TQLogout?b="+window.themeId},3e3)):(window.localStorage&&window.localStorage.clear(),window.location.reload()),!0},self.updateEmail=function(oldEmail,newEmail){var deferred=$q.defer();return oldEmail&&newEmail&&null!=self.ssoHelper?self.ssoHelper.changeEmail(oldEmail,newEmail,function(){deferred.resolve("Email Updated")},function(result){deferred.reject(result)}):deferred.reject("ssoHelper not found"),deferred.promise},self.redirectToChangePassword=function(){if(null!=self.ssoHelper){var backUrl=""+$window.location;return self.ssoHelper.redirectToChangePassword(backUrl),!0}return!1},self.updatePassword=function(oldPassword,newPassword){var deferred=$q.defer();return deferred.resolve("Password NOT updated"),deferred.promise},self.ssoHelper=null,self.ssoLogin=null,self.ssoManagement=null,self.getInitiatorValue=function(){switch(window.themeId){case"iv":return"InsightVacations";case"tt":return"Trafalgar";case"ch":return"Contiki";default:return null}},self.initialize=function(){"undefined"!=typeof initializeSso&&initializeSso({initiator:self.getInitiatorValue()}).then(function(){var fullPath=$window.location.origin+$window.location.pathname,backUrl=fullPath+"#/profile/edit",ssoParameters={changeEmailReturnUrl:backUrl,changePasswordReturnUrl:backUrl};self.ssoHelper=new SsoHelper(ssoParameters)})},self.initialize()})}),define("youOne/passengerdetail/find-passenger-service",["angular","coreapi"],function(angular){return angular.module("ttc.find-passenger-service",["tq.coreapi"]).service("FindPassengerRecordsService",["tqCoreConnector","$q",function(tqCoreConnector,$q){this.findPassengerRecord=function(passengerData){var deferred=$q.defer();TQ.rest.Provider.rest("/v1/FindPassengerRecords","PATCH",JSON.stringify({findPassenger:passengerData})).done(function(passengerRecords){deferred.resolve(passengerRecords)}).fail(function(error){deferred.reject(error)});return deferred.promise},this.updatePassengerRecord=function(passengerData){var deferred=$q.defer();var passengerRecord={passengers:{updatePassengers:passengerData}};TQ.rest.Provider.rest("/v1/UpdatePassengerRecords","PATCH",JSON.stringify(passengerRecord)).done(function(passengerRecords){deferred.resolve(passengerRecords)}).fail(function(error){deferred.reject(error)});return deferred.promise}}])}),define("acnNg/components/popup/generic/popup",["angular","coreapi"],function(angular){return angular.module("acn.popup",["ionic"]).service("acnPopup",function($q,$timeout,$ionicPopup,tqCoreConnector){var self=this;this._dialogConfigStack=[],this._dialogDeferredStack=[],this._currentAlertConfig=null,this.TYPE={},this.TYPE.CONFIRM="confirm",this.TYPE.PROMPT="prompt",this.TYPE.ALERT="alert",this.thereAreOpenAlerts=function(){return self._dialogDeferredStack.length>0},this.thereArePendingAlerts=function(){return self._dialogConfigStack.length>0},this._isEqualCurrentAlertConfig=function(theAlertConfigToCheck){var equalityFields=["title","subTitle","template","templateUrl","okText","okType","cssClass"],currentConfig=_.pick(self._currentAlertConfig,equalityFields),nextCandidateConfig=_.pick(theAlertConfigToCheck,equalityFields);return _.isEqual(currentConfig,nextCandidateConfig)},this.show=function(config){var deferredDialogConclusion=$q.defer();config.title=config.title?config.title:"",config.okText=config.okText?config.okText:"OK";var alertConfig={type:config.type,title:config.title,subTitle:config.subTitle,template:config.template,templateUrl:config.templateUrl,okText:config.okText,cancelText:config.cancelText,okType:config.okType,scope:config.scope,cssClass:config.cssClass};for(var key in config)void 0===alertConfig[key]&&(alertConfig[key]=config[key]);var onPopupConcluded=function(userHasConfirmed){if(userHasConfirmed){if(angular.isFunction(config.onUserConfirmed))try{config.onUserConfirmed()}catch(anException){tqCoreConnector.logger.error(anException)}}else if(angular.isFunction(config.onUserCancelled))try{config.onUserCancelled()}catch(anException){tqCoreConnector.logger.error(anException)}if(self.thereArePendingAlerts()){var alertConfigThatWasPending=self._dialogConfigStack.pop();self._currentAlertConfig=alertConfigThatWasPending,self._showByType(alertConfigThatWasPending).then(alertConfigThatWasPending.onPopupConcluded)}else self._currentAlertConfig=null;self._dialogConfigStack.splice(self._dialogConfigStack.indexOf(alertConfig),1),self._dialogDeferredStack.splice(self._dialogDeferredStack.indexOf(deferredDialogConclusion),1),deferredDialogConclusion.resolve(userHasConfirmed)};return alertConfig.onPopupConcluded=onPopupConcluded,alertConfig.deferredDialogConclusion=deferredDialogConclusion,self.thereAreOpenAlerts()?config.allowDuplicates===!0?self._dialogConfigStack.push(alertConfig):self._isEqualCurrentAlertConfig(alertConfig)||self._dialogConfigStack.push(alertConfig):(self._currentAlertConfig=alertConfig,self._showByType(alertConfig).then(onPopupConcluded)),deferredDialogConclusion.promise},this._showByType=function(theDialogconfig){return self._dialogDeferredStack.push(theDialogconfig.deferredDialogConclusion),theDialogconfig.type===self.TYPE.CONFIRM?$ionicPopup.confirm(theDialogconfig):theDialogconfig.type===self.TYPE.PROMPT?$ionicPopup.prompt(theDialogconfig):$ionicPopup.alert(theDialogconfig)}})}),define("youOne/terms/terms",["angular","components/settings/settings","youOne/sso/ssoservice","components/settings/settings","acnNg/components/popup/generic/popup"],function(angular){return angular.module("ttc.terms",["tq.settings","tq.coreapi","acn.popup"]).service("ttcTermsService",["$settings","tqCoreConnector","$rootScope","$ionicPopup","ttcSsoService","$q","tqLoading","acnPopup","$timeout",function($settings,tqCoreConnector,$rootScope,$ionicPopup,ttcSsoService,$q,tqLoading,acnPopup,$timeout){var termsAndConditionsObject=null,self=this;this.getPersonAccountId=function(){return tqCoreConnector.user.userInfo.getUserFieldValue("AccountId")},this.loadTermsObject=function(){var termsField=self.getTermsAndConditionsField(),objectApiName=self.getTermsObjectApiName(),personAccountId=self.getPersonAccountId();return tqCoreConnector.storage.findOne({fields:["Id",termsField],objectApiName:objectApiName,where:{Id:{$eq:personAccountId}}}).then(function(responseObject){return termsAndConditionsObject=null==responseObject?!1:responseObject})},this.getTermsObjectApiName=function(){return"Account"},this.getTermsAndConditionsField=function(){return window.themeId.toUpperCase()+"_Terms_And_Policies_Confirmed__c"},this.termsAndConditionsAreApproved=function(){return termsAndConditionsObject===!1?!1:termsAndConditionsObject&&termsAndConditionsObject.rawRecord[this.getTermsAndConditionsField()]},this.approveTermsAndConditions=function(){return termsAndConditionsObject&&termsAndConditionsObject.rawRecord?(termsAndConditionsObject.rawRecord[self.getTermsAndConditionsField()]=!0,tqCoreConnector.storage.upsert(termsAndConditionsObject)):null},this.showTermsAndConditionsPopup=function(){var $scope=$rootScope.$new();$scope.termsLink=$settings.get("brandSettings.termsLink"),window.accentureONECore&&window.accentureONECore.privacyPolicyLink&&-1==window.accentureONECore.privacyPolicyLink.indexOf("{!")?$scope.privacyPolicyLink=window.accentureONECore.privacyPolicyLink:$scope.privacyPolicyLink=$settings.get("brandSettings.policyLink"),$scope.confirmed={age:!1,policy:!1,terms:!1};var errorMap={age:"You need to confirm you are over "+$settings.get("legalAge")+" years old",policy:"You need to confirm you have read and accepted the Privacy Policy",
terms:"You need to confirm you have read and accepted the Terms of Use"},actionIsExecuting=!1,popup=$ionicPopup.show({cssClass:"mts-terms-popup",templateUrl:"you-one/terms/terms.tpl.html",scope:$scope,buttons:[{text:"DECLINE",type:"secondary",onTap:ionic.debounce(function(){tqLoading.show(),ttcSsoService.logout()},1500,!0)},{text:"CONFIRM",type:"primary",onTap:function($event){if($scope.errorsList=[],!actionIsExecuting){$event.preventDefault();for(var key in $scope.confirmed)$scope.confirmed[key]||$scope.errorsList.push(errorMap[key]);0===$scope.errorsList.length?(tqLoading.show(),$q.when(self.approveTermsAndConditions()).then(function(response){tqLoading.hide(),tqCoreConnector.utils.isResponseSuccessful(response)?(popup.close(),$timeout(function(){$rootScope.$broadcast("ttcTermsAndPoliciesApproved")},300)):(popup.close(),$ionicPopup.alert({title:"Error in operation",template:"Cannot confirm terms and conditions, please try again"})["finally"](function(){window.location.refresh()}))},function(){popup.close(),tqLoading.hide(),$ionicPopup.alert({title:"Error in operation",template:"Cannot confirm terms and conditions, please try again"})["finally"](function(){window.location.refresh()})})["finally"](function(){actionIsExecuting=!1})):actionIsExecuting=!1}}}]})}}])}),define("components/redirector/redirector",["angular","coreapi"],function(angular){return angular.module("tq.redirector",["ionic","tq.coreapi"]).service("tqRedirector",function($rootScope,$state,$location,$injector,$q){var routeMethods=[],stateReplacements={},_routeRedirectMethod=null;this.processRequset=function(event,toState,toParams,fromState,fromParams){if(stateReplacements[toState.name]){var newState=stateReplacements[toState.name];for(var keyToReplace in newState){var replacement=newState[keyToReplace];if(_.isFunction(replacement)){var replacementResult=replacement(toParams);replacementResult&&(toState[keyToReplace]=replacementResult)}else replacement&&(toState[keyToReplace]=replacement)}}this.processRouteMethods(event,toState,toParams,fromState,fromParams)},this.processRouteMethods=function(event,toState,toParams,fromState,fromParams){for(var index in routeMethods){var redirectionRuleCheckMethod=routeMethods[index];if(_.isFunction(redirectionRuleCheckMethod)){var redirectScope=redirectionRuleCheckMethod(toState,toParams,fromState,fromParams);if(redirectScope)return event.preventDefault(),$state.go(redirectScope)}}},this.addRuleMethod=function(method){return routeMethods.push(method),this},this.state=function(scopeName,scopeParams){return stateReplacements[scopeName]=scopeParams,this},this.clearState=function(){$location.path("")},this.saveCurrentState=function(){$rootScope.preActivationState=$location.path()},this.setRouteRedirectMethod=function(method){_routeRedirectMethod=method},this.routeToStartState=function(){$rootScope.preActivationState&&"/"!=$rootScope.preActivationState&&-1===$rootScope.preActivationState.indexOf("login")&&-1===$rootScope.preActivationState.indexOf("activation")?$location.path($rootScope.preActivationState):_routeRedirectMethod?$q.when($injector.invoke(_routeRedirectMethod)).then(function(resultLocation){$location.path(resultLocation)},function(error){}):$location.path(TQ.config.Client.defaultStartState)}})}),define("components/navigation/navigation",["angular","coreapi"],function(angular){return angular.module("tq.navigation",["tq.coreapi"]).service("tqNavigation",function(){this.activeNavItems=[],this.navItemsMapping=[],this.getActiveNavItemsMapping=function(){var that=this,activeNavItemsMapping={};return activeNavItemsMapping.items=[],this.activeNavItems&&this.activeNavItems.items&&this.activeNavItems.items.forEach(function(activeNav){that.navItemsMapping.forEach(function(navItemMap){navItemMap.name===activeNav.name&&activeNavItemsMapping.items.push(_.extend(navItemMap,activeNav))})}),activeNavItemsMapping.scrollHandle=this.activeNavItems.scrollHandle,activeNavItemsMapping},this.setActiveNavItems=function(states){this.activeNavItems=states}}).service("goTo",function($ionicScrollDelegate,$state){var goTo={};return goTo.section=function(section,animate,scrollHandle){var scrollDelegate=$ionicScrollDelegate.$getByHandle(scrollHandle);if(section=$("#"+section),"undefined"==typeof animate&&(animate=!0),!_.isEmpty(section)){var top=section.position().top,currPosition=scrollDelegate.getScrollPosition().top;scrollDelegate.scrollTo(0,top+currPosition,animate)}},goTo.state=function(state,params){$state.go(state,params)},goTo}).service("viewport",function($window,$ionicScrollDelegate,$state,$rootScope){function itemIsInViewport(position,item,top){return position>=top&&position<=item.height()+top}function justEnteredItem(axis,top){return axis.newScroll>top&&axis.oldScroll<top}function registerCallback(item,cb,delegateHandle,type){var delegate;"string"==typeof item&&(item=$(item)),delegate="undefined"==typeof delegateHandle?$ionicScrollDelegate:$ionicScrollDelegate.$getByHandle(delegateHandle),_.isEmpty(item)||_callbacks.push({item:item,cb:cb,delegate:delegate})}var _callbacks=[],axisY={};$rootScope.$on("$ionicView.beforeLeave",function(){_callbacks=[],axisY={}});var callCallbacks=function(delegate){axisY={newScroll:delegate.getScrollPosition().top,oldScroll:axisY.newScroll,oldDirection:axisY.direction,direction:""};var isForward=axisY.newScroll>axisY.oldScroll;axisY.direction=isForward?"down":"up",_callbacks.forEach(function(cb){var realTop=cb.item.position().top+axisY.newScroll;itemIsInViewport(axisY.newScroll,cb.item,realTop-15)?axisY.isInViewport=!0:axisY.isInViewport=!1,justEnteredItem(axisY,realTop)?axisY.justEnteredItem=!0:axisY.justEnteredItem=!1,(axisY.justEnteredItem||axisY.isInViewport)&&cb.cb(axisY)})};return{registerCallback:registerCallback,onScroll:callCallbacks}})}),define("components/circularmenu/circularmenu",["angular","components/navigation/navigation"],function(angular){angular.module("tq.circularmenu",["tq.navigation"]).directive("tqCircularMenu",function(tqNavigation,goTo,$log,$document){return{restrict:"A",templateUrl:"acn-one/acn-ng/components/circularmenu/circularmenu.tpl.html",scope:{onItemClicked:"=",onInactiveBtnClicked:"=",onFilterActiveNavItemsMapping:"="},controller:function($scope){function setATagStyle(){if(centralAngle){var unRotate=-(90-centralAngle/2),skew=-(90-centralAngle),transformVal="skew("+skew+"deg) rotate("+unRotate+"deg)  scale(1)".toString();$scope.aTagStyle={transform:transformVal}}}var centralAngle;$scope.cm={},$scope.cm.goSomewhere=function(link){if($scope.toggleNav(),angular.isFunction($scope.onItemClicked))try{$scope.onItemClicked(link)}catch(error){$log.error("tqCircularMenu.onItemClicked handler threw this: ",error)}link.stateChange?goTo.state(link.state.name,link.state.params):goTo.section(link.anchor,!0,tqNavigation.getActiveNavItemsMapping().scrollHandle)},$scope.cm.onInactiveBtnClicked=function(){if(!($scope.links.length>0)&&angular.isFunction($scope.onItemClicked))try{$scope.onInactiveBtnClicked()}catch(error){$log.error("tqCircularMenu.onInactiveBtnClicked handler threw this: ",error)}},$scope.liTagStyle=function(index){if(centralAngle){var rotateValue=centralAngle*index,skewValue=90-centralAngle,transformVal="rotate("+rotateValue+"deg) skew("+skewValue+"deg)".toString();return{transform:transformVal}}$scope.$apply()},$scope.cm={},$scope.cm.goSomewhere=function(link){if(angular.isFunction($scope.onItemClicked))try{$scope.onItemClicked(link)}catch(error){$log.error("tqCircularMenu.onItemClicked handler threw this: ",error)}link.stateChange?"string"==typeof link.state?goTo.state(link.state):goTo.state(link.state.name,link.state.params):goTo.section(link.anchor,!0,tqNavigation.getActiveNavItemsMapping().scrollHandle)},$scope.cm.onInactiveBtnClicked=function(){if(!($scope.links.length>0)&&angular.isFunction($scope.onItemClicked))try{$scope.onInactiveBtnClicked()}catch(error){$log.error("tqCircularMenu.onInactiveBtnClicked handler threw this: ",error)}},$scope.$watch(function(){return tqNavigation.activeNavItems},function(nv,ov){if(!angular.equals(nv,ov)){var availableItems=tqNavigation.getActiveNavItemsMapping().items,filteredItems=angular.isFunction($scope.onFilterActiveNavItemsMapping)?$scope.onFilterActiveNavItemsMapping(availableItems):availableItems;$scope.links=[],$scope.links=filteredItems,centralAngle=180/$scope.links.length,setATagStyle(),$scope.links.length>0?$scope.activeNav="active-nav":$scope.activeNav="inactive-nav"}}),$scope.toggleNav=function(event){event.stopPropagation(),"active-nav"===$scope.activeNav&&($scope.navOpenClass?($scope.navOpenClass=!1,$("ion-nav-bar").css({pointerEvents:"initial"})):($scope.navOpenClass=!0,$("ion-nav-bar").css({pointerEvents:"none"}))),$scope.$evalAsync()},$document.on("click",function(event){$scope.navOpenClass&&$scope.toggleNav(event),$scope.$evalAsync()})},link:function($scope,elem){elem.addClass("tq-circular-menu")}}})}),define("components/fadein/fadein",["angular"],function(angular){return angular.module("tq.fadein",[]).directive("tqFadeIn",function($timeout){return{restrict:"A",link:function($scope,$element,attrs){$element.addClass("tq-hide"),$element.is("img")&&$($element).on("load",function(){$element.addClass("tq-fade-in")})}}})}),define("components/sf-src/sf-src",["angular"],function(angular){var theStaticResourcePath=window.getSfdcStaticResourcePathSafe();return angular.module("ao.sf-src",[]).directive("aoSfSrc",function(){return{restrict:"A",link:function(scope,element,attr){var expandedSrcValue=theStaticResourcePath.concat(attr.aoSfSrc);element.attr("src",expandedSrcValue)}}})}),define("components/gtm/gtm",["angular"],function(angular){return angular.module("tq.gtm",[]).service("tqGoogleTagManager",function($window){$window.gtmDataLayer||($window.gtmDataLayer=[]),this.initialize=function(googleTagManagerId){!function(w,d,s,l,i){w[l]=w[l]||[],w[l].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl="dataLayer"!=l?"&l="+l:"";j.async=!0,j.src="//www.googletagmanager.com/gtm.js?id="+i+dl,f.parentNode.insertBefore(j,f)}($window,$window.document,"script","gtmDataLayer","googleTagManagerId")},this.push=function(data){$window.gtmDataLayer.push(data)}})}),define("currentTheme/settings",["angular","components/settings/settings"],function(angular){return angular.module("themes.settings",["ionic","tq.settings"]).config(["$settingsProvider",function($settingsProvider){$settingsProvider.setThemeSettings({legalAge:17,brand:{fullName:"Contiki",homepageUrl:"http://www.contiki.com/",contactUrl:"http://www.contiki.com/contact",bookingPicklistValue:"Contiki",initatorValue:"Contiki",socialLinks:{facebook:"https://www.facebook.com/Contiki/",twitter:"https://twitter.com/contiki",pinterest:"https://uk.pinterest.com/contiki/",google:"https://plus.google.com/+contiki"}},ttc:{brandspageUrl:"https://thetravelcorporation.com/brands"},googleTagManagerId:"GTM-3TKL"},"ch")}])}),function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory(function(){try{return require("angular")}catch(e){}}()):"function"==typeof define&&define.amd?define("ionicMaterial",["angular"],factory):"object"==typeof exports?exports.ionicMaterial=factory(function(){try{return require("angular")}catch(e){}}()):root.ionicMaterial=factory(root.angular)}(this,function(__WEBPACK_EXTERNAL_MODULE_1__){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";module.exports=function(){var angular;try{angular=__webpack_require__(1)}catch(err){}if(angular&&angular.version||(angular=window.angular),!angular||!angular.version)throw new Error("ionic-material could not load angular module :(");var app=angular.module("ionic-material",["ionic"]);return __webpack_require__(2)(app),__webpack_require__(3)(app),"ionic-material"}()},function(module,exports,__webpack_require__){if("undefined"==typeof __WEBPACK_EXTERNAL_MODULE_1__){var e=new Error('Cannot find module "angular"');throw e.code="MODULE_NOT_FOUND",e}module.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(module,exports,__webpack_require__){"use strict";module.exports=function(angularApp){function ink(){function isWindow(obj){return null!==obj&&obj===obj.window}function getWindow(elem){return isWindow(elem)?elem:9===elem.nodeType&&elem.defaultView}function offset(elem){var docElem,win,box={top:0,left:0},doc=elem&&elem.ownerDocument;return docElem=doc.documentElement,"undefined"!=typeof elem.getBoundingClientRect&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}}function hexToRgb(hex){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null}function convertStyle(obj){var style="";for(var a in obj)obj.hasOwnProperty(a)&&(style+=a+":"+obj[a]+";");return style}var $$,Ink=Ink||{};if(document&&document.querySelectorAll&&document.querySelectorAll.bind)try{$$=document.querySelectorAll.bind(document)}catch(e){}else if(window&&window.angular&&window.angular.element)$$=window.angular.element;else{var slicePolyfill=function(arr,start,end){var len=arr.length;start=null==start?0:0>start?Math.max(len+start,0):Math.min(start,len),end=null==end?len:0>end?Math.max(len+end,0):Math.min(end,len);for(var result=[];end>start;)result.push(arr[start++]);return result},bindPolyfill=function(fn,context,args){var argsArr=slicePolyfill(arguments,2);return function(){return fn.apply(context,argsArr.concat(slicePolyfill(arguments)))}};$$=bindPolyfill(document.querySelectorAll,document)}if(!$$)throw new Error("ionic material ink module could not create reference of DOM nodes");var Effect={duration:500,show:function(e){if(2===e.button)return!1;var el=this,ripple=document.createElement("div"),customColor=this.dataset.inkColor,customOpacity=this.dataset.inkOpacity,hasCustomRipple=customColor||customOpacity;ripple.className="ink-ripple",el.appendChild(ripple);var pos=offset(el),relativeY=e.pageY-pos.top,relativeX=e.pageX-pos.left,scale="scale("+el.clientWidth/100*2.5+")";"touches"in e&&(relativeY=e.touches[0].pageY-pos.top,relativeX=e.touches[0].pageX-pos.left),ripple.setAttribute("data-hold",Date.now()),ripple.setAttribute("data-scale",scale),ripple.setAttribute("data-x",relativeX),ripple.setAttribute("data-y",relativeY);var rippleStyle={top:relativeY+"px",left:relativeX+"px"};if(ripple.className=ripple.className+" ink-notransition",hasCustomRipple){var colorRgb;if(customColor){var fromHex=hexToRgb(customColor);colorRgb=fromHex.r+","+fromHex.g+","+fromHex.b}else colorRgb="0,0,0";customOpacity||(customOpacity=.2);var bg="rgba("+colorRgb+","+customOpacity+")";rippleStyle["background-color"]=bg}ripple.setAttribute("style",convertStyle(rippleStyle)),ripple.className=ripple.className.replace("ink-notransition",""),rippleStyle["-webkit-transform"]=scale,rippleStyle["-moz-transform"]=scale,rippleStyle["-ms-transform"]=scale,rippleStyle["-o-transform"]=scale,rippleStyle.transform=scale,rippleStyle.opacity="1",rippleStyle["-webkit-transition-duration"]=Effect.duration+"ms",rippleStyle["-moz-transition-duration"]=Effect.duration+"ms",rippleStyle["-o-transition-duration"]=Effect.duration+"ms",rippleStyle["transition-duration"]=Effect.duration+"ms",ripple.setAttribute("style",convertStyle(rippleStyle))},hide:function(){for(var el=this,ripple=(1.4*el.clientWidth,null),childrenLength=el.children.length,a=0;childrenLength>a;a++)-1===el.children[a].className.indexOf("ink-ripple")||(ripple=el.children[a]);if(!ripple)return!1;var relativeX=ripple.getAttribute("data-x"),relativeY=ripple.getAttribute("data-y"),scale=ripple.getAttribute("data-scale"),diff=Date.now()-Number(ripple.getAttribute("data-hold")),delay=500-diff;0>delay&&(delay=0),setTimeout(function(){var style={top:relativeY+"px",left:relativeX+"px",opacity:"0","-webkit-transition-duration":Effect.duration+"ms","-moz-transition-duration":Effect.duration+"ms","-o-transition-duration":Effect.duration+"ms","transition-duration":Effect.duration+"ms","-webkit-transform":scale,"-moz-transform":scale,"-ms-transform":scale,"-o-transform":scale,transform:scale};ripple.setAttribute("style",convertStyle(style)),setTimeout(function(){try{el.removeChild(ripple)}catch(e){return!1}},Effect.duration)},delay)},wrapInput:function(elements){for(var a=0;a<elements.length;a++){var el=elements[a];if("input"===el.tagName.toLowerCase()){var parent=el.parentNode;if("i"===parent.tagName.toLowerCase()&&-1!==parent.className.indexOf("ink")&&-1!==parent.className.indexOf("tab-item")&&-1!==parent.className.indexOf("button-fab")&&-1!==parent.className.indexOf("button-raised")&&-1!==parent.className.indexOf("button-flat")&&-1!==parent.className.indexOf("button-clear")&&-1!==parent.className.indexOf("button")&&-1!==parent.className.indexOf("item"))return!1;var wrapper=document.createElement("i");wrapper.className=el.className+" ink-input-wrapper";var elementStyle=el.getAttribute("style");elementStyle||(elementStyle=""),wrapper.setAttribute("style",elementStyle),el.className="ink-button-input",el.removeAttribute("style"),parent.replaceChild(wrapper,el),wrapper.appendChild(el)}}}};return Ink.displayEffect=function(options){options=options||{},"duration"in options&&(Effect.duration=options.duration);var selectors=".ink,.tab-item,.button-fab,.button-raised,.button-flat,.button-clear,a.item,.popup .button";Effect.wrapInput($$(selectors)),Array.prototype.forEach.call($$(selectors),function(i){"ontouchstart"in window?(i.addEventListener("touchstart",Effect.show,!1),i.addEventListener("touchend",Effect.hide,!1),i.addEventListener("touchcancel",Effect.hide,!1)):(i.addEventListener("mousedown",Effect.show,!1),i.addEventListener("mouseup",Effect.hide,!1),i.addEventListener("mouseleave",Effect.hide,!1))})},Ink}angularApp.factory("ionicMaterialInk",ink),ink.inject=[]}},function(module,exports,__webpack_require__){module.exports=function(angularApp){function Motion(){"use strict";function getViewportHeight(){return window.innerHeight}function showNotAnimatedElements(elements,total){for(var i=0;total>i;i++){var child=elements[i];child.className+=" in",child.className+=" done"}}function blinds(options){var defaults={finishDelayThrottle:2,finishSpeedPercent:.5,leftOffsetPercentage:.8,selector:".animate-blinds .item",startVelocity:1100};"undefined"==typeof options&&(options={}),options.finishDelayThrottle=options.finishDelayThrottle||defaults.finishDelayThrottle,options.finishSpeedPercent=options.finishSpeedPercent||defaults.finishSpeedPercent,options.leftOffsetPercentage=options.leftOffsetPercentage||defaults.leftOffsetPercentage,options.startVelocity=options.startVelocity||defaults.startVelocity,"undefined"==typeof options.selector&&(options.selector=defaults.selector);var isInvalidSelector="undefined"==typeof options.selector||""===options.selector;if(isInvalidSelector)return!1;for(var animateBlindsDom=document.querySelectorAll(options.selector),elementsCount=animateBlindsDom.length,elementAnimationCount=0,viewportHeight=getViewportHeight(),i=0;elementsCount>i&&animateBlindsDom[i].offsetTop<viewportHeight;i++)elementAnimationCount+=1;for(var speed=options.startVelocity,i=0;elementAnimationCount>i;i++){var child=animateBlindsDom[i],childOffset=child.getBoundingClientRect(),offset=childOffset.left*options.leftOffsetPercentage+childOffset.top,delay=parseFloat(offset/speed).toFixed(2);child.style.webkitTransitionDelay=delay+"s",child.style.transitionDelay=delay+"s",child.className+=" in"}setTimeout(function(){for(var i=0;elementAnimationCount>i;i++){var child=animateBlindsDom[i],childOffset=child.getBoundingClientRect(),offset=childOffset.left*options.leftOffsetPercentage+childOffset.top;parseFloat(offset/speed/options.finishDelayThrottle).toFixed(2);animateBlindsDom[i].className+=" done"}},speed*options.finishSpeedPercent),showNotAnimatedElements(animateBlindsDom,elementsCount)}function fadeSlideIn(options){var defaults={finishDelayThrottle:2,finishSpeedPercent:.72,leftOffsetPercentage:.8,selector:".animate-fade-slide-in .item",startVelocity:1100};"undefined"==typeof options&&(options={}),options.finishDelayThrottle=options.finishDelayThrottle||defaults.finishDelayThrottle,options.finishSpeedPercent=options.finishSpeedPercent||defaults.finishSpeedPercent,options.leftOffsetPercentage=options.leftOffsetPercentage||defaults.leftOffsetPercentage,options.startVelocity=options.startVelocity||defaults.startVelocity,"undefined"==typeof options.selector&&(options.selector=defaults.selector);var isInvalidSelector="undefined"==typeof options.selector||""===options.selector;if(isInvalidSelector)return!1;for(var animateFadeSlideInDom=document.querySelectorAll(options.selector),elementsCount=animateFadeSlideInDom.length,elementAnimationCount=0,viewportHeight=getViewportHeight(),i=0;elementsCount>i&&animateFadeSlideInDom[i].offsetTop<viewportHeight;i++)elementAnimationCount+=1;for(var speed=options.startVelocity,i=0;elementAnimationCount>i;i++){var child=animateFadeSlideInDom[i],childOffset=child.getBoundingClientRect(),offset=childOffset.left*options.leftOffsetPercentage+childOffset.top,delay=parseFloat(offset/speed).toFixed(2);child.style.webkitTransitionDelay=delay+"s",child.style.transitionDelay=delay+"s",child.className+=" in"}setTimeout(function(){for(var i=0;elementAnimationCount>i;i++){var child=animateFadeSlideInDom[i],childOffset=child.getBoundingClientRect(),offset=childOffset.left*options.leftOffsetPercentage+childOffset.top,delayValue=offset/speed/options.finishDelayThrottle;parseFloat(delayValue).toFixed(2)}animateFadeSlideInDom[0].className+=" done"},speed*options.finishSpeedPercent),showNotAnimatedElements(animateFadeSlideInDom,elementsCount)}function fadeSlideInRight(options){var defaults={finishDelayThrottle:2,finishSpeedPercent:.72,leftOffsetPercentage:.8,selector:".animate-fade-slide-in-right .item",startVelocity:1100};"undefined"==typeof options&&(options={}),options.finishDelayThrottle=options.finishDelayThrottle||defaults.finishDelayThrottle,options.finishSpeedPercent=options.finishSpeedPercent||defaults.finishSpeedPercent,options.leftOffsetPercentage=options.leftOffsetPercentage||defaults.leftOffsetPercentage,options.startVelocity=options.startVelocity||defaults.startVelocity,"undefined"==typeof options.selector&&(options.selector=defaults.selector);var isInvalidSelector="undefined"==typeof options.selector||""===options.selector;if(isInvalidSelector)return!1;for(var animateSlideInRightDom=document.querySelectorAll(options.selector),elementsCount=animateSlideInRightDom.length,elementAnimationCount=0,viewportHeight=getViewportHeight(),i=0;elementsCount>i&&animateSlideInRightDom[i].offsetTop<viewportHeight;i++)elementAnimationCount+=1;for(var speed=options.startVelocity,i=0;elementAnimationCount>i;i++){var child=animateSlideInRightDom[i],childOffset=child.getBoundingClientRect(),offset=childOffset.left*options.leftOffsetPercentage+childOffset.top,delay=parseFloat(offset/speed).toFixed(2);child.style.webkitTransitionDelay=delay+"s",child.style.transitionDelay=delay+"s",child.className+=" in"}setTimeout(function(){for(var i=0;elementAnimationCount>i;i++){var child=animateSlideInRightDom[i],childOffset=child.getBoundingClientRect(),offset=childOffset.left*options.leftOffsetPercentage+childOffset.top,delayValue=offset/speed/options.finishDelayThrottle;parseFloat(delayValue).toFixed(2)}animateSlideInRightDom[0].className+=" done"},speed*options.finishSpeedPercent),showNotAnimatedElements(animateSlideInRightDom,elementsCount)}function ripple(options){var defaults={finishDelayThrottle:2,finishSpeedPercent:.72,leftOffsetPercentage:.8,selector:".animate-ripple .item",startVelocity:1100};"undefined"==typeof options&&(options={}),options.finishDelayThrottle=options.finishDelayThrottle||defaults.finishDelayThrottle,options.finishSpeedPercent=options.finishSpeedPercent||defaults.finishSpeedPercent,options.leftOffsetPercentage=options.leftOffsetPercentage||defaults.leftOffsetPercentage,options.startVelocity=options.startVelocity||defaults.startVelocity,"undefined"==typeof options.selector&&(options.selector=defaults.selector);var isInvalidSelector="undefined"==typeof options.selector||""===options.selector;if(isInvalidSelector)return!1;for(var animateRippleDom=document.querySelectorAll(options.selector),elementsCount=animateRippleDom.length,elementAnimationCount=0,viewportHeight=getViewportHeight(),i=0;i<animateRippleDom.length&&animateRippleDom[i].offsetTop<viewportHeight;i++)elementAnimationCount+=1;for(var speed=options.startVelocity,i=0;elementAnimationCount>i;i++){var child=animateRippleDom[i],childOffset=child.getBoundingClientRect(),offset=childOffset.left*options.leftOffsetPercentage+childOffset.top,delay=parseFloat(offset/speed).toFixed(2);child.style.webkitTransitionDelay=delay+"s",child.style.transitionDelay=delay+"s",child.className+=" in"}setTimeout(function(){for(var i=0;elementAnimationCount>i;i++){var child=animateRippleDom[i],childOffset=child.getBoundingClientRect(),offset=childOffset.left*options.leftOffsetPercentage+childOffset.top,delayValue=offset/speed/options.finishDelayThrottle;parseFloat(delayValue).toFixed(2)}animateRippleDom[0].className+=" done"},speed*options.finishSpeedPercent),showNotAnimatedElements(animateRippleDom,elementsCount)}function panInLeft(options){"string"==typeof options&&(options={selector:options});var isInvalidSelector="undefined"==typeof options.selector||""===options.selector;if(isInvalidSelector)return!1;for(var animatePanInLeftDom=document.querySelectorAll(options.selector),elementAnimationCount=animatePanInLeftDom.length,i=0;elementAnimationCount>i;i++){var element=animatePanInLeftDom[i],classNameToRemove="animate-pan-in-left",indexOfClassNameToRemove=element.className.lastIndexOf(classNameToRemove);element.className=element.className.substr(0,indexOfClassNameToRemove)}}function pushDown(options){"string"==typeof options&&(options={selector:options});var isInvalidSelector="undefined"==typeof options.selector||""===options.selector;if(isInvalidSelector)return!1;for(var animatePushDownDom=document.querySelectorAll(options.selector),elementAnimationCount=animatePushDownDom.length,i=0;elementAnimationCount>i;i++){var element=animatePushDownDom[i],classNameToRemove=options.selector.split(".")[1],indexOfClassNameToRemove=element.className.lastIndexOf(classNameToRemove);element.className=element.className.substr(0,indexOfClassNameToRemove)}}function slideUp(options){"string"==typeof options&&(options={selector:options});var isInvalidSelector="undefined"==typeof options.selector||""===options.selector;if(isInvalidSelector)return!1;for(var animateSlideUpDom=document.querySelectorAll(options.selector),elementAnimationCount=animateSlideUpDom.length,i=0;elementAnimationCount>i;i++){var element=animateSlideUpDom[i],classNameToRemove=options.selector.split(".")[1],indexOfClassNameToRemove=element.className.lastIndexOf(classNameToRemove);element.className=element.className.substr(0,indexOfClassNameToRemove)}}var motion={blinds:blinds,fadeSlideIn:fadeSlideIn,fadeSlideInRight:fadeSlideInRight,panInLeft:panInLeft,pushDown:pushDown,ripple:ripple,slideUp:slideUp};return motion}angularApp.factory("ionicMaterialMotion",Motion),Motion.$inject=[]}}])}),define("app/animator/animator",["angular","ionicMaterial","coreapi"],function(angular){"use strict";return angular.module("mts.animator",["ionic-material"]).provider("mtsAnimator",function(){var self=null,provider=this;this.defaultOptions={animationName:"fadeSlideIn",finishDelayThrottle:2},this.setDefaultOptions=function(newDefaultOptions){angular.extend(provider.defaultOptions,newDefaultOptions)},this.$get=function($timeout,tqCoreConnector,ionicMaterialInk,ionicMaterialMotion){var MtsAnimator=function(){};return MtsAnimator.prototype._init=function(){},MtsAnimator.prototype.animateAsync=function(){return $timeout(self.animate,0)},MtsAnimator.prototype.animate=function(){try{ionicMaterialInk.displayEffect(provider.defaultOptions);var motionAnimatorMethod=ionicMaterialMotion[provider.defaultOptions.animationName];if(angular.isFunction(motionAnimatorMethod))motionAnimatorMethod.call(provider.defaultOptions);else{var theException=new TypeError("Unrecognized Motion animation method encountered: "+provider.defaultOptions.animationName);tqCoreConnector.logger.error(theException)}}catch(anException){}},null===self&&(self=new MtsAnimator,self._init()),self}})}),define("app/functional.config",["angular","components/settings/settings"],function(angular){return angular.module("mts.functional.config",["tq.settings"]).config(["$settingsProvider",function($settingsProvider){$settingsProvider.setSalesforceSettings({settingsApiName:"App_Functional_Settings__c",appFieldApiName:"App__c",themeFieldApiName:"Brand__c",map:{functionality:{myProfile:{directMessagingSwitch:{enabled:"MyProfile_DirectMessagingSwitch__c"},aboutMe:{enabled:"MyProfile_AboutMe__c"},edit:{enabled:"MyProfile_Editable__c"},travelPreferences:{enabled:"MyProfile_TravelPreferences__c"},marketingPreferences:{enabled:"MyProfile_MarketingPreferences__c"}},myBookings:{overview:{bookingAlert:{enabled:"MyBookings_BookingAlert__c"},TDAlert:{enabled:"MyBookings_TDAlert__c"},daysItinerary:{enabled:"MyBookings_DaysItinerary__c"},manageMyBooking:{enabled:"MyBookings_MMB__c"},viewMyInvoice:{enabled:"MyBookings_ViewMyInvoice__c"}},chatter:{enabled:"MyBookings_Chatter__c",postText:{enabled:"MyBookings_Chatter_PostText__c"},postPhoto:{enabled:"MyBookings_Chatter_PostPhoto__c"},share:{enabled:"MyBookings_Chatter_SocialShare__c"}},itinerary:{enabled:"MyBookings_Itinerary__c",comment:{enabled:"MyBookings_Comment_Itinerary_Item__c"}},journal:{enabled:"MyBookings_Journal__c",addNote:{enabled:"MyBookings_Journal_AddNote__c"},addPostcard:{enabled:"MyBookings_Journal_AddPostcard__c"},share:{enabled:"MyBookings_Journal_SocialShare__c"},addHashtag:{enabled:"MyBookings_Journal_AddHashtags__c"}},community:{enabled:"MyBookings_Community__c",details:{enabled:"MyBookings_Community_ViewDetails__c"},sendMessages:{enabled:"MyBookings_Community_SendMessages__c"},mute:{enabled:"MyBookings_Community_Mute__c"}}},myHorizon:{enabled:"MyHorizon__c",overview:{enabled:"MyHorizon_Overview__c"},brochures:{enabled:"MyHorizon_MyBrochures__c",request:{enabled:"MyHorizon_MyBrochures_Request__c"},eBrochures:{enabled:"MyHorizon_MyBrochures_eBrochures__c"}},quotes:{enabled:"MyHorizon_MyQuotes__c"},favourites:{enabled:"MyHorizon_MyFavourites__c"},hyperlinks:{enabled:"MyHorizon_Hyperlinks__c"}},destinations:{enabled:"Destinations__c",visited:{enabled:"Destinations_PlacesVisited__c"},bucketList:{enabled:"Destinations_MyBucketList__c"}}}}})}])}),define("app/app.settings",["angular","components/settings/settings"],function(angular){return angular.module("mts.app.settings",["tq.settings"]).config(["$settingsProvider",function($settingsProvider){$settingsProvider.setSalesforceSettings({settingsApiName:"App_Settings__c",level:"app",where:function(){return{ClientApp_ID__c:{$eq:TQ.config.Core.clientAppId}}},map:{appSettings:{policies:"Policies__c",hashtag:"Hashtag__c",ssoJsLibraryUrl:"SSO_JS_Library_URL__c",daysToArchive:"Past_Trip_Deactivation_In_Days__c",daysToActivate:"Upcoming_Trip_Activation_In_Days__c"}}})}])}),define("app/brand.settings",["angular","components/settings/settings"],function(angular){return angular.module("mts.brand.settings",["tq.settings"]).config(["$settingsProvider",function($settingsProvider){$settingsProvider.setSalesforceSettings({settingsApiName:"Brand_Settings__c",themeFieldApiName:"Name",map:{
brandSettings:{hashtags:"Hashtags__c",termsLink:"Terms_And_Conditions_Link__c",policyLink:"Privacy_Policy_Link__c",website:"Website__c"}}})}])}),define("app/trip/overview/overview",["angular","coreapi","ionicMaterial","components/loading/loading","youOne/tripbrowser/tripbrowser","acnNg/components/popup/generic/popup"],function(angular){return angular.module("mts.overview",["ui.router","ionic-material","tq.coreapi","tq.loading","ttc.tripbrowser","acn.popup"]).config(function($stateProvider){$stateProvider.state("trip.overview",{url:"",cache:!1,views:{"contentView@trip":{templateUrl:"apps/mts/trip/overview/overview.tpl.html",controller:"MtsOverviewCtrl"}}})}).controller("MtsOverviewCtrl",function($scope,$state,ttcPopupAbout,ttcTripBrowser,tqErrorListPopup,selectedPassenger,selectedTourProduct,selectedPreRegistration,travelDirector,selectedItineraryItems,$settings,tqCoreConnector,$ionicLoading,acnPopup,$timeout){$scope.menuIsOpened=!1,$scope.touchProcessing=!1,$scope.isTDAlertExpired=null!=selectedPassenger.rawRecord.Director_Alert_Expiry__c&&new Date(selectedPassenger.rawRecord.Director_Alert_Expiry__c).getTime()<(new Date).getTime(),travelDirector&&travelDirector.rawRecord&&travelDirector.rawRecord.AboutMe&&(travelDirector.rawRecord.AboutMe=travelDirector.rawRecord.AboutMe.replace(/\s/g," ")),this.shouldDisplayCompleteRegistrationMessage=function(){var endTime=new Date(selectedPassenger.rawRecord.Passenger_End_Date__c).getTime(),currentTime=(new Date).getTime();return selectedPreRegistration&&endTime>=currentTime&&!selectedPreRegistration.rawRecord.Check_In_Completed_Date__c&&"Y"!=selectedPreRegistration.rawRecord.Check_In_Completed_Date__c};var getPersonUrlParams=function(){var firstName=tqCoreConnector.user.userInfo.getUserFieldValue("FirstName"),lastName=tqCoreConnector.user.userInfo.getUserFieldValue("LastName");return firstName&&(firstName=firstName.toLowerCase().replace(" ","+")),lastName&&(lastName=lastName.toLowerCase().replace(" ","+")),"?firstName="+(firstName||"")+"&lastName="+(lastName||"")},getServiceUrl=function(){return"https://itropics.com/ManageMyBooking/"+selectedPassenger.rawRecord.Selling_Company_Short_Name__c+"/#/FindYourBooking/"+selectedPassenger.rawRecord.Booking_Name__c+getPersonUrlParams()+"&afterLogin=%23%2FBooking%2FFinancials%2FInvoice%2FA011094"},getManageMyBookingUrl=function(){return"https://itropics.com/ManageMyBooking/"+selectedPassenger.rawRecord.Selling_Company_Short_Name__c+"/#/Booking/Summary/"+selectedPassenger.rawRecord.Booking_Name__c+getPersonUrlParams()},getInvoiceUrl=function(){return"https://itropics.com/ManageMyBooking/"+selectedPassenger.rawRecord.Selling_Company_Short_Name__c+"/#/Booking/Financials/Invoice/"+selectedPassenger.rawRecord.Booking_Name__c+getPersonUrlParams()};$scope.toggleMenu=function(){$scope.touchProcessing||($scope.touchProcessing=!0,$scope.menuIsOpened=!$scope.menuIsOpened,$timeout(function(){$scope.touchProcessing=!1},200))},$scope.linkClick=function($event){$scope.isPastTrip&&$event.preventDefault()},$scope.alertSenderCompanyName=selectedPassenger&&selectedPassenger.rawRecord.Brand__c||"TTC",$scope.invoiceLinkDisplayed=selectedPassenger&&"Client Direct"===selectedPassenger.rawRecord.Booking_Type__c,$scope.getServiceUrl||($scope.getServiceUrl=function(){return getServiceUrl()}),$scope.invoiceUrl=getInvoiceUrl(),$scope.mmbUrl=getManageMyBookingUrl(),$scope.completeRegistrationUrl=getManageMyBookingUrl(),$scope.shouldShowTravelDirector=function(){return travelDirector||(new Date).getTime()<new Date(selectedPassenger.rawRecord.Passenger_Start_Date__c).getTime()},$scope.shouldShowTravelAlert=this.shouldDisplayCompleteRegistrationMessage();var startDate=selectedPassenger.rawRecord.Passenger_Start_Date__c;if($scope.currentDayNumber=ttcTripBrowser.getCurrentDayNumber(startDate,selectedItineraryItems),$scope.currentItineraryItem=ttcTripBrowser.getCurrentItineraryItem(startDate,selectedItineraryItems),$scope.currentItineraryItemReview=null,$scope.itineraryItemThumbsUp=!1,$scope.itineraryItemThumbsDown=!1,$scope.shouldShowCurrentItineraryItem=function(){return selectedItineraryItems.length>0&&$scope.currentDayNumber>0&&$scope.currentItineraryItem&&$scope.currentItineraryItem.rawRecord&&!$scope.isFutureTrip},$scope.displayItineraryItems=function(){$state.go("trip.itinerary")},$scope.currentItineraryItem&&$scope.currentItineraryItem.rawRecord){$scope.currentItineraryItem.rawRecord.Start_Day__c;$scope.currentDate=new Date,ttcTripBrowser.getItineraryItemReview(selectedPassenger,$scope.currentItineraryItem).then(function(itineraryItemReview){$scope.updateItineraryItemReview(itineraryItemReview)})}else $scope.currentDate=null;$scope.updateItineraryItemReview=function(itineraryItemReview){$scope.currentItineraryItemReview=itineraryItemReview,angular.isUndefined($scope.currentItineraryItemReview)||null==$scope.currentItineraryItemReview||($scope.itineraryItemThumbsUp="Like"===$scope.currentItineraryItemReview.rawRecord.Rating__c,$scope.itineraryItemThumbsDown="Dislike"===$scope.currentItineraryItemReview.rawRecord.Rating__c,$scope.itineraryItemReviewShowComment=!1)},$scope.reviewComment={comment:""},$scope.itineraryItemReviewShowComment=!1,$scope.itineraryItemReviewComment=function(){$settings.get("functionality.myBookings.itinerary.comment.enabled",!0)?null==$scope.currentItineraryItemReview&&($scope.itineraryItemThumbsDown=!0,$scope.itineraryItemReviewShowComment=!0):$scope.itineraryItemThumb("down")},$scope.itineraryItemReviewCancelComment=function(){$scope.itineraryItemThumbsDown=!1,$scope.itineraryItemReviewShowComment=!1},$scope.itineraryItemThumb=function(thumbType){if(null==$scope.currentItineraryItemReview){var itineraryItemReview=tqCoreConnector.record.getTrackedObjectRecordInstance("Itinerary_Item_Review__c");if(itineraryItemReview.rawRecord.Passenger__c=selectedPassenger.rawRecord.Id,itineraryItemReview.rawRecord.Itinerary_Item__c=$scope.currentItineraryItem.rawRecord.Id,"down"==thumbType){if((angular.isUndefined($scope.reviewComment)||0===$scope.reviewComment.comment.length)&&$settings.get("functionality.myBookings.itinerary.comment.enabled",!0))return void acnPopup.show({title:"Error",template:"Please provide your comment on this negative experience",cssClass:"you-one-popup"});itineraryItemReview.rawRecord.Rating__c="Dislike",itineraryItemReview.rawRecord.Comment__c=$scope.reviewComment.comment}else itineraryItemReview.rawRecord.Rating__c="Like";acnPopup.show({title:"You will not be able to change your feedback once submitted. Do you want to proceed?",cancelText:"NO",okText:"YES",cssClass:"you-one-confirmation-popup",type:acnPopup.TYPE.CONFIRM}).then(function(affermative){affermative&&($ionicLoading.show(),tqCoreConnector.storage.upsert(itineraryItemReview).then(function(response){tqCoreConnector.utils.isResponseSuccessful(response)?($scope.updateItineraryItemReview(itineraryItemReview),$ionicLoading.hide(),acnPopup.show({title:"Thanks",template:"Thank you for your feedback",cssClass:"you-one-popup"})):tqErrorListPopup.showResponseErrors(response,{subTitle:"Itinerary review hasn't been updated successfully because of next errors: "})},function(error){acnPopup.show({title:"Operation failed",template:"Itinerary Review saving operation has been failed. Please check your connection and try again",cssClass:"you-one-popup"})})["finally"](function(){$ionicLoading.hide()}))})}}})});try{window.FB||function(window){var __annotator,__bodyWrapper,__w,__t,self=window,document=window.document,undefined=void 0,setTimeout=window.setTimeout,setInterval=window.setInterval,clearTimeout=window.clearTimeout,clearInterval=window.clearInterval,__transform_includes={};!function(){var a={},b=function(i,j){if(!i&&!j)return null;var k={};return"undefined"!=typeof i&&(k.type=i),"undefined"!=typeof j&&(k.signature=j),k},c=function(i,j){return b(i&&/^[A-Z]/.test(i)?i:undefined,j&&(j.params&&j.params.length||j.returns)?"function("+(j.params?j.params.map(function(k){return/\?/.test(k)?"?"+k.replace("?",""):k}).join(","):"")+")"+(j.returns?":"+j.returns:""):undefined)},d=function(i,j,k){return i},e=function(i,j,k){if("sourcemeta"in __transform_includes&&(i.__SMmeta=j),"typechecks"in __transform_includes){var l=c(j?j.name:undefined,k);l&&__w(i,l)}return i},f=function(i,j,k){return k.apply(i,j)},g=function(i,j,k,l){l&&l.params&&__t.apply(i,l.params);var m=k.apply(i,j);return l&&l.returns&&__t([m,l.returns]),m},h=function(i,j,k,l,m){if(m){m.callId||(m.callId=m.module+":"+(m.line||0)+":"+(m.column||0));var n=m.callId;a[n]=(a[n]||0)+1}return k.apply(i,j)};"undefined"==typeof __transform_includes?(__annotator=d,__bodyWrapper=f):(__annotator=e,"codeusage"in __transform_includes?(__annotator=d,__bodyWrapper=h,__bodyWrapper.getCodeUsage=function(){return a},__bodyWrapper.clearCodeUsage=function(){a={}}):__bodyWrapper="typechecks"in __transform_includes?g:f)}(),__t=function(a){return a[0]},__w=function(a){return a};var require,__d;!function(a){var b={},c={},d=["global","require","requireDynamic","requireLazy","module","exports"];require=function(e,f){if(c.hasOwnProperty(e))return c[e];if(!b.hasOwnProperty(e)){if(f)return null;throw new Error("Module "+e+" has not been defined")}for(var j,g=b[e],h=g.deps,i=g.factory.length,k=[],l=0;i>l;l++){switch(h[l]){case"module":j=g;break;case"exports":j=g.exports;break;case"global":j=a;break;case"require":j=require;break;case"requireDynamic":j=require;break;case"requireLazy":j=null;break;default:j=require.call(null,h[l])}k.push(j)}return g.factory.apply(a,k),c[e]=g.exports,g.exports},require.__markCompiled=function(){},__d=function(e,f,g,h){"function"==typeof g?(b[e]={factory:g,deps:d.concat(f),exports:{}},3===h&&require.call(null,e)):c[e]=g}}(this),__d("ES5ArrayPrototype",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};h.map=function(i,j){if("function"!=typeof i)throw new TypeError;var k,l=this.length,m=new Array(l);for(k=0;l>k;++k)k in this&&(m[k]=i.call(j,this[k],k,this));return m},h.forEach=function(i,j){h.map.call(this,i,j)},h.filter=function(i,j){if("function"!=typeof i)throw new TypeError;var k,l,m=this.length,n=[];for(k=0;m>k;++k)k in this&&(l=this[k],i.call(j,l,k,this)&&n.push(l));return n},h.every=function(i,j){if("function"!=typeof i)throw new TypeError;for(var k=new Object(this),l=k.length,m=0;l>m;m++)if(m in k&&!i.call(j,k[m],m,k))return!1;return!0},h.some=function(i,j){if("function"!=typeof i)throw new TypeError;for(var k=new Object(this),l=k.length,m=0;l>m;m++)if(m in k&&i.call(j,k[m],m,k))return!0;return!1},h.indexOf=function(i,j){var k=this.length;for(j|=0,0>j&&(j+=k);k>j;j++)if(j in this&&this[j]===i)return j;return-1},f.exports=h},null),__d("ES5FunctionPrototype",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};h.bind=function(i){function l(){return j.apply(i,k.concat(Array.prototype.slice.call(arguments)))}if("function"!=typeof this)throw new TypeError("Bind must be called on a function");var j=this,k=Array.prototype.slice.call(arguments,1);return l.displayName="bound:"+(j.displayName||j.name||"(?)"),l.toString=function(){return"bound: "+j},l},f.exports=h},null),__d("ES5StringPrototype",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};h.trim=function(){if(null==this)throw new TypeError("String.prototype.trim called on null or undefined");return String.prototype.replace.call(this,/^\s+|\s+$/g,"")},h.startsWith=function(i){var j=String(this);if(null==this)throw new TypeError("String.prototype.startsWith called on null or undefined");var k=arguments.length>1?Number(arguments[1]):0;isNaN(k)&&(k=0);var l=Math.min(Math.max(k,0),j.length);return j.indexOf(String(i),k)==l},h.endsWith=function(i){var j=String(this);if(null==this)throw new TypeError("String.prototype.endsWith called on null or undefined");var k=j.length,l=String(i),m=arguments.length>1?Number(arguments[1]):k;isNaN(m)&&(m=0);var n=Math.min(Math.max(m,0),k),o=n-l.length;return 0>o?!1:j.lastIndexOf(l,o)==o},h.contains=function(i){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");var j=String(this),k=arguments.length>1?Number(arguments[1]):0;return isNaN(k)&&(k=0),-1!=j.indexOf(String(i),k)},h.repeat=function(i){if(null==this)throw new TypeError("String.prototype.repeat called on null or undefined");var j=String(this),k=i?Number(i):0;if(isNaN(k)&&(k=0),0>k||k===1/0)throw RangeError();if(1===k)return j;if(0===k)return"";for(var l="";k;)1&k&&(l+=j),(k>>=1)&&(j+=j);return l},f.exports=h},null),__d("ES5Array",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};h.isArray=function(i){return"[object Array]"==Object.prototype.toString.call(i)},f.exports=h},null),__d("ie8DontEnum",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","prototypeIsEnumerable","constructor"],i={}.hasOwnProperty,j=function(){};({toString:!0}).propertyIsEnumerable("toString")&&(j=function(k,l){for(var m=0;m<h.length;m++){var n=h[m];i.call(k,n)&&l(n)}}),f.exports=j},null),__d("ES5Object",["ie8DontEnum"],function(b,c,d,e,f,g,h){function k(){}c.__markCompiled&&c.__markCompiled();var i={}.hasOwnProperty,j={};j.create=function(l){var m=typeof l;if("object"!=m&&"function"!=m)throw new TypeError("Object prototype may only be a Object or null");return k.prototype=l,new k},j.keys=function(l){var m=typeof l;if("object"!=m&&"function"!=m||null===l)throw new TypeError("Object.keys called on non-object");var n=[];for(var o in l)i.call(l,o)&&n.push(o);return h(l,function(p){return n.push(p)}),n},f.exports=j},null),__d("ES5Date",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};h.now=function(){return(new Date).getTime()},f.exports=h},null),__d("JSON3",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled(),function(){var i,j,k,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,da,ea,fa,h={}.toString,l=f.exports={},m='{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',ca=new Date(-0xc782b5b800cec);try{ca=-109252==ca.getUTCFullYear()&&0===ca.getUTCMonth()&&1==ca.getUTCDate()&&10==ca.getUTCHours()&&37==ca.getUTCMinutes()&&6==ca.getUTCSeconds()&&708==ca.getUTCMilliseconds()}catch(ga){}if(ca||(da=Math.floor,ea=[0,31,59,90,120,151,181,212,243,273,304,334],fa=function(ha,ia){return ea[ia]+365*(ha-1970)+da((ha-1969+(ia=+(ia>1)))/4)-da((ha-1901+ia)/100)+da((ha-1601+ia)/400)}),"object"==typeof JSON&&JSON&&(l.stringify=JSON.stringify,l.parse=JSON.parse),n="function"==typeof l.stringify&&!fa){(ca=function(){return 1}).toJSON=ca;try{n="0"===l.stringify(0)&&"0"===l.stringify(new Number)&&'""'==l.stringify(new String)&&l.stringify(h)===k&&l.stringify(k)===k&&l.stringify()===k&&"1"===l.stringify(ca)&&"[1]"==l.stringify([ca])&&"[null]"==l.stringify([k])&&"null"==l.stringify(null)&&"[null,null,null]"==l.stringify([k,h,null])&&l.stringify({result:[ca,!0,!1,null,"\0\b\n\f\r\t"]})==m&&"1"===l.stringify(null,ca)&&"[\n 1,\n 2\n]"==l.stringify([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l.stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l.stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l.stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l.stringify(new Date(-1))}catch(ga){n=!1}}if("function"==typeof l.parse)try{if(0===l.parse("0")&&!l.parse(!1)&&(ca=l.parse(m),s=5==ca.A.length&&1==ca.A[0])){try{s=!l.parse('"\t"')}catch(ga){}if(s)try{s=1!=l.parse("01")}catch(ga){}}}catch(ga){s=!1}ca=m=null,n&&s||((i={}.hasOwnProperty)||(i=function(ha){var ja,ia={};return(ia.__proto__=null,ia.__proto__={toString:1},ia).toString!=h?i=function(ka){var la=this.__proto__,ma=ka in(this.__proto__=null,this);return this.__proto__=la,ma}:(ja=ia.constructor,i=function(ka){var la=(this.constructor||ja).prototype;return ka in this&&!(ka in la&&this[ka]===la[ka])}),ia=null,i.call(this,ha)}),j=function(ha,ia){var ka,la,ma,na,ja=0;(ka=function(){this.valueOf=0}).prototype.valueOf=0,la=new ka;for(ma in la)i.call(la,ma)&&ja++;return ka=la=null,ja?na=2==ja?function(oa,pa){var sa,qa={},ra="[object Function]"==h.call(oa);for(sa in oa)ra&&"prototype"==sa||i.call(qa,sa)||!(qa[sa]=1)||!i.call(oa,sa)||pa(sa)}:function(oa,pa){var ra,sa,qa="[object Function]"==h.call(oa);for(ra in oa)qa&&"prototype"==ra||!i.call(oa,ra)||(sa="constructor"===ra)||pa(ra);(sa||i.call(oa,ra="constructor"))&&pa(ra)}:(la=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],na=function(oa,pa){var ra,sa,qa="[object Function]"==h.call(oa);for(ra in oa)qa&&"prototype"==ra||!i.call(oa,ra)||pa(ra);for(sa=la.length;ra=la[--sa];i.call(oa,ra)&&pa(ra));}),na(ha,ia)},n||(o={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},p=function(ha,ia){return("000000"+(ia||0)).slice(-ha)},q=function(ha){for(var ka,ia='"',ja=0;ka=ha.charAt(ja);ja++)ia+='\\"\b\f\n\r\t'.indexOf(ka)>-1?o[ka]:" ">ka?"\\u00"+p(2,ka.charCodeAt(0).toString(16)):ka;return ia+'"'},r=function(ha,ia,ja,ka,la,ma,na){var pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,oa=ia[ha];if("object"==typeof oa&&oa)if(pa=h.call(oa),"[object Date]"!=pa||i.call(oa,"toJSON"))"function"==typeof oa.toJSON&&("[object Number]"!=pa&&"[object String]"!=pa&&"[object Array]"!=pa||i.call(oa,"toJSON"))&&(oa=oa.toJSON(ha));else if(oa>-1/0&&1/0>oa){if(fa){for(sa=da(oa/864e5),qa=da(sa/365.2425)+1970-1;fa(qa+1,0)<=sa;qa++);for(ra=da((sa-fa(qa,0))/30.42);fa(qa,ra+1)<=sa;ra++);sa=1+sa-fa(qa,ra),ta=(oa%864e5+864e5)%864e5,ua=da(ta/36e5)%24,va=da(ta/6e4)%60,wa=da(ta/1e3)%60,xa=ta%1e3}else qa=oa.getUTCFullYear(),ra=oa.getUTCMonth(),sa=oa.getUTCDate(),ua=oa.getUTCHours(),va=oa.getUTCMinutes(),wa=oa.getUTCSeconds(),xa=oa.getUTCMilliseconds();oa=(0>=qa||qa>=1e4?(0>qa?"-":"+")+p(6,0>qa?-qa:qa):p(4,qa))+"-"+p(2,ra+1)+"-"+p(2,sa)+"T"+p(2,ua)+":"+p(2,va)+":"+p(2,wa)+"."+p(3,xa)+"Z"}else oa=null;if(ja&&(oa=ja.call(ia,ha,oa)),null===oa)return"null";if(pa=h.call(oa),"[object Boolean]"==pa)return""+oa;if("[object Number]"==pa)return oa>-1/0&&1/0>oa?""+oa:"null";if("[object String]"==pa)return q(oa);if("object"==typeof oa){for(bb=na.length;bb--;)if(na[bb]===oa)throw TypeError();if(na.push(oa),ya=[],cb=ma,ma+=la,"[object Array]"==pa){for(ab=0,bb=oa.length;bb>ab;db||(db=!0),ab++)za=r(ab,oa,ja,ka,la,ma,na),ya.push(za===k?"null":za);return db?la?"[\n"+ma+ya.join(",\n"+ma)+"\n"+cb+"]":"["+ya.join(",")+"]":"[]"}return j(ka||oa,function(eb){var fb=r(eb,oa,ja,ka,la,ma,na);fb!==k&&ya.push(q(eb)+":"+(la?" ":"")+fb),db||(db=!0)}),db?la?"{\n"+ma+ya.join(",\n"+ma)+"\n"+cb+"}":"{"+ya.join(",")+"}":"{}"}},l.stringify=function(ha,ia,ja){var ka,la,ma,na,oa,pa;if("function"==typeof ia||"object"==typeof ia&&ia)if("[object Function]"==h.call(ia))la=ia;else if("[object Array]"==h.call(ia))for(ma={},na=0,oa=ia.length;oa>na;pa=ia[na++],("[object String]"==h.call(pa)||"[object Number]"==h.call(pa))&&(ma[pa]=1));if(ja)if("[object Number]"==h.call(ja)){if((ja-=ja%1)>0)for(ka="",ja>10&&(ja=10);ka.length<ja;ka+=" ");}else"[object String]"==h.call(ja)&&(ka=ja.length<=10?ja:ja.slice(0,10));return r("",(pa={},pa[""]=ha,pa),la,ma,ka,"",[])}),s||(t=String.fromCharCode,u={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"\t",n:"\n",f:"\f",r:"\r"},v=function(){throw aa=ba=null,SyntaxError()},w=function(){for(var ja,ka,la,ma,na,ha=ba,ia=ha.length;ia>aa;)if(ja=ha.charAt(aa),"\t\r\n ".indexOf(ja)>-1)aa++;else{if("{}[]:,".indexOf(ja)>-1)return aa++,ja;if('"'==ja){for(ka="@",aa++;ia>aa;)if(ja=ha.charAt(aa)," ">ja)v();else if("\\"==ja)if(ja=ha.charAt(++aa),'\\"/btnfr'.indexOf(ja)>-1)ka+=u[ja],aa++;else if("u"==ja){for(la=++aa,ma=aa+4;ma>aa;aa++)ja=ha.charAt(aa),ja>="0"&&"9">=ja||ja>="a"&&"f">=ja||ja>="A"&&"F">=ja||v();ka+=t("0x"+ha.slice(la,aa))}else v();else{if('"'==ja)break;ka+=ja,aa++}if('"'==ha.charAt(aa))return aa++,ka;v()}else{if(la=aa,"-"==ja&&(na=!0,ja=ha.charAt(++aa)),ja>="0"&&"9">=ja){for("0"==ja&&(ja=ha.charAt(aa+1),ja>="0"&&"9">=ja)&&v(),na=!1;ia>aa&&(ja=ha.charAt(aa),ja>="0"&&"9">=ja);aa++);if("."==ha.charAt(aa)){for(ma=++aa;ia>ma&&(ja=ha.charAt(ma),ja>="0"&&"9">=ja);ma++);ma==aa&&v(),aa=ma}if(ja=ha.charAt(aa),"e"==ja||"E"==ja){for(ja=ha.charAt(++aa),("+"==ja||"-"==ja)&&aa++,ma=aa;ia>ma&&(ja=ha.charAt(ma),ja>="0"&&"9">=ja);ma++);ma==aa&&v(),aa=ma}return+ha.slice(la,aa)}if(na&&v(),"true"==ha.slice(aa,aa+4))return aa+=4,!0;if("false"==ha.slice(aa,aa+5))return aa+=5,!1;if("null"==ha.slice(aa,aa+4))return aa+=4,null;v()}}return"$"},x=function(ha){var ia,ja;if("$"==ha&&v(),"string"==typeof ha){if("@"==ha.charAt(0))return ha.slice(1);if("["==ha){for(ia=[];ha=w(),"]"!=ha;ja||(ja=!0))ja&&(","==ha?(ha=w(),"]"==ha&&v()):v()),","==ha&&v(),ia.push(x(ha));return ia}if("{"==ha){for(ia={};ha=w(),"}"!=ha;ja||(ja=!0))ja&&(","==ha?(ha=w(),"}"==ha&&v()):v()),(","==ha||"string"!=typeof ha||"@"!=ha.charAt(0)||":"!=w())&&v(),ia[ha.slice(1)]=x(w());return ia}v()}return ha},z=function(ha,ia,ja){var ka=y(ha,ia,ja);ka===k?delete ha[ia]:ha[ia]=ka},y=function(ha,ia,ja){var la,ka=ha[ia];if("object"==typeof ka&&ka)if("[object Array]"==h.call(ka))for(la=ka.length;la--;)z(ka,la,ja);else j(ka,function(ma){z(ka,ma,ja)});return ja.call(ha,ia,ka)},l.parse=function(ha,ia){aa=0,ba=ha;var ja=x(w());return"$"!=w()&&v(),aa=ba=null,ia&&"[object Function]"==h.call(ia)?y((ca={},ca[""]=ja,ca),"",ia):ja}))}.call(this)},null,{}),__d("ES6Object",["ie8DontEnum"],function(b,c,d,e,f,g,h){c.__markCompiled&&c.__markCompiled();var i={}.hasOwnProperty,j={assign:function(k){if(null==k)throw new TypeError("Object.assign target cannot be null or undefined");k=Object(k);for(var l=arguments.length,m=Array(l>1?l-1:0),n=1;l>n;n++)m[n-1]=arguments[n];for(var o=0;o<m.length;o++){var p=m[o];if(null!=p){p=Object(p);for(var q in p)i.call(p,q)&&(k[q]=p[q]);h(p,function(r){return k[r]=p[r]})}}return k},is:function(k,l){return k===l?0!==k||1/k===1/l:k!==k&&l!==l}};f.exports=j},null),__d("ES6ArrayPrototype",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={find:function(i,j){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof i)throw new TypeError("predicate must be a function");var k=h.findIndex.call(this,i,j);return-1===k?void 0:this[k]},findIndex:function(i,j){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof i)throw new TypeError("predicate must be a function");for(var k=Object(this),l=k.length>>>0,m=0;l>m;m++)if(i.call(j,k[m],m,k))return m;return-1}};f.exports=h},null),__d("ES6DatePrototype",[],function(b,c,d,e,f,g){function h(j){return(10>j?"0":"")+j}c.__markCompiled&&c.__markCompiled();var i={toISOString:function(){if(!isFinite(this))throw new Error("Invalid time value");var j=this.getUTCFullYear();return j=(0>j?"-":j>9999?"+":"")+("00000"+Math.abs(j)).slice(j>=0&&9999>=j?-4:-6),j+"-"+h(this.getUTCMonth()+1)+"-"+h(this.getUTCDate())+"T"+h(this.getUTCHours())+":"+h(this.getUTCMinutes())+":"+h(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}};f.exports=i},null),__d("ES6Number",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={isFinite:function(i){return"number"==typeof i&&isFinite(i)},isNaN:function(i){return"number"==typeof i&&isNaN(i)}};f.exports=h},null),__d("ES7StringPrototype",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};h.trimLeft=function(){return this.replace(/^\s+/,"")},h.trimRight=function(){return this.replace(/\s+$/,"")},f.exports=h},null),__d("ES",["ES5ArrayPrototype","ES5FunctionPrototype","ES5StringPrototype","ES5Array","ES5Object","ES5Date","JSON3","ES6Object","ES6ArrayPrototype","ES6DatePrototype","ES6Number","ES7StringPrototype"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function y(aa){for(var ba in aa)if(aa.hasOwnProperty(ba)){var ca=aa[ba],da=ba.split("."),ea=2==da.length?window[da[0]][da[1]]:window[ba];for(var fa in ca)if(ca.hasOwnProperty(fa)){var ga=ea[fa];u[ba+"."+fa]=ga&&/\{\s+\[native code\]\s\}/.test(ga)?ga:ca[fa]}}}function z(aa,ba,ca){var da=ca?t.call(aa).slice(8,-1)+".prototype":aa,ea=u[da+"."+ba]||aa[ba];if("function"==typeof ea){for(var fa=arguments.length,ga=Array(fa>3?fa-3:0),ha=3;fa>ha;ha++)ga[ha-3]=arguments[ha];return ea.apply(aa,ga)}}c.__markCompiled&&c.__markCompiled();var t={}.toString,u={"JSON.stringify":n.stringify,"JSON.parse":n.parse},v={"Array.prototype":h,"Function.prototype":i,"String.prototype":j,Object:l,Array:k,Date:m},w={Object:o,"Array.prototype":p,"Date.prototype":q,Number:r},x={"String.prototype":s};y(v),y(w),y(x),f.exports=z},null),__d("sdk.babelHelpers",["ES5FunctionPrototype","ES5Object","ES6Object"],function(b,c,d,e,f,g,h,i,j){c.__markCompiled&&c.__markCompiled();var k={},l=Object.prototype.hasOwnProperty;k.inherits=function(m,n){return j.assign(m,n),m.prototype=i.create(n&&n.prototype),m.prototype.constructor=m,m.__superConstructor__=n,n},k._extends=j.assign,k.objectWithoutProperties=function(m,n){var o={};for(var p in m)!l.call(m,p)||n.indexOf(p)>=0||(o[p]=m[p]);return o},k.taggedTemplateLiteralLoose=function(m,n){return m.raw=n,m},k.bind=h.bind,f.exports=k},null);var ES=require("ES"),babelHelpers=require("sdk.babelHelpers");__d("JSSDKRuntimeConfig",[],{locale:"en_US",rtl:!1,revision:"1981648"}),__d("JSSDKConfig",[],{bustCache:!0,tagCountLogRate:.01,errorHandling:{rate:4},usePluginPipe:!0,features:{dialog_resize_refactor:!0,allow_non_canvas_app_events:!1,event_subscriptions_log:{rate:.01,value:1e4},should_force_single_dialog_instance:!0,js_sdk_force_status_on_load:{rate:.1},kill_fragment:!0,xfbml_profile_pic_server:!0,error_handling:{rate:4},e2e_ping_tracking:{rate:1e-6},xd_timeout:{rate:4,value:3e4},use_bundle:!0,launch_payment_dialog_via_pac:{rate:100},plugin_tags_blacklist:["recommendations_bar","registration","activity","recommendations","facepile"],should_log_response_error:!0},api:{mode:"warn",whitelist:["AppEvents","AppEvents.EventNames","AppEvents.ParameterNames","AppEvents.activateApp","AppEvents.logEvent","AppEvents.logPurchase","Canvas","Canvas.Prefetcher","Canvas.Prefetcher.addStaticResource","Canvas.Prefetcher.setCollectionMode","Canvas.getPageInfo","Canvas.hideFlashElement","Canvas.scrollTo","Canvas.setAutoGrow","Canvas.setDoneLoading","Canvas.setSize","Canvas.setUrlHandler","Canvas.showFlashElement","Canvas.startTimer","Canvas.stopTimer","Event","Event.subscribe","Event.unsubscribe","Music.flashCallback","Music.init","Music.send","Payment","Payment.cancelFlow","Payment.continueFlow","Payment.init","Payment.lockForProcessing","Payment.parse","Payment.setSize","Payment.unlockForProcessing","ThirdPartyProvider","ThirdPartyProvider.init","ThirdPartyProvider.sendData","UA","UA.nativeApp","XFBML","XFBML.RecommendationsBar","XFBML.RecommendationsBar.markRead","XFBML.parse","addFriend","api","getAccessToken","getAuthResponse","getLoginStatus","getUserID","init","login","logout","publish","share","ui"]},initSitevars:{enableMobileComments:1,iframePermissions:{read_stream:!1,manage_mailbox:!1,manage_friendlists:!1,read_mailbox:!1,publish_checkins:!0,status_update:!0,photo_upload:!0,video_upload:!0,sms:!1,create_event:!0,rsvp_event:!0,offline_access:!0,email:!0,xmpp_login:!1,create_note:!0,share_item:!0,export_stream:!1,publish_stream:!0,publish_likes:!0,ads_management:!1,contact_email:!0,access_private_data:!1,read_insights:!1,read_requests:!1,read_friendlists:!0,manage_pages:!1,physical_login:!1,manage_groups:!1,read_deals:!1}}}),__d("UrlMapConfig",[],{www:"www.facebook.com",m:"m.facebook.com",connect:"connect.facebook.net",business:"business.facebook.com",api_https:"api.facebook.com",api_read_https:"api-read.facebook.com",graph_https:"graph.facebook.com",fbcdn_http:"fbstatic-a.akamaihd.net",fbcdn_https:"fbstatic-a.akamaihd.net",cdn_http:"static.ak.facebook.com",cdn_https:"s-static.ak.facebook.com"}),__d("JSSDKXDConfig",[],{XdUrl:"/connect/xd_arbiter.php?version=41",XdBundleUrl:"/connect/xd_arbiter/YKPvjVoWVGb.js?version=41",Flash:{path:"https://connect.facebook.net/rsrc.php/v1/yW/r/yOZN1vHw3Z_.swf"},useCdn:!0}),__d("JSSDKCssConfig",[],{rules:'.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow-x:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}\n.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}\n.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}',
components:["css:fb.css.base","css:fb.css.dialog","css:fb.css.iframewidget"]}),__d("ApiClientConfig",[],{FlashRequest:{swfUrl:"https://connect.facebook.net/rsrc.php/v1/yd/r/mxzow1Sdmxr.swf"}}),__d("JSSDKCanvasPrefetcherConfig",[],{blacklist:[0x83d70a64a992],sampleRate:500}),__d("JSSDKPluginPipeConfig",[],{threshold:0,enabledApps:{0xbec51e4718e7:1,0xaa568c1d5c06:1}}),__d("QueryString",[],function(b,c,d,e,f,g){function h(l){var m=[];return ES(ES("Object","keys",!1,l).sort(),"forEach",!0,function(n){var o=l[n];if("undefined"!=typeof o)return null===o?void m.push(n):void m.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}),m.join("&")}function i(l,m){var n={};if(""===l)return n;for(var o=l.split("&"),p=0;p<o.length;p++){var q=o[p].split("=",2),r=decodeURIComponent(q[0]);if(m&&n.hasOwnProperty(r))throw new URIError("Duplicate key: "+r);n[r]=2===q.length?decodeURIComponent(q[1]):null}return n}function j(l,m){return l+(-1!==ES(l,"indexOf",!0,"?")?"&":"?")+("string"==typeof m?m:k.encode(m))}c.__markCompiled&&c.__markCompiled();var k={encode:h,decode:i,appendToUrl:j};f.exports=k},null),__d("ManagedError",[],function(b,c,d,e,f,g){function h(i,j){Error.prototype.constructor.call(this,i),this.message=i,this.innerError=j}c.__markCompiled&&c.__markCompiled(),h.prototype=new Error,h.prototype.constructor=h,f.exports=h},null),__d("AssertionError",["ManagedError"],function(b,c,d,e,f,g,h){function i(j){h.prototype.constructor.apply(this,arguments)}c.__markCompiled&&c.__markCompiled(),i.prototype=new h,i.prototype.constructor=i,f.exports=i},null),__d("sprintf",[],function(b,c,d,e,f,g){function h(i){for(var j=arguments.length,k=Array(j>1?j-1:0),l=1;j>l;l++)k[l-1]=arguments[l];var m=0;return i.replace(/%s/g,function(n){return k[m++]})}c.__markCompiled&&c.__markCompiled(),f.exports=h},null),__d("Assert",["AssertionError","sprintf"],function(b,c,d,e,f,g,h,i){function j(o,p){if("boolean"!=typeof o||!o)throw new h(p);return o}function k(o,p,q){var r;if(p===undefined)r="undefined";else if(null===p)r="null";else{var s=Object.prototype.toString.call(p);r=/\s(\w*)/.exec(s)[1].toLowerCase()}return j(-1!==ES(o,"indexOf",!0,r),q||i("Expression is of type %s, not %s",r,o)),p}function l(o,p,q){return j(p instanceof o,q||"Expression not instance of type"),p}function m(o,p){n["is"+o]=p,n["maybe"+o]=function(q,r){null!=q&&p(q,r)}}c.__markCompiled&&c.__markCompiled();var n={isInstanceOf:l,isTrue:j,isTruthy:function(o,p){return j(!!o,p)},type:k,define:function(o,p){o=o.substring(0,1).toUpperCase()+o.substring(1).toLowerCase(),m(o,function(q,r){j(p(q),r)})}};ES(["Array","Boolean","Date","Function","Null","Number","Object","Regexp","String","Undefined"],"forEach",!0,function(o){m(o,ES(k,"bind",!0,null,o.toLowerCase()))}),f.exports=n},null),__d("Type",["Assert"],function(b,c,d,e,f,g,h){function i(){var m=this.__mixins;if(m)for(var n=0;n<m.length;n++)m[n].apply(this,arguments)}function j(m,n){if(n instanceof m)return!0;if(n instanceof i)for(var o=0;o<n.__mixins.length;o++)if(n.__mixins[o]==m)return!0;return!1}function k(m,n){var o=m.prototype;ES("Array","isArray",!1,n)||(n=[n]);for(var p=0;p<n.length;p++){var q=n[p];"function"==typeof q&&(o.__mixins.push(q),q=q.prototype),ES(ES("Object","keys",!1,q),"forEach",!0,function(r){o[r]=q[r]})}}function l(m,n,o){function q(){}var p=n&&n.hasOwnProperty("constructor")?n.constructor:function(){this.parent.apply(this,arguments)};if(h.isFunction(p),m&&m.prototype instanceof i==!1)throw new Error("parent type does not inherit from Type");return m=m||i,q.prototype=m.prototype,p.prototype=new q,n&&ES("Object","assign",!1,p.prototype,n),p.prototype.constructor=p,p.parent=m,p.prototype.__mixins=m.prototype.__mixins?Array.prototype.slice.call(m.prototype.__mixins):[],o&&k(p,o),p.prototype.parent=function(){this.parent=m.prototype.parent,m.apply(this,arguments)},p.prototype.parentCall=function(r){return m.prototype[r].apply(this,Array.prototype.slice.call(arguments,1))},p.extend=function(r,s){return l(this,r,s)},p}c.__markCompiled&&c.__markCompiled(),ES("Object","assign",!1,i.prototype,{instanceOf:function(m){return j(m,this)}}),ES("Object","assign",!1,i,{extend:function(m,n){return"function"==typeof m?l.apply(null,arguments):l(null,m,n)},instanceOf:j}),f.exports=i},null),__d("ObservableMixin",[],function(b,c,d,e,f,g){function h(){this.__observableEvents={}}c.__markCompiled&&c.__markCompiled(),h.prototype={inform:function(i){for(var j=Array.prototype.slice.call(arguments,1),k=Array.prototype.slice.call(this.getSubscribers(i)),l=0;l<k.length;l++)if(null!==k[l])try{k[l].apply(this,j)}catch(m){setTimeout(function(){throw m},0)}return this},getSubscribers:function(i){return this.__observableEvents[i]||(this.__observableEvents[i]=[])},clearSubscribers:function(i){return i&&(this.__observableEvents[i]=[]),this},clearAllSubscribers:function(){return this.__observableEvents={},this},subscribe:function(i,j){var k=this.getSubscribers(i);return k.push(j),this},unsubscribe:function(i,j){for(var k=this.getSubscribers(i),l=0;l<k.length;l++)if(k[l]===j){k.splice(l,1);break}return this},monitor:function(i,j){if(!j()){var k=ES(function(l){j.apply(j,arguments)&&this.unsubscribe(i,k)},"bind",!0,this);this.subscribe(i,k)}return this}},f.exports=h},null),__d("sdk.Model",["Type","ObservableMixin"],function(b,c,d,e,f,g,h,i){c.__markCompiled&&c.__markCompiled();var j=h.extend({constructor:function(k){this.parent();var l={},m=this;ES(ES("Object","keys",!1,k),"forEach",!0,function(n){l[n]=k[n],m["set"+n]=function(o){return o===l[n]?this:(l[n]=o,m.inform(n+".change",o),m)},m["get"+n]=function(){return l[n]}})}},i);f.exports=j},null),__d("sdk.Runtime",["sdk.Model","JSSDKRuntimeConfig"],function(b,c,d,e,f,g,h,i){c.__markCompiled&&c.__markCompiled();var j={UNKNOWN:0,PAGETAB:1,CANVAS:2,PLATFORM:4},k=new h({AccessToken:"",ClientID:"",CookieUserID:"",Environment:j.UNKNOWN,Initialized:!1,IsVersioned:!1,KidDirectedSite:undefined,Locale:i.locale,LoginStatus:undefined,Revision:i.revision,Rtl:i.rtl,Scope:undefined,Secure:undefined,UseCookie:!1,UserID:"",Version:undefined});ES("Object","assign",!1,k,{ENVIRONMENTS:j,isEnvironment:function(l){var m=this.getEnvironment();return(l|m)===m},isCanvasEnvironment:function(){return this.isEnvironment(j.CANVAS)||this.isEnvironment(j.PAGETAB)}}),function(){var l=/app_runner/.test(window.name)?j.PAGETAB:/iframe_canvas/.test(window.name)?j.CANVAS:j.UNKNOWN;(l|j.PAGETAB)===l&&(l|=j.CANVAS),k.setEnvironment(l)}(),f.exports=k},null),__d("sdk.Cookie",["QueryString","sdk.Runtime"],function(b,c,d,e,f,g,h,i){function k(n,o,p){n+=i.getClientID();var q=j&&"."!==j;q&&(document.cookie=n+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT;",document.cookie=n+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT;domain="+location.hostname+";");var r=new Date(p).toGMTString();document.cookie=n+"="+o+(o&&0===p?"":"; expires="+r)+"; path=/"+(q?"; domain="+j:"")}function l(n){n+=i.getClientID();var o=new RegExp("\\b"+n+"=([^;]*)\\b");return o.test(document.cookie)?RegExp.$1:null}c.__markCompiled&&c.__markCompiled();var j=null,m={setDomain:function(n){j=n;var o=h.encode({base_domain:j&&"."!==j?j:""}),p=new Date;p.setFullYear(p.getFullYear()+1),k("fbm_",o,p.getTime())},getDomain:function(){return j},loadMeta:function(){var n=l("fbm_");if(n){var o=h.decode(n);return j||(j=o.base_domain),o}},loadSignedRequest:function(){return l("fbsr_")},setSignedRequestCookie:function(n,o){if(!n)throw new Error("Value passed to Cookie.setSignedRequestCookie was empty.");k("fbsr_",n,o)},clearSignedRequestCookie:function(){k("fbsr_","",0)},setRaw:k};f.exports=m},null),__d("wrapFunction",[],function(b,c,d,e,f,g){function i(j,k,l){return k=k||"default",function(){var m=k in h?h[k](j,l):j;return m.apply(this,arguments)}}c.__markCompiled&&c.__markCompiled();var h={};i.setWrapper=function(j,k){k=k||"default",h[k]=j},f.exports=i},null),__d("DOMEventListener",["wrapFunction"],function(b,c,d,e,f,g,h){c.__markCompiled&&c.__markCompiled();var i,j;window.addEventListener?(i=function(l,m,n){n.wrapper=h(n,"entry","DOMEventListener.add "+m),l.addEventListener(m,n.wrapper,!1)},j=function(l,m,n){l.removeEventListener(m,n.wrapper,!1)}):window.attachEvent?(i=function(l,m,n){n.wrapper=h(n,"entry","DOMEventListener.add "+m),l.attachEvent("on"+m,n.wrapper)},j=function(l,m,n){l.detachEvent("on"+m,n.wrapper)}):j=i=function(){};var k={add:function(l,m,n){return i(l,m,n),{remove:function(){j(l,m,n),l=null}}},remove:j};f.exports=k},null),__d("sdk.UA",[],function(b,c,d,e,f,g){function o(q){return ES(q.split("."),"map",!0,function(r){return parseFloat(r)})}c.__markCompiled&&c.__markCompiled();var h=navigator.userAgent,i={iphone:/\b(iPhone|iP[ao]d)/.test(h),ipad:/\b(iP[ao]d)/.test(h),android:/Android/i.test(h),nativeApp:/FBAN\/\w+;/i.test(h)},j=/Mobile/i.test(h),k={ie:"",firefox:"",chrome:"",webkit:"",osx:""},l=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(h);if(l&&(k.ie=l[1]?parseFloat(l[1]):l[4]?parseFloat(l[4]):"",k.firefox=l[2]||"",k.webkit=l[3]||"",l[3])){var m=/(?:Chrome\/(\d+\.\d+))/.exec(h);k.chrome=m?m[1]:""}var n=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(h);n&&(k.osx=n[1]);var p={};ES(ES("Object","keys",!1,k),"map",!0,function(q){p[q]=function(){return parseFloat(k[q])},p[q].getVersionParts=function(){return o(k[q])}}),ES(ES("Object","keys",!1,i),"map",!0,function(q){p[q]=function(){return i[q]}}),p.mobile=function(){return i.iphone||i.ipad||i.android||j},f.exports=p},null),__d("getBlankIframeSrc",["sdk.UA"],function(b,c,d,e,f,g,h){function i(){return h.ie()<10?"javascript:false":"about:blank"}c.__markCompiled&&c.__markCompiled(),f.exports=i},null),__d("guid",[],function(b,c,d,e,f,g){function h(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")}c.__markCompiled&&c.__markCompiled(),f.exports=h},null),__d("UserAgent_DEPRECATED",[],function(b,c,d,e,f,g){function x(){if(!h){h=!0;var z=navigator.userAgent,aa=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(z),ba=/(Mac OS X)|(Windows)|(Linux)/.exec(z);if(t=/\b(iPhone|iP[ao]d)/.exec(z),u=/\b(iP[ao]d)/.exec(z),r=/Android/i.exec(z),v=/FBAN\/\w+;/i.exec(z),w=/Mobile/i.exec(z),s=!!/Win64/.exec(z),aa){i=aa[1]?parseFloat(aa[1]):aa[5]?parseFloat(aa[5]):NaN,i&&document&&document.documentMode&&(i=document.documentMode);var ca=/(?:Trident\/(\d+.\d+))/.exec(z);n=ca?parseFloat(ca[1])+4:i,j=aa[2]?parseFloat(aa[2]):NaN,k=aa[3]?parseFloat(aa[3]):NaN,l=aa[4]?parseFloat(aa[4]):NaN,l?(aa=/(?:Chrome\/(\d+\.\d+))/.exec(z),m=aa&&aa[1]?parseFloat(aa[1]):NaN):m=NaN}else i=j=k=m=l=NaN;if(ba){if(ba[1]){var da=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(z);o=da?parseFloat(da[1].replace("_",".")):!0}else o=!1;p=!!ba[2],q=!!ba[3]}else o=p=q=!1}}c.__markCompiled&&c.__markCompiled();var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,h=!1,y={ie:function(){return x()||i},ieCompatibilityMode:function(){return x()||n>i},ie64:function(){return y.ie()&&s},firefox:function(){return x()||j},opera:function(){return x()||k},webkit:function(){return x()||l},safari:function(){return y.webkit()},chrome:function(){return x()||m},windows:function(){return x()||p},osx:function(){return x()||o},linux:function(){return x()||q},iphone:function(){return x()||t},mobile:function(){return x()||t||u||r||w},nativeApp:function(){return x()||v},android:function(){return x()||r},ipad:function(){return x()||u}};f.exports=y},null),__d("hasNamePropertyBug",["guid","UserAgent_DEPRECATED"],function(b,c,d,e,f,g,h,i){function k(){var m=document.createElement("form"),n=m.appendChild(document.createElement("input"));return n.name=h(),j=n!==m.elements[n.name],m=n=null,j}function l(){return"undefined"==typeof j?k():j}c.__markCompiled&&c.__markCompiled();var j=i.ie()?undefined:!1;f.exports=l},null),__d("sdk.createIframe",["DOMEventListener","getBlankIframeSrc","guid","hasNamePropertyBug"],function(b,c,d,e,f,g,h,i,j,k){function l(m){m=ES("Object","assign",!1,{},m);var n,o=m.name||j(),p=m.root,q=m.style||{border:"none"},r=m.url,s=m.onload,t=m.onerror;k()?n=document.createElement('<iframe name="'+o+'"/>'):(n=document.createElement("iframe"),n.name=o),delete m.style,delete m.name,delete m.url,delete m.root,delete m.onload,delete m.onerror;var u=ES("Object","assign",!1,{frameBorder:0,allowTransparency:!0,allowFullscreen:!0,scrolling:"no"},m);u.width&&(n.width=u.width+"px"),u.height&&(n.height=u.height+"px"),delete u.height,delete u.width;for(var v in u)u.hasOwnProperty(v)&&n.setAttribute(v,u[v]);if(ES("Object","assign",!1,n.style,q),n.src=i(),p.appendChild(n),s)var w=h.add(n,"load",function(){w.remove(),s()});if(t)var x=h.add(n,"error",function(){x.remove(),t()});return n.src=r,n}c.__markCompiled&&c.__markCompiled(),f.exports=l},null),__d("DOMWrapper",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h,i,j={setRoot:function(k){h=k},getRoot:function(){return h||document.body},setWindow:function(k){i=k},getWindow:function(){return i||self}};f.exports=j},null),__d("eprintf",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h=function(i){var j=ES(Array.prototype.slice.call(arguments),"map",!0,function(m){return String(m)}),k=i.split("%s").length-1;if(k!==j.length-1)return h("eprintf args number mismatch: %s",ES("JSON","stringify",!1,j));var l=1;return i.replace(/%s/g,function(m){return String(j[l++])})};f.exports=h},null),__d("ex",["eprintf"],function(b,c,d,e,f,g,h){c.__markCompiled&&c.__markCompiled();var i=function(){for(var j=arguments.length,k=Array(j),l=0;j>l;l++)k[l]=arguments[l];return k=ES(k,"map",!0,function(m){return String(m)}),k[0].split("%s").length!==k.length?i("ex args number mismatch: %s",ES("JSON","stringify",!1,k)):i._prefix+ES("JSON","stringify",!1,k)+i._suffix};i._prefix="<![EX[",i._suffix="]]>",f.exports=i},null),__d("invariant",["ex","sprintf"],function(b,c,d,e,f,g,h,i){"use strict";c.__markCompiled&&c.__markCompiled();var j=h,k=function(l,m){if(!l){var n;if(m===undefined)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{for(var o=["Invariant Violation: "+m],p=2,q=arguments.length;q>p;p++)o.push(arguments[p]);n=new Error(j.apply(null,o)),n.messageWithParams=o}throw n.framesToPop=1,n}};f.exports=k},null),__d("sdk.feature",["JSSDKConfig","invariant"],function(b,c,d,e,f,g,h,i){function j(k,l){if(arguments.length>=2?undefined:i(0),h.features&&k in h.features){var m=h.features[k];return"object"==typeof m&&"number"==typeof m.rate?m.rate&&100*Math.random()<=m.rate?m.value||!0:m.value?null:!1:m}return l}c.__markCompiled&&c.__markCompiled(),f.exports=j},null),__d("sdk.getContextType",["sdk.Runtime","sdk.UA"],function(b,c,d,e,f,g,h,i){function j(){return i.nativeApp()?3:i.mobile()?2:h.isEnvironment(h.ENVIRONMENTS.CANVAS)?5:1}c.__markCompiled&&c.__markCompiled(),f.exports=j},null),__d("Log",["sprintf"],function(b,c,d,e,f,g,h){function j(l,m){var n=Array.prototype.slice.call(arguments,2),o=h.apply(null,n),p=window.console;p&&k.level>=m&&p[l in p?l:"log"](o)}c.__markCompiled&&c.__markCompiled();var i={DEBUG:3,INFO:2,WARNING:1,ERROR:0},k={level:-1,Level:i,debug:ES(j,"bind",!0,null,"debug",i.DEBUG),info:ES(j,"bind",!0,null,"info",i.INFO),warn:ES(j,"bind",!0,null,"warn",i.WARNING),error:ES(j,"bind",!0,null,"error",i.ERROR)};f.exports=k},null),__d("sdk.domReady",[],function(b,c,d,e,f,g){function j(){if(h){for(var m;m=h.shift();)m();h=null}}function k(m){return h?void h.push(m):void m()}c.__markCompiled&&c.__markCompiled();var h,i="readyState"in document?/loaded|complete/.test(document.readyState):!!document.body;if(!i&&(h=[],document.addEventListener?(document.addEventListener("DOMContentLoaded",j,!1),window.addEventListener("load",j,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",j),window.attachEvent("onload",j)),document.documentElement.doScroll&&window==window.top)){var l=function(){try{document.documentElement.doScroll("left")}catch(m){return void setTimeout(l,0)}j()};l()}f.exports=k},3),__d("sdk.Content",["Log","sdk.UA","sdk.domReady"],function(b,c,d,e,f,g,h,i,j){c.__markCompiled&&c.__markCompiled();var k,m={append:function(n,o){if(o||(k?o=k:(k=o=document.getElementById("fb-root"),o||(h.warn('The "fb-root" div has not been created, auto-creating'),k=o=document.createElement("div"),o.id="fb-root",i.ie()||!document.body?j(function(){document.body.appendChild(o)}):document.body.appendChild(o)),o.className+=" fb_reset")),"string"==typeof n){var p=document.createElement("div");return o.appendChild(p).innerHTML=n,p}return o.appendChild(n)},appendHidden:function(n){if(!o){var o=document.createElement("div"),p=o.style;p.position="absolute",p.top="-10000px",p.width=p.height=0,o=m.append(o)}return m.append(n,o)},submitToTarget:function(n,o){var p=document.createElement("form");p.action=n.url,p.target=n.target,p.method=o?"GET":"POST",m.appendHidden(p);for(var q in n.params)if(n.params.hasOwnProperty(q)){var r=n.params[q];if(null!==r&&r!==undefined){var s=document.createElement("input");s.name=q,s.value=r,p.appendChild(s)}}p.submit(),p.parentNode.removeChild(p)}};f.exports=m},null),__d("Miny",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h="Miny1",i="wxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_".split(""),j={encode:function(k){if(/^$|[~\\]|__proto__/.test(k))return k;var m,l=k.match(/\w+|\W+/g),n=ES("Object","create",!1,null);for(m=0;m<l.length;m++)n[l[m]]=(n[l[m]]||0)+1;var o=ES("Object","keys",!1,n);for(o.sort(function(r,s){return n[s]-n[r]}),m=0;m<o.length;m++){var p=(m-m%32)/32;n[o[m]]=p?p.toString(32)+i[m%32]:i[m%32]}var q="";for(m=0;m<l.length;m++)q+=n[l[m]];return o.unshift(h,o.length),o.push(q),o.join("~")}};f.exports=j},null),__d("UrlMap",["UrlMapConfig"],function(b,c,d,e,f,g,h){c.__markCompiled&&c.__markCompiled();var i={resolve:function(j,k){var l="undefined"==typeof k?location.protocol.replace(":",""):k?"https":"http";return j in h?l+"://"+h[j]:"undefined"==typeof k&&j+"_"+l in h?l+"://"+h[j+"_"+l]:k!==!0&&j+"_http"in h?"http://"+h[j+"_http"]:k!==!1&&j+"_https"in h?"https://"+h[j+"_https"]:void 0}};f.exports=i},null),__d("dotAccess",[],function(b,c,d,e,f,g){function h(i,j,k){var l=j.split(".");do{var m=l.shift();i=i[m]||k&&(i[m]={})}while(l.length&&i);return i}c.__markCompiled&&c.__markCompiled(),f.exports=h},null),__d("GlobalCallback",["DOMWrapper","dotAccess","guid","wrapFunction"],function(b,c,d,e,f,g,h,i,j,k){c.__markCompiled&&c.__markCompiled();var l,m,n={setPrefix:function(o){l=i(h.getWindow(),o,!0),m=o},create:function(o,p){l||this.setPrefix("__globalCallbacks");var q=j();return l[q]=k(o,"entry",p||"GlobalCallback"),m+"."+q},remove:function(o){var p=o.substring(m.length+1);delete l[p]}};f.exports=n},null),__d("insertIframe",["GlobalCallback","getBlankIframeSrc","guid"],function(b,c,d,e,f,g,h,i,j){function k(l){l.id=l.id||j(),l.name=l.name||j();var m=!1,n=!1,o=function(){m&&!n&&(n=!0,l.onload&&l.onload(l.root.firstChild))},p=h.create(o);if(document.attachEvent){var q='<iframe id="'+l.id+'" name="'+l.name+'"'+(l.title?' title="'+l.title+'"':"")+(l.className?' class="'+l.className+'"':"")+' style="border:none;'+(l.width?"width:"+l.width+"px;":"")+(l.height?"height:"+l.height+"px;":"")+'" src="'+i()+'" frameborder="0" scrolling="no" allowtransparency="true" onload="'+p+'()"></iframe>';l.root.innerHTML='<iframe src="'+i()+'" frameborder="0" scrolling="no" style="height:1px"></iframe>',m=!0,setTimeout(function(){l.root.innerHTML=q,l.root.firstChild.src=l.url,l.onInsert&&l.onInsert(l.root.firstChild)},0)}else{var r=document.createElement("iframe");r.id=l.id,r.name=l.name,r.onload=o,r.scrolling="no",r.style.border="none",r.style.overflow="hidden",l.title&&(r.title=l.title),l.className&&(r.className=l.className),l.height!==undefined&&(r.style.height=l.height+"px"),l.width!==undefined&&("100%"==l.width?r.style.width=l.width:r.style.width=l.width+"px"),l.root.appendChild(r),m=!0,r.src=l.url,l.onInsert&&l.onInsert(r)}}c.__markCompiled&&c.__markCompiled(),f.exports=k},null),__d("sdk.Impressions",["sdk.Content","Miny","QueryString","sdk.Runtime","UrlMap","getBlankIframeSrc","guid","insertIframe"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(r){var s=k.getClientID();!r.api_key&&s&&(r.api_key=s),r.kid_directed_site=k.getKidDirectedSite();var t=l.resolve("www",!0)+"/impression.php/"+n()+"/",u=j.appendToUrl(t,r);if(u.length>2e3&&r.payload&&"string"==typeof r.payload){var v=i.encode(r.payload);v&&v.length<r.payload.length&&(r.payload=v,u=j.appendToUrl(t,r))}if(u.length<=2e3){var w=new Image;w.src=u}else{var x=n(),y=h.appendHidden("");o({url:m(),root:y,name:x,className:"fb_hidden fb_invisible",onload:function(){y.parentNode.removeChild(y)}}),h.submitToTarget({url:t,target:x,params:r})}}c.__markCompiled&&c.__markCompiled();var q={log:function(r,s){s.source||(s.source="jssdk"),p({lid:r,payload:ES("JSON","stringify",!1,s)})},impression:p};f.exports=q},null),__d("Base64",[],function(b,c,d,e,f,g){function i(m){return m=m.charCodeAt(0)<<16|m.charCodeAt(1)<<8|m.charCodeAt(2),String.fromCharCode(h.charCodeAt(m>>>18),h.charCodeAt(m>>>12&63),h.charCodeAt(m>>>6&63),h.charCodeAt(63&m))}function k(m){return m=j.charCodeAt(m.charCodeAt(0)-43)<<18|j.charCodeAt(m.charCodeAt(1)-43)<<12|j.charCodeAt(m.charCodeAt(2)-43)<<6|j.charCodeAt(m.charCodeAt(3)-43),String.fromCharCode(m>>>16,m>>>8&255,255&m)}c.__markCompiled&&c.__markCompiled();var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=">___?456789:;<=_______\0\b\t\n\v\f\r______ !\"#$%&'()*+,-./0123",l={encode:function(m){m=unescape(encodeURI(m));var n=(m.length+2)%3;return m=(m+"\0\0".slice(n)).replace(/[\s\S]{3}/g,i),m.slice(0,m.length+n-2)+"==".slice(n)},decode:function(m){m=m.replace(/[^A-Za-z0-9+\/]/g,"");var n=m.length+3&3;m=(m+"AAA".slice(n)).replace(/..../g,k),m=m.slice(0,m.length+n-3);try{return decodeURIComponent(escape(m))}catch(o){throw new Error("Not valid UTF-8")}},encodeObject:function(m){return l.encode(ES("JSON","stringify",!1,m))},decodeObject:function(m){return ES("JSON","parse",!1,l.decode(m))},encodeNums:function(m){return String.fromCharCode.apply(String,ES(m,"map",!0,function(n){return h.charCodeAt((n|-(n>63))&-(n>0)&63)}))}};f.exports=l},null),__d("sdk.SignedRequest",["Base64"],function(b,c,d,e,f,g,h){function i(k){if(!k)return null;var l=k.split(".",2)[1].replace(/\-/g,"+").replace(/\_/g,"/");return h.decodeObject(l)}c.__markCompiled&&c.__markCompiled();var j={parse:i};f.exports=j},null),__d("URIRFC3986",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h=new RegExp("^([^:/?#]+:)?(//([^\\\\/?#@]*@)?(\\[[A-Fa-f0-9:.]+\\]|[^\\/?#:]*)(:[0-9]*)?)?([^?#]*)(\\?[^#]*)?(#.*)?"),i={parse:function(j){if(""===ES(j,"trim",!0))return null;var k=j.match(h),l={};return l.uri=k[0]?k[0]:null,l.scheme=k[1]?k[1].substr(0,k[1].length-1):null,l.authority=k[2]?k[2].substr(2):null,l.userinfo=k[3]?k[3].substr(0,k[3].length-1):null,l.host=k[2]?k[4]:null,l.port=k[5]&&k[5].substr(1)?parseInt(k[5].substr(1),10):null,l.path=k[6]?k[6]:null,l.query=k[7]?k[7].substr(1):null,l.fragment=k[8]?k[8].substr(1):null,l.isGenericURI=null===l.authority&&!!l.scheme,l}};f.exports=i},null),__d("createObjectFrom",[],function(b,c,d,e,f,g){function h(i,j){var k={},l=ES("Array","isArray",!1,j);j===undefined&&(j=!0);for(var m=i.length-1;m>=0;m--)k[i[m]]=l?j[m]:j;return k}c.__markCompiled&&c.__markCompiled(),f.exports=h},null),__d("URISchemes",["createObjectFrom"],function(b,c,d,e,f,g,h){c.__markCompiled&&c.__markCompiled();var i=h(["fb","fb-ama","fb-messenger","fbcf","fbconnect","fbmobilehome","fbrpc","file","ftp","http","https","mailto","ms-app","intent","itms","itms-apps","itms-services","market","svn+ssh","fbstaging","tel","sms","pebblejs","sftp"]),j={isAllowed:function(k){return k?i.hasOwnProperty(k.toLowerCase()):!0}};f.exports=j},null),__d("URIBase",["URIRFC3986","URISchemes","ex","invariant"],function(b,c,d,e,f,g,h,i,j,k){function n(q,r,s,t){if(!r)return!0;if(r instanceof p)return q.setProtocol(r.getProtocol()),q.setDomain(r.getDomain()),q.setPort(r.getPort()),q.setPath(r.getPath()),q.setQueryData(t.deserialize(t.serialize(r.getQueryData()))),q.setFragment(r.getFragment()),q.setForceFragmentSeparator(r.getForceFragmentSeparator()),!0;r=ES(r.toString(),"trim",!0);var u=h.parse(r)||{};if(!s&&!i.isAllowed(u.scheme))return!1;if(q.setProtocol(u.scheme||""),!s&&l.test(u.host))return!1;if(q.setDomain(u.host||""),q.setPort(u.port||""),q.setPath(u.path||""),s)q.setQueryData(t.deserialize(u.query)||{});else try{q.setQueryData(t.deserialize(u.query)||{})}catch(v){return!1}if(q.setFragment(u.fragment||""),""===u.fragment&&q.setForceFragmentSeparator(!0),null!==u.userinfo){if(s)throw new Error(j("URI.parse: invalid URI (userinfo is not allowed in a URI): %s",q.toString()));return!1}if(!q.getDomain()&&-1!==ES(q.getPath(),"indexOf",!0,"\\")){if(s)throw new Error(j("URI.parse: invalid URI (no domain but multiple back-slashes): %s",q.toString()));return!1}if(!q.getProtocol()&&m.test(r)){if(s)throw new Error(j("URI.parse: invalid URI (unsafe protocol-relative URLs): %s",q.toString()));return!1}return!0}function p(q,r){"use strict";r?undefined:k(0),this.$URIBase1=r,this.$URIBase2="",this.$URIBase3="",this.$URIBase4="",this.$URIBase5="",this.$URIBase6="",this.$URIBase7={},this.$URIBase8=!1,n(this,q,!0,r)}c.__markCompiled&&c.__markCompiled();var l=new RegExp("[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]"),m=new RegExp("^(?:[^/]*:|[\\x00-\\x1f]*/[\\x00-\\x1f]*/)"),o=[];p.prototype.setProtocol=function(q){"use strict";return i.isAllowed(q)?undefined:k(0),this.$URIBase2=q,this},p.prototype.getProtocol=function(q){"use strict";return this.$URIBase2},p.prototype.setSecure=function(q){"use strict";return this.setProtocol(q?"https":"http")},p.prototype.isSecure=function(){"use strict";return"https"===this.getProtocol()},p.prototype.setDomain=function(q){"use strict";if(l.test(q))throw new Error(j("URI.setDomain: unsafe domain specified: %s for url %s",q,this.toString()));return this.$URIBase3=q,this},p.prototype.getDomain=function(){"use strict";return this.$URIBase3},p.prototype.setPort=function(q){"use strict";return this.$URIBase4=q,this},p.prototype.getPort=function(){"use strict";return this.$URIBase4},p.prototype.setPath=function(q){"use strict";return this.$URIBase5=q,this},p.prototype.getPath=function(){"use strict";return this.$URIBase5},p.prototype.addQueryData=function(q,r){"use strict";return"[object Object]"===Object.prototype.toString.call(q)?ES("Object","assign",!1,this.$URIBase7,q):this.$URIBase7[q]=r,this},p.prototype.setQueryData=function(q){"use strict";return this.$URIBase7=q,this},p.prototype.getQueryData=function(){"use strict";return this.$URIBase7},p.prototype.removeQueryData=function(q){"use strict";ES("Array","isArray",!1,q)||(q=[q]);for(var r=0,s=q.length;s>r;++r)delete this.$URIBase7[q[r]];return this},p.prototype.setFragment=function(q){"use strict";return this.$URIBase6=q,this.setForceFragmentSeparator(!1),this},p.prototype.getFragment=function(){"use strict";return this.$URIBase6},p.prototype.setForceFragmentSeparator=function(q){"use strict";return this.$URIBase8=q,this},p.prototype.getForceFragmentSeparator=function(){"use strict";return this.$URIBase8},p.prototype.isEmpty=function(){"use strict";return!(this.getPath()||this.getProtocol()||this.getDomain()||this.getPort()||ES("Object","keys",!1,this.getQueryData()).length>0||this.getFragment())},p.prototype.toString=function(){"use strict";for(var q=this,r=0;r<o.length;r++)q=o[r](q);return q.$URIBase9()},p.prototype.$URIBase9=function(){"use strict";var q="",r=this.getProtocol();r&&(q+=r+"://");var s=this.getDomain();s&&(q+=s);var t=this.getPort();t&&(q+=":"+t);var u=this.getPath();u?q+=u:q&&(q+="/");var v=this.$URIBase1.serialize(this.getQueryData());v&&(q+="?"+v);var w=this.getFragment();return w?q+="#"+w:this.getForceFragmentSeparator()&&(q+="#"),q},p.registerFilter=function(q){"use strict";o.push(q)},p.prototype.getOrigin=function(){"use strict";var q=this.getPort();return this.getProtocol()+"://"+this.getDomain()+(q?":"+q:"")},p.isValidURI=function(q,r){return n(new p(null,r),q,!1,r)},f.exports=p},null),__d("sdk.URI",["Assert","QueryString","URIBase"],function(b,c,d,e,f,g,h,i,j){function o(p){"use strict";h.isString(p,"The passed argument was of invalid type."),l.constructor.call(this,p,n)}c.__markCompiled&&c.__markCompiled();var k,l,m=/\.facebook\.com$/,n={serialize:function(p){return p?i.encode(p):""},deserialize:function(p){return p?i.decode(p):{}}};k=babelHelpers.inherits(o,j),l=k&&k.prototype,o.prototype.isFacebookURI=function(){"use strict";return m.test(this.getDomain())},o.prototype.valueOf=function(){"use strict";return this.toString()},f.exports=o},null),__d("sdk.Event",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={SUBSCRIBE:"event.subscribe",UNSUBSCRIBE:"event.unsubscribe",subscribers:function(){return this._subscribersMap||(this._subscribersMap={}),this._subscribersMap},subscribe:function(i,j){var k=this.subscribers();k[i]?-1==ES(k[i],"indexOf",!0,j)&&k[i].push(j):k[i]=[j],i!=this.SUBSCRIBE&&i!=this.UNSUBSCRIBE&&this.fire(this.SUBSCRIBE,i,k[i])},unsubscribe:function(i,j){var k=this.subscribers()[i];k&&ES(k,"forEach",!0,function(l,m){l==j&&k.splice(m,1)}),i!=this.SUBSCRIBE&&i!=this.UNSUBSCRIBE&&this.fire(this.UNSUBSCRIBE,i,k)},monitor:function(i,j){if(!j()){var k=this,l=function(){j.apply(j,arguments)&&k.unsubscribe(i,l)};this.subscribe(i,l)}},clear:function(i){delete this.subscribers()[i]},fire:function(i){var j=Array.prototype.slice.call(arguments,1),k=this.subscribers()[i];k&&ES(k,"forEach",!0,function(l){l&&l.apply(this,j)})}};f.exports=h},null),__d("Queue",[],function(b,c,d,e,f,g){function i(j){"use strict";this._opts=babelHelpers._extends({interval:0,processor:null},j),this._queue=[],this._stopped=!0}c.__markCompiled&&c.__markCompiled();var h={};i.prototype._dispatch=function(j){"use strict";if(!this._stopped&&0!==this._queue.length){if(!this._opts.processor)throw this._stopped=!0,new Error("No processor available");if(this._opts.interval)this._opts.processor.call(this,this._queue.shift()),this._timeout=setTimeout(ES(this._dispatch,"bind",!0,this),this._opts.interval);else for(;this._queue.length;)this._opts.processor.call(this,this._queue.shift())}},i.prototype.enqueue=function(j){"use strict";return this._opts.processor&&!this._stopped?this._opts.processor.call(this,j):this._queue.push(j),this},i.prototype.start=function(j){"use strict";return j&&(this._opts.processor=j),this._stopped=!1,this._dispatch(),this},i.prototype.isStarted=function(){"use strict";return!this._stopped},i.prototype.dispatch=function(){"use strict";this._dispatch(!0)},i.prototype.stop=function(j){"use strict";return this._stopped=!0,j&&clearTimeout(this._timeout),this},i.prototype.merge=function(j,k){"use strict";return this._queue[k?"unshift":"push"].apply(this._queue,j._queue),j._queue=[],this._dispatch(),this},i.prototype.getLength=function(){"use strict";return this._queue.length},i.get=function(j,k){"use strict";var l;return l=j in h?h[j]:h[j]=new i(k)},i.exists=function(j){"use strict";return j in h},i.remove=function(j){"use strict";return delete h[j]},f.exports=i},null),__d("JSONRPC",["Log"],function(b,c,d,e,f,g,h){function i(j){"use strict";this.$JSONRPC1=0,this.$JSONRPC2={},this.remote=ES(function(k){return this.$JSONRPC3=k,this.remote},"bind",!0,this),this.local={},this.$JSONRPC4=j}c.__markCompiled&&c.__markCompiled(),i.prototype.stub=function(j){"use strict";this.remote[j]=ES(function(){for(var k={jsonrpc:"2.0",method:j},l=arguments.length,m=Array(l),n=0;l>n;n++)m[n]=arguments[n];"function"==typeof m[m.length-1]&&(k.id=++this.$JSONRPC1,this.$JSONRPC2[k.id]=m.pop()),k.params=m,this.$JSONRPC4(ES("JSON","stringify",!1,k),this.$JSONRPC3||{method:j})},"bind",!0,this)},i.prototype.read=function(j,k){"use strict";var l=ES("JSON","parse",!1,j),m=l.id;if(!l.method){if(!this.$JSONRPC2[m])return void h.warn("Could not find callback %s",m);
var n=this.$JSONRPC2[m];return delete this.$JSONRPC2[m],delete l.id,delete l.jsonrpc,void n(l)}var q,o=this,p=this.local[l.method];if(q=m?function(t,u){var v={jsonrpc:"2.0",id:m};v[t]=u,setTimeout(function(){o.$JSONRPC4(ES("JSON","stringify",!1,v),k)},0)}:function(){},!p)return h.error('Method "%s" has not been defined',l.method),void q("error",{code:-32601,message:"Method not found",data:l.method});l.params.push(ES(q,"bind",!0,null,"result")),l.params.push(ES(q,"bind",!0,null,"error"));try{var s=p.apply(k||null,l.params);"undefined"!=typeof s&&q("result",s)}catch(r){h.error("Invokation of RPC method %s resulted in the error: %s",l.method,r.message),q("error",{code:-32603,message:"Internal error",data:r.message})}},f.exports=i},null),__d("sdk.RPC",["Assert","JSONRPC","Queue"],function(b,c,d,e,f,g,h,i,j){c.__markCompiled&&c.__markCompiled();var k=new j,l=new i(function(n){k.enqueue(n)}),m={local:l.local,remote:l.remote,stub:ES(l.stub,"bind",!0,l),setInQueue:function(n){h.isInstanceOf(j,n),n.start(function(o){l.read(o)})},getOutQueue:function(){return k}};f.exports=m},null),__d("sdk.Scribe",["QueryString","sdk.Runtime","UrlMap"],function(b,c,d,e,f,g,h,i,j){function k(m,n){"object"==typeof n.extra&&(n.extra.revision=i.getRevision()),(new Image).src=h.appendToUrl(j.resolve("www",!0)+"/common/scribe_endpoint.php",{c:m,m:ES("JSON","stringify",!1,n)})}c.__markCompiled&&c.__markCompiled();var l={log:k};f.exports=l},null),__d("emptyFunction",[],function(b,c,d,e,f,g){function h(j){return function(){return j}}function i(){}c.__markCompiled&&c.__markCompiled(),i.thatReturns=h,i.thatReturnsFalse=h(!1),i.thatReturnsTrue=h(!0),i.thatReturnsNull=h(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(j){return j},f.exports=i},null),__d("htmlSpecialChars",[],function(b,c,d,e,f,g){function m(n){return"undefined"!=typeof n&&null!==n&&n.toString?n===!1?"0":n===!0?"1":n.toString().replace(h,"&amp;").replace(k,"&quot;").replace(l,"&#039;").replace(i,"&lt;").replace(j,"&gt;"):""}c.__markCompiled&&c.__markCompiled();var h=/&/g,i=/</g,j=/>/g,k=/"/g,l=/'/g;f.exports=m},null),__d("Flash",["DOMEventListener","DOMWrapper","QueryString","UserAgent_DEPRECATED","guid","htmlSpecialChars"],function(b,c,d,e,f,g,h,i,j,k,l,m){function q(v){var w=p.getElementById(v);w&&w.parentNode.removeChild(w),delete n[v]}function r(){for(var v in n)n.hasOwnProperty(v)&&q(v)}function s(v){return v.replace(/\d+/g,function(w){return"000".substring(w.length)+w})}function t(v){o||(k.ie()>=9&&h.add(window,"unload",r),o=!0),n[v]=v}c.__markCompiled&&c.__markCompiled();var o,n={},p=i.getWindow().document,u={embed:function(v,w,x,y){var z=l();v=m(v).replace(/&amp;/g,"&"),x=babelHelpers._extends({allowscriptaccess:"always",flashvars:y,movie:v},x),"object"==typeof x.flashvars&&(x.flashvars=j.encode(x.flashvars));var aa=[];for(var ba in x)x.hasOwnProperty(ba)&&x[ba]&&aa.push('<param name="'+m(ba)+'" value="'+m(x[ba])+'">');var ca=w.appendChild(p.createElement("span")),da="<object "+(k.ie()?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':'type="application/x-shockwave-flash"')+'data="'+v+'" '+(x.height?'height="'+x.height+'" ':"")+(x.width?'width="'+x.width+'" ':"")+'id="'+z+'">'+aa.join("")+"</object>";ca.innerHTML=da;var ea=ca.firstChild;return t(z),ea},remove:q,getVersion:function(){var y,v="Shockwave Flash",w="application/x-shockwave-flash",x="ShockwaveFlash.ShockwaveFlash";if(navigator.plugins&&"object"==typeof navigator.plugins[v]){var z=navigator.plugins[v].description;z&&navigator.mimeTypes&&navigator.mimeTypes[w]&&navigator.mimeTypes[w].enabledPlugin&&(y=z.match(/\d+/g))}if(!y)try{y=new ActiveXObject(x).GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),y=Array.prototype.slice.call(y,1)}catch(aa){}return y},getVersionString:function(){var v=u.getVersion();return v?v.join("."):""},checkMinVersion:function(v){var w=u.getVersion();return w?s(w.join("."))>=s(v):!1},isAvailable:function(){return!!u.getVersion()}};f.exports=u},null),__d("XDM",["DOMEventListener","DOMWrapper","emptyFunction","Flash","GlobalCallback","guid","Log","UserAgent_DEPRECATED","wrapFunction"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function t(w){for(var x={},y=w.length,z=r.transports;y--;)x[w[y]]=1;for(y=z.length;y--;){var aa=z[y],ba=q[aa];if(!x[aa]&&ba.isAvailable())return aa}}c.__markCompiled&&c.__markCompiled();var q={},r={transports:[]},s=i.getWindow(),u={register:function(w,x){n.debug("Registering %s as XDM provider",w),r.transports.push(w),q[w]=x},create:function(w){if(!w.whenReady&&!w.onMessage)throw n.error("An instance without whenReady or onMessage makes no sense"),new Error("An instance without whenReady or onMessage makes no sense");w.channel||(n.warn("Missing channel name, selecting at random"),w.channel=m()),w.whenReady||(w.whenReady=j),w.onMessage||(w.onMessage=j);var x=w.transport||t(w.blacklist||[]),y=q[x];return y&&y.isAvailable()?(n.debug("%s is available",x),y.init(w),x):void 0}};u.register("flash",function(){var x,aa,w=!1,y=!1,z=15e3;return{isAvailable:function(){return k.checkMinVersion("8.0.24")},init:function(ba){n.debug("init flash: "+ba.channel);var ca={send:function(fa,ga,ha,ia){n.debug("sending to: %s (%s)",ga,ia),x.postMessage(fa,ga,ia)}};if(w)return void ba.whenReady(ca);var da=ba.root.appendChild(s.document.createElement("div")),ea=l.create(function(){l.remove(ea),clearTimeout(aa),n.info("xdm.swf called the callback");var fa=l.create(function(ga,ha){ga=decodeURIComponent(ga),ha=decodeURIComponent(ha),n.debug("received message %s from %s",ga,ha),ba.onMessage(ga,ha)},"xdm.swf:onMessage");x.init(ba.channel,fa),ba.whenReady(ca)},"xdm.swf:load");x=k.embed(ba.flashUrl,da,null,{protocol:location.protocol.replace(":",""),host:location.host,callback:ea,log:y}),aa=setTimeout(function(){n.warn("The Flash component did not load within %s ms - verify that the container is not set to hidden or invisible using CSS as this will cause some browsers to not load the components",z)},z),w=!0}}}());var v=/\.facebook\.com(\/|$)/;u.register("postmessage",function(){var w=!1;return{isAvailable:function(){return!!s.postMessage},init:function(x){n.debug("init postMessage: "+x.channel);var y="_FB_"+x.channel,z={send:function(aa,ba,ca,da){if(s===ca)throw n.error("Invalid windowref, equal to window (self)"),new Error;n.debug("sending to: %s (%s)",ba,da);var ea=function(){ca.postMessage("_FB_"+da+aa,ba)};8==o.ie()||o.ieCompatibilityMode()?setTimeout(ea,0):ea()}};return w?void x.whenReady(z):(h.add(s,"message",p(function(event){var aa=event.data,ba=event.origin||"native";if(!/^(https?:\/\/|native$)/.test(ba))return void n.debug("Received message from invalid origin type: %s",ba);if("native"===ba||v.test(location.hostname)||v.test(event.origin)){if("string"!=typeof aa)return void n.warn("Received message of type %s from %s, expected a string",typeof aa,ba);n.debug("received message %s from %s",aa,ba),aa.substring(0,y.length)==y&&(aa=aa.substring(y.length)),x.onMessage(aa,ba)}},"entry","onMessage")),x.whenReady(z),void(w=!0))}}}()),f.exports=u},null),__d("isFacebookURI",[],function(b,c,d,e,f,g){function j(k){return h||(h=new RegExp("(^|\\.)facebook\\.com$","i")),k.isEmpty()&&"#"!==k.toString()?!1:k.getDomain()||k.getProtocol()?-1!==ES(i,"indexOf",!0,k.getProtocol())&&h.test(k.getDomain()):!0}c.__markCompiled&&c.__markCompiled();var h=null,i=["http","https"];j.setRegex=function(k){h=k},f.exports=j},null),__d("sdk.XD",["sdk.Content","sdk.Event","Log","QueryString","Queue","sdk.RPC","sdk.Runtime","sdk.Scribe","sdk.URI","UrlMap","JSSDKXDConfig","XDM","isFacebookURI","sdk.createIframe","sdk.feature","guid"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function oa(ua){j.info("Remote XD can talk to facebook.com (%s)",ua),n.setEnvironment("canvas"===ua?n.ENVIRONMENTS.CANVAS:n.ENVIRONMENTS.PAGETAB)}function pa(ua,va){if(!va)throw j.error("No senderOrigin"),new Error;var wa=/^https?/.exec(va)[0];switch(ua.xd_action){case"proxy_ready":var xa,ya;"https"==wa?(xa=z,ya=ba):(xa=y,ya=aa),ua.registered&&(oa(ua.registered),x=xa.merge(x)),j.info("Proxy ready, starting queue %s containing %s messages",wa+"ProxyQueue",xa.getLength()),xa.start(function(ab){ja.send("string"==typeof ab?ab:k.encode(ab),va,ya.contentWindow,ha+"_"+wa)});break;case"plugin_ready":if(j.info("Plugin %s ready, protocol: %s",ua.name,wa),ma[ua.name]={protocol:wa},l.exists(ua.name)){var za=l.get(ua.name);j.debug("Enqueuing %s messages for %s in %s",za.getLength(),ua.name,wa+"ProxyQueue"),("https"==wa?z:y).merge(za)}}ua.data&&qa(ua.data,va)}function qa(ua,va){if(!va||"native"===va||t(new p(va))){if("string"==typeof ua){if(/^FB_RPC:/.test(ua))return void na.enqueue(ua.substring(7));if("{"==ua.substring(0,1))try{ua=ES("JSON","parse",!1,ua)}catch(wa){return void j.warn("Failed to decode %s as JSON",ua)}else ua=k.decode(ua)}if(va||ua.xd_sig==ca&&(va=ua.xd_origin),ua.xd_action)return void pa(ua,va);if(ua.access_token&&n.setSecure(/^https/.test(ia)),ua.cb){var xa=ta._callbacks[ua.cb];ta._forever[ua.cb]||delete ta._callbacks[ua.cb],xa&&xa(ua)}}}function ra(ua,va){if("facebook"==ua)va.relation="parent.parent",x.enqueue(va);else{va.relation='parent.frames["'+ua+'"]';var wa=ma[ua];wa?(j.debug("Enqueuing message for plugin %s in %s",ua,wa.protocol+"ProxyQueue"),("https"==wa.protocol?z:y).enqueue(va)):(j.debug("Buffering message for plugin %s",ua),l.get(ua).enqueue(va))}}function sa(ua){if(!ka){var va=h.appendHidden(document.createElement("div")),wa=s.create({blacklist:null,root:va,channel:ha,flashUrl:r.Flash.path,whenReady:function(xa){ja=xa;var ya={channel:ha,origin:location.protocol+"//"+location.host,transport:wa,xd_name:ua},za="#"+k.encode(ya);n.getSecure()!==!0&&(aa=u({url:fa+za,name:"fb_xdm_frame_http",id:"fb_xdm_frame_http",root:va,"aria-hidden":!0,title:la,tabindex:-1})),ba=u({url:ga+za,name:"fb_xdm_frame_https",id:"fb_xdm_frame_https",root:va,"aria-hidden":!0,title:la,tabindex:-1})},onMessage:qa});wa||o.log("jssdk_error",{appId:n.getClientID(),error:"XD_TRANSPORT",extra:{message:"Failed to create a valid transport"}}),ka=!0}}c.__markCompiled&&c.__markCompiled();var aa,ba,ja,x=new l,y=new l,z=new l,ca=w(),da=r.useCdn?"cdn":"www",ea=v("use_bundle",!1)?r.XdBundleUrl:r.XdUrl,fa=q.resolve(da,!1)+ea,ga=q.resolve(da,!0)+ea,ha=w(),ia=location.protocol+"//"+location.host,ka=!1,la="Facebook Cross Domain Communication Frame",ma={},na=new l;m.setInQueue(na),m.getOutQueue().start(function(ua){ra("facebook","FB_RPC:"+ua)});var ta={rpc:m,_callbacks:{},_forever:{},_channel:ha,_origin:ia,onMessage:qa,recv:qa,init:sa,sendToFacebook:ra,inform:function(ua,va,wa,xa){ra("facebook",{method:ua,params:ES("JSON","stringify",!1,va||{}),behavior:xa||"p",relation:wa})},handler:function(ua,va,wa,xa){var ya="#"+k.encode({cb:this.registerCallback(ua,wa,xa),origin:ia+"/"+ha,domain:location.hostname,relation:va||"opener"});return("https:"==location.protocol?ga:fa)+ya},registerCallback:function(ua,va,wa){return wa=wa||w(),va&&(ta._forever[wa]=!0),ta._callbacks[wa]=ua,wa}};i.subscribe("init:post",function(ua){sa(ua.xdProxyName);var va=v("xd_timeout",!1);va&&setTimeout(function(){var wa=ba&&!!aa==y.isStarted()&&!!ba==z.isStarted();wa||o.log("jssdk_error",{appId:n.getClientID(),error:"XD_INITIALIZATION",extra:{message:"Failed to initialize in "+va+"ms"}})},va)}),f.exports=ta},null),__d("sdk.Auth",["sdk.Cookie","sdk.createIframe","DOMWrapper","sdk.feature","sdk.getContextType","guid","sdk.Impressions","Log","ObservableMixin","sdk.Runtime","sdk.SignedRequest","UrlMap","sdk.URI","sdk.XD"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function y(ea,fa){var ga=q.getUserID(),ha="";if(ea)if(ea.userID)ha=ea.userID;else if(ea.signedRequest){var ia=r.parse(ea.signedRequest);ia&&ia.user_id&&(ha=ia.user_id)}var ja=q.getLoginStatus(),ka="unknown"===ja&&ea||q.getUseCookie()&&q.getCookieUserID()!==ha,la=ga&&!ea,ma=ea&&ga&&ga!=ha,na=ea!=v,oa=fa!=(ja||"unknown");q.setLoginStatus(fa),q.setAccessToken(ea&&ea.accessToken||null),q.setUserID(ha),v=ea;var pa={authResponse:ea,status:fa};return(la||ma)&&x.inform("logout",pa),(ka||ma)&&x.inform("login",pa),na&&x.inform("authresponse.change",pa),oa&&x.inform("status.change",pa),pa}function z(){return v}function aa(ea,fa,ga){return function(ha){var ia;if(ha&&ha.access_token){var ja=r.parse(ha.signed_request);if(fa={accessToken:ha.access_token,userID:ja.user_id,expiresIn:parseInt(ha.expires_in,10),signedRequest:ha.signed_request},ha.granted_scopes&&(fa.grantedScopes=ha.granted_scopes),q.getUseCookie()){var ka=0===fa.expiresIn?0:ES("Date","now",!1)+1e3*fa.expiresIn,la=h.getDomain();!la&&ha.base_domain&&h.setDomain("."+ha.base_domain),h.setSignedRequestCookie(ha.signed_request,ka)}ia="connected",y(fa,ia)}else("logout"===ga||"login_status"===ga)&&(ia=ha.error&&"not_authorized"===ha.error?"not_authorized":"unknown",y(null,ia),q.getUseCookie()&&h.clearSignedRequestCookie());return ha&&1==ha.https&&q.setSecure(!0),ea&&ea({authResponse:fa,status:q.getLoginStatus()}),fa}}function ba(ea){var fa,ga=ES("Date","now",!1);w&&(clearTimeout(w),w=null);var ha=aa(ea,v,"login_status"),ia=new t(s.resolve("www",!0)+"/connect/ping").setQueryData({client_id:q.getClientID(),response_type:"token,signed_request,code",domain:location.hostname,origin:l(),redirect_uri:u.handler(function(ja){if(k("e2e_ping_tracking",!0)){var ka={init:ga,close:ES("Date","now",!1),method:"ping"};o.debug("e2e: %s",ES("JSON","stringify",!1,ka)),n.log(114,{payload:ka})}fa.parentNode.removeChild(fa),ha(ja)&&(w=setTimeout(function(){ba(function(){})},12e5))},"parent"),sdk:"joey",kid_directed_site:q.getKidDirectedSite()});fa=i({root:j.getRoot(),name:m(),url:ia.toString(),style:{display:"none"}})}function da(ea,fa){if(!q.getClientID())return void o.warn("FB.getLoginStatus() called before calling FB.init().");if(ea){if(!fa&&"loaded"==ca)return void ea({status:q.getLoginStatus(),authResponse:z()});x.subscribe("FB.loginStatus",ea)}if(fa||"loading"!=ca){ca="loading";var ga=function(ha){ca="loaded",x.inform("FB.loginStatus",ha),x.clearSubscribers("FB.loginStatus")};ba(ga)}}c.__markCompiled&&c.__markCompiled();var v,w,ca,x=new p;ES("Object","assign",!1,x,{getLoginStatus:da,fetchLoginStatus:ba,setAuthResponse:y,getAuthResponse:z,parseSignedRequest:r.parse,xdResponseWrapper:aa}),f.exports=x},null),__d("toArray",["invariant"],function(b,c,d,e,f,g,h){function i(j){var k=j.length;if(ES("Array","isArray",!1,j)||"object"!=typeof j&&"function"!=typeof j?h(0):undefined,"number"!=typeof k?h(0):undefined,0===k||k-1 in j?undefined:h(0),j.hasOwnProperty)try{return Array.prototype.slice.call(j)}catch(l){}for(var m=Array(k),n=0;k>n;n++)m[n]=j[n];return m}c.__markCompiled&&c.__markCompiled(),f.exports=i},null),__d("createArrayFromMixed",["toArray"],function(b,c,d,e,f,g,h){function i(k){return!!k&&("object"==typeof k||"function"==typeof k)&&"length"in k&&!("setInterval"in k)&&"number"!=typeof k.nodeType&&(ES("Array","isArray",!1,k)||"callee"in k||"item"in k)}function j(k){return i(k)?ES("Array","isArray",!1,k)?k.slice():h(k):[k]}c.__markCompiled&&c.__markCompiled(),f.exports=j},null),__d("sdk.DOM",["Assert","sdk.UA","createArrayFromMixed","sdk.domReady"],function(b,c,d,e,f,g,h,i,j,k){function m(aa,ba){var ca=aa.getAttribute(ba)||aa.getAttribute(ba.replace(/_/g,"-"))||aa.getAttribute(ba.replace(/-/g,"_"))||aa.getAttribute(ba.replace(/-/g,""))||aa.getAttribute(ba.replace(/_/g,""))||aa.getAttribute("data-"+ba)||aa.getAttribute("data-"+ba.replace(/_/g,"-"))||aa.getAttribute("data-"+ba.replace(/-/g,"_"))||aa.getAttribute("data-"+ba.replace(/-/g,""))||aa.getAttribute("data-"+ba.replace(/_/g,""));return ca?String(ca):null}function n(aa,ba){var ca=m(aa,ba);return ca?/^(true|1|yes|on)$/.test(ca):null}function o(aa,ba){h.isTruthy(aa,"element not specified"),h.isString(ba);try{return String(aa[ba])}catch(ca){throw new Error("Could not read property "+ba+" : "+ca.message)}}function p(aa,ba){h.isTruthy(aa,"element not specified"),h.isString(ba);try{aa.innerHTML=ba}catch(ca){throw new Error("Could not set innerHTML : "+ca.message)}}function q(aa,ba){h.isTruthy(aa,"element not specified"),h.isString(ba);var ca=" "+o(aa,"className")+" ";return ES(ca,"indexOf",!0," "+ba+" ")>=0}function r(aa,ba){h.isTruthy(aa,"element not specified"),h.isString(ba),q(aa,ba)||(aa.className=o(aa,"className")+" "+ba)}function s(aa,ba){h.isTruthy(aa,"element not specified"),h.isString(ba);var ca=new RegExp("\\s*"+ba,"g");aa.className=ES(o(aa,"className").replace(ca,""),"trim",!0)}function t(aa,ba,ca){if(h.isString(aa),ba=ba||document.body,ca=ca||"*",ba.querySelectorAll)return j(ba.querySelectorAll(ca+"."+aa));for(var da=ba.getElementsByTagName(ca),ea=[],fa=0,ga=da.length;ga>fa;fa++)q(da[fa],aa)&&(ea[ea.length]=da[fa]);return ea}function u(aa,ba){h.isTruthy(aa,"element not specified"),h.isString(ba),ba=ba.replace(/-(\w)/g,function(ea,fa){return fa.toUpperCase()});var ca=aa.currentStyle||document.defaultView.getComputedStyle(aa,null),da=ca[ba];return/backgroundPosition?/.test(ba)&&/top|left/.test(da)&&(da="0%"),da}function v(aa,ba,ca){h.isTruthy(aa,"element not specified"),h.isString(ba),ba=ba.replace(/-(\w)/g,function(da,ea){return ea.toUpperCase()}),aa.style[ba]=ca}function w(aa,ba){for(var ea,ca=!0,da=0;ea=ba[da++];)ea in l||(ca=!1,l[ea]=!0);if(!ca)if(i.ie()<11)try{document.createStyleSheet().cssText=aa}catch(fa){document.styleSheets[0]&&(document.styleSheets[0].cssText+=aa)}else{var ga=document.createElement("style");ga.type="text/css",ga.textContent=aa,document.getElementsByTagName("head")[0].appendChild(ga)}}function x(){var aa=document.documentElement&&"CSS1Compat"==document.compatMode?document.documentElement:document.body;return{scrollTop:aa.scrollTop||document.body.scrollTop,scrollLeft:aa.scrollLeft||document.body.scrollLeft,width:window.innerWidth?window.innerWidth:aa.clientWidth,height:window.innerHeight?window.innerHeight:aa.clientHeight}}function y(aa){h.isTruthy(aa,"element not specified");var ba=0,ca=0;do ba+=aa.offsetLeft,ca+=aa.offsetTop;while(aa=aa.offsetParent);return{x:ba,y:ca}}c.__markCompiled&&c.__markCompiled();var l={},z={containsCss:q,addCss:r,removeCss:s,getByClass:t,getStyle:u,setStyle:v,getAttr:m,getBoolAttr:n,getProp:o,html:p,addCssRules:w,getViewportInfo:x,getPosition:y,ready:k};f.exports=z},null),__d("sdk.ErrorHandling",["ManagedError","sdk.Runtime","sdk.Scribe","sdk.UA","sdk.feature","wrapFunction"],function(b,c,d,e,f,g,h,i,j,k,l,m){function p(v){var w=v._originalError;throw delete v._originalError,j.log("jssdk_error",{appId:i.getClientID(),error:v.name||v.message,extra:v}),w}function q(v){var w={line:v.lineNumber||v.line,message:v.message,name:v.name,script:v.fileName||v.sourceURL||v.script,stack:v.stackTrace||v.stack};w._originalError=v,k.chrome()&&/([\w:\.\/]+\.js):(\d+)/.test(v.stack)&&(w.script=RegExp.$1,w.line=parseInt(RegExp.$2,10));for(var x in w)null==w[x]&&delete w[x];return w}function r(v,w){return function(){if(!n)return v.apply(this,arguments);try{return o=w,v.apply(this,arguments)}catch(x){if(x instanceof h)throw x;var y=q(x);y.entry=w;var z=ES(Array.prototype.slice.call(arguments),"map",!0,function(aa){var ba=Object.prototype.toString.call(aa);return/^\[object (String|Number|Boolean|Object|Date)\]$/.test(ba)?aa:aa.toString()});y.args=ES("JSON","stringify",!1,z).substring(0,200),p(y)}finally{o=""}}}function s(v){return v.__wrapper||(v.__wrapper=function(){try{return v.apply(this,arguments)}catch(w){return window.setTimeout(function(){throw w},0),!1}}),v.__wrapper}function t(v,w){return function(x,y){var z=w+":"+(o||"[global]")+":"+(x.name||"[anonymous]"+(arguments.callee.caller.name?"("+arguments.callee.caller.name+")":""));return v(m(x,"entry",z),y)}}c.__markCompiled&&c.__markCompiled();var n=l("error_handling",!1),o="";n&&(setTimeout=t(setTimeout,"setTimeout"),setInterval=t(setInterval,"setInterval"),m.setWrapper(r,"entry"));var u={guard:r,unguard:s};f.exports=u},null),__d("sdk.Insights",["sdk.Impressions"],function(b,c,d,e,f,g,h){c.__markCompiled&&c.__markCompiled();var i={TYPE:{NOTICE:"notice",WARNING:"warn",ERROR:"error"},CATEGORY:{DEPRECATED:"deprecated",APIERROR:"apierror"},log:function(j,k,l){var m={source:"jssdk",type:j,category:k,payload:l};h.log(113,m)},impression:h.impression};f.exports=i},null),__d("FB",["sdk.Auth","JSSDKCssConfig","dotAccess","sdk.domReady","sdk.DOM","sdk.ErrorHandling","sdk.Content","DOMWrapper","GlobalCallback","sdk.Insights","Log","sdk.Runtime","sdk.Scribe","JSSDKConfig"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function ba(da,ea,fa,ga){var ha;switch(/^_/.test(fa)?ha="hide":w&&!w[ea]&&(ha=x),ha){case"hide":return;case"stub":return function(){r.warn("The method FB.%s has been removed from the JS SDK.",ea)};default:return m.guard(function(){function ia(pa){return ES("Array","isArray",!1,pa)?ES(pa,"map",!0,ia):pa&&"object"==typeof pa&&pa.__wrapped?pa.__wrapped:"function"==typeof pa&&/^function/.test(pa.toString())?m.unguard(pa):pa}"warn"===ha&&(r.warn("The method FB.%s is not officially supported by Facebook and access to it will soon be removed.",ea),y.hasOwnProperty(ea)||(q.log(q.TYPE.WARNING,q.CATEGORY.DEPRECATED,"FB."+ea),t.log("jssdk_error",{appId:s.getClientID(),error:"Private method used",extra:{args:ea}}),y[ea]=!0));var la,ja=ES(Array.prototype.slice.call(arguments),"map",!0,ia),ka=da.apply(ga,ja),ma=!0;if(ka&&"object"==typeof ka){la=ES("Object","create",!1,ka),la.__wrapped=ka;for(var na in ka){var oa=ka[na];"function"==typeof oa&&"constructor"!==na&&(ma=!1,la[na]=ba(oa,ea+":"+na,na,ka))}}return ma&&ma?ka:la},ea)}}function ca(da,ea){var fa=da?j(v,da,!0):v;ES(ES("Object","keys",!1,ea),"forEach",!0,function(ga){var ha=ea[ga];if("function"==typeof ha){var ia=(da?da+".":"")+ga,ja=ba(ha,ia,ga,ea);ja&&(fa[ga]=ja)}else"object"==typeof ha&&(ia=(da?da+".":"")+ga,w&&w[ia]&&(fa[ga]=ha))})}c.__markCompiled&&c.__markCompiled();var v,w,x=j(u,"api.mode"),y={};v=window.FB={};var z={};r.level=0,p.setPrefix("FB.__globalCallbacks");var aa=document.createElement("div");o.setRoot(aa),k(function(){r.info("domReady"),n.appendHidden(aa),i.rules&&l.addCssRules(i.rules,i.components)}),s.subscribe("AccessToken.change",function(da){da||"connected"!==s.getLoginStatus()||h.getLoginStatus(null,!0)}),j(u,"api.whitelist.length")&&(w={},ES(u.api.whitelist,"forEach",!0,function(da){w[da]=1})),s.setSecure(function(){var da=/iframe_canvas|app_runner/.test(window.name),ea=/dialog/.test(window.name);return"https:"!=location.protocol||window!=top&&(da||ea)?/_fb_https?/.test(window.name)?-1!=ES(window.name,"indexOf",!0,"_fb_https"):void 0:!0}()),ES("Object","assign",!1,z,{provide:ca}),f.exports=z},null),__d("ArgumentError",["ManagedError"],function(b,c,d,e,f,g,h){function i(j,k){h.prototype.constructor.apply(this,arguments)}c.__markCompiled&&c.__markCompiled(),i.prototype=new h,i.prototype.constructor=i,f.exports=i},null),__d("CORSRequest",["wrapFunction","QueryString"],function(b,c,d,e,f,g,h,i){function j(m,n){if(!self.XMLHttpRequest)return null;var o=new XMLHttpRequest,p=function(){};if("withCredentials"in o)o.open(m,n,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded");else{if(!self.XDomainRequest)return null;o=new XDomainRequest;try{o.open(m,n),o.onprogress=o.ontimeout=p}catch(q){return null}}var r={send:function(u){o.send(u)}},s=h(function(){s=p,"onload"in r&&r.onload(o)},"entry","XMLHttpRequest:load"),t=h(function(){t=p,"onerror"in r&&r.onerror(o)},"entry","XMLHttpRequest:error");return o.onload=function(){s()},o.onerror=function(){t()},o.onreadystatechange=function(){4==o.readyState&&(200==o.status?s():t())},r}function k(m,n,o,p){o.suppress_http_code=1;var q=i.encode(o);"post"!=n&&(m=i.appendToUrl(m,q),q="");var r=j(n,m);return r?(r.onload=function(s){p(ES("JSON","parse",!1,s.responseText))},r.onerror=function(s){p(s.responseText?ES("JSON","parse",!1,s.responseText):{error:{type:"http",message:"unknown error",status:s.status}})},r.send(q),!0):!1}c.__markCompiled&&c.__markCompiled();var l={execute:k};f.exports=l},null),__d("FlashRequest",["DOMWrapper","Flash","GlobalCallback","QueryString","Queue"],function(b,c,d,e,f,g,h,i,j,k,l){function q(){if(!o)throw new Error("swfUrl has not been set");var t=j.create(function(){m.start(function(v){var w=p.execute(v.method,v.url,v.body);if(!w)throw new Error("Could create request");n[w]=v.callback})}),u=j.create(function(v,w,x){var y;try{y=ES("JSON","parse",!1,decodeURIComponent(x))}catch(z){y={error:{type:"SyntaxError",message:z.message,status:w,raw:x}}}n[v](y),delete n[v]});p=i.embed(o,h.getRoot(),null,{log:!1,initCallback:t,requestCallback:u})}function r(t,u,v,w){v.suppress_http_code=1,v.method||(v.method=u);var x=k.encode(v);if("get"===u&&t.length+x.length<2e3?(t=k.appendToUrl(t,x),x=""):u="post",!m){if(!i.isAvailable())return!1;m=new l,q()}return m.enqueue({method:u,url:t,body:x,callback:w}),!0}c.__markCompiled&&c.__markCompiled();var m,o,p,n={},s={setSwfUrl:function(t){o=t},execute:r};f.exports=s},null),__d("flattenObject",[],function(b,c,d,e,f,g){function h(i){var j={};for(var k in i)if(i.hasOwnProperty(k)){var l=i[k];if(null===l||undefined===l)continue;"string"==typeof l?j[k]=l:j[k]=ES("JSON","stringify",!1,l)}return j}c.__markCompiled&&c.__markCompiled(),f.exports=h},null),__d("JSONPRequest",["DOMWrapper","GlobalCallback","QueryString"],function(b,c,d,e,f,g,h,i,j){function l(n,o,p,q){var r=document.createElement("script"),s=function(u){s=function(){},i.remove(p.callback),q(u),r.parentNode.removeChild(r)};if(p.callback=i.create(s),p.method||(p.method=o),n=j.appendToUrl(n,p),n.length>k)return i.remove(p.callback),!1;r.onerror=function(){s({error:{type:"http",message:"unknown error"}})};var t=function(){setTimeout(function(){s({error:{type:"http",message:"unknown error"}})},0)};return r.addEventListener?r.addEventListener("load",t,!1):r.onreadystatechange=function(){/loaded|complete/.test(this.readyState)&&t()},r.src=n,h.getRoot().appendChild(r),!0}c.__markCompiled&&c.__markCompiled();var k=2e3,m={execute:l,MAX_QUERYSTRING_LENGTH:k};f.exports=m},null),__d("ApiClient",["ArgumentError","Assert","CORSRequest","FlashRequest","flattenObject","JSONPRequest","Log","ObservableMixin","QueryString","sprintf","sdk.URI","UrlMap","ApiClientConfig","invariant"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function ka(ta,ua,va,wa){var xa=0!==ha&&fa>=ha;if(xa)return ga.push(function(){return ka(ta,ua,va,wa)}),void ra.inform("request.queued",ta,ua,va);fa++,x&&(va=ES("Object","assign",!1,{},x,va)),va.access_token=va.access_token||v,va.pretty=va.pretty||0,va=l(va);var za,ya={jsonp:m,cors:j,flash:k};va.transport?(za=[va.transport],delete va.transport):za=ba;for(var ab=0;ab<za.length;ab++){var bb=ya[za[ab]],cb=ES("Object","assign",!1,{},va);if(bb.execute(ta,ua,cb,wa))return}wa({error:{type:"no-transport",message:"Could not find a usable transport for request"}})}function la(ta,ua,va,wa,xa,ya){ya&&ya.error&&ra.inform("request.error",ua,va,wa,ya,ES("Date","now",!1)-xa),ra.inform("request.complete",ua,va,wa,ya,ES("Date","now",!1)-xa),fa--,ta&&ta(ya);var za=ga.length>0&&ha>fa;if(za){var ab=ga.shift();ab()}}function ma(ta){var ua=ta.shift();i.isString(ua,"Invalid path"),/^https?/.test(ua)||"/"===ua.charAt(0)||(ua="/"+ua);var va,wa={};try{va=new r(ua)}catch(xa){throw new h(xa.message,xa)}ES(ta,"forEach",!0,function(bb){return wa[typeof bb]=bb});var ya=(wa.string||"get").toLowerCase();i.isTrue(z.hasOwnProperty(ya),q("Invalid method passed to ApiClient: %s",ya));var za=wa["function"];za||n.warn("No callback passed to the ApiClient"),wa.object&&va.addQueryData(l(wa.object));var ab=va.getQueryData();return ab.method=ya,{uri:va,callback:za,params:ab}}function na(){for(var ta=arguments.length,ua=Array(ta),va=0;ta>va;va++)ua[va]=arguments[va];var wa=ma(ua),xa=wa.uri,ya=wa.callback,za=wa.params,ab=za.method;sa(xa,ab)&&(ab="post");var bb=xa.getProtocol()&&xa.getDomain()?xa.setQueryData({}).toString():s.resolve("graph")+xa.getPath();ra.inform("request.prepare",bb,za),ka(bb,"get"==ab?"get":"post",za,ES(la,"bind",!0,null,ya,xa.getPath(),ab,za,ES("Date","now",!1)))}function oa(){for(var ta=arguments.length,ua=Array(ta),va=0;ta>va;va++)ua[va]=arguments[va];var wa=ma(ua),xa=wa.uri,ya=wa.callback,za=wa.params.method,ab={method:za,relative_url:xa.removeQueryData("method").toString()};"post"==za.toLowerCase()&&(ab.body=p.encode(xa.getQueryData()),ab.relative_url=xa.setQueryData({}).toString()),ca.push(ab),da.push(ya),ca.length==ia?(ea&&clearTimeout(ea),pa()):ea||(ea=setTimeout(pa,0))}function pa(){ca.length>0?undefined:u(0),ca.length!==da.length?u(0):undefined;var ta=ca,ua=da;if(ca=[],da=[],ea=null,1===ta.length){var va=ta[0],wa=ua[0],xa=va.body?p.decode(va.body):null;return void na(va.relative_url,va.method,xa,wa)}na("/","POST",{batch:ta,include_headers:!1,batch_app_id:w||ja},function(ya){ES("Array","isArray",!1,ya)?ES(ya,"forEach",!0,function(za,ab){ua[ab](ES("JSON","parse",!1,za.body))}):ES(ua,"forEach",!0,function(za){return za({error:{message:"Fatal: batch call failed."}})})})}function qa(ta,ua){i.isObject(ta),i.isString(ta.method,"method missing"),ua||n.warn("No callback passed to the ApiClient");var va=ta.method.toLowerCase().replace(".","_");ta.format="json-strings",ta.api_key=w;var wa=va in aa?"api_read":"api",xa=s.resolve(wa)+"/restserver.php",ya=ES(la,"bind",!0,null,ua,"/restserver.php","get",ta,ES("Date","now",!1));ka(xa,"get",ta,ya)}function sa(ta,ua){return ta.toString().length>y&&"get"===ua}c.__markCompiled&&c.__markCompiled();var v,w,x,y=m.MAX_QUERYSTRING_LENGTH,z={get:!0,post:!0,delete:!0,put:!0},aa={fql_query:!0,fql_multiquery:!0,friends_get:!0,notifications_get:!0,stream_get:!0,users_getinfo:!0},ba=["jsonp","cors","flash"],ca=[],da=[],ea=null,fa=0,ga=[],ha=0,ia=50,ja=105440539523,ra=ES("Object","assign",!1,new o,{setAccessToken:function(ta){v=ta},getAccessToken:function(){return v},setClientID:function(ta){w=ta},setDefaultParams:function(ta){x=ta},setDefaultTransports:function(ta){ba=ta},setMaxConcurrentRequests:function(ta){ha=ta},getCurrentlyExecutingRequestCount:function(){return fa},getQueuedRequestCount:function(){return ga.length},rest:qa,graph:na,scheduleBatchCall:oa});k.setSwfUrl(t.FlashRequest.swfUrl),f.exports=ra},null),__d("sdk.PlatformVersioning",["sdk.Runtime","ManagedError"],function(b,c,d,e,f,g,h,i){c.__markCompiled&&c.__markCompiled();var j=/^v\d+\.\d\d?$/,k={REGEX:j,assertVersionIsSet:function(){if(!h.getVersion())throw new i("init not called with valid version")},assertValidVersion:function(l){if(!j.test(l))throw new i("invalid version specified")}};f.exports=k},null),__d("sdk.api",["ApiClient","sdk.PlatformVersioning","sdk.Runtime","sdk.Scribe","sdk.URI","sdk.feature"],function(b,c,d,e,f,g,h,i,j,k,l,m){function p(q){if("string"==typeof q)if(j.getIsVersioned()){i.assertVersionIsSet(),/https?/.test(q)||"/"===q.charAt(0)||(q="/"+q),q=new l(q).setDomain(null).setProtocol(null).toString(),i.REGEX.test(q.substring(1,ES(q,"indexOf",!0,"/",1)))||(q="/"+j.getVersion()+q);var r=[q].concat(Array.prototype.slice.call(arguments,1));h.graph.apply(h,r)}else h.graph.apply(h,arguments);else h.rest.apply(h,arguments)}c.__markCompiled&&c.__markCompiled();var o,n=m("should_log_response_error",!1);j.subscribe("ClientID.change",function(q){return h.setClientID(q)}),j.subscribe("AccessToken.change",function(q){o=q,h.setAccessToken(q)}),h.setDefaultParams({sdk:"joey"}),h.subscribe("request.complete",function(q,r,s,t){var u=!1;t&&"object"==typeof t&&(t.error?("invalid_token"==t.error||"OAuthException"==t.error.type&&190==t.error.code)&&(u=!0):t.error_code&&"190"==t.error_code&&(u=!0)),u&&o===j.getAccessToken()&&j.setAccessToken(null)}),h.subscribe("request.complete",function(q,r,s,t){("/me/permissions"==q&&"delete"===r||"/restserver.php"==q&&"Auth.revokeAuthorization"==s.method)&&t===!0&&j.setAccessToken(null)}),h.subscribe("request.error",function(q,r,s,t){n&&"http"===t.error.type&&k.log("jssdk_error",{appId:j.getClientID(),error:"transport",extra:{name:"transport",message:ES("JSON","stringify",!1,t.error)}})}),f.exports=p},null),__d("legacy:fb.api",["FB","sdk.api"],function(b,c,d,e,f,g,h,i){c.__markCompiled&&c.__markCompiled(),h.provide("",{api:i})},3),__d("sdk.AppEvents",["Assert","sdk.Impressions","sdk.Runtime"],function(b,c,d,e,f,g,h,i,j){
function p(t,u,v,w){h.isTrue(q(u),"Invalid event name: "+u+". It must be between 1 and "+n+" characters, and must be contain only alphanumerics, _, - or spaces, starting with alphanumeric or _.");var x={ae:1,ev:u,vts:v,canvas:j.isCanvasEnvironment()?1:0};w&&(x.cd=w),i.impression({api_key:t,payload:ES("JSON","stringify",!1,x)})}function q(t){return null===t||0===t.length||t.length>n||!new RegExp(o).test(t)?!1:!0}function r(t,u,v,w){var x={};x[m.CURRENCY]=v,p(t,l.PURCHASED,u,babelHelpers._extends({},w,x))}function s(t){p(t,l.ACTIVATED_APP)}c.__markCompiled&&c.__markCompiled();var k={COMPLETED_REGISTRATION:"fb_mobile_complete_registration",VIEWED_CONTENT:"fb_mobile_content_view",SEARCHED:"fb_mobile_search",RATED:"fb_mobile_rate",COMPLETED_TUTORIAL:"fb_mobile_tutorial_completion",ADDED_TO_CART:"fb_mobile_add_to_cart",ADDED_TO_WISHLIST:"fb_mobile_add_to_wishlist",INITIATED_CHECKOUT:"fb_mobile_initiated_checkout",ADDED_PAYMENT_INFO:"fb_mobile_add_payment_info",ACHIEVED_LEVEL:"fb_mobile_level_achieved",UNLOCKED_ACHIEVEMENT:"fb_mobile_achievement_unlocked",SPENT_CREDITS:"fb_mobile_spent_credits"},l={ACTIVATED_APP:"fb_mobile_activate_app",PURCHASED:"fb_mobile_purchase"},m={CURRENCY:"fb_currency",REGISTRATION_METHOD:"fb_registration_method",CONTENT_TYPE:"fb_content_type",CONTENT_ID:"fb_content_id",SEARCH_STRING:"fb_search_string",SUCCESS:"fb_success",MAX_RATING_VALUE:"fb_max_rating_value",PAYMENT_INFO_AVAILABLE:"fb_payment_info_available",NUM_ITEMS:"fb_num_items",LEVEL:"fb_level",DESCRIPTION:"fb_description"},n=40,o="^[0-9a-zA-Z_]+[0-9a-zA-Z _-]*$";f.exports={activateApp:s,logEvent:p,logPurchase:r,isValidEventName:q,EventNames:k,ParameterNames:m}},null),__d("legacy:fb.appevents",["Assert","sdk.AppEvents","FB","sdk.feature","sdk.Runtime"],function(b,c,d,e,f,g,h,i,j,k,l){c.__markCompiled&&c.__markCompiled(),j.provide("AppEvents",{logEvent:function(m,n,o){h.isTrue(k("allow_non_canvas_app_events",!1)||l.isCanvasEnvironment(),"You can only use this function in Facebook Canvas environment"),h.isString(m,"Invalid eventName"),h.maybeNumber(n,"Invalid valueToSum"),h.maybeObject(o,"Invalid params");var p=l.getClientID();h.isTrue(null!==p&&p.length>0,"You need to call FB.init() with App ID first."),i.logEvent(p,m,n,o)},logPurchase:function(m,n,o){h.isTrue(k("allow_non_canvas_app_events",!1)||l.isCanvasEnvironment(),"You can only use this function in Facebook Canvas environment"),h.isNumber(m,"Invalid purchaseAmount"),h.isString(n,"Invalid currency"),h.maybeObject(o,"Invalid params");var p=l.getClientID();h.isTrue(null!==p&&p.length>0,"You need to call FB.init() with App ID first."),i.logPurchase(p,m,n,o)},activateApp:function(){h.isTrue(k("allow_non_canvas_app_events",!1)||l.isCanvasEnvironment(),"You can only use this function in Facebook Canvas environment");var m=l.getClientID();h.isTrue(null!==m&&m.length>0,"You need to call FB.init() with App ID first."),i.activateApp(m)},EventNames:i.EventNames,ParameterNames:i.ParameterNames})},3),__d("sdk.Canvas.Environment",["sdk.RPC"],function(b,c,d,e,f,g,h){function i(l){h.remote.getPageInfo(function(m){l(m.result)})}function j(l,m){h.remote.scrollTo({x:l||0,y:m||0})}c.__markCompiled&&c.__markCompiled(),h.stub("getPageInfo"),h.stub("scrollTo");var k={getPageInfo:i,scrollTo:j};f.exports=k},null),__d("sdk.fbt",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={_:function(i){return"string"==typeof i?i:i[0]}};f.exports=h},null),__d("sdk.Dialog",["sdk.Canvas.Environment","sdk.Content","sdk.DOM","DOMEventListener","ObservableMixin","sdk.Runtime","Type","sdk.UA","sdk.fbt","sdk.feature"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function w(){if(q("dialog_resize_refactor",!1)){var z=j.getViewportInfo();if(z.height&&z.width)return{width:Math.min(z.width,s),height:Math.min(z.height,t)}}return null}c.__markCompiled&&c.__markCompiled();var r=30,s=590,t=500,u=240,v=575,x=n.extend({constructor:function(aa,ba){this.parent(),this.id=aa,this.display=ba,this._e2e={},y._dialogs||(y._dialogs={},y._addOrientationHandler()),y._dialogs[aa]=this,this.trackEvent("init")},trackEvent:function(z,aa){return this._e2e[z]?this:(this._e2e[z]=aa||ES("Date","now",!1),"close"==z&&this.inform("e2e:end",this._e2e),this)},trackEvents:function(z){"string"==typeof z&&(z=ES("JSON","parse",!1,z));for(var aa in z)z.hasOwnProperty(aa)&&this.trackEvent(aa,z[aa]);return this}},l),y={newInstance:function(z,aa){return new x(z,aa)},_dialogs:null,_lastYOffset:0,_loaderEl:null,_overlayEl:null,_stack:[],_active:null,_forceTabletStyle:null,get:function(z){return y._dialogs[z]},_findRoot:function(z){for(;z;){if(j.containsCss(z,"fb_dialog"))return z;z=z.parentNode}},_createWWWLoader:function(z){return z=z?z:460,y.create({content:'<div class="dialog_title">  <a id="fb_dialog_loader_close">    <div class="fb_dialog_close_icon"></div>  </a>  <span>Facebook</span>  <div style="clear:both;"></div></div><div class="dialog_content"></div><div class="dialog_footer"></div>',width:z})},_createMobileLoader:function(){var z;return z=o.nativeApp()?'<div class="dialog_header"></div>':y.isTabletStyle()?'<div class="overlayLoader"><div id="fb_dialog_loader_spinner"></div><a id="fb_dialog_loader_close" href="#">'+p._("Cancel")+"</a></div>":'<div class="dialog_header"><table>  <tbody>    <tr>      <td class="header_left">        <label class="touchable_button">          <input type="submit" value="'+p._("Cancel")+'"            id="fb_dialog_loader_close"/>        </label>      </td>      <td class="header_center">        <div>         '+p._("Loading...")+'        </div>      </td>      <td class="header_right">      </td>    </tr>  </tbody></table></div>',y.create({classes:"loading"+(y.isTabletStyle()?" centered":""),content:z})},_restoreBodyPosition:function(){var z=document.body;y.isTabletStyle()?j.removeCss(z,"fb_reposition"):j.removeCss(z,"fb_hidden")},_showTabletOverlay:function(){y.isTabletStyle()&&(y._overlayEl||(y._overlayEl=document.createElement("div"),y._overlayEl.setAttribute("id","fb_dialog_ipad_overlay"),i.append(y._overlayEl,null)),y._overlayEl.className="")},_hideTabletOverlay:function(){y.isTabletStyle()&&(y._overlayEl.className="hidden")},showLoader:function(z,aa){y._showTabletOverlay(),y._loaderEl||(y._loaderEl=y._findRoot(o.mobile()?y._createMobileLoader():y._createWWWLoader(aa))),z||(z=function(){});var ba=document.getElementById("fb_dialog_loader_close");ba&&(j.removeCss(ba,"fb_hidden"),ba.onclick=function(){y._hideLoader(),y._restoreBodyPosition(),y._hideTabletOverlay(),z()}),y._makeActive(y._loaderEl)},_hideLoader:function(){y._loaderEl&&y._loaderEl==y._active&&(y._loaderEl.style.top="-10000px")},_makeActive:function(z){y._setDialogSizes(),y._lowerActive(),y._active=z,m.isEnvironment(m.ENVIRONMENTS.CANVAS)&&h.getPageInfo(function(aa){y._centerActive(aa)}),y._centerActive()},_lowerActive:function(){y._active&&(y._active.style.top="-10000px",y._active=null)},_removeStacked:function(z){y._stack=ES(y._stack,"filter",!0,function(aa){return aa!=z})},_centerActive:function(z){var aa=y._active;if(aa){var ba=j.getViewportInfo(),ca=parseInt(aa.offsetWidth,10),da=parseInt(aa.offsetHeight,10),ea=ba.scrollLeft+(ba.width-ca)/2,fa=(ba.height-da)/2.5;fa>ea&&(fa=ea);var ga=ba.height-da-fa,ha=(ba.height-da)/2;if(z&&(ha=z.scrollTop-z.offsetTop+(z.clientHeight-da)/2),fa>ha?ha=fa:ha>ga&&(ha=ga),ha+=ba.scrollTop,o.mobile()){var ia=100,ja=document.body;y.isTabletStyle()?(ia+=(ba.height-da)/2,j.addCss(ja,"fb_reposition")):(j.addCss(ja,"fb_hidden"),q("dialog_resize_refactor",!1)&&(ja.style.width="auto"),ha=1e4);var ka=j.getByClass("fb_dialog_padding",aa);ka.length&&(ka[0].style.height=ia+"px")}aa.style.left=(ea>0?ea:0)+"px",aa.style.top=(ha>0?ha:0)+"px"}},_setDialogSizes:function(){if(o.mobile())for(var z in y._dialogs)if(y._dialogs.hasOwnProperty(z)){var aa=document.getElementById(z);aa&&(aa.style.width=y.getDefaultSize().width+"px",aa.style.height=y.getDefaultSize().height+"px")}},getDefaultSize:function(){if(o.mobile()){var z=w();if(z)return j.getViewportInfo().width<=z.width&&(z.width=j.getViewportInfo().width-r),j.getViewportInfo().height<=z.height&&(z.height=j.getViewportInfo().height-r),z;if(o.ipad())return{width:t,height:s};if(o.android())return{width:screen.availWidth,height:screen.availHeight};var aa=window.innerWidth,ba=window.innerHeight,ca=aa/ba>1.2;return{width:aa,height:Math.max(ba,ca?screen.width:screen.height)}}return{width:v,height:u}},_handleOrientationChange:function(z){var aa=q("dialog_resize_refactor",!1)?j.getViewportInfo().width:screen.availWidth;if(o.android()&&aa==y._availScreenWidth)return void setTimeout(y._handleOrientationChange,50);if(y._availScreenWidth=aa,y.isTabletStyle())y._setDialogSizes(),y._centerActive();else{var ba=y.getDefaultSize().width;for(var ca in y._dialogs)if(y._dialogs.hasOwnProperty(ca)){var da=document.getElementById(ca);da&&(da.style.width=ba+"px")}}},_addOrientationHandler:function(){if(o.mobile()){var z="onorientationchange"in window?"orientationchange":"resize";y._availScreenWidth=q("dialog_resize_refactor",!1)?j.getViewportInfo().width:screen.availWidth,k.add(window,z,y._handleOrientationChange)}},create:function(z){z=z||{};var aa=document.createElement("div"),ba=document.createElement("div"),ca="fb_dialog";if(z.closeIcon&&z.onClose){var da=document.createElement("a");da.className="fb_dialog_close_icon",da.onclick=z.onClose,aa.appendChild(da)}ca+=" "+(z.classes||""),o.ie()?(ca+=" fb_dialog_legacy",ES(["vert_left","vert_right","horiz_top","horiz_bottom","top_left","top_right","bottom_left","bottom_right"],"forEach",!0,function(ga){var ha=document.createElement("span");ha.className="fb_dialog_"+ga,aa.appendChild(ha)})):ca+=o.mobile()?" fb_dialog_mobile":" fb_dialog_advanced",z.content&&i.append(z.content,ba),aa.className=ca;var ea=parseInt(z.width,10);if(isNaN(ea)||(aa.style.width=ea+"px"),ba.className="fb_dialog_content",aa.appendChild(ba),o.mobile()){var fa=document.createElement("div");fa.className="fb_dialog_padding",aa.appendChild(fa)}return i.append(aa),z.visible&&y.show(aa),ba},show:function(z){var aa=y._findRoot(z);aa&&(y._removeStacked(aa),y._hideLoader(),y._makeActive(aa),y._stack.push(aa),"fbCallID"in z&&y.get(z.fbCallID).inform("iframe_show").trackEvent("show"))},hide:function(z){var aa=y._findRoot(z);y._hideLoader(),aa==y._active&&(y._lowerActive(),y._restoreBodyPosition(),y._hideTabletOverlay(),"fbCallID"in z&&y.get(z.fbCallID).inform("iframe_hide").trackEvent("hide"))},remove:function(z){if(z=y._findRoot(z)){var aa=y._active==z;y._removeStacked(z),aa?(y._hideLoader(),y._stack.length>0?y.show(y._stack.pop()):(y._lowerActive(),y._restoreBodyPosition(),y._hideTabletOverlay())):null===y._active&&y._stack.length>0&&y.show(y._stack.pop()),setTimeout(function(){z.parentNode.removeChild(z)},3e3)}},isActive:function(z){var aa=y._findRoot(z);return aa&&aa===y._active},setForceTabletStyle:function(z){y._forceTabletStyle=!!z},isTabletStyle:function(){var z;if(!o.mobile())return!1;if(y._forceTabletStyle)return!0;if(q("dialog_resize_refactor",!1)){var aa=w();z=aa&&(aa.height>=s||aa.width>=t)}else z=!!o.ipad();return z}};f.exports=y},null),__d("sdk.Frictionless",["sdk.Auth","sdk.api","sdk.Event","sdk.Dialog"],function(b,c,d,e,f,g,h,i,j,k){c.__markCompiled&&c.__markCompiled();var l={_allowedRecipients:{},_useFrictionless:!1,_updateRecipients:function(){l._allowedRecipients={},i("/me/apprequestformerrecipients",function(m){m&&!m.error&&ES(m.data,"forEach",!0,function(n){l._allowedRecipients[n.recipient_id]=!0})})},init:function(){l._useFrictionless=!0,h.getLoginStatus(function(m){"connected"==m.status&&l._updateRecipients()}),j.subscribe("auth.login",function(m){m.authResponse&&l._updateRecipients()})},_processRequestResponse:function(m,n){return function(o){var p=o&&o.updated_frictionless;l._useFrictionless&&p&&l._updateRecipients(),o&&(!n&&o.frictionless&&(k._hideLoader(),k._restoreBodyPosition(),k._hideIPadOverlay()),delete o.frictionless,delete o.updated_frictionless),m&&m(o)}},isAllowed:function(m){if(!m)return!1;if("number"==typeof m)return m in l._allowedRecipients;"string"==typeof m&&(m=m.split(",")),m=ES(m,"map",!0,function(p){return ES(String(p),"trim",!0)});var n=!0,o=!1;return ES(m,"forEach",!0,function(p){n=n&&p in l._allowedRecipients,o=!0}),n&&o}};j.subscribe("init:post",function(m){m.frictionlessRequests&&l.init()}),f.exports=l},null),__d("sdk.Native",["Log","sdk.UA"],function(b,c,d,e,f,g,h,i){c.__markCompiled&&c.__markCompiled();var j="fbNativeReady",k={onready:function(l){if(!i.nativeApp())return void h.error("FB.Native.onready only works when the page is rendered in a WebView of the native Facebook app. Test if this is the case calling FB.UA.nativeApp()");if(window.__fbNative&&!this.nativeReady&&ES("Object","assign",!1,this,window.__fbNative),this.nativeReady)l();else{var m=function(n){window.removeEventListener(j,m),this.onready(l)};window.addEventListener(j,m,!1)}}};f.exports=k},null),__d("resolveURI",[],function(b,c,d,e,f,g){function h(i){if(!i)return window.location.href;i=i.replace(/&/g,"&amp;").replace(/"/g,"&quot;");var j=document.createElement("div");return j.innerHTML='<a href="'+i+'"></a>',j.firstChild.href}c.__markCompiled&&c.__markCompiled(),f.exports=h},null),__d("sdk.UIServer",["sdk.Auth","sdk.Content","sdk.DOM","sdk.Dialog","sdk.Event","sdk.Frictionless","Log","sdk.Native","QueryString","sdk.RPC","sdk.Runtime","JSSDKConfig","sdk.UA","UrlMap","sdk.XD","createObjectFrom","sdk.feature","flattenObject","sdk.getContextType","guid","insertIframe","resolveURI"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){function ga(ja,ka){return fa[ka]=!0,function(la){delete fa[ka],ja(la)}}function ha(ja){if(!x("should_force_single_dialog_instance",!0))return!1;var ka=ja.method.toLowerCase();return"pay"===ka&&"async"===ja.display?!0:!1}c.__markCompiled&&c.__markCompiled();var da={transform:function(ja){return"touch"===ja.params.display&&ia.canIframe(ja.params)&&window.postMessage?(ja.params.channel=ia._xdChannelHandler(ja.id,"parent"),t.nativeApp()||(ja.params.in_iframe=1),ja):ia.genericTransform(ja)},getXdRelation:function(ja){var ka=ja.display;return"touch"===ka&&window.postMessage&&ja.in_iframe?"parent":ia.getXdRelation(ja)}},ea={"stream.share":{size:{width:670,height:340},url:"sharer.php",transform:function(ja){return ja.params.u||(ja.params.u=window.location.toString()),ja.params.display="popup",ja}},apprequests:{transform:function(ja){return ja=da.transform(ja),ja.params.frictionless=m&&m._useFrictionless,ja.params.frictionless&&(m.isAllowed(ja.params.to)&&(ja.params.display="iframe",ja.params.in_iframe=!0,ja.hideLoader=!0),ja.cb=m._processRequestResponse(ja.cb,ja.hideLoader)),ja.closeIcon=!1,ja},getXdRelation:da.getXdRelation},feed:da,"permissions.oauth":{url:"dialog/oauth",size:{width:t.mobile()?null:475,height:t.mobile()?null:183},transform:function(ja){if(!r.getClientID())return void n.error("FB.login() called before FB.init().");if(h.getAuthResponse()&&!ja.params.scope&&!ja.params.auth_type)return n.error("FB.login() called when user is already connected."),void(ja.cb&&ja.cb({status:r.getLoginStatus(),authResponse:h.getAuthResponse()}));var ka=ja.cb,la=ja.id;delete ja.cb;var ma=ES("Object","keys",!1,ES("Object","assign",!1,ja.params.response_type?w(ja.params.response_type.split(",")):{},{token:!0,signed_request:!0})).join(",");return"async"===ja.params.display?(ES("Object","assign",!1,ja.params,{client_id:r.getClientID(),origin:z(),response_type:ma,domain:location.hostname}),ja.cb=h.xdResponseWrapper(ka,h.getAuthResponse(),"permissions.oauth")):ES("Object","assign",!1,ja.params,{client_id:r.getClientID(),redirect_uri:ca(ia.xdHandler(ka,la,"opener",h.getAuthResponse(),"permissions.oauth")),origin:z(),response_type:ma,domain:location.hostname}),ja}},"auth.logout":{url:"logout.php",transform:function(ja){if(r.getClientID()){if(h.getAuthResponse())return ja.params.next=ia.xdHandler(ja.cb,ja.id,"parent",h.getAuthResponse(),"logout"),ja;n.error("FB.logout() called without an access token.")}else n.error("FB.logout() called before calling FB.init().")}},"login.status":{url:"dialog/oauth",transform:function(ja){var ka=ja.cb,la=ja.id;return delete ja.cb,ES("Object","assign",!1,ja.params,{client_id:r.getClientID(),redirect_uri:ia.xdHandler(ka,la,"parent",h.getAuthResponse(),"login_status"),origin:z(),response_type:"token,signed_request,code",domain:location.hostname}),ja}},pay:{size:{width:555,height:120},connectDisplay:"popup"}},fa={},ia={Methods:ea,_loadedNodes:{},_defaultCb:{},_resultToken:'"xxRESULTTOKENxx"',genericTransform:function(ja){return("dialog"==ja.params.display||"iframe"==ja.params.display)&&ES("Object","assign",!1,ja.params,{display:"iframe",channel:ia._xdChannelHandler(ja.id,"parent.parent")},!0),ja},checkOauthDisplay:function(ja){var ka=ja.scope||ja.perms||r.getScope();if(!ka)return ja.display;for(var la=ka.split(/\s|,/g),ma=0;ma<la.length;ma++)if(!s.initSitevars.iframePermissions[ES(la[ma],"trim",!0)])return"popup";return ja.display},prepareCall:function(ja,ka){var la=ja.method.toLowerCase(),ma=ia.Methods.hasOwnProperty(la)?ES("Object","assign",!1,{},ia.Methods[la]):{},na=aa(),oa=r.getSecure()||"auth.status"!==la&&"login.status"!=la;if(ES("Object","assign",!1,ja,{app_id:r.getClientID(),locale:r.getLocale(),sdk:"joey",access_token:oa&&r.getAccessToken()||undefined}),("share"===la||"share_open_graph"===la)&&ja.iframe_test&&(ma=ES("Object","assign",!1,{},da)),ja.display=ia.getDisplayMode(ma,ja),ma.url||(ma.url="dialog/"+la),"dialog/oauth"!=ma.url&&"dialog/permissions.request"!=ma.url||!("iframe"==ja.display||"touch"==ja.display&&ja.in_iframe)||(ja.display=ia.checkOauthDisplay(ja)),"popup"==ja.display&&delete ja.access_token,r.getIsVersioned()&&"dialog/"===ma.url.substring(0,7)&&(ma.url=ja.version+"/"+ma.url),ha(ja)){if(fa[la]){var pa='Dialog "'+la+'" is trying to run more than once.';return n.warn(pa),void ka({error_code:-100,error_message:pa})}ka=ga(ka,la)}var qa={cb:ka,id:na,size:ma.size||ia.getDefaultSize(),url:u.resolve("touch"==ja.display?"m":"www",oa)+"/"+ma.url,params:ja,name:la,dialog:k.newInstance(na,ja.display)},ra=ma.transform?ma.transform:ia.genericTransform;if(!ra||(qa=ra(qa))){"touch"===ja.display&&ja.in_iframe&&(qa.params.parent_height=window.innerHeight);var sa=ma.getXdRelation||ia.getXdRelation,ta=sa(qa.params);return qa.id in ia._defaultCb||"next"in qa.params||"redirect_uri"in qa.params||(qa.params.next=ia._xdResult(qa.cb,qa.id,ta,!0)),"parent"===ta&&ES("Object","assign",!1,qa.params,{channel_url:ia._xdChannelHandler(na,"parent.parent")},!0),qa=ia.prepareParams(qa)}},prepareParams:function(ja){"async"!==ja.params.display&&delete ja.params.method,ja.params=y(ja.params);var ka=p.encode(ja.params);return!t.nativeApp()&&ia.urlTooLongForIE(ja.url+"?"+ka)?ja.post=!0:ka&&(ja.url+="?"+ka),ja},urlTooLongForIE:function(ja){return ja.length>2e3},getDisplayMode:function(ja,ka){if("hidden"===ka.display||"none"===ka.display)return ka.display;var la=r.isEnvironment(r.ENVIRONMENTS.CANVAS)||r.isEnvironment(r.ENVIRONMENTS.PAGETAB);return la&&!ka.display?"async":t.mobile()||"touch"===ka.display?"touch":"iframe"!=ka.display&&"dialog"!=ka.display||ia.canIframe(ka)?ja.connectDisplay&&!la?ja.connectDisplay:ka.display||(ia.canIframe(ka)?"dialog":"popup"):(n.error('"dialog" mode can only be used when the user is connected.'),"popup")},canIframe:function(ja){return r.getAccessToken()?!0:"not_authorized"===r.getLoginStatus()?!!ja.iframe_test:!1},getXdRelation:function(ja){var ka=ja.display;return"popup"===ka||"touch"===ka?"opener":"dialog"===ka||"iframe"===ka||"hidden"===ka||"none"===ka?"parent":"async"===ka?"parent.frames["+window.name+"]":void 0},popup:function(ja){var ka="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,la="undefined"!=typeof window.screenY?window.screenY:window.screenTop,ma="undefined"!=typeof window.outerWidth?window.outerWidth:document.documentElement.clientWidth,na="undefined"!=typeof window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,oa=t.mobile()?null:ja.size.width,pa=t.mobile()?null:ja.size.height,qa=0>ka?window.screen.width+ka:ka,ra=parseInt(qa+(ma-oa)/2,10),sa=parseInt(la+(na-pa)/2.5,10),ta=[];null!==oa&&ta.push("width="+oa),null!==pa&&ta.push("height="+pa),ta.push("left="+ra),ta.push("top="+sa),ta.push("scrollbars=1"),("permissions.request"==ja.name||"permissions.oauth"==ja.name)&&ta.push("location=1,toolbar=0"),ta=ta.join(",");var ua;ja.post?(ua=window.open("about:blank",ja.id,ta),ua&&(ia.setLoadedNode(ja,ua,"popup"),i.submitToTarget({url:ja.url,target:ja.id,params:ja.params}))):(ua=window.open(ja.url,ja.id,ta),ua&&ia.setLoadedNode(ja,ua,"popup")),ua&&ja.id in ia._defaultCb&&ia._popupMonitor()},setLoadedNode:function(ja,ka,la){"iframe"===la&&(ka.fbCallID=ja.id),ka={node:ka,type:la,fbCallID:ja.id},ia._loadedNodes[ja.id]=ka},getLoadedNode:function(ja){var ka="object"==typeof ja?ja.id:ja,la=ia._loadedNodes[ka];return la?la.node:null},hidden:function(ja){ja.className="FB_UI_Hidden",ja.root=i.appendHidden(""),ia._insertIframe(ja)},iframe:function(ja){ja.className="FB_UI_Dialog",ja.params.iframe_test&&k.setForceTabletStyle(!0);var ka=function(){ia._triggerDefault(ja.id)};ja.root=k.create({onClose:ka,closeIcon:ja.closeIcon===undefined?!0:ja.closeIcon,classes:k.isTabletStyle()?"centered":""}),ja.hideLoader||k.showLoader(ka,ja.size.width),j.addCss(ja.root,"fb_dialog_iframe"),ia._insertIframe(ja)},touch:function(ja){ja.params&&ja.params.in_iframe?ja.ui_created?k.showLoader(function(){ia._triggerDefault(ja.id)},0):ia.iframe(ja):t.nativeApp()&&!ja.ui_created?(ja.frame=ja.id,o.onready(function(){ia.setLoadedNode(ja,o.open(ja.url+"#cb="+ja.frameName),"native")}),ia._popupMonitor()):ja.ui_created||ia.popup(ja)},async:function(ja){ja.params.redirect_uri=location.protocol+"//"+location.host+location.pathname,delete ja.params.access_token,q.remote.showDialog(ja.params,function(ka){var la=ka.result;if(la&&la.e2e){var ma=k.get(ja.id);ma.trackEvents(la.e2e),ma.trackEvent("close"),delete la.e2e}ja.cb(la)})},getDefaultSize:function(){return k.getDefaultSize()},_insertIframe:function(ja){ia._loadedNodes[ja.id]=!1;var ka=function(la){ja.id in ia._loadedNodes&&ia.setLoadedNode(ja,la,"iframe")};ba(ja.post?{url:"about:blank",root:ja.root,className:ja.className,width:ja.size.width,height:ja.size.height,id:ja.id,onInsert:ka,onload:function(la){i.submitToTarget({url:ja.url,target:la.name,params:ja.params})}}:{url:ja.url,root:ja.root,className:ja.className,width:ja.size.width,height:ja.size.height,id:ja.id,name:ja.frameName,onInsert:ka})},_handleResizeMessage:function(ja,ka){var la=ia.getLoadedNode(ja);la&&(ka.height&&(la.style.height=ka.height+"px"),ka.width&&(la.style.width=ka.width+"px"),v.inform("resize.ack",ka||{},"parent.frames["+la.name+"]"),k.isActive(la)?(k.isTabletStyle()&&k._setDialogSizes(),k._centerActive()):k.show(la))},_triggerDefault:function(ja){ia._xdRecv({frame:ja},ia._defaultCb[ja]||function(){})},_popupMonitor:function(){var ja;for(var ka in ia._loadedNodes)if(ia._loadedNodes.hasOwnProperty(ka)&&ka in ia._defaultCb){var la=ia._loadedNodes[ka];if("popup"!=la.type&&"native"!=la.type)continue;var ma=la.node;try{ma.closed?ia._triggerDefault(ka):ja=!0}catch(na){}}ja&&!ia._popupInterval?ia._popupInterval=setInterval(ia._popupMonitor,100):!ja&&ia._popupInterval&&(clearInterval(ia._popupInterval),ia._popupInterval=null)},_xdChannelHandler:function(ja,ka){return v.handler(function(la){var ma=ia.getLoadedNode(ja);if(ma)if("resize"==la.type)ia._handleResizeMessage(ja,la);else if("hide"==la.type)k.hide(ma);else if("rendered"==la.type){var na=k._findRoot(ma);k.show(na)}else"fireevent"==la.type&&l.fire(la.event)},ka,!0,null)},_xdNextHandler:function(ja,ka,la,ma){return ma&&(ia._defaultCb[ka]=ja),v.handler(function(na){ia._xdRecv(na,ja)},la)+"&frame="+ka},_xdRecv:function(ja,ka){var la=ia.getLoadedNode(ja.frame);if(la)if(la.close)try{la.close(),/iPhone.*Version\/(5|6)/.test(navigator.userAgent)&&"5"!==RegExp.$1&&window.focus(),ia._popupCount--}catch(ma){}else j.containsCss(la,"FB_UI_Hidden")?setTimeout(function(){la.parentNode.parentNode.removeChild(la.parentNode)},3e3):j.containsCss(la,"FB_UI_Dialog")&&k.remove(la);if(delete ia._loadedNodes[ja.frame],delete ia._defaultCb[ja.frame],ja.e2e){var na=k.get(ja.frame);na.trackEvents(ja.e2e),na.trackEvent("close"),delete ja.e2e}ka(ja)},_xdResult:function(ja,ka,la,ma){return ia._xdNextHandler(function(na){ja&&ja(na.result&&na.result!=ia._resultToken&&ES("JSON","parse",!1,na.result))},ka,la,ma)+"&result="+encodeURIComponent(ia._resultToken)},xdHandler:function(ja,ka,la,ma,na){return ia._xdNextHandler(h.xdResponseWrapper(ja,ma,na),ka,la,!0)}};q.stub("showDialog"),f.exports=ia},null),__d("sdk.ui",["Assert","sdk.Impressions","Log","sdk.PlatformVersioning","sdk.Runtime","sdk.UIServer","sdk.feature"],function(b,c,d,e,f,g,h,i,j,k,l,m,n){function o(p,q){if(h.isObject(p),h.maybeFunction(q),l.getIsVersioned()&&(k.assertVersionIsSet(),p.version?k.assertValidVersion(p.version):p.version=l.getVersion()),p=ES("Object","assign",!1,{},p),!p.method)return j.error('"method" is a required parameter for FB.ui().'),null;"pay.prompt"==p.method&&(p.method="pay");var r=p.method;p.redirect_uri&&(j.warn("When using FB.ui, you should not specify a redirect_uri."),delete p.redirect_uri),"permissions.request"!=r&&"permissions.oauth"!=r||"iframe"!=p.display&&"dialog"!=p.display||(p.display=m.checkOauthDisplay(p));var s=n("e2e_tracking",!0);s&&(p.e2e={});var t=m.prepareCall(p,q||function(){});if(!t)return null;var u=t.params.display;"dialog"===u?u="iframe":"none"===u&&(u="hidden");var v=m[u];return v?(s&&t.dialog.subscribe("e2e:end",function(w){w.method=r,w.display=u,j.debug("e2e: %s",ES("JSON","stringify",!1,w)),i.log(114,{payload:w})}),v(t),t.dialog):(j.error('"display" must be one of "popup", "dialog", "iframe", "touch", "async", "hidden", or "none"'),null)}c.__markCompiled&&c.__markCompiled(),f.exports=o},null),__d("legacy:fb.auth",["sdk.Auth","sdk.Cookie","sdk.Event","FB","Log","sdk.Runtime","sdk.SignedRequest","sdk.ui"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){c.__markCompiled&&c.__markCompiled(),k.provide("",{getLoginStatus:function(){return h.getLoginStatus.apply(h,arguments)},getAuthResponse:function(){return h.getAuthResponse()},getAccessToken:function(){return m.getAccessToken()||null},getUserID:function(){return m.getUserID()||m.getCookieUserID()},login:function(p,q){q&&q.perms&&!q.scope&&(q.scope=q.perms,delete q.perms,l.warn("OAuth2 specification states that 'perms' should now be called 'scope'.  Please update."));var r=m.isEnvironment(m.ENVIRONMENTS.CANVAS)||m.isEnvironment(m.ENVIRONMENTS.PAGETAB);o(babelHelpers._extends({method:"permissions.oauth",display:r?"async":"popup",domain:location.hostname},q||{}),p)},logout:function(p){o({method:"auth.logout",display:"hidden"},p)}}),h.subscribe("logout",ES(j.fire,"bind",!0,j,"auth.logout")),h.subscribe("login",ES(j.fire,"bind",!0,j,"auth.login")),h.subscribe("authresponse.change",ES(j.fire,"bind",!0,j,"auth.authResponseChange")),h.subscribe("status.change",ES(j.fire,"bind",!0,j,"auth.statusChange")),j.subscribe("init:post",function(p){if(p.status&&h.getLoginStatus(),m.getClientID())if(p.authResponse)h.setAuthResponse(p.authResponse,"connected");else if(m.getUseCookie()){var r,q=i.loadSignedRequest();if(q){try{r=n.parse(q)}catch(s){i.clearSignedRequestCookie()}r&&r.user_id&&m.setCookieUserID(r.user_id)}i.loadMeta()}})},3),__d("sdk.Canvas.IframeHandling",["DOMWrapper","sdk.RPC"],function(b,c,d,e,f,g,h,i){function l(){var p=h.getWindow().document,q=p.body,r=p.documentElement,s=Math.max(q.offsetTop,0),t=Math.max(r.offsetTop,0),u=q.scrollHeight+s,v=q.offsetHeight+s,w=r.scrollHeight+t,x=r.offsetHeight+t;return Math.max(u,v,w,x)}function m(p){"object"!=typeof p&&(p={});var q=0,r=0;if(p.height||(p.height=l(),q=16,r=4),p.frame||(p.frame=window.name||"iframe_canvas"),k){var s=k.height,t=p.height-s;if(r>=t&&t>=-q)return!1}return k=p,i.remote.setSize(p),!0}function n(p,q){q===undefined&&"number"==typeof p&&(q=p,p=!0),p||p===undefined?(null===j&&(j=setInterval(function(){m()},q||100)),m()):null!==j&&(clearInterval(j),j=null)}c.__markCompiled&&c.__markCompiled();var k,j=null;i.stub("setSize");var o={setSize:m,setAutoGrow:n};f.exports=o},null),__d("sdk.Canvas.Navigation",["sdk.RPC"],function(b,c,d,e,f,g,h){function i(k){h.local.navigate=function(l){k({path:l})},h.remote.setNavigationEnabled(!0)}c.__markCompiled&&c.__markCompiled(),h.stub("setNavigationEnabled");var j={setUrlHandler:i};f.exports=j},null),__d("sdk.Canvas.Plugin",["Log","sdk.RPC","sdk.Runtime","sdk.UA","sdk.api","createArrayFromMixed"],function(b,c,d,e,f,g,h,i,j,k,l,m){function s(ca){ca._hideunity_savedstyle={},ca._hideunity_savedstyle.left=ca.style.left,ca._hideunity_savedstyle.position=ca.style.position,ca._hideunity_savedstyle.width=ca.style.width,ca._hideunity_savedstyle.height=ca.style.height,ca.style.left="-10000px",ca.style.position="absolute",ca.style.width="1px",ca.style.height="1px"}function t(ca){ca._hideunity_savedstyle&&(ca.style.left=ca._hideunity_savedstyle.left,ca.style.position=ca._hideunity_savedstyle.position,ca.style.width=ca._hideunity_savedstyle.width,ca.style.height=ca._hideunity_savedstyle.height)}function u(ca){ca._old_visibility=ca.style.visibility,ca.style.visibility="hidden"}function v(ca){ca.style.visibility=ca._old_visibility||"",delete ca._old_visibility}function w(ca){var da=ca.type?ca.type.toLowerCase():null,ea="application/x-shockwave-flash"===da||ca.classid&&ca.classid.toUpperCase()==n;if(!ea)return!1;var fa=/opaque|transparent/i;if(fa.test(ca.getAttribute("wmode")))return!1;for(var ga=0;ga<ca.childNodes.length;ga++){var ha=ca.childNodes[ga];if(/param/i.test(ha.nodeName)&&/wmode/i.test(ha.name)&&fa.test(ha.value))return!1}return!0}function x(ca){var da=ca.type?ca.type.toLowerCase():null;return"application/vnd.unity"===da||ca.classid&&ca.classid.toUpperCase()==o}function y(ca){var da=m(window.document.getElementsByTagName("object"));da=da.concat(m(window.document.getElementsByTagName("embed")));var ea=!1,fa=!1;if(ES(da,"forEach",!0,function(ha){var ia=w(ha),ja=r&&x(ha);if(ia||ja){ea=ea||ia,fa=fa||ja;var ka=function(){"opened"===ca.state?ia?u(ha):s(ha):ia?v(ha):t(ha)};if(p){h.info("Calling developer specified callback");var la={state:ca.state,elem:ha};p(la),setTimeout(ka,200)}else ka()}}),Math.random()<=.001){var ga={unity:fa,flash:ea};l(j.getClientID()+"/occludespopups","post",ga)}}function z(){u(),s()}function aa(){v(),t()}c.__markCompiled&&c.__markCompiled();var n="CLSID:D27CDB6E-AE6D-11CF-96B8-444553540000",o="CLSID:444785F1-DE89-4295-863A-D46C3A781394",p=null,q=k.osx()&&k.osx.getVersionParts(),r=!(q&&q[0]>10&&q[1]>10&&(k.chrome()>=31||k.webkit()>=537.71||k.firefox()>=25));i.local.hidePluginObjects=function(){h.info("hidePluginObjects called"),y({state:"opened"})},i.local.showPluginObjects=function(){h.info("showPluginObjects called"),y({state:"closed"})},i.local.showFlashObjects=i.local.showPluginObjects,i.local.hideFlashObjects=i.local.hidePluginObjects;var ba={_setHidePluginCallback:function(ca){p=ca},hidePluginElement:z,showPluginElement:aa};f.exports=ba},null),__d("sdk.Canvas.Tti",["sdk.RPC","sdk.Runtime"],function(b,c,d,e,f,g,h,i){function j(o,p){var q={appId:i.getClientID(),time:ES("Date","now",!1),name:p},r=[q];o&&r.push(function(s){o(s.result)}),h.remote.logTtiMessage.apply(null,r)}function k(){j(null,"StartIframeAppTtiTimer")}function l(o){j(o,"StopIframeAppTtiTimer")}function m(o){j(o,"RecordIframeAppTti")}c.__markCompiled&&c.__markCompiled(),h.stub("logTtiMessage");var n={setDoneLoading:m,startTimer:k,stopTimer:l};f.exports=n},null),__d("legacy:fb.canvas",["Assert","sdk.Canvas.Environment","sdk.Event","FB","sdk.Canvas.IframeHandling","sdk.Canvas.Navigation","sdk.Canvas.Plugin","sdk.RPC","sdk.Runtime","sdk.Canvas.Tti"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){c.__markCompiled&&c.__markCompiled(),k.provide("Canvas",{setSize:function(r){return h.maybeObject(r,"Invalid argument"),l.setSize.apply(null,arguments)},setAutoGrow:function(){return l.setAutoGrow.apply(null,arguments)},getPageInfo:function(r){return h.isFunction(r,"Invalid argument"),
i.getPageInfo.apply(null,arguments)},scrollTo:function(r,s){return h.maybeNumber(r,"Invalid argument"),h.maybeNumber(s,"Invalid argument"),i.scrollTo.apply(null,arguments)},setDoneLoading:function(r){return h.maybeFunction(r,"Invalid argument"),q.setDoneLoading.apply(null,arguments)},startTimer:function(){return q.startTimer.apply(null,arguments)},stopTimer:function(r){return h.maybeFunction(r,"Invalid argument"),q.stopTimer.apply(null,arguments)},getHash:function(r){return h.isFunction(r,"Invalid argument"),m.getHash.apply(null,arguments)},setHash:function(r){return h.isString(r,"Invalid argument"),m.setHash.apply(null,arguments)},setUrlHandler:function(r){return h.isFunction(r,"Invalid argument"),m.setUrlHandler.apply(null,arguments)}}),o.local.fireEvent=ES(j.fire,"bind",!0,j),j.subscribe("init:post",function(r){p.isEnvironment(p.ENVIRONMENTS.CANVAS)&&(h.isTrue(!r.hideFlashCallback||!r.hidePluginCallback,"cannot specify deprecated hideFlashCallback and new hidePluginCallback"),n._setHidePluginCallback(r.hidePluginCallback||r.hideFlashCallback))})},3),__d("legacy:fb.canvas.syncrequests",["sdk.RPC","sdk.Event"],function(b,c,d,e,f,g,h,i){function j(k,l){"canvas.syncRequestUpdated"==k&&(h.remote.initPendingSyncRequests(),i.unsubscribe(i.SUBSCRIBE,j))}c.__markCompiled&&c.__markCompiled(),h.stub("initPendingSyncRequests"),i.subscribe(i.SUBSCRIBE,j)},3),__d("sdk.Canvas.Prefetcher",["sdk.api","createArrayFromMixed","JSSDKCanvasPrefetcherConfig","sdk.Runtime"],function(b,c,d,e,f,g,h,i,j,k){function q(){var v={object:"data",link:"href",script:"src"};o==l.AUTOMATIC&&ES(ES("Object","keys",!1,v),"forEach",!0,function(w){var x=v[w];ES(i(document.getElementsByTagName(w)),"forEach",!0,function(y){y[x]&&p.push(y[x])})}),0!==p.length&&(h(k.getClientID()+"/staticresources","post",{urls:ES("JSON","stringify",!1,p),is_https:"https:"===location.protocol}),p=[])}function r(){k.isEnvironment(k.ENVIRONMENTS.CANVAS)&&k.getClientID()&&m&&(Math.random()>1/m||"*"==n||~ES(n,"indexOf",!0,k.getClientID())||setTimeout(q,3e4))}function s(v){o=v}function t(v){p.push(v)}c.__markCompiled&&c.__markCompiled();var l={AUTOMATIC:0,MANUAL:1},m=j.sampleRate,n=j.blacklist,o=l.AUTOMATIC,p=[],u={COLLECT_AUTOMATIC:l.AUTOMATIC,COLLECT_MANUAL:l.MANUAL,addStaticResource:t,setCollectionMode:s,_maybeSample:r};f.exports=u},null),__d("legacy:fb.canvas.prefetcher",["FB","sdk.Canvas.Prefetcher","sdk.Event","sdk.Runtime"],function(b,c,d,e,f,g,h,i,j,k){c.__markCompiled&&c.__markCompiled(),h.provide("Canvas.Prefetcher",i),j.subscribe("init:post",function(l){k.isEnvironment(k.ENVIRONMENTS.CANVAS)&&i._maybeSample()})},3),__d("legacy:fb.canvas.presence",["sdk.RPC","sdk.Event"],function(b,c,d,e,f,g,h,i){function j(l,m){"canvas.friendsOnlineUpdated"==l&&1===m.length&&h.remote.useFriendsOnline(!0)}function k(l,m){"canvas.friendsOnlineUpdated"==l&&0===m.length&&h.remote.useFriendsOnline(!1)}c.__markCompiled&&c.__markCompiled(),i.subscribe(i.SUBSCRIBE,j),i.subscribe(i.UNSUBSCRIBE,k),h.stub("useFriendsOnline")},3),__d("legacy:fb.event",["FB","sdk.Event","sdk.Runtime","sdk.Scribe","sdk.feature"],function(b,c,d,e,f,g,h,i,j,k,l){c.__markCompiled&&c.__markCompiled();var m=[],n=null,o=l("event_subscriptions_log",!1);h.provide("Event",{subscribe:function(p,q){return o&&(m.push(p),n||(n=setTimeout(function(){k.log("jssdk_error",{appId:j.getClientID(),error:"EVENT_SUBSCRIPTIONS_LOG",extra:{line:0,name:"EVENT_SUBSCRIPTIONS_LOG",script:"N/A",stack:"N/A",message:m.sort().join(",")}}),m.length=0,n=null},o))),i.subscribe(p,q)},unsubscribe:ES(i.unsubscribe,"bind",!0,i)})},3),__d("legacy:fb.frictionless",["FB","sdk.Frictionless"],function(b,c,d,e,f,g,h,i){c.__markCompiled&&c.__markCompiled(),h.provide("Frictionless",i)},3),__d("sdk.init",["sdk.Cookie","sdk.ErrorHandling","sdk.Event","Log","ManagedError","sdk.PlatformVersioning","QueryString","sdk.Runtime","sdk.URI","createArrayFromMixed"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(t){var u="number"==typeof t&&t>0||"string"==typeof t&&/^[0-9a-f]{21,}$|^[0-9]{1,21}$/.test(t);return u?t.toString():(k.warn("Invalid App Id: Must be a number or numeric string representing the application id."),null)}function s(t){if(o.getInitialized()&&k.warn("FB.init has already been called - this could indicate a problem"),o.getIsVersioned()){if("[object Object]"!==Object.prototype.toString.call(t))throw new l("Invalid argument");t.authResponse&&k.warn("Setting authResponse is not supported"),t.version||(t.version=new p(location.href).getQueryData().sdk_version),m.assertValidVersion(t.version),o.setVersion(t.version)}else/number|string/.test(typeof t)&&(k.warn("FB.init called with invalid parameters"),t={apiKey:t}),t=ES("Object","assign",!1,{status:!0},t||{});var u=r(t.appId||t.apiKey);null!==u&&o.setClientID(u),"scope"in t&&o.setScope(t.scope),t.cookie&&(o.setUseCookie(!0),"string"==typeof t.cookie&&h.setDomain(t.cookie)),t.kidDirectedSite&&o.setKidDirectedSite(!0),o.setInitialized(!0),j.fire("init:post",t)}c.__markCompiled&&c.__markCompiled(),setTimeout(function(){var t=/(connect\.facebook\.net|\.facebook\.com\/assets.php).*?#(.*)/;ES(q(document.getElementsByTagName("script")),"forEach",!0,function(u){if(u.src){var v=t.exec(u.src);if(v){var w=n.decode(v[2]);for(var x in w)if(w.hasOwnProperty(x)){var y=w[x];"0"==y&&(w[x]=0)}s(w)}}}),window.fbAsyncInit&&!window.fbAsyncInit.hasRun&&(window.fbAsyncInit.hasRun=!0,i.unguard(window.fbAsyncInit)())},0),f.exports=s},null),__d("legacy:fb.init",["FB","sdk.init"],function(b,c,d,e,f,g,h,i){c.__markCompiled&&c.__markCompiled(),h.provide("",{init:i})},3),__d("legacy:fb.ui",["FB","sdk.ui"],function(b,c,d,e,f,g,h,i){c.__markCompiled&&c.__markCompiled(),h.provide("",{ui:i})},3),__d("runOnce",[],function(b,c,d,e,f,g){function h(i){var j,k;return function(){return j||(j=!0,k=i()),k}}c.__markCompiled&&c.__markCompiled(),f.exports=h},null),__d("XFBML",["Assert","sdk.DOM","Log","ObservableMixin","sdk.UA","createArrayFromMixed","runOnce"],function(b,c,d,e,f,g,h,i,j,k,l,m,n){function s(z,aa){return ES(z[aa]+"","trim",!0)}function t(z){return z.scopeName?z.scopeName+":"+z.nodeName:""}function u(z){return o[s(z,"nodeName").toLowerCase()]||o[t(z).toLowerCase()]}function v(z){var aa=ES(s(z,"className").split(/\s+/),"filter",!0,function(ba){return p.hasOwnProperty(ba)});return 0===aa.length?undefined:z.getAttribute("fb-xfbml-state")||!z.childNodes||0===z.childNodes.length||1===z.childNodes.length&&3===z.childNodes[0].nodeType||1===z.children.length&&"fb-xfbml-parse-ignore"===s(z.children[0],"className")?p[aa[0]]:void 0}function w(z){var aa={};return ES(m(z.attributes),"forEach",!0,function(ba){aa[s(ba,"name")]=s(ba,"value")}),aa}function x(z,aa,ba){var ca=document.createElement("div");return i.addCss(z,aa+"-"+ba),ES(m(z.childNodes),"forEach",!0,function(da){ca.appendChild(da)}),ES(m(z.attributes),"forEach",!0,function(da){ca.setAttribute(da.name,da.value)}),z.parentNode.replaceChild(ca,z),ca}function y(z,aa,ba){h.isTrue(z&&z.nodeType&&1===z.nodeType&&!!z.getElementsByTagName,"Invalid DOM node passed to FB.XFBML.parse()"),h.isFunction(aa,"Invalid callback passed to FB.XFBML.parse()");var ca=++q;j.info("XFBML Parsing Start %s",ca);var da=1,ea=0,fa=function(){da--,0===da&&(j.info("XFBML Parsing Finish %s, %s tags found",ca,ea),aa(),r.inform("render",ca,ea)),h.isTrue(da>=0,"onrender() has been called too many times")};ES(m(z.getElementsByTagName("*")),"forEach",!0,function(ha){if((ba||!ha.getAttribute("fb-xfbml-state"))&&1===ha.nodeType){var ia=u(ha)||v(ha);if(ia){l.ie()<9&&ha.scopeName&&(ha=x(ha,ia.xmlns,ia.localName)),da++,ea++;var ja=new ia.ctor(ha,ia.xmlns,ia.localName,w(ha));ja.subscribe("render",n(function(){ha.setAttribute("fb-xfbml-state","rendered"),fa()}));var ka=function(){"parsed"==ha.getAttribute("fb-xfbml-state")?r.subscribe("render.queue",ka):(ha.setAttribute("fb-xfbml-state","parsed"),ja.process())};ka()}}}),r.inform("parse",ca,ea);var ga=3e4;setTimeout(function(){da>0&&j.warn("%s tags failed to render in %s ms",da,ga)},ga),fa()}c.__markCompiled&&c.__markCompiled();var o={},p={},q=0,r=new k;r.subscribe("render",function(){var z=r.getSubscribers("render.queue");r.clearSubscribers("render.queue"),ES(z,"forEach",!0,function(aa){aa()})}),ES("Object","assign",!1,r,{registerTag:function(z){var aa=z.xmlns+":"+z.localName;h.isUndefined(o[aa],aa+" already registered"),o[aa]=z,p[z.xmlns+"-"+z.localName]=z},parse:function(z,aa){y(z||document.body,aa||function(){},!0)},parseNew:function(){y(document.body,function(){},!1)}}),f.exports=r},null),__d("PluginPipe",["sdk.Content","sdk.feature","guid","insertIframe","Miny","ObservableMixin","JSSDKPluginPipeConfig","sdk.Runtime","sdk.UA","UrlMap","XFBML"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function v(){return!(!i("plugin_pipe",!1)||o.getSecure()===undefined||!p.chrome()&&!p.firefox()||!n.enabledApps[o.getClientID()])}function w(){function aa(){z--,0===z&&x(y)}var y=u;if(u=[],y.length<=t)return void ES(y,"forEach",!0,function(ba){k(ba.config)});var z=y.length+1;ES(y,"forEach",!0,function(ba){var ca={};for(var da in ba.config)ca[da]=ba.config[da];ca.url=q.resolve("www",o.getSecure())+"/plugins/plugin_pipe_shell.php",ca.onload=aa,k(ca)}),aa()}function x(y){var z=document.createElement("span");h.appendHidden(z);var aa={};ES(y,"forEach",!0,function(fa){aa[fa.config.name]={plugin:fa.tag,params:fa.params}});var ba=ES("JSON","stringify",!1,aa),ca=l.encode(ba);ES(y,"forEach",!0,function(fa){var ga=document.getElementsByName(fa.config.name)[0];ga.onload=fa.config.onload});var da=q.resolve("www",o.getSecure())+"/plugins/pipe.php",ea=j();k({url:"about:blank",root:z,name:ea,className:"fb_hidden fb_invisible",onload:function(){h.submitToTarget({url:da,target:ea,params:{plugins:ca.length<ba.length?ca:ba}})}})}c.__markCompiled&&c.__markCompiled();var s=new m,t=n.threshold,u=[];r.subscribe("parse",w),ES("Object","assign",!1,s,{add:function(y){var z=v();return z&&u.push({config:y._config,tag:y._tag,params:y._params}),z}}),f.exports=s},null),__d("IframePlugin",["sdk.Auth","sdk.DOM","sdk.Event","Log","ObservableMixin","sdk.PlatformVersioning","PluginPipe","QueryString","sdk.Runtime","Type","sdk.UA","sdk.URI","UrlMap","sdk.XD","sdk.createIframe","sdk.feature","guid","resolveURI"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){function aa(ia,ja,ka){(ja||0===ja)&&("100%"===ja?ia.style.width="100%":ia.style.width=ja+"px"),(ka||0===ka)&&(ia.style.height=ka+"px")}function ba(ia){return function(ja){var ka={width:ja.width,height:ja.height,pluginID:ia};j.fire("xfbml.resize",ka)}}function da(ia,ja){var ka=ia[ja]||ia[ja.replace(/_/g,"-")]||ia[ja.replace(/_/g,"")]||ia["data-"+ja]||ia["data-"+ja.replace(/_/g,"-")]||ia["data-"+ja.replace(/_/g,"")]||undefined;return ka}function ea(ia,ja,ka,la){ES(ES("Object","keys",!1,ia),"forEach",!0,function(ma){"text"!=ia[ma]||ka[ma]||(ka[ma]=ja.textContent||ja.innerText||"",ja.setAttribute(ma,ka[ma])),la[ma]=ca[ia[ma]](da(ka,ma))})}function fa(ia){return"100%"===ia?"100%":ia||"0"===ia||0===ia?parseInt(ia,10):undefined}function ga(ia){ia&&aa(ia,0,0)}c.__markCompiled&&c.__markCompiled();var z={skin:"string",font:"string",width:"px",height:"px",ref:"string",color_scheme:"string"},ca={string:function(ia){return ia},bool:function(ia){return ia?/^(?:true|1|yes|on)$/i.test(ia):undefined},url:function(ia){return y(ia)},url_maybe:function(ia){return ia?y(ia):ia},hostname:function(ia){return ia||window.location.hostname},px:function(ia){return/^(\d+)(?:px)?$/.test(ia)?parseInt(RegExp.$1,10):undefined},text:function(ia){return ia}},ha=q.extend({constructor:function(ia,ja,ka,la){this.parent(),ka=ka.replace(/-/g,"_");var ma=da(la,"plugin_id");this.subscribe("xd.resize",ba(ma)),this.subscribe("xd.resize.flow",ba(ma)),this.subscribe("xd.resize.flow",ES(function(sa){ES("Object","assign",!1,this._iframeOptions.root.style,{verticalAlign:"bottom",overflow:""}),aa(this._iframeOptions.root,fa(sa.width),fa(sa.height)),this.updateLift(),clearTimeout(this._timeoutID)},"bind",!0,this)),this.subscribe("xd.resize",ES(function(sa){ES("Object","assign",!1,this._iframeOptions.root.style,{verticalAlign:"bottom",overflow:""}),aa(this._iframeOptions.root,fa(sa.width),fa(sa.height)),aa(this._iframe,fa(sa.width),fa(sa.height)),this._isIframeResized=!0,this.updateLift(),clearTimeout(this._timeoutID)},"bind",!0,this)),this.subscribe("xd.resize.iframe",ES(function(sa){"true"===sa.reposition&&w("reposition_iframe",!1)&&this.reposition(fa(sa.width)),aa(this._iframe,fa(sa.width),fa(sa.height)),this._isIframeResized=!0,this.updateLift(),clearTimeout(this._timeoutID)},"bind",!0,this)),this.subscribe("xd.sdk_event",function(sa){var ta=ES("JSON","parse",!1,sa.data);ta.pluginID=ma,j.fire(sa.event,ta,ia)});var na=p.getSecure()||"https:"==window.location.protocol,oa=t.resolve("www",na)+"/plugins/"+ka+".php?",pa={};ea(this.getParams(),ia,la,pa),ea(z,ia,la,pa),ES("Object","assign",!1,pa,{app_id:p.getClientID(),locale:p.getLocale(),sdk:"joey",kid_directed_site:p.getKidDirectedSite(),channel:u.handler(ES(function(sa){return this.inform("xd."+sa.type,sa)},"bind",!0,this),"parent.parent",!0)}),pa.container_width=ia.offsetWidth,i.addCss(ia,"fb_iframe_widget");var qa=x();this.subscribe("xd.verify",function(sa){u.sendToFacebook(qa,{method:"xd/verify",params:ES("JSON","stringify",!1,sa.token)})}),this.subscribe("xd.refreshLoginStatus",ES(h.getLoginStatus,"bind",!0,h,ES(this.inform,"bind",!0,this,"login.status"),!0));var ra=document.createElement("span");ES("Object","assign",!1,ra.style,{verticalAlign:"top",width:"0px",height:"0px",overflow:"hidden"}),this._element=ia,this._ns=ja,this._tag=ka,this._params=pa,this._config=this.getConfig(),this._iframeOptions={root:ra,url:oa+o.encode(pa),name:qa,width:this._config.mobile_fullsize&&r.mobile()?void 0:pa.width||1e3,height:pa.height||1e3,style:{border:"none",visibility:"hidden"},title:this._ns+":"+this._tag+" Facebook Social Plugin",onload:ES(function(){return this.inform("render")},"bind",!0,this),onerror:ES(function(){return ga(this._iframe)},"bind",!0,this)},this.isFluid()&&(i.addCss(this._element,"fb_iframe_widget_fluid_desktop"),!pa.width&&this._config.full_width&&(this._element.style.width="100%",this._iframeOptions.root.style.width="100%",this._iframeOptions.style.width="100%",this._params.container_width=this._element.offsetWidth,this._iframeOptions.url=oa+o.encode(this._params)))},process:function(){if(p.getIsVersioned()){m.assertVersionIsSet();var ia=new s(this._iframeOptions.url);this._iframeOptions.url=ia.setPath("/"+p.getVersion()+ia.getPath()).toString()}var ja=ES("Object","assign",!1,{},this._params);delete ja.channel;var ka=o.encode(ja);if(this._element.getAttribute("fb-iframe-plugin-query")==ka)return k.info("Skipping render: %s:%s %s",this._ns,this._tag,ka),void this.inform("render");for(this._element.setAttribute("fb-iframe-plugin-query",ka),this.subscribe("render",ES(function(){this._iframe.style.visibility="visible",this._isIframeResized||ga(this._iframe)},"bind",!0,this));this._element.firstChild;)this._element.removeChild(this._element.firstChild);this._element.appendChild(this._iframeOptions.root);var la=r.mobile()?120:45;if(this._timeoutID=setTimeout(ES(function(){ga(this._iframe),k.warn("%s:%s failed to resize in %ss",this._ns,this._tag,la)},"bind",!0,this),1e3*la),n.add(this)||(this._iframe=v(this._iframeOptions)),r.mobile()&&(i.addCss(this._element,"fb_iframe_widget_fluid"),!this._iframeOptions.width)){ES("Object","assign",!1,this._element.style,{display:"block",width:"100%",height:"auto"}),ES("Object","assign",!1,this._iframeOptions.root.style,{width:"100%",height:"auto"});var ma={height:"auto",position:"static",width:"100%"};(r.iphone()||r.ipad())&&ES("Object","assign",!1,ma,{width:"220px","min-width":"100%"}),ES("Object","assign",!1,this._iframe.style,ma)}},getConfig:function(){return{}},isFluid:function(){var ia=this.getConfig();return ia.fluid},reposition:function(ia){var ja=i.getPosition(this._iframe).x,ka=i.getViewportInfo().width,la=parseInt(i.getStyle(this._iframe,"width"),10),ma={};if(ja+ia>ka&&ja>ia)this._iframe.style.left=parseInt(i.getStyle(this._iframe,"width"),10)-ia+"px",this._isRepositioned=!0,ma.type="reposition";else{if(!this._isRepositioned||la-ia===0)return;this._iframe.style.left="0px",this._isRepositioned=!1,ma.type="restore"}u.sendToFacebook(this._iframe.name,{method:"xd/reposition",params:ES("JSON","stringify",!1,ma)})},updateLift:function(){var ia=this._iframe.style.width===this._iframeOptions.root.style.width&&this._iframe.style.height===this._iframeOptions.root.style.height;i[ia?"removeCss":"addCss"](this._iframe,"fb_iframe_widget_lift")}},l);ha.getVal=da,ha.withParams=function(ia,ja){return ha.extend({getParams:function(){return ia},getConfig:function(){return ja?ja:{}}})},f.exports=ha},null),__d("PluginConfig",["sdk.feature"],function(b,c,d,e,f,g,h){c.__markCompiled&&c.__markCompiled();var i={messengerpreconfirmation:{mobile_fullsize:!0},messengeraccountconfirmation:{mobile_fullsize:!0},messengerbusinesslink:{mobile_fullsize:!0},messengertoggle:{mobile_fullsize:!0},messengermessageus:{mobile_fullsize:!0},post:{fluid:h("fluid_embed",!1),mobile_fullsize:!0}};f.exports=i},null),__d("PluginTags",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={composer:{action_type:"string",action_properties:"string"},create_event_button:{},follow:{href:"url",layout:"string",show_faces:"bool"},like:{href:"url",layout:"string",show_faces:"bool",share:"bool",action:"string",send:"bool"},like_box:{href:"string",show_faces:"bool",header:"bool",stream:"bool",force_wall:"bool",show_border:"bool",id:"string",connections:"string",profile_id:"string",name:"string"},page:{href:"string",hide_cta:"bool",hide_cover:"bool",small_header:"bool",adapt_container_width:"bool",show_facepile:"bool",show_posts:"bool",tabs:"string"},messengerpreconfirmation:{messenger_app_id:"string"},messengeraccountconfirmation:{messenger_app_id:"string",state:"string"},messengerbusinesslink:{messenger_app_id:"string",state:"string"},messengertoggle:{messenger_app_id:"string",token:"string"},messengermessageus:{messenger_app_id:"string",color:"string",size:"string"},page_events:{href:"url"},post:{href:"url",show_border:"bool"},privacy_selector:{},profile_pic:{uid:"string",linked:"bool",href:"string",size:"string",facebook_logo:"bool"},send:{href:"url"},send_to_mobile:{max_rows:"string",show_faces:"bool",size:"string"},story:{href:"url",show_border:"bool"},topic:{topic_name:"string",topic_id:"string"}},i={subscribe:"follow",fan:"like_box",likebox:"like_box"};ES(ES("Object","keys",!1,i),"forEach",!0,function(j){h[j]=h[i[j]]}),f.exports=h},null),__d("sdk.Arbiter",[],function(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={BEHAVIOR_EVENT:"e",BEHAVIOR_PERSISTENT:"p",BEHAVIOR_STATE:"s"};f.exports=h},null),__d("sdk.XFBML.Element",["sdk.DOM","Type","ObservableMixin"],function(b,c,d,e,f,g,h,i,j){c.__markCompiled&&c.__markCompiled();var k=i.extend({constructor:function(l){this.parent(),this.dom=l},fire:function(){this.inform.apply(this,arguments)},getAttribute:function(l,m,n){var o=h.getAttr(this.dom,l);return o?n?n(o):o:m},_getBoolAttribute:function(l,m){var n=h.getBoolAttr(this.dom,l);return null===n?m:n},_getPxAttribute:function(l,m){return this.getAttribute(l,m,function(n){var o=parseInt(n,10);return isNaN(o)?m:o})},_getLengthAttribute:function(l,m){return this.getAttribute(l,m,function(n){if("100%"===n)return n;var o=parseInt(n,10);return isNaN(o)?m:o})},_getAttributeFromList:function(l,m,n){return this.getAttribute(l,m,function(o){return o=o.toLowerCase(),ES(n,"indexOf",!0,o)>-1?o:m})},isValid:function(){for(var l=this.dom;l;l=l.parentNode)if(l==document.body)return!0},clear:function(){h.html(this.dom,"")}},j);f.exports=k},null),__d("sdk.XFBML.IframeWidget",["sdk.Arbiter","sdk.Auth","sdk.Content","sdk.DOM","sdk.Event","sdk.XFBML.Element","guid","insertIframe","QueryString","sdk.Runtime","sdk.ui","UrlMap","sdk.XD"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){c.__markCompiled&&c.__markCompiled();var u=m.extend({_iframeName:null,_showLoader:!0,_refreshOnAuthChange:!1,_allowReProcess:!1,_fetchPreCachedLoader:!1,_visibleAfter:"load",_widgetPipeEnabled:!1,_borderReset:!1,_repositioned:!1,getUrlBits:function(){throw new Error("Inheriting class needs to implement getUrlBits().")},setupAndValidate:function(){return!0},oneTimeSetup:function(){},getSize:function(){},getIframeName:function(){return this._iframeName},getIframeTitle:function(){return"Facebook Social Plugin"},getChannelUrl:function(){if(!this._channelUrl){var y=this;this._channelUrl=t.handler(function(z){y.fire("xd."+z.type,z)},"parent.parent",!0)}return this._channelUrl},getIframeNode:function(){return this.dom.getElementsByTagName("iframe")[0]},arbiterInform:function(event,y,z){t.sendToFacebook(this.getIframeName(),{method:event,params:ES("JSON","stringify",!1,y||{}),behavior:z||h.BEHAVIOR_PERSISTENT})},_arbiterInform:function(event,y,z){var aa='parent.frames["'+this.getIframeNode().name+'"]';t.inform(event,y,aa,z)},getDefaultWebDomain:function(){return s.resolve("www")},process:function(y){if(this._done){if(!this._allowReProcess&&!y)return;this.clear()}else this._oneTimeSetup();if(this._done=!0,this._iframeName=this.getIframeName()||this._iframeName||n(),!this.setupAndValidate())return void this.fire("render");this._showLoader&&this._addLoader(),k.addCss(this.dom,"fb_iframe_widget"),"immediate"!=this._visibleAfter?k.addCss(this.dom,"fb_hide_iframes"):this.subscribe("iframe.onload",ES(this.fire,"bind",!0,this,"render"));var z=this.getSize()||{},aa=this.getFullyQualifiedURL();"100%"==z.width&&k.addCss(this.dom,"fb_iframe_widget_fluid"),this.clear(),o({url:aa,root:this.dom.appendChild(document.createElement("span")),name:this._iframeName,title:this.getIframeTitle(),className:q.getRtl()?"fb_rtl":"fb_ltr",height:z.height,width:z.width,onload:ES(this.fire,"bind",!0,this,"iframe.onload")}),this._resizeFlow(z),this.loaded=!1,this.subscribe("iframe.onload",ES(function(){this.loaded=!0,this._isResizeHandled||k.addCss(this.dom,"fb_hide_iframes")},"bind",!0,this))},generateWidgetPipeIframeName:function(){return v++,"fb_iframe_"+v},getFullyQualifiedURL:function(){var y=this._getURL();if(y+="?"+p.encode(this._getQS()),y.length>2e3){y="about:blank";var z=ES(function(){this._postRequest(),this.unsubscribe("iframe.onload",z)},"bind",!0,this);this.subscribe("iframe.onload",z)}return y},_getWidgetPipeShell:function(){return s.resolve("www")+"/common/widget_pipe_shell.php"},_oneTimeSetup:function(){this.subscribe("xd.resize",ES(this._handleResizeMsg,"bind",!0,this)),this.subscribe("xd.resize",ES(this._bubbleResizeEvent,"bind",!0,this)),this.subscribe("xd.resize.iframe",ES(this._resizeIframe,"bind",!0,this)),this.subscribe("xd.resize.flow",ES(this._resizeFlow,"bind",!0,this)),this.subscribe("xd.resize.flow",ES(this._bubbleResizeEvent,"bind",!0,this)),this.subscribe("xd.refreshLoginStatus",function(){i.getLoginStatus(function(){},!0)}),this.subscribe("xd.logout",function(){r({method:"auth.logout",display:"hidden"},function(){})}),this._refreshOnAuthChange&&this._setupAuthRefresh(),"load"==this._visibleAfter&&this.subscribe("iframe.onload",ES(this._makeVisible,"bind",!0,this)),this.subscribe("xd.verify",ES(function(y){this.arbiterInform("xd/verify",y.token)},"bind",!0,this)),this.oneTimeSetup()},_makeVisible:function(){this._removeLoader(),k.removeCss(this.dom,"fb_hide_iframes"),this.fire("render")},_setupAuthRefresh:function(){i.getLoginStatus(ES(function(y){var z=y.status;l.subscribe("auth.statusChange",ES(function(aa){this.isValid()&&(("unknown"==z||"unknown"==aa.status)&&this.process(!0),z=aa.status)},"bind",!0,this))},"bind",!0,this))},_handleResizeMsg:function(y){this.isValid()&&(this._resizeIframe(y),this._resizeFlow(y),this._borderReset||(this.getIframeNode().style.border="none",this._borderReset=!0),this._isResizeHandled=!0,this._makeVisible())},_bubbleResizeEvent:function(y){var z={height:y.height,width:y.width,pluginID:this.getAttribute("plugin-id")};l.fire("xfbml.resize",z)},_resizeIframe:function(y){var z=this.getIframeNode();"true"===y.reposition&&this._repositionIframe(y),y.height&&(z.style.height=y.height+"px"),y.width&&(z.style.width=y.width+"px"),this._updateIframeZIndex()},_resizeFlow:function(y){var z=this.dom.getElementsByTagName("span")[0];y.height&&(z.style.height=y.height+"px"),y.width&&(z.style.width=y.width+"px"),this._updateIframeZIndex()},_updateIframeZIndex:function(){var y=this.dom.getElementsByTagName("span")[0],z=this.getIframeNode(),aa=z.style.height===y.style.height&&z.style.width===y.style.width,ba=aa?"removeCss":"addCss";k[ba](z,"fb_iframe_widget_lift")},_repositionIframe:function(y){var z=this.getIframeNode(),aa=parseInt(k.getStyle(z,"width"),10),ba=k.getPosition(z).x,ca=k.getViewportInfo().width,da=parseInt(y.width,10);ba+da>ca&&ba>da?(z.style.left=aa-da+"px",this.arbiterInform("xd/reposition",{type:"horizontal"}),this._repositioned=!0):this._repositioned&&(z.style.left="0px",this.arbiterInform("xd/reposition",{type:"restore"}),this._repositioned=!1)},_addLoader:function(){this._loaderDiv||(k.addCss(this.dom,"fb_iframe_widget_loader"),this._loaderDiv=document.createElement("div"),this._loaderDiv.className="FB_Loader",this.dom.appendChild(this._loaderDiv))},_removeLoader:function(){this._loaderDiv&&(k.removeCss(this.dom,"fb_iframe_widget_loader"),this._loaderDiv.parentNode&&this._loaderDiv.parentNode.removeChild(this._loaderDiv),this._loaderDiv=null)},_getQS:function(){return ES("Object","assign",!1,{api_key:q.getClientID(),locale:q.getLocale(),sdk:"joey",kid_directed_site:q.getKidDirectedSite(),ref:this.getAttribute("ref")},this.getUrlBits().params)},_getURL:function(){var y=this.getDefaultWebDomain(),z="";return y+"/plugins/"+z+this.getUrlBits().name+".php"},_postRequest:function(){j.submitToTarget({url:this._getURL(),target:this.getIframeNode().name,params:this._getQS()})}}),v=0;f.exports=u},null),__d("sdk.XFBML.Comments",["sdk.Event","sdk.XFBML.IframeWidget","QueryString","sdk.Runtime","JSSDKConfig","sdk.UA","UrlMap","sdk.feature"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){c.__markCompiled&&c.__markCompiled();var p=i.extend({_visibleAfter:"immediate",_refreshOnAuthChange:!0,setupAndValidate:function(){var q={channel_url:this.getChannelUrl(),colorscheme:this.getAttribute("colorscheme"),skin:this.getAttribute("skin"),numposts:this.getAttribute("num-posts",10),width:this._getLengthAttribute("width"),href:this.getAttribute("href"),permalink:this.getAttribute("permalink"),publish_feed:this.getAttribute("publish_feed"),order_by:this.getAttribute("order_by"),mobile:this._getBoolAttribute("mobile"),version:this.getAttribute("version")};if(q.width||q.permalink||(q.width=550),l.initSitevars.enableMobileComments&&m.mobile()&&q.mobile!==!1&&(q.mobile=!0,delete q.width),q.skin||(q.skin=q.colorscheme),q.href){var s=this.getAttribute("fb_comment_id");s||(s=j.decode(document.URL.substring(ES(document.URL,"indexOf",!0,"?")+1)).fb_comment_id,s&&ES(s,"indexOf",!0,"#")>0&&(s=s.substring(0,ES(s,"indexOf",!0,"#")))),s&&(q.fb_comment_id=s,this.subscribe("render",ES(function(){window.location.hash||(window.location.hash=this.getIframeNode().id)},"bind",!0,this)))}else{if(q.migrated=this.getAttribute("migrated"),q.xid=this.getAttribute("xid"),q.title=this.getAttribute("title",document.title),q.url=this.getAttribute("url",document.URL),q.quiet=this.getAttribute("quiet"),q.reverse=this.getAttribute("reverse"),q.simple=this.getAttribute("simple"),q.css=this.getAttribute("css"),q.notify=this.getAttribute("notify"),!q.xid){var r=ES(document.URL,"indexOf",!0,"#");r>0?q.xid=encodeURIComponent(document.URL.substring(0,r)):q.xid=encodeURIComponent(document.URL)}q.migrated&&(q.href=n.resolve("www")+"/plugins/comments_v1.php?app_id="+k.getClientID()+"&xid="+encodeURIComponent(q.xid)+"&url="+encodeURIComponent(q.url))}return q.version||(q.version=k.getVersion()),this._attr=q,!0},oneTimeSetup:function(){this.subscribe("xd.commentCreated",ES(this._handleCommentCreatedMsg,"bind",!0,this)),this.subscribe("xd.commentRemoved",ES(this._handleCommentRemovedMsg,"bind",!0,this))},getSize:function(){return this._attr.permalink?void 0:{width:this._attr.mobile?"100%":this._attr.width,height:100}},getUrlBits:function(){return{name:"comments",params:this._attr}},getDefaultWebDomain:function(){return this._attr.mobile&&!o("one_comment_controller",!1)&&"v2.3"!==this._attr.version?n.resolve("m",!0):n.resolve("www",!0)},_handleCommentCreatedMsg:function(q){if(this.isValid()){var r={href:q.href,commentID:q.commentID,parentCommentID:q.parentCommentID,message:q.message};h.fire("comment.create",r)}},_handleCommentRemovedMsg:function(q){if(this.isValid()){var r={href:q.href,commentID:q.commentID};h.fire("comment.remove",r)}}});f.exports=p},null),__d("sdk.XFBML.CommentsCount",["ApiClient","sdk.DOM","sdk.XFBML.Element","sprintf"],function(b,c,d,e,f,g,h,i,j,k){c.__markCompiled&&c.__markCompiled();var l=j.extend({process:function(){i.addCss(this.dom,"fb_comments_count_zero");var m=this.getAttribute("href",window.location.href);h.scheduleBatchCall("/v2.1/"+encodeURIComponent(m),{fields:"share"},ES(function(n){var o=n.share&&n.share.comment_count||0;i.html(this.dom,k('<span class="fb_comments_count">%s</span>',o)),o>0&&i.removeCss(this.dom,"fb_comments_count_zero"),this.fire("render")},"bind",!0,this))}});f.exports=l},null),__d("safeEval",[],function(b,c,d,e,f,g){function h(i,j){return null!==i&&"undefined"!=typeof i?"string"!=typeof i?i:/^\w+$/.test(i)&&"function"==typeof window[i]?window[i].apply(null,j||[]):Function('return eval("'+i.replace(/"/g,'\\"')+'");').apply(null,j||[]):void 0}c.__markCompiled&&c.__markCompiled(),f.exports=h},null),__d("sdk.Helper",["sdk.ErrorHandling","sdk.Event","UrlMap","safeEval","sprintf"],function(b,c,d,e,f,g,h,i,j,k,l){c.__markCompiled&&c.__markCompiled();var m={isUser:function(n){return 22e8>n||n>=1e14&&0x5b0a58f100ef>=n||n>=89e12&&89999999999999>=n||n>=6000001e7&&60000019999999>=n},upperCaseFirstChar:function(n){return n.length>0?n.substr(0,1).toUpperCase()+n.substr(1):n},getProfileLink:function(n,o,p){return!p&&n&&(p=l("%s/profile.php?id=%s",j.resolve("www"),n.uid||n.id)),p&&(o=l('<a class="fb_link" href="%s">%s</a>',p,o)),o},invokeHandler:function(n,o,p){n&&("string"==typeof n?h.unguard(k)(n,p):n.apply&&h.unguard(n).apply(o,p||[]))},fireEvent:function(n,o){var p=o._attr.href;o.fire(n,p),i.fire(n,p,o)},executeFunctionByName:function(n){for(var o=Array.prototype.slice.call(arguments,1),p=n.split("."),q=p.pop(),r=window,s=0;s<p.length;s++)r=r[p[s]];return r[q].apply(this,o)}};f.exports=m},null),__d("sdk.XFBML.LoginButton",["sdk.Helper","IframePlugin","sdk.ui"],function(b,c,d,e,f,g,h,i,j){c.__markCompiled&&c.__markCompiled();var k=i.extend({constructor:function(l,m,n,o){this.parent(l,m,n,o);var p=i.getVal(o,"on_login");p&&this.subscribe("login.status",function(q){h.invokeHandler(p,null,[q])}),this.subscribe("xd.login_button_native_open",function(q){j(ES("JSON","parse",!1,q.params))})},getParams:function(){return{scope:"string",perms:"string",size:"string",login_text:"text",show_faces:"bool",max_rows:"string",show_login_face:"bool",registration_url:"url_maybe",auto_logout_link:"bool",one_click:"bool",show_banner:"bool",auth_type:"string",default_audience:"string"}}});f.exports=k},null),__d("escapeHTML",[],function(b,c,d,e,f,g){function j(k){return k.replace(h,function(l){return i[l]})}c.__markCompiled&&c.__markCompiled();var h=/[&<>"'\/]/g,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","/":"&#x2F;"};f.exports=j},null),__d("sdk.XFBML.Name",["ApiClient","escapeHTML","sdk.Event","sdk.XFBML.Element","sdk.Helper","Log","sdk.Runtime"],function(b,c,d,e,f,g,h,i,j,k,l,m,n){c.__markCompiled&&c.__markCompiled();var o={}.hasOwnProperty,p=k.extend({process:function(){if(ES("Object","assign",!1,this,{_uid:this.getAttribute("uid"),_firstnameonly:this._getBoolAttribute("first-name-only"),_lastnameonly:this._getBoolAttribute("last-name-only"),_possessive:this._getBoolAttribute("possessive"),_reflexive:this._getBoolAttribute("reflexive"),_objective:this._getBoolAttribute("objective"),
_linked:this._getBoolAttribute("linked",!0),_subjectId:this.getAttribute("subject-id")}),!this._uid)return m.error('"uid" is a required attribute for <fb:name>'),void this.fire("render");var q=[];this._firstnameonly?q.push("first_name"):this._lastnameonly?q.push("last_name"):q.push("name"),this._subjectId&&(q.push("gender"),this._subjectId==n.getUserID()&&(this._reflexive=!0)),j.monitor("auth.statusChange",ES(function(){return this.isValid()?(this._uid&&"loggedinuser"!=this._uid||(this._uid=n.getUserID()),void(this._uid&&h.scheduleBatchCall("/v1.0/"+this._uid,{fields:q.join(",")},ES(function(r){return o.call(r,"error")?void m.warn("The name is not found for ID: "+this._uid):(this._subjectId==this._uid?this._renderPronoun(r):this._renderOther(r),void this.fire("render"))},"bind",!0,this)))):(this.fire("render"),!0)},"bind",!0,this))},_renderPronoun:function(q){var r="",s=this._objective;if(this._subjectId&&(s=!0,this._subjectId===this._uid&&(this._reflexive=!0)),this._uid==n.getUserID()&&this._getBoolAttribute("use-you",!0))r=this._possessive?this._reflexive?"your own":"your":this._reflexive?"yourself":"you";else switch(q.gender){case"male":r=this._possessive?this._reflexive?"his own":"his":this._reflexive?"himself":s?"him":"he";break;case"female":r=this._possessive?this._reflexive?"her own":"her":this._reflexive?"herself":s?"her":"she";break;default:r=this._getBoolAttribute("use-they",!0)?this._possessive?this._reflexive?"their own":"their":this._reflexive?"themselves":s?"them":"they":this._possessive?this._reflexive?"his/her own":"his/her":this._reflexive?"himself/herself":s?"him/her":"he/she"}this._getBoolAttribute("capitalize",!1)&&(r=l.upperCaseFirstChar(r)),this.dom.innerHTML=r},_renderOther:function(q){var r="",s="";this._uid==n.getUserID()&&this._getBoolAttribute("use-you",!0)?r=this._reflexive?this._possessive?"your own":"yourself":this._possessive?"your":"you":q&&(null===q.first_name&&(q.first_name=""),null===q.last_name&&(q.last_name=""),this._firstnameonly&&q.first_name!==undefined?r=i(q.first_name):this._lastnameonly&&q.last_name!==undefined&&(r=i(q.last_name)),r||(r=i(q.name)),""!==r&&this._possessive&&(r+="'s")),r||(r=i(this.getAttribute("if-cant-see","Facebook User"))),r&&(this._getBoolAttribute("capitalize",!1)&&(r=l.upperCaseFirstChar(r)),s=q&&this._linked?l.getProfileLink(q,r,this.getAttribute("href",null)):r),this.dom.innerHTML=s}});f.exports=p},null),__d("sdk.XFBML.ShareButton",["IframePlugin","sdk.ui"],function(b,c,d,e,f,g,h,i){"use strict";c.__markCompiled&&c.__markCompiled();var j=h.extend({constructor:function(k,l,m,n){this.parent(k,l,m,n),this.subscribe("xd.shareTriggerIframe",function(o){var p=ES("JSON","parse",!1,o.data);i({method:"share",href:p.href,iframe_test:!0})})},getParams:function(){return{href:"url",layout:"string",type:"string"}}});f.exports=j},null),__d("sdk.XFBML.Video",["Assert","sdk.Event","IframePlugin","ObservableMixin","sdk.XD"],function(b,c,d,e,f,g,h,i,j,k,l){function m(p){"use strict";this.$VideoCache1=p.isMuted,this.$VideoCache2=p.volume,this.$VideoCache3=p.timePosition,this.$VideoCache4=p.duration}function n(p,q,r){"use strict";this.$VideoController1=p,this.$VideoController2=q,this.$VideoController3=r}c.__markCompiled&&c.__markCompiled(),m.prototype.update=function(p){"use strict";p.isMuted!==undefined&&(this.$VideoCache1=p.isMuted),p.volume!==undefined&&(this.$VideoCache2=p.volume),p.timePosition!==undefined&&(this.$VideoCache3=p.timePosition),p.duration!==undefined&&(this.$VideoCache4=p.duration)},m.prototype.isMuted=function(){"use strict";return this.$VideoCache1},m.prototype.getVolume=function(){"use strict";return this.$VideoCache1?0:this.$VideoCache2},m.prototype.getCurrentPosition=function(){"use strict";return this.$VideoCache3},m.prototype.getDuration=function(){"use strict";return this.$VideoCache4},n.prototype.play=function(){"use strict";l.sendToFacebook(this.$VideoController1,{method:"play",params:ES("JSON","stringify",!1,{})})},n.prototype.pause=function(){"use strict";l.sendToFacebook(this.$VideoController1,{method:"pause",params:ES("JSON","stringify",!1,{})})},n.prototype.seek=function(p){"use strict";h.isNumber(p,"Invalid argument"),l.sendToFacebook(this.$VideoController1,{method:"seek",params:ES("JSON","stringify",!1,{target:p})})},n.prototype.mute=function(){"use strict";l.sendToFacebook(this.$VideoController1,{method:"mute",params:ES("JSON","stringify",!1,{})})},n.prototype.unmute=function(){"use strict";l.sendToFacebook(this.$VideoController1,{method:"unmute",params:ES("JSON","stringify",!1,{})})},n.prototype.setVolume=function(p){"use strict";h.isNumber(p,"Invalid argument"),l.sendToFacebook(this.$VideoController1,{method:"setVolume",params:ES("JSON","stringify",!1,{volume:p})})},n.prototype.isMuted=function(){"use strict";return this.$VideoController3.isMuted()},n.prototype.getVolume=function(){"use strict";return this.$VideoController3.getVolume()},n.prototype.getCurrentPosition=function(){"use strict";return this.$VideoController3.getCurrentPosition()},n.prototype.getDuration=function(){"use strict";return this.$VideoController3.getDuration()},n.prototype.subscribe=function(event,p){"use strict";return h.isString(event,"Invalid argument"),h.isFunction(p,"Invalid argument"),this.$VideoController2.subscribe(event,p),{release:ES(function(){this.$VideoController2.unsubscribe(event,p)},"bind",!0,this)}};var o=j.extend({constructor:function(p,q,r,s){this.parent(p,q,r,s),this._videoController=null,this._sharedObservable=null,this._sharedVideoCache=null,this.subscribe("xd.onVideoAPIReady",function(t){this._sharedObservable=new k,this._sharedVideoCache=new m(ES("JSON","parse",!1,t.data)),this._videoController=new n(this._iframeOptions.name,this._sharedObservable,this._sharedVideoCache),i.fire("xfbml.ready",{type:"video",id:s.id,instance:this._videoController})}),this.subscribe("xd.stateChange",function(t){this._sharedObservable.inform(t.state)}),this.subscribe("xd.cachedStateUpdateRequest",function(t){this._sharedVideoCache.update(ES("JSON","parse",!1,t.data))})},getParams:function(){return{allowfullscreen:"bool",autoplay:"bool",controls:"bool",href:"url"}},getConfig:function(){return{fluid:!0,full_width:!0}}});f.exports=o},null),__d("legacy:fb.xfbml",["Assert","sdk.Event","FB","IframePlugin","PluginConfig","PluginTags","XFBML","sdk.domReady","sdk.feature","wrapFunction","sdk.XFBML.Comments","sdk.XFBML.CommentsCount","sdk.XFBML.LoginButton","sdk.XFBML.Name","sdk.XFBML.ShareButton","sdk.XFBML.Video"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){c.__markCompiled&&c.__markCompiled();var r={comments:c("sdk.XFBML.Comments"),comments_count:c("sdk.XFBML.CommentsCount"),login_button:c("sdk.XFBML.LoginButton"),name:c("sdk.XFBML.Name"),share_button:c("sdk.XFBML.ShareButton"),video:c("sdk.XFBML.Video")},s=p("plugin_tags_blacklist",[]);ES(ES("Object","keys",!1,m),"forEach",!0,function(u){-1===ES(s,"indexOf",!0,u)&&n.registerTag({xmlns:"fb",localName:u.replace(/_/g,"-"),ctor:k.withParams(m[u],l[u])})}),ES(ES("Object","keys",!1,r),"forEach",!0,function(u){-1===ES(s,"indexOf",!0,u)&&n.registerTag({xmlns:"fb",localName:u.replace(/_/g,"-"),ctor:r[u]})}),j.provide("XFBML",{parse:function(u){return h.maybeXfbml(u,"Invalid argument"),u&&9===u.nodeType&&(u=u.body),n.parse.apply(null,arguments)}}),n.subscribe("parse",ES(i.fire,"bind",!0,i,"xfbml.parse")),n.subscribe("render",ES(i.fire,"bind",!0,i,"xfbml.render")),i.subscribe("init:post",function(u){u.xfbml&&setTimeout(q(ES(o,"bind",!0,null,n.parse),"entry","init:post:xfbml.parse"),0)}),h.define("Xfbml",function(u){return(1===u.nodeType||9===u.nodeType)&&"string"==typeof u.nodeName});try{document.namespaces&&!document.namespaces.item.fb&&document.namespaces.add("fb")}catch(t){}},3),__d("legacy:fb.versioned-sdk",["sdk.Runtime"],function(b,c,d,e,f,g,h){c.__markCompiled&&c.__markCompiled(),h.setIsVersioned(!0)},3)}.call({},window.inDapIF?parent.window:window)}catch(e){(new Image).src="https://www.facebook.com/common/scribe_endpoint.php?c=jssdk_error&m="+encodeURIComponent('{"error":"LOAD", "extra": {"name":"'+e.name+'","line":"'+(e.lineNumber||e.line)+'","script":"'+(e.fileName||e.sourceURL||e.script)+'","stack":"'+(e.stackTrace||e.stack)+'","revision":"1981648","message":"'+e.message+'"}}')}return define("pinterest",function(){}),define("youOne/momentbrowser/momentbrowser",["angular","coreapi"],function(angular){return angular.module("ttc.momentbrowser",["ui.router","tq.coreapi"]).service("ttcMomentBrowser",function(tqCoreConnector){var _defaultTripDate=null,_defaultSelectedMomentId=null,_defaultMomentType=null;this.setDefaultTripDate=function(tripDate){_defaultTripDate=tripDate},this.getDefaultTripDate=function(){var tripDate=_defaultTripDate;return _defaultTripDate=null,tripDate},this.setDefaultSelectedMomentId=function(momentId){_defaultSelectedMomentId=momentId},this.getDefaultSelectedMomentId=function(){var momentId=_defaultSelectedMomentId;return _defaultSelectedMomentId=null,momentId},this.setDefaultMomentType=function(momentType){_defaultMomentType=momentType},this.getDefaultMomentType=function(){var momentType=_defaultMomentType;return _defaultMomentType=null,momentType},this.getMomentsList=function(type,parent_id,date,parentIsPassenger){var startDate=new Date(date);startDate.setHours(0,0,0,0);var startTime=startDate.getTime(),endTime=startTime+864e5,query={objectApiName:"Moment__c",where:{Type__c:{$eq:type},Moment_Time__c:{">=":new Date(startTime),"<":new Date(endTime)}},orderby:"Moment_Time__c DESC"},parentLookupKey=parentIsPassenger?"Passenger__c":"TourInstance__c";return query.where[parentLookupKey]={$eq:parent_id},tqCoreConnector.storage.find(query)},this.getNotes=function(tour_instance_id,date){return this.getMomentsList("Note",tour_instance_id,date)},this.getPostcards=function(tour_instance_id,date){return this.getMomentsList("PostCard",tour_instance_id,date)},this.getPassengerNotes=function(passenger_id,date){return this.getMomentsList("Note",passenger_id,date,!0)},this.getPassengerPostcards=function(passenger_id,date){return this.getMomentsList("PostCard",passenger_id,date,!0)}})}),window.PDK||function(window){function copy(a,b,c,d){for(var e in b)(c||"undefined"==typeof a[e])&&(a[e]=d?d(b[e]):b[e]);return a}function create(a,b){for(var c=window.PDK,d=a?a.split("."):[],e=d.length,f=0;e>f;f++){var g=d[f],h=c[g];h||(h=b&&f+1==e?b:{},c[g]=h),c=h}return c}function include(a,b,c){return copy("string"==typeof a?create(a):a,b,c)}function log(a){_logging&&window.console&&window.console.log(a)}function guid(){return"p"+(Math.random()*(1<<30)).toString(16).replace(".","")}window.PDK={};var document=window.document,_appId=null,_session=null,_logging=!0,_domains={api:"https://api.pinterest.com/",www:"https://www.pinterest.com/"};include(PDK,{me:function(){var a,b=Api.__PREFIX+"me/",c=Array.prototype.slice.call(arguments),d=c.shift();d&&"string"==typeof d?a=d:"function"==typeof d&&c.unshift(d),a&&(b+=0===a.indexOf("/")?a.substr(1):a),c.unshift(b),PDK.request.apply(void 0,c)},request:function(){var a,b,c,d=Array.prototype.slice.call(arguments),e=d.shift(),f=d.shift();if(!e)return void log("Cannot make a request without specifying a path.");for("/"===e[0]&&(e=e.substr(1)),-1===e.indexOf(Api.__PREFIX)&&(e=Api.__PREFIX+e),-1===e.indexOf("/",e.length-1)&&(e+="/");f;){var g=typeof f;if("string"!==g||a)if("function"!==g||c){if("object"!==g||b)return void log("Invalid argument passed to api:"+f);b=f}else c=f;else a=f.toLowerCase();f=d.shift()}return a=a||"get",b=b||{},Api.__SUPPORTED_METHODS.indexOf(a)<0?void log("Invalid method passed to api:"+a):void Api.oauthRequest(e,a,b,c)}});var Api={__SUPPORTED_METHODS:["get","post","delete","put","patch"],__PREFIX:"v1/",__AUTHORIZATION_HEADER:"Authorization",triggerRequest:function(a,b,c,d,e,f){var g=f||c;window.XMLHttpRequest?a.open(b,g,!0):window.XDomainRequest&&a.open(b,g),a.setRequestHeader(Api.__AUTHORIZATION_HEADER,"BEARER "+e),a.send(d)},executeCorsRequest:function(a,b,c,d,e,f,g){var h,i,j=QS.encode(d),k=_domains.api+a;j&&(k+=(a.indexOf("?")>-1?"&":"?")+j),window.XMLHttpRequest?(h=new window.XMLHttpRequest,"withCredentials"in h&&(h.onerror=g,h.onreadystatechange=function(){4===h.readyState&&(h.status>=200&&h.status<400?Api.invokeXHRCallback(h,b,k,c,e,f):(i=h.status,Api.invokeXHRCallback(h,b,k,c,e,f,i)))},Api.triggerRequest(h,b,k,e,c))):window.XDomainRequest?(h=new window.XDomainRequest,h.onerror=g,h.onload=function(){Api.invokeXHRCallback(h,b,k,c,e,f)},Api.triggerRequest(h,b,k,e,c)):g(new Error("CORS not supported"))},invokeXHRCallback:function(a,b,c,d,e,f,g){var h,i,j={};if(f=f||function(){},g)j.error="An error occured with status code: "+g;else if(a.responseText)try{j=JSON.parse(a.responseText)||j,h=j.page,h&&h.next&&(i=h.next,j.hasNext=!0),j.hasNext&&(j.next=function(){Api.triggerRequest(a,b,c,e,d,i)})}catch(k){j.error=k&&k.message}else j.error="The request did not return a valid response";"function"==typeof f&&f(j)},oauthRequest:function(a,b,c,d){var e;if(c.accessToken?(e=c.accessToken,delete c.accessToken):e=Auth.getAccessToken(),!e)return void log("A request was made on behalf of a user before they were authenticated.");var f=null;c.data&&(f=QS.encode(c.data),delete c.data);try{Api.executeCorsRequest(a,b,e,c,f,d,function(a){var b="The request did not complete because of a failure on the network level.";a&&a.message&&(b=a.message),log(b)})}catch(g){log("Unable to create the request.")}}};include(PDK,{login:function(a,b){var c;if(a.scope){var d=Auth.getCurrentScope();d&&!Auth.isNewPermRequested(a.scope,d)&&(c="The current user is already authenticated")}else c="Cannot login without providing scope as an option";return c?void b({error:c}):(a=copy({method:"auth.login"},a||{}),void UI.createCall(a,b))},logout:function(a){var b=Auth.setSession(null);b.session&&(b.error="The active users session was not cleared."),"function"!=typeof a&&(a=function(){}),a(b)},getSession:function(){return _session},setSession:function(a,b){var c;a&&(c=Auth.setSession(a)),"function"==typeof b&&b(c)}});var Auth={_PERMS:["read_public","write_public","read_private","write_private","read_relationships","write_relationships"],setSession:function(a){var b=!_session&&a,c=_session&&!a,d=b||c||_session&&a&&_session.accessToken!==a.accessToken,e={session:a};return _session=a,d&&Cookie.isEnabled()&&Cookie.set(a),e},getAccessToken:function(){return _session?_session.accessToken:null},getCurrentScope:function(){return _session?_session.scope:null},getUserId:function(){var a=_session;return a&&a.user?a.user.userId||"":void 0},parseScope:function(a){var b=[];if(!a)return void log("No permissions specified.");for(var c=a.split(","),d=0;d<c.length;d++){var e=c[d].trim().toLowerCase();if(-1===Auth._PERMS.indexOf(e))return void log("Unsupported permission: "+c[d]+".");b.push(e)}return b.join(",")},isNewPermRequested:function(a,b){if(!b)return!0;for(var c=a.split(","),d=0;d<c.length;d++)if(-1===b.indexOf(c[d]))return!0;return!1}};include(PDK,{init:function(a){a=copy(a||{},{logging:!0}),_appId=a.appId,a.logging||(_logging=!1),_appId&&(Cookie.setEnabled(a.cookie),a.session=a.session||Cookie.load(),Auth.setSession(a.session))}}),window.setTimeout(function(){window.pAsyncInit&&pAsyncInit()},0),include(PDK,{pin:function(a,b,c,d){var e={method:"pin",media:a,description:b,url:c};UI.createCall(e,d)}});var UI={Methods:{},_active:{},_defaultCb:{},popupInterval:{},createCall:function(a,b){if(!a.method)return void log('"method" is a required parameter for ui call.');var c=UI.Methods[a.method.toLowerCase()],d=guid();if(!c)return void log("Unknown method: "+a.method);copy(a,{redirect_uri:UI.getRedirectUri()});var e={cb:b,id:d,size:c.size||{},url:_domains.api+c.url,params:a};if(!c.transform||(e=c.transform(e))){delete e.params.method,e.id in UI._defaultCb||(UI._defaultCb[e.id]=e.cb);var f=QS.encode(e.params);f&&(e.url+="?"+f),UI.popup(e)}},getRedirectUri:function(){return window.location.href.split("#")[0]},popup:function(a){var b,c="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,d="undefined"!=typeof window.screenY?window.screenY:window.screenTop,e="undefined"!=typeof window.outerWidth?window.outerWidth:document.documentElement.clientWidth,f="undefined"!=typeof window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,g=a.size.width,h=a.size.height,i=parseInt(c+(e-g)/2,10),j=parseInt(d+(f-h)/2.5,10),k="width="+g+",height="+h+",left="+i+",top="+j,l=window.location,m=!1;l&&(l=l.origin||l.protocol+"//"+l.host),UI._active[a.id]={win:window.open(a.url,a.id,k),useRedirect:a.useRedirect,redirect_uri_origin:l},b=function(b){if(!m){if(b.origin+"/"!==_domains.api)return;UI._active[a.id]&&UI._active[a.id].win&&UI._active[a.id].win.close(),window.removeEventListener("message",arguments.callee,!1),UI.triggerEvent(a.id,b.data),m=!0}},a.useRedirect||window.addEventListener("message",b,!1),a.id in UI._active&&UI.monitorPopup()},triggerEvent:function(a,b){if(!UI._active[a]||!UI._defaultCb[a])return void log("There was no default callback for this UI method");var c=UI._defaultCb[a];if(!b){var d=UI._active[a].redirected_uri;b=QS.getParamsFromURL(d)}delete UI._active[a],delete UI._defaultCb[a],c=c||function(){},"function"==typeof c&&c(b)},monitorPopup:function(){var a=!0;for(var b in UI._active)if(UI._active.hasOwnProperty(b)&&b in UI._defaultCb){var c=UI._active[b],d=c.win,e=d.location;try{d.closed?(a=!1,UI.triggerEvent(b)):c.useRedirect&&UI.isRedirectedToSameOrigin(e,c.redirect_uri_origin)&&(c.redirected_uri=e.href,d.close())}catch(f){log(f)}}a&&!UI.popupInterval[b]?UI.popupInterval[b]=window.setInterval(UI.monitorPopup,100):!a&&UI.popupInterval[b]&&(window.clearInterval(UI.popupInterval[b]),UI.popupInterval[b]=null)},isRedirectedToSameOrigin:function(a,b){try{return 0===a.href.indexOf(b)}catch(c){return!1}}};UI.Methods={"auth.login":{size:{width:627,height:440},url:"oauth",transform:function(a){if(!_appId)return void log("Trying to login before initializing.");var b=Auth.parseScope(a.params.scope);return b?(a.useRedirect=!window.postMessage||/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/i.test(navigator.userAgent)||-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0,UI._defaultCb[a.id]=function(c){var d={};if(c&&c.access_token){var e={accessToken:decodeURIComponent(c.access_token),scope:b};d=Auth.setSession(e)}a.cb(d)},copy(a.params,{client_id:_appId,response_type:"token",redirect_type:a.useRedirect?"uri":"js",scope:b},!0),a):void 0}},pin:{size:{width:760,height:565},url:"pin/create/button",transform:function(a){return a.url=_domains.www+this.url,a.useRedirect=!0,a}}};var Cookie={_domain:null,_enabled:!1,setEnabled:function(a){Cookie._enabled=a},isEnabled:function(){return Cookie._enabled},load:function(){var a,b=document.cookie.match("\\bps_"+_appId+'="([^;]*)\\b');return b&&(a=QS.decode(b[1]),Cookie._domain=a.base_domain),a},setRaw:function(a,b,c){document.cookie="ps_"+_appId+'="'+a+'"'+(a&&0===b?"":"; expires="+new Date(1e3*b).toGMTString())+"; path=/"+(c?"; domain=."+c:""),Cookie._domain=c},set:function(a){a?Cookie.setRaw(QS.encode(a),0,a.base_domain):Cookie.clear()},clear:function(){Cookie.setRaw("",0,Cookie._domain)}},QS={encode:function(a,b,c){b=void 0===b?"&":b,c=c===!1?function(a){return a}:encodeURIComponent;var d=[];for(var e in a)a.hasOwnProperty(e)&&(val=a[e],null!==val&&"undefined"!=typeof val&&d.push(c(e)+"="+c(val)));return d.sort(),d.join(b)},decode:function(a){for(var b,c=decodeURIComponent,d={},e=a.split("&"),f=0;f<e.length;f++)b=e[f].split(/=(.+)?/),b&&b[0]&&(d[c(b[0])]=c(b[1]));return d},getParamsFromURL:function(a){if(a){var b=a.split("?")[1];if(b)return QS.decode(b)}}}}(window),define("facebook",function(){}),define("components/socialsharing/socialsharing",["angular","facebook","pinterest"],function(angular){return angular.module("tq.socialsharing",[]).provider("tqSocialSharing",function(){var socialNetwotkPreferences={FacebookAppId:"1659462291010102",TwitterAppId:"",PinterestAppId:"",GooglePlusAppId:""};this.setSocialNetworkPreferences=function(networkPreferences){angular.merge(socialNetwotkPreferences,networkPreferences)},FB.init({appId:socialNetwotkPreferences.FacebookAppId,xfbml:!0,version:"v2.4"});var tqSocialSharingService=null,mergeTextAndHashtags=function(text,hashtags){return hashtags&&""!==hashtags?text&&""!==text?text+" "+hashtags:hashtags||"":text};this.$get=function($q,$settings,tqCoreConnector){return tqSocialSharingService||(tqSocialSharingService={shareVia:function(socialNetwork,messageText,imageUrl,linkUrl){},shareViaFacebook:function(messageText,imageUrl,linkUrl,hashtags){var url="https://www.facebook.com/dialog/feed?name=My+Travel+Space",app_id=socialNetwotkPreferences.FacebookAppId,description=encodeURIComponent(mergeTextAndHashtags(messageText,hashtags)),link=(encodeURIComponent(linkUrl),linkUrl||imageUrl);url+="&app_id="+app_id+"&display=popup",url+="&description="+description,url+="&redirect_uri="+encodeURIComponent("http://www.facebook.com"),imageUrl&&(url+="&picture="+encodeURIComponent(imageUrl)),link&&(url+="&link="+encodeURIComponent(link)),window.open(url,"facebook-share-dialog","width=963,height=447,scrollbars=yes")},shareViaTwitter:function(messageText,imageUrl,linkUrl,hashtags){var urlString="https://www.twitter.com/intent/tweet?";messageText&&(urlString+="text="+encodeURIComponent(mergeTextAndHashtags(messageText.toString(),hashtags))),imageUrl&&(urlString+="&url="+encodeURIComponent(imageUrl)),window.open(urlString,"sharer","toolbar=0,status=0,width=500,height=250")},shareViaPinterest:function(messageText,imageUrl,linkUrl,hashtags){PDK.pin(imageUrl,mergeTextAndHashtags(messageText,hashtags),linkUrl)},shareViaGooglePlus:function(messageText,imageUrl,linkUrl,hashtags){var urlString="https://plus.google.com/share?url="+encodeURIComponent(imageUrl);hashtags&&""!==hashtags&&(urlString+="&hashtags="+encodeURIComponent(hashtags)),window.open(urlString,"sharer","toolbar=0,status=0,width=500,height=250")}}),tqSocialSharingService}}).service("tqSocialSharingPopup",function(tqSocialSharing,$ionicPopup,$timeout,$rootScope){var self=this;this.show=function(messageText,imageUrl,linkUrl,hashtags,popupPreferences){if(!self.showing){self.showing=!0,$timeout(function(){self.showing=!1},2e3);var $scope=$rootScope.$new(),myPopup=$ionicPopup.show({title:"Share",templateUrl:"acn-one/acn-ng/components/socialsharing/sharePopoupContent.tpl.html",moduleName:"socialsharing",scope:$scope,cssClass:"tq-social-sharing "+(popupPreferences.cssClass||""),buttons:[{text:"Cancel",onTap:function(e){return!1}}]});$scope.imageUrl=imageUrl,$scope.linkUrl=linkUrl,$scope.shareFacebook=ionic.throttle(function(){try{tqSocialSharing.shareViaFacebook(messageText,imageUrl,linkUrl,hashtags)}finally{$timeout(function(){myPopup.close()},100)}},1e3),$scope.shareTwitter=ionic.throttle(function(){try{tqSocialSharing.shareViaTwitter(messageText,imageUrl,linkUrl,hashtags)}finally{$timeout(function(){myPopup.close()},100)}},1e3),$scope.sharePinterest=ionic.throttle(function(){try{tqSocialSharing.shareViaPinterest(messageText,imageUrl,linkUrl)}finally{$timeout(function(){myPopup.close()},100)}},1e3),$scope.shareGooglePlus=ionic.throttle(function(){try{tqSocialSharing.shareViaGooglePlus(messageText,imageUrl,linkUrl)}finally{$timeout(function(){myPopup.close()},100)}},1e3)}}})}),function($){"use strict";var jCarousel=$.jCarousel={};jCarousel.version="0.3.4";var rRelativeTarget=/^([+\-]=)?(.+)$/;jCarousel.parseTarget=function(target){var relative=!1,parts="object"!=typeof target?rRelativeTarget.exec(target):null;return parts?(target=parseInt(parts[2],10)||0,parts[1]&&(relative=!0,"-="===parts[1]&&(target*=-1))):"object"!=typeof target&&(target=parseInt(target,10)||0),{target:target,relative:relative}},jCarousel.detectCarousel=function(element){for(var carousel;element.length>0;){if(carousel=element.filter("[data-jcarousel]"),carousel.length>0)return carousel;if(carousel=element.find("[data-jcarousel]"),carousel.length>0)return carousel;element=element.parent()}return null},jCarousel.base=function(pluginName){return{version:jCarousel.version,_options:{},_element:null,_carousel:null,_init:$.noop,_create:$.noop,_destroy:$.noop,_reload:$.noop,create:function(){return this._element.attr("data-"+pluginName.toLowerCase(),!0).data(pluginName,this),!1===this._trigger("create")?this:(this._create(),this._trigger("createend"),this)},destroy:function(){return!1===this._trigger("destroy")?this:(this._destroy(),this._trigger("destroyend"),this._element.removeData(pluginName).removeAttr("data-"+pluginName.toLowerCase()),this)},reload:function(options){return!1===this._trigger("reload")?this:(options&&this.options(options),this._reload(),this._trigger("reloadend"),this)},element:function(){return this._element},options:function(key,value){if(0===arguments.length)return $.extend({},this._options);if("string"==typeof key){if("undefined"==typeof value)return"undefined"==typeof this._options[key]?null:this._options[key];this._options[key]=value}else this._options=$.extend({},this._options,key);return this},carousel:function(){return this._carousel||(this._carousel=jCarousel.detectCarousel(this.options("carousel")||this._element),this._carousel||$.error('Could not detect carousel for plugin "'+pluginName+'"')),this._carousel},_trigger:function(type,element,data){var event,defaultPrevented=!1;return data=[this].concat(data||[]),(element||this._element).each(function(){event=$.Event((pluginName+":"+type).toLowerCase()),$(this).trigger(event,data),event.isDefaultPrevented()&&(defaultPrevented=!0)}),!defaultPrevented}}},jCarousel.plugin=function(pluginName,pluginPrototype){var Plugin=$[pluginName]=function(element,options){this._element=$(element),this.options(options),this._init(),this.create()};return Plugin.fn=Plugin.prototype=$.extend({},jCarousel.base(pluginName),pluginPrototype),$.fn[pluginName]=function(options){var args=Array.prototype.slice.call(arguments,1),returnValue=this;return"string"==typeof options?this.each(function(){var instance=$(this).data(pluginName);if(!instance)return $.error("Cannot call methods on "+pluginName+' prior to initialization; attempted to call method "'+options+'"');if(!$.isFunction(instance[options])||"_"===options.charAt(0))return $.error('No such method "'+options+'" for '+pluginName+" instance");var methodValue=instance[options].apply(instance,args);return methodValue!==instance&&"undefined"!=typeof methodValue?(returnValue=methodValue,!1):void 0}):this.each(function(){var instance=$(this).data(pluginName);instance instanceof Plugin?instance.reload(options):new Plugin(this,options)}),returnValue},Plugin}}(jQuery),function($,window){"use strict";var toFloat=function(val){return parseFloat(val)||0};$.jCarousel.plugin("jcarousel",{animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,underflow:!1,relative:!1,_options:{list:function(){return this.element().children().eq(0)},items:function(){return this.list().children()},animation:400,transitions:!1,wrap:null,vertical:null,rtl:null,center:!1},_list:null,_items:null,_target:$(),_first:$(),_last:$(),_visible:$(),_fullyvisible:$(),_init:function(){var self=this;return this.onWindowResize=function(){self.resizeTimer&&clearTimeout(self.resizeTimer),self.resizeTimer=setTimeout(function(){self.reload()},100)},this},_create:function(){this._reload(),$(window).on("resize.jcarousel",this.onWindowResize)},_destroy:function(){$(window).off("resize.jcarousel",this.onWindowResize)},_reload:function(){this.vertical=this.options("vertical"),null==this.vertical&&(this.vertical=this.list().height()>this.list().width()),this.rtl=this.options("rtl"),null==this.rtl&&(this.rtl=function(element){if("rtl"===(""+element.attr("dir")).toLowerCase())return!0;var found=!1;return element.parents("[dir]").each(function(){return/rtl/i.test($(this).attr("dir"))?(found=!0,!1):void 0}),found}(this._element)),this.lt=this.vertical?"top":"left",this.relative="relative"===this.list().css("position"),this._list=null,this._items=null;var item=this.index(this._target)>=0?this._target:this.closest();this.circular="circular"===this.options("wrap"),this.underflow=!1;var props={left:0,top:0};return item.length>0&&(this._prepare(item),this.list().find("[data-jcarousel-clone]").remove(),this._items=null,this.underflow=this._fullyvisible.length>=this.items().length,this.circular=this.circular&&!this.underflow,props[this.lt]=this._position(item)+"px"),this.move(props),this},list:function(){if(null===this._list){var option=this.options("list");this._list=$.isFunction(option)?option.call(this):this._element.find(option)}return this._list},items:function(){if(null===this._items){var option=this.options("items");this._items=($.isFunction(option)?option.call(this):this.list().find(option)).not("[data-jcarousel-clone]")}return this._items},index:function(item){return this.items().index(item)},closest:function(){var width,self=this,pos=this.list().position()[this.lt],closest=$(),stop=!1,lrb=this.vertical?"bottom":this.rtl&&!this.relative?"left":"right";return this.rtl&&this.relative&&!this.vertical&&(pos+=this.list().width()-this.clipping()),this.items().each(function(){if(closest=$(this),stop)return!1;var dim=self.dimension(closest);if(pos+=dim,pos>=0){if(width=dim-toFloat(closest.css("margin-"+lrb)),!(Math.abs(pos)-dim+width/2<=0))return!1;stop=!0}}),closest},target:function(){return this._target},first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){if(!1===this._trigger("hasnext"))return!0;var wrap=this.options("wrap"),end=this.items().length-1,check=this.options("center")?this._target:this._last;return end>=0&&!this.underflow&&(wrap&&"first"!==wrap||this.index(check)<end||this.tail&&!this.inTail)?!0:!1},hasPrev:function(){if(!1===this._trigger("hasprev"))return!0;var wrap=this.options("wrap");return this.items().length>0&&!this.underflow&&(wrap&&"last"!==wrap||this.index(this._first)>0||this.tail&&this.inTail)?!0:!1},clipping:function(){return this._element["inner"+(this.vertical?"Height":"Width")]()},dimension:function(element){return element["outer"+(this.vertical?"Height":"Width")](!0)},scroll:function(target,animate,callback){if(this.animating)return this;if(!1===this._trigger("scroll",null,[target,animate]))return this;$.isFunction(animate)&&(callback=animate,animate=!0);var parsed=$.jCarousel.parseTarget(target);if(parsed.relative){var current,first,index,start,curr,isVisible,props,i,end=this.items().length-1,scroll=Math.abs(parsed.target),wrap=this.options("wrap");if(parsed.target>0){var last=this.index(this._last);if(last>=end&&this.tail)this.inTail?"both"===wrap||"last"===wrap?this._scroll(0,animate,callback):$.isFunction(callback)&&callback.call(this,!1):this._scrollTail(animate,callback);else if(current=this.index(this._target),this.underflow&&current===end&&("circular"===wrap||"both"===wrap||"last"===wrap)||!this.underflow&&last===end&&("both"===wrap||"last"===wrap))this._scroll(0,animate,callback);else if(index=current+scroll,this.circular&&index>end){for(i=end,curr=this.items().get(-1);i++<index;)curr=this.items().eq(0),isVisible=this._visible.index(curr)>=0,isVisible&&curr.after(curr.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(curr),isVisible||(props={},props[this.lt]=this.dimension(curr),this.moveBy(props)),this._items=null;this._scroll(curr,animate,callback)}else this._scroll(Math.min(index,end),animate,callback)}else if(this.inTail)this._scroll(Math.max(this.index(this._first)-scroll+1,0),animate,callback);else if(first=this.index(this._first),current=this.index(this._target),start=this.underflow?current:first,index=start-scroll,0>=start&&(this.underflow&&"circular"===wrap||"both"===wrap||"first"===wrap))this._scroll(end,animate,callback);else if(this.circular&&0>index){for(i=index,curr=this.items().get(0);i++<0;){curr=this.items().eq(-1),isVisible=this._visible.index(curr)>=0,isVisible&&curr.after(curr.clone(!0).attr("data-jcarousel-clone",!0)),
this.list().prepend(curr),this._items=null;var dim=this.dimension(curr);props={},props[this.lt]=-dim,this.moveBy(props)}this._scroll(curr,animate,callback)}else this._scroll(Math.max(index,0),animate,callback)}else this._scroll(parsed.target,animate,callback);return this._trigger("scrollend"),this},moveBy:function(properties,opts){var position=this.list().position(),multiplier=1,correction=0;return this.rtl&&!this.vertical&&(multiplier=-1,this.relative&&(correction=this.list().width()-this.clipping())),properties.left&&(properties.left=position.left+correction+toFloat(properties.left)*multiplier+"px"),properties.top&&(properties.top=position.top+correction+toFloat(properties.top)*multiplier+"px"),this.move(properties,opts)},move:function(properties,opts){opts=opts||{};var option=this.options("transitions"),transitions=!!option,transforms=!!option.transforms,transforms3d=!!option.transforms3d,duration=opts.duration||0,list=this.list();if(!transitions&&duration>0)return void list.animate(properties,opts);var complete=opts.complete||$.noop,css={};if(transitions){var backup={transitionDuration:list.css("transitionDuration"),transitionTimingFunction:list.css("transitionTimingFunction"),transitionProperty:list.css("transitionProperty")},oldComplete=complete;complete=function(){$(this).css(backup),oldComplete.call(this)},css={transitionDuration:(duration>0?duration/1e3:0)+"s",transitionTimingFunction:option.easing||opts.easing,transitionProperty:duration>0?function(){return transforms||transforms3d?"all":properties.left?"left":"top"}():"none",transform:"none"}}transforms3d?css.transform="translate3d("+(properties.left||0)+","+(properties.top||0)+",0)":transforms?css.transform="translate("+(properties.left||0)+","+(properties.top||0)+")":$.extend(css,properties),transitions&&duration>0&&list.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",complete),list.css(css),0>=duration&&list.each(function(){complete.call(this)})},_scroll:function(item,animate,callback){if(this.animating)return $.isFunction(callback)&&callback.call(this,!1),this;if("object"!=typeof item?item=this.items().eq(item):"undefined"==typeof item.jquery&&(item=$(item)),0===item.length)return $.isFunction(callback)&&callback.call(this,!1),this;this.inTail=!1,this._prepare(item);var pos=this._position(item),currPos=this.list().position()[this.lt];if(pos===currPos)return $.isFunction(callback)&&callback.call(this,!1),this;var properties={};return properties[this.lt]=pos+"px",this._animate(properties,animate,callback),this},_scrollTail:function(animate,callback){if(this.animating||!this.tail)return $.isFunction(callback)&&callback.call(this,!1),this;var pos=this.list().position()[this.lt];this.rtl&&this.relative&&!this.vertical&&(pos+=this.list().width()-this.clipping()),this.rtl&&!this.vertical?pos+=this.tail:pos-=this.tail,this.inTail=!0;var properties={};return properties[this.lt]=pos+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(properties,animate,callback),this},_animate:function(properties,animate,callback){if(callback=callback||$.noop,!1===this._trigger("animate"))return callback.call(this,!1),this;this.animating=!0;var animation=this.options("animation"),complete=$.proxy(function(){this.animating=!1;var c=this.list().find("[data-jcarousel-clone]");c.length>0&&(c.remove(),this._reload()),this._trigger("animateend"),callback.call(this,!0)},this),opts="object"==typeof animation?$.extend({},animation):{duration:animation},oldComplete=opts.complete||$.noop;return animate===!1?opts.duration=0:"undefined"!=typeof $.fx.speeds[opts.duration]&&(opts.duration=$.fx.speeds[opts.duration]),opts.complete=function(){complete(),oldComplete.call(this)},this.move(properties,opts),this},_prepare:function(item){var curr,isVisible,margin,dim,index=this.index(item),idx=index,wh=this.dimension(item),clip=this.clipping(),lrb=this.vertical?"bottom":this.rtl?"left":"right",center=this.options("center"),update={target:item,first:item,last:item,visible:item,fullyvisible:clip>=wh?item:$()};if(center&&(wh/=2,clip/=2),clip>wh)for(;;){if(curr=this.items().eq(++idx),0===curr.length){if(!this.circular)break;if(curr=this.items().eq(0),item.get(0)===curr.get(0))break;if(isVisible=this._visible.index(curr)>=0,isVisible&&curr.after(curr.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(curr),!isVisible){var props={};props[this.lt]=this.dimension(curr),this.moveBy(props)}this._items=null}if(dim=this.dimension(curr),0===dim)break;if(wh+=dim,update.last=curr,update.visible=update.visible.add(curr),margin=toFloat(curr.css("margin-"+lrb)),clip>=wh-margin&&(update.fullyvisible=update.fullyvisible.add(curr)),wh>=clip)break}if(!this.circular&&!center&&clip>wh)for(idx=index;;){if(--idx<0)break;if(curr=this.items().eq(idx),0===curr.length)break;if(dim=this.dimension(curr),0===dim)break;if(wh+=dim,update.first=curr,update.visible=update.visible.add(curr),margin=toFloat(curr.css("margin-"+lrb)),clip>=wh-margin&&(update.fullyvisible=update.fullyvisible.add(curr)),wh>=clip)break}return this._update(update),this.tail=0,center||"circular"===this.options("wrap")||"custom"===this.options("wrap")||this.index(update.last)!==this.items().length-1||(wh-=toFloat(update.last.css("margin-"+lrb)),wh>clip&&(this.tail=wh-clip)),this},_position:function(item){var first=this._first,pos=first.position()[this.lt],center=this.options("center"),centerOffset=center?this.clipping()/2-this.dimension(first)/2:0;return this.rtl&&!this.vertical?(pos-=this.relative?this.list().width()-this.dimension(first):this.clipping()-this.dimension(first),pos+=centerOffset):pos-=centerOffset,!center&&(this.index(item)>this.index(first)||this.inTail)&&this.tail?(pos=this.rtl&&!this.vertical?pos-this.tail:pos+this.tail,this.inTail=!0):this.inTail=!1,-pos},_update:function(update){var key,self=this,current={target:this._target,first:this._first,last:this._last,visible:this._visible,fullyvisible:this._fullyvisible},back=this.index(update.first||current.first)<this.index(current.first),doUpdate=function(key){var elIn=[],elOut=[];update[key].each(function(){current[key].index(this)<0&&elIn.push(this)}),current[key].each(function(){update[key].index(this)<0&&elOut.push(this)}),back?elIn=elIn.reverse():elOut=elOut.reverse(),self._trigger(key+"in",$(elIn)),self._trigger(key+"out",$(elOut)),self["_"+key]=update[key]};for(key in update)doUpdate(key);return this}})}(jQuery,window),function($){"use strict";$.jcarousel.fn.scrollIntoView=function(target,animate,callback){var index,parsed=$.jCarousel.parseTarget(target),first=this.index(this._fullyvisible.first()),last=this.index(this._fullyvisible.last());if(index=parsed.relative?parsed.target<0?Math.max(0,first+parsed.target):last+parsed.target:"object"!=typeof parsed.target?parsed.target:this.index(parsed.target),first>index)return this.scroll(index,animate,callback);if(index>=first&&last>=index)return $.isFunction(callback)&&callback.call(this,!1),this;for(var curr,items=this.items(),clip=this.clipping(),lrb=this.vertical?"bottom":this.rtl?"left":"right",wh=0;;){if(curr=items.eq(index),0===curr.length)break;if(wh+=this.dimension(curr),wh>=clip){var margin=parseFloat(curr.css("margin-"+lrb))||0;wh-margin!==clip&&index++;break}if(0>=index)break;index--}return this.scroll(index,animate,callback)}}(jQuery),function($){"use strict";$.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click",method:"scroll"},_active:null,_init:function(){this.onDestroy=$.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",$.proxy(this._create,this))},this),this.onReload=$.proxy(this._reload,this),this.onEvent=$.proxy(function(e){e.preventDefault();var method=this.options("method");$.isFunction(method)?method.call(this):this.carousel().jcarousel(this.options("method"),this.options("target"))},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend jcarousel:scrollend",this.onReload),this._element.on(this.options("event")+".jcarouselcontrol",this.onEvent),this._reload()},_destroy:function(){this._element.off(".jcarouselcontrol",this.onEvent),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend jcarousel:scrollend",this.onReload)},_reload:function(){var active,parsed=$.jCarousel.parseTarget(this.options("target")),carousel=this.carousel();if(parsed.relative)active=carousel.jcarousel(parsed.target>0?"hasNext":"hasPrev");else{var target="object"!=typeof parsed.target?carousel.jcarousel("items").eq(parsed.target):parsed.target;active=carousel.jcarousel("target").index(target)>=0}return this._active!==active&&(this._trigger(active?"active":"inactive"),this._active=active),this}})}(jQuery),function($){"use strict";$.jCarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(page){return'<a href="#'+page+'">'+page+"</a>"},event:"click",method:"scroll"},_carouselItems:null,_pages:{},_items:{},_currentPage:null,_init:function(){this.onDestroy=$.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",$.proxy(this._create,this))},this),this.onReload=$.proxy(this._reload,this),this.onScroll=$.proxy(this._update,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend",this.onReload).on("jcarousel:scrollend",this.onScroll),this._reload()},_destroy:function(){this._clear(),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend",this.onReload).off("jcarousel:scrollend",this.onScroll),this._carouselItems=null},_reload:function(){var perPage=this.options("perPage");if(this._pages={},this._items={},$.isFunction(perPage)&&(perPage=perPage.call(this)),null==perPage)this._pages=this._calculatePages();else for(var curr,pp=parseInt(perPage,10)||0,items=this._getCarouselItems(),page=1,i=0;;){if(curr=items.eq(i++),0===curr.length)break;this._pages[page]?this._pages[page]=this._pages[page].add(curr):this._pages[page]=curr,i%pp===0&&page++}this._clear();var self=this,carousel=this.carousel().data("jcarousel"),element=this._element,item=this.options("item"),numCarouselItems=this._getCarouselItems().length;$.each(this._pages,function(page,carouselItems){var currItem=self._items[page]=$(item.call(self,page,carouselItems));currItem.on(self.options("event")+".jcarouselpagination",$.proxy(function(){var target=carouselItems.eq(0);if(carousel.circular){var currentIndex=carousel.index(carousel.target()),newIndex=carousel.index(target);parseFloat(page)>parseFloat(self._currentPage)?currentIndex>newIndex&&(target="+="+(numCarouselItems-currentIndex+newIndex)):newIndex>currentIndex&&(target="-="+(currentIndex+(numCarouselItems-newIndex)))}carousel[this.options("method")](target)},self)),element.append(currItem)}),this._update()},_update:function(){var currentPage,target=this.carousel().jcarousel("target");$.each(this._pages,function(page,carouselItems){return carouselItems.each(function(){return target.is(this)?(currentPage=page,!1):void 0}),currentPage?!1:void 0}),this._currentPage!==currentPage&&(this._trigger("inactive",this._items[this._currentPage]),this._trigger("active",this._items[currentPage])),this._currentPage=currentPage},items:function(){return this._items},reloadCarouselItems:function(){return this._carouselItems=null,this},_clear:function(){this._element.empty(),this._currentPage=null},_calculatePages:function(){for(var curr,dim,carousel=this.carousel().data("jcarousel"),items=this._getCarouselItems(),clip=carousel.clipping(),wh=0,idx=0,page=1,pages={};;){if(curr=items.eq(idx++),0===curr.length)break;dim=carousel.dimension(curr),wh+dim>clip&&(page++,wh=0),wh+=dim,pages[page]?pages[page]=pages[page].add(curr):pages[page]=curr}return pages},_getCarouselItems:function(){return this._carouselItems||(this._carouselItems=this.carousel().jcarousel("items")),this._carouselItems}})}(jQuery),function($,document){"use strict";var hiddenProp,visibilityChangeEvent,visibilityChangeEventNames={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",webkitHidden:"webkitvisibilitychange"};$.each(visibilityChangeEventNames,function(key,val){return"undefined"!=typeof document[key]?(hiddenProp=key,visibilityChangeEvent=val,!1):void 0}),$.jCarousel.plugin("jcarouselAutoscroll",{_options:{target:"+=1",interval:3e3,autostart:!0},_timer:null,_started:!1,_init:function(){this.onDestroy=$.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",$.proxy(this._create,this))},this),this.onAnimateEnd=$.proxy(this._start,this),this.onVisibilityChange=$.proxy(function(){document[hiddenProp]?this._stop():this._start()},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy),$(document).on(visibilityChangeEvent,this.onVisibilityChange),this.options("autostart")&&this.start()},_destroy:function(){this._stop(),this.carousel().off("jcarousel:destroy",this.onDestroy),$(document).off(visibilityChangeEvent,this.onVisibilityChange)},_start:function(){return this._stop(),this._started?(this.carousel().one("jcarousel:animateend",this.onAnimateEnd),this._timer=setTimeout($.proxy(function(){this.carousel().jcarousel("scroll",this.options("target"))},this),this.options("interval")),this):void 0},_stop:function(){return this._timer&&(this._timer=clearTimeout(this._timer)),this.carousel().off("jcarousel:animateend",this.onAnimateEnd),this},start:function(){return this._started=!0,this._start(),this},stop:function(){return this._started=!1,this._stop(),this}})}(jQuery,document),define("carousel",function(){}),define("components/carousel/carousel",["angular","coreapi","carousel"],function(angular){return angular.module("tq.carousel",["tq.coreapi"]).service("tqCarouselDelegate",ionic.DelegateService(["setImages","onItemClick"])).directive("tqCarousel",function($timeout,tqCarouselDelegate){return{restrict:"A",replace:!0,transclude:!1,scope:{images:"="},templateUrl:"acn-one/acn-ng/components/carousel/carousel.tpl.html",link:function(scope,element,attrs){var container=$(element),carousel=container.children(".jcarousel"),onClickDelegateMethod=null;carousel.jcarousel({wrap:"circular"}).on("jcarousel:reload jcarousel:create",function(){var carousel=$(this),width=carousel.innerWidth(),elementsPerWindow=1;elementsPerWindow=400>=width?1:Math.ceil((width-200)/200);var children=carousel.find("li");children.length<elementsPerWindow&&(elementsPerWindow=children.lengthhey),children.css("width",Math.ceil(width/elementsPerWindow)+"px")}),scope.elementClick=function(id){angular.isFunction(onClickDelegateMethod)&&onClickDelegateMethod(id)},scope.$watch(attrs.images,function(value){$timeout(function(){carousel.jcarousel("reload")},50)}),container.find(".jcarousel-control-prev").jcarouselControl({target:"-=1"}),container.find(".jcarousel-control-next").jcarouselControl({target:"+=1"});var delegateHandle={setImages:function(images){scope.images=images,$timeout(function(){carousel.jcarousel("reload")},50)},onItemClick:function(method){return onClickDelegateMethod=method,function(){method==onClickDelegateMethod&&(onClickDelegateMethod=null)}}},deregisterInstance=null;attrs.tqCarousel&&(deregisterInstance=tqCarouselDelegate._registerInstance(delegateHandle,attrs.tqCarousel)),scope.$on("$destroy",function(){angular.isFunction(deregisterInstance)&&(deregisterInstance(),deregisterInstance=null),angular.isFunction(onClickDelegateMethod)&&(onClickDelegateMethod=null),scope.pathElements=null,scope.element=null})}}})}),function(){function imageHasData(img){return!!img.exifdata}function base64ToArrayBuffer(base64,contentType){contentType=contentType||base64.match(/^data\:([^\;]+)\;base64,/im)[1]||"",base64=base64.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var binary=atob(base64),len=binary.length,buffer=new ArrayBuffer(len),view=new Uint8Array(buffer),i=0;len>i;i++)view[i]=binary.charCodeAt(i);return buffer}function objectURLToBlob(url,callback){var http=new XMLHttpRequest;http.open("GET",url,!0),http.responseType="blob",http.onload=function(e){(200==this.status||0===this.status)&&callback(this.response)},http.send()}function getImageData(img,callback){function handleBinaryFile(binFile){var data=findEXIFinJPEG(binFile),iptcdata=findIPTCinJPEG(binFile);img.exifdata=data||{},img.iptcdata=iptcdata||{},callback&&callback.call(img)}if(img.src)if(/^data\:/i.test(img.src)){var arrayBuffer=base64ToArrayBuffer(img.src);handleBinaryFile(arrayBuffer)}else if(/^blob\:/i.test(img.src)){var fileReader=new FileReader;fileReader.onload=function(e){handleBinaryFile(e.target.result)},objectURLToBlob(img.src,function(blob){fileReader.readAsArrayBuffer(blob)})}else{var http=new XMLHttpRequest;http.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";handleBinaryFile(http.response),http=null},http.open("GET",img.src,!0),http.responseType="arraybuffer",http.send(null)}else if(window.FileReader&&(img instanceof window.Blob||img instanceof window.File)){var fileReader=new FileReader;fileReader.onload=function(e){handleBinaryFile(e.target.result)},fileReader.readAsArrayBuffer(img)}}function findEXIFinJPEG(file){var dataView=new DataView(file);if(255!=dataView.getUint8(0)||216!=dataView.getUint8(1))return!1;for(var marker,offset=2,length=file.byteLength;length>offset;){if(255!=dataView.getUint8(offset))return!1;if(marker=dataView.getUint8(offset+1),225==marker)return readEXIFData(dataView,offset+4,dataView.getUint16(offset+2)-2);offset+=2+dataView.getUint16(offset+2)}}function findIPTCinJPEG(file){var dataView=new DataView(file);if(255!=dataView.getUint8(0)||216!=dataView.getUint8(1))return!1;for(var offset=2,length=file.byteLength,isFieldSegmentStart=function(dataView,offset){return 56===dataView.getUint8(offset)&&66===dataView.getUint8(offset+1)&&73===dataView.getUint8(offset+2)&&77===dataView.getUint8(offset+3)&&4===dataView.getUint8(offset+4)&&4===dataView.getUint8(offset+5)};length>offset;){if(isFieldSegmentStart(dataView,offset)){var nameHeaderLength=dataView.getUint8(offset+7);nameHeaderLength%2!==0&&(nameHeaderLength+=1),0===nameHeaderLength&&(nameHeaderLength=4);var startOffset=offset+8+nameHeaderLength,sectionLength=dataView.getUint16(offset+6+nameHeaderLength);return readIPTCData(file,startOffset,sectionLength)}offset++}}function readIPTCData(file,startOffset,sectionLength){for(var fieldValue,fieldName,dataSize,segmentType,segmentSize,dataView=new DataView(file),data={},segmentStartPos=startOffset;startOffset+sectionLength>segmentStartPos;)28===dataView.getUint8(segmentStartPos)&&2===dataView.getUint8(segmentStartPos+1)&&(segmentType=dataView.getUint8(segmentStartPos+2),segmentType in IptcFieldMap&&(dataSize=dataView.getInt16(segmentStartPos+3),segmentSize=dataSize+5,fieldName=IptcFieldMap[segmentType],fieldValue=getStringFromDB(dataView,segmentStartPos+5,dataSize),data.hasOwnProperty(fieldName)?data[fieldName]instanceof Array?data[fieldName].push(fieldValue):data[fieldName]=[data[fieldName],fieldValue]:data[fieldName]=fieldValue)),segmentStartPos++;return data}function readTags(file,tiffStart,dirStart,strings,bigEnd){var entryOffset,tag,i,entries=file.getUint16(dirStart,!bigEnd),tags={};for(i=0;entries>i;i++)entryOffset=dirStart+12*i+2,tag=strings[file.getUint16(entryOffset,!bigEnd)],tags[tag]=readTagValue(file,entryOffset,tiffStart,dirStart,bigEnd);return tags}function readTagValue(file,entryOffset,tiffStart,dirStart,bigEnd){var offset,vals,val,n,numerator,denominator,type=file.getUint16(entryOffset+2,!bigEnd),numValues=file.getUint32(entryOffset+4,!bigEnd),valueOffset=file.getUint32(entryOffset+8,!bigEnd)+tiffStart;switch(type){case 1:case 7:if(1==numValues)return file.getUint8(entryOffset+8,!bigEnd);for(offset=numValues>4?valueOffset:entryOffset+8,vals=[],n=0;numValues>n;n++)vals[n]=file.getUint8(offset+n);return vals;case 2:return offset=numValues>4?valueOffset:entryOffset+8,getStringFromDB(file,offset,numValues-1);case 3:if(1==numValues)return file.getUint16(entryOffset+8,!bigEnd);for(offset=numValues>2?valueOffset:entryOffset+8,vals=[],n=0;numValues>n;n++)vals[n]=file.getUint16(offset+2*n,!bigEnd);return vals;case 4:if(1==numValues)return file.getUint32(entryOffset+8,!bigEnd);for(vals=[],n=0;numValues>n;n++)vals[n]=file.getUint32(valueOffset+4*n,!bigEnd);return vals;case 5:if(1==numValues)return numerator=file.getUint32(valueOffset,!bigEnd),denominator=file.getUint32(valueOffset+4,!bigEnd),val=new Number(numerator/denominator),val.numerator=numerator,val.denominator=denominator,val;for(vals=[],n=0;numValues>n;n++)numerator=file.getUint32(valueOffset+8*n,!bigEnd),denominator=file.getUint32(valueOffset+4+8*n,!bigEnd),vals[n]=new Number(numerator/denominator),vals[n].numerator=numerator,vals[n].denominator=denominator;return vals;case 9:if(1==numValues)return file.getInt32(entryOffset+8,!bigEnd);for(vals=[],n=0;numValues>n;n++)vals[n]=file.getInt32(valueOffset+4*n,!bigEnd);return vals;case 10:if(1==numValues)return file.getInt32(valueOffset,!bigEnd)/file.getInt32(valueOffset+4,!bigEnd);for(vals=[],n=0;numValues>n;n++)vals[n]=file.getInt32(valueOffset+8*n,!bigEnd)/file.getInt32(valueOffset+4+8*n,!bigEnd);return vals}}function getStringFromDB(buffer,start,length){var outstr="";for(n=start;n<start+length;n++)outstr+=String.fromCharCode(buffer.getUint8(n));return outstr}function readEXIFData(file,start){if("Exif"!=getStringFromDB(file,start,4))return!1;var bigEnd,tags,tag,exifData,gpsData,tiffOffset=start+6;if(18761==file.getUint16(tiffOffset))bigEnd=!1;else{if(19789!=file.getUint16(tiffOffset))return!1;bigEnd=!0}if(42!=file.getUint16(tiffOffset+2,!bigEnd))return!1;var firstIFDOffset=file.getUint32(tiffOffset+4,!bigEnd);if(8>firstIFDOffset)return!1;if(tags=readTags(file,tiffOffset,tiffOffset+firstIFDOffset,TiffTags,bigEnd),tags.ExifIFDPointer){exifData=readTags(file,tiffOffset,tiffOffset+tags.ExifIFDPointer,ExifTags,bigEnd);for(tag in exifData){switch(tag){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":exifData[tag]=StringValues[tag][exifData[tag]];break;case"ExifVersion":case"FlashpixVersion":exifData[tag]=String.fromCharCode(exifData[tag][0],exifData[tag][1],exifData[tag][2],exifData[tag][3]);break;case"ComponentsConfiguration":exifData[tag]=StringValues.Components[exifData[tag][0]]+StringValues.Components[exifData[tag][1]]+StringValues.Components[exifData[tag][2]]+StringValues.Components[exifData[tag][3]]}tags[tag]=exifData[tag]}}if(tags.GPSInfoIFDPointer){gpsData=readTags(file,tiffOffset,tiffOffset+tags.GPSInfoIFDPointer,GPSTags,bigEnd);for(tag in gpsData){switch(tag){case"GPSVersionID":gpsData[tag]=gpsData[tag][0]+"."+gpsData[tag][1]+"."+gpsData[tag][2]+"."+gpsData[tag][3]}tags[tag]=gpsData[tag]}}return tags}var root=this,EXIF=function(obj){return obj instanceof EXIF?obj:this instanceof EXIF?void(this.EXIFwrapped=obj):new EXIF(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=EXIF),exports.EXIF=EXIF):root.EXIF=EXIF;var ExifTags=EXIF.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},TiffTags=EXIF.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},GPSTags=EXIF.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},StringValues=EXIF.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},IptcFieldMap={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};EXIF.getData=function(img,callback){return(img instanceof Image||img instanceof HTMLImageElement)&&!img.complete?!1:(imageHasData(img)?callback&&callback.call(img):getImageData(img,callback),!0)},EXIF.getTag=function(img,tag){return imageHasData(img)?img.exifdata[tag]:void 0},EXIF.getAllTags=function(img){if(!imageHasData(img))return{};var a,data=img.exifdata,tags={};for(a in data)data.hasOwnProperty(a)&&(tags[a]=data[a]);return tags},EXIF.pretty=function(img){if(!imageHasData(img))return"";var a,data=img.exifdata,strPretty="";for(a in data)data.hasOwnProperty(a)&&(strPretty+="object"==typeof data[a]?data[a]instanceof Number?a+" : "+data[a]+" ["+data[a].numerator+"/"+data[a].denominator+"]\r\n":a+" : ["+data[a].length+" values]\r\n":a+" : "+data[a]+"\r\n");return strPretty},EXIF.readFromBinaryFile=function(file){return findEXIFinJPEG(file)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return EXIF})}.call(this),define("acnNg/components/input/file/file",["angular","exif-js","acnNg/components/popup/generic/popup","angularTranslate"],function(angular){return angular.module("tq.input.file",["acn.popup","pascalprecht.translate"]).directive("tqInputFileAttachment",["$parse","$window","acnPopup","$translate",function($parse,$window,acnPopup,$translate){return{restrict:"A",link:function(scope,element,attr){function getNormalizedDimensions(width,height){var max={w:parseInt(attr.tqMaxWidth)||850,h:parseInt(attr.tqMaxHeight)||315},ratio=0;return width>max.w&&(ratio=max.w/width,width=max.w,height*=ratio),height>max.h&&(ratio=max.h/height,height=max.h,width*=ratio),{width:Math.floor(width),height:Math.floor(height)}}var inputId="input:file:"+Math.round(1e7*Math.random()),fileFilter=attr.accept,canvas=document.createElement("canvas"),compressionRate=attr.tqDisableCompression?1:.7,inputFile=angular.element('<input type="file" capture="camera" class="tq-file-input" id="'+inputId+'" +'+(fileFilter?'accept="'+fileFilter+'"':"")+" />"),inputLabel=angular.element('<label class="tq-file-input-label" for="'+inputId+'"></label>');inputLabel.append(inputFile),element.append(inputLabel),element.addClass("tq-file-input-container"),inputFile.bind("click",function(clickEvent){$window.navigator.onLine||($translate(["FILE_UPLOAD_DISABLED_OFFLINE_TITLE","FILE_UPLOAD_DISABLED_OFFLINE_BODY"]).then(function(theTranslationsMap){acnPopup.show({title:theTranslationsMap.FILE_UPLOAD_DISABLED_OFFLINE_TITLE,template:theTranslationsMap.FILE_UPLOAD_DISABLED_OFFLINE_BODY})}),clickEvent.preventDefault(),clickEvent.stopPropagation())});inputFile.bind("change",function(changeEvent){var files=changeEvent.target.files?changeEvent.target.files:[];if(files.length&&window.FileReader){var fn=$parse(attr.tqInputFileAttachment),testRegexp=/^image/;if(fileFilter&&(fileFilter=fileFilter.replace(",","|"),fileFilter.replace("*",".*"),testRegexp=new RegExp("^"+fileFilter+"$","i")),testRegexp.test(files[0].type)){var url=window.URL?window.URL:window.webkitURL,image=new Image;image.onload=function(result){var transform,width=image.width,height=image.height;EXIF.getData(image,function(){var orientation=EXIF.getTag(this,"Orientation");8===orientation?(width=image.height,
height=image.width,transform="left"):6===orientation?(width=image.height,height=image.width,transform="right"):3===orientation&&(transform="flip");var newDimensions=getNormalizedDimensions(width,height);canvas.width=width=newDimensions.width,canvas.height=height=newDimensions.height;var ctx=canvas.getContext("2d");ctx.fillStyle="white",ctx.fillRect(0,0,width,height),"left"===transform?(ctx.setTransform(0,-1,1,0,0,height),ctx.drawImage(image,0,0,height,width)):"right"===transform?(ctx.setTransform(0,1,-1,0,width,0),ctx.drawImage(image,0,0,height,width)):"flip"===transform?(ctx.setTransform(1,0,0,-1,0,height),ctx.drawImage(image,0,0,width,height)):(ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(image,0,0,width,height)),ctx.setTransform(1,0,0,1,0,0);var resultUrl=canvas.toDataURL(files[0].type,compressionRate);scope.$apply(function(){changeEvent.dataUrl=resultUrl,changeEvent.dataBase64=resultUrl.replace(/data:.*?;base64,/,""),changeEvent.originalName=files[0].name,fn(scope,{$event:changeEvent})})})},image.src=url.createObjectURL(files[0])}else alert("Selected file has a wrong format")}})}}}])}),define("app/trip/journal/popup",["angular","coreapi","pinterest","youOne/momentbrowser/momentbrowser","components/socialsharing/socialsharing","components/gtm/gtm"],function(angular){return angular.module("mts.postcard.popup",["ui.router","tq.coreapi","ttc.momentbrowser","tq.socialsharing","tq.gtm"]).service("mtsPostcardPopup",function(tqCoreConnector,$ionicPopup,$rootScope,$q,tqLoading,tqErrorListPopup,$http,tqSocialSharingPopup,$timeout,tqGoogleTagManager){this.show=function(postcardObject,isNewObject,readonly,hashtags){var scope=$rootScope.$new();scope.postcard=postcardObject,scope.resultDeferred=$q.defer(),scope.readonly=readonly,scope.isNewObject=isNewObject,scope.resolveOnClose=!0;var buttonsList=null;return scope.isNewObject?buttonsList=[{text:"CREATE",type:"primary",onTap:function(e){e.preventDefault(),scope.executing||(scope.executing=!0,tqLoading.show(),tqCoreConnector.storage.upsert(scope.postcard).then(function(response){if(tqCoreConnector.utils.isResponseSuccessful(response)){if(angular.isArray(response.body)&&response.body.length>0){var newPostcardRecord=response.body[0].record;angular.isObject(newPostcardRecord)&&angular.forEach(newPostcardRecord,function(value,key){scope.postcard.rawRecord[key]=value})}tqGoogleTagManager.push({event:"journal.post",type:"Postcard",userId:tqCoreConnector.user.userInfo.getUserId()}),scope.resultDeferred.resolve(scope.postcard),scope.popup.close()}else scope.popup.close(),tqErrorListPopup.showResponseErrors(response,{subTitle:"Postcard hasn't been created successfully because of next errors: "})},function(){scope.resolveOnClose=!0,scope.popup.close(),$ionicPopup.alert({title:"Operation failed",template:"Postcard creation has been failed. Please check your connection and try again",cssClass:"you-one-popup"})})["finally"](function(){tqLoading.hide(),scope.executing=!1}))}}]:(buttonsList=[{text:"SHARE",type:"primary",onTap:ionic.throttle(function(){scope.popup.close();var id=scope.postcard.rawRecord.Id,imgUrl=(scope.postcard.rawRecord.TQ_Attachment_Link__c,window.accentureONECore.siteUrl+"/TQAttachment?recordID="+id+"&operation=share"),linkShareUrl=window.accentureONECore.siteUrl+"/TQShare?recordID="+id;return $http.get(imgUrl).then(function(response){var imgUrl=response.data&&response.data.result||response.result;tqSocialSharingPopup.show(scope.postcard.rawRecord.Body__c||"",imgUrl,linkShareUrl,hashtags,{cssClass:"share-pop-up"})})},1500)}],readonly||buttonsList.push({text:"DELETE",type:"secondary",onTap:ionic.debounce(function(){if(!scope.executing){scope.executing=!0,scope.resolveOnClose=!1;var cssClassName="mts-delete-postcard-confirm",confirmPromise=$ionicPopup.confirm({title:"Are you sure you want to delete this postcard?",cssClass:cssClassName,cancelType:"primary"}).then(function(affermative){angular.isFunction()?confirmPromise.close():angular.element("."+cssClassName).remove(),affermative?(tqLoading.show(),tqCoreConnector.storage.remove(scope.postcard).then(function(){scope.resultDeferred.resolve("DELETE")})["finally"](function(){tqLoading.hide(),scope.resultDeferred.reject()})):scope.resultDeferred.reject()})["finally"](function(){scope.executing=!1});return confirmPromise}},1500,!0)})),scope.popup=$ionicPopup.show({cssClass:"mts-moment-popup",title:scope.isNewObject?"Create a postcard":"View a postcard",templateUrl:"apps/mts/trip/journal/popup.tpl.html",scope:scope,buttons:buttonsList}),$timeout(function(){var momentPopup=angular.element(".mts-moment-popup");momentPopup.find(".popup-head").append(momentPopup.find(".mts-popup-close"))},100),scope.getAttachUrl=function(){var attachUrl=scope.postcard.rawRecord.TQ_Attachment_Link__c;if(attachUrl&&-1===attachUrl.indexOf("data:")){var attachUrlNoBody=attachUrl.substring(0,attachUrl.lastIndexOf("/")),postCardId=attachUrlNoBody.substring(attachUrlNoBody.lastIndexOf("/")+1);attachUrl=window.accentureONECore.siteUrl+"/servlet/servlet.FileDownload?file="+postCardId}return attachUrl},scope.popup["finally"](function(){scope.resolveOnClose&&scope.resultDeferred.reject()}),scope.resultDeferred.promise}})}),define("app/trip/journal/journal",["angular","coreapi","pinterest","youOne/momentbrowser/momentbrowser","components/socialsharing/socialsharing","components/carousel/carousel","acnNg/components/input/file/file","app/trip/journal/popup","components/gtm/gtm"],function(angular){return angular.module("mts.journal",["ui.router","tq.coreapi","ttc.momentbrowser","tq.socialsharing","tq.carousel","tq.input.file","mts.postcard.popup","tq.gtm"]).config(function($stateProvider){$stateProvider.state("trip.journal",{url:"/journal/:numberOfDay",cache:!0,params:{numberOfDay:{value:null,squash:!0}},views:{"contentView@trip":{templateUrl:"apps/mts/trip/journal/journal.tpl.html",controller:"MtsJournalCtrl"}},resolve:{lengthInDays:function($window,selectedPassenger){var startDate=$window.moment(selectedPassenger.rawRecord.Passenger_Start_Date__c),endDate=$window.moment(selectedPassenger.rawRecord.Passenger_End_Date__c);return endDate.diff(startDate,"days")+1},numberOfSelectedDay:function($window,$stateParams,selectedPassenger,lengthInDays){var numberOfDayPathParam=$window.parseInt($stateParams.numberOfDay,10);if($window.isFinite(numberOfDayPathParam))return numberOfDayPathParam;var startDate=$window.moment(selectedPassenger.rawRecord.Passenger_Start_Date__c),currentDate=$window.moment(),numberOfDayComputed=currentDate.diff(startDate,"days")+1;return numberOfDayComputed=$window._.max([1,numberOfDayComputed]),numberOfDayComputed=$window._.min([lengthInDays,numberOfDayComputed])},selectedDayAsDate:function($window,selectedPassenger,numberOfSelectedDay){var startDate=$window.moment(selectedPassenger.rawRecord.Passenger_Start_Date__c);return startDate.add(numberOfSelectedDay-1,"days")},selectedDaysNotes:function(selectedDayAsDate,selectedPassenger,ttcMomentBrowser){var selectedDayAsTimestamp=selectedDayAsDate.valueOf();return ttcMomentBrowser.getPassengerNotes(selectedPassenger.rawRecord.Id,selectedDayAsTimestamp)},selectedDaysPostcards:function(selectedDayAsDate,selectedPassenger,ttcMomentBrowser){var selectedDayAsTimestamp=selectedDayAsDate.valueOf();return ttcMomentBrowser.getPassengerPostcards(selectedPassenger.rawRecord.Id,selectedDayAsTimestamp)}},data:{functionality:"myBookings.journal",headerView:"apps/mts/trip/journal/header.tpl.html"}})}).controller("MtsJournalCtrl",function($q,tqSocialSharingPopup,$scope,$state,$ionicPopover,$timeout,ttcPopupAbout,selectedPassenger,ttcMomentBrowser,$window,numberOfSelectedDay,selectedDayAsDate,lengthInDays,selectedDaysNotes,selectedDaysPostcards,selectedTourProduct,tqCoreConnector,selectedItineraryItems,tqGoogleTagManager,$translate,acnPopup,$ionicLoading,mtsPostcardPopup,tqCarouselDelegate){angular.extend($scope.$parent.$parent,$state.current.data);var self=this;this.init=function(){self.reSetPageSize(),$scope.inEditMode=!1,$scope.isJournalCircularMenuOpened=!1,$scope.numberOfSelectedDay=numberOfSelectedDay,$scope.notes=selectedDaysNotes,$scope.postcards=selectedDaysPostcards,self.initDaysMap(),self.initSelectedNote(),self.reSetPageBoundaries(),self.renderPagerItems(),self.initCurrentItieraryItem(),self.showAboutPopup(),angular.element($window).bind("resize",self.reRenderPager)},this.initCurrentItieraryItem=function(){var currentItineraryItem=null,shouldContinue=!0;angular.forEach(selectedItineraryItems,function(itineraryItem){shouldContinue&&itineraryItem.rawRecord.Start_Day__c<=numberOfSelectedDay&&numberOfSelectedDay<itineraryItem.rawRecord.Start_Day__c+itineraryItem.rawRecord.Duration__c&&(currentItineraryItem=itineraryItem,shouldContinue=!1)}),$scope.itineraryItem=currentItineraryItem},this.initDaysMap=function(){$scope.monthDaysMap=[0],$scope.weekDaysMap=[0];for(var momentObject=moment.utc(selectedPassenger.rawRecord.Start_Date__c),endUnixTime=moment.utc(selectedPassenger.rawRecord.End_Date__c).unix(),index=0;momentObject.unix()<=endUnixTime;)index++,$scope.monthDaysMap[index]=momentObject.format("DD"),$scope.weekDaysMap[index]=momentObject.format("ddd").toUpperCase(),momentObject.add(1,"day")},this.reRenderPager=function(){self.reSetPageSize(),self.reSetPageBoundaries(),self.renderPagerItems(),$scope.$evalAsync()},this.reSetPageSize=function(){$scope.pageSize=self.getPageSize()},this.getPageSize=function(){var pageSize=angular.element(".mts-journal-content").width()/60;pageSize=Math.round(pageSize);var isEvenNumber=pageSize%2===0;return pageSize=isEvenNumber?pageSize:pageSize-1,pageSize=_.min([pageSize,lengthInDays])},this.initSelectedNote=function(){var firstNote=$window._.first(selectedDaysNotes);angular.isObject(firstNote)?$scope.selectedNote=firstNote:($scope.selectedNote=tqCoreConnector.record.getTrackedObjectRecordInstance("Moment__c"),$scope.selectedNote.rawRecord.Passenger__c=selectedPassenger.rawRecord.Id),angular.isNumber($scope.selectedNote.rawRecord.Moment_Time__c)||($scope.selectedNote.rawRecord.Moment_Time__c=selectedDayAsDate.valueOf());var momentTimeC=$scope.selectedNote.rawRecord.Moment_Time__c,formatTemplate="dddd Do MMMM YYYY";$scope.selectedNote.rawRecord.MomentTimeCFormatted=$window.moment(momentTimeC).format(formatTemplate)},this.canGoToNextPage=function(){return $scope.pageEnd<lengthInDays},this.canGoToPreviousPage=function(){return $scope.pageStart>0},this.goToNextPage=function(){if(self.canGoToNextPage()){var shiftingDistance=null;shiftingDistance=$scope.pageEnd+$scope.pageSize>lengthInDays?lengthInDays-$scope.pageEnd:$scope.pageSize,$scope.pageStart+=shiftingDistance,$scope.pageEnd+=shiftingDistance,self.renderPagerItems()}},this.goToPreviousPage=function(){if(self.canGoToPreviousPage()){var shiftingDistance=$scope.pageStart-$scope.pageSize>=1?$scope.pageSize:$scope.pageStart-1;$scope.pageStart-=shiftingDistance,$scope.pageEnd-=shiftingDistance,self.renderPagerItems()}},this.reSetPageBoundaries=function(){$scope.pageSize>=lengthInDays?($scope.pageStart=1,$scope.pageEnd=lengthInDays):numberOfSelectedDay+$scope.pageSize/2>lengthInDays?($scope.pageStart=lengthInDays-$scope.pageSize+1,$scope.pageEnd=lengthInDays):numberOfSelectedDay-$scope.pageSize/2<1?($scope.pageStart=1,$scope.pageEnd=$scope.pageSize):($scope.pageStart=numberOfSelectedDay-$scope.pageSize/2,$scope.pageEnd=numberOfSelectedDay+$scope.pageSize/2)},this.renderPagerItems=function(){$scope.pagerItems=$window._.range($scope.pageStart,$scope.pageEnd+1)},this.showAboutPopup=function(){ttcPopupAbout.show({title:"About Journal",templateUrl:"apps/mts/trip/journal/aboutJournalPopoupContent.tpl.html",moduleName:"journal"})},this.showSuccessfulSaveDialog=function(){return $translate(["OPERATION_SUCCESSFUL","NOTE_SAVED_OK"]).then(function(theTranslations){return acnPopup.show({title:theTranslations.OPERATION_SUCCESSFUL,template:theTranslations.NOTE_SAVED_OK,cssClass:"you-one-popup"})})},this.showFailedSaveDialog=function(){return $translate(["OPERATION_FAILED","NOTE_SAVED_FAIL_GENERIC"]).then(function(theTranslations){return acnPopup.show({title:theTranslations.OPERATION_FAILED,template:theTranslations.NOTE_SAVED_FAIL_GENERIC,cssClass:"you-one-popup"})})},this.toggleEditMode=function(){$scope.inEditMode=!$scope.inEditMode},this.saveExistingOrNewNote=function(){return tqCoreConnector.storage.upsert($scope.selectedNote).then(function(response){angular.isArray(response.body)&&response.body.length>0&&response.body[0].responseId&&($scope.selectedNote.rawRecord.Id=response.body[0].responseId),$scope.selectedNote.rawRecord&&($scope.selectedNote.dbOrigins=angular.copy($scope.selectedNote.rawRecord)),tqGoogleTagManager.push({event:"journal.post",type:"Note",userId:tqCoreConnector.user.userInfo.getUserId()})}).then($ionicLoading.hide).then(self.showSuccessfulSaveDialog)["catch"](self.showFailedSaveDialog)["finally"]($ionicLoading.hide)["finally"](self.toggleEditMode)},this.cancelEditing=function(){$scope.selectedNote&&$scope.selectedNote.dbOrigins?$scope.selectedNote.rawRecord=angular.copy($scope.selectedNote.dbOrigins):($scope.selectedNote.rawRecord.Title__c="",$scope.selectedNote.rawRecord.Body__c=""),$scope.inEditMode=!1},this.shareNote=function(note){var linkUrl=window.accentureONECore.siteUrl+"/TQShare?recordID="+note.rawRecord.Id;tqSocialSharingPopup.show(note.rawRecord.Body__c||"",null,linkUrl,$scope.hashtags,{cssClass:"share-pop-up"})},$scope.openJournalDayPopover=function($event){$scope.popover.show($event)},$scope.toggleJournalCircularMenu=function(){$scope.isJournalCircularMenuOpened=!$scope.isJournalCircularMenuOpened},$scope.onAddNoteClicked=function($event){},$scope.onEditNoteClicked=function(){$scope.isTripArchived||($scope.inEditMode=!0)},$scope.onSaveNoteClicked=function(){$scope.isTripArchived||($ionicLoading.show(),self.saveExistingOrNewNote())},$scope.getStyleOfPagerItem=function(){var maxWidthInPercents=100/($scope.pageSize+2);return{"max-width":maxWidthInPercents.toString().concat("%")}};var currentTimeForDate=function(date){var resultDate=new Date(date),now=new Date;return resultDate.setHours(now.getHours(),now.getMinutes(),now.getSeconds(),0),resultDate};$scope.createNewPostcardForPhoto=function($event){var postcard=tqCoreConnector.record.getTrackedObjectRecordInstance("Moment__c");postcard.rawRecord.Type__c="PostCard",postcard.rawRecord.TQ_Attachment_Link__c=$event.dataUrl,postcard.rawRecord.TQ_Attachment_FileName__c=$event.originalName||"postcard.jpg",postcard.rawRecord.Moment_Time__c=currentTimeForDate(selectedDayAsDate.valueOf()),postcard.rawRecord.Passenger__c=selectedPassenger.rawRecord.Id,mtsPostcardPopup.show(postcard,!0,$scope.isTripArchived).then(function(newPostcard){$scope.postcards.unshift(newPostcard)})},$scope.goToNextPage=self.goToNextPage,$scope.goToPreviousPage=self.goToPreviousPage,$scope.cancelEditing=self.cancelEditing,$scope.shareNote=self.shareNote,self.init();var journalDelegate=tqCarouselDelegate.$getByHandle("mtsJournalCarousel"),deregisterMethod=null;$timeout(function(){deregisterMethod=journalDelegate.onItemClick(function(id){var selectedPostcard=null,selectedIndex=null;angular.forEach($scope.postcards,function(postCard,index){postCard.rawRecord.Id===id&&(selectedPostcard=postCard,selectedIndex=index)}),null!=selectedPostcard&&mtsPostcardPopup.show(selectedPostcard,!1,$scope.isTripArchived,$scope.hashtags).then(function(action){"DELETE"===action&&($scope.postcards.splice(selectedIndex,1),refreshCarouselWithPostcards($scope.postcards))})})},200);var refreshCarouselWithPostcards=function(postCards){var journalImages=[];angular.forEach(postCards,function(postCard){var attachUrl=postCard.rawRecord.TQ_Attachment_Link__c;if(attachUrl&&-1===attachUrl.indexOf("data:")){var attachUrlNoBody=attachUrl.substring(0,attachUrl.lastIndexOf("/")),postCardId=attachUrlNoBody.substring(attachUrlNoBody.lastIndexOf("/")+1);attachUrl=window.accentureONECore.siteUrl+"/servlet/servlet.FileDownload?file="+postCardId}journalImages.push({id:postCard.rawRecord.Id,source:attachUrl})}),$timeout(function(){journalDelegate.setImages(journalImages)},300)};$scope.$watch("postcards",function(postCards){refreshCarouselWithPostcards(postCards)},!0),$scope.$watch("$destroy",function(){angular.isFunction(deregisterMethod)&&deregisterMethod()})})}),define("components/chatter/comment/comment",["angular","uiRouter","coreapi"],function(angular){return angular.module("tq.chatter.comment",["ui.router","tq.coreapi"]).directive("tqChatterFeedComment",function(tqCoreConnector){return{transclude:!0,restrict:"E",require:"^?tqChatterCommentList",scope:{record:"=",deletable:"&?"},templateUrl:function(attrs,elem){return attrs.templateUrl||"acn-one/acn-ng/components/chatter/comment/comment.tpl.html"},link:function(scope,elem,attrs,tqCommentListController,transcludeFn){transcludeFn(scope,function(transcludedElement){transcludedElement.each(function(index,node){switch(node.nodeName.toLowerCase()){case"tq-chatter-action-buttons":elem.find("#actionButtonsInsert").html(node)}})}),scope.commentListController=tqCommentListController},controller:function($scope){$scope.deletable=!!$scope.deletable(),$scope.currentUserId=tqCoreConnector.user.getId();var isFeedItemOfCurrentUser=function(){return $scope.commentListController&&angular.isFunction($scope.commentListController.isFeedItemOwner)&&$scope.commentListController.isFeedItemOwner()};$scope.deletionPossible=function(){return $scope.deletable&&$scope.commentListController&&angular.isFunction($scope.commentListController.deleteComment)&&($scope.record.rawRecord.CreatedById===$scope.currentUserId||isFeedItemOfCurrentUser())},$scope.deleteComment=function(){$scope.commentListController&&angular.isFunction($scope.commentListController.deleteComment)&&$scope.commentListController.deleteComment($scope.record)}}}})}),define("app/trip/chatter/comments",["angular","coreapi","components/loading/loading","components/chatter/comment/comment"],function(angular){return angular.module("mts.chatter.comments",["ui.router","tq.coreapi","tq.chatter.comment","tq.loading"]).controller("MtsChatterCommentsCtrl",function($scope,tqLoading,tqCoreConnector){angular.isArray($scope.commentsList)||($scope.commentsList=[]),$scope.initList=function(listData){$scope.commentsList=_.clone(listData)},$scope.comment={text:"",isSending:!1},$scope.loadAllComments=function(feedItem){$scope.isLoadingComments=!0,tqLoading.show(),tqCoreConnector.chatter.downloadFeedItemComments(feedItem.rawRecord.Id).then(function(commentsResponse){commentsResponse&&angular.isArray(commentsResponse.comments)&&($scope.commentsList=commentsResponse.comments)},function(error){})["finally"](function(){tqLoading.hide(),$scope.isLoadingComments=!1})},$scope.$watch("record.displayComments",function(newValue){newValue&&$scope.record&&angular.isArray($scope.records)&&angular.forEach($scope.records,function(feedItem){feedItem!=$scope.record&&feedItem.displayComments&&(feedItem.displayComments=!1)})}),$scope.$watch("record.comments",function(newValue,oldValue){if(angular.isArray(newValue)&&newValue!=oldValue){var commentIds=_.pluck($scope.commentsList,"rawRecord.Id");angular.forEach(newValue,function(newComment){_.contains(commentIds,newComment.rawRecord.Id)||$scope.commentsList.push(newComment)}),$scope.commentsList.length<$scope.record.rawRecord.CommentCount&&$scope.initList(newValue)}}),$scope.sendComment=function(comment,feedItem){comment.isSending=!0,tqCoreConnector.chatter.createTextFeedCommentForFeedItem(feedItem.rawRecord.Id,comment.text,feedItem).then(function(newRecord){comment.text="",$scope.commentsList.push(newRecord)},function(error){})["finally"](function(){comment.isSending=!1})}})}),define("youOne/popup/about/about",["angular","coreapi","youOne/terms/terms","acnNg/components/popup/generic/popup"],function(angular){return angular.module("ttc.popup.about",["ionic","ttc.terms","acn.popup"]).service("ttcPopupAbout",function($rootScope,$q,tqCoreConnector,ttcTermsService,acnPopup){this.tempSessionUserChoice={Show_Chatter_About_Notification__c:!0,Show_Profile_About_Notification__c:!0,Show_Journal_About_Notification__c:!0,Show_Itinerary_About_Notification__c:!0,Show_Community_About_Notification__c:!0,Show_MyTravelSpace_About_Notification__c:!0,Show_Horizon_About_Notification__c:!0,Show_Destinations_About_Notification__c:!0},this.show=function(config){config.scope=$rootScope.$new(),config.scope.customContentTpl=config.templateUrl,config.templateUrl="you-one/popup/about/about.tpl.html",config.scope.about={},config.scope.about.turnOffMessage=!1,config.cssClass="you-one-popup popup-about",config.okText="OK",config.okType="button primary",config.scope.turnOffMessageField=this._getTurnOffMessageField(config.moduleName);var that=this;config.onUserConfirmed=function(){that.tempSessionUserChoice[config.scope.turnOffMessageField]=!that.tempSessionUserChoice[config.scope.turnOffMessageField],config.scope.about.turnOffMessage&&tqCoreConnector.user.userInfo.setUserFieldValue(config.scope.turnOffMessageField,!1)},this._showAbout(config)&&(ttcTermsService.termsAndConditionsAreApproved()?acnPopup.show(config):$rootScope.$on("ttcTermsAndPoliciesApproved",function(){acnPopup.show(config)}))},this._showAbout=function(config){return tqCoreConnector.user.userInfo.getUserFieldValue(config.scope.turnOffMessageField)&&this.tempSessionUserChoice[config.scope.turnOffMessageField]?!0:!1},this._getTurnOffMessageField=function(moduleName){var fieldApiName="";switch(moduleName){case"chatter":fieldApiName="Show_Chatter_About_Notification__c";break;case"profile":fieldApiName="Show_Profile_About_Notification__c";break;case"journal":fieldApiName="Show_Journal_About_Notification__c";break;case"itinerary":fieldApiName="Show_Itinerary_About_Notification__c";break;case"community":fieldApiName="Show_Community_About_Notification__c";break;case"myTravelSpace":fieldApiName="Show_MyTravelSpace_About_Notification__c";break;case"horizon":fieldApiName="Show_Horizon_About_Notification__c";break;case"destinations":fieldApiName="Show_Destinations_About_Notification__c"}return fieldApiName}})}),define("app/trip/chatter/chatter",["angular","coreapi","components/loading/loading","components/chatter/comment/comment","acnNg/components/sticky/sticky","app/trip/chatter/comments","youOne/popup/about/about","components/socialsharing/socialsharing","components/gtm/gtm"],function(angular){return angular.module("mts.chatter",["ui.router","tq.coreapi","tq.chatter.comment","tq.loading","tq.gtm","ao.ion-sticky","mts.chatter.comments","ttc.popup.about","tq.socialsharing"]).config(function($stateProvider){$stateProvider.state("trip.chatter",{url:"/chatter",cache:!0,data:{headerView:"apps/mts/trip/chatter/header.tpl.html",functionality:"myBookings.chatter"},views:{"contentView@trip":{templateUrl:"apps/mts/trip/chatter/chatter.tpl.html",controller:"MtsChatterCtrl"}}})}).controller("MtsChatterCtrl",function($scope,$state,ttcPopupAbout,tqCoreConnector,selectedPassenger){"trip.chatter"===$state.current.name&&ttcPopupAbout.show({title:"About Chatter",templateUrl:"apps/mts/trip/chatter/aboutChatterPopupContent.tpl.html",moduleName:"chatter"}),$scope.chatter.chatterFeedType=tqCoreConnector.chatter.FeedType.FeedTypeRecord,selectedPassenger&&selectedPassenger.rawRecord&&($scope.chatter.chatterFeedObjectId=selectedPassenger.rawRecord.Chatter_Group_Id__c)}).controller("MtsChatterSideCtrl",function($scope,$controller,$window){var sideElement=angular.element(".right-switch-block");$scope.displayChatter=sideElement.is(":visible");var onWindowResize=function(){var newValue=sideElement.is(":visible");newValue!=$scope.displayChatter&&($scope.displayChatter=newValue,$scope.$evalAsync())},onResize=ionic.throttle(onWindowResize,150);angular.element($window).bind("resize",onResize),angular.extend(this,$controller("MtsChatterCtrl",{$scope:$scope,selectedPassenger:$scope.passenger})),$scope.$on("$destroy",function(){angular.isFunction(onResize)&&angular.element($window).unbind("resize",onResize)})}).controller("MtsChatterActionsCtrl",function($scope,$http,$ionicLoading,tqSocialSharingPopup,$ionicScrollDelegate){function requestPublicImageUrl(theId){var imgUrl=window.accentureONECore.siteUrl+"/apex/TQAttachment?recordID="+theId+"&operation=share";return $http.get(imgUrl)}$scope.actionButtonsExtended={toggleLike:function(record){$scope.readonlyMode||($ionicLoading.show(),$scope.$parent.actionButtons.toggleLike(record,function(){$ionicLoading.hide()}))},displayLike:function(record){record.displayLikes=!record.displayLikes},displayComments:function(record){(!$scope.readonlyMode||record.rawRecord.CommentCount)&&(record.displayComments=!record.displayComments)},goToCommentsPage:function(record){},getImageLink:function(){},share:function(record,cssClass){var linkShareUrl=window.accentureONECore.siteUrl+"/TQShare?recordID="+record.rawRecord.Id;"TextPost"==record.rawRecord.Type?tqSocialSharingPopup.show(record.rawRecord.Body,null,linkShareUrl,$scope.hashtags,{cssClass:cssClass}):requestPublicImageUrl(record.rawRecord.Id).success(function(response){var imgUrl=response.result;tqSocialSharingPopup.show(record.rawRecord.Body,imgUrl,linkShareUrl,$scope.hashtags,{cssClass:cssClass})})},chatterFormatDate:function(record){return moment(record.rawRecord.CreatedDate).fromNow()}};for(var currentScope=$scope;currentScope!=currentScope.$root;){if(currentScope.hashtags&&($scope.hashtags=currentScope.hashtags),currentScope.isTripArchived||currentScope.isChatterGroupArchived){$scope.readonlyMode=!0;break}currentScope=currentScope.$parent}}).controller("MtsChatterPostController",function(tqCoreConnector,$scope,$timeout,$ionicPopup,tqChatterFeedDelegate,tqPhotoPicker,$ionicLoading,tqGoogleTagManager){$scope.post={},$scope.post.attachmentImageUrl=null;var cleanAttachmentImage=function(){null!=$scope.post.attachmentImageUrl&&tqCoreConnector.device.file.removeFile($scope.post.attachmentImageUrl).then(function(){$scope.post.attachmentImageUrl=null})};$scope.post.removeAttachment=cleanAttachmentImage;var chatterFeedDelegate=tqChatterFeedDelegate.$getByHandle("trip-chatter-feed");$scope.postNewItemInFeed=function(feedItem){chatterFeedDelegate&&chatterFeedDelegate.postNewItemInFeed(feedItem)};var isPostSending=!1;$scope.post.send=function(post){if(!isPostSending){if(_.isEmpty(post.input)&&_.isEmpty($scope.post.attachmentImageUrl))return void $ionicPopup.alert({template:"You need to comment",cssClass:"you-one-popup"});isPostSending=!0,$ionicLoading.show(),tqCoreConnector.chatter.createFeedItemForRecordFeed($scope.chatter.chatterFeedObjectId,post.input,$scope.post.attachmentImageUrl).then(function(feedItem){post.input="",$scope.post.attachmentImageUrl=null,tqGoogleTagManager.push({event:"chatter.post",userId:tqCoreConnector.user.userInfo.getUserId()}),angular.isFunction($scope.postNewItemInFeed)&&$scope.postNewItemInFeed(feedItem)},function(){$ionicPopup.alert({header:"Operation failed",template:"Sending post comment has failed. Please check your connection and try again later.",cssClass:"you-one-popup"})})["finally"](function(){$ionicLoading.hide(),isPostSending=!1})}},$scope.$on("$destroy",function(){cleanAttachmentImage()}),$scope.post.isDisabled=!1,$scope.post.addHashTagAndSend=function(post){if(!$scope.post.isDisabled){$scope.post.isDisabled=!0;var clonedPost=_.clone(post);post.input="",$scope.post.send(clonedPost),$scope.post.isDisabled=!1,$scope.post.hideText={}}},$scope.attachChatterPhoto=function(event){$scope.post.attachmentImageUrl=event.dataUrl},$scope.userCanDeleteAttachment=function(){return null!=$scope.post.attachmentImageUrl&&$scope.post.attachmentImageUrl.length>0},$scope.getAttachmentPreview=function(){return angular.isUndefined($scope.post)||null==$scope.post.attachmentImageUrl?null:$scope.post.attachmentImageUrl},$scope.removeAttachment=function(){angular.isUndefined($scope.post)||null==$scope.post.attachmentImageUrl||($scope.post.attachmentImageUrl=null)}})}),define("app/trip/itinerary/itinerary",["angular","coreapi"],function(angular){return angular.module("mts.itinerary",["ui.router","tq.coreapi","tq.loading","acn.popup"]).config(function($stateProvider){$stateProvider.state("trip.itinerary",{url:"/itinerary",cache:!1,resolve:{itineraryItemReviews:function(selectedPassenger,selectedItineraryItems,tqCoreConnector){var itemIds=[];return angular.isArray(selectedItineraryItems)&&angular.forEach(selectedItineraryItems,function(selectedItineraryItem){itemIds.push(selectedItineraryItem.rawRecord.Id)}),0===itemIds.length?[]:tqCoreConnector.storage.find({objectApiName:"Itinerary_Item_Review__c",where:{$and:[{Passenger__c:{$eq:selectedPassenger.rawRecord.Id}},{Itinerary_Item__c:{$in:itemIds}}]}})}},views:{"contentView@trip":{templateUrl:"apps/mts/trip/itinerary/itinerary.tpl.html",controller:"MtsItineraryCtrl"}},data:{functionality:"myBookings.itinerary",headerView:"apps/mts/trip/itinerary/header.tpl.html",showLoading:!0}})}).controller("MtsItineraryCtrl",function($scope,ttcPopupAbout,ttcTripBrowser,$ionicLoading,selectedPassenger,selectedTourProduct,selectedItineraryItems,itineraryItemReviews,tqCoreConnector,acnPopup,$settings,$ionicScrollDelegate,$timeout,$ionicPosition){$scope.itineraryItems=[],ttcPopupAbout.show({title:"About Itinerary",templateUrl:"apps/mts/trip/itinerary/aboutItineraryPopoupContent.tpl.html",moduleName:"itinerary"});var scrollDelegate=$ionicScrollDelegate.$getByHandle("main-application-scroll"),startDate=selectedPassenger.rawRecord.Passenger_Start_Date__c,currentMoment=moment(startDate);$scope.itineraryItems=selectedItineraryItems,$scope.currentItineraryItem=ttcTripBrowser.getCurrentItineraryItem(startDate,selectedItineraryItems),$scope.itineraryItemsMap={},$scope.itineraryReviewsMap={},$scope.itineraryCouldBeReviewed={},$scope.open=function(index){$scope.selected=index,$scope.cancelItineryItemReview(),$timeout(function(){scrollDelegate.resize()},100)},$scope.cancelItineryItemReview=function(){$scope.newItineryItemReview=null,$scope.selectedInterviewId=null},$scope.isCommentFunctionallityDisabled=!$settings.get("functionality.myBookings.itinerary.comment.enabled",!0),$scope.makeNewItineraryReview=function(itineraryItem,isPositive,postImmediately){var itineraryItemReview=tqCoreConnector.record.getTrackedObjectRecordInstance("Itinerary_Item_Review__c");itineraryItemReview.rawRecord.Passenger__c=selectedPassenger.rawRecord.Id,itineraryItemReview.rawRecord.Itinerary_Item__c=itineraryItem.rawRecord.Id,itineraryItemReview.rawRecord.Rating__c=isPositive?"Like":"Dislike",itineraryItemReview.rawRecord.Comment__c=null,$scope.newItineryItemReview=itineraryItemReview,postImmediately?($scope.itineraryItemThumb(),$scope.selectedInterviewId=null):($scope.selectedInterviewId=itineraryItem.rawRecord.Id,$scope.itineraryReviewPlaceholder="Tell us why you "+(isPositive?"":"didn't ")+"like it")},$scope.itineraryItemThumb=function(){if(null!=$scope.newItineryItemReview){var itemId=$scope.newItineryItemReview.rawRecord.Itinerary_Item__c;acnPopup.show({title:"You will not be able to change your feedback once submitted. Do you want to proceed?",cancelText:"NO",okText:"YES",cssClass:"you-one-confirmation-popup",type:acnPopup.TYPE.CONFIRM}).then(function(affermative){affermative?($ionicLoading.show(),tqCoreConnector.storage.upsert($scope.newItineryItemReview).then(function(response){tqCoreConnector.utils.isResponseSuccessful(response)?($scope.itineraryReviewsMap[itemId]=$scope.newItineryItemReview,$scope.itineraryCouldBeReviewed[itemId]=!1,$scope.cancelItineryItemReview(),$ionicLoading.hide(),acnPopup.show({title:"Thanks",template:"Thank you for your feedback",cssClass:"you-one-popup"})):tqErrorListPopup.showResponseErrors(response,{subTitle:"Itinerary review hasn't been updated successfully because of next errors: "})},function(error){acnPopup.show({title:"Operation failed",template:"Itinerary Review saving operation has been failed. Please check your connection and try again",cssClass:"you-one-popup"})})["finally"](function(){$ionicLoading.hide()})):$scope.newItineryItemReview&&"Like"==$scope.newItineryItemReview.rawRecord.Rating__c&&($scope.newItineryItemReview=null);
})}},$scope.selected=0;var i=0,keepGoing=!0,elementId=null,currentTime=(new Date).getTime();angular.forEach($scope.itineraryItems,function(itineraryItem){keepGoing&&(itineraryItem.rawRecord.Id==$scope.currentItineraryItem.rawRecord.Id?($scope.selected=i,elementId=itineraryItem.rawRecord.Id,keepGoing=!1):i++),currentMoment=window.moment(startDate).add(itineraryItem.rawRecord.Start_Day__c-1,"day"),$scope.itineraryCouldBeReviewed[itineraryItem.rawRecord.Id]=1e3*currentMoment.unix()<=currentTime,$scope.itineraryItemsMap[itineraryItem.rawRecord.Id]=new Date(currentMoment.toDate())}),angular.isArray(itineraryItemReviews)&&angular.forEach(itineraryItemReviews,function(itineraryItemReview){$scope.itineraryReviewsMap[itineraryItemReview.rawRecord.Itinerary_Item__c]=itineraryItemReview,$scope.itineraryCouldBeReviewed[itineraryItemReview.rawRecord.Itinerary_Item__c]=!1});var correlatePosition=function(){if(elementId){var iOS=/iPad|iPhone|iPod/.test(navigator.platform),parentPositionTop=iOS?0:$ionicPosition.position(angular.element(".mts-itinerary-content").parent()).top-48,positionTop=$ionicPosition.position(angular.element("#"+elementId)).top;positionTop&&scrollDelegate.scrollTo(0,positionTop+parentPositionTop,!0)}};$timeout(function(){correlatePosition(),angular.element(".mts-itinerary-map").on("load",function(){correlatePosition()})},500)})}),define("components/chatter/conversation/conversation",["angular","uiRouter","coreapi","components/chatter/feeditem/feeditem","components/chatter/post/post"],function(angular){return angular.module("tq.chatter.conversation",["ui.router","tq.coreapi","tq.chatter.feedItem","tq.chatter.post"]).constant("TQ_CONVERSATION_PAGE_SIZE",10).constant("TQ_MAX_CONVERSATION_PAGE_SIZE",100).service("tqChatterConversationDelegate",ionic.DelegateService(["addItemToConversation","refreshConversation","bindSuccessRefresh"])).directive("tqChatterConversation",function($timeout){return{restrict:"E",templateUrl:"acn-one/acn-ng/components/chatter/feed/feed.tpl.html",transclude:!0,scope:{conversationId:"=?",delegateHandle:"@?",onRefresh:"&?"},link:function(scope,element,attrs,controller,transcludeFn){transcludeFn(scope,function(clone,scope){element.html(clone)})},controller:function($rootScope,$scope,$state,$timeout,$q,tqChatterConversationDelegate,$ionicPopup,tqCoreConnector,TQ_CONVERSATION_PAGE_SIZE,TQ_MAX_CONVERSATION_PAGE_SIZE){var self=this,stopConversationObserving=null,deregisterInstance=null;angular.isString($scope.delegateHandle)&&""!==$scope.delegateHandle&&(deregisterInstance=tqChatterConversationDelegate._registerInstance(this,$scope.delegateHandle)),$scope._initList=function(){$scope.messages=[],$scope.messagesMap={},$scope.page=0,$scope.pagesize=TQ_CONVERSATION_PAGE_SIZE,$scope.nextPageUrl=null,$scope.moreDataCanBeLoaded=!!$scope.conversationId,$scope.lastDeferred=null};var refreshRecordWithNewValues=function(record,newValues){var key;for(key in newValues.rawRecord)_.isEqual(record.rawRecord[key],newValues.rawRecord[key])||(record.rawRecord[key]=newValues.rawRecord[key]);if(newValues.chatterData)for(key in newValues.chatterData)_.isEqual(record.chatterData[key],newValues.chatterData[key])||(record.chatterData[key]=newValues.chatterData[key])},updateRecordInList=function(newRecordValues){var originalRecord=$scope.messagesMap[newRecordValues.rawRecord.Id];originalRecord&&refreshRecordWithNewValues(originalRecord,newRecordValues)},insertRecordToList=function(newRecord,toTheTop){toTheTop=!!toTheTop,$scope.messagesMap[newRecord.rawRecord.Id]||($scope.messagesMap[newRecord.rawRecord.Id]=newRecord,toTheTop?$scope.messages.unshift(newRecord):$scope.messages.push(newRecord))},upsertRecordToList=function(newRecord,toTheTop){$scope.messagesMap[newRecord.rawRecord.Id]?updateRecordInList(newRecord):insertRecordToList(newRecord,toTheTop)};this.addItemToConversation=function(newFeedItem){insertRecordToList(newFeedItem,!0)};var firstLoadExecution=!0,latestMessageDate=null;this.loadMore=$scope.loadMore=function(fullReload){if($scope.moreDataCanBeLoaded){var pageSize=$scope.pagesize;fullReload&&(pageSize=Math.max(Math.min($scope.messages.length,TQ_MAX_CONVERSATION_PAGE_SIZE),TQ_MAX_CONVERSATION_PAGE_SIZE));var conversationPage=fullReload||!$scope.nextPageUrl?$scope.conversationId:$scope.nextPageUrl,currentDeferred=tqCoreConnector.chatter.getConversationPage(conversationPage,pageSize,$scope.oldestMessageDate);$scope.lastDeferred=currentDeferred,currentDeferred.then(function(responseData){if(fullReload)$scope.messages=responseData.messages;else{for(var messages=responseData.messages,index=0;index<messages.length;index++)upsertRecordToList(messages[index]);$scope.page++,responseData.nextPageUrl||($scope.moreDataCanBeLoaded=!1)}$scope.nextPageUrl=responseData.nextPageUrl,$scope.latestMessageDate||($scope.latestMessageDate=responseData.latestMessageDate),latestMessageDate=responseData.latestMessageDate,$scope.oldestMessageDate=responseData.oldestMessageDate,angular.isFunction($scope.onRefresh)&&firstLoadExecution&&$scope.onRefresh({$response:responseData}),$scope.$broadcast("scroll.infiniteScrollComplete")},function(error){$scope.lastDeferred==currentDeferred&&($scope.moreDataCanBeLoaded=!1,$scope.nextPageUrl=null,$scope.$broadcast("scroll.infiniteScrollComplete"))})["finally"](function(){$scope.lastDeferred==currentDeferred&&(firstLoadExecution&&!stopConversationObserving&&tqCoreConnector.config.isOnlineOnlyEnabled()&&self.initializeObserving(latestMessageDate),firstLoadExecution=!1)})}},this.refreshWithUpdates=function(updatesData){if(updatesData.messages.length>=TQ_MAX_CONVERSATION_PAGE_SIZE||updatesData.messages.length>0&&0===$scope.messages.length||updatesData.messages.length>$scope.messages.length)$scope._initList(),this.loadMore();else{for(var index=updatesData.messages.length-1;index>=0;index--)upsertRecordToList(updatesData.messages[index],!0);$scope.$evalAsync()}angular.isFunction($scope.onRefresh)&&$scope.onRefresh({$response:updatesData})},$scope._initList(),this.initializeObserving=function(latestMessageDate){var startCallback=function(){},successCallback=function(event,response){self.refreshWithUpdates(response)},failCallback=function(error){};stopConversationObserving=tqCoreConnector.chatter.startConversationObserving($scope.conversationId,{when:"every 20 seconds",latestMessageDate:latestMessageDate},startCallback,successCallback,failCallback)},this.refreshConversation=function(restartObserver){$scope._initList(),restartObserver&&angular.isFunction(stopConversationObserving)&&(stopConversationObserving(),stopConversationObserving=null),$scope.conversationId&&(restartObserver&&this.initializeObserving(),this.loadMore())},$scope.shouldLoadMore=function(){return!firstLoadExecution&&$scope.moreDataCanBeLoaded},$scope.$watch(function(){return $scope.conversationId},function(newValue,oldValue){(newValue!=oldValue||newValue!=$scope.conversationId)&&($scope.conversationId=newValue,self.refreshConversation(!tqCoreConnector.config.isOnlineOnlyEnabled()))}),this.refreshConversation(!tqCoreConnector.config.isOnlineOnlyEnabled()),$scope.$on("$destroy",function(){angular.isFunction(stopConversationObserving)&&stopConversationObserving(),angular.isFunction(deregisterInstance)&&(deregisterInstance(),deregisterInstance=null)})}}})}),define("app/trip/conversation/conversation",["angular","coreapi","components/chatter/conversation/conversation","components/loading/loading","components/gtm/gtm"],function(angular){return angular.module("mts.community.conversation",["ui.router","tq.coreapi","tq.loading","tq.chatter.conversation","tq.gtm"]).config(function($stateProvider){$stateProvider.state("trip.conversation",{url:"/community/conversation/:memberId",cache:!0,resolve:{recipient:function(tqCoreConnector,$stateParams){return tqCoreConnector.storage.findOne({objectApiName:"User",where:{Id:{$eq:$stateParams.memberId}}})},conversationObject:function(tqCoreConnector,$stateParams,$state){return $state.$current.data&&$state.$current.data.conversationObject?$state.$current.data.conversationObject:tqCoreConnector.storage.findOne({fields:["Id","Receiver__c","Sender__c","Conversation_Id__c","Last_Message_Datetime__c","Last_Seen_Message_Datetime__c","Is_Sender_Muted__c","Unread_Messages_Count__c"],objectApiName:"Community_Conversation__c",where:{Sender__c:{$eq:$stateParams.memberId},Receiver__c:{$eq:tqCoreConnector.user.getId()},IsDeleted:{$eq:!1}}})}},views:{"contentView@trip":{templateUrl:"apps/mts/trip/conversation/conversation.tpl.html",controller:"MtsConversationCtrl"}},data:{functionality:"myBookings.community",sideContentView:"apps/mts/trip/conversation/conversation.side.tpl.html"}})}).controller("MtsConversationCtrl",function($scope,ttcPopupAbout,selectedPassenger,$stateParams,recipient,tqCoreConnector,tqChatterConversationDelegate,$ionicPopup,tqErrorListPopup,$ionicScrollDelegate,conversationObject,$interval,tqGoogleTagManager,$timeout,$window){$scope.recipientId=$stateParams.memberId,$scope.recipient=recipient,$scope.conversationObject=conversationObject,$scope.conversationId=conversationObject?conversationObject.rawRecord.Conversation_Id__c:null,$scope.conversationLoading=!1,$scope.conversationMuted=!1,$scope.message={text:""};var intervalPromise=!1,conversationDelegate=tqChatterConversationDelegate.$getByHandle("trip-conversation"),loadConversationSettings=function(){$scope.conversationLoading=!0,tqCoreConnector.storage.findOne({fields:["Id","Receiver__c","Sender__c","Conversation_Id__c","Last_Message_Datetime__c","Last_Seen_Message_Datetime__c","Is_Sender_Muted__c","Unread_Messages_Count__c"],objectApiName:"Community_Conversation__c",where:{Sender__c:{$eq:$scope.recipientId},Receiver__c:{$eq:tqCoreConnector.user.getId()},IsDeleted:{$eq:!1}}}).then(function(conversationObject){conversationObject&&($scope.conversationObject=conversationObject,conversationObject.rawRecord.Conversation_Id__c&&!$scope.conversationId&&($scope.conversationId=conversationObject.rawRecord.Conversation_Id__c),$scope.conversationId&&($interval.cancel(intervalPromise),intervalPromise=null))})["finally"](function(){$scope.conversationLoading=!1})};$scope.conversationId||(intervalPromise=$interval(loadConversationSettings,1e4)),$scope.$on("mts-conversation-muted",function($event,args){$scope.conversationObject&&$scope.conversationObject.rawRecord.Id==args.id&&($scope.conversationObject.rawRecord.Is_Sender_Muted__c=args.muted)}),$scope.$on("mts-conversation-user-muted",function($event,args){$scope.conversationMuted=args.muted}),$scope.sendPrivateMessage=function(message){message.isSending||(message.isSending=!0,tqCoreConnector.chatter.sendPrivateMessage(message.text,$scope.recipientId,$scope.conversationId).then(function(privateMessage){privateMessage.rawRecord.ConversationId&&!$scope.conversationId&&($scope.conversationId=privateMessage.rawRecord.ConversationId),message.text="",conversationDelegate.addItemToConversation(privateMessage),$ionicScrollDelegate.scrollTop(!0),tqGoogleTagManager.push({event:"message.direct",userId:tqCoreConnector.user.userInfo.getUserId()})},function(){$ionicPopup.alert({header:"Operation failed",template:"We're sorry there has been a problem delivering your message, please try again later",cssClass:"you-one-popup"})})["finally"](function(){message.isSending=!1}))},$scope.setLastSeenDate=function(newDate){if($scope.conversationObject){$scope.conversationObject.rawRecord.Last_Seen_Message_Datetime__c=newDate,$scope.conversationObject.rawRecord.Unread_Messages_Count__c=0;var messageToSend=angular.copy($scope.conversationObject);delete messageToSend.rawRecord.Last_Message_Datetime__c,tqCoreConnector.storage.upsert(messageToSend)}},$scope.setNewLatestSeenDate=function(updateResponse){$scope.conversationObject&&updateResponse.latestMessageDate&&$scope.setLastSeenDate(updateResponse.latestMessageDate)},$scope.isReceiverMuted=function(){return $scope.conversationMuted||$scope.conversationObject&&$scope.conversationObject.rawRecord.Is_Sender_Muted__c},$scope.getPlaceholderMessage=function(){return $scope.isReceiverMuted()?"You cannot send messages to this user, because conversation is muted":"Type your private message here..."},$scope.doTextAreaFocus=function(){var isIOS=/iPhone|iPod/.test(navigator.userAgent);isIOS&&$timeout(function(){$window.scrollBy(0,30)},800)},$scope.$on("$destroy",function(){intervalPromise&&($interval.cancel(intervalPromise),intervalPromise=null)})})}),define("app/trip/community/community",["angular","coreapi","components/loading/loading","app/trip/conversation/conversation"],function(angular){return angular.module("mts.community",["ui.router","tq.coreapi","tq.loading","mts.community.conversation"]).config(function($stateProvider){$stateProvider.state("trip.community",{url:"/community",cache:!0,views:{"contentView@trip":{templateUrl:"apps/mts/trip/community/community.tpl.html",controller:"MtsCommunityCtrl"}},data:{functionality:"myBookings.community"}})}).controller("MtsCommunityCtrl",function($scope,ttcPopupAbout,$state,selectedPassenger,travelDirector,tqCoreConnector,$ionicPopup,tqErrorListPopup,$interval,$stateParams){var self=this;ttcPopupAbout.show({title:"About Community",templateUrl:"apps/mts/trip/community/aboutCommunityPopoupContent.tpl.html",moduleName:"community"}),$scope.communityList=[],$scope.communityMap={},$scope.areFollowersLoading=!1,this.recalculateUnreadMessagesCount=function(stateParams){stateParams||(stateParams=$stateParams);var totalUnreadCount=0;angular.forEach($scope.communityList,function(member){member.conversationData&&member.conversationData.rawRecord.Unread_Messages_Count__c&&member.rawRecord.SubscriberId!=stateParams.memberId&&!member.conversationData.rawRecord.Is_Sender_Muted__c&&(totalUnreadCount+=member.conversationData.rawRecord.Unread_Messages_Count__c)}),angular.isFunction($scope.setUnreadMessagesCount)&&$scope.setUnreadMessagesCount(totalUnreadCount)},this.getFollowersList=function(tripId){if($state.$current.data&&$state.$current.data.communityMap)return $scope.communityMap=$state.$current.data.communityMap,$scope.communityList=_.values($scope.communityMap),self.recalculateUnreadMessagesCount(),void self.sortCommunityArray();$scope.areFollowersLoading=!0;var currentUserId=tqCoreConnector.user.getId();return tqCoreConnector.chatter.getFollowersList(tripId).then(function(chatterFollowers){return angular.isArray(chatterFollowers)&&angular.forEach(chatterFollowers,function(chatterFollower){travelDirector&&chatterFollower.rawRecord.SubscriberId==travelDirector.rawRecord.Id||chatterFollower.rawRecord.SubscriberId==currentUserId||($scope.communityMap[chatterFollower.rawRecord.SubscriberId]=chatterFollower)}),$scope.communityList=_.values($scope.communityMap),$scope.communityList}).then(function(){return self.downloadCommunityConversationData(tripId).then(function(){self.setDefaultConversationData()})})["finally"](function(){$scope.areFollowersLoading=!1})},this.downloadCommunityConversationData=function(){var conversationElement,currentUserId=tqCoreConnector.user.getId(),communityQuery={objectApiName:"Community_Conversation__c",fields:["Id","Receiver__c","Sender__c","Last_Seen_Message_Datetime__c","Is_Sender_Muted__c","Conversation_Id__c","Unread_Messages_Count__c","Last_Message_Datetime__c"],where:{$or:[{Sender__c:{$eq:currentUserId}},{Receiver__c:{$eq:currentUserId}}],IsDeleted:{$eq:!1}}};return this.conversationDataDeferred=tqCoreConnector.storage.find(communityQuery).then(function(conversationObjects){angular.forEach(conversationObjects,function(conversationObject){conversationObject.rawRecord.Sender__c===currentUserId&&(conversationElement=$scope.communityMap[conversationObject.rawRecord.Receiver__c],conversationElement&&(conversationElement.blockedByCommunityUser=conversationObject.rawRecord.Is_Sender_Muted__c,$stateParams.memberId==conversationElement.rawRecord.SubscriberId&&$scope.$root.$broadcast("mts-conversation-user-muted",{muted:conversationElement.blockedByCommunityUser}))),conversationObject.rawRecord.Receiver__c===currentUserId&&$scope.communityMap[conversationObject.rawRecord.Sender__c]&&($scope.communityMap[conversationObject.rawRecord.Sender__c].conversationData=conversationObject)}),self.recalculateUnreadMessagesCount(),self.sortCommunityArray(),$scope.$evalAsync()})["finally"](function(){self.conversationDataDeferred=null}),this.conversationDataDeferred},this.sortCommunityArray=function(){$scope.communityList.sort(function(obj1,obj2){if(!(obj1.conversationData&&obj1.conversationData.rawRecord.Last_Message_Datetime__c||obj2.conversationData&&obj2.conversationData.rawRecord.Last_Message_Datetime__c))return obj1.rawRecord.Id<obj2.rawRecord.Id?1:-1;if(!obj1.conversationData||!obj1.conversationData.rawRecord.Last_Message_Datetime__c)return 1;if(!obj2.conversationData||!obj2.conversationData.rawRecord.Last_Message_Datetime__c)return-1;var time1=new Date(obj1.conversationData.rawRecord.Last_Message_Datetime__c).getTime(),time2=new Date(obj2.conversationData.rawRecord.Last_Message_Datetime__c).getTime();return time2-time1})},this.createConversationDataForCommunityMember=function(communityMember){var currentUserId=tqCoreConnector.user.getId(),conversationData=tqCoreConnector.record.getTrackedObjectRecordInstance("Community_Conversation__c");conversationData.rawRecord.Receiver__c=currentUserId,conversationData.rawRecord.Sender__c=communityMember.userData.Id,conversationData.rawRecord.Is_Sender_Muted__c=!1,conversationData.rawRecord.Unread_Messages_Count__c=0,communityMember.conversationData=conversationData},this.setDefaultConversationData=function(){angular.forEach($scope.communityMap,function(communityMember){communityMember.conversationData||self.createConversationDataForCommunityMember(communityMember)})},this.muteDeferred=null,this.toggleMute=function(communityMember){communityMember.conversationData||this.createConversationDataForCommunityMember(communityMember);var conversationData=communityMember.conversationData;if(!conversationData.isLoading)return conversationData.rawRecord.Is_Sender_Muted__c=!conversationData.rawRecord.Is_Sender_Muted__c,conversationData.isLoading=!0,this.muteDeferred=tqCoreConnector.storage.upsert(conversationData).then(function(response){tqCoreConnector.utils.isResponseSuccessful(response)?$scope.$root.$broadcast("mts-conversation-muted",{id:conversationData.rawRecord.Id,muted:conversationData.rawRecord.Is_Sender_Muted__c}):(conversationData.rawRecord.Is_Sender_Muted__c=!conversationData.rawRecord.Is_Sender_Muted__c,tqErrorListPopup.showResponseErrors(response,{subTitle:"Operation hasn't been finished successfully because of next errors: "}))},function(errorResponse){conversationData.rawRecord.Is_Sender_Muted__c=!conversationData.rawRecord.Is_Sender_Muted__c,$ioinicPopup.alert({title:"Operation failed",template:"Unabled to upload record please try again later"})})["finally"](function(){self.muteDeferred=null,delete conversationData.isLoading}),this.muteDeferred},this.isConversationForCommunityMemberAvailable=function(conversationMember){return!(conversationMember.blockedByCommunityUser||conversationMember.conversationData&&conversationMember.conversationData.rawRecord.Is_Sender_Muted__c)},$scope.toggleMute=function(communityMember,$event){self.toggleMute(communityMember),$event&&$event.stopPropagation()},$scope.getCommunityMemberClass=function(communityMember){return communityMember&&communityMember.conversationData?communityMember.conversationData.isLoading?"icon ion-refresh":communityMember.conversationData.rawRecord.Is_Sender_Muted__c?"icon-mts-volume-mute2 muted":"icon-mts-volume-mute2":"icon-mts-volume-mute2"},$scope.openConversation=function($event,communityMember){self.isConversationForCommunityMemberAvailable(communityMember)||$event.preventDefault()},$scope.isSelectedConversation=function(communityMember){return communityMember.IsSelected||communityMember.userData.Id==$stateParams.memberId};var intervalPromise=null;selectedPassenger&&selectedPassenger.rawRecord&&(this.getFollowersList(selectedPassenger.rawRecord.Tour_Instance_Id__c),intervalPromise=$interval(function(){self.muteDeferred||self.downloadCommunityConversationData()},1e4)),$scope.$on("$stateChangeStart",function(event,newState,newStateParams){if("trip.conversation"==newState.name&&!_.isEmpty($scope.communityMap)&&(newState.data.communityMap=$scope.communityMap,$scope.communityMap[newStateParams.memberId])){var conversationMember=$scope.communityMap[newStateParams.memberId];conversationMember.conversationData&&(newState.data.conversationData=conversationMember.conversationData)}}),$scope.$on("$stateChangeSuccess",function(event,newState,newStateParams){"trip.conversation"!=newState.name||_.isEmpty($scope.communityList)||self.recalculateUnreadMessagesCount(newStateParams)}),$scope.$on("$destroy",function(){intervalPromise&&($interval.cancel(intervalPromise),intervalPromise=null)})}).controller("MtsRightCommunityListCtrl",function($scope,$controller){angular.extend(this,$controller("MtsCommunityCtrl",{$scope:$scope,selectedPassenger:$scope.passenger,selectedTourProduct:$scope.tourProduct,travelDirector:$scope.travelDirector}))})}),define("app/components/stickytab/stickytab",["angular"],function(angular){return angular.module("mts.stickytab",[]).directive("mtsStickyTab",function($window,$timeout){return{restrict:"AC",require:"^$ionicScroll",link:function(scope,element,attr,$ionicScroll){var ionContent=angular.element($ionicScroll.element),scrollDiv=ionContent.children(".scroll"),originalParent=element.parent(),elementVisible=element.is(":visible"),scrollEndTimeout=null,elementFixed=!1;element.css("position","relative");var stickyTop=attr.stickyTop?parseInt(attr.stickyTop):100;scope.$watch(function(){return ionContent.height()-originalParent.offset().top+ionContent.offset().top},function(newValue,oldValue){newValue==oldValue||elementFixed||element.height(newValue)});var onWindowResize=function(){var newVisibleValue=element.is(":visible");newVisibleValue&&(elementVisible?onScrollComplete():updateStickyPositionOnShow()),elementVisible=newVisibleValue},onIonContentResize=function(){$timeout(function(){element.is(":visible")&&updateStickyPositionOnShow()},220)},onScrollStart=function(){elementFixed||(element.height(Math.min(scrollDiv.height(),window.outerHeight)),element.height()<100&&element.height(2e3))},onScrollComplete=function(){elementFixed||element.height(ionContent.height()-originalParent.offset().top+ionContent.offset().top)},makeElementFixed=function(){elementFixed=!0;var width=element.width();ionContent.append(element),element.addClass("sticky-fixed"),element.css({position:"absolute",top:stickyTop+"px",bottom:0,width:width+"px",height:"",right:0})},makeElementRelative=function(){elementFixed=!1,element.removeClass("sticky-fixed"),originalParent.append(element),element.css({position:"relative",top:"",bottom:"",width:"",right:""})},updateStickyPosition=function(){elementFixed?originalParent.offset().top>ionContent.offset().top+stickyTop&&(makeElementRelative(),onScrollStart()):originalParent.offset().top-ionContent.offset().top<stickyTop&&makeElementFixed()},updateStickyPositionOnShow=function(){elementFixed?(originalParent.offset().top>ionContent.offset().top+stickyTop&&makeElementRelative(),onScrollComplete()):originalParent.offset().top-ionContent.offset().top<stickyTop&&makeElementFixed()},onResize=ionic.throttle(onWindowResize,150),throttleUpdateStickyPostion=ionic.throttle(updateStickyPosition,70),onScroll=function(){elementVisible&&(scrollEndTimeout?clearTimeout(scrollEndTimeout):onScrollStart(),throttleUpdateStickyPostion(),scrollEndTimeout=setTimeout(function(){onScrollComplete(),scrollEndTimeout=null},100))};angular.element($window).bind("resize",onResize),ionContent.bind("scroll-resize",onIonContentResize),ionContent.bind("scroll",onScroll),scope.$on("$destroy",function(){angular.isFunction(onResize)&&angular.element($window).unbind("resize",onResize),angular.isFunction(onScroll)&&ionContent.unbind("scroll",onScroll),angular.isFunction(onIonContentResize)&&ionContent.unbind("scroll-resize",onIonContentResize)})}}})}),define("app/trip/trip",["angular","coreapi","components/loading/loading","components/gtm/gtm","ionic","ionicMaterial","youOne/selectedtrip/selectedtrip","app/trip/overview/overview","app/trip/journal/journal","app/trip/chatter/chatter","app/trip/itinerary/itinerary","app/trip/community/community","app/components/stickytab/stickytab"],function(angular){return angular.module("mts.trip",["ui.router","ionic-material","tq.coreapi","tq.loading","tq.gtm","ttc.selectedtrip","mts.stickytab","mts.overview","mts.journal","mts.itinerary","mts.chatter","mts.community"]).config(function($stateProvider){$stateProvider.state("trip",{abstract:!0,url:"/trip/:id",templateUrl:"apps/mts/trip/layout.tpl.html",controller:"MtsTripCtrl",cache:!1,resolve:{selectedPassenger:function($state,$stateParams,ttcSelectedTrip,$ionicPopup){return ttcSelectedTrip.loadSelectedPassenger($stateParams.id)["catch"](function(error){$ionicPopup.alert({title:"Cannot open selected trip because passenger is not found",cssClass:"you-one-popup"})})},selectedTourProduct:function(ttcSelectedTrip,selectedPassenger,$ionicPopup){return selectedPassenger?ttcSelectedTrip.loadTourProduct(selectedPassenger.rawRecord.Tour_Product__c)["catch"](function(error){$ionicPopup.alert({title:"Cannot open selected trip because tour product for trip is not found",cssClass:"you-one-popup"})}):void 0},selectedItineraryItems:function(ttcSelectedTrip,selectedTourProduct,$ionicPopup){return ttcSelectedTrip.loadItineraryItems(selectedTourProduct)["catch"](function(error){$ionicPopup.alert({title:"Cannot find the itinerary items related to the current tour product",cssClass:"you-one-popup"})})},selectedPreRegistration:function(tqCoreConnector,selectedPassenger){return tqCoreConnector.storage.findOne({fields:["Check_In_Completed_Date__c","Express_Check_In__c"],objectApiName:"Pre_Registration__c",where:{Id:{$eq:selectedPassenger.rawRecord.Pre_Registration__c}}})["catch"](function(error){})},travelDirector:function($state,selectedPassenger,tqCoreConnector){return tqCoreConnector.storage.findOne({objectApiName:"User",where:{Id:{$eq:selectedPassenger.rawRecord.Travel_Director__c}}})["catch"](function(error){})}},data:{headerView:"apps/mts/trip/header.tpl.html",sideContentView:"apps/mts/trip/chatter/chatter.side.tpl.html",parentFunctionality:"myBookings",showLoading:!0,tabs:[{name:"Overview",state:"trip.overview"},{name:"Chatter",state:"trip.chatter",cssClass:"small-layout-only",functionality:"myBookings.chatter"},{name:"Itinerary",state:"trip.itinerary",functionality:"myBookings.itinerary"},{name:"Journal",state:"trip.journal",functionality:"myBookings.journal"},{name:"Community",state:"trip.community",functionality:"myBookings.community",cssClass:"mts-community-navigation-tab",badgeValue:0}]}})}).controller("MtsTripCtrl",function($rootScope,$scope,$stateParams,tqCoreConnector,selectedPassenger,selectedTourProduct,selectedPreRegistration,travelDirector,$ionicPopup,$interval,$translate,$state,$settings,tqGoogleTagManager,$timeout){$scope.passengerId=$stateParams.id,$scope.passenger=selectedPassenger,$scope.tourProduct=selectedTourProduct,$scope.preRegistration=selectedPreRegistration,$scope.travelDirector=travelDirector,$scope.chatter={},this.initializeHashtags=function(tourProduct){$scope.hashtags=null;var hashtags=[],joinCharacter=" ";angular.forEach([tourProduct.rawRecord.Hashtags__c,$settings.get("brandSettings.hashtags")],function(hashtagValue){hashtagValue&&""!==hashtagValue&&(-1===hashtagValue.indexOf("#")&&(hashtagValue="#"+hashtagValue.trim()),-1!==hashtagValue.indexOf(",")&&(joinCharacter=", "),hashtags.push(hashtagValue))}),hashtags.length>0&&($scope.hashtags=hashtags.join(joinCharacter))};var monthBeforeArchiving=$settings.get("trip.monthCountBeforeArchiving",6),acriveTime=moment().add(-monthBeforeArchiving,"month").toDate().getTime(),appSettings=$settings.get("appSettings"),chatterGroupArchivingTime=moment().add(-appSettings.daysToArchive||30,"day").toDate().getTime(),chatterGroupActivationTime=moment().add(appSettings.daysToActivate||30,"day").toDate().getTime(),daysToArchive=appSettings.daysToArchive||30;60>daysToArchive?$scope.archiveTimeText=daysToArchive+" days":$scope.archiveTimeText=Math.round(daysToArchive/30)+" months",$scope.isTripArchived=new Date(selectedPassenger.rawRecord.Passenger_End_Date__c).getTime()<acriveTime,$scope.isChatterGroupArchived=null==selectedPassenger.rawRecord.Chatter_Group_Id__c||new Date(selectedPassenger.rawRecord.Passenger_End_Date__c).getTime()<chatterGroupArchivingTime||new Date(selectedPassenger.rawRecord.Passenger_Start_Date__c).getTime()>chatterGroupActivationTime,$scope.getChatterAvailabilityMessage=function(){return new Date(selectedPassenger.rawRecord.Passenger_End_Date__c).getTime()<chatterGroupArchivingTime?"You cannot make posts to that "+$translate.instant("TRIP_LOWER")+" group, because it has been already archived":new Date(selectedPassenger.rawRecord.Passenger_Start_Date__c).getTime()>chatterGroupActivationTime?"You cannot make posts for that "+$translate.instant("TRIP_LOWER")+" until it's activated":$scope.isTripArchived?"You cannot make posts for archived "+$translate.instant("TRIP_LOWER"):null==selectedPassenger.rawRecord.Chatter_Group_Id__c?"Chatter is not available because there is no Chatter Group associated with that "+$translate.instant("TRIP_LOWER"):"Type your comment here..."},$scope.exploreText=function(){return $scope.tourProduct.rawRecord.Description__c&&""!==$scope.tourProduct.rawRecord.Description__c?"Explore "+$scope.tourProduct.rawRecord.Description__c:""};var startOfTheDay=new Date(moment().startOf("day")).getTime();$scope.isPastTrip=new Date(selectedPassenger.rawRecord.Passenger_End_Date__c).getTime()<startOfTheDay,$scope.isFutureTrip=startOfTheDay<new Date(selectedPassenger.rawRecord.Passenger_Start_Date__c).getTime(),$scope.isCurrentTrip=!$scope.isPastTrip&&!$scope.isFutureTrip;var tripTime="During Trip";$scope.isPastTrip?tripTime="Before Trip":$scope.isFutureTrip&&(tripTime="After Trip"),tqGoogleTagManager.push({event:"tour.use",tourProductId:selectedTourProduct.rawRecord.Id,passengerId:selectedPassenger.rawRecord.Id,time:tripTime,userId:tqCoreConnector.user.userInfo.getUserId()}),$scope.fullHeightMap=!1,$scope.toggleMap=function(){if(window.innerWidth<767)$scope.fullHeightMap=!$scope.fullHeightMap;else{$scope.fullHeightMap=!1;var $popupScope=$rootScope.$new();$popupScope.tourProduct=$scope.tourProduct,$popupScope.fullHeightMap=!0,$popupScope.modalMap=!0;var isIE=window.navigator.userAgent.indexOf("MSIE ")>0||window.navigator.userAgent.indexOf("Trident/")>0||window.navigator.userAgent.indexOf("Edge/")>0,cssClassAdd=isIE?"itinerary-popup-ie":"",myPopup=$ionicPopup.show({title:$scope.tourProduct.rawRecord.Product_Name__c,cssClass:"you-one-popup itinerary-popup "+cssClassAdd,subTitle:"",templateUrl:"apps/mts/trip/itinerary/header.tpl.html",scope:$popupScope,buttons:[{text:"OK",type:"primary",onTap:function(e){myPopup.close()}}]});$timeout(function(){var popup=angular.element(".itinerary-popup .popup");popup.css("opacity","1 !important"),isIE&&popup.find(".popup-body").css("max-height",popup.innerHeight()-100+"px")},200)}},$scope.monthDay=function(date){return moment(date).format("DD")},$scope.weekDay=function(date){return moment(date).format("ddd")};var tabData=null;angular.isArray($scope.state.data.tabs)&&angular.forEach($scope.state.data.tabs,function(tab){"trip.community"==tab.state&&(tabData=tab)}),$scope.setUnreadMessagesCount=function(messagesCount){tabData&&(tabData.badgeValue=messagesCount)};var intervalPromise=null,senderIdsList=[],loadUnreadMessagesCount=function(){"trip.community"!=$state.name&&"trip.conversation"!=$state.name&&tqCoreConnector.storage.find({fields:["SUM(Unread_Messages_Count__c)"],objectApiName:"Community_Conversation__c",where:{Receiver__c:{$eq:tqCoreConnector.user.getId()},Sender__c:{$in:senderIdsList},Is_Sender_Muted__c:{$eq:!1}}}).then(function(records){records&&$scope.setUnreadMessagesCount(records[0].rawRecord.expr0);
})};tabData&&selectedPassenger?tqCoreConnector.chatter.getFollowersList(selectedPassenger.rawRecord.Tour_Instance_Id__c).then(function(chatterFollowers){angular.isArray(chatterFollowers)&&(angular.forEach(chatterFollowers,function(chatterFollower){senderIdsList.push(chatterFollower.rawRecord.SubscriberId)}),senderIdsList.length>0&&(intervalPromise=$interval(loadUnreadMessagesCount,6e4),loadUnreadMessagesCount()))}):selectedPassenger.rawRecord.Chatter_Group_Id__c||$ionicPopup.alert({title:"There was no assigned travel chatter group for this "+$translate.instant("TRIP_LOWER"),cssClass:"you-one-popup",template:"You cannot use Chatter and Community conversation for this "+$translate.instant("TRIP_LOWER")}),this.initializeHashtags(selectedTourProduct),$scope.$on("$destroy",function(){intervalPromise&&$interval.cancel(intervalPromise)})})}),define("youOne/preferenceslayout/preferenceslayout",["angular","coreapi"],function(angular){return angular.module("ttc.preferences.layout",["tq.coreapi"]).service("ttcPreferencesLayout",function(tqCoreConnector,$q){this.getCurrentBrand=function(){return window.themeId},this.getPersonAccountId=function(){return tqCoreConnector.user.userInfo.getUserFieldValue("AccountId")},this.getPreferencesObjectApiName=function(objectType){return"MarketingConsent"===objectType?"Marketing_Consent__c":"Preferences__c"},this.getPreferencesRecordTypeApiName=function(preferencesType,brandId,isBrand){return isBrand===!1?"TTC":brandId.toUpperCase()},this.getPreferencesFieldSetApiName=function(preferencesType,brandId){return preferencesType+"_"+brandId.toUpperCase()},this.getPreferencesRecordTypeId=function(preferencesType,objectType,isBrand){var objectApiName=this.getPreferencesObjectApiName(objectType);if("Preferences"===objectType){var brandId=this.getCurrentBrand(),recordTypeApiName=this.getPreferencesRecordTypeApiName(preferencesType,brandId,isBrand);return tqCoreConnector.metadata.getRecordTypeId(objectApiName,recordTypeApiName)}return tqCoreConnector.metadata.getRecordTypeId(objectApiName,"Active Marketing Consent")},this.getPreferencesLayout=function(preferencesType){var brandId=this.getCurrentBrand(),objectApiName=this.getPreferencesObjectApiName(""),fieldSetApiName=this.getPreferencesFieldSetApiName(preferencesType,brandId),recordTypeApiName=this.getPreferencesRecordTypeApiName(preferencesType,brandId);return $q.when(tqCoreConnector.metadata.getFieldsetLayout(objectApiName,fieldSetApiName,recordTypeApiName))},this.getPreferencesCriteria=function(preferencesType,brandId,objectType,isBrand){var preferencesRecordTypeId=this.getPreferencesRecordTypeId(preferencesType,objectType,isBrand),personAccountId=this.getPersonAccountId(),criteria={$and:[]};return"Preferences"===objectType?criteria.$and.push({RecordTypeId:{$eq:preferencesRecordTypeId}}):(criteria.$and.push({$or:[{RecordTypeId:{$eq:tqCoreConnector.metadata.getRecordTypeId("Marketing_Consent__c","Active Marketing Consent")}},{RecordTypeId:{$eq:tqCoreConnector.metadata.getRecordTypeId("Marketing_Consent__c","Archived Marketing Consent")}}]}),isBrand?window.accentureONECore&&window.accentureONECore.sellingCompanyId&&""!==window.accentureONECore.sellingCompanyId&&-1===window.accentureONECore.sellingCompanyId.indexOf("{!")&&criteria.$and.push({Selling_Company__c:{$eq:window.accentureONECore.sellingCompanyId}}):window.accentureONECore&&window.accentureONECore.ttcCompanyId&&""!==window.accentureONECore.ttcCompanyId&&-1===window.accentureONECore.ttcCompanyId.indexOf("{!")&&criteria.$and.push({Selling_Company__c:{$eq:window.accentureONECore.ttcCompanyId}})),personAccountId?criteria.$and.push({Customer_or_Prospect__c:{$eq:personAccountId}}):criteria.$and.push({CreatedById:{$eq:tqCoreConnector.user.getId()}}),criteria},this.newPreferencesInstance=function(preferencesType,objectType,isBrand){var objectApiName=(this.getCurrentBrand(),this.getPreferencesObjectApiName(objectType)),recordTypeId=this.getPreferencesRecordTypeId(preferencesType,objectType,isBrand),newRecord=tqCoreConnector.record.getTrackedObjectRecordInstance(objectApiName),accountId=this.getPersonAccountId();return accountId&&(newRecord.rawRecord.Customer_or_Prospect__c=accountId),newRecord.rawRecord.RecordTypeId=recordTypeId,newRecord},this.newMarketingConsentInstance=function(preferencesType,objectType,isBrand){var objectApiName=(this.getCurrentBrand(),this.getPreferencesObjectApiName(objectType)),recordTypeId=tqCoreConnector.metadata.getRecordTypeId("Marketing_Consent__c","Active Marketing Consent"),newRecord=tqCoreConnector.record.getTrackedObjectRecordInstance(objectApiName),accountId=this.getPersonAccountId();return accountId&&(newRecord.rawRecord.Customer_or_Prospect__c=accountId,newRecord.rawRecord.Customer_Active__c=accountId),newRecord.rawRecord.RecordTypeId=recordTypeId,newRecord},this.findActiveMarketingConsentRecordOrType=function(records){if(0===records.length)return null;for(var i=0;i<records.length;i++){var record=records[i];if(record.rawRecord.RecordTypeId===tqCoreConnector.metadata.getRecordTypeId("Marketing_Consent__c","Active Marketing Consent"))return record}return"archived"},this.setDefaultOptInForBrandMarketingConsent=function(recordInstance,recordOrType,isBrand){isBrand?"archived"===recordOrType?recordInstance.rawRecord.Opt_In__c=!1:recordInstance.rawRecord.Opt_In__c=!0:recordInstance.rawRecord.Opt_In__c=!1},this.getObjectPreferencesRecord=function(preferencesType,objectType,isBrand){var brandId=this.getCurrentBrand(),objectApiName=this.getPreferencesObjectApiName(objectType),self=this,query={objectApiName:objectApiName,where:self.getPreferencesCriteria(preferencesType,brandId,objectType,isBrand)};return tqCoreConnector.storage.find(query).then(function(records){var recordInstance=null;if("Preferences"===objectType)recordInstance=angular.isArray(records)&&records.length>0?records[0]:self.newPreferencesInstance(preferencesType,objectType,isBrand);else{var recordOrType=self.findActiveMarketingConsentRecordOrType(records);angular.isObject(recordOrType)?recordInstance=recordOrType:(recordInstance=self.newMarketingConsentInstance(preferencesType,objectType,isBrand),self.setDefaultOptInForBrandMarketingConsent(recordInstance,recordOrType,isBrand))}return window.accentureONECore&&window.accentureONECore.sellingCompanyId&&-1===window.accentureONECore.sellingCompanyId.indexOf("{!")&&""!==window.accentureONECore.sellingCompanyId&&!recordInstance.rawRecord.Selling_Company__c&&isBrand?recordInstance.rawRecord.Selling_Company__c=window.accentureONECore.sellingCompanyId:window.accentureONECore&&window.accentureONECore.sellingCompanyId&&-1===window.accentureONECore.sellingCompanyId.indexOf("{!")&&""!==window.accentureONECore.sellingCompanyId&&!recordInstance.rawRecord.Selling_Company__c&&!isBrand&&(recordInstance.rawRecord.Selling_Company__c=window.accentureONECore.ttcCompanyId),recordInstance})}})}),define("app/profile/preferences/preferences",["angular","coreapi","ionicMaterial","components/loading/loading","youOne/preferenceslayout/preferenceslayout"],function(angular){return angular.module("mts.preferences",["ui.router","ionic-material","tq.coreapi","tq.loading","ttc.preferences.layout"]).config(function($stateProvider){$stateProvider.state("profile.marketing",{url:"/marketing",cache:!0,resolve:{layout:function(ttcPreferencesLayout){return ttcPreferencesLayout.getPreferencesLayout("Marketing")},preferencesRecord:function(ttcPreferencesLayout){return ttcPreferencesLayout.getObjectPreferencesRecord("Marketing","Preferences")},brandMarketingConsentRecord:function(ttcPreferencesLayout){return ttcPreferencesLayout.getObjectPreferencesRecord("Marketing","MarketingConsent",!0)},ttcMarketingConsentRecord:function(ttcPreferencesLayout){return ttcPreferencesLayout.getObjectPreferencesRecord("Marketing","MarketingConsent",!1)}},views:{"contentView@profile":{templateUrl:"apps/mts/profile/preferences/preferences.tpl.html",controller:"MtsPreferencesCtrl"}},data:{preferences:"Marketing",functionality:"myProfile.marketingPreferences"}}).state("profile.travel",{url:"/travel",cache:!0,resolve:{layout:function(ttcPreferencesLayout){return ttcPreferencesLayout.getPreferencesLayout("Travel")},preferencesRecord:function(ttcPreferencesLayout){return ttcPreferencesLayout.getObjectPreferencesRecord("Travel","Preferences")},brandMarketingConsentRecord:function(){return null},ttcMarketingConsentRecord:function(){return null}},views:{"contentView@profile":{templateUrl:"apps/mts/profile/preferences/preferences.tpl.html",controller:"MtsPreferencesCtrl"}},data:{preferences:"Travel",functionality:"myProfile.travelPreferences"}})}).controller("MtsPreferencesCtrl",function($scope,$state,layout,ttcPreferencesLayout,preferencesRecord,brandMarketingConsentRecord,ttcMarketingConsentRecord,$settings,acnPopup,$ionicLoading,tqCoreConnector,$translate,tqErrorListPopup,$ionicScrollDelegate,$window){var isAndroidNativeBrowser=function(){var nua=navigator.userAgent;return nua.indexOf("Mozilla/5.0")>-1&&nua.indexOf("Android ")>-1&&nua.indexOf("AppleWebKit")>-1&&-1===nua.indexOf("Chrome")};$scope.isAndroidNativeBrowser=isAndroidNativeBrowser(),$scope.layout=layout,$scope.preferencesRecord=preferencesRecord,$scope.brandMarketingConsentRecord=brandMarketingConsentRecord,$scope.ttcMarketingConsentRecord=ttcMarketingConsentRecord,$scope.brandUrl=$settings.get("ttc.brandspageUrl"),$scope.brandFullName=$settings.get("brand.fullName"),$scope.open=function(socialNetworkId){$window.open($settings.get("brand.socialLinks")[socialNetworkId],"_blank")},$scope.getFiledLabel=function(label){return label.replace("Brand",$translate.instant("COMPANY_NAME"))};var scrollDelegate=$ionicScrollDelegate.$getByHandle("main-application-scroll");scrollDelegate.scrollTop();var areAllOptionsTicked=function(record,fieldApiName){for(var i=0;i<layout.length;i++){var fieldData=layout[i];if(fieldData.name===fieldApiName){if(!$scope.mutlipicklistMap[fieldData.name])return!1;for(var k=0;k<fieldData.picklistValues.length;k++){var value=fieldData.picklistValues[k];if(!$scope.mutlipicklistMap[fieldData.name][value])return!1}}}return!0},isToTickAll=function(record,fieldApiName,first){return tqCoreConnector.record.isNewInstance(record)&&"Send_me_information_on__c"==fieldApiName&&first?!0:areAllOptionsTicked(record,fieldApiName)};$scope.supportingFields={},$scope.supportingFields.tickAll={},$scope.mutlipicklistMap={},angular.forEach(layout,function(fieldData){if(fieldData.isMultipicklist&&($scope.mutlipicklistMap[fieldData.name]={},angular.isString($scope.preferencesRecord.rawRecord[fieldData.name]))){var values=$scope.preferencesRecord.rawRecord[fieldData.name].split(";");angular.forEach(values,function(value){$scope.mutlipicklistMap[fieldData.name][value]=!0}),$scope.supportingFields.tickAll[fieldData.name]=isToTickAll($scope.preferencesRecord,fieldData.name,!0)}}),$scope.socialNetworksMappingList={Facebook_URL__c:"Facebook",Twitter_URL__c:"Twitter",Google_Plus_URL__c:"Google+",Linkedin_URL__c:"Linkedin",Instagram_URL__c:"Instagram"};var socialNetworkIdFieldApiName="Preferred_Social_Network_ID__c";$scope.shouldDisplayField=function(fieldApiName){if("Unsubscribe_reason__c"===fieldApiName)return"Yes"===$scope.preferencesRecord.rawRecord.Unsubscribe__c;if("How_did_you_hear_about_the_brand_Other__c"===fieldApiName)return"Other - please specify"===$scope.preferencesRecord.rawRecord.How_did_you_hear_about_the_brand__c;if($scope.socialNetworksMappingList[fieldApiName]&&$scope.mutlipicklistMap[socialNetworkIdFieldApiName]){var picklistValue=$scope.socialNetworksMappingList[fieldApiName];return $scope.mutlipicklistMap[socialNetworkIdFieldApiName][picklistValue]}return!0},$scope.onFieldValueChange=function(fieldApiName){("Unsubscribe__c"===fieldApiName||fieldApiName===socialNetworkIdFieldApiName||"How_did_you_hear_about_the_brand_Other__c"===fieldApiName)&&scrollDelegate&&scrollDelegate.resize(),$scope.supportingFields.tickAll[fieldApiName]=isToTickAll($scope.preferencesRecord,fieldApiName)},$scope.toggleAllOptions=function(fieldApiName){angular.forEach(layout,function(fieldData){if(fieldData.name===fieldApiName){$scope.mutlipicklistMap[fieldData.name]={};var values=fieldData.picklistValues;angular.forEach(values,function(value){$scope.supportingFields.tickAll[fieldApiName]?$scope.mutlipicklistMap[fieldData.name][value]=!0:$scope.mutlipicklistMap[fieldData.name][value]=!1})}})};try{for(var fieldApiName in $scope.supportingFields.tickAll)$scope.supportingFields.tickAll[fieldApiName]&&$scope.toggleAllOptions(fieldApiName)}finally{}$scope.save=function(){$ionicLoading.show();var currentBrandMarketingConsentRecord=$scope.brandMarketingConsentRecord,currentTTCMarketingConsentRecord=$scope.ttcMarketingConsentRecord;ttcPreferencesLayout.getObjectPreferencesRecord("Marketing","MarketingConsent",!0).then(function(freshBrandMarketingConsentRecord){ttcPreferencesLayout.getObjectPreferencesRecord("Marketing","MarketingConsent",!1).then(function(freshTTCMarketingConsentRecord){$scope.brandMarketingConsentRecord&&$scope.ttcMarketingConsentRecord&&(freshBrandMarketingConsentRecord.rawRecord.Opt_In__c=currentBrandMarketingConsentRecord.rawRecord.Opt_In__c,freshTTCMarketingConsentRecord.rawRecord.Opt_In__c=currentTTCMarketingConsentRecord.rawRecord.Opt_In__c,$scope.brandMarketingConsentRecord=freshBrandMarketingConsentRecord,$scope.ttcMarketingConsentRecord=freshTTCMarketingConsentRecord);for(var fieldName in $scope.mutlipicklistMap){$scope.preferencesRecord.rawRecord[fieldName]=null;var valuesArray=[];for(var option in $scope.mutlipicklistMap[fieldName])$scope.mutlipicklistMap[fieldName][option]&&valuesArray.push(option);valuesArray.length>0&&($scope.preferencesRecord.rawRecord[fieldName]=valuesArray.join(";"))}var fieldNames=_.pluck($scope.layout,"name");if($scope.mutlipicklistMap[socialNetworkIdFieldApiName])for(var socialNetworkField in $scope.socialNetworksMappingList)if(_.contains(fieldNames,socialNetworkField)){var picklistValue=$scope.socialNetworksMappingList[socialNetworkField];!$scope.mutlipicklistMap[socialNetworkIdFieldApiName][picklistValue]&&$scope.preferencesRecord.rawRecord[socialNetworkField]&&($scope.preferencesRecord.rawRecord[socialNetworkField]=null)}$scope.brandMarketingConsentRecord&&$scope.ttcMarketingConsentRecord&&($scope.brandMarketingConsentRecord.rawRecord.Source__c="MTS",$scope.brandMarketingConsentRecord.rawRecord.Date_Entered__c=new Date,$scope.ttcMarketingConsentRecord.rawRecord.Source__c="MTS",$scope.ttcMarketingConsentRecord.rawRecord.Date_Entered__c=new Date);var onSaveError=function(error){acnPopup.show({type:acnPopup.TYPE.ALERT,title:"Operation failed",template:"Preferences update operation has been failed. Please check your connection and try again",cssClass:"you-one-popup"}),$ionicLoading.hide()},onResponseError=function(response){tqErrorListPopup.showResponseErrors(response,{subTitle:"Preferences hasn't been updated successfully because of next errors: "}),$ionicLoading.hide()},onSaveSuccess=function(){$ionicLoading.hide(),acnPopup.show({type:acnPopup.TYPE.ALERT,title:"Operation successful",template:"Your preferences have been successfully updated.",cssClass:"you-one-popup"})};tqCoreConnector.storage.upsert($scope.preferencesRecord).then(function(response){tqCoreConnector.utils.isResponseSuccessful(response)?null!==$scope.brandMarketingConsentRecord?tqCoreConnector.storage.upsert($scope.brandMarketingConsentRecord).then(function(response){tqCoreConnector.utils.isResponseSuccessful(response)?tqCoreConnector.storage.upsert($scope.ttcMarketingConsentRecord).then(function(response){tqCoreConnector.utils.isResponseSuccessful(response)?onSaveSuccess():onResponseError(response)})["finally"](function(){$ionicLoading.hide()}):onResponseError(response)},onSaveError):onSaveSuccess():onResponseError(response)},onSaveError)},function(err){onSaveError(err)})},function(err){onSaveError(err)})}})}),define("components/popup/error/error",["angular","coreapi"],function(angular){return angular.module("tq.popup.error",["ionic","tq.coreapi"]).service("tqErrorListPopup",function($ionicPopup,$rootScope,tqCoreConnector){this.show=function(errorList,config,scopeData){angular.isString(errorList)&&(errorList=[errorList]);var scope=$rootScope.$new();scope.errorList=errorList,angular.isObject(scopeData)&&angular.merge(scope,scopeData);var popupConfig={title:"Operation failed",cssClass:"tq-error-popup",subTitle:"Operation hasn't been completed successfully because of next errors: ",templateUrl:"acn-one/acn-ng/components/popup/error/error.tpl.html",scope:scope,buttons:[{text:"OK",type:"button-positive"}]};return angular.isObject(config)&&angular.merge(popupConfig,config),$ionicPopup.alert(popupConfig)},this.showResponseErrors=function(uploadResponse,config,scopeData){return errorList=tqCoreConnector.utils.getResponseErrorList(uploadResponse),this.show(errorList,config,scopeData)}})}),!function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(a){n.innerText=t}}(document,".selected_date_full {\n  color: #387EF5;\n  font-weight: bold;\n  text-align: center;\n  padding-bottom: 5px;\n}\n\n.color_blue {\n  color: rgb(56, 126, 245) !important;\n}\n\n.bg_color_blue {\n  background-color: rgb(56, 126, 245);\n}\n\n.date_col:hover {\n  background-color: rgba(56, 126, 245, 0.5);\n  cursor: pointer;\n}\n\n.date_col:active {\n  background-color: rgba(56, 126, 245, 1);\n  cursor: pointer;\n}\n\n.no_padding {\n  padding: 0;\n}\n\n.date_cell {\n  padding: 5px;\n}\n\n.date_selected {\n  background-color: rgba(56, 126, 245, 1) !important;\n}\n\n.today {\n  background-color: rgba(186, 186, 186, 1);\n}\n\n.pointer_events_none {\n  pointer-events: none !important;\n  color: #AAAAAA;\n}\n\n.select_section {\n  padding: 0;\n}\n\n.select_section label {\n  padding: 12px;\n}\n\n.select_section select {\n  font-size: 12px;\n  font-weight: bold;\n  padding: 2px 10px;\n  direction: ltr;\n  left: 0;\n  width: 100%;\n  max-width: 100%;\n}\n\n.select_section .item-select:after {\n  right: 4px;\n  border-top: 4px solid;\n  border-right: 4px solid rgba(0, 0, 0, 0);\n  border-left: 4px solid rgba(0, 0, 0, 0);\n}\n\n.left_arrow {\n  direction: rtl;\n}\n\n.right_arrow {\n\n}\n.ionic_datepicker_modal_content .selected_date_full {\n  font-size: 20px;\n}\n.font_22px {\n  font-size: 22px;\n}\n.ionic_datepicker_modal_content {\n  padding-top: 10%;\n}\n.ionic_datepicker_modal_content .selected_date_full{\n  padding: 20px;\n}\n@media (min-width: 680px) {\n  .ionic_datepicker_modal_content {\n    padding-top: 0;\n  }\n  .ionic_datepicker_modal_content .selected_date_full {\n    font-size: inherit;\n  }\n  .ionic_datepicker_modal_content .selected_date_full{\n    padding: 10px 0 0 0;\n  }\n}"),function(e){try{e=angular.module("ionic-datepicker.templates")}catch(t){e=angular.module("ionic-datepicker.templates",[])}e.run(["$templateCache",function(e){e.put("ionic-datepicker-modal.html",'<ion-modal-view class=ionic_datepicker_modal><ion-header-bar ng-class=modalHeaderColor><h1 class=title>{{titleLabel}}</h1></ion-header-bar><ion-content class=ionic_datepicker_modal_content><div class=ionic_datepicker><div class=selected_date_full>{{selectedDateFull | date:"dd-MM-yyyy"}}</div><div class=row><div class="col col-10 left_arrow" ng-click=prevMonth() ng-class="{\'pointer_events_none\':(enableDatesFrom.isSet && enableDatesFrom.epoch > currentMonthFirstDayEpoch)}"><button class="button-clear font_22px" ng-class="{\'color_blue\':((enableDatesFrom.isSet && enableDatesFrom.epoch < currentMonthFirstDayEpoch) || (!enableDatesFrom.isSet))}"><i class="icon ion-chevron-left"></i></button></div><div class="col col-80 drop_down"><div class="row select_section"><div class="col col-50 month_dropdown"><div class=list><label class="item item-input item-select"><select ng-model=currentMonth ng-change=monthChanged(currentMonth) class=month_select><option value={{month}} ng-repeat="month in monthsList" ng-selected="month == currentMonthSelected">{{month}}</option></select></label></div></div><div class="col col-50 year_dropdown"><div class=list><label class="item item-input item-select"><select ng-model=currentYear ng-change=yearChanged(currentYear) class=year_select><option value={{year}} ng-repeat="year in yearsList" ng-selected="year == currentYearSelected">{{year}}</option></select></label></div></div></div></div><div class="col col-10 right_arrow" ng-click=nextMonth() ng-class="{\'pointer_events_none\':(enableDatesTo.isSet && enableDatesTo.epoch < currentMonthLastDayEpoch)}"><button class="button-clear font_22px" ng-class="{\'color_blue\':((enableDatesTo.isSet && enableDatesTo.epoch > currentMonthLastDayEpoch) || (!enableDatesTo.isSet))}"><i class="icon ion-chevron-right"></i></button></div></div><div class=calendar_grid><div class=row><div class="col text-center" ng-repeat="weekName in weekNames track by $index" style="font-weight: bold">{{ weekName }}</div></div><div><div class=row ng-repeat="row in rows track by $index" style="text-align: center;"><div class="col no_padding" ng-repeat="col in cols track by $index" ng-class="{\'date_col\': (dayList[$parent.$index * numColumns + $index].day != undefined), \'date_selected\': (dayList[$parent.$index * numColumns + $index].dateString === selctedDateStringCopy && dayList[$parent.$index * numColumns + $index].day != undefined) , \'today\' : (dayList[$parent.$index * numColumns + $index].date == today.date && dayList[$parent.$index * numColumns + $index].month == today.month && dayList[$parent.$index * numColumns + $index].year == today.year)}"><div class=date_cell ng-click="dateSelected(dayList[$parent.$index * numColumns + $index])" ng-class="{\'pointer_events_none\':(disabledDates.indexOf(dayList[$parent.$index * numColumns + $index].epochLocal) > -1) || (enableDatesFrom.isSet && enableDatesFrom.epoch > dayList[$parent.$index * numColumns + $index].epochLocal) || (enableDatesTo.isSet && enableDatesTo.epoch < dayList[$parent.$index * numColumns + $index].epochLocal)}">{{ dayList[$parent.$index * numColumns + $index].date }}</div></div></div></div></div><div class="error_msg padding-horizontal" ng-show="date_selection.submitted === true && date_selection.selected === false">{{errorMsgLabel}}</div></div></ion-content><ion-footer-bar ng-class=modalFooterColor><div class="row no_padding"><div class="col-33 text-center" ng-click=closeIonicDatePickerModal()><button class="button button-clear">{{closeLabel}}</button></div><div class="col-34 text-center" ng-click=setIonicDatePickerTodayDate()><button class="button button-clear">{{todayLabel}}</button></div><div class="col-33 text-center" ng-click=setIonicDatePickerDate()><button class="button button-clear">{{setLabel}}</button></div></div></ion-footer-bar></ion-modal-view>')}])}(),function(e){try{e=angular.module("ionic-datepicker.templates")}catch(t){e=angular.module("ionic-datepicker.templates",[])}e.run(["$templateCache",function(e){e.put("ionic-datepicker-popup.html",'<div class=ionic-datepicker><div class=selected_date_full>{{selectedDateFull | date:"dd-MM-yyyy"}}</div><div class="row no_padding"><div class="col col-10 left_arrow" ng-click=prevMonth() ng-class="{\'pointer_events_none\':(enableDatesFrom.isSet && enableDatesFrom.epoch > currentMonthFirstDayEpoch)}"><button class=button-clear ng-class="{\'color_blue\':((enableDatesFrom.isSet && enableDatesFrom.epoch < currentMonthFirstDayEpoch) || (!enableDatesFrom.isSet))}"><i class="icon ion-chevron-left"></i></button></div><div class="col col-80 drop_down no_padding"><div class="row select_section"><div class="col col-50 month_dropdown"><div class=list><label class="item item-input item-select"><select ng-model=currentMonth ng-change=monthChanged(currentMonth) class=month_select><option value={{month}} ng-repeat="month in monthsList" ng-selected="month == currentMonthSelected">{{month}}</option></select></label></div></div><div class="col col-50 year_dropdown"><div class=list><label class="item item-input item-select"><select ng-model=currentYear ng-change=yearChanged(currentYear) class=year_select><option value={{year}} ng-repeat="year in yearsList" ng-selected="year == currentYearSelected">{{year}}</option></select></label></div></div></div></div><div class="col col-10 right_arrow" ng-click=nextMonth() ng-class="{\'pointer_events_none\':(enableDatesTo.isSet && enableDatesTo.epoch < currentMonthLastDayEpoch)}"><button class=button-clear ng-class="{\'color_blue\':((enableDatesTo.isSet && enableDatesTo.epoch > currentMonthLastDayEpoch) || (!enableDatesTo.isSet))}"><i class="icon ion-chevron-right"></i></button></div></div><div class=calendar_grid><div class=row><div class=col ng-repeat="weekName in weekNames track by $index" style="font-weight: bold">{{ weekName }}</div></div><div style="height: 180px;"><div class=row ng-repeat="row in rows track by $index" style="text-align: center;"><div class="col no_padding" ng-repeat="col in cols track by $index" ng-class="{\'date_col\': (dayList[$parent.$index * numColumns + $index].day != undefined), \'date_selected\': (dayList[$parent.$index * numColumns + $index].dateString === selctedDateStringCopy && dayList[$parent.$index * numColumns + $index].day != undefined) , \'today\' : (dayList[$parent.$index * numColumns + $index].date == today.date && dayList[$parent.$index * numColumns + $index].month == today.month && dayList[$parent.$index * numColumns + $index].year == today.year)}"><div class=date_cell ng-click="dateSelected(dayList[$parent.$index * numColumns + $index])" ng-class="{\'pointer_events_none\':(disabledDates.indexOf(dayList[$parent.$index * numColumns + $index].epochLocal) > -1) || (enableDatesFrom.isSet && enableDatesFrom.epoch > dayList[$parent.$index * numColumns + $index].epochLocal) || (enableDatesTo.isSet && enableDatesTo.epoch < dayList[$parent.$index * numColumns + $index].epochLocal)}">{{ dayList[$parent.$index * numColumns + $index].date }}</div></div></div></div></div><div class="error_msg padding-horizontal" ng-show="date_selection.submitted === true && date_selection.selected === false">{{errorMsgLabel}}</div></div>')}])}(),function(){"use strict";angular.module("ionic-datepicker",["ionic","ionic-datepicker.templates"])}(),function(){"use strict";function e(e,t,n){return{restrict:"AE",replace:!0,scope:{inputObj:"=inputObj"},link:function(a,o,i){function l(){a.date_selection.submitted=!0,a.date_selection.selected===!0&&a.inputObj.callback(a.date_selection.selectedDate)}function s(){var e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n={date:e.getDate(),month:e.getMonth(),year:e.getFullYear(),day:e.getDay(),dateString:e.toString(),epochLocal:t.getTime(),epochUTC:t.getTime()+60*t.getTimezoneOffset()*1e3};a.selctedDateString=n.dateString,a.selctedDateStringCopy=angular.copy(a.selctedDateString),a.date_selection.selected=!0,a.date_selection.selectedDate=new Date(n.dateString),p(new Date)}a.currentMonth="",a.currentYear="",a.disabledDates=[],a.titleLabel=a.inputObj.titleLabel?a.inputObj.titleLabel:"Select Date",a.todayLabel=a.inputObj.todayLabel?a.inputObj.todayLabel:"Today",a.closeLabel=a.inputObj.closeLabel?a.inputObj.closeLabel:"Close",a.setLabel=a.inputObj.setLabel?a.inputObj.setLabel:"Set",a.errorMsgLabel=a.inputObj.errorMsgLabel?a.inputObj.errorMsgLabel:"Please select a date.",a.setButtonType=a.inputObj.setButtonType?a.inputObj.setButtonType:"button-positive",a.todayButtonType=a.inputObj.todayButtonType?a.inputObj.todayButtonType:"button-stable",a.closeButtonType=a.inputObj.closeButtonType?a.inputObj.closeButtonType:"button-stable",a.templateType=a.inputObj.templateType?a.inputObj.templateType:"modal",a.modalHeaderColor=a.inputObj.modalHeaderColor?a.inputObj.modalHeaderColor:"bar-stable",a.modalFooterColor=a.inputObj.modalFooterColor?a.inputObj.modalFooterColor:"bar-stable",a.enableDatesFrom={epoch:0,isSet:!1},a.enableDatesTo={epoch:0,isSet:!1},a.inputObj.from&&(a.enableDatesFrom.isSet=!0,a.enableDatesFrom.epoch=a.inputObj.from.getTime()),a.inputObj.to&&(a.enableDatesTo.isSet=!0,a.enableDatesTo.epoch=a.inputObj.to.getTime()),a.ipDate=a.inputObj.inputDate?a.inputObj.inputDate:new Date,a.selectedDateFull=a.ipDate,a.monthsList=[],a.monthsList=a.inputObj.monthList&&12===a.inputObj.monthList.length?a.inputObj.monthList:n.monthsList,a.weekNames=a.inputObj.weekDaysList&&7===a.inputObj.weekDaysList.length?a.inputObj.weekDaysList:["S","M","T","W","T","F","S"],a.yearsList=n.yearsList,a.mondayFirst=a.inputObj.mondayFirst?!0:!1,a.inputObj.disabledDates&&0===a.inputObj.disabledDates.length?a.disabledDates=[]:angular.forEach(a.inputObj.disabledDates,function(e,t){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),a.disabledDates.push(e.getTime())});var c=angular.copy(a.ipDate);if(c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0),a.selctedDateString=c.toString(),a.today={},a.mondayFirst===!0){var d=a.weekNames.shift();a.weekNames.push(d)}var r=new Date,u=new Date(r.getFullYear(),r.getMonth(),r.getDate());a.today={dateObj:r,date:u.getDate(),month:u.getMonth(),year:u.getFullYear(),day:u.getDay(),dateString:u.toString(),epochLocal:u.getTime(),epochUTC:u.getTime()+60*u.getTimezoneOffset()*1e3};var p=function(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),a.selctedDateString=new Date(e).toString(),c=angular.copy(e);var t=new Date(e.getFullYear(),e.getMonth(),1).getDate(),n=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();a.dayList=[];for(var o=t;n>=o;o++){var i=new Date(e.getFullYear(),e.getMonth(),o);a.dayList.push({date:i.getDate(),month:i.getMonth(),year:i.getFullYear(),day:i.getDay(),dateString:i.toString(),epochLocal:i.getTime(),epochUTC:i.getTime()+60*i.getTimezoneOffset()*1e3})}var l=a.dayList[0].day-a.mondayFirst;l=0>l?6:l,a.currentMonthFirstDayEpoch=a.dayList[0].epochLocal,a.currentMonthLastDayEpoch=a.dayList[a.dayList.length-1].epochLocal;for(var s=0;l>s;s++)a.dayList.unshift({});a.rows=[],a.cols=[],a.currentMonth=a.monthsList[e.getMonth()],a.currentYear=e.getFullYear(),a.currentMonthSelected=a.currentMonth,a.currentYearSelected=a.currentYear,a.numColumns=7,a.rows.length=6,a.cols.length=a.numColumns};a.monthChanged=function(e){var t=a.monthsList.indexOf(e);c.setMonth(t),p(c)},a.yearChanged=function(e){c.setFullYear(e),p(c)},a.prevMonth=function(){1===c.getMonth()&&c.setFullYear(c.getFullYear()),c.setMonth(c.getMonth()-1),a.currentMonth=a.monthsList[c.getMonth()],a.currentYear=c.getFullYear(),p(c)},a.nextMonth=function(){11===c.getMonth()&&c.setFullYear(c.getFullYear()),c.setMonth(c.getMonth()+1),a.currentMonth=a.monthsList[c.getMonth()],a.currentYear=c.getFullYear(),p(c)},a.date_selection={selected:!1,selectedDate:"",submitted:!1},a.date_selection.selected=!0,a.date_selection.selectedDate=a.ipDate,a.dateSelected=function(e){e&&(a.selctedDateString=e.dateString,a.selctedDateStringCopy=angular.copy(a.selctedDateString),a.date_selection.selected=!0,a.date_selection.selectedDate=new Date(e.dateString),a.selectedDateFull=a.date_selection.selectedDate)},a.closeIonicDatePickerModal=function(){a.inputObj.callback(void 0),a.closeModal()},a.setIonicDatePickerTodayDate=function(){s()},a.setIonicDatePickerDate=function(){l(),a.closeModal()},t.fromTemplateUrl("ionic-datepicker-modal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.modal=e}),a.openModal=function(){a.modal.show()},a.closeModal=function(){a.modal.hide()},o.on("click",function(){p(a.date_selection.selectedDate?a.date_selection.selectedDate:a.ipDate?angular.copy(a.ipDate):new Date),"modal"===a.templateType.toLowerCase()?a.openModal():e.show({templateUrl:"ionic-datepicker-popup.html",cssClass:"ionic-datepicker-popup-main",title:a.titleLabel,subTitle:"",scope:a,buttons:[{text:a.closeLabel,type:a.closeButtonType,onTap:function(e){a.inputObj.callback(void 0)}},{text:a.todayLabel,type:a.todayButtonType,onTap:function(e){s(),e.preventDefault()}},{text:a.setLabel,type:a.setButtonType,onTap:function(){
l()}}]})})}}}angular.module("ionic-datepicker").directive("ionicDatepicker",e),e.$inject=["$ionicPopup","$ionicModal","IonicDatepickerService"]}(),function(){"use strict";function e(){this.monthsList=["January","February","March","April","May","June","July","August","September","October","November","December"],this.yearsList=[1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040,2041,2042,2043,2044,2045,2046,2047,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2070,2071,2072,2073,2074,2075,2076,2077,2078,2079,2080,2081,2082,2083,2084,2085,2086,2087,2088,2089,2090,2091,2092,2093,2094,2095,2096,2097,2098,2099,2100]}angular.module("ionic-datepicker").service("IonicDatepickerService",e),e.$inject=[]}(),define("ionicDatepicker",["ionic","angular"],function(){}),define("youOne/countries/countries",["angular","coreapi"],function(angular){return angular.module("ttc.countries",[]).service("ttcCountries",function(){var list=[],requiringPostalCodesCountriesList=["DZ","AR","AM","AU","AT","AZ","A2","BD","BY","BE","BA","BR","BN","BG","CA","IC","CN","HR","CY","CZ","DK","EN","EE","FO","FI","FR","GE","DE","GR","GL","GU","GG","HO","HU","IN","ID","IL","IT","JP","JE","KZ","KR","KO","KG","LV","LI","LT","LU","MK","MG","M3","MY","MH","MQ","YT","MX","MN","ME","NL","NZ","NB","NO","PK","PH","PL","PO","PT","PR","RE","RU","SA","SF","CS","SG","SK","SI","ZA","ES","LK","NT","SX","UV","VL","SE","CH","TW","TJ","TH","TU","TN","TR","TM","VI","UA","GB","US","UY","UZ","VA","VN","WL"],ttcCustomList=[{label:"Australia (+61)",telephoneCodeValue:"+61"},{label:"Canada (+1)",telephoneCode:"+1"},{label:"New Zealand (+64)",telephoneCode:"+64"},{label:"Singapore (+65)",telephoneCode:"+65"},{label:"South Africa (+27)",telephoneCode:"+27"},{label:"United Kingdom (+44)",telephoneCode:"+44"},{label:"United States of America (+1)",telephoneCode:"+1"},{label:"Afghanistan (+93)",telephoneCode:"+93"},{label:"Albania (+355)",telephoneCode:"+355"},{label:"Algeria (+213)",telephoneCode:"+213"},{label:"American Samoa (+684)",telephoneCode:"+684"},{label:"Andorra (+376)",telephoneCode:"+376"},{label:"Angola (+244)",telephoneCode:"+244"},{label:"Anguilla (+264)",telephoneCode:"+264"},{label:"Antarctica (+672)",telephoneCode:"+672"},{label:"Argentina (+54)",telephoneCode:"+54"},{label:"Antigua And Barbuda (+268)",telephoneCode:"+268"},{label:"Armenia (+374)",telephoneCode:"+374"},{label:"Aruba (+297)",telephoneCode:"+297"},{label:"Austria (+43)",telephoneCode:"+43"},{label:"Azerbaijan (+994)",telephoneCode:"+994"},{label:"Bahamas (+242)",telephoneCode:"+242"},{label:"Bahrain (+973)",telephoneCode:"+973"},{label:"Bangladesh (+880)",telephoneCode:"+880"},{label:"Barbados (+246)",telephoneCode:"+246"},{label:"Belarus (+375)",telephoneCode:"+375"},{label:"Belgium (+32)",telephoneCode:"+32"},{label:"Belize (+501)",telephoneCode:"+501"},{label:"Benin (+229)",telephoneCode:"+229"},{label:"Bermuda (+441)",telephoneCode:"+441"},{label:"Bhutan (+975)",telephoneCode:"+975"},{label:"Bolivia (+591)",telephoneCode:"+591"},{label:"Bosnia And Herzegovina (+387)",telephoneCode:"+387"},{label:"Botswana (+267)",telephoneCode:"+267"},{label:"Brazil (+55)",telephoneCode:"+55"},{label:"Brunei Darussalam (+673)",telephoneCode:"+673"},{label:"Bulgaria (+359)",telephoneCode:"+359"},{label:"Burkina Faso (+226)",telephoneCode:"+226"},{label:"Burundi (+257)",telephoneCode:"+257"},{label:"Cambodia (+855)",telephoneCode:"+855"},{label:"Cameroon (+237)",telephoneCode:"+237"},{label:"Cape Verde (+238)",telephoneCode:"+238"},{label:"Cayman Islands (+345)",telephoneCode:"+345"},{label:"Central African Republic (+236)",telephoneCode:"+236"},{label:"Chad (+235)",telephoneCode:"+235"},{label:"Channel Islands (+44)",telephoneCode:"+44"},{label:"Chile (+56)",telephoneCode:"+56"},{label:"China (Peoples Republic) (+86)",telephoneCode:"Peoples Republic) (+86"},{label:"Christmas Island (+61)",telephoneCode:"+61"},{label:"Cocos Keeling Islands (+61)",telephoneCode:"+61"},{label:"Colombia (+57)",telephoneCode:"+57"},{label:"Comoros (+269)",telephoneCode:"+269"},{label:"Congo (Former Zaire) (+243)",telephoneCode:"Former Zaire) (+243"},{label:"Congo (Republic Of) (+242)",telephoneCode:"Republic Of) (+242"},{label:"Cook Islands (+682)",telephoneCode:"+682"},{label:"Costa Rica (+506)",telephoneCode:"+506"},{label:"Cote Divoire (Ivory Coast) (+225)",telephoneCode:"Ivory Coast) (+225"},{label:"Croatia (Hrvatska) (+385)",telephoneCode:"Hrvatska) (+385"},{label:"Cuba (+53)",telephoneCode:"+53"},{label:"Cyprus (+357)",telephoneCode:"+357"},{label:"Czech Republic (+420)",telephoneCode:"+420"},{label:"Denmark (+45)",telephoneCode:"+45"},{label:"Djibouti (+253)",telephoneCode:"+253"},{label:"Dominica (+767)",telephoneCode:"+767"},{label:"Dominican Republic (+809)",telephoneCode:"+809"},{label:"Ecuador (+593)",telephoneCode:"+593"},{label:"Egypt (+20)",telephoneCode:"+20"},{label:"El Salvador (+503)",telephoneCode:"+503"},{label:"Equatorial Guinea (+240)",telephoneCode:"+240"},{label:"Eritrea (+291)",telephoneCode:"+291"},{label:"Estonia (+372)",telephoneCode:"+372"},{label:"Ethiopia (+251)",telephoneCode:"+251"},{label:"Falkland Islands (Malvinas) (+500)",telephoneCode:"Malvinas) (+500"},{label:"Faroe Islands (+298)",telephoneCode:"+298"},{label:"Fiji (+679)",telephoneCode:"+679"},{label:"Finland (+358)",telephoneCode:"+358"},{label:"France (+33)",telephoneCode:"+33"},{label:"Freetext Country (+33)",telephoneCode:"+33"},{label:"French Guiana (+594)",telephoneCode:"+594"},{label:"French Polynesia (+689)",telephoneCode:"+689"},{label:"Gabon (+241)",telephoneCode:"+241"},{label:"Gambia (+220)",telephoneCode:"+220"},{label:"Georgia (+995)",telephoneCode:"+995"},{label:"Germany (+49)",telephoneCode:"+49"},{label:"Ghana (+233)",telephoneCode:"+233"},{label:"Gibraltar (+350)",telephoneCode:"+350"},{label:"Greece (+30)",telephoneCode:"+30"},{label:"Greenland (+299)",telephoneCode:"+299"},{label:"Grenada (+473)",telephoneCode:"+473"},{label:"Guadeloupe (+590)",telephoneCode:"+590"},{label:"Guam (+670)",telephoneCode:"+670"},{label:"Guatemala (+502)",telephoneCode:"+502"},{label:"Guernsey (+44)",telephoneCode:"+44"},{label:"Guinea (+224)",telephoneCode:"+224"},{label:"Guinea-Bissau (+245)",telephoneCode:"+245"},{label:"Guyana (+592)",telephoneCode:"+592"},{label:"Haiti (+509)",telephoneCode:"+509"},{label:"Honduras (+504)",telephoneCode:"+504"},{label:"Hong Kong (+852)",telephoneCode:"+852"},{label:"Hungary (+36)",telephoneCode:"+36"},{label:"Iceland (+354)",telephoneCode:"+354"},{label:"India (+91)",telephoneCode:"+91"},{label:"Indonesia (+62)",telephoneCode:"+62"},{label:"Iran (+98)",telephoneCode:"+98"},{label:"Iraq (+964)",telephoneCode:"+964"},{label:"Ireland (+353)",telephoneCode:"+353"},{label:"Israel (+972)",telephoneCode:"+972"},{label:"Italy (+39)",telephoneCode:"+39"},{label:"Jamaica (+876)",telephoneCode:"+876"},{label:"Japan (+81)",telephoneCode:"+81"},{label:"Jersey (+44)",telephoneCode:"+44"},{label:"Jordan (+962)",telephoneCode:"+962"},{label:"Kazakhstan (+7)",telephoneCode:"+7"},{label:"Kenya (+254)",telephoneCode:"+254"},{label:"Kiribati (+686)",telephoneCode:"+686"},{label:"Kuwait (+965)",telephoneCode:"+965"},{label:"Kyrgyzstan (+996)",telephoneCode:"+996"},{label:"Laos (+856)",telephoneCode:"+856"},{label:"Latvia (+371)",telephoneCode:"+371"},{label:"Lebanon (+961)",telephoneCode:"+961"},{label:"Lesotho (+266)",telephoneCode:"+266"},{label:"Liberia (+231)",telephoneCode:"+231"},{label:"Libya Arab Jamahiriya (+218)",telephoneCode:"+218"},{label:"Liechtenstein (+423)",telephoneCode:"+423"},{label:"Lithuania (+370)",telephoneCode:"+370"},{label:"Luxembourg (+352)",telephoneCode:"+352"},{label:"Macau (Sar) China (+853)",telephoneCode:"Sar) China (+853"},{label:"Macedonia (Fyrom) (+389)",telephoneCode:"Fyrom) (+389"},{label:"Madagascar (+261)",telephoneCode:"+261"},{label:"Malawi (+265)",telephoneCode:"+265"},{label:"Malaysia (+60)",telephoneCode:"+60"},{label:"Maldives (+960)",telephoneCode:"+960"},{label:"Mali (+223)",telephoneCode:"+223"},{label:"Malta (+356)",telephoneCode:"+356"},{label:"Marshall Islands (+692)",telephoneCode:"+692"},{label:"Martinique (+596)",telephoneCode:"+596"},{label:"Mauritania (+222)",telephoneCode:"+222"},{label:"Mauritius (+230)",telephoneCode:"+230"},{label:"Mayotte (+269)",telephoneCode:"+269"},{label:"Mexico (+52)",telephoneCode:"+52"},{label:"Micronesia (+691)",telephoneCode:"+691"},{label:"Moldova (Republic Of) (+373)",telephoneCode:"Republic Of) (+373"},{label:"Monaco (+377)",telephoneCode:"+377"},{label:"Mongolia (+976)",telephoneCode:"+976"},{label:"Montenegro (+382)",telephoneCode:"+382"},{label:"Montserrat (+664)",telephoneCode:"+664"},{label:"Morocco (+212)",telephoneCode:"+212"},{label:"Mozambique (+258)",telephoneCode:"+258"},{label:"Myanmar (+95)",telephoneCode:"+95"},{label:"Namibia (+264)",telephoneCode:"+264"},{label:"Nauru (+674)",telephoneCode:"+674"},{label:"Nepal (+977)",telephoneCode:"+977"},{label:"Netherlands (+31)",telephoneCode:"+31"},{label:"Netherlands Antilles (+599)",telephoneCode:"+599"},{label:"New Caledonia (+687)",telephoneCode:"+687"},{label:"Nicaragua (+505)",telephoneCode:"+505"},{label:"Niger (+227)",telephoneCode:"+227"},{label:"Nigeria (+234)",telephoneCode:"+234"},{label:"Niue (+683)",telephoneCode:"+683"},{label:"Norfolk Island (+672)",telephoneCode:"+672"},{label:"North Korea (+850)",telephoneCode:"+850"},{label:"Northern Mariana Islands (+1670)",telephoneCode:"+1670"},{label:"Norway (+47)",telephoneCode:"+47"},{label:"Oman (+968)",telephoneCode:"+968"},{label:"Open (+99)",telephoneCode:"+99"},{label:"Pakistan (+92)",telephoneCode:"+92"},{label:"Palau (+680)",telephoneCode:"+680"},{label:"Palestine (+972)",telephoneCode:"+972"},{label:"Panama (+507)",telephoneCode:"+507"},{label:"Papua New Guinea (+675)",telephoneCode:"+675"},{label:"Paraguay (+595)",telephoneCode:"+595"},{label:"Peru (+51)",telephoneCode:"+51"},{label:"Philippines (+63)",telephoneCode:"+63"},{label:"Poland (+48)",telephoneCode:"+48"},{label:"Portugal (+351)",telephoneCode:"+351"},{label:"Puerto Rico (+787)",telephoneCode:"+787"},{label:"Qatar (+974)",telephoneCode:"+974"},{label:"Reunion (+262)",telephoneCode:"+262"},{label:"Romania (+40)",telephoneCode:"+40"},{label:"Russian Federation (+7)",telephoneCode:"+7"},{label:"Rwanda (+250)",telephoneCode:"+250"},{label:"Samoa (+685)",telephoneCode:"+685"},{label:"San Marino (+378)",telephoneCode:"+378"},{label:"Sao Tome And Principe (+239)",telephoneCode:"+239"},{label:"Saudi Arabia (+966)",telephoneCode:"+966"},{label:"Senegal (+221)",telephoneCode:"+221"},{label:"Serbia (+381)",telephoneCode:"+381"},{label:"Seychelles (+248)",telephoneCode:"+248"},{label:"Sierra Leone (+232)",telephoneCode:"+232"},{label:"Slovakia (+421)",telephoneCode:"+421"},{label:"Slovenia (+386)",telephoneCode:"+386"},{label:"Solomon Islands (+677)",telephoneCode:"+677"},{label:"Somalia (+252)",telephoneCode:"+252"},{label:"South Korea (+82)",telephoneCode:"+82"},{label:"Spain (+34)",telephoneCode:"+34"},{label:"Sri Lanka (+94)",telephoneCode:"+94"},{label:"St Helena (+290)",telephoneCode:"+290"},{label:"St Kitts-Nevis (+869)",telephoneCode:"+869"},{label:"St Lucia (+758)",telephoneCode:"+758"},{label:"St Pierre And Miquelon (+508)",telephoneCode:"+508"},{label:"St Vincents And Grenadines (+809)",telephoneCode:"+809"},{label:"Sudan (+249)",telephoneCode:"+249"},{label:"Suriname (+597)",telephoneCode:"+597"},{label:"Svalbard And Jan Mayen Islands (+699)",telephoneCode:"+699"},{label:"Swaziland (+268)",telephoneCode:"+268"},{label:"Sweden (+46)",telephoneCode:"+46"},{label:"Switzerland (+41)",telephoneCode:"+41"},{label:"Syrian Arab Republic (+963)",telephoneCode:"+963"},{label:"Taiwan Chinese Taipai (+886)",telephoneCode:"+886"},{label:"Tajikistan (+7)",telephoneCode:"+7"},{label:"Tanzania (United Republic Of) (+255)",telephoneCode:"United Republic Of) (+255"},{label:"Thailand (+66)",telephoneCode:"+66"},{label:"Timor-Leste (+670)",telephoneCode:"+670"},{label:"Togo (+228)",telephoneCode:"+228"},{label:"Tonga (+676)",telephoneCode:"+676"},{label:"Trinidad And Tobago (+868)",telephoneCode:"+868"},{label:"Tunisia (+216)",telephoneCode:"+216"},{label:"Turkey (+90)",telephoneCode:"+90"},{label:"Turkmenistan (+993)",telephoneCode:"+993"},{label:"Turks And Caicos Islands (+649)",telephoneCode:"+649"},{label:"Tuvalu (+688)",telephoneCode:"+688"},{label:"Uganda (+256)",telephoneCode:"+256"},{label:"Ukraine (+380)",telephoneCode:"+380"},{label:"United Arab Emirates (+971)",telephoneCode:"+971"},{label:"Uruguay (+598)",telephoneCode:"+598"},{label:"Uzbekistan (+998)",telephoneCode:"+998"},{label:"Vanuatu (+678)",telephoneCode:"+678"},{label:"Venezuela (+58)",telephoneCode:"+58"},{label:"Vietnam (+84)",telephoneCode:"+84"},{label:"Virgin Islands (British) (+248)",telephoneCode:"British) (+248"},{label:"Virgin Islands (US) (+1)",telephoneCode:"US) (+1"},{label:"Wallis And Futuna Islands (+681)",telephoneCode:"+681"},{label:"Yemen (+967)",telephoneCode:"+967"},{label:"Zambia (+260)",telephoneCode:"+260"},{label:"Zimbabwe (+263)",telephoneCode:"+263"}],getList=function(){if(0===list.length)for(var i=0;i<ttcCustomList.length;i++){var name=ttcCustomList[i].label.split(" (")[0],ttcObject=window.iso.findCountryByName(name);if(void 0!==ttcObject){var countryName=ttcObject.name;countryName.indexOf(",")>-1?countryName=countryName.substr(0,countryName.indexOf(",")):"856"===ttcObject.tel?countryName="Laos":"500"===ttcObject.tel&&(countryName="Falkland Islands"),ttcObject.telephoneCodeLabel=countryName+" (+"+ttcObject.tel+")",ttcObject.telephoneCodeValue="+"+ttcObject.tel,void 0!==ttcObject.alpha2&&_.contains(requiringPostalCodesCountriesList,ttcObject.alpha2)?ttcObject.countryCodeIsRequire=!0:ttcObject.countryCodeIsRequire=!1,list.push(ttcObject)}}return list},isPostalCodeRequiredForCountry=function(alpha2Code){var country=_.where(list,{alpha2:alpha2Code})[0];return country?country.countryCodeIsRequire:!1};return{getList:getList,isPostalCodeRequiredForCountry:isPostalCodeRequiredForCountry}})}),define("app/profile/myprofile/myprofile",["angular","coreapi","ionicMaterial","isoCountries","components/settings/settings","components/loading/loading","components/popup/error/error","components/gtm/gtm","youOne/popup/about/about","ionicDatepicker","youOne/countries/countries"],function(angular){return angular.module("mts.myprofile",["ui.router","ionic-material","tq.coreapi","tq.settings","tq.loading","tq.gtm","tq.popup.error","ttc.popup.about","ionic-datepicker","ttc.countries"]).config(function($stateProvider){$stateProvider.state("profile.overview",{url:"/overview",cache:!1,views:{"contentView@profile":{templateUrl:"apps/mts/profile/myprofile/view.tpl.html",controller:"MtsMyProfileCtrl"}}}).state("profile.edit",{url:"/edit",cache:!1,views:{"contentView@profile":{templateUrl:"apps/mts/profile/myprofile/edit.tpl.html",controller:"MtsMyProfileCtrl"}},data:{functionality:"myProfile.edit"}})}).controller("MtsMyProfileCtrl",function($scope,$q,$state,tqCoreConnector,tqErrorListPopup,$translate,$timeout,tqGoogleTagManager,$ionicScrollDelegate,$ionicPopup,$ionicLoading,$settings,personAccount,ttcPopupAbout,ttcSsoService,ttcCountries){var self=this;this.init=function(){self.fetch(),self.showAboutPopup()},this.fetch=function(){return $q.all([self.fetchMinAgeInYears()])},this.showAboutPopup=function(){ttcPopupAbout.show({title:"About My Profile",templateUrl:"apps/mts/profile/myprofile/aboutProfilePopoupContent.tpl.html",moduleName:"profile"})},this.fetchMinAgeInYears=function(){$scope.minAgeInYears=$settings.get("legalAge")};var pushIfDefined=function(value,array){value&&""!==value&&array.push(value)},getAge=function(date){var today=new Date,birthDate=new Date(date),age=today.getFullYear()-birthDate.getFullYear(),m=today.getMonth()-birthDate.getMonth();return(0>m||0===m&&today.getDate()<birthDate.getDate())&&age--,age},scrollDelegate=$ionicScrollDelegate.$getByHandle("main-application-scroll");if(scrollDelegate.scrollTop(),$scope.removeNextAndPrevious=function(event){var isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent);isIOS&&($(event.target).attr("readonly","readonly"),$timeout(function(){$(event.target).removeAttr("readonly","readonly")},500))},$scope.addNextAndPrevious=function(event){var isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent);isIOS&&$(event.target).removeAttr("readonly","readonly")},$scope.doScrolling=function(event){var isIOS=/iPhone/.test(navigator.userAgent);isIOS&&$timeout(function(){scrollDelegate.getScrollPosition().top<50&&(window.scrollTo(0,0),scrollDelegate.scrollTo(0,50,!1),scrollDelegate.scrollBy(0,1,!0))},300)},$scope.countryCodes=ttcCountries.getList(),$scope.personAccount)for(var index in $scope.countryCodes){var countryData=$scope.countryCodes[index];if(countryData.name==personAccount.rawRecord.BillingCountry){$scope.personAccount.rawRecord.BillingCountry=countryData.alpha2;break}}personAccount&&($scope.postalCodeIsRequired=ttcCountries.isPostalCodeRequiredForCountry(personAccount.rawRecord.BillingCountry),$scope.ageIsDefined=!1,angular.isNumber(personAccount.rawRecord.PersonBirthdate)&&(personAccount.rawRecord.PersonBirthdate=new Date(personAccount.rawRecord.PersonBirthdate)),$scope.ageIsDefined=angular.isDate(personAccount.rawRecord.PersonBirthdate)&&0!==personAccount.rawRecord.PersonBirthdate.getTime()&&!isNaN(personAccount.rawRecord.PersonBirthdate.getTime())),$scope.isPostalCodeRequired=function(){return personAccount?($scope.postalCodeIsRequired=ttcCountries.isPostalCodeRequiredForCountry(personAccount.rawRecord.BillingCountry),void("US"===personAccount.rawRecord.BillingCountry?$scope.postalCodeLabel="Zip Code":$scope.postalCodeLabel="Postal Code")):!1},$scope.getFullAddress=function(){if($scope.personAccount){var addressArray=[];return pushIfDefined($scope.personAccount.rawRecord.BillingStreet,addressArray),pushIfDefined($scope.personAccount.rawRecord.BillingCity,addressArray),pushIfDefined($scope.personAccount.rawRecord.BillingState,addressArray),pushIfDefined($scope.personAccount.rawRecord.BillingCountry,addressArray),pushIfDefined($scope.personAccount.rawRecord.BillingPostalCode,addressArray),addressArray.join(", ")||""}return""},$scope.getEmergencyContact=function(){if($scope.currentUser){var emergencyArray=[];return pushIfDefined($scope.personAccount.rawRecord.Emergency_Contact_Name__c,emergencyArray),pushIfDefined($scope.personAccount.rawRecord.Emergency_Contact_Relationship__c,emergencyArray),pushIfDefined($scope.personAccount.rawRecord.Emergency_Contact_Phone__c,emergencyArray),emergencyArray.join(" - ")||""}return""},$scope.goToEditPage=function(){$scope.personAccount&&$state.go("profile.edit")},$scope.postalCodeLabel="Postal Code",$scope.regionLabel="County",window.accentureONECore&&window.accentureONECore.region&&("us"==window.accentureONECore.region.toLowerCase()||"usa"==window.accentureONECore.region.toLowerCase())&&($scope.postalCodeLabel="Zip Code",$scope.regionLabel="State"),$scope.getDatePickerValue=function(){return $scope.personAccount&&$scope.personAccount.rawRecord.PersonBirthdate?$scope.localeShortDateFormat(personAccount.rawRecord.PersonBirthdate):"en"===moment.locale()?"mm/dd/yy":"dd/mm/yy"};var isUnderLegal=function(dob){return dob>new Date(currentDate.getFullYear()-$settings.get("legalAge"),currentDate.getMonth(),currentDate.getDate())},isUnder18=function(dob){return dob>new Date(currentDate.getFullYear()-18,currentDate.getMonth(),currentDate.getDate())},notCorrectlyPopulatedPhoneNumbers=function(){var errors=[];return!$scope.personAccount.rawRecord.Home_Phone_Base_Number__c||$scope.personAccount.rawRecord.Home_Phone_Area_Code__c&&$scope.personAccount.rawRecord.Home_Phone_Intl_Code__c||errors.push("Home Phone Number"),!$scope.personAccount.rawRecord.On_Tour_Number_Base__c||$scope.personAccount.rawRecord.On_Tour_Number_Area__c&&$scope.personAccount.rawRecord.On_Tour_Number_Intl__c||errors.push("Tour Phone Number"),errors.length>0?errors.join(", "):!1},currentDate=new Date;$scope.datepickerObjectPopup={titleLabel:"Birthdate",todayLabel:"Today",closeLabel:"Close",setLabel:"Ok",errorMsgLabel:"Please set your birthdate.",setButtonType:"button-assertive",modalHeaderColor:"bar-positive",modalFooterColor:"bar-positive",todayButtonType:"button-hidden",templateType:"popup",inputDate:$scope.personAccount&&$scope.personAccount.rawRecord.PersonBirthdate||new Date(currentDate.getFullYear()-18,0,1),mondayFirst:!0,cssClass:"you-one-popup",dateFormat:"ll",callback:function(val){val&&angular.isDate(val)&&(isUnderLegal(val)?$timeout(function(){$ionicPopup.alert({title:"Date not set",template:"You must be at least "+$settings.get("legalAge")+" years old",cssClass:"you-one-popup"})},500):($scope.personAccount.rawRecord.PersonBirthdate=val,!isUnderLegal(val)&&isUnder18(val)&&$timeout(function(){$ionicPopup.alert({template:"Access allowed for over "+$settings.get("legalAge")+"’s. Please bear in mind that in order to be allowed to travel, you must be over 18 by the time of travel (Please check our Terms and Conditions online)",cssClass:"you-one-popup"})},500)))}},$scope.validateFieldInline=function(event,regExExp,modifier){var fieldApiName=event.target.name,regex=new RegExp(regExExp,modifier);regex.test(event.target.value)&&(event.target.value=event.target.value.replace(regex,""),$scope.personAccount.rawRecord[fieldApiName]=event.target.value)},$scope.validateForm=function(){if($scope.personAccount){if($scope.personAccount.rawRecord.PersonBirthdate){var birthdateValue=new Date($scope.personAccount.rawRecord.PersonBirthdate);if(0===birthdateValue.getTime()||isNaN(birthdateValue.getTime()))return{title:"Cannot save correct date format",template:"Please use proper date format"};if(getAge(birthdateValue)<$scope.minAgeInYears){var theTitle=$translate.instant("DATE_OF_BIRTH_AGE_WARNING_TITLE"),theText=$translate.instant("DATE_OF_BIRTH_AGE_WARNING",{minAgeInYears:$scope.minAgeInYears});return{title:theTitle,template:theText}}}var tripLabel=$translate.instant("TRIP"),requiredFieldsMap={};$scope.postalCodeIsRequired&&($scope.BillingPostalCode=$scope.postalCodeLabel);var emptyFields=[];for(var fieldApiName in requiredFieldsMap)$scope.personAccount.rawRecord[fieldApiName]&&""!==$scope.personAccount.rawRecord[fieldApiName]||emptyFields.push(requiredFieldsMap[fieldApiName]);if(emptyFields.length>0){var errorText="Please populate data for next mandatory fields: "+emptyFields.join(", ")+".";return{title:$settings.get("profile.mandatoryTitle","Mandatory data is missing"),template:errorText}}var populationErrors=notCorrectlyPopulatedPhoneNumbers();if(populationErrors)return{title:"Please correct the errors",template:"Area code and country code are required when introducing a phone number: "+populationErrors}}return!0},$scope.userEmail="",$scope.userEmailConfirmation="",$scope.userPassword="",$scope.userPasswordConfirmation="",$scope.userOldPassword="";var isSavingData=!1;$scope.redirectToChangePassword=function(){ttcSsoService.redirectToChangePassword()===!1&&$ionicPopup.alert({title:"Cannot redirect to change password page",template:"Cannot initialize SSO Library. Please contact your administrator",cssClass:"you-one-popup"})},$scope.saveChanges=function(){if(!isSavingData){if(isSavingData=!0,$timeout(function(){isSavingData=!1},200),$scope.personAccount&&!$scope.personAccount.rawRecord.PersonBirthdate){$scope.personAccount.rawRecord.PersonBirthdate=null;var inputVal=angular.element('.mts-my-profile-edit input[type="date"]').val();if(inputVal&&""!==inputVal){var dateVal=moment(inputVal,"DD/MM/YYYY").toDate();dateVal.getTime()&&!isNaN(dateVal.getTime())&&($scope.personAccount.rawRecord.PersonBirthdate=dateVal)}}$scope.personAccount.rawRecord.On_Tour_Number_Intl__c=$scope.personAccount.rawRecord.On_Tour_Number_Intl_Country__c?$scope.personAccount.rawRecord.On_Tour_Number_Intl_Country__c.split("(")[1].split(")")[0]:null,$scope.personAccount.rawRecord.Home_Phone_Intl_Code__c=$scope.personAccount.rawRecord.Home_Phone_Intl_Code_Country__c?$scope.personAccount.rawRecord.Home_Phone_Intl_Code_Country__c.split("(")[1].split(")")[0]:null,$scope.personAccount.rawRecord.Emergency_Contact_Intl__c=$scope.personAccount.rawRecord.Emergency_Contact_Intl_Country__c?$scope.personAccount.rawRecord.Emergency_Contact_Intl_Country__c.split("(")[1].split(")")[0]:null;var validationResult=$scope.validateForm();if(validationResult!==!0)return void $ionicPopup.alert({title:validationResult.title,template:validationResult.template,cssClass:"you-one-popup"});var isEmailBeenChanged=!1;if($scope.userEmail=$scope.userEmail.toLowerCase(),$scope.userEmailConfirmation=$scope.userEmailConfirmation.toLowerCase(),$scope.userEmailConfirmation.length>0){if(!angular.equals($scope.userEmail,$scope.userEmailConfirmation))return void tqErrorListPopup.showResponseErrors("",{subTitle:"Email hasn't been updated: Email fields must match"});var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/gim;if(!re.test($scope.userEmail))return void tqErrorListPopup.showResponseErrors("",{subTitle:"Email hasn't been updated: Invalid email format"});isEmailBeenChanged=!angular.equals($scope.userEmail,$scope.currentUser.rawRecord.Email)}var isPasswordBeenChanged=!1;$ionicLoading.show();var accountToUpsert=angular.copy($scope.personAccount);delete $scope.currentUser.rawRecord.BillingAddress,$scope.currentUser.rawRecord.UserRoleId&&delete $scope.currentUser.rawRecord.UserRoleId,delete accountToUpsert.rawRecord.Name,delete accountToUpsert.rawRecord.BillingAddress,tqCoreConnector.storage.upsert([$scope.currentUser,accountToUpsert]).then(function(response){tqCoreConnector.utils.isResponseSuccessful(response)?($scope.currentUser&&($scope.currentUser.dbOrigins=angular.copy($scope.currentUser.rawRecord)),$scope.personAccount&&($scope.personAccount.dbOrigins=angular.copy($scope.personAccount.rawRecord)),$scope.personAccount&&$scope.personAccount.rawRecord.PersonBirthdate&&($scope.ageIsDefined=!0),tqGoogleTagManager.push({event:"profile.edit",userId:tqCoreConnector.user.userInfo.getUserId()}),isEmailBeenChanged?ttcSsoService.updateEmail($scope.currentUser.rawRecord.Email,$scope.userEmail).then(function(){$ionicPopup.alert({title:"Operation successful",template:"Your profile has been successfully updated. An email has been sent to your new email address. Please follow the link to confirm the email address change.",cssClass:"you-one-popup"}),$scope.userEmail="",$scope.userEmailConfirmation=""},function(error){tqErrorListPopup.showResponseErrors("",{subTitle:"Profile updated, Error updating your email"})}):isPasswordBeenChanged?ttcSsoService.updatePassword($scope.userOldPassword,$scope.userPassword).then(function(){$ionicPopup.alert({title:"Operation successful",template:"Your profile has been successfully updated.",cssClass:"you-one-popup"})},function(error){tqErrorListPopup.showResponseErrors("",{subTitle:"Profile updated, Error updating your password: "+error})}):$ionicPopup.alert({title:"Operation successful",template:"Your profile has been successfully updated.",cssClass:"you-one-popup"})):tqErrorListPopup.showResponseErrors(response,{subTitle:"Profile hasn't been updated successfully because of next errors: "})},function(error){$ionicPopup.alert({title:"Operation failed",template:"Profile update operation has been failed. Please check your connection and try again",cssClass:"you-one-popup"})})["finally"](function(){$ionicLoading.hide()})}},$scope.$on("$destroy",function(){$scope.currentUser&&$scope.currentUser.dbOrigins&&($scope.currentUser.rawRecord=angular.copy($scope.currentUser.dbOrigins)),$scope.personAccount&&$scope.personAccount.dbOrigins&&($scope.personAccount.rawRecord=angular.copy($scope.personAccount.dbOrigins))}),this.init()})}),define("app/profile/profile",["angular","coreapi","components/loading/loading","app/profile/preferences/preferences","acnNg/components/input/file/file","app/profile/myprofile/myprofile"],function(angular){return angular.module("mts.profile",["ui.router","ionic-material","tq.coreapi","tq.loading","tq.input.file","mts.myprofile","mts.preferences"]).config(function($stateProvider){$stateProvider.state("profile",{abstract:!0,url:"/profile",templateUrl:"apps/mts/layout/applayout.tpl.html",controller:"MtsProfileCtrl",resolve:{currentUser:function(tqCoreConnector){return tqCoreConnector.user.getUserDataPromise()},personAccount:function(tqCoreConnector,currentUser){var fieldsArray=["Id","Name","Preferred_Name__pc","Middle_Name_or_Initials__pc","PersonBirthdate","PersonMobilePhone","Home_Phone_Intl_Code__c","Home_Phone_Intl_Code_Country__c","Home_Phone_Area_Code__c","Home_Phone_Base_Number__c","On_Tour_Number_Intl__c","On_Tour_Number_Intl_Country__c","On_Tour_Number_Area__c","On_Tour_Number_Base__c","Emergency_Contact_Intl__c","Emergency_Contact_Intl_Country__c","Emergency_Contact_Area__c","Emergency_Contact_Base__c","BillingStreet","BillingCity","BillingState","BillingCountry","BillingPostalCode","Emergency_Contact_Name__c","Emergency_Contact_Relationship__c"];return tqCoreConnector.storage.find({objectApiName:"Account",fields:fieldsArray,where:{Id:{$eq:currentUser.rawRecord.AccountId}}}).then(function(result){return angular.isArray(result)?result.length>0?result[0]:null:result})}},data:{showLoading:!0,headerView:"apps/mts/profile/header.tpl.html",parentFunctionality:"profile",tabs:[{name:"My Profile",state:"profile.edit"},{name:"Communication Options",state:"profile.marketing",functionality:"myProfile.marketingPreferences"},{name:"Travel Options",state:"profile.travel",functionality:"myProfile.travelPreferences"}]}})}).controller("MtsProfileCtrl",function($scope,tqCoreConnector,currentUser,personAccount,$timeout,$rootScope,$state,$ionicLoading,$ionicPopup){$scope.currentUser=currentUser,$scope.personAccount=personAccount,$scope.userProfileImage=tqCoreConnector.user.userInfo.getUserAvatar(),$scope.backgroundImageCss=function(){return"url("+$scope.userProfileImage+")"},$scope.getProperUserName=function(){return $scope.personAccount?$scope.personAccount.rawRecord.Name:$scope.currentUser.rawRecord.Name},$scope.saveUserAvatarToServer=function(event){var imageUrl=event.dataUrl;$ionicLoading.show("Updating your photo..."),tqCoreConnector.user.updateUserAvatar(event.dataUrl).then(function(photoData){$timeout(function(){$ionicLoading.hide(),$ionicPopup.alert({title:"Avatar updated",template:"Avatar was successfully updated on server",cssClass:"you-one-popup"}).then(function(){$scope.userProfileImage=photoData.smallPhotoUrl,$timeout(function(){$rootScope.$broadcast("user-profile-updated",{UserPhotoData:photoData,dataUrl:imageUrl})},1e3)})},2e3)},function(error){$ionicLoading.hide();var seemsLikeTheProblemIsFileSize=error.responseText.indexOf("dimensions are too large")>-1;seemsLikeTheProblemIsFileSize?$ionicPopup.alert({title:"Operation failed",template:"Avatar updating operation failed. The provided photo's dimensions are too large.<br/>Please upload a file that is less than 2MBs in size.",cssClass:"you-one-popup"}):$ionicPopup.alert({title:"Operation failed",template:"Avatar updating operation failed. Try again later",cssClass:"you-one-popup"}),tqCoreConnector.device.file.removeFile(imageUrl)})}})}),define("youOne/tooltip/tooltip",["angular"],function(angular){return angular.module("mts.tooltip",[]).directive("tqTooltip",function(){
return{restrict:"C",link:function(scope,element,attrs){var $element=$(element);$element.attr("title",attrs.title),$element.tooltipster({animation:attrs.animation,position:"top",positionTracker:!0,maxWidth:300,theme:"tooltipster-shadow"})}}})}),define("app/horizon/overview/overview",["angular","coreapi","youOne/tooltip/tooltip"],function(angular){return angular.module("mts.horizon.overview",["tq.coreapi","mts.tooltip"]).config(function($stateProvider){$stateProvider.state("horizon.overview",{url:"/overview",cache:!1,views:{"contentView@horizon":{templateUrl:"apps/mts/horizon/overview/overview.tpl.html",controller:"MTSHorizonOverviewCtrl"}},data:{showLoading:!0,headerView:"apps/mts/horizon/overview/header.tpl.html"},resolve:{currentUser:function(tqCoreConnector){return tqCoreConnector.user.getUserDataPromise()},brochuresAndQuotes:function(currentUser,tqCoreConnector){var fieldsArray=["Id","Brochure_Name__c","Tour_Name__c","Date_Ordered__c","Customer__c","Request_Type__c","Virtual_Brochure_URL__c"];return tqCoreConnector.storage.find({objectApiName:"Request__c",fields:fieldsArray,where:{$and:[{Customer__c:{$eq:currentUser.rawRecord.AccountId}},{Brand__c:{$eq:window.themeId.toUpperCase()}}]},orderby:["Date_Ordered__c DESC"]}).then(function(result){return result},function(error){})}}})}).controller("MTSHorizonOverviewCtrl",function($scope,brochuresAndQuotes,ttcPopupAbout){$scope.overview={},$scope.overview.quotes=[],$scope.overview.brochures=[],ttcPopupAbout.show({title:"About My Horizon",templateUrl:"apps/mts/horizon/aboutHorizonPopoupContent.tpl.html",moduleName:"horizon"});for(var i=0;i<brochuresAndQuotes.length;i++){var item=brochuresAndQuotes[i];"RAQ"===item.rawRecord.Request_Type__c?$scope.overview.quotes.push(item):$scope.overview.brochures.push(item)}})}),define("app/horizon/horizon",["angular","coreapi","youOne/popup/about/about","app/horizon/overview/overview"],function(angular){return angular.module("mts.horizon",["tq.coreapi","mts.horizon.overview","ttc.popup.about"]).config(function($stateProvider){$stateProvider.state("horizon",{url:"/horizon",abstract:!0,templateUrl:"apps/mts/layout/applayout.tpl.html",controller:"MTSHorizonCtrl",data:{templateClass:"mts-my-horizon-template",tabs:[{name:"Overview",state:"horizon.overview"},{name:"Destinations",state:"destinations.visited",functionality:"destinations.visited"}]}})}).controller("MTSHorizonCtrl",function(){})}),define("app/destinations/visited/visited",["angular","isoCountries","coreapi","ionicMaterial"],function(angular,isoCountries){return angular.module("mts.destinations.visited",["ui.router","ionic-material","tq.coreapi","mts.countriesmap"]).config(function($stateProvider){$stateProvider.state("destinations.visited",{url:"/visited",cache:!1,views:{"contentView@destinations":{templateUrl:"apps/mts/destinations/visited/visited.tpl.html",controller:"MtsVisitedCtrl"}}})}).controller("MtsVisitedCtrl",function($scope,$q,$state,tqCoreConnector,mtsDestinations,visitedCountries,visitedlist,wishlist,$ionicScrollDelegate,tqLoading,$translate,mtsCountriesMapDelegate,$timeout){var self=this;$scope.continents=[{name:"Africa",totalCountries:58,percentage:0,visited:0,region:"Africa",image:"continent-africa.png",countries:[]},{name:"Asia",totalCountries:48,percentage:0,visited:0,region:"Asia",image:"continent-asia.png",countries:[]},{name:"Australia & Oceania",totalCountries:27,percentage:0,visited:0,region:"Oceania",image:"continent-australia.png",countries:[]},{name:"Europe",totalCountries:51,percentage:0,visited:0,region:"Europe",image:"continent-europe.png",countries:[]},{name:"North America",totalCountries:23,percentage:0,visited:0,region:"North America",image:"continent-north-america.png",countries:[]},{name:"South America",totalCountries:12,percentage:0,visited:0,region:"South America",image:"continent-south-america.png",countries:[]}];var continentsMap={},totalVisited=0;$scope.visitedCodes=[];var visitedManually=[];$scope.visitedMap={};var initializeContinents=function(){angular.forEach($scope.continents,function(continent){continentsMap[continent.region]=continent,continent.percentage=0,continent.visited=0}),angular.forEach(visitedCountries,function(countryData){var continent=mtsDestinations.getCountryContinent(countryData);continentsMap[continent].countries.push(countryData),continentsMap[continent].visited++,$scope.visitedCodes.push(countryData.alpha2),totalVisited++}),angular.forEach(visitedlist,function(visitedObject){var countryCode=visitedObject.rawRecord.CountryCode__c;if(!_.contains($scope.visitedCodes,countryCode)){$scope.visitedMap[countryCode]=visitedObject;var countryData=isoCountries.findCountryByCode(countryCode),continent=mtsDestinations.getCountryContinent(countryData);continentsMap[continent].countries.push(countryData),continentsMap[continent].visited++,visitedManually.push(countryData.alpha2),totalVisited++}}),angular.forEach($scope.continents,function(continent){continent.percentage=Math.min(100,Math.round(100*continent.visited/continent.totalCountries))})};$scope.selectContinent=function(continent){continent.visited>0&&(continent.expanded=!continent.expanded,$timeout(function(){$ionicScrollDelegate.resize()},50))},initializeContinents(),this.addCountryToList=function(countryCode){tqLoading.show(),mtsDestinations.addCountryToVisited(countryCode).then(function(destinationObject){$scope.visitedMap[countryCode]=destinationObject;var countryData=isoCountries.findCountryByCode(countryCode),continent=continentsMap[mtsDestinations.getCountryContinent(countryData)];continent.countries.push(countryData),continent.visited++,continent.percentage=Math.min(100,Math.round(100*continent.visited/continent.totalCountries)),visitedManually.push(countryData.alpha2),totalVisited++,angular.isArray(visitedlist)&&visitedlist.push(destinationObject),mapDelegate.selectCountries(countryCode,"visited"),mapDelegate.deselectCountries(countryCode,"selected"),setInfoDetailsValues()})["finally"](function(){tqLoading.hide(),$state.reload()})},this.removeCountryFromList=function(countryCode){if($scope.visitedMap[countryCode]){tqLoading.show();var visitedObject=$scope.visitedMap[countryCode],visitedObjectId=visitedObject.rawRecord.Id;if(!visitedObject)return;tqCoreConnector.storage.remove(visitedObject).then(function(response){var index=visitedManually.indexOf(countryCode);index>-1&&visitedManually.splice(index,1);for(var countryData=isoCountries.findCountryByCode(countryCode),continent=continentsMap[mtsDestinations.getCountryContinent(countryData)],cindex=0,clength=continent.countries.length;clength>cindex;cindex++){var country=continent.countries[cindex];if(country.alpha2===countryData.alpha2){continent.countries.splice(cindex,1),continent.visited--,continent.percentage=Math.min(100,Math.round(100*continent.visited/continent.totalCountries)),totalVisited--;break}}if(angular.isArray(visitedlist))for(var vindex=0,vlength=visitedlist.length;vlength>vindex;vindex++)if(visitedlist[vindex].rawRecord.Id==visitedObjectId){visitedlist.splice(vindex,1);break}delete $scope.visitedMap[countryCode],mapDelegate.deselectCountries(countryCode,"visited"),mapDelegate.deselectCountries(countryCode,"selected"),setInfoDetailsValues()},function(error){})["finally"](function(){tqLoading.hide(),$state.reload()})}};var mapDelegate=mtsCountriesMapDelegate.$getByHandle("mts-destinations-map"),deregisterMethod=null;$timeout(function(){setInfoDetailsValues()},300);var countryCodeSelect=function(countryCode){var newCountry=isoCountries.findCountryByCode(countryCode);return _.contains($scope.visitedCodes,countryCode)?($scope.infoDetails.text="You visited "+newCountry.name+" in "+$translate.instant("TRIP_LOWER")+".",$scope.infoDetails.actionText="Type Another Country",void($scope.infoDetails.onClick=null)):($scope.visitedMap[countryCode]?($scope.infoDetails.text=newCountry.name+" has been visited",$scope.infoDetails.actionText="Remove from visited",$scope.infoDetails.onClick=function(){self.removeCountryFromList(countryCode)}):($scope.infoDetails.text=newCountry.name,$scope.infoDetails.actionText="Add to visited",$scope.infoDetails.onClick=function(){self.addCountryToList(countryCode)}),$scope.infoDetails.countrySelectEnabled=!1,void $scope.$evalAsync())},setInfoDetailsValues=function(){!$scope.infoDetails&&mtsDestinations.infoDetails&&($scope.infoDetails=mtsDestinations.infoDetails),$scope.infoDetails.text="Total number of countries visited - "+Math.min(100,Math.round(100*totalVisited/192))+"%",$scope.infoDetails.actionText="Type Country",$scope.infoDetails.onClick=null,$scope.infoDetails.countrySelectEnabled=!0,$scope.infoDetails.onCountrySelect=countryCodeSelect};$timeout(function(){mapDelegate.setSelectable(!0),mapDelegate.setMapCssClass("visited-map"),mapDelegate.selectCountries($scope.visitedCodes,"visited"),mapDelegate.selectCountries(visitedManually,"visited"),mapDelegate.deselectCountries($scope.visitedCodes,"selectable"),deregisterMethod=mapDelegate.onCountrySelect(countryCodeSelect)},300),$scope.$on("$destroy",function(){mapDelegate.clearMap(),mapDelegate=null,angular.isFunction(deregisterMethod)&&deregisterMethod()})})}),define("app/destinations/bucketlist/bucketlist",["angular","isoCountries","coreapi","ionicMaterial"],function(angular,isoCountries){return angular.module("mts.destinations.bucketlist",["ui.router","ionic-material","tq.coreapi","mts.countriesmap"]).config(function($stateProvider){$stateProvider.state("destinations.bucketlist",{url:"/bucketlist",cache:!1,views:{"contentView@destinations":{templateUrl:"apps/mts/destinations/bucketlist/bucketlist.tpl.html",controller:"MtsBucketlistCtrl"}}})}).controller("MtsBucketlistCtrl",function($scope,$q,$state,tqCoreConnector,mtsDestinations,visitedCountries,mtsCountriesMapDelegate,$timeout,wishlist,visitedlist,tqLoading){var self=this;$scope.wishList=[],$scope.wishMap={},$scope.selectedCountry=null;var mapDelegate=mtsCountriesMapDelegate.$getByHandle("mts-destinations-map"),deregisterMethod=null;this.sortCountries=function(){$scope.wishList.sort(function(el1,el2){return el1.countryData.name>el2.countryData.name?1:-1})},this.addCountryToList=function(countryCode){tqLoading.show(),mtsDestinations.addCountryToWishlist(countryCode).then(function(destinationObject){var newCountry=isoCountries.findCountryByCode(countryCode);angular.isArray(wishlist)&&destinationObject&&wishlist.push(destinationObject);var countryData={countryData:newCountry,wishlistObject:destinationObject};$scope.wishList.push(countryData),$scope.wishMap[countryCode]=countryData,mapDelegate.selectCountries(countryCode,"wishlist"),self.sortCountries(),self.setDefaultInfo(),mapDelegate.deselectCountries(countryCode,"selected")})["finally"](function(){tqLoading.hide()})},this.removeCountryFromList=function(countryCode){if($scope.wishMap[countryCode]){tqLoading.show();var countryData=$scope.wishMap[countryCode];tqCoreConnector.storage.remove(countryData.wishlistObject).then(function(response){var index=$scope.wishList.indexOf(countryData);if(index>-1&&$scope.wishList.splice(index,1),angular.isArray(wishlist))for(var wIndex=0;wIndex<wishlist.length;wIndex++)if(wishlist[wIndex].rawRecord.Id==countryData.wishlistObject.rawRecord.Id){wishlist.splice(wIndex,1);break}delete $scope.wishMap[countryCode],mapDelegate.deselectCountries(countryCode,"wishlist"),mapDelegate.deselectCountries(countryCode,"selected"),self.setDefaultInfo()},function(error){})["finally"](function(){tqLoading.hide()})}},this.toggleCountryInList=function(countryCode){$scope.wishMap[countryCode]?this.removeCountryFromList(countryCode):this.addCountryToList(countryCode),$scope.$evalAsync()},this.initCountries=function(){$scope.wishList=[],$scope.wishMap={};var selectedCodesList=[];angular.isArray(wishlist)&&angular.forEach(wishlist,function(wishlistObject){var countryCode=wishlistObject.rawRecord.CountryCode__c,newCountry=isoCountries.findCountryByCode(countryCode),countryData={countryData:newCountry,wishlistObject:wishlistObject};selectedCodesList.push(countryCode),$scope.wishMap[countryCode]=countryData,$scope.wishList.push(countryData)}),$timeout(function(){mapDelegate.selectCountries(selectedCodesList,"wishlist")},200),this.sortCountries()},this.initCountries();var countryCodeSelect=function(countryCode){var newCountry=isoCountries.findCountryByCode(countryCode);$scope.wishMap[countryCode]?($scope.infoDetails.text=newCountry.name+" is in wishlist",$scope.infoDetails.actionText="Remove from wishlist",$scope.infoDetails.onClick=function(){self.removeCountryFromList(countryCode)}):($scope.infoDetails.text=newCountry.name,$scope.infoDetails.actionText="Add to wishlist",$scope.infoDetails.onClick=function(){self.addCountryToList(countryCode)}),$scope.infoDetails.countrySelectEnabled=!1,$scope.$evalAsync()};$timeout(function(){mapDelegate.setSelectable(!0),mapDelegate.setMapCssClass("wishlist-map"),deregisterMethod=mapDelegate.onCountrySelect(countryCodeSelect)},300),this.setDefaultInfo=function(){$scope.infoDetails.text="Select or type country you want to visit",$scope.infoDetails.actionText="Type Country",$scope.infoDetails.onClick=null,$scope.infoDetails.countrySelectEnabled=!0,$scope.infoDetails.onCountrySelect=countryCodeSelect},this.setDefaultInfo(),$scope.$on("$destroy",function(){angular.isFunction(deregisterMethod)&&(deregisterMethod(),deregisterMethod=null),mapDelegate.clearMap(),mapDelegate=null,$scope.infoDetails.onClick=null,$scope.infoDetails.onCountrySelect=null})})}),!function(){function d3_documentElement(node){return node&&(node.ownerDocument||node.document||node).documentElement}function d3_window(node){return node&&(node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView)}function d3_ascending(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function d3_number(x){return null===x?NaN:+x}function d3_numeric(x){return!isNaN(x)}function d3_bisector(compare){return{left:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);hi>lo;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);hi>lo;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}function d3_zipLength(d){return d.length}function d3_range_integerScale(x){for(var k=1;x*k%1;)k*=10;return k}function d3_class(ctor,properties){for(var key in properties)Object.defineProperty(ctor.prototype,key,{value:properties[key],enumerable:!1})}function d3_Map(){this._=Object.create(null)}function d3_map_escape(key){return(key+="")===d3_map_proto||key[0]===d3_map_zero?d3_map_zero+key:key}function d3_map_unescape(key){return(key+="")[0]===d3_map_zero?key.slice(1):key}function d3_map_has(key){return d3_map_escape(key)in this._}function d3_map_remove(key){return(key=d3_map_escape(key))in this._&&delete this._[key]}function d3_map_keys(){var keys=[];for(var key in this._)keys.push(d3_map_unescape(key));return keys}function d3_map_size(){var size=0;for(var key in this._)++size;return size}function d3_map_empty(){for(var key in this._)return!1;return!0}function d3_Set(){this._=Object.create(null)}function d3_identity(d){return d}function d3_rebind(target,source,method){return function(){var value=method.apply(source,arguments);return value===source?target:value}}function d3_vendorSymbol(object,name){if(name in object)return name;name=name.charAt(0).toUpperCase()+name.slice(1);for(var i=0,n=d3_vendorPrefixes.length;n>i;++i){var prefixName=d3_vendorPrefixes[i]+name;if(prefixName in object)return prefixName}}function d3_noop(){}function d3_dispatch(){}function d3_dispatch_event(dispatch){function event(){for(var l,z=listeners,i=-1,n=z.length;++i<n;)(l=z[i].on)&&l.apply(this,arguments);return dispatch}var listeners=[],listenerByName=new d3_Map;return event.on=function(name,listener){var i,l=listenerByName.get(name);return arguments.length<2?l&&l.on:(l&&(l.on=null,listeners=listeners.slice(0,i=listeners.indexOf(l)).concat(listeners.slice(i+1)),listenerByName.remove(name)),listener&&listeners.push(listenerByName.set(name,{on:listener})),dispatch)},event}function d3_eventPreventDefault(){d3.event.preventDefault()}function d3_eventSource(){for(var s,e=d3.event;s=e.sourceEvent;)e=s;return e}function d3_eventDispatch(target){for(var dispatch=new d3_dispatch,i=0,n=arguments.length;++i<n;)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch.of=function(thiz,argumentz){return function(e1){try{var e0=e1.sourceEvent=d3.event;e1.target=target,d3.event=e1,dispatch[e1.type].apply(thiz,argumentz)}finally{d3.event=e0}}},dispatch}function d3_selection(groups){return d3_subclass(groups,d3_selectionPrototype),groups}function d3_selection_selector(selector){return"function"==typeof selector?selector:function(){return d3_select(selector,this)}}function d3_selection_selectorAll(selector){return"function"==typeof selector?selector:function(){return d3_selectAll(selector,this)}}function d3_selection_attr(name,value){function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrConstant(){this.setAttribute(name,value)}function attrConstantNS(){this.setAttributeNS(name.space,name.local,value)}function attrFunction(){var x=value.apply(this,arguments);null==x?this.removeAttribute(name):this.setAttribute(name,x)}function attrFunctionNS(){var x=value.apply(this,arguments);null==x?this.removeAttributeNS(name.space,name.local):this.setAttributeNS(name.space,name.local,x)}return name=d3.ns.qualify(name),null==value?name.local?attrNullNS:attrNull:"function"==typeof value?name.local?attrFunctionNS:attrFunction:name.local?attrConstantNS:attrConstant}function d3_collapse(s){return s.trim().replace(/\s+/g," ")}function d3_selection_classedRe(name){return new RegExp("(?:^|\\s+)"+d3.requote(name)+"(?:\\s+|$)","g")}function d3_selection_classes(name){return(name+"").trim().split(/^|\s+/)}function d3_selection_classed(name,value){function classedConstant(){for(var i=-1;++i<n;)name[i](this,value)}function classedFunction(){for(var i=-1,x=value.apply(this,arguments);++i<n;)name[i](this,x)}name=d3_selection_classes(name).map(d3_selection_classedName);var n=name.length;return"function"==typeof value?classedFunction:classedConstant}function d3_selection_classedName(name){var re=d3_selection_classedRe(name);return function(node,value){if(c=node.classList)return value?c.add(name):c.remove(name);var c=node.getAttribute("class")||"";value?(re.lastIndex=0,re.test(c)||node.setAttribute("class",d3_collapse(c+" "+name))):node.setAttribute("class",d3_collapse(c.replace(re," ")))}}function d3_selection_style(name,value,priority){function styleNull(){this.style.removeProperty(name)}function styleConstant(){this.style.setProperty(name,value,priority)}function styleFunction(){var x=value.apply(this,arguments);null==x?this.style.removeProperty(name):this.style.setProperty(name,x,priority)}return null==value?styleNull:"function"==typeof value?styleFunction:styleConstant}function d3_selection_property(name,value){function propertyNull(){delete this[name]}function propertyConstant(){this[name]=value}function propertyFunction(){var x=value.apply(this,arguments);null==x?delete this[name]:this[name]=x}return null==value?propertyNull:"function"==typeof value?propertyFunction:propertyConstant}function d3_selection_creator(name){function create(){var document=this.ownerDocument,namespace=this.namespaceURI;return namespace?document.createElementNS(namespace,name):document.createElement(name)}function createNS(){return this.ownerDocument.createElementNS(name.space,name.local)}return"function"==typeof name?name:(name=d3.ns.qualify(name)).local?createNS:create}function d3_selectionRemove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function d3_selection_dataNode(data){return{__data__:data}}function d3_selection_filter(selector){return function(){return d3_selectMatches(this,selector)}}function d3_selection_sortComparator(comparator){return arguments.length||(comparator=d3_ascending),function(a,b){return a&&b?comparator(a.__data__,b.__data__):!a-!b}}function d3_selection_each(groups,callback){for(var j=0,m=groups.length;m>j;j++)for(var node,group=groups[j],i=0,n=group.length;n>i;i++)(node=group[i])&&callback(node,i,j);return groups}function d3_selection_enter(selection){return d3_subclass(selection,d3_selection_enterPrototype),selection}function d3_selection_enterInsertBefore(enter){var i0,j0;return function(d,i,j){var node,group=enter[j].update,n=group.length;for(j!=j0&&(j0=j,i0=0),i>=i0&&(i0=i+1);!(node=group[i0])&&++i0<n;);return node}}function d3_selection_on(type,listener,capture){function onRemove(){var l=this[name];l&&(this.removeEventListener(type,l,l.$),delete this[name])}function onAdd(){var l=wrap(listener,d3_array(arguments));onRemove.call(this),this.addEventListener(type,this[name]=l,l.$=capture),l._=listener}function removeAll(){var match,re=new RegExp("^__on([^.]+)"+d3.requote(type)+"$");for(var name in this)if(match=name.match(re)){var l=this[name];this.removeEventListener(match[1],l,l.$),delete this[name]}}var name="__on"+type,i=type.indexOf("."),wrap=d3_selection_onListener;i>0&&(type=type.slice(0,i));var filter=d3_selection_onFilters.get(type);return filter&&(type=filter,wrap=d3_selection_onFilter),i?listener?onAdd:onRemove:listener?d3_noop:removeAll}function d3_selection_onListener(listener,argumentz){return function(e){var o=d3.event;d3.event=e,argumentz[0]=this.__data__;try{listener.apply(this,argumentz)}finally{d3.event=o}}}function d3_selection_onFilter(listener,argumentz){var l=d3_selection_onListener(listener,argumentz);return function(e){var target=this,related=e.relatedTarget;related&&(related===target||8&related.compareDocumentPosition(target))||l.call(target,e)}}function d3_event_dragSuppress(node){var name=".dragsuppress-"+ ++d3_event_dragId,click="click"+name,w=d3.select(d3_window(node)).on("touchmove"+name,d3_eventPreventDefault).on("dragstart"+name,d3_eventPreventDefault).on("selectstart"+name,d3_eventPreventDefault);if(null==d3_event_dragSelect&&(d3_event_dragSelect="onselectstart"in node?!1:d3_vendorSymbol(node.style,"userSelect")),d3_event_dragSelect){var style=d3_documentElement(node).style,select=style[d3_event_dragSelect];style[d3_event_dragSelect]="none"}return function(suppressClick){if(w.on(name,null),d3_event_dragSelect&&(style[d3_event_dragSelect]=select),suppressClick){var off=function(){w.on(click,null)};w.on(click,function(){d3_eventPreventDefault(),off()},!0),setTimeout(off,0)}}}function d3_mousePoint(container,e){e.changedTouches&&(e=e.changedTouches[0]);var svg=container.ownerSVGElement||container;if(svg.createSVGPoint){var point=svg.createSVGPoint();if(0>d3_mouse_bug44083){var window=d3_window(container);if(window.scrollX||window.scrollY){svg=d3.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ctm=svg[0][0].getScreenCTM();d3_mouse_bug44083=!(ctm.f||ctm.e),svg.remove()}}return d3_mouse_bug44083?(point.x=e.pageX,point.y=e.pageY):(point.x=e.clientX,point.y=e.clientY),point=point.matrixTransform(container.getScreenCTM().inverse()),[point.x,point.y]}var rect=container.getBoundingClientRect();return[e.clientX-rect.left-container.clientLeft,e.clientY-rect.top-container.clientTop]}function d3_behavior_dragTouchId(){return d3.event.changedTouches[0].identifier}function d3_sgn(x){return x>0?1:0>x?-1:0}function d3_cross2d(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function d3_acos(x){return x>1?0:-1>x?π:Math.acos(x)}function d3_asin(x){return x>1?halfπ:-1>x?-halfπ:Math.asin(x)}function d3_sinh(x){return((x=Math.exp(x))-1/x)/2}function d3_cosh(x){return((x=Math.exp(x))+1/x)/2}function d3_tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}function d3_haversin(x){return(x=Math.sin(x/2))*x}function d3_color(){}function d3_hsl(h,s,l){return this instanceof d3_hsl?(this.h=+h,this.s=+s,void(this.l=+l)):arguments.length<2?h instanceof d3_hsl?new d3_hsl(h.h,h.s,h.l):d3_rgb_parse(""+h,d3_rgb_hsl,d3_hsl):new d3_hsl(h,s,l)}function d3_hsl_rgb(h,s,l){function v(h){return h>360?h-=360:0>h&&(h+=360),60>h?m1+(m2-m1)*h/60:180>h?m2:240>h?m1+(m2-m1)*(240-h)/60:m1}function vv(h){return Math.round(255*v(h))}var m1,m2;return h=isNaN(h)?0:(h%=360)<0?h+360:h,s=isNaN(s)?0:0>s?0:s>1?1:s,l=0>l?0:l>1?1:l,m2=.5>=l?l*(1+s):l+s-l*s,m1=2*l-m2,new d3_rgb(vv(h+120),vv(h),vv(h-120))}function d3_hcl(h,c,l){return this instanceof d3_hcl?(this.h=+h,this.c=+c,void(this.l=+l)):arguments.length<2?h instanceof d3_hcl?new d3_hcl(h.h,h.c,h.l):h instanceof d3_lab?d3_lab_hcl(h.l,h.a,h.b):d3_lab_hcl((h=d3_rgb_lab((h=d3.rgb(h)).r,h.g,h.b)).l,h.a,h.b):new d3_hcl(h,c,l)}function d3_hcl_lab(h,c,l){return isNaN(h)&&(h=0),isNaN(c)&&(c=0),new d3_lab(l,Math.cos(h*=d3_radians)*c,Math.sin(h)*c)}function d3_lab(l,a,b){return this instanceof d3_lab?(this.l=+l,this.a=+a,void(this.b=+b)):arguments.length<2?l instanceof d3_lab?new d3_lab(l.l,l.a,l.b):l instanceof d3_hcl?d3_hcl_lab(l.h,l.c,l.l):d3_rgb_lab((l=d3_rgb(l)).r,l.g,l.b):new d3_lab(l,a,b)}function d3_lab_rgb(l,a,b){var y=(l+16)/116,x=y+a/500,z=y-b/200;return x=d3_lab_xyz(x)*d3_lab_X,y=d3_lab_xyz(y)*d3_lab_Y,z=d3_lab_xyz(z)*d3_lab_Z,new d3_rgb(d3_xyz_rgb(3.2404542*x-1.5371385*y-.4985314*z),d3_xyz_rgb(-.969266*x+1.8760108*y+.041556*z),d3_xyz_rgb(.0556434*x-.2040259*y+1.0572252*z))}function d3_lab_hcl(l,a,b){return l>0?new d3_hcl(Math.atan2(b,a)*d3_degrees,Math.sqrt(a*a+b*b),l):new d3_hcl(NaN,NaN,l)}function d3_lab_xyz(x){return x>.206893034?x*x*x:(x-4/29)/7.787037}function d3_xyz_lab(x){return x>.008856?Math.pow(x,1/3):7.787037*x+4/29}function d3_xyz_rgb(r){return Math.round(255*(.00304>=r?12.92*r:1.055*Math.pow(r,1/2.4)-.055))}function d3_rgb(r,g,b){return this instanceof d3_rgb?(this.r=~~r,this.g=~~g,void(this.b=~~b)):arguments.length<2?r instanceof d3_rgb?new d3_rgb(r.r,r.g,r.b):d3_rgb_parse(""+r,d3_rgb,d3_hsl_rgb):new d3_rgb(r,g,b)}function d3_rgbNumber(value){return new d3_rgb(value>>16,value>>8&255,255&value)}function d3_rgbString(value){return d3_rgbNumber(value)+""}function d3_rgb_hex(v){return 16>v?"0"+Math.max(0,v).toString(16):Math.min(255,v).toString(16)}function d3_rgb_parse(format,rgb,hsl){format=format.toLowerCase();var m1,m2,color,r=0,g=0,b=0;if(m1=/([a-z]+)\((.*)\)/.exec(format))switch(m2=m1[2].split(","),m1[1]){case"hsl":return hsl(parseFloat(m2[0]),parseFloat(m2[1])/100,parseFloat(m2[2])/100);case"rgb":return rgb(d3_rgb_parseNumber(m2[0]),d3_rgb_parseNumber(m2[1]),d3_rgb_parseNumber(m2[2]))}return(color=d3_rgb_names.get(format))?rgb(color.r,color.g,color.b):(null==format||"#"!==format.charAt(0)||isNaN(color=parseInt(format.slice(1),16))||(4===format.length?(r=(3840&color)>>4,r=r>>4|r,g=240&color,g=g>>4|g,b=15&color,b=b<<4|b):7===format.length&&(r=(16711680&color)>>16,g=(65280&color)>>8,b=255&color)),rgb(r,g,b))}function d3_rgb_hsl(r,g,b){var h,s,min=Math.min(r/=255,g/=255,b/=255),max=Math.max(r,g,b),d=max-min,l=(max+min)/2;return d?(s=.5>l?d/(max+min):d/(2-max-min),h=r==max?(g-b)/d+(b>g?6:0):g==max?(b-r)/d+2:(r-g)/d+4,h*=60):(h=NaN,s=l>0&&1>l?0:h),new d3_hsl(h,s,l)}function d3_rgb_lab(r,g,b){r=d3_rgb_xyz(r),g=d3_rgb_xyz(g),b=d3_rgb_xyz(b);var x=d3_xyz_lab((.4124564*r+.3575761*g+.1804375*b)/d3_lab_X),y=d3_xyz_lab((.2126729*r+.7151522*g+.072175*b)/d3_lab_Y),z=d3_xyz_lab((.0193339*r+.119192*g+.9503041*b)/d3_lab_Z);return d3_lab(116*y-16,500*(x-y),200*(y-z))}function d3_rgb_xyz(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function d3_rgb_parseNumber(c){var f=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*f):f}function d3_functor(v){return"function"==typeof v?v:function(){return v}}function d3_xhrType(response){return function(url,mimeType,callback){return 2===arguments.length&&"function"==typeof mimeType&&(callback=mimeType,mimeType=null),d3_xhr(url,mimeType,response,callback)}}function d3_xhr(url,mimeType,response,callback){function respond(){var result,status=request.status;if(!status&&d3_xhrHasResponse(request)||status>=200&&300>status||304===status){try{result=response.call(xhr,request)}catch(e){return void dispatch.error.call(xhr,e)}dispatch.load.call(xhr,result)}else dispatch.error.call(xhr,request)}var xhr={},dispatch=d3.dispatch("beforesend","progress","load","error"),headers={},request=new XMLHttpRequest,responseType=null;return!this.XDomainRequest||"withCredentials"in request||!/^(http(s)?:)?\/\//.test(url)||(request=new XDomainRequest),"onload"in request?request.onload=request.onerror=respond:request.onreadystatechange=function(){request.readyState>3&&respond()},request.onprogress=function(event){var o=d3.event;d3.event=event;try{dispatch.progress.call(xhr,request)}finally{d3.event=o}},xhr.header=function(name,value){return name=(name+"").toLowerCase(),arguments.length<2?headers[name]:(null==value?delete headers[name]:headers[name]=value+"",xhr)},xhr.mimeType=function(value){return arguments.length?(mimeType=null==value?null:value+"",xhr):mimeType},xhr.responseType=function(value){return arguments.length?(responseType=value,xhr):responseType},xhr.response=function(value){return response=value,xhr},["get","post"].forEach(function(method){xhr[method]=function(){return xhr.send.apply(xhr,[method].concat(d3_array(arguments)))}}),xhr.send=function(method,data,callback){if(2===arguments.length&&"function"==typeof data&&(callback=data,data=null),request.open(method,url,!0),null==mimeType||"accept"in headers||(headers.accept=mimeType+",*/*"),request.setRequestHeader)for(var name in headers)request.setRequestHeader(name,headers[name]);return null!=mimeType&&request.overrideMimeType&&request.overrideMimeType(mimeType),null!=responseType&&(request.responseType=responseType),null!=callback&&xhr.on("error",callback).on("load",function(request){callback(null,request)}),dispatch.beforesend.call(xhr,request),request.send(null==data?null:data),xhr},xhr.abort=function(){return request.abort(),xhr},d3.rebind(xhr,dispatch,"on"),null==callback?xhr:xhr.get(d3_xhr_fixCallback(callback))}function d3_xhr_fixCallback(callback){return 1===callback.length?function(error,request){callback(null==error?request:null)}:callback}function d3_xhrHasResponse(request){var type=request.responseType;return type&&"text"!==type?request.response:request.responseText}function d3_timer_step(){var now=d3_timer_mark(),delay=d3_timer_sweep()-now;delay>24?(isFinite(delay)&&(clearTimeout(d3_timer_timeout),d3_timer_timeout=setTimeout(d3_timer_step,delay)),d3_timer_interval=0):(d3_timer_interval=1,d3_timer_frame(d3_timer_step))}function d3_timer_mark(){var now=Date.now();for(d3_timer_active=d3_timer_queueHead;d3_timer_active;)now>=d3_timer_active.t&&(d3_timer_active.f=d3_timer_active.c(now-d3_timer_active.t)),d3_timer_active=d3_timer_active.n;return now}function d3_timer_sweep(){for(var t0,t1=d3_timer_queueHead,time=1/0;t1;)t1.f?t1=t0?t0.n=t1.n:d3_timer_queueHead=t1.n:(t1.t<time&&(time=t1.t),t1=(t0=t1).n);return d3_timer_queueTail=t0,time}function d3_format_precision(x,p){return p-(x?Math.ceil(Math.log(x)/Math.LN10):1)}function d3_formatPrefix(d,i){var k=Math.pow(10,3*abs(8-i));return{scale:i>8?function(d){return d/k}:function(d){return d*k},symbol:d}}function d3_locale_numberFormat(locale){var locale_decimal=locale.decimal,locale_thousands=locale.thousands,locale_grouping=locale.grouping,locale_currency=locale.currency,formatGroup=locale_grouping&&locale_thousands?function(value,width){for(var i=value.length,t=[],j=0,g=locale_grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=locale_grouping[j=(j+1)%locale_grouping.length];return t.reverse().join(locale_thousands)}:d3_identity;return function(specifier){var match=d3_format_re.exec(specifier),fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zfill=match[5],width=+match[6],comma=match[7],precision=match[8],type=match[9],scale=1,prefix="",suffix="",integer=!1,exponent=!0;switch(precision&&(precision=+precision.substring(1)),(zfill||"0"===fill&&"="===align)&&(zfill=fill="0",
align="="),type){case"n":comma=!0,type="g";break;case"%":scale=100,suffix="%",type="f";break;case"p":scale=100,suffix="%",type="r";break;case"b":case"o":case"x":case"X":"#"===symbol&&(prefix="0"+type.toLowerCase());case"c":exponent=!1;case"d":integer=!0,precision=0;break;case"s":scale=-1,type="r"}"$"===symbol&&(prefix=locale_currency[0],suffix=locale_currency[1]),"r"!=type||precision||(type="g"),null!=precision&&("g"==type?precision=Math.max(1,Math.min(21,precision)):("e"==type||"f"==type)&&(precision=Math.max(0,Math.min(20,precision)))),type=d3_format_types.get(type)||d3_format_typeDefault;var zcomma=zfill&&comma;return function(value){var fullSuffix=suffix;if(integer&&value%1)return"";var negative=0>value||0===value&&0>1/value?(value=-value,"-"):"-"===sign?"":sign;if(0>scale){var unit=d3.formatPrefix(value,precision);value=unit.scale(value),fullSuffix=unit.symbol+suffix}else value*=scale;value=type(value,precision);var before,after,i=value.lastIndexOf(".");if(0>i){var j=exponent?value.lastIndexOf("e"):-1;0>j?(before=value,after=""):(before=value.substring(0,j),after=value.substring(j))}else before=value.substring(0,i),after=locale_decimal+value.substring(i+1);!zfill&&comma&&(before=formatGroup(before,1/0));var length=prefix.length+before.length+after.length+(zcomma?0:negative.length),padding=width>length?new Array(length=width-length+1).join(fill):"";return zcomma&&(before=formatGroup(padding+before,padding.length?width-after.length:1/0)),negative+=prefix,value=before+after,("<"===align?negative+value+padding:">"===align?padding+negative+value:"^"===align?padding.substring(0,length>>=1)+negative+value+padding.substring(length):negative+(zcomma?value:padding+value))+fullSuffix}}}function d3_format_typeDefault(x){return x+""}function d3_date_utc(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function d3_time_interval(local,step,number){function round(date){var d0=local(date),d1=offset(d0,1);return d1-date>date-d0?d0:d1}function ceil(date){return step(date=local(new d3_date(date-1)),1),date}function offset(date,k){return step(date=new d3_date(+date),k),date}function range(t0,t1,dt){var time=ceil(t0),times=[];if(dt>1)for(;t1>time;)number(time)%dt||times.push(new Date(+time)),step(time,1);else for(;t1>time;)times.push(new Date(+time)),step(time,1);return times}function range_utc(t0,t1,dt){try{d3_date=d3_date_utc;var utc=new d3_date_utc;return utc._=t0,range(utc,t1,dt)}finally{d3_date=Date}}local.floor=local,local.round=round,local.ceil=ceil,local.offset=offset,local.range=range;var utc=local.utc=d3_time_interval_utc(local);return utc.floor=utc,utc.round=d3_time_interval_utc(round),utc.ceil=d3_time_interval_utc(ceil),utc.offset=d3_time_interval_utc(offset),utc.range=range_utc,local}function d3_time_interval_utc(method){return function(date,k){try{d3_date=d3_date_utc;var utc=new d3_date_utc;return utc._=date,method(utc,k)._}finally{d3_date=Date}}}function d3_locale_timeFormat(locale){function d3_time_format(template){function format(date){for(var c,p,f,string=[],i=-1,j=0;++i<n;)37===template.charCodeAt(i)&&(string.push(template.slice(j,i)),null!=(p=d3_time_formatPads[c=template.charAt(++i)])&&(c=template.charAt(++i)),(f=d3_time_formats[c])&&(c=f(date,null==p?"e"===c?" ":"0":p)),string.push(c),j=i+1);return string.push(template.slice(j,i)),string.join("")}var n=template.length;return format.parse=function(string){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=d3_time_parse(d,template,string,0);if(i!=string.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var localZ=null!=d.Z&&d3_date!==d3_date_utc,date=new(localZ?d3_date_utc:d3_date);return"j"in d?date.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(date.setFullYear(d.y,0,1),date.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(date.getDay()+5)%7:d.w+7*d.U-(date.getDay()+6)%7)):date.setFullYear(d.y,d.m,d.d),date.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),localZ?date._:date},format.toString=function(){return template},format}function d3_time_parse(date,template,string,j){for(var c,p,t,i=0,n=template.length,m=string.length;n>i;){if(j>=m)return-1;if(c=template.charCodeAt(i++),37===c){if(t=template.charAt(i++),p=d3_time_parsers[t in d3_time_formatPads?template.charAt(i++):t],!p||(j=p(date,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}function d3_time_parseWeekdayAbbrev(date,string,i){d3_time_dayAbbrevRe.lastIndex=0;var n=d3_time_dayAbbrevRe.exec(string.slice(i));return n?(date.w=d3_time_dayAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseWeekday(date,string,i){d3_time_dayRe.lastIndex=0;var n=d3_time_dayRe.exec(string.slice(i));return n?(date.w=d3_time_dayLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonthAbbrev(date,string,i){d3_time_monthAbbrevRe.lastIndex=0;var n=d3_time_monthAbbrevRe.exec(string.slice(i));return n?(date.m=d3_time_monthAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonth(date,string,i){d3_time_monthRe.lastIndex=0;var n=d3_time_monthRe.exec(string.slice(i));return n?(date.m=d3_time_monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseLocaleFull(date,string,i){return d3_time_parse(date,d3_time_formats.c.toString(),string,i)}function d3_time_parseLocaleDate(date,string,i){return d3_time_parse(date,d3_time_formats.x.toString(),string,i)}function d3_time_parseLocaleTime(date,string,i){return d3_time_parse(date,d3_time_formats.X.toString(),string,i)}function d3_time_parseAmPm(date,string,i){var n=d3_time_periodLookup.get(string.slice(i,i+=2).toLowerCase());return null==n?-1:(date.p=n,i)}var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_days=locale.days,locale_shortDays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;d3_time_format.utc=function(template){function format(date){try{d3_date=d3_date_utc;var utc=new d3_date;return utc._=date,local(utc)}finally{d3_date=Date}}var local=d3_time_format(template);return format.parse=function(string){try{d3_date=d3_date_utc;var date=local.parse(string);return date&&date._}finally{d3_date=Date}},format.toString=local.toString,format},d3_time_format.multi=d3_time_format.utc.multi=d3_time_formatMulti;var d3_time_periodLookup=d3.map(),d3_time_dayRe=d3_time_formatRe(locale_days),d3_time_dayLookup=d3_time_formatLookup(locale_days),d3_time_dayAbbrevRe=d3_time_formatRe(locale_shortDays),d3_time_dayAbbrevLookup=d3_time_formatLookup(locale_shortDays),d3_time_monthRe=d3_time_formatRe(locale_months),d3_time_monthLookup=d3_time_formatLookup(locale_months),d3_time_monthAbbrevRe=d3_time_formatRe(locale_shortMonths),d3_time_monthAbbrevLookup=d3_time_formatLookup(locale_shortMonths);locale_periods.forEach(function(p,i){d3_time_periodLookup.set(p.toLowerCase(),i)});var d3_time_formats={a:function(d){return locale_shortDays[d.getDay()]},A:function(d){return locale_days[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:d3_time_format(locale_dateTime),d:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},e:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},H:function(d,p){return d3_time_formatPad(d.getHours(),p,2)},I:function(d,p){return d3_time_formatPad(d.getHours()%12||12,p,2)},j:function(d,p){return d3_time_formatPad(1+d3_time.dayOfYear(d),p,3)},L:function(d,p){return d3_time_formatPad(d.getMilliseconds(),p,3)},m:function(d,p){return d3_time_formatPad(d.getMonth()+1,p,2)},M:function(d,p){return d3_time_formatPad(d.getMinutes(),p,2)},p:function(d){return locale_periods[+(d.getHours()>=12)]},S:function(d,p){return d3_time_formatPad(d.getSeconds(),p,2)},U:function(d,p){return d3_time_formatPad(d3_time.sundayOfYear(d),p,2)},w:function(d){return d.getDay()},W:function(d,p){return d3_time_formatPad(d3_time.mondayOfYear(d),p,2)},x:d3_time_format(locale_date),X:d3_time_format(locale_time),y:function(d,p){return d3_time_formatPad(d.getFullYear()%100,p,2)},Y:function(d,p){return d3_time_formatPad(d.getFullYear()%1e4,p,4)},Z:d3_time_zone,"%":function(){return"%"}},d3_time_parsers={a:d3_time_parseWeekdayAbbrev,A:d3_time_parseWeekday,b:d3_time_parseMonthAbbrev,B:d3_time_parseMonth,c:d3_time_parseLocaleFull,d:d3_time_parseDay,e:d3_time_parseDay,H:d3_time_parseHour24,I:d3_time_parseHour24,j:d3_time_parseDayOfYear,L:d3_time_parseMilliseconds,m:d3_time_parseMonthNumber,M:d3_time_parseMinutes,p:d3_time_parseAmPm,S:d3_time_parseSeconds,U:d3_time_parseWeekNumberSunday,w:d3_time_parseWeekdayNumber,W:d3_time_parseWeekNumberMonday,x:d3_time_parseLocaleDate,X:d3_time_parseLocaleTime,y:d3_time_parseYear,Y:d3_time_parseFullYear,Z:d3_time_parseZone,"%":d3_time_parseLiteralPercent};return d3_time_format}function d3_time_formatPad(value,fill,width){var sign=0>value?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(width>length?new Array(width-length+1).join(fill)+string:string)}function d3_time_formatRe(names){return new RegExp("^(?:"+names.map(d3.requote).join("|")+")","i")}function d3_time_formatLookup(names){for(var map=new d3_Map,i=-1,n=names.length;++i<n;)map.set(names[i].toLowerCase(),i);return map}function d3_time_parseWeekdayNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+1));return n?(date.w=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberSunday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.U=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberMonday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.W=+n[0],i+n[0].length):-1}function d3_time_parseFullYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+4));return n?(date.y=+n[0],i+n[0].length):-1}function d3_time_parseYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.y=d3_time_expandYear(+n[0]),i+n[0].length):-1}function d3_time_parseZone(date,string,i){return/^[+-]\d{4}$/.test(string=string.slice(i,i+5))?(date.Z=-string,i+5):-1}function d3_time_expandYear(d){return d+(d>68?1900:2e3)}function d3_time_parseMonthNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.m=n[0]-1,i+n[0].length):-1}function d3_time_parseDay(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.d=+n[0],i+n[0].length):-1}function d3_time_parseDayOfYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.j=+n[0],i+n[0].length):-1}function d3_time_parseHour24(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.H=+n[0],i+n[0].length):-1}function d3_time_parseMinutes(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.M=+n[0],i+n[0].length):-1}function d3_time_parseSeconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.S=+n[0],i+n[0].length):-1}function d3_time_parseMilliseconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.L=+n[0],i+n[0].length):-1}function d3_time_zone(d){var z=d.getTimezoneOffset(),zs=z>0?"-":"+",zh=abs(z)/60|0,zm=abs(z)%60;return zs+d3_time_formatPad(zh,"0",2)+d3_time_formatPad(zm,"0",2)}function d3_time_parseLiteralPercent(date,string,i){d3_time_percentRe.lastIndex=0;var n=d3_time_percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function d3_time_formatMulti(formats){for(var n=formats.length,i=-1;++i<n;)formats[i][0]=this(formats[i][0]);return function(date){for(var i=0,f=formats[i];!f[1](date);)f=formats[++i];return f[0](date)}}function d3_adder(){}function d3_adderSum(a,b,o){var x=o.s=a+b,bv=x-a,av=x-bv;o.t=a-av+(b-bv)}function d3_geo_streamGeometry(geometry,listener){geometry&&d3_geo_streamGeometryType.hasOwnProperty(geometry.type)&&d3_geo_streamGeometryType[geometry.type](geometry,listener)}function d3_geo_streamLine(coordinates,listener,closed){var coordinate,i=-1,n=coordinates.length-closed;for(listener.lineStart();++i<n;)coordinate=coordinates[i],listener.point(coordinate[0],coordinate[1],coordinate[2]);listener.lineEnd()}function d3_geo_streamPolygon(coordinates,listener){var i=-1,n=coordinates.length;for(listener.polygonStart();++i<n;)d3_geo_streamLine(coordinates[i],listener,1);listener.polygonEnd()}function d3_geo_areaRingStart(){function nextPoint(λ,φ){λ*=d3_radians,φ=φ*d3_radians/2+π/4;var dλ=λ-λ0,sdλ=dλ>=0?1:-1,adλ=sdλ*dλ,cosφ=Math.cos(φ),sinφ=Math.sin(φ),k=sinφ0*sinφ,u=cosφ0*cosφ+k*Math.cos(adλ),v=k*sdλ*Math.sin(adλ);d3_geo_areaRingSum.add(Math.atan2(v,u)),λ0=λ,cosφ0=cosφ,sinφ0=sinφ}var λ00,φ00,λ0,cosφ0,sinφ0;d3_geo_area.point=function(λ,φ){d3_geo_area.point=nextPoint,λ0=(λ00=λ)*d3_radians,cosφ0=Math.cos(φ=(φ00=φ)*d3_radians/2+π/4),sinφ0=Math.sin(φ)},d3_geo_area.lineEnd=function(){nextPoint(λ00,φ00)}}function d3_geo_cartesian(spherical){var λ=spherical[0],φ=spherical[1],cosφ=Math.cos(φ);return[cosφ*Math.cos(λ),cosφ*Math.sin(λ),Math.sin(φ)]}function d3_geo_cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function d3_geo_cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function d3_geo_cartesianAdd(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function d3_geo_cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function d3_geo_cartesianNormalize(d){var l=Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}function d3_geo_spherical(cartesian){return[Math.atan2(cartesian[1],cartesian[0]),d3_asin(cartesian[2])]}function d3_geo_sphericalEqual(a,b){return abs(a[0]-b[0])<ε&&abs(a[1]-b[1])<ε}function d3_geo_centroidPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);d3_geo_centroidPointXYZ(cosφ*Math.cos(λ),cosφ*Math.sin(λ),Math.sin(φ))}function d3_geo_centroidPointXYZ(x,y,z){++d3_geo_centroidW0,d3_geo_centroidX0+=(x-d3_geo_centroidX0)/d3_geo_centroidW0,d3_geo_centroidY0+=(y-d3_geo_centroidY0)/d3_geo_centroidW0,d3_geo_centroidZ0+=(z-d3_geo_centroidZ0)/d3_geo_centroidW0}function d3_geo_centroidLineStart(){function nextPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians),x=cosφ*Math.cos(λ),y=cosφ*Math.sin(λ),z=Math.sin(φ),w=Math.atan2(Math.sqrt((w=y0*z-z0*y)*w+(w=z0*x-x0*z)*w+(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);d3_geo_centroidW1+=w,d3_geo_centroidX1+=w*(x0+(x0=x)),d3_geo_centroidY1+=w*(y0+(y0=y)),d3_geo_centroidZ1+=w*(z0+(z0=z)),d3_geo_centroidPointXYZ(x0,y0,z0)}var x0,y0,z0;d3_geo_centroid.point=function(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);x0=cosφ*Math.cos(λ),y0=cosφ*Math.sin(λ),z0=Math.sin(φ),d3_geo_centroid.point=nextPoint,d3_geo_centroidPointXYZ(x0,y0,z0)}}function d3_geo_centroidLineEnd(){d3_geo_centroid.point=d3_geo_centroidPoint}function d3_geo_centroidRingStart(){function nextPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians),x=cosφ*Math.cos(λ),y=cosφ*Math.sin(λ),z=Math.sin(φ),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=Math.sqrt(cx*cx+cy*cy+cz*cz),u=x0*x+y0*y+z0*z,v=m&&-d3_acos(u)/m,w=Math.atan2(m,u);d3_geo_centroidX2+=v*cx,d3_geo_centroidY2+=v*cy,d3_geo_centroidZ2+=v*cz,d3_geo_centroidW1+=w,d3_geo_centroidX1+=w*(x0+(x0=x)),d3_geo_centroidY1+=w*(y0+(y0=y)),d3_geo_centroidZ1+=w*(z0+(z0=z)),d3_geo_centroidPointXYZ(x0,y0,z0)}var λ00,φ00,x0,y0,z0;d3_geo_centroid.point=function(λ,φ){λ00=λ,φ00=φ,d3_geo_centroid.point=nextPoint,λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);x0=cosφ*Math.cos(λ),y0=cosφ*Math.sin(λ),z0=Math.sin(φ),d3_geo_centroidPointXYZ(x0,y0,z0)},d3_geo_centroid.lineEnd=function(){nextPoint(λ00,φ00),d3_geo_centroid.lineEnd=d3_geo_centroidLineEnd,d3_geo_centroid.point=d3_geo_centroidPoint}}function d3_geo_compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return x=b.invert(x,y),x&&a.invert(x[0],x[1])}),compose}function d3_true(){return!0}function d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener){var subject=[],clip=[];if(segments.forEach(function(segment){if(!((n=segment.length-1)<=0)){var n,p0=segment[0],p1=segment[n];if(d3_geo_sphericalEqual(p0,p1)){listener.lineStart();for(var i=0;n>i;++i)listener.point((p0=segment[i])[0],p0[1]);return void listener.lineEnd()}var a=new d3_geo_clipPolygonIntersection(p0,segment,null,!0),b=new d3_geo_clipPolygonIntersection(p0,null,a,!1);a.o=b,subject.push(a),clip.push(b),a=new d3_geo_clipPolygonIntersection(p1,segment,null,!1),b=new d3_geo_clipPolygonIntersection(p1,null,a,!0),a.o=b,subject.push(a),clip.push(b)}}),clip.sort(compare),d3_geo_clipPolygonLinkCircular(subject),d3_geo_clipPolygonLinkCircular(clip),subject.length){for(var i=0,entry=clipStartInside,n=clip.length;n>i;++i)clip[i].e=entry=!entry;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,listener.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(var i=0,n=points.length;n>i;++i)listener.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,listener);current=current.n}else{if(isSubject){points=current.p.z;for(var i=points.length-1;i>=0;--i)listener.point((point=points[i])[0],point[1])}else interpolate(current.x,current.p.x,-1,listener);current=current.p}current=current.o,points=current.z,isSubject=!isSubject}while(!current.v);listener.lineEnd()}}}function d3_geo_clipPolygonLinkCircular(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}function d3_geo_clipPolygonIntersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function d3_geo_clip(pointVisible,clipLine,interpolate,clipStart){return function(rotate,listener){function point(λ,φ){var point=rotate(λ,φ);pointVisible(λ=point[0],φ=point[1])&&listener.point(λ,φ)}function pointLine(λ,φ){var point=rotate(λ,φ);line.point(point[0],point[1])}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(λ,φ){ring.push([λ,φ]);var point=rotate(λ,φ);ringListener.point(point[0],point[1])}function ringStart(){ringListener.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringListener.lineEnd();var segment,clean=ringListener.clean(),ringSegments=buffer.buffer(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){segment=ringSegments[0];var point,n=segment.length-1,i=-1;if(n>0){for(polygonStarted||(listener.polygonStart(),polygonStarted=!0),listener.lineStart();++i<n;)listener.point((point=segment[i])[0],point[1]);listener.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(d3_geo_clipSegmentLength1))}var segments,polygon,ring,line=clipLine(listener),rotatedClipStart=rotate.invert(clipStart[0],clipStart[1]),clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=d3.merge(segments);var clipStartInside=d3_geo_pointInPolygon(rotatedClipStart,polygon);segments.length?(polygonStarted||(listener.polygonStart(),polygonStarted=!0),d3_geo_clipPolygon(segments,d3_geo_clipSort,clipStartInside,interpolate,listener)):clipStartInside&&(polygonStarted||(listener.polygonStart(),polygonStarted=!0),listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd()),polygonStarted&&(listener.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){listener.polygonStart(),listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd(),listener.polygonEnd()}},buffer=d3_geo_clipBufferListener(),ringListener=clipLine(buffer),polygonStarted=!1;return clip}}function d3_geo_clipSegmentLength1(segment){return segment.length>1}function d3_geo_clipBufferListener(){var line,lines=[];return{lineStart:function(){lines.push(line=[])},point:function(λ,φ){line.push([λ,φ])},lineEnd:d3_noop,buffer:function(){var buffer=lines;return lines=[],line=null,buffer},rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))}}}function d3_geo_clipSort(a,b){return((a=a.x)[0]<0?a[1]-halfπ-ε:halfπ-a[1])-((b=b.x)[0]<0?b[1]-halfπ-ε:halfπ-b[1])}function d3_geo_clipAntimeridianLine(listener){var clean,λ0=NaN,φ0=NaN,sλ0=NaN;return{lineStart:function(){listener.lineStart(),clean=1},point:function(λ1,φ1){var sλ1=λ1>0?π:-π,dλ=abs(λ1-λ0);abs(dλ-π)<ε?(listener.point(λ0,φ0=(φ0+φ1)/2>0?halfπ:-halfπ),listener.point(sλ0,φ0),listener.lineEnd(),listener.lineStart(),listener.point(sλ1,φ0),listener.point(λ1,φ0),clean=0):sλ0!==sλ1&&dλ>=π&&(abs(λ0-sλ0)<ε&&(λ0-=sλ0*ε),abs(λ1-sλ1)<ε&&(λ1-=sλ1*ε),φ0=d3_geo_clipAntimeridianIntersect(λ0,φ0,λ1,φ1),listener.point(sλ0,φ0),listener.lineEnd(),listener.lineStart(),listener.point(sλ1,φ0),clean=0),listener.point(λ0=λ1,φ0=φ1),sλ0=sλ1},lineEnd:function(){listener.lineEnd(),λ0=φ0=NaN},clean:function(){return 2-clean}}}function d3_geo_clipAntimeridianIntersect(λ0,φ0,λ1,φ1){var cosφ0,cosφ1,sinλ0_λ1=Math.sin(λ0-λ1);return abs(sinλ0_λ1)>ε?Math.atan((Math.sin(φ0)*(cosφ1=Math.cos(φ1))*Math.sin(λ1)-Math.sin(φ1)*(cosφ0=Math.cos(φ0))*Math.sin(λ0))/(cosφ0*cosφ1*sinλ0_λ1)):(φ0+φ1)/2}function d3_geo_clipAntimeridianInterpolate(from,to,direction,listener){var φ;if(null==from)φ=direction*halfπ,listener.point(-π,φ),listener.point(0,φ),listener.point(π,φ),listener.point(π,0),listener.point(π,-φ),listener.point(0,-φ),listener.point(-π,-φ),listener.point(-π,0),listener.point(-π,φ);else if(abs(from[0]-to[0])>ε){var s=from[0]<to[0]?π:-π;φ=direction*s/2,listener.point(-s,φ),listener.point(0,φ),listener.point(s,φ)}else listener.point(to[0],to[1])}function d3_geo_pointInPolygon(point,polygon){var meridian=point[0],parallel=point[1],meridianNormal=[Math.sin(meridian),-Math.cos(meridian),0],polarAngle=0,winding=0;d3_geo_areaRingSum.reset();for(var i=0,n=polygon.length;n>i;++i){var ring=polygon[i],m=ring.length;if(m)for(var point0=ring[0],λ0=point0[0],φ0=point0[1]/2+π/4,sinφ0=Math.sin(φ0),cosφ0=Math.cos(φ0),j=1;;){j===m&&(j=0),point=ring[j];var λ=point[0],φ=point[1]/2+π/4,sinφ=Math.sin(φ),cosφ=Math.cos(φ),dλ=λ-λ0,sdλ=dλ>=0?1:-1,adλ=sdλ*dλ,antimeridian=adλ>π,k=sinφ0*sinφ;if(d3_geo_areaRingSum.add(Math.atan2(k*sdλ*Math.sin(adλ),cosφ0*cosφ+k*Math.cos(adλ))),polarAngle+=antimeridian?dλ+sdλ*τ:dλ,antimeridian^λ0>=meridian^λ>=meridian){var arc=d3_geo_cartesianCross(d3_geo_cartesian(point0),d3_geo_cartesian(point));d3_geo_cartesianNormalize(arc);var intersection=d3_geo_cartesianCross(meridianNormal,arc);d3_geo_cartesianNormalize(intersection);var φarc=(antimeridian^dλ>=0?-1:1)*d3_asin(intersection[2]);(parallel>φarc||parallel===φarc&&(arc[0]||arc[1]))&&(winding+=antimeridian^dλ>=0?1:-1)}if(!j++)break;λ0=λ,sinφ0=sinφ,cosφ0=cosφ,point0=point}}return(-ε>polarAngle||ε>polarAngle&&0>d3_geo_areaRingSum)^1&winding}function d3_geo_clipCircle(radius){function visible(λ,φ){return Math.cos(λ)*Math.cos(φ)>cr}function clipLine(listener){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(λ,φ){var point2,point1=[λ,φ],v=visible(λ,φ),c=smallRadius?v?0:code(λ,φ):v?code(λ+(0>λ?π:-π),φ):0;if(!point0&&(v00=v0=v)&&listener.lineStart(),v!==v0&&(point2=intersect(point0,point1),(d3_geo_sphericalEqual(point0,point2)||d3_geo_sphericalEqual(point1,point2))&&(point1[0]+=ε,point1[1]+=ε,v=visible(point1[0],point1[1]))),v!==v0)clean=0,v?(listener.lineStart(),point2=intersect(point1,point0),listener.point(point2[0],point2[1])):(point2=intersect(point0,point1),listener.point(point2[0],point2[1]),listener.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(listener.lineStart(),listener.point(t[0][0],t[0][1]),listener.point(t[1][0],t[1][1]),listener.lineEnd()):(listener.point(t[1][0],t[1][1]),listener.lineEnd(),listener.lineStart(),listener.point(t[0][0],t[0][1])))}!v||point0&&d3_geo_sphericalEqual(point0,point1)||listener.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&listener.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}}function intersect(a,b,two){var pa=d3_geo_cartesian(a),pb=d3_geo_cartesian(b),n1=[1,0,0],n2=d3_geo_cartesianCross(pa,pb),n2n2=d3_geo_cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=d3_geo_cartesianCross(n1,n2),A=d3_geo_cartesianScale(n1,c1),B=d3_geo_cartesianScale(n2,c2);d3_geo_cartesianAdd(A,B);var u=n1xn2,w=d3_geo_cartesianDot(A,u),uu=d3_geo_cartesianDot(u,u),t2=w*w-uu*(d3_geo_cartesianDot(A,A)-1);if(!(0>t2)){var t=Math.sqrt(t2),q=d3_geo_cartesianScale(u,(-w-t)/uu);if(d3_geo_cartesianAdd(q,A),q=d3_geo_spherical(q),!two)return q;var z,λ0=a[0],λ1=b[0],φ0=a[1],φ1=b[1];λ0>λ1&&(z=λ0,λ0=λ1,λ1=z);var δλ=λ1-λ0,polar=abs(δλ-π)<ε,meridian=polar||ε>δλ;if(!polar&&φ0>φ1&&(z=φ0,φ0=φ1,φ1=z),meridian?polar?φ0+φ1>0^q[1]<(abs(q[0]-λ0)<ε?φ0:φ1):φ0<=q[1]&&q[1]<=φ1:δλ>π^(λ0<=q[0]&&q[0]<=λ1)){var q1=d3_geo_cartesianScale(u,(-w+t)/uu);return d3_geo_cartesianAdd(q1,A),[q,d3_geo_spherical(q1)]}}}function code(λ,φ){var r=smallRadius?radius:π-radius,code=0;return-r>λ?code|=1:λ>r&&(code|=2),-r>φ?code|=4:φ>r&&(code|=8),code}var cr=Math.cos(radius),smallRadius=cr>0,notHemisphere=abs(cr)>ε,interpolate=d3_geo_circleInterpolate(radius,6*d3_radians);return d3_geo_clip(visible,clipLine,interpolate,smallRadius?[0,-radius]:[-π,radius-π])}function d3_geom_clipLine(x0,y0,x1,y1){return function(line){var r,a=line.a,b=line.b,ax=a.x,ay=a.y,bx=b.x,by=b.y,t0=0,t1=1,dx=bx-ax,dy=by-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,0>dx){if(t0>r)return;t1>r&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(0>r)){if(r/=dx,0>dx){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(t0>r)return;t1>r&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,0>dy){if(t0>r)return;t1>r&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(0>r)){if(r/=dy,0>dy){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(t0>r)return;t1>r&&(t1=r)}return t0>0&&(line.a={x:ax+t0*dx,y:ay+t0*dy}),1>t1&&(line.b={x:ax+t1*dx,y:ay+t1*dy}),line}}}}}}function d3_geo_clipExtent(x0,y0,x1,y1){function corner(p,direction){return abs(p[0]-x0)<ε?direction>0?0:3:abs(p[0]-x1)<ε?direction>0?2:1:abs(p[1]-y0)<ε?direction>0?1:0:direction>0?3:2}function compare(a,b){return comparePoints(a.x,b.x)}function comparePoints(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}return function(listener){function insidePolygon(p){for(var wn=0,n=polygon.length,y=p[1],i=0;n>i;++i)for(var b,j=1,v=polygon[i],m=v.length,a=v[0];m>j;++j)b=v[j],a[1]<=y?b[1]>y&&d3_cross2d(a,b,p)>0&&++wn:b[1]<=y&&d3_cross2d(a,b,p)<0&&--wn,a=b;return 0!==wn}function interpolate(from,to,direction,listener){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoints(from,to)<0^direction>0){do listener.point(0===a||3===a?x0:x1,a>1?y1:y0);while((a=(a+direction+4)%4)!==a1)}else listener.point(to[0],to[1])}function pointVisible(x,y){return x>=x0&&x1>=x&&y>=y0&&y1>=y}function point(x,y){pointVisible(x,y)&&listener.point(x,y)}function lineStart(){clip.point=linePoint,polygon&&polygon.push(ring=[]),first=!0,v_=!1,x_=y_=NaN}function lineEnd(){segments&&(linePoint(x__,y__),v__&&v_&&bufferListener.rejoin(),segments.push(bufferListener.buffer())),clip.point=point,v_&&listener.lineEnd()}function linePoint(x,y){x=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,x)),y=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,y));var v=pointVisible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(listener.lineStart(),listener.point(x,y));else if(v&&v_)listener.point(x,y);else{var l={a:{x:x_,y:y_},b:{x:x,y:y}};clipLine(l)?(v_||(listener.lineStart(),listener.point(l.a.x,l.a.y)),listener.point(l.b.x,l.b.y),v||listener.lineEnd(),clean=!1):v&&(listener.lineStart(),listener.point(x,y),clean=!1)}x_=x,y_=y,v_=v}var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,listener_=listener,bufferListener=d3_geo_clipBufferListener(),clipLine=d3_geom_clipLine(x0,y0,x1,y1),clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){listener=bufferListener,segments=[],polygon=[],clean=!0},polygonEnd:function(){listener=listener_,segments=d3.merge(segments);var clipStartInside=insidePolygon([x0,y1]),inside=clean&&clipStartInside,visible=segments.length;(inside||visible)&&(listener.polygonStart(),inside&&(listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd()),visible&&d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener),listener.polygonEnd()),segments=polygon=ring=null}};return clip}}function d3_geo_conic(projectAt){var φ0=0,φ1=π/3,m=d3_geo_projectionMutator(projectAt),p=m(φ0,φ1);return p.parallels=function(_){return arguments.length?m(φ0=_[0]*π/180,φ1=_[1]*π/180):[φ0/π*180,φ1/π*180]},p}function d3_geo_conicEqualArea(φ0,φ1){function forward(λ,φ){var ρ=Math.sqrt(C-2*n*Math.sin(φ))/n;return[ρ*Math.sin(λ*=n),ρ0-ρ*Math.cos(λ)]}var sinφ0=Math.sin(φ0),n=(sinφ0+Math.sin(φ1))/2,C=1+sinφ0*(2*n-sinφ0),ρ0=Math.sqrt(C)/n;return forward.invert=function(x,y){var ρ0_y=ρ0-y;return[Math.atan2(x,ρ0_y)/n,d3_asin((C-(x*x+ρ0_y*ρ0_y)*n*n)/(2*n))]},forward}function d3_geo_pathAreaRingStart(){function nextPoint(x,y){d3_geo_pathAreaPolygon+=y0*x-x0*y,x0=x,y0=y}var x00,y00,x0,y0;d3_geo_pathArea.point=function(x,y){d3_geo_pathArea.point=nextPoint,x00=x0=x,y00=y0=y},d3_geo_pathArea.lineEnd=function(){nextPoint(x00,y00)}}function d3_geo_pathBoundsPoint(x,y){d3_geo_pathBoundsX0>x&&(d3_geo_pathBoundsX0=x),x>d3_geo_pathBoundsX1&&(d3_geo_pathBoundsX1=x),d3_geo_pathBoundsY0>y&&(d3_geo_pathBoundsY0=y),y>d3_geo_pathBoundsY1&&(d3_geo_pathBoundsY1=y)}function d3_geo_pathBuffer(){function point(x,y){buffer.push("M",x,",",y,pointCircle)}function pointLineStart(x,y){buffer.push("M",x,",",y),stream.point=pointLine}function pointLine(x,y){buffer.push("L",x,",",y)}function lineEnd(){stream.point=point}function lineEndPolygon(){buffer.push("Z")}var pointCircle=d3_geo_pathBufferCircle(4.5),buffer=[],stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd,stream.point=point},pointRadius:function(_){return pointCircle=d3_geo_pathBufferCircle(_),stream},result:function(){if(buffer.length){var result=buffer.join("");return buffer=[],result}}};return stream}function d3_geo_pathBufferCircle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}function d3_geo_pathCentroidPoint(x,y){d3_geo_centroidX0+=x,d3_geo_centroidY0+=y,++d3_geo_centroidZ0}function d3_geo_pathCentroidLineStart(){function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2,d3_geo_centroidY1+=z*(y0+y)/2,d3_geo_centroidZ1+=z,d3_geo_pathCentroidPoint(x0=x,y0=y)}var x0,y0;d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint,d3_geo_pathCentroidPoint(x0=x,y0=y)}}function d3_geo_pathCentroidLineEnd(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint}function d3_geo_pathCentroidRingStart(){function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2,d3_geo_centroidY1+=z*(y0+y)/2,d3_geo_centroidZ1+=z,z=y0*x-x0*y,d3_geo_centroidX2+=z*(x0+x),d3_geo_centroidY2+=z*(y0+y),d3_geo_centroidZ2+=3*z,d3_geo_pathCentroidPoint(x0=x,y0=y)}var x00,y00,x0,y0;d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint,d3_geo_pathCentroidPoint(x00=x0=x,y00=y0=y)},d3_geo_pathCentroid.lineEnd=function(){
nextPoint(x00,y00)}}function d3_geo_pathContext(context){function point(x,y){context.moveTo(x+pointRadius,y),context.arc(x,y,pointRadius,0,τ)}function pointLineStart(x,y){context.moveTo(x,y),stream.point=pointLine}function pointLine(x,y){context.lineTo(x,y)}function lineEnd(){stream.point=point}function lineEndPolygon(){context.closePath()}var pointRadius=4.5,stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd,stream.point=point},pointRadius:function(_){return pointRadius=_,stream},result:d3_noop};return stream}function d3_geo_resample(project){function resample(stream){return(maxDepth?resampleRecursive:resampleNone)(stream)}function resampleNone(stream){return d3_geo_transformPoint(stream,function(x,y){x=project(x,y),stream.point(x[0],x[1])})}function resampleRecursive(stream){function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resample.point=linePoint,stream.lineStart()}function linePoint(λ,φ){var c=d3_geo_cartesian([λ,φ]),p=project(λ,φ);resampleLineTo(x0,y0,λ0,a0,b0,c0,x0=p[0],y0=p[1],λ0=λ,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream),stream.point(x0,y0)}function lineEnd(){resample.point=point,stream.lineEnd()}function ringStart(){lineStart(),resample.point=ringPoint,resample.lineEnd=ringEnd}function ringPoint(λ,φ){linePoint(λ00=λ,φ00=φ),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resample.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,λ0,a0,b0,c0,x00,y00,λ00,a00,b00,c00,maxDepth,stream),resample.lineEnd=lineEnd,lineEnd()}var λ00,φ00,x00,y00,a00,b00,c00,λ0,x0,y0,a0,b0,c0,resample={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart(),resample.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resample.lineStart=lineStart}};return resample}function resampleLineTo(x0,y0,λ0,a0,b0,c0,x1,y1,λ1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*δ2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=Math.sqrt(a*a+b*b+c*c),φ2=Math.asin(c/=m),λ2=abs(abs(c)-1)<ε||abs(λ0-λ1)<ε?(λ0+λ1)/2:Math.atan2(b,a),p=project(λ2,φ2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>δ2||abs((dx*dx2+dy*dy2)/d2-.5)>.3||cosMinDistance>a0*a1+b0*b1+c0*c1)&&(resampleLineTo(x0,y0,λ0,a0,b0,c0,x2,y2,λ2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,λ2,a,b,c,x1,y1,λ1,a1,b1,c1,depth,stream))}}var δ2=.5,cosMinDistance=Math.cos(30*d3_radians),maxDepth=16;return resample.precision=function(_){return arguments.length?(maxDepth=(δ2=_*_)>0&&16,resample):Math.sqrt(δ2)},resample}function d3_geo_pathProjectStream(project){var resample=d3_geo_resample(function(x,y){return project([x*d3_degrees,y*d3_degrees])});return function(stream){return d3_geo_projectionRadians(resample(stream))}}function d3_geo_transform(stream){this.stream=stream}function d3_geo_transformPoint(stream,point){return{point:point,sphere:function(){stream.sphere()},lineStart:function(){stream.lineStart()},lineEnd:function(){stream.lineEnd()},polygonStart:function(){stream.polygonStart()},polygonEnd:function(){stream.polygonEnd()}}}function d3_geo_projection(project){return d3_geo_projectionMutator(function(){return project})()}function d3_geo_projectionMutator(projectAt){function projection(point){return point=projectRotate(point[0]*d3_radians,point[1]*d3_radians),[point[0]*k+δx,δy-point[1]*k]}function invert(point){return point=projectRotate.invert((point[0]-δx)/k,(δy-point[1])/k),point&&[point[0]*d3_degrees,point[1]*d3_degrees]}function reset(){projectRotate=d3_geo_compose(rotate=d3_geo_rotation(δλ,δφ,δγ),project);var center=project(λ,φ);return δx=x-center[0]*k,δy=y+center[1]*k,invalidate()}function invalidate(){return stream&&(stream.valid=!1,stream=null),projection}var project,rotate,projectRotate,δx,δy,stream,projectResample=d3_geo_resample(function(x,y){return x=project(x,y),[x[0]*k+δx,δy-x[1]*k]}),k=150,x=480,y=250,λ=0,φ=0,δλ=0,δφ=0,δγ=0,preclip=d3_geo_clipAntimeridian,postclip=d3_identity,clipAngle=null,clipExtent=null;return projection.stream=function(output){return stream&&(stream.valid=!1),stream=d3_geo_projectionRadians(preclip(rotate,projectResample(postclip(output)))),stream.valid=!0,stream},projection.clipAngle=function(_){return arguments.length?(preclip=null==_?(clipAngle=_,d3_geo_clipAntimeridian):d3_geo_clipCircle((clipAngle=+_)*d3_radians),invalidate()):clipAngle},projection.clipExtent=function(_){return arguments.length?(clipExtent=_,postclip=_?d3_geo_clipExtent(_[0][0],_[0][1],_[1][0],_[1][1]):d3_identity,invalidate()):clipExtent},projection.scale=function(_){return arguments.length?(k=+_,reset()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],reset()):[x,y]},projection.center=function(_){return arguments.length?(λ=_[0]%360*d3_radians,φ=_[1]%360*d3_radians,reset()):[λ*d3_degrees,φ*d3_degrees]},projection.rotate=function(_){return arguments.length?(δλ=_[0]%360*d3_radians,δφ=_[1]%360*d3_radians,δγ=_.length>2?_[2]%360*d3_radians:0,reset()):[δλ*d3_degrees,δφ*d3_degrees,δγ*d3_degrees]},d3.rebind(projection,projectResample,"precision"),function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,reset()}}function d3_geo_projectionRadians(stream){return d3_geo_transformPoint(stream,function(x,y){stream.point(x*d3_radians,y*d3_radians)})}function d3_geo_equirectangular(λ,φ){return[λ,φ]}function d3_geo_identityRotation(λ,φ){return[λ>π?λ-τ:-π>λ?λ+τ:λ,φ]}function d3_geo_rotation(δλ,δφ,δγ){return δλ?δφ||δγ?d3_geo_compose(d3_geo_rotationλ(δλ),d3_geo_rotationφγ(δφ,δγ)):d3_geo_rotationλ(δλ):δφ||δγ?d3_geo_rotationφγ(δφ,δγ):d3_geo_identityRotation}function d3_geo_forwardRotationλ(δλ){return function(λ,φ){return λ+=δλ,[λ>π?λ-τ:-π>λ?λ+τ:λ,φ]}}function d3_geo_rotationλ(δλ){var rotation=d3_geo_forwardRotationλ(δλ);return rotation.invert=d3_geo_forwardRotationλ(-δλ),rotation}function d3_geo_rotationφγ(δφ,δγ){function rotation(λ,φ){var cosφ=Math.cos(φ),x=Math.cos(λ)*cosφ,y=Math.sin(λ)*cosφ,z=Math.sin(φ),k=z*cosδφ+x*sinδφ;return[Math.atan2(y*cosδγ-k*sinδγ,x*cosδφ-z*sinδφ),d3_asin(k*cosδγ+y*sinδγ)]}var cosδφ=Math.cos(δφ),sinδφ=Math.sin(δφ),cosδγ=Math.cos(δγ),sinδγ=Math.sin(δγ);return rotation.invert=function(λ,φ){var cosφ=Math.cos(φ),x=Math.cos(λ)*cosφ,y=Math.sin(λ)*cosφ,z=Math.sin(φ),k=z*cosδγ-y*sinδγ;return[Math.atan2(y*cosδγ+z*sinδγ,x*cosδφ+k*sinδφ),d3_asin(k*cosδφ-x*sinδφ)]},rotation}function d3_geo_circleInterpolate(radius,precision){var cr=Math.cos(radius),sr=Math.sin(radius);return function(from,to,direction,listener){var step=direction*precision;null!=from?(from=d3_geo_circleAngle(cr,from),to=d3_geo_circleAngle(cr,to),(direction>0?to>from:from>to)&&(from+=direction*τ)):(from=radius+direction*τ,to=radius-.5*step);for(var point,t=from;direction>0?t>to:to>t;t-=step)listener.point((point=d3_geo_spherical([cr,-sr*Math.cos(t),-sr*Math.sin(t)]))[0],point[1])}}function d3_geo_circleAngle(cr,point){var a=d3_geo_cartesian(point);a[0]-=cr,d3_geo_cartesianNormalize(a);var angle=d3_acos(-a[1]);return((-a[2]<0?-angle:angle)+2*Math.PI-ε)%(2*Math.PI)}function d3_geo_graticuleX(y0,y1,dy){var y=d3.range(y0,y1-ε,dy).concat(y1);return function(x){return y.map(function(y){return[x,y]})}}function d3_geo_graticuleY(x0,x1,dx){var x=d3.range(x0,x1-ε,dx).concat(x1);return function(y){return x.map(function(x){return[x,y]})}}function d3_source(d){return d.source}function d3_target(d){return d.target}function d3_geo_interpolate(x0,y0,x1,y1){var cy0=Math.cos(y0),sy0=Math.sin(y0),cy1=Math.cos(y1),sy1=Math.sin(y1),kx0=cy0*Math.cos(x0),ky0=cy0*Math.sin(x0),kx1=cy1*Math.cos(x1),ky1=cy1*Math.sin(x1),d=2*Math.asin(Math.sqrt(d3_haversin(y1-y0)+cy0*cy1*d3_haversin(x1-x0))),k=1/Math.sin(d),interpolate=d?function(t){var B=Math.sin(t*=d)*k,A=Math.sin(d-t)*k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[Math.atan2(y,x)*d3_degrees,Math.atan2(z,Math.sqrt(x*x+y*y))*d3_degrees]}:function(){return[x0*d3_degrees,y0*d3_degrees]};return interpolate.distance=d,interpolate}function d3_geo_lengthLineStart(){function nextPoint(λ,φ){var sinφ=Math.sin(φ*=d3_radians),cosφ=Math.cos(φ),t=abs((λ*=d3_radians)-λ0),cosΔλ=Math.cos(t);d3_geo_lengthSum+=Math.atan2(Math.sqrt((t=cosφ*Math.sin(t))*t+(t=cosφ0*sinφ-sinφ0*cosφ*cosΔλ)*t),sinφ0*sinφ+cosφ0*cosφ*cosΔλ),λ0=λ,sinφ0=sinφ,cosφ0=cosφ}var λ0,sinφ0,cosφ0;d3_geo_length.point=function(λ,φ){λ0=λ*d3_radians,sinφ0=Math.sin(φ*=d3_radians),cosφ0=Math.cos(φ),d3_geo_length.point=nextPoint},d3_geo_length.lineEnd=function(){d3_geo_length.point=d3_geo_length.lineEnd=d3_noop}}function d3_geo_azimuthal(scale,angle){function azimuthal(λ,φ){var cosλ=Math.cos(λ),cosφ=Math.cos(φ),k=scale(cosλ*cosφ);return[k*cosφ*Math.sin(λ),k*Math.sin(φ)]}return azimuthal.invert=function(x,y){var ρ=Math.sqrt(x*x+y*y),c=angle(ρ),sinc=Math.sin(c),cosc=Math.cos(c);return[Math.atan2(x*sinc,ρ*cosc),Math.asin(ρ&&y*sinc/ρ)]},azimuthal}function d3_geo_conicConformal(φ0,φ1){function forward(λ,φ){F>0?-halfπ+ε>φ&&(φ=-halfπ+ε):φ>halfπ-ε&&(φ=halfπ-ε);var ρ=F/Math.pow(t(φ),n);return[ρ*Math.sin(n*λ),F-ρ*Math.cos(n*λ)]}var cosφ0=Math.cos(φ0),t=function(φ){return Math.tan(π/4+φ/2)},n=φ0===φ1?Math.sin(φ0):Math.log(cosφ0/Math.cos(φ1))/Math.log(t(φ1)/t(φ0)),F=cosφ0*Math.pow(t(φ0),n)/n;return n?(forward.invert=function(x,y){var ρ0_y=F-y,ρ=d3_sgn(n)*Math.sqrt(x*x+ρ0_y*ρ0_y);return[Math.atan2(x,ρ0_y)/n,2*Math.atan(Math.pow(F/ρ,1/n))-halfπ]},forward):d3_geo_mercator}function d3_geo_conicEquidistant(φ0,φ1){function forward(λ,φ){var ρ=G-φ;return[ρ*Math.sin(n*λ),G-ρ*Math.cos(n*λ)]}var cosφ0=Math.cos(φ0),n=φ0===φ1?Math.sin(φ0):(cosφ0-Math.cos(φ1))/(φ1-φ0),G=cosφ0/n+φ0;return abs(n)<ε?d3_geo_equirectangular:(forward.invert=function(x,y){var ρ0_y=G-y;return[Math.atan2(x,ρ0_y)/n,G-d3_sgn(n)*Math.sqrt(x*x+ρ0_y*ρ0_y)]},forward)}function d3_geo_mercator(λ,φ){return[λ,Math.log(Math.tan(π/4+φ/2))]}function d3_geo_mercatorProjection(project){var clipAuto,m=d3_geo_projection(project),scale=m.scale,translate=m.translate,clipExtent=m.clipExtent;return m.scale=function(){var v=scale.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v},m.translate=function(){var v=translate.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v},m.clipExtent=function(_){var v=clipExtent.apply(m,arguments);if(v===m){if(clipAuto=null==_){var k=π*scale(),t=translate();clipExtent([[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]])}}else clipAuto&&(v=null);return v},m.clipExtent(null)}function d3_geo_transverseMercator(λ,φ){return[Math.log(Math.tan(π/4+φ/2)),-λ]}function d3_geom_pointX(d){return d[0]}function d3_geom_pointY(d){return d[1]}function d3_geom_hullUpper(points){for(var n=points.length,hull=[0,1],hs=2,i=2;n>i;i++){for(;hs>1&&d3_cross2d(points[hull[hs-2]],points[hull[hs-1]],points[i])<=0;)--hs;hull[hs++]=i}return hull.slice(0,hs)}function d3_geom_hullOrder(a,b){return a[0]-b[0]||a[1]-b[1]}function d3_geom_polygonInside(p,a,b){return(b[0]-a[0])*(p[1]-a[1])<(b[1]-a[1])*(p[0]-a[0])}function d3_geom_polygonIntersect(c,d,a,b){var x1=c[0],x3=a[0],x21=d[0]-x1,x43=b[0]-x3,y1=c[1],y3=a[1],y21=d[1]-y1,y43=b[1]-y3,ua=(x43*(y1-y3)-y43*(x1-x3))/(y43*x21-x43*y21);return[x1+ua*x21,y1+ua*y21]}function d3_geom_polygonClosed(coordinates){var a=coordinates[0],b=coordinates[coordinates.length-1];return!(a[0]-b[0]||a[1]-b[1])}function d3_geom_voronoiBeach(){d3_geom_voronoiRedBlackNode(this),this.edge=this.site=this.circle=null}function d3_geom_voronoiCreateBeach(site){var beach=d3_geom_voronoiBeachPool.pop()||new d3_geom_voronoiBeach;return beach.site=site,beach}function d3_geom_voronoiDetachBeach(beach){d3_geom_voronoiDetachCircle(beach),d3_geom_voronoiBeaches.remove(beach),d3_geom_voronoiBeachPool.push(beach),d3_geom_voronoiRedBlackNode(beach)}function d3_geom_voronoiRemoveBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex={x:x,y:y},previous=beach.P,next=beach.N,disappearing=[beach];d3_geom_voronoiDetachBeach(beach);for(var lArc=previous;lArc.circle&&abs(x-lArc.circle.x)<ε&&abs(y-lArc.circle.cy)<ε;)previous=lArc.P,disappearing.unshift(lArc),d3_geom_voronoiDetachBeach(lArc),lArc=previous;disappearing.unshift(lArc),d3_geom_voronoiDetachCircle(lArc);for(var rArc=next;rArc.circle&&abs(x-rArc.circle.x)<ε&&abs(y-rArc.circle.cy)<ε;)next=rArc.N,disappearing.push(rArc),d3_geom_voronoiDetachBeach(rArc),rArc=next;disappearing.push(rArc),d3_geom_voronoiDetachCircle(rArc);var iArc,nArcs=disappearing.length;for(iArc=1;nArcs>iArc;++iArc)rArc=disappearing[iArc],lArc=disappearing[iArc-1],d3_geom_voronoiSetEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex);lArc=disappearing[0],rArc=disappearing[nArcs-1],rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,rArc.site,null,vertex),d3_geom_voronoiAttachCircle(lArc),d3_geom_voronoiAttachCircle(rArc)}function d3_geom_voronoiAddBeach(site){for(var lArc,rArc,dxl,dxr,x=site.x,directrix=site.y,node=d3_geom_voronoiBeaches._;node;)if(dxl=d3_geom_voronoiLeftBreakPoint(node,directrix)-x,dxl>ε)node=node.L;else{if(dxr=x-d3_geom_voronoiRightBreakPoint(node,directrix),!(dxr>ε)){dxl>-ε?(lArc=node.P,rArc=node):dxr>-ε?(lArc=node,rArc=node.N):lArc=rArc=node;break}if(!node.R){lArc=node;break}node=node.R}var newArc=d3_geom_voronoiCreateBeach(site);if(d3_geom_voronoiBeaches.insert(lArc,newArc),lArc||rArc){if(lArc===rArc)return d3_geom_voronoiDetachCircle(lArc),rArc=d3_geom_voronoiCreateBeach(lArc.site),d3_geom_voronoiBeaches.insert(newArc,rArc),newArc.edge=rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site),d3_geom_voronoiAttachCircle(lArc),void d3_geom_voronoiAttachCircle(rArc);if(!rArc)return void(newArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site));d3_geom_voronoiDetachCircle(lArc),d3_geom_voronoiDetachCircle(rArc);var lSite=lArc.site,ax=lSite.x,ay=lSite.y,bx=site.x-ax,by=site.y-ay,rSite=rArc.site,cx=rSite.x-ax,cy=rSite.y-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex={x:(cy*hb-by*hc)/d+ax,y:(bx*hc-cx*hb)/d+ay};d3_geom_voronoiSetEdgeEnd(rArc.edge,lSite,rSite,vertex),newArc.edge=d3_geom_voronoiCreateEdge(lSite,site,null,vertex),rArc.edge=d3_geom_voronoiCreateEdge(site,rSite,null,vertex),d3_geom_voronoiAttachCircle(lArc),d3_geom_voronoiAttachCircle(rArc)}}function d3_geom_voronoiLeftBreakPoint(arc,directrix){var site=arc.site,rfocx=site.x,rfocy=site.y,pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-(1/0);site=lArc.site;var lfocx=site.x,lfocy=site.y,plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;return aby2?(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx:(rfocx+lfocx)/2}function d3_geom_voronoiRightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return d3_geom_voronoiLeftBreakPoint(rArc,directrix);var site=arc.site;return site.y===directrix?site.x:1/0}function d3_geom_voronoiCell(site){this.site=site,this.edges=[]}function d3_geom_voronoiCloseCells(extent){for(var x2,y2,x3,y3,cell,iHalfEdge,halfEdges,nHalfEdges,start,end,x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],cells=d3_geom_voronoiCells,iCell=cells.length;iCell--;)if(cell=cells[iCell],cell&&cell.prepare())for(halfEdges=cell.edges,nHalfEdges=halfEdges.length,iHalfEdge=0;nHalfEdges>iHalfEdge;)end=halfEdges[iHalfEdge].end(),x3=end.x,y3=end.y,start=halfEdges[++iHalfEdge%nHalfEdges].start(),x2=start.x,y2=start.y,(abs(x3-x2)>ε||abs(y3-y2)>ε)&&(halfEdges.splice(iHalfEdge,0,new d3_geom_voronoiHalfEdge(d3_geom_voronoiCreateBorderEdge(cell.site,end,abs(x3-x0)<ε&&y1-y3>ε?{x:x0,y:abs(x2-x0)<ε?y2:y1}:abs(y3-y1)<ε&&x1-x3>ε?{x:abs(y2-y1)<ε?x2:x1,y:y1}:abs(x3-x1)<ε&&y3-y0>ε?{x:x1,y:abs(x2-x1)<ε?y2:y0}:abs(y3-y0)<ε&&x3-x0>ε?{x:abs(y2-y0)<ε?x2:x0,y:y0}:null),cell.site,null)),++nHalfEdges)}function d3_geom_voronoiHalfEdgeOrder(a,b){return b.angle-a.angle}function d3_geom_voronoiCircle(){d3_geom_voronoiRedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function d3_geom_voronoiAttachCircle(arc){var lArc=arc.P,rArc=arc.N;if(lArc&&rArc){var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite!==rSite){var bx=cSite.x,by=cSite.y,ax=lSite.x-bx,ay=lSite.y-by,cx=rSite.x-bx,cy=rSite.y-by,d=2*(ax*cy-ay*cx);if(!(d>=-ε2)){var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d,cy=y+by,circle=d3_geom_voronoiCirclePool.pop()||new d3_geom_voronoiCircle;circle.arc=arc,circle.site=cSite,circle.x=x+bx,circle.y=cy+Math.sqrt(x*x+y*y),circle.cy=cy,arc.circle=circle;for(var before=null,node=d3_geom_voronoiCircles._;node;)if(circle.y<node.y||circle.y===node.y&&circle.x<=node.x){if(!node.L){before=node.P;break}node=node.L}else{if(!node.R){before=node;break}node=node.R}d3_geom_voronoiCircles.insert(before,circle),before||(d3_geom_voronoiFirstCircle=circle)}}}}function d3_geom_voronoiDetachCircle(arc){var circle=arc.circle;circle&&(circle.P||(d3_geom_voronoiFirstCircle=circle.N),d3_geom_voronoiCircles.remove(circle),d3_geom_voronoiCirclePool.push(circle),d3_geom_voronoiRedBlackNode(circle),arc.circle=null)}function d3_geom_voronoiClipEdges(extent){for(var e,edges=d3_geom_voronoiEdges,clip=d3_geom_clipLine(extent[0][0],extent[0][1],extent[1][0],extent[1][1]),i=edges.length;i--;)e=edges[i],(!d3_geom_voronoiConnectEdge(e,extent)||!clip(e)||abs(e.a.x-e.b.x)<ε&&abs(e.a.y-e.b.y)<ε)&&(e.a=e.b=null,edges.splice(i,1))}function d3_geom_voronoiConnectEdge(edge,extent){var vb=edge.b;if(vb)return!0;var fm,fb,va=edge.a,x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],lSite=edge.l,rSite=edge.r,lx=lSite.x,ly=lSite.y,rx=rSite.x,ry=rSite.y,fx=(lx+rx)/2,fy=(ly+ry)/2;if(ry===ly){if(x0>fx||fx>=x1)return;if(lx>rx){if(va){if(va.y>=y1)return}else va={x:fx,y:y0};vb={x:fx,y:y1}}else{if(va){if(va.y<y0)return}else va={x:fx,y:y1};vb={x:fx,y:y0}}}else if(fm=(lx-rx)/(ry-ly),fb=fy-fm*fx,-1>fm||fm>1)if(lx>rx){if(va){if(va.y>=y1)return}else va={x:(y0-fb)/fm,y:y0};vb={x:(y1-fb)/fm,y:y1}}else{if(va){if(va.y<y0)return}else va={x:(y1-fb)/fm,y:y1};vb={x:(y0-fb)/fm,y:y0}}else if(ry>ly){if(va){if(va.x>=x1)return}else va={x:x0,y:fm*x0+fb};vb={x:x1,y:fm*x1+fb}}else{if(va){if(va.x<x0)return}else va={x:x1,y:fm*x1+fb};vb={x:x0,y:fm*x0+fb}}return edge.a=va,edge.b=vb,!0}function d3_geom_voronoiEdge(lSite,rSite){this.l=lSite,this.r=rSite,this.a=this.b=null}function d3_geom_voronoiCreateEdge(lSite,rSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,rSite);return d3_geom_voronoiEdges.push(edge),va&&d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,va),vb&&d3_geom_voronoiSetEdgeEnd(edge,rSite,lSite,vb),d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,lSite,rSite)),d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,rSite,lSite)),edge}function d3_geom_voronoiCreateBorderEdge(lSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,null);return edge.a=va,edge.b=vb,d3_geom_voronoiEdges.push(edge),edge}function d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,vertex){edge.a||edge.b?edge.l===rSite?edge.b=vertex:edge.a=vertex:(edge.a=vertex,edge.l=lSite,edge.r=rSite)}function d3_geom_voronoiHalfEdge(edge,lSite,rSite){var va=edge.a,vb=edge.b;this.edge=edge,this.site=lSite,this.angle=rSite?Math.atan2(rSite.y-lSite.y,rSite.x-lSite.x):edge.l===lSite?Math.atan2(vb.x-va.x,va.y-vb.y):Math.atan2(va.x-vb.x,vb.y-va.y)}function d3_geom_voronoiRedBlackTree(){this._=null}function d3_geom_voronoiRedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null}function d3_geom_voronoiRedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.R=q.L,p.R&&(p.R.U=p),q.L=p}function d3_geom_voronoiRedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.L=q.R,p.L&&(p.L.U=p),q.R=p}function d3_geom_voronoiRedBlackFirst(node){for(;node.L;)node=node.L;return node}function d3_geom_voronoi(sites,bbox){var x0,y0,circle,site=sites.sort(d3_geom_voronoiVertexOrder).pop();for(d3_geom_voronoiEdges=[],d3_geom_voronoiCells=new Array(sites.length),d3_geom_voronoiBeaches=new d3_geom_voronoiRedBlackTree,d3_geom_voronoiCircles=new d3_geom_voronoiRedBlackTree;;)if(circle=d3_geom_voronoiFirstCircle,site&&(!circle||site.y<circle.y||site.y===circle.y&&site.x<circle.x))(site.x!==x0||site.y!==y0)&&(d3_geom_voronoiCells[site.i]=new d3_geom_voronoiCell(site),d3_geom_voronoiAddBeach(site),x0=site.x,y0=site.y),site=sites.pop();else{if(!circle)break;d3_geom_voronoiRemoveBeach(circle.arc)}bbox&&(d3_geom_voronoiClipEdges(bbox),d3_geom_voronoiCloseCells(bbox));var diagram={cells:d3_geom_voronoiCells,edges:d3_geom_voronoiEdges};return d3_geom_voronoiBeaches=d3_geom_voronoiCircles=d3_geom_voronoiEdges=d3_geom_voronoiCells=null,diagram}function d3_geom_voronoiVertexOrder(a,b){return b.y-a.y||b.x-a.x}function d3_geom_voronoiTriangleArea(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function d3_geom_quadtreeCompatX(d){return d.x}function d3_geom_quadtreeCompatY(d){return d.y}function d3_geom_quadtreeNode(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function d3_geom_quadtreeVisit(f,node,x1,y1,x2,y2){if(!f(node,x1,y1,x2,y2)){var sx=.5*(x1+x2),sy=.5*(y1+y2),children=node.nodes;children[0]&&d3_geom_quadtreeVisit(f,children[0],x1,y1,sx,sy),children[1]&&d3_geom_quadtreeVisit(f,children[1],sx,y1,x2,sy),children[2]&&d3_geom_quadtreeVisit(f,children[2],x1,sy,sx,y2),children[3]&&d3_geom_quadtreeVisit(f,children[3],sx,sy,x2,y2)}}function d3_geom_quadtreeFind(root,x,y,x0,y0,x3,y3){var closestPoint,minDistance2=1/0;return function find(node,x1,y1,x2,y2){if(!(x1>x3||y1>y3||x0>x2||y0>y2)){if(point=node.point){var point,dx=x-node.x,dy=y-node.y,distance2=dx*dx+dy*dy;if(minDistance2>distance2){var distance=Math.sqrt(minDistance2=distance2);x0=x-distance,y0=y-distance,x3=x+distance,y3=y+distance,closestPoint=point}}for(var children=node.nodes,xm=.5*(x1+x2),ym=.5*(y1+y2),right=x>=xm,below=y>=ym,i=below<<1|right,j=i+4;j>i;++i)if(node=children[3&i])switch(3&i){case 0:find(node,x1,y1,xm,ym);break;case 1:find(node,xm,y1,x2,ym);break;case 2:find(node,x1,ym,xm,y2);break;case 3:find(node,xm,ym,x2,y2)}}}(root,x0,y0,x3,y3),closestPoint}function d3_interpolateRgb(a,b){a=d3.rgb(a),b=d3.rgb(b);var ar=a.r,ag=a.g,ab=a.b,br=b.r-ar,bg=b.g-ag,bb=b.b-ab;return function(t){return"#"+d3_rgb_hex(Math.round(ar+br*t))+d3_rgb_hex(Math.round(ag+bg*t))+d3_rgb_hex(Math.round(ab+bb*t))}}function d3_interpolateObject(a,b){var k,i={},c={};for(k in a)k in b?i[k]=d3_interpolate(a[k],b[k]):c[k]=a[k];for(k in b)k in a||(c[k]=b[k]);return function(t){for(k in i)c[k]=i[k](t);return c}}function d3_interpolateNumber(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function d3_interpolateString(a,b){var am,bm,bs,bi=d3_interpolate_numberA.lastIndex=d3_interpolate_numberB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=d3_interpolate_numberA.exec(a))&&(bm=d3_interpolate_numberB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:d3_interpolateNumber(am,bm)})),bi=d3_interpolate_numberB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?(b=q[0].x,function(t){return b(t)+""}):function(){return b}:(b=q.length,function(t){for(var o,i=0;b>i;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function d3_interpolate(a,b){for(var f,i=d3.interpolators.length;--i>=0&&!(f=d3.interpolators[i](a,b)););return f}function d3_interpolateArray(a,b){var i,x=[],c=[],na=a.length,nb=b.length,n0=Math.min(a.length,b.length);for(i=0;n0>i;++i)x.push(d3_interpolate(a[i],b[i]));for(;na>i;++i)c[i]=a[i];for(;nb>i;++i)c[i]=b[i];return function(t){for(i=0;n0>i;++i)c[i]=x[i](t);return c}}function d3_ease_clamp(f){return function(t){return 0>=t?0:t>=1?1:f(t)}}function d3_ease_reverse(f){return function(t){return 1-f(1-t)}}function d3_ease_reflect(f){return function(t){return.5*(.5>t?f(2*t):2-f(2-2*t))}}function d3_ease_quad(t){return t*t}function d3_ease_cubic(t){return t*t*t}function d3_ease_cubicInOut(t){if(0>=t)return 0;if(t>=1)return 1;var t2=t*t,t3=t2*t;return 4*(.5>t?t3:3*(t-t2)+t3-.75)}function d3_ease_poly(e){return function(t){return Math.pow(t,e)}}function d3_ease_sin(t){return 1-Math.cos(t*halfπ)}function d3_ease_exp(t){return Math.pow(2,10*(t-1))}function d3_ease_circle(t){return 1-Math.sqrt(1-t*t)}function d3_ease_elastic(a,p){var s;return arguments.length<2&&(p=.45),arguments.length?s=p/τ*Math.asin(1/a):(a=1,s=p/4),function(t){return 1+a*Math.pow(2,-10*t)*Math.sin((t-s)*τ/p)}}function d3_ease_back(s){return s||(s=1.70158),function(t){return t*t*((s+1)*t-s)}}function d3_ease_bounce(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function d3_interpolateHcl(a,b){a=d3.hcl(a),b=d3.hcl(b);var ah=a.h,ac=a.c,al=a.l,bh=b.h-ah,bc=b.c-ac,bl=b.l-al;return isNaN(bc)&&(bc=0,ac=isNaN(ac)?b.c:ac),isNaN(bh)?(bh=0,ah=isNaN(ah)?b.h:ah):bh>180?bh-=360:-180>bh&&(bh+=360),function(t){return d3_hcl_lab(ah+bh*t,ac+bc*t,al+bl*t)+""}}function d3_interpolateHsl(a,b){a=d3.hsl(a),b=d3.hsl(b);var ah=a.h,as=a.s,al=a.l,bh=b.h-ah,bs=b.s-as,bl=b.l-al;return isNaN(bs)&&(bs=0,as=isNaN(as)?b.s:as),isNaN(bh)?(bh=0,ah=isNaN(ah)?b.h:ah):bh>180?bh-=360:-180>bh&&(bh+=360),function(t){return d3_hsl_rgb(ah+bh*t,as+bs*t,al+bl*t)+""}}function d3_interpolateLab(a,b){a=d3.lab(a),b=d3.lab(b);var al=a.l,aa=a.a,ab=a.b,bl=b.l-al,ba=b.a-aa,bb=b.b-ab;return function(t){return d3_lab_rgb(al+bl*t,aa+ba*t,ab+bb*t)+""}}function d3_interpolateRound(a,b){return b-=a,function(t){return Math.round(a+b*t)}}function d3_transform(m){var r0=[m.a,m.b],r1=[m.c,m.d],kx=d3_transformNormalize(r0),kz=d3_transformDot(r0,r1),ky=d3_transformNormalize(d3_transformCombine(r1,r0,-kz))||0;r0[0]*r1[1]<r1[0]*r0[1]&&(r0[0]*=-1,r0[1]*=-1,kx*=-1,kz*=-1),this.rotate=(kx?Math.atan2(r0[1],r0[0]):Math.atan2(-r1[0],r1[1]))*d3_degrees,this.translate=[m.e,m.f],this.scale=[kx,ky],this.skew=ky?Math.atan2(kz,ky)*d3_degrees:0}function d3_transformDot(a,b){return a[0]*b[0]+a[1]*b[1]}function d3_transformNormalize(a){var k=Math.sqrt(d3_transformDot(a,a));return k&&(a[0]/=k,a[1]/=k),k}function d3_transformCombine(a,b,k){return a[0]+=k*b[0],a[1]+=k*b[1],a}function d3_interpolateTransform(a,b){var n,s=[],q=[],A=d3.transform(a),B=d3.transform(b),ta=A.translate,tb=B.translate,ra=A.rotate,rb=B.rotate,wa=A.skew,wb=B.skew,ka=A.scale,kb=B.scale;return ta[0]!=tb[0]||ta[1]!=tb[1]?(s.push("translate(",null,",",null,")"),q.push({i:1,x:d3_interpolateNumber(ta[0],tb[0])},{i:3,x:d3_interpolateNumber(ta[1],tb[1])})):tb[0]||tb[1]?s.push("translate("+tb+")"):s.push(""),ra!=rb?(ra-rb>180?rb+=360:rb-ra>180&&(ra+=360),q.push({i:s.push(s.pop()+"rotate(",null,")")-2,x:d3_interpolateNumber(ra,rb)})):rb&&s.push(s.pop()+"rotate("+rb+")"),wa!=wb?q.push({i:s.push(s.pop()+"skewX(",null,")")-2,x:d3_interpolateNumber(wa,wb)}):wb&&s.push(s.pop()+"skewX("+wb+")"),ka[0]!=kb[0]||ka[1]!=kb[1]?(n=s.push(s.pop()+"scale(",null,",",null,")"),q.push({i:n-4,x:d3_interpolateNumber(ka[0],kb[0])},{i:n-2,x:d3_interpolateNumber(ka[1],kb[1])})):(1!=kb[0]||1!=kb[1])&&s.push(s.pop()+"scale("+kb+")"),n=q.length,function(t){for(var o,i=-1;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}function d3_uninterpolateNumber(a,b){return b=(b-=a=+a)||1/b,function(x){return(x-a)/b}}function d3_uninterpolateClamp(a,b){return b=(b-=a=+a)||1/b,function(x){return Math.max(0,Math.min(1,(x-a)/b))}}function d3_layout_bundlePath(link){for(var start=link.source,end=link.target,lca=d3_layout_bundleLeastCommonAncestor(start,end),points=[start];start!==lca;)start=start.parent,points.push(start);for(var k=points.length;end!==lca;)points.splice(k,0,end),end=end.parent;return points}function d3_layout_bundleAncestors(node){for(var ancestors=[],parent=node.parent;null!=parent;)ancestors.push(node),node=parent,parent=parent.parent;return ancestors.push(node),ancestors}function d3_layout_bundleLeastCommonAncestor(a,b){if(a===b)return a;for(var aNodes=d3_layout_bundleAncestors(a),bNodes=d3_layout_bundleAncestors(b),aNode=aNodes.pop(),bNode=bNodes.pop(),sharedNode=null;aNode===bNode;)sharedNode=aNode,aNode=aNodes.pop(),bNode=bNodes.pop();return sharedNode}function d3_layout_forceDragstart(d){d.fixed|=2}function d3_layout_forceDragend(d){d.fixed&=-7}function d3_layout_forceMouseover(d){d.fixed|=4,d.px=d.x,d.py=d.y}function d3_layout_forceMouseout(d){d.fixed&=-5}function d3_layout_forceAccumulate(quad,alpha,charges){var cx=0,cy=0;if(quad.charge=0,!quad.leaf)for(var c,nodes=quad.nodes,n=nodes.length,i=-1;++i<n;)c=nodes[i],null!=c&&(d3_layout_forceAccumulate(c,alpha,charges),quad.charge+=c.charge,cx+=c.charge*c.cx,cy+=c.charge*c.cy);if(quad.point){quad.leaf||(quad.point.x+=Math.random()-.5,quad.point.y+=Math.random()-.5);var k=alpha*charges[quad.point.index];quad.charge+=quad.pointCharge=k,cx+=k*quad.point.x,cy+=k*quad.point.y}quad.cx=cx/quad.charge,quad.cy=cy/quad.charge}function d3_layout_hierarchyRebind(object,hierarchy){return d3.rebind(object,hierarchy,"sort","children","value"),object.nodes=object,object.links=d3_layout_hierarchyLinks,object}function d3_layout_hierarchyVisitBefore(node,callback){for(var nodes=[node];null!=(node=nodes.pop());)if(callback(node),(children=node.children)&&(n=children.length))for(var n,children;--n>=0;)nodes.push(children[n])}function d3_layout_hierarchyVisitAfter(node,callback){for(var nodes=[node],nodes2=[];null!=(node=nodes.pop());)if(nodes2.push(node),(children=node.children)&&(n=children.length))for(var n,children,i=-1;++i<n;)nodes.push(children[i]);for(;null!=(node=nodes2.pop());)callback(node)}function d3_layout_hierarchyChildren(d){return d.children}function d3_layout_hierarchyValue(d){return d.value}function d3_layout_hierarchySort(a,b){return b.value-a.value}function d3_layout_hierarchyLinks(nodes){return d3.merge(nodes.map(function(parent){return(parent.children||[]).map(function(child){return{source:parent,target:child}})}))}function d3_layout_stackX(d){return d.x}function d3_layout_stackY(d){return d.y}function d3_layout_stackOut(d,y0,y){d.y0=y0,d.y=y}function d3_layout_stackOrderDefault(data){return d3.range(data.length)}function d3_layout_stackOffsetZero(data){for(var j=-1,m=data[0].length,y0=[];++j<m;)y0[j]=0;return y0}function d3_layout_stackMaxIndex(array){for(var k,i=1,j=0,v=array[0][1],n=array.length;n>i;++i)(k=array[i][1])>v&&(j=i,v=k);return j}function d3_layout_stackReduceSum(d){return d.reduce(d3_layout_stackSum,0)}function d3_layout_stackSum(p,d){return p+d[1]}function d3_layout_histogramBinSturges(range,values){return d3_layout_histogramBinFixed(range,Math.ceil(Math.log(values.length)/Math.LN2+1))}function d3_layout_histogramBinFixed(range,n){for(var x=-1,b=+range[0],m=(range[1]-b)/n,f=[];++x<=n;)f[x]=m*x+b;return f}function d3_layout_histogramRange(values){return[d3.min(values),d3.max(values)]}function d3_layout_packSort(a,b){return a.value-b.value}function d3_layout_packInsert(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function d3_layout_packSplice(a,b){a._pack_next=b,b._pack_prev=a}function d3_layout_packIntersects(a,b){var dx=b.x-a.x,dy=b.y-a.y,dr=a.r+b.r;return.999*dr*dr>dx*dx+dy*dy}function d3_layout_packSiblings(node){function bound(node){xMin=Math.min(node.x-node.r,xMin),xMax=Math.max(node.x+node.r,xMax),yMin=Math.min(node.y-node.r,yMin),yMax=Math.max(node.y+node.r,yMax)}if((nodes=node.children)&&(n=nodes.length)){var nodes,a,b,c,i,j,k,n,xMin=1/0,xMax=-(1/0),yMin=1/0,yMax=-(1/0);if(nodes.forEach(d3_layout_packLink),a=nodes[0],a.x=-a.r,a.y=0,bound(a),n>1&&(b=nodes[1],b.x=b.r,b.y=0,bound(b),n>2))for(c=nodes[2],d3_layout_packPlace(a,b,c),bound(c),d3_layout_packInsert(a,c),a._pack_prev=c,d3_layout_packInsert(c,b),b=a._pack_next,i=3;n>i;i++){d3_layout_packPlace(a,b,c=nodes[i]);var isect=0,s1=1,s2=1;for(j=b._pack_next;j!==b;j=j._pack_next,s1++)if(d3_layout_packIntersects(j,c)){isect=1;break}if(1==isect)for(k=a._pack_prev;k!==j._pack_prev&&!d3_layout_packIntersects(k,c);k=k._pack_prev,s2++);isect?(s2>s1||s1==s2&&b.r<a.r?d3_layout_packSplice(a,b=j):d3_layout_packSplice(a=k,b),i--):(d3_layout_packInsert(a,c),b=c,bound(c))}var cx=(xMin+xMax)/2,cy=(yMin+yMax)/2,cr=0;for(i=0;n>i;i++)c=nodes[i],c.x-=cx,
c.y-=cy,cr=Math.max(cr,c.r+Math.sqrt(c.x*c.x+c.y*c.y));node.r=cr,nodes.forEach(d3_layout_packUnlink)}}function d3_layout_packLink(node){node._pack_next=node._pack_prev=node}function d3_layout_packUnlink(node){delete node._pack_next,delete node._pack_prev}function d3_layout_packTransform(node,x,y,k){var children=node.children;if(node.x=x+=k*node.x,node.y=y+=k*node.y,node.r*=k,children)for(var i=-1,n=children.length;++i<n;)d3_layout_packTransform(children[i],x,y,k)}function d3_layout_packPlace(a,b,c){var db=a.r+c.r,dx=b.x-a.x,dy=b.y-a.y;if(db&&(dx||dy)){var da=b.r+c.r,dc=dx*dx+dy*dy;da*=da,db*=db;var x=.5+(db-da)/(2*dc),y=Math.sqrt(Math.max(0,2*da*(db+dc)-(db-=dc)*db-da*da))/(2*dc);c.x=a.x+x*dx+y*dy,c.y=a.y+x*dy-y*dx}else c.x=a.x+db,c.y=a.y}function d3_layout_treeSeparation(a,b){return a.parent==b.parent?1:2}function d3_layout_treeLeft(v){var children=v.children;return children.length?children[0]:v.t}function d3_layout_treeRight(v){var n,children=v.children;return(n=children.length)?children[n-1]:v.t}function d3_layout_treeMove(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change,wp.s+=shift,wm.c+=change,wp.z+=shift,wp.m+=shift}function d3_layout_treeShift(v){for(var w,shift=0,change=0,children=v.children,i=children.length;--i>=0;)w=children[i],w.z+=shift,w.m+=shift,shift+=w.s+(change+=w.c)}function d3_layout_treeAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}function d3_layout_clusterY(children){return 1+d3.max(children,function(child){return child.y})}function d3_layout_clusterX(children){return children.reduce(function(x,child){return x+child.x},0)/children.length}function d3_layout_clusterLeft(node){var children=node.children;return children&&children.length?d3_layout_clusterLeft(children[0]):node}function d3_layout_clusterRight(node){var n,children=node.children;return children&&(n=children.length)?d3_layout_clusterRight(children[n-1]):node}function d3_layout_treemapPadNull(node){return{x:node.x,y:node.y,dx:node.dx,dy:node.dy}}function d3_layout_treemapPad(node,padding){var x=node.x+padding[3],y=node.y+padding[0],dx=node.dx-padding[1]-padding[3],dy=node.dy-padding[0]-padding[2];return 0>dx&&(x+=dx/2,dx=0),0>dy&&(y+=dy/2,dy=0),{x:x,y:y,dx:dx,dy:dy}}function d3_scaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return stop>start?[start,stop]:[stop,start]}function d3_scaleRange(scale){return scale.rangeExtent?scale.rangeExtent():d3_scaleExtent(scale.range())}function d3_scale_bilinear(domain,range,uninterpolate,interpolate){var u=uninterpolate(domain[0],domain[1]),i=interpolate(range[0],range[1]);return function(x){return i(u(x))}}function d3_scale_nice(domain,nice){var dx,i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1];return x0>x1&&(dx=i0,i0=i1,i1=dx,dx=x0,x0=x1,x1=dx),domain[i0]=nice.floor(x0),domain[i1]=nice.ceil(x1),domain}function d3_scale_niceStep(step){return step?{floor:function(x){return Math.floor(x/step)*step},ceil:function(x){return Math.ceil(x/step)*step}}:d3_scale_niceIdentity}function d3_scale_polylinear(domain,range,uninterpolate,interpolate){var u=[],i=[],j=0,k=Math.min(domain.length,range.length)-1;for(domain[k]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++j<=k;)u.push(uninterpolate(domain[j-1],domain[j])),i.push(interpolate(range[j-1],range[j]));return function(x){var j=d3.bisect(domain,x,1,k)-1;return i[j](u[j](x))}}function d3_scale_linear(domain,range,interpolate,clamp){function rescale(){var linear=Math.min(domain.length,range.length)>2?d3_scale_polylinear:d3_scale_bilinear,uninterpolate=clamp?d3_uninterpolateClamp:d3_uninterpolateNumber;return output=linear(domain,range,uninterpolate,interpolate),input=linear(range,domain,uninterpolate,d3_interpolate),scale}function scale(x){return output(x)}var output,input;return scale.invert=function(y){return input(y)},scale.domain=function(x){return arguments.length?(domain=x.map(Number),rescale()):domain},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.rangeRound=function(x){return scale.range(x).interpolate(d3_interpolateRound)},scale.clamp=function(x){return arguments.length?(clamp=x,rescale()):clamp},scale.interpolate=function(x){return arguments.length?(interpolate=x,rescale()):interpolate},scale.ticks=function(m){return d3_scale_linearTicks(domain,m)},scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},scale.nice=function(m){return d3_scale_linearNice(domain,m),rescale()},scale.copy=function(){return d3_scale_linear(domain,range,interpolate,clamp)},rescale()}function d3_scale_linearRebind(scale,linear){return d3.rebind(scale,linear,"range","rangeRound","interpolate","clamp")}function d3_scale_linearNice(domain,m){return d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2]))}function d3_scale_linearTickRange(domain,m){null==m&&(m=10);var extent=d3_scaleExtent(domain),span=extent[1]-extent[0],step=Math.pow(10,Math.floor(Math.log(span/m)/Math.LN10)),err=m/span*step;return.15>=err?step*=10:.35>=err?step*=5:.75>=err&&(step*=2),extent[0]=Math.ceil(extent[0]/step)*step,extent[1]=Math.floor(extent[1]/step)*step+.5*step,extent[2]=step,extent}function d3_scale_linearTicks(domain,m){return d3.range.apply(d3,d3_scale_linearTickRange(domain,m))}function d3_scale_linearTickFormat(domain,m,format){var range=d3_scale_linearTickRange(domain,m);if(format){var match=d3_format_re.exec(format);if(match.shift(),"s"===match[8]){var prefix=d3.formatPrefix(Math.max(abs(range[0]),abs(range[1])));return match[7]||(match[7]="."+d3_scale_linearPrecision(prefix.scale(range[2]))),match[8]="f",format=d3.format(match.join("")),function(d){return format(prefix.scale(d))+prefix.symbol}}match[7]||(match[7]="."+d3_scale_linearFormatPrecision(match[8],range)),format=match.join("")}else format=",."+d3_scale_linearPrecision(range[2])+"f";return d3.format(format)}function d3_scale_linearPrecision(value){return-Math.floor(Math.log(value)/Math.LN10+.01)}function d3_scale_linearFormatPrecision(type,range){var p=d3_scale_linearPrecision(range[2]);return type in d3_scale_linearFormatSignificant?Math.abs(p-d3_scale_linearPrecision(Math.max(abs(range[0]),abs(range[1]))))+ +("e"!==type):p-2*("%"===type)}function d3_scale_log(linear,base,positive,domain){function log(x){return(positive?Math.log(0>x?0:x):-Math.log(x>0?0:-x))/Math.log(base)}function pow(x){return positive?Math.pow(base,x):-Math.pow(base,-x)}function scale(x){return linear(log(x))}return scale.invert=function(x){return pow(linear.invert(x))},scale.domain=function(x){return arguments.length?(positive=x[0]>=0,linear.domain((domain=x.map(Number)).map(log)),scale):domain},scale.base=function(_){return arguments.length?(base=+_,linear.domain(domain.map(log)),scale):base},scale.nice=function(){var niced=d3_scale_nice(domain.map(log),positive?Math:d3_scale_logNiceNegative);return linear.domain(niced),domain=niced.map(pow),scale},scale.ticks=function(){var extent=d3_scaleExtent(domain),ticks=[],u=extent[0],v=extent[1],i=Math.floor(log(u)),j=Math.ceil(log(v)),n=base%1?2:base;if(isFinite(j-i)){if(positive){for(;j>i;i++)for(var k=1;n>k;k++)ticks.push(pow(i)*k);ticks.push(pow(i))}else for(ticks.push(pow(i));i++<j;)for(var k=n-1;k>0;k--)ticks.push(pow(i)*k);for(i=0;ticks[i]<u;i++);for(j=ticks.length;ticks[j-1]>v;j--);ticks=ticks.slice(i,j)}return ticks},scale.tickFormat=function(n,format){if(!arguments.length)return d3_scale_logFormat;arguments.length<2?format=d3_scale_logFormat:"function"!=typeof format&&(format=d3.format(format));var e,k=Math.max(.1,n/scale.ticks().length),f=positive?(e=1e-12,Math.ceil):(e=-1e-12,Math.floor);return function(d){return d/pow(f(log(d)+e))<=k?format(d):""}},scale.copy=function(){return d3_scale_log(linear.copy(),base,positive,domain)},d3_scale_linearRebind(scale,linear)}function d3_scale_pow(linear,exponent,domain){function scale(x){return linear(powp(x))}var powp=d3_scale_powPow(exponent),powb=d3_scale_powPow(1/exponent);return scale.invert=function(x){return powb(linear.invert(x))},scale.domain=function(x){return arguments.length?(linear.domain((domain=x.map(Number)).map(powp)),scale):domain},scale.ticks=function(m){return d3_scale_linearTicks(domain,m)},scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},scale.nice=function(m){return scale.domain(d3_scale_linearNice(domain,m))},scale.exponent=function(x){return arguments.length?(powp=d3_scale_powPow(exponent=x),powb=d3_scale_powPow(1/exponent),linear.domain(domain.map(powp)),scale):exponent},scale.copy=function(){return d3_scale_pow(linear.copy(),exponent,domain)},d3_scale_linearRebind(scale,linear)}function d3_scale_powPow(e){return function(x){return 0>x?-Math.pow(-x,e):Math.pow(x,e)}}function d3_scale_ordinal(domain,ranger){function scale(x){return range[((index.get(x)||("range"===ranger.t?index.set(x,domain.push(x)):NaN))-1)%range.length]}function steps(start,step){return d3.range(domain.length).map(function(i){return start+step*i})}var index,range,rangeBand;return scale.domain=function(x){if(!arguments.length)return domain;domain=[],index=new d3_Map;for(var xi,i=-1,n=x.length;++i<n;)index.has(xi=x[i])||index.set(xi,domain.push(xi));return scale[ranger.t].apply(scale,ranger.a)},scale.range=function(x){return arguments.length?(range=x,rangeBand=0,ranger={t:"range",a:arguments},scale):range},scale.rangePoints=function(x,padding){arguments.length<2&&(padding=0);var start=x[0],stop=x[1],step=domain.length<2?(start=(start+stop)/2,0):(stop-start)/(domain.length-1+padding);return range=steps(start+step*padding/2,step),rangeBand=0,ranger={t:"rangePoints",a:arguments},scale},scale.rangeRoundPoints=function(x,padding){arguments.length<2&&(padding=0);var start=x[0],stop=x[1],step=domain.length<2?(start=stop=Math.round((start+stop)/2),0):(stop-start)/(domain.length-1+padding)|0;return range=steps(start+Math.round(step*padding/2+(stop-start-(domain.length-1+padding)*step)/2),step),rangeBand=0,ranger={t:"rangeRoundPoints",a:arguments},scale},scale.rangeBands=function(x,padding,outerPadding){arguments.length<2&&(padding=0),arguments.length<3&&(outerPadding=padding);var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=(stop-start)/(domain.length-padding+2*outerPadding);return range=steps(start+step*outerPadding,step),reverse&&range.reverse(),rangeBand=step*(1-padding),ranger={t:"rangeBands",a:arguments},scale},scale.rangeRoundBands=function(x,padding,outerPadding){arguments.length<2&&(padding=0),arguments.length<3&&(outerPadding=padding);var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=Math.floor((stop-start)/(domain.length-padding+2*outerPadding));return range=steps(start+Math.round((stop-start-(domain.length-padding)*step)/2),step),reverse&&range.reverse(),rangeBand=Math.round(step*(1-padding)),ranger={t:"rangeRoundBands",a:arguments},scale},scale.rangeBand=function(){return rangeBand},scale.rangeExtent=function(){return d3_scaleExtent(ranger.a[0])},scale.copy=function(){return d3_scale_ordinal(domain,ranger)},scale.domain(domain)}function d3_scale_quantile(domain,range){function rescale(){var k=0,q=range.length;for(thresholds=[];++k<q;)thresholds[k-1]=d3.quantile(domain,k/q);return scale}function scale(x){return isNaN(x=+x)?void 0:range[d3.bisect(thresholds,x)]}var thresholds;return scale.domain=function(x){return arguments.length?(domain=x.map(d3_number).filter(d3_numeric).sort(d3_ascending),rescale()):domain},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.quantiles=function(){return thresholds},scale.invertExtent=function(y){return y=range.indexOf(y),0>y?[NaN,NaN]:[y>0?thresholds[y-1]:domain[0],y<thresholds.length?thresholds[y]:domain[domain.length-1]]},scale.copy=function(){return d3_scale_quantile(domain,range)},rescale()}function d3_scale_quantize(x0,x1,range){function scale(x){return range[Math.max(0,Math.min(i,Math.floor(kx*(x-x0))))]}function rescale(){return kx=range.length/(x1-x0),i=range.length-1,scale}var kx,i;return scale.domain=function(x){return arguments.length?(x0=+x[0],x1=+x[x.length-1],rescale()):[x0,x1]},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.invertExtent=function(y){return y=range.indexOf(y),y=0>y?NaN:y/kx+x0,[y,y+1/kx]},scale.copy=function(){return d3_scale_quantize(x0,x1,range)},rescale()}function d3_scale_threshold(domain,range){function scale(x){return x>=x?range[d3.bisect(domain,x)]:void 0}return scale.domain=function(_){return arguments.length?(domain=_,scale):domain},scale.range=function(_){return arguments.length?(range=_,scale):range},scale.invertExtent=function(y){return y=range.indexOf(y),[domain[y-1],domain[y]]},scale.copy=function(){return d3_scale_threshold(domain,range)},scale}function d3_scale_identity(domain){function identity(x){return+x}return identity.invert=identity,identity.domain=identity.range=function(x){return arguments.length?(domain=x.map(identity),identity):domain},identity.ticks=function(m){return d3_scale_linearTicks(domain,m)},identity.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},identity.copy=function(){return d3_scale_identity(domain)},identity}function d3_zero(){return 0}function d3_svg_arcInnerRadius(d){return d.innerRadius}function d3_svg_arcOuterRadius(d){return d.outerRadius}function d3_svg_arcStartAngle(d){return d.startAngle}function d3_svg_arcEndAngle(d){return d.endAngle}function d3_svg_arcPadAngle(d){return d&&d.padAngle}function d3_svg_arcSweep(x0,y0,x1,y1){return(x0-x1)*y0-(y0-y1)*x0>0?0:1}function d3_svg_arcCornerTangents(p0,p1,r1,rc,cw){var x01=p0[0]-p1[0],y01=p0[1]-p1[1],lo=(cw?rc:-rc)/Math.sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x1=p0[0]+ox,y1=p0[1]+oy,x2=p1[0]+ox,y2=p1[1]+oy,x3=(x1+x2)/2,y3=(y1+y2)/2,dx=x2-x1,dy=y2-y1,d2=dx*dx+dy*dy,r=r1-rc,D=x1*y2-x2*y1,d=(0>dy?-1:1)*Math.sqrt(r*r*d2-D*D),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x3,dy0=cy0-y3,dx1=cx1-x3,dy1=cy1-y3;return dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1&&(cx0=cx1,cy0=cy1),[[cx0-ox,cy0-oy],[cx0*r1/r,cy0*r1/r]]}function d3_svg_line(projection){function line(data){function segment(){segments.push("M",interpolate(projection(points),tension))}for(var d,segments=[],points=[],i=-1,n=data.length,fx=d3_functor(x),fy=d3_functor(y);++i<n;)defined.call(this,d=data[i],i)?points.push([+fx.call(this,d,i),+fy.call(this,d,i)]):points.length&&(segment(),points=[]);return points.length&&segment(),segments.length?segments.join(""):null}var x=d3_geom_pointX,y=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,tension=.7;return line.x=function(_){return arguments.length?(x=_,line):x},line.y=function(_){return arguments.length?(y=_,line):y},line.defined=function(_){return arguments.length?(defined=_,line):defined},line.interpolate=function(_){return arguments.length?(interpolateKey="function"==typeof _?interpolate=_:(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key,line):interpolateKey},line.tension=function(_){return arguments.length?(tension=_,line):tension},line}function d3_svg_lineLinear(points){return points.join("L")}function d3_svg_lineLinearClosed(points){return d3_svg_lineLinear(points)+"Z"}function d3_svg_lineStep(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("H",(p[0]+(p=points[i])[0])/2,"V",p[1]);return n>1&&path.push("H",p[0]),path.join("")}function d3_svg_lineStepBefore(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("V",(p=points[i])[1],"H",p[0]);return path.join("")}function d3_svg_lineStepAfter(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("H",(p=points[i])[0],"V",p[1]);return path.join("")}function d3_svg_lineCardinalOpen(points,tension){return points.length<4?d3_svg_lineLinear(points):points[1]+d3_svg_lineHermite(points.slice(1,-1),d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineCardinalClosed(points,tension){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite((points.push(points[0]),points),d3_svg_lineCardinalTangents([points[points.length-2]].concat(points,[points[1]]),tension))}function d3_svg_lineCardinal(points,tension){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineHermite(points,tangents){if(tangents.length<1||points.length!=tangents.length&&points.length!=tangents.length+2)return d3_svg_lineLinear(points);var quad=points.length!=tangents.length,path="",p0=points[0],p=points[1],t0=tangents[0],t=t0,pi=1;if(quad&&(path+="Q"+(p[0]-2*t0[0]/3)+","+(p[1]-2*t0[1]/3)+","+p[0]+","+p[1],p0=points[1],pi=2),tangents.length>1){t=tangents[1],p=points[pi],pi++,path+="C"+(p0[0]+t0[0])+","+(p0[1]+t0[1])+","+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1];for(var i=2;i<tangents.length;i++,pi++)p=points[pi],t=tangents[i],path+="S"+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1]}if(quad){var lp=points[pi];path+="Q"+(p[0]+2*t[0]/3)+","+(p[1]+2*t[1]/3)+","+lp[0]+","+lp[1]}return path}function d3_svg_lineCardinalTangents(points,tension){for(var p0,tangents=[],a=(1-tension)/2,p1=points[0],p2=points[1],i=1,n=points.length;++i<n;)p0=p1,p1=p2,p2=points[i],tangents.push([a*(p2[0]-p0[0]),a*(p2[1]-p0[1])]);return tangents}function d3_svg_lineBasis(points){if(points.length<3)return d3_svg_lineLinear(points);var i=1,n=points.length,pi=points[0],x0=pi[0],y0=pi[1],px=[x0,x0,x0,(pi=points[1])[0]],py=[y0,y0,y0,pi[1]],path=[x0,",",y0,"L",d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];for(points.push(points[n-1]);++i<=n;)pi=points[i],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return points.pop(),path.push("L",pi),path.join("")}function d3_svg_lineBasisOpen(points){if(points.length<4)return d3_svg_lineLinear(points);for(var pi,path=[],i=-1,n=points.length,px=[0],py=[0];++i<3;)pi=points[i],px.push(pi[0]),py.push(pi[1]);for(path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3,px)+","+d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)),--i;++i<n;)pi=points[i],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return path.join("")}function d3_svg_lineBasisClosed(points){for(var path,pi,i=-1,n=points.length,m=n+4,px=[],py=[];++i<4;)pi=points[i%n],px.push(pi[0]),py.push(pi[1]);for(path=[d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)],--i;++i<m;)pi=points[i%n],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return path.join("")}function d3_svg_lineBundle(points,tension){var n=points.length-1;if(n)for(var p,t,x0=points[0][0],y0=points[0][1],dx=points[n][0]-x0,dy=points[n][1]-y0,i=-1;++i<=n;)p=points[i],t=i/n,p[0]=tension*p[0]+(1-tension)*(x0+t*dx),p[1]=tension*p[1]+(1-tension)*(y0+t*dy);return d3_svg_lineBasis(points)}function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function d3_svg_lineBasisBezier(path,x,y){path.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,y))}function d3_svg_lineSlope(p0,p1){return(p1[1]-p0[1])/(p1[0]-p0[0])}function d3_svg_lineFiniteDifferences(points){for(var i=0,j=points.length-1,m=[],p0=points[0],p1=points[1],d=m[0]=d3_svg_lineSlope(p0,p1);++i<j;)m[i]=(d+(d=d3_svg_lineSlope(p0=p1,p1=points[i+1])))/2;return m[i]=d,m}function d3_svg_lineMonotoneTangents(points){for(var d,a,b,s,tangents=[],m=d3_svg_lineFiniteDifferences(points),i=-1,j=points.length-1;++i<j;)d=d3_svg_lineSlope(points[i],points[i+1]),abs(d)<ε?m[i]=m[i+1]=0:(a=m[i]/d,b=m[i+1]/d,s=a*a+b*b,s>9&&(s=3*d/Math.sqrt(s),m[i]=s*a,m[i+1]=s*b));for(i=-1;++i<=j;)s=(points[Math.min(j,i+1)][0]-points[Math.max(0,i-1)][0])/(6*(1+m[i]*m[i])),tangents.push([s||0,m[i]*s||0]);return tangents}function d3_svg_lineMonotone(points){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineMonotoneTangents(points))}function d3_svg_lineRadial(points){for(var point,r,a,i=-1,n=points.length;++i<n;)point=points[i],r=point[0],a=point[1]-halfπ,point[0]=r*Math.cos(a),point[1]=r*Math.sin(a);return points}function d3_svg_area(projection){function area(data){function segment(){segments.push("M",interpolate(projection(points1),tension),L,interpolateReverse(projection(points0.reverse()),tension),"Z")}for(var d,x,y,segments=[],points0=[],points1=[],i=-1,n=data.length,fx0=d3_functor(x0),fy0=d3_functor(y0),fx1=x0===x1?function(){return x}:d3_functor(x1),fy1=y0===y1?function(){return y}:d3_functor(y1);++i<n;)defined.call(this,d=data[i],i)?(points0.push([x=+fx0.call(this,d,i),y=+fy0.call(this,d,i)]),points1.push([+fx1.call(this,d,i),+fy1.call(this,d,i)])):points0.length&&(segment(),points0=[],points1=[]);return points0.length&&segment(),segments.length?segments.join(""):null}var x0=d3_geom_pointX,x1=d3_geom_pointX,y0=0,y1=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,interpolateReverse=interpolate,L="L",tension=.7;return area.x=function(_){return arguments.length?(x0=x1=_,area):x1},area.x0=function(_){return arguments.length?(x0=_,area):x0},area.x1=function(_){return arguments.length?(x1=_,area):x1},area.y=function(_){return arguments.length?(y0=y1=_,area):y1},area.y0=function(_){return arguments.length?(y0=_,area):y0},area.y1=function(_){return arguments.length?(y1=_,area):y1},area.defined=function(_){return arguments.length?(defined=_,area):defined},area.interpolate=function(_){return arguments.length?(interpolateKey="function"==typeof _?interpolate=_:(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key,interpolateReverse=interpolate.reverse||interpolate,L=interpolate.closed?"M":"L",area):interpolateKey},area.tension=function(_){return arguments.length?(tension=_,area):tension},area}function d3_svg_chordRadius(d){return d.radius}function d3_svg_diagonalProjection(d){return[d.x,d.y]}function d3_svg_diagonalRadialProjection(projection){return function(){var d=projection.apply(this,arguments),r=d[0],a=d[1]-halfπ;return[r*Math.cos(a),r*Math.sin(a)]}}function d3_svg_symbolSize(){return 64}function d3_svg_symbolType(){return"circle"}function d3_svg_symbolCircle(size){var r=Math.sqrt(size/π);return"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z"}function d3_selection_interruptNS(ns){return function(){var lock,active;(lock=this[ns])&&(active=lock[lock.active])&&(--lock.count?delete lock[lock.active]:delete this[ns],lock.active+=.5,active.event&&active.event.interrupt.call(this,this.__data__,active.index))}}function d3_transition(groups,ns,id){return d3_subclass(groups,d3_transitionPrototype),groups.namespace=ns,groups.id=id,groups}function d3_transition_tween(groups,name,value,tween){var id=groups.id,ns=groups.namespace;return d3_selection_each(groups,"function"==typeof value?function(node,i,j){node[ns][id].tween.set(name,tween(value.call(node,node.__data__,i,j)))}:(value=tween(value),function(node){node[ns][id].tween.set(name,value)}))}function d3_transition_text(b){return null==b&&(b=""),function(){this.textContent=b}}function d3_transitionNamespace(name){return null==name?"__transition__":"__transition_"+name+"__"}function d3_transitionNode(node,i,ns,id,inherit){var lock=node[ns]||(node[ns]={active:0,count:0}),transition=lock[id];if(!transition){var time=inherit.time;transition=lock[id]={tween:new d3_Map,time:time,delay:inherit.delay,duration:inherit.duration,ease:inherit.ease,index:i},inherit=null,++lock.count,d3.timer(function(elapsed){function start(elapsed){if(lock.active>id)return stop();var active=lock[lock.active];active&&(--lock.count,delete lock[lock.active],active.event&&active.event.interrupt.call(node,node.__data__,active.index)),lock.active=id,transition.event&&transition.event.start.call(node,node.__data__,i),transition.tween.forEach(function(key,value){(value=value.call(node,node.__data__,i))&&tweened.push(value)}),ease=transition.ease,duration=transition.duration,d3.timer(function(){return timer.c=tick(elapsed||1)?d3_true:tick,1},0,time)}function tick(elapsed){if(lock.active!==id)return 1;for(var t=elapsed/duration,e=ease(t),n=tweened.length;n>0;)tweened[--n].call(node,e);return t>=1?(transition.event&&transition.event.end.call(node,node.__data__,i),stop()):void 0}function stop(){return--lock.count?delete lock[id]:delete node[ns],1}var duration,ease,delay=transition.delay,timer=d3_timer_active,tweened=[];return timer.t=delay+time,elapsed>=delay?start(elapsed-delay):void(timer.c=start)},0,time)}}function d3_svg_axisX(selection,x0,x1){selection.attr("transform",function(d){var v0=x0(d);return"translate("+(isFinite(v0)?v0:x1(d))+",0)"})}function d3_svg_axisY(selection,y0,y1){selection.attr("transform",function(d){var v0=y0(d);return"translate(0,"+(isFinite(v0)?v0:y1(d))+")"})}function d3_time_formatIsoNative(date){return date.toISOString()}function d3_time_scale(linear,methods,format){function scale(x){return linear(x)}function tickMethod(extent,count){var span=extent[1]-extent[0],target=span/count,i=d3.bisect(d3_time_scaleSteps,target);return i==d3_time_scaleSteps.length?[methods.year,d3_scale_linearTickRange(extent.map(function(d){return d/31536e6}),count)[2]]:i?methods[target/d3_time_scaleSteps[i-1]<d3_time_scaleSteps[i]/target?i-1:i]:[d3_time_scaleMilliseconds,d3_scale_linearTickRange(extent,count)[2]]}return scale.invert=function(x){return d3_time_scaleDate(linear.invert(x))},scale.domain=function(x){return arguments.length?(linear.domain(x),scale):linear.domain().map(d3_time_scaleDate)},scale.nice=function(interval,skip){function skipped(date){return!isNaN(date)&&!interval.range(date,d3_time_scaleDate(+date+1),skip).length}var domain=scale.domain(),extent=d3_scaleExtent(domain),method=null==interval?tickMethod(extent,10):"number"==typeof interval&&tickMethod(extent,interval);return method&&(interval=method[0],skip=method[1]),scale.domain(d3_scale_nice(domain,skip>1?{floor:function(date){for(;skipped(date=interval.floor(date));)date=d3_time_scaleDate(date-1);return date},ceil:function(date){for(;skipped(date=interval.ceil(date));)date=d3_time_scaleDate(+date+1);return date}}:interval))},scale.ticks=function(interval,skip){var extent=d3_scaleExtent(scale.domain()),method=null==interval?tickMethod(extent,10):"number"==typeof interval?tickMethod(extent,interval):!interval.range&&[{range:interval},skip];return method&&(interval=method[0],skip=method[1]),interval.range(extent[0],d3_time_scaleDate(+extent[1]+1),1>skip?1:skip)},scale.tickFormat=function(){return format},scale.copy=function(){return d3_time_scale(linear.copy(),methods,format)},d3_scale_linearRebind(scale,linear)}function d3_time_scaleDate(t){return new Date(t)}function d3_json(request){return JSON.parse(request.responseText)}function d3_html(request){var range=d3_document.createRange();return range.selectNode(d3_document.body),range.createContextualFragment(request.responseText)}var d3={version:"3.5.6"},d3_arraySlice=[].slice,d3_array=function(list){return d3_arraySlice.call(list)},d3_document=this.document;if(d3_document)try{d3_array(d3_document.documentElement.childNodes)[0].nodeType}catch(e){d3_array=function(list){for(var i=list.length,array=new Array(i);i--;)array[i]=list[i];return array}}if(Date.now||(Date.now=function(){return+new Date}),d3_document)try{d3_document.createElement("DIV").style.setProperty("opacity",0,"")}catch(error){var d3_element_prototype=this.Element.prototype,d3_element_setAttribute=d3_element_prototype.setAttribute,d3_element_setAttributeNS=d3_element_prototype.setAttributeNS,d3_style_prototype=this.CSSStyleDeclaration.prototype,d3_style_setProperty=d3_style_prototype.setProperty;d3_element_prototype.setAttribute=function(name,value){d3_element_setAttribute.call(this,name,value+"")},d3_element_prototype.setAttributeNS=function(space,local,value){d3_element_setAttributeNS.call(this,space,local,value+"")},d3_style_prototype.setProperty=function(name,value,priority){d3_style_setProperty.call(this,name,value+"",priority)}}d3.ascending=d3_ascending,d3.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},d3.min=function(array,f){var a,b,i=-1,n=array.length;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=b;break}for(;++i<n;)null!=(b=array[i])&&a>b&&(a=b)}else{for(;++i<n;)if(null!=(b=f.call(array,array[i],i))&&b>=b){a=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&a>b&&(a=b)}return a},d3.max=function(array,f){var a,b,i=-1,n=array.length;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=b;break}for(;++i<n;)null!=(b=array[i])&&b>a&&(a=b)}else{for(;++i<n;)if(null!=(b=f.call(array,array[i],i))&&b>=b){a=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&b>a&&(a=b)}return a},d3.extent=function(array,f){var a,b,c,i=-1,n=array.length;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=c=b;break}for(;++i<n;)null!=(b=array[i])&&(a>b&&(a=b),b>c&&(c=b))}else{for(;++i<n;)if(null!=(b=f.call(array,array[i],i))&&b>=b){a=c=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&(a>b&&(a=b),b>c&&(c=b))}return[a,c]},d3.sum=function(array,f){var a,s=0,n=array.length,i=-1;if(1===arguments.length)for(;++i<n;)d3_numeric(a=+array[i])&&(s+=a);else for(;++i<n;)d3_numeric(a=+f.call(array,array[i],i))&&(s+=a);return s},d3.mean=function(array,f){var a,s=0,n=array.length,i=-1,j=n;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))?s+=a:--j;else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))?s+=a:--j;return j?s/j:void 0},d3.quantile=function(values,p){var H=(values.length-1)*p+1,h=Math.floor(H),v=+values[h-1],e=H-h;return e?v+e*(values[h]-v):v},d3.median=function(array,f){var a,numbers=[],n=array.length,i=-1;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))&&numbers.push(a);else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))&&numbers.push(a);return numbers.length?d3.quantile(numbers.sort(d3_ascending),.5):void 0},d3.variance=function(array,f){var a,d,n=array.length,m=0,s=0,i=-1,j=0;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))&&(d=a-m,m+=d/++j,s+=d*(a-m));else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))&&(d=a-m,m+=d/++j,s+=d*(a-m));return j>1?s/(j-1):void 0},d3.deviation=function(){var v=d3.variance.apply(this,arguments);return v?Math.sqrt(v):v};var d3_bisect=d3_bisector(d3_ascending);d3.bisectLeft=d3_bisect.left,d3.bisect=d3.bisectRight=d3_bisect.right,d3.bisector=function(f){return d3_bisector(1===f.length?function(d,x){return d3_ascending(f(d),x)}:f)},d3.shuffle=function(array,i0,i1){(m=arguments.length)<3&&(i1=array.length,2>m&&(i0=0));for(var t,i,m=i1-i0;m;)i=Math.random()*m--|0,t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t;return array},d3.permute=function(array,indexes){for(var i=indexes.length,permutes=new Array(i);i--;)permutes[i]=array[indexes[i]];return permutes},d3.pairs=function(array){for(var p0,i=0,n=array.length-1,p1=array[0],pairs=new Array(0>n?0:n);n>i;)pairs[i]=[p0=p1,p1=array[++i]];return pairs},d3.zip=function(){if(!(n=arguments.length))return[];for(var i=-1,m=d3.min(arguments,d3_zipLength),zips=new Array(m);++i<m;)for(var n,j=-1,zip=zips[i]=new Array(n);++j<n;)zip[j]=arguments[j][i];return zips},d3.transpose=function(matrix){return d3.zip.apply(d3,matrix)},d3.keys=function(map){var keys=[];for(var key in map)keys.push(key);return keys},d3.values=function(map){var values=[];for(var key in map)values.push(map[key]);return values},d3.entries=function(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries},d3.merge=function(arrays){for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;for(merged=new Array(j);--n>=0;)for(array=arrays[n],m=array.length;--m>=0;)merged[--j]=array[m];return merged};var abs=Math.abs;d3.range=function(start,stop,step){
if(arguments.length<3&&(step=1,arguments.length<2&&(stop=start,start=0)),(stop-start)/step===1/0)throw new Error("infinite range");var j,range=[],k=d3_range_integerScale(abs(step)),i=-1;if(start*=k,stop*=k,step*=k,0>step)for(;(j=start+step*++i)>stop;)range.push(j/k);else for(;(j=start+step*++i)<stop;)range.push(j/k);return range},d3.map=function(object,f){var map=new d3_Map;if(object instanceof d3_Map)object.forEach(function(key,value){map.set(key,value)});else if(Array.isArray(object)){var o,i=-1,n=object.length;if(1===arguments.length)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f.call(object,o=object[i],i),o)}else for(var key in object)map.set(key,object[key]);return map};var d3_map_proto="__proto__",d3_map_zero="\0";d3_class(d3_Map,{has:d3_map_has,get:function(key){return this._[d3_map_escape(key)]},set:function(key,value){return this._[d3_map_escape(key)]=value},remove:d3_map_remove,keys:d3_map_keys,values:function(){var values=[];for(var key in this._)values.push(this._[key]);return values},entries:function(){var entries=[];for(var key in this._)entries.push({key:d3_map_unescape(key),value:this._[key]});return entries},size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key),this._[key])}}),d3.nest=function(){function map(mapType,array,depth){if(depth>=keys.length)return rollup?rollup.call(nest,array):sortValues?array.sort(sortValues):array;for(var keyValue,object,setter,values,i=-1,n=array.length,key=keys[depth++],valuesByKey=new d3_Map;++i<n;)(values=valuesByKey.get(keyValue=key(object=array[i])))?values.push(object):valuesByKey.set(keyValue,[object]);return mapType?(object=mapType(),setter=function(keyValue,values){object.set(keyValue,map(mapType,values,depth))}):(object={},setter=function(keyValue,values){object[keyValue]=map(mapType,values,depth)}),valuesByKey.forEach(setter),object}function entries(map,depth){if(depth>=keys.length)return map;var array=[],sortKey=sortKeys[depth++];return map.forEach(function(key,keyMap){array.push({key:key,values:entries(keyMap,depth)})}),sortKey?array.sort(function(a,b){return sortKey(a.key,b.key)}):array}var sortValues,rollup,nest={},keys=[],sortKeys=[];return nest.map=function(array,mapType){return map(mapType,array,0)},nest.entries=function(array){return entries(map(d3.map,array,0),0)},nest.key=function(d){return keys.push(d),nest},nest.sortKeys=function(order){return sortKeys[keys.length-1]=order,nest},nest.sortValues=function(order){return sortValues=order,nest},nest.rollup=function(f){return rollup=f,nest},nest},d3.set=function(array){var set=new d3_Set;if(array)for(var i=0,n=array.length;n>i;++i)set.add(array[i]);return set},d3_class(d3_Set,{has:d3_map_has,add:function(key){return this._[d3_map_escape(key+="")]=!0,key},remove:d3_map_remove,values:d3_map_keys,size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key))}}),d3.behavior={},d3.rebind=function(target,source){for(var method,i=1,n=arguments.length;++i<n;)target[method=arguments[i]]=d3_rebind(target,source,source[method]);return target};var d3_vendorPrefixes=["webkit","ms","moz","Moz","o","O"];d3.dispatch=function(){for(var dispatch=new d3_dispatch,i=-1,n=arguments.length;++i<n;)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch},d3_dispatch.prototype.on=function(type,listener){var i=type.indexOf("."),name="";if(i>=0&&(name=type.slice(i+1),type=type.slice(0,i)),type)return arguments.length<2?this[type].on(name):this[type].on(name,listener);if(2===arguments.length){if(null==listener)for(type in this)this.hasOwnProperty(type)&&this[type].on(name,null);return this}},d3.event=null,d3.requote=function(s){return s.replace(d3_requote_re,"\\$&")};var d3_requote_re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,d3_subclass={}.__proto__?function(object,prototype){object.__proto__=prototype}:function(object,prototype){for(var property in prototype)object[property]=prototype[property]},d3_select=function(s,n){return n.querySelector(s)},d3_selectAll=function(s,n){return n.querySelectorAll(s)},d3_selectMatches=function(n,s){var d3_selectMatcher=n.matches||n[d3_vendorSymbol(n,"matchesSelector")];return(d3_selectMatches=function(n,s){return d3_selectMatcher.call(n,s)})(n,s)};"function"==typeof Sizzle&&(d3_select=function(s,n){return Sizzle(s,n)[0]||null},d3_selectAll=Sizzle,d3_selectMatches=Sizzle.matchesSelector),d3.selection=function(){return d3.select(d3_document.documentElement)};var d3_selectionPrototype=d3.selection.prototype=[];d3_selectionPrototype.select=function(selector){var subgroup,subnode,group,node,subgroups=[];selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]),subgroup.parentNode=(group=this[j]).parentNode;for(var i=-1,n=group.length;++i<n;)(node=group[i])?(subgroup.push(subnode=selector.call(node,node.__data__,i,j)),subnode&&"__data__"in node&&(subnode.__data__=node.__data__)):subgroup.push(null)}return d3_selection(subgroups)},d3_selectionPrototype.selectAll=function(selector){var subgroup,node,subgroups=[];selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;)for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&(subgroups.push(subgroup=d3_array(selector.call(node,node.__data__,i,j))),subgroup.parentNode=node);return d3_selection(subgroups)};var d3_nsPrefix={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:d3_nsPrefix,qualify:function(name){var i=name.indexOf(":"),prefix=name;return i>=0&&(prefix=name.slice(0,i),name=name.slice(i+1)),d3_nsPrefix.hasOwnProperty(prefix)?{space:d3_nsPrefix[prefix],local:name}:name}},d3_selectionPrototype.attr=function(name,value){if(arguments.length<2){if("string"==typeof name){var node=this.node();return name=d3.ns.qualify(name),name.local?node.getAttributeNS(name.space,name.local):node.getAttribute(name)}for(value in name)this.each(d3_selection_attr(value,name[value]));return this}return this.each(d3_selection_attr(name,value))},d3_selectionPrototype.classed=function(name,value){if(arguments.length<2){if("string"==typeof name){var node=this.node(),n=(name=d3_selection_classes(name)).length,i=-1;if(value=node.classList){for(;++i<n;)if(!value.contains(name[i]))return!1}else for(value=node.getAttribute("class");++i<n;)if(!d3_selection_classedRe(name[i]).test(value))return!1;return!0}for(value in name)this.each(d3_selection_classed(value,name[value]));return this}return this.each(d3_selection_classed(name,value))},d3_selectionPrototype.style=function(name,value,priority){var n=arguments.length;if(3>n){if("string"!=typeof name){2>n&&(value="");for(priority in name)this.each(d3_selection_style(priority,name[priority],value));return this}if(2>n){var node=this.node();return d3_window(node).getComputedStyle(node,null).getPropertyValue(name)}priority=""}return this.each(d3_selection_style(name,value,priority))},d3_selectionPrototype.property=function(name,value){if(arguments.length<2){if("string"==typeof name)return this.node()[name];for(value in name)this.each(d3_selection_property(value,name[value]));return this}return this.each(d3_selection_property(name,value))},d3_selectionPrototype.text=function(value){return arguments.length?this.each("function"==typeof value?function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}:null==value?function(){this.textContent=""}:function(){this.textContent=value}):this.node().textContent},d3_selectionPrototype.html=function(value){return arguments.length?this.each("function"==typeof value?function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}:null==value?function(){this.innerHTML=""}:function(){this.innerHTML=value}):this.node().innerHTML},d3_selectionPrototype.append=function(name){return name=d3_selection_creator(name),this.select(function(){return this.appendChild(name.apply(this,arguments))})},d3_selectionPrototype.insert=function(name,before){return name=d3_selection_creator(name),before=d3_selection_selector(before),this.select(function(){return this.insertBefore(name.apply(this,arguments),before.apply(this,arguments)||null)})},d3_selectionPrototype.remove=function(){return this.each(d3_selectionRemove)},d3_selectionPrototype.data=function(value,key){function bind(group,groupData){var i,node,nodeData,n=group.length,m=groupData.length,n0=Math.min(n,m),updateNodes=new Array(m),enterNodes=new Array(m),exitNodes=new Array(n);if(key){var keyValue,nodeByKeyValue=new d3_Map,keyValues=new Array(n);for(i=-1;++i<n;)nodeByKeyValue.has(keyValue=key.call(node=group[i],node.__data__,i))?exitNodes[i]=node:nodeByKeyValue.set(keyValue,node),keyValues[i]=keyValue;for(i=-1;++i<m;)(node=nodeByKeyValue.get(keyValue=key.call(groupData,nodeData=groupData[i],i)))?node!==!0&&(updateNodes[i]=node,node.__data__=nodeData):enterNodes[i]=d3_selection_dataNode(nodeData),nodeByKeyValue.set(keyValue,!0);for(i=-1;++i<n;)nodeByKeyValue.get(keyValues[i])!==!0&&(exitNodes[i]=group[i])}else{for(i=-1;++i<n0;)node=group[i],nodeData=groupData[i],node?(node.__data__=nodeData,updateNodes[i]=node):enterNodes[i]=d3_selection_dataNode(nodeData);for(;m>i;++i)enterNodes[i]=d3_selection_dataNode(groupData[i]);for(;n>i;++i)exitNodes[i]=group[i]}enterNodes.update=updateNodes,enterNodes.parentNode=updateNodes.parentNode=exitNodes.parentNode=group.parentNode,enter.push(enterNodes),update.push(updateNodes),exit.push(exitNodes)}var group,node,i=-1,n=this.length;if(!arguments.length){for(value=new Array(n=(group=this[0]).length);++i<n;)(node=group[i])&&(value[i]=node.__data__);return value}var enter=d3_selection_enter([]),update=d3_selection([]),exit=d3_selection([]);if("function"==typeof value)for(;++i<n;)bind(group=this[i],value.call(group,group.parentNode.__data__,i));else for(;++i<n;)bind(group=this[i],value);return update.enter=function(){return enter},update.exit=function(){return exit},update},d3_selectionPrototype.datum=function(value){return arguments.length?this.property("__data__",value):this.property("__data__")},d3_selectionPrototype.filter=function(filter){var subgroup,group,node,subgroups=[];"function"!=typeof filter&&(filter=d3_selection_filter(filter));for(var j=0,m=this.length;m>j;j++){subgroups.push(subgroup=[]),subgroup.parentNode=(group=this[j]).parentNode;for(var i=0,n=group.length;n>i;i++)(node=group[i])&&filter.call(node,node.__data__,i,j)&&subgroup.push(node)}return d3_selection(subgroups)},d3_selectionPrototype.order=function(){for(var j=-1,m=this.length;++j<m;)for(var node,group=this[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&next!==node.nextSibling&&next.parentNode.insertBefore(node,next),next=node);return this},d3_selectionPrototype.sort=function(comparator){comparator=d3_selection_sortComparator.apply(this,arguments);for(var j=-1,m=this.length;++j<m;)this[j].sort(comparator);return this.order()},d3_selectionPrototype.each=function(callback){return d3_selection_each(this,function(node,i,j){callback.call(node,node.__data__,i,j)})},d3_selectionPrototype.call=function(callback){var args=d3_array(arguments);return callback.apply(args[0]=this,args),this},d3_selectionPrototype.empty=function(){return!this.node()},d3_selectionPrototype.node=function(){for(var j=0,m=this.length;m>j;j++)for(var group=this[j],i=0,n=group.length;n>i;i++){var node=group[i];if(node)return node}return null},d3_selectionPrototype.size=function(){var n=0;return d3_selection_each(this,function(){++n}),n};var d3_selection_enterPrototype=[];d3.selection.enter=d3_selection_enter,d3.selection.enter.prototype=d3_selection_enterPrototype,d3_selection_enterPrototype.append=d3_selectionPrototype.append,d3_selection_enterPrototype.empty=d3_selectionPrototype.empty,d3_selection_enterPrototype.node=d3_selectionPrototype.node,d3_selection_enterPrototype.call=d3_selectionPrototype.call,d3_selection_enterPrototype.size=d3_selectionPrototype.size,d3_selection_enterPrototype.select=function(selector){for(var subgroup,subnode,upgroup,group,node,subgroups=[],j=-1,m=this.length;++j<m;){upgroup=(group=this[j]).update,subgroups.push(subgroup=[]),subgroup.parentNode=group.parentNode;for(var i=-1,n=group.length;++i<n;)(node=group[i])?(subgroup.push(upgroup[i]=subnode=selector.call(group.parentNode,node.__data__,i,j)),subnode.__data__=node.__data__):subgroup.push(null)}return d3_selection(subgroups)},d3_selection_enterPrototype.insert=function(name,before){return arguments.length<2&&(before=d3_selection_enterInsertBefore(this)),d3_selectionPrototype.insert.call(this,name,before)},d3.select=function(node){var group;return"string"==typeof node?(group=[d3_select(node,d3_document)],group.parentNode=d3_document.documentElement):(group=[node],group.parentNode=d3_documentElement(node)),d3_selection([group])},d3.selectAll=function(nodes){var group;return"string"==typeof nodes?(group=d3_array(d3_selectAll(nodes,d3_document)),group.parentNode=d3_document.documentElement):(group=nodes,group.parentNode=null),d3_selection([group])},d3_selectionPrototype.on=function(type,listener,capture){var n=arguments.length;if(3>n){if("string"!=typeof type){2>n&&(listener=!1);for(capture in type)this.each(d3_selection_on(capture,type[capture],listener));return this}if(2>n)return(n=this.node()["__on"+type])&&n._;capture=!1}return this.each(d3_selection_on(type,listener,capture))};var d3_selection_onFilters=d3.map({mouseenter:"mouseover",mouseleave:"mouseout"});d3_document&&d3_selection_onFilters.forEach(function(k){"on"+k in d3_document&&d3_selection_onFilters.remove(k)});var d3_event_dragSelect,d3_event_dragId=0;d3.mouse=function(container){return d3_mousePoint(container,d3_eventSource())};var d3_mouse_bug44083=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;d3.touch=function(container,touches,identifier){if(arguments.length<3&&(identifier=touches,touches=d3_eventSource().changedTouches),touches)for(var touch,i=0,n=touches.length;n>i;++i)if((touch=touches[i]).identifier===identifier)return d3_mousePoint(container,touch)},d3.behavior.drag=function(){function drag(){this.on("mousedown.drag",mousedown).on("touchstart.drag",touchstart)}function dragstart(id,position,subject,move,end){return function(){function moved(){var dx,dy,position1=position(parent,dragId);position1&&(dx=position1[0]-position0[0],dy=position1[1]-position0[1],dragged|=dx|dy,position0=position1,dispatch({type:"drag",x:position1[0]+dragOffset[0],y:position1[1]+dragOffset[1],dx:dx,dy:dy}))}function ended(){position(parent,dragId)&&(dragSubject.on(move+dragName,null).on(end+dragName,null),dragRestore(dragged&&d3.event.target===target),dispatch({type:"dragend"}))}var dragOffset,that=this,target=d3.event.target,parent=that.parentNode,dispatch=event.of(that,arguments),dragged=0,dragId=id(),dragName=".drag"+(null==dragId?"":"-"+dragId),dragSubject=d3.select(subject(target)).on(move+dragName,moved).on(end+dragName,ended),dragRestore=d3_event_dragSuppress(target),position0=position(parent,dragId);origin?(dragOffset=origin.apply(that,arguments),dragOffset=[dragOffset.x-position0[0],dragOffset.y-position0[1]]):dragOffset=[0,0],dispatch({type:"dragstart"})}}var event=d3_eventDispatch(drag,"drag","dragstart","dragend"),origin=null,mousedown=dragstart(d3_noop,d3.mouse,d3_window,"mousemove","mouseup"),touchstart=dragstart(d3_behavior_dragTouchId,d3.touch,d3_identity,"touchmove","touchend");return drag.origin=function(x){return arguments.length?(origin=x,drag):origin},d3.rebind(drag,event,"on")},d3.touches=function(container,touches){return arguments.length<2&&(touches=d3_eventSource().touches),touches?d3_array(touches).map(function(touch){var point=d3_mousePoint(container,touch);return point.identifier=touch.identifier,point}):[]};var ε=1e-6,ε2=ε*ε,π=Math.PI,τ=2*π,τε=τ-ε,halfπ=π/2,d3_radians=π/180,d3_degrees=180/π,ρ=Math.SQRT2,ρ2=2,ρ4=4;d3.interpolateZoom=function(p0,p1){function interpolate(t){var s=t*S;if(dr){var coshr0=d3_cosh(r0),u=w0/(ρ2*d1)*(coshr0*d3_tanh(ρ*s+r0)-d3_sinh(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/d3_cosh(ρ*s+r0)]}return[ux0+t*dx,uy0+t*dy,w0*Math.exp(ρ*s)]}var ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy,d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+ρ4*d2)/(2*w0*ρ2*d1),b1=(w1*w1-w0*w0-ρ4*d2)/(2*w1*ρ2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1),dr=r1-r0,S=(dr||Math.log(w1/w0))/ρ;return interpolate.duration=1e3*S,interpolate},d3.behavior.zoom=function(){function zoom(g){g.on(mousedown,mousedowned).on(d3_behavior_zoomWheel+".zoom",mousewheeled).on("dblclick.zoom",dblclicked).on(touchstart,touchstarted)}function location(p){return[(p[0]-view.x)/view.k,(p[1]-view.y)/view.k]}function point(l){return[l[0]*view.k+view.x,l[1]*view.k+view.y]}function scaleTo(s){view.k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],s))}function translateTo(p,l){l=point(l),view.x+=p[0]-l[0],view.y+=p[1]-l[1]}function zoomTo(that,p,l,k){that.__chart__={x:view.x,y:view.y,k:view.k},scaleTo(Math.pow(2,k)),translateTo(center0=p,l),that=d3.select(that),duration>0&&(that=that.transition().duration(duration)),that.call(zoom.event)}function rescale(){x1&&x1.domain(x0.range().map(function(x){return(x-view.x)/view.k}).map(x0.invert)),y1&&y1.domain(y0.range().map(function(y){return(y-view.y)/view.k}).map(y0.invert))}function zoomstarted(dispatch){zooming++||dispatch({type:"zoomstart"})}function zoomed(dispatch){rescale(),dispatch({type:"zoom",scale:view.k,translate:[view.x,view.y]})}function zoomended(dispatch){--zooming||(dispatch({type:"zoomend"}),center0=null)}function mousedowned(){function moved(){dragged=1,translateTo(d3.mouse(that),location0),zoomed(dispatch)}function ended(forceCheck){subject.on(mousemove,null).on(mouseup,null),dragRestore(dragged&&(forceCheck||d3.event.target===target)),zoomended(dispatch),d3.forceEndZoom=null}var that=this,target=d3.event.target,dispatch=event.of(that,arguments),dragged=0,subject=d3.select(d3_window(that)).on(mousemove,moved).on(mouseup,ended),location0=location(d3.mouse(that)),dragRestore=d3_event_dragSuppress(that);d3_selection_interrupt.call(that),zoomstarted(dispatch),d3.forceEndZoom=function(){ended(!0)}}function touchstarted(){function relocate(){var touches=d3.touches(that);return scale0=view.k,touches.forEach(function(t){t.identifier in locations0&&(locations0[t.identifier]=location(t))}),touches}function started(){var target=d3.event.target;d3.select(target).on(touchmove,moved).on(touchend,ended),targets.push(target);for(var changed=d3.event.changedTouches,i=0,n=changed.length;n>i;++i)locations0[changed[i].identifier]=null;var touches=relocate(),now=Date.now();if(1===touches.length){if(500>now-touchtime){var p=touches[0];zoomTo(that,p,locations0[p.identifier],Math.floor(Math.log(view.k)/Math.LN2)+1),d3_eventPreventDefault()}touchtime=now}else if(touches.length>1){var p=touches[0],q=touches[1],dx=p[0]-q[0],dy=p[1]-q[1];distance0=dx*dx+dy*dy}}function moved(){var p0,l0,p1,l1,touches=d3.touches(that);d3_selection_interrupt.call(that);for(var i=0,n=touches.length;n>i;++i,l1=null)if(p1=touches[i],l1=locations0[p1.identifier]){if(l0)break;p0=p1,l0=l1}if(l1){var distance1=(distance1=p1[0]-p0[0])*distance1+(distance1=p1[1]-p0[1])*distance1,scale1=distance0&&Math.sqrt(distance1/distance0);p0=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l0=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2],scaleTo(scale1*scale0)}touchtime=null,translateTo(p0,l0),zoomed(dispatch)}function ended(){if(d3.event.touches.length){for(var changed=d3.event.changedTouches,i=0,n=changed.length;n>i;++i)delete locations0[changed[i].identifier];for(var identifier in locations0)return void relocate()}d3.selectAll(targets).on(zoomName,null),subject.on(mousedown,mousedowned).on(touchstart,touchstarted),dragRestore(),zoomended(dispatch)}var scale0,that=this,dispatch=event.of(that,arguments),locations0={},distance0=0,zoomName=".zoom-"+d3.event.changedTouches[0].identifier,touchmove="touchmove"+zoomName,touchend="touchend"+zoomName,targets=[],subject=d3.select(that),dragRestore=d3_event_dragSuppress(that);started(),zoomstarted(dispatch),subject.on(mousedown,null).on(touchstart,started)}function mousewheeled(){var dispatch=event.of(this,arguments);mousewheelTimer?clearTimeout(mousewheelTimer):(d3_selection_interrupt.call(this),translate0=location(center0=center||d3.mouse(this)),zoomstarted(dispatch)),mousewheelTimer=setTimeout(function(){mousewheelTimer=null,zoomended(dispatch)},50),d3_eventPreventDefault(),scaleTo(Math.pow(2,.002*d3_behavior_zoomDelta())*view.k),translateTo(center0,translate0),zoomed(dispatch)}function dblclicked(){var p=d3.mouse(this),k=Math.log(view.k)/Math.LN2;zoomTo(this,p,location(p),d3.event.shiftKey?Math.ceil(k)-1:Math.floor(k)+1)}var translate0,center0,center,mousewheelTimer,touchtime,x0,x1,y0,y1,view={x:0,y:0,k:1},size=[960,500],scaleExtent=d3_behavior_zoomInfinity,duration=250,zooming=0,mousedown="mousedown.zoom",mousemove="mousemove.zoom",mouseup="mouseup.zoom",touchstart="touchstart.zoom",event=d3_eventDispatch(zoom,"zoomstart","zoom","zoomend");return d3_behavior_zoomWheel||(d3_behavior_zoomWheel="onwheel"in d3_document?(d3_behavior_zoomDelta=function(){return-d3.event.deltaY*(d3.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d3_document?(d3_behavior_zoomDelta=function(){return d3.event.wheelDelta},"mousewheel"):(d3_behavior_zoomDelta=function(){return-d3.event.detail},"MozMousePixelScroll")),zoom.event=function(g){g.each(function(){var dispatch=event.of(this,arguments),view1=view;d3_transitionInheritId?d3.select(this).transition().each("start.zoom",function(){view=this.__chart__||{x:0,y:0,k:1},zoomstarted(dispatch)}).tween("zoom:zoom",function(){var dx=size[0],dy=size[1],cx=center0?center0[0]:dx/2,cy=center0?center0[1]:dy/2,i=d3.interpolateZoom([(cx-view.x)/view.k,(cy-view.y)/view.k,dx/view.k],[(cx-view1.x)/view1.k,(cy-view1.y)/view1.k,dx/view1.k]);return function(t){var l=i(t),k=dx/l[2];this.__chart__=view={x:cx-l[0]*k,y:cy-l[1]*k,k:k},zoomed(dispatch)}}).each("interrupt.zoom",function(){zoomended(dispatch)}).each("end.zoom",function(){zoomended(dispatch)}):(this.__chart__=view,zoomstarted(dispatch),zoomed(dispatch),zoomended(dispatch))})},zoom.translate=function(_){return arguments.length?(view={x:+_[0],y:+_[1],k:view.k},rescale(),zoom):[view.x,view.y]},zoom.scale=function(_){return arguments.length?(view={x:view.x,y:view.y,k:+_},rescale(),zoom):view.k},zoom.scaleExtent=function(_){return arguments.length?(scaleExtent=null==_?d3_behavior_zoomInfinity:[+_[0],+_[1]],zoom):scaleExtent},zoom.center=function(_){return arguments.length?(center=_&&[+_[0],+_[1]],zoom):center},zoom.size=function(_){return arguments.length?(size=_&&[+_[0],+_[1]],zoom):size},zoom.duration=function(_){return arguments.length?(duration=+_,zoom):duration},zoom.x=function(z){return arguments.length?(x1=z,x0=z.copy(),view={x:0,y:0,k:1},zoom):x1},zoom.y=function(z){return arguments.length?(y1=z,y0=z.copy(),view={x:0,y:0,k:1},zoom):y1},d3.rebind(zoom,event,"on")};var d3_behavior_zoomDelta,d3_behavior_zoomWheel,d3_behavior_zoomInfinity=[0,1/0];d3.color=d3_color,d3_color.prototype.toString=function(){return this.rgb()+""},d3.hsl=d3_hsl;var d3_hslPrototype=d3_hsl.prototype=new d3_color;d3_hslPrototype.brighter=function(k){return k=Math.pow(.7,arguments.length?k:1),new d3_hsl(this.h,this.s,this.l/k)},d3_hslPrototype.darker=function(k){return k=Math.pow(.7,arguments.length?k:1),new d3_hsl(this.h,this.s,k*this.l)},d3_hslPrototype.rgb=function(){return d3_hsl_rgb(this.h,this.s,this.l)},d3.hcl=d3_hcl;var d3_hclPrototype=d3_hcl.prototype=new d3_color;d3_hclPrototype.brighter=function(k){return new d3_hcl(this.h,this.c,Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)))},d3_hclPrototype.darker=function(k){return new d3_hcl(this.h,this.c,Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)))},d3_hclPrototype.rgb=function(){return d3_hcl_lab(this.h,this.c,this.l).rgb()},d3.lab=d3_lab;var d3_lab_K=18,d3_lab_X=.95047,d3_lab_Y=1,d3_lab_Z=1.08883,d3_labPrototype=d3_lab.prototype=new d3_color;d3_labPrototype.brighter=function(k){return new d3_lab(Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)),this.a,this.b)},d3_labPrototype.darker=function(k){return new d3_lab(Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)),this.a,this.b)},d3_labPrototype.rgb=function(){return d3_lab_rgb(this.l,this.a,this.b)},d3.rgb=d3_rgb;var d3_rgbPrototype=d3_rgb.prototype=new d3_color;d3_rgbPrototype.brighter=function(k){k=Math.pow(.7,arguments.length?k:1);var r=this.r,g=this.g,b=this.b,i=30;return r||g||b?(r&&i>r&&(r=i),g&&i>g&&(g=i),b&&i>b&&(b=i),new d3_rgb(Math.min(255,r/k),Math.min(255,g/k),Math.min(255,b/k))):new d3_rgb(i,i,i)},d3_rgbPrototype.darker=function(k){return k=Math.pow(.7,arguments.length?k:1),new d3_rgb(k*this.r,k*this.g,k*this.b)},d3_rgbPrototype.hsl=function(){return d3_rgb_hsl(this.r,this.g,this.b)},d3_rgbPrototype.toString=function(){return"#"+d3_rgb_hex(this.r)+d3_rgb_hex(this.g)+d3_rgb_hex(this.b)};var d3_rgb_names=d3.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});d3_rgb_names.forEach(function(key,value){d3_rgb_names.set(key,d3_rgbNumber(value))}),d3.functor=d3_functor,d3.xhr=d3_xhrType(d3_identity),d3.dsv=function(delimiter,mimeType){function dsv(url,row,callback){arguments.length<3&&(callback=row,row=null);var xhr=d3_xhr(url,mimeType,null==row?response:typedResponse(row),callback);return xhr.row=function(_){return arguments.length?xhr.response(null==(row=_)?response:typedResponse(_)):row},xhr}function response(request){return dsv.parse(request.responseText)}function typedResponse(f){return function(request){return dsv.parse(request.responseText,f)}}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return reFormat.test(text)?'"'+text.replace(/\"/g,'""')+'"':text}var reFormat=new RegExp('["'+delimiter+"\n]"),delimiterCode=delimiter.charCodeAt(0);return dsv.parse=function(text,f){var o;return dsv.parseRows(text,function(row,i){if(o)return o(row,i-1);var a=new Function("d","return {"+row.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}");o=f?function(row,i){return f(a(row),i)}:a})},dsv.parseRows=function(text,f){function token(){if(I>=N)return EOF;if(eol)return eol=!1,EOL;var j=I;if(34===text.charCodeAt(j)){for(var i=j;i++<N;)if(34===text.charCodeAt(i)){if(34!==text.charCodeAt(i+1))break;++i}I=i+2;var c=text.charCodeAt(i+1);return 13===c?(eol=!0,10===text.charCodeAt(i+2)&&++I):10===c&&(eol=!0),text.slice(j+1,i).replace(/""/g,'"')}for(;N>I;){var c=text.charCodeAt(I++),k=1;if(10===c)eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&(++I,++k);else if(c!==delimiterCode)continue;return text.slice(j,I-k)}return text.slice(j)}for(var t,eol,EOL={},EOF={},rows=[],N=text.length,I=0,n=0;(t=token())!==EOF;){for(var a=[];t!==EOL&&t!==EOF;)a.push(t),t=token();f&&null==(a=f(a,n++))||rows.push(a)}return rows},dsv.format=function(rows){if(Array.isArray(rows[0]))return dsv.formatRows(rows);var fieldSet=new d3_Set,fields=[];return rows.forEach(function(row){for(var field in row)fieldSet.has(field)||fields.push(fieldSet.add(field))}),[fields.map(formatValue).join(delimiter)].concat(rows.map(function(row){return fields.map(function(field){return formatValue(row[field])}).join(delimiter)})).join("\n")},dsv.formatRows=function(rows){return rows.map(formatRow).join("\n")},dsv},d3.csv=d3.dsv(",","text/csv"),d3.tsv=d3.dsv("\t","text/tab-separated-values");var d3_timer_queueHead,d3_timer_queueTail,d3_timer_interval,d3_timer_timeout,d3_timer_active,d3_timer_frame=this[d3_vendorSymbol(this,"requestAnimationFrame")]||function(callback){setTimeout(callback,17)};d3.timer=function(callback,delay,then){var n=arguments.length;2>n&&(delay=0),3>n&&(then=Date.now());var time=then+delay,timer={c:callback,t:time,f:!1,n:null};d3_timer_queueTail?d3_timer_queueTail.n=timer:d3_timer_queueHead=timer,d3_timer_queueTail=timer,d3_timer_interval||(d3_timer_timeout=clearTimeout(d3_timer_timeout),d3_timer_interval=1,d3_timer_frame(d3_timer_step))},d3.timer.flush=function(){d3_timer_mark(),d3_timer_sweep()},d3.round=function(x,n){return n?Math.round(x*(n=Math.pow(10,n)))/n:Math.round(x)};var d3_formatPrefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(d3_formatPrefix);d3.formatPrefix=function(value,precision){var i=0;return value&&(0>value&&(value*=-1),precision&&(value=d3.round(value,d3_format_precision(value,precision))),i=1+Math.floor(1e-12+Math.log(value)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((i-1)/3)))),d3_formatPrefixes[8+i/3]};var d3_format_re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,d3_format_types=d3.map({b:function(x){return x.toString(2)},c:function(x){return String.fromCharCode(x)},o:function(x){return x.toString(8)},x:function(x){return x.toString(16)},X:function(x){return x.toString(16).toUpperCase()},g:function(x,p){return x.toPrecision(p)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},r:function(x,p){return(x=d3.round(x,d3_format_precision(x,p))).toFixed(Math.max(0,Math.min(20,d3_format_precision(x*(1+1e-15),p))))}}),d3_time=d3.time={},d3_date=Date;d3_date_utc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){
return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){d3_time_prototype.setUTCDate.apply(this._,arguments)},setDay:function(){d3_time_prototype.setUTCDay.apply(this._,arguments)},setFullYear:function(){d3_time_prototype.setUTCFullYear.apply(this._,arguments)},setHours:function(){d3_time_prototype.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){d3_time_prototype.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){d3_time_prototype.setUTCMinutes.apply(this._,arguments)},setMonth:function(){d3_time_prototype.setUTCMonth.apply(this._,arguments)},setSeconds:function(){d3_time_prototype.setUTCSeconds.apply(this._,arguments)},setTime:function(){d3_time_prototype.setTime.apply(this._,arguments)}};var d3_time_prototype=Date.prototype;d3_time.year=d3_time_interval(function(date){return date=d3_time.day(date),date.setMonth(0,1),date},function(date,offset){date.setFullYear(date.getFullYear()+offset)},function(date){return date.getFullYear()}),d3_time.years=d3_time.year.range,d3_time.years.utc=d3_time.year.utc.range,d3_time.day=d3_time_interval(function(date){var day=new d3_date(2e3,0);return day.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),day},function(date,offset){date.setDate(date.getDate()+offset)},function(date){return date.getDate()-1}),d3_time.days=d3_time.day.range,d3_time.days.utc=d3_time.day.utc.range,d3_time.dayOfYear=function(date){var year=d3_time.year(date);return Math.floor((date-year-6e4*(date.getTimezoneOffset()-year.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(day,i){i=7-i;var interval=d3_time[day]=d3_time_interval(function(date){return(date=d3_time.day(date)).setDate(date.getDate()-(date.getDay()+i)%7),date},function(date,offset){date.setDate(date.getDate()+7*Math.floor(offset))},function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)-(day!==i)});d3_time[day+"s"]=interval.range,d3_time[day+"s"].utc=interval.utc.range,d3_time[day+"OfYear"]=function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)}}),d3_time.week=d3_time.sunday,d3_time.weeks=d3_time.sunday.range,d3_time.weeks.utc=d3_time.sunday.utc.range,d3_time.weekOfYear=d3_time.sundayOfYear;var d3_time_formatPads={"-":"",_:" ",0:"0"},d3_time_numberRe=/^\s*\d+/,d3_time_percentRe=/^%/;d3.locale=function(locale){return{numberFormat:d3_locale_numberFormat(locale),timeFormat:d3_locale_timeFormat(locale)}};var d3_locale_enUS=d3.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});d3.format=d3_locale_enUS.numberFormat,d3.geo={},d3_adder.prototype={s:0,t:0,add:function(y){d3_adderSum(y,this.t,d3_adderTemp),d3_adderSum(d3_adderTemp.s,this.s,this),this.s?this.t+=d3_adderTemp.t:this.s=d3_adderTemp.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var d3_adderTemp=new d3_adder;d3.geo.stream=function(object,listener){object&&d3_geo_streamObjectType.hasOwnProperty(object.type)?d3_geo_streamObjectType[object.type](object,listener):d3_geo_streamGeometry(object,listener)};var d3_geo_streamObjectType={Feature:function(feature,listener){d3_geo_streamGeometry(feature.geometry,listener)},FeatureCollection:function(object,listener){for(var features=object.features,i=-1,n=features.length;++i<n;)d3_geo_streamGeometry(features[i].geometry,listener)}},d3_geo_streamGeometryType={Sphere:function(object,listener){listener.sphere()},Point:function(object,listener){object=object.coordinates,listener.point(object[0],object[1],object[2])},MultiPoint:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],listener.point(object[0],object[1],object[2])},LineString:function(object,listener){d3_geo_streamLine(object.coordinates,listener,0)},MultiLineString:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)d3_geo_streamLine(coordinates[i],listener,0)},Polygon:function(object,listener){d3_geo_streamPolygon(object.coordinates,listener)},MultiPolygon:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)d3_geo_streamPolygon(coordinates[i],listener)},GeometryCollection:function(object,listener){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)d3_geo_streamGeometry(geometries[i],listener)}};d3.geo.area=function(object){return d3_geo_areaSum=0,d3.geo.stream(object,d3_geo_area),d3_geo_areaSum};var d3_geo_areaSum,d3_geo_areaRingSum=new d3_adder,d3_geo_area={sphere:function(){d3_geo_areaSum+=4*π},point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_areaRingSum.reset(),d3_geo_area.lineStart=d3_geo_areaRingStart},polygonEnd:function(){var area=2*d3_geo_areaRingSum;d3_geo_areaSum+=0>area?4*π+area:area,d3_geo_area.lineStart=d3_geo_area.lineEnd=d3_geo_area.point=d3_noop}};d3.geo.bounds=function(){function point(λ,φ){ranges.push(range=[λ0=λ,λ1=λ]),φ0>φ&&(φ0=φ),φ>φ1&&(φ1=φ)}function linePoint(λ,φ){var p=d3_geo_cartesian([λ*d3_radians,φ*d3_radians]);if(p0){var normal=d3_geo_cartesianCross(p0,p),equatorial=[normal[1],-normal[0],0],inflection=d3_geo_cartesianCross(equatorial,normal);d3_geo_cartesianNormalize(inflection),inflection=d3_geo_spherical(inflection);var dλ=λ-λ_,s=dλ>0?1:-1,λi=inflection[0]*d3_degrees*s,antimeridian=abs(dλ)>180;if(antimeridian^(λi>s*λ_&&s*λ>λi)){var φi=inflection[1]*d3_degrees;φi>φ1&&(φ1=φi)}else if(λi=(λi+360)%360-180,antimeridian^(λi>s*λ_&&s*λ>λi)){var φi=-inflection[1]*d3_degrees;φ0>φi&&(φ0=φi)}else φ0>φ&&(φ0=φ),φ>φ1&&(φ1=φ);antimeridian?λ_>λ?angle(λ0,λ)>angle(λ0,λ1)&&(λ1=λ):angle(λ,λ1)>angle(λ0,λ1)&&(λ0=λ):λ1>=λ0?(λ0>λ&&(λ0=λ),λ>λ1&&(λ1=λ)):λ>λ_?angle(λ0,λ)>angle(λ0,λ1)&&(λ1=λ):angle(λ,λ1)>angle(λ0,λ1)&&(λ0=λ)}else point(λ,φ);p0=p,λ_=λ}function lineStart(){bound.point=linePoint}function lineEnd(){range[0]=λ0,range[1]=λ1,bound.point=point,p0=null}function ringPoint(λ,φ){if(p0){var dλ=λ-λ_;dλSum+=abs(dλ)>180?dλ+(dλ>0?360:-360):dλ}else λ__=λ,φ__=φ;d3_geo_area.point(λ,φ),linePoint(λ,φ)}function ringStart(){d3_geo_area.lineStart()}function ringEnd(){ringPoint(λ__,φ__),d3_geo_area.lineEnd(),abs(dλSum)>ε&&(λ0=-(λ1=180)),range[0]=λ0,range[1]=λ1,p0=null}function angle(λ0,λ1){return(λ1-=λ0)<0?λ1+360:λ1}function compareRanges(a,b){return a[0]-b[0]}function withinRange(x,range){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}var λ0,φ0,λ1,φ1,λ_,λ__,φ__,p0,dλSum,ranges,range,bound={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){bound.point=ringPoint,bound.lineStart=ringStart,bound.lineEnd=ringEnd,dλSum=0,d3_geo_area.polygonStart()},polygonEnd:function(){d3_geo_area.polygonEnd(),bound.point=point,bound.lineStart=lineStart,bound.lineEnd=lineEnd,0>d3_geo_areaRingSum?(λ0=-(λ1=180),φ0=-(φ1=90)):dλSum>ε?φ1=90:-ε>dλSum&&(φ0=-90),range[0]=λ0,range[1]=λ1}};return function(feature){φ1=λ1=-(λ0=φ0=1/0),ranges=[],d3.geo.stream(feature,bound);var n=ranges.length;if(n){ranges.sort(compareRanges);for(var b,i=1,a=ranges[0],merged=[a];n>i;++i)b=ranges[i],withinRange(b[0],a)||withinRange(b[1],a)?(angle(a[0],b[1])>angle(a[0],a[1])&&(a[1]=b[1]),angle(b[0],a[1])>angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(var dλ,b,best=-(1/0),n=merged.length-1,i=0,a=merged[n];n>=i;a=b,++i)b=merged[i],(dλ=angle(a[1],b[0]))>best&&(best=dλ,λ0=b[0],λ1=a[1])}return ranges=range=null,λ0===1/0||φ0===1/0?[[NaN,NaN],[NaN,NaN]]:[[λ0,φ0],[λ1,φ1]]}}(),d3.geo.centroid=function(object){d3_geo_centroidW0=d3_geo_centroidW1=d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0,d3.geo.stream(object,d3_geo_centroid);var x=d3_geo_centroidX2,y=d3_geo_centroidY2,z=d3_geo_centroidZ2,m=x*x+y*y+z*z;return ε2>m&&(x=d3_geo_centroidX1,y=d3_geo_centroidY1,z=d3_geo_centroidZ1,ε>d3_geo_centroidW1&&(x=d3_geo_centroidX0,y=d3_geo_centroidY0,z=d3_geo_centroidZ0),m=x*x+y*y+z*z,ε2>m)?[NaN,NaN]:[Math.atan2(y,x)*d3_degrees,d3_asin(z/Math.sqrt(m))*d3_degrees]};var d3_geo_centroidW0,d3_geo_centroidW1,d3_geo_centroidX0,d3_geo_centroidY0,d3_geo_centroidZ0,d3_geo_centroidX1,d3_geo_centroidY1,d3_geo_centroidZ1,d3_geo_centroidX2,d3_geo_centroidY2,d3_geo_centroidZ2,d3_geo_centroid={sphere:d3_noop,point:d3_geo_centroidPoint,lineStart:d3_geo_centroidLineStart,lineEnd:d3_geo_centroidLineEnd,polygonStart:function(){d3_geo_centroid.lineStart=d3_geo_centroidRingStart},polygonEnd:function(){d3_geo_centroid.lineStart=d3_geo_centroidLineStart}},d3_geo_clipAntimeridian=d3_geo_clip(d3_true,d3_geo_clipAntimeridianLine,d3_geo_clipAntimeridianInterpolate,[-π,-π/2]),d3_geo_clipExtentMAX=1e9;d3.geo.clipExtent=function(){var x0,y0,x1,y1,stream,clip,clipExtent={stream:function(output){return stream&&(stream.valid=!1),stream=clip(output),stream.valid=!0,stream},extent:function(_){return arguments.length?(clip=d3_geo_clipExtent(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),stream&&(stream.valid=!1,stream=null),clipExtent):[[x0,y0],[x1,y1]]}};return clipExtent.extent([[0,0],[960,500]])},(d3.geo.conicEqualArea=function(){return d3_geo_conic(d3_geo_conicEqualArea)}).raw=d3_geo_conicEqualArea,d3.geo.albers=function(){return d3.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},d3.geo.albersUsa=function(){function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point(x,y),point||(alaskaPoint(x,y),point)||hawaiiPoint(x,y),point}var point,lower48Point,alaskaPoint,hawaiiPoint,lower48=d3.geo.albers(),alaska=d3.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=d3.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={point:function(x,y){point=[x,y]}};return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&.234>y&&x>=-.425&&-.214>x?alaska:y>=.166&&.234>y&&x>=-.214&&-.115>x?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){var lower48Stream=lower48.stream(stream),alaskaStream=alaska.stream(stream),hawaiiStream=hawaii.stream(stream);return{point:function(x,y){lower48Stream.point(x,y),alaskaStream.point(x,y),hawaiiStream.point(x,y)},sphere:function(){lower48Stream.sphere(),alaskaStream.sphere(),hawaiiStream.sphere()},lineStart:function(){lower48Stream.lineStart(),alaskaStream.lineStart(),hawaiiStream.lineStart()},lineEnd:function(){lower48Stream.lineEnd(),alaskaStream.lineEnd(),hawaiiStream.lineEnd()},polygonStart:function(){lower48Stream.polygonStart(),alaskaStream.polygonStart(),hawaiiStream.polygonStart()},polygonEnd:function(){lower48Stream.polygonEnd(),alaskaStream.polygonEnd(),hawaiiStream.polygonEnd()}}},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),albersUsa):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream).point,alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+ε,y+.12*k+ε],[x-.214*k-ε,y+.234*k-ε]]).stream(pointStream).point,hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+ε,y+.166*k+ε],[x-.115*k-ε,y+.234*k-ε]]).stream(pointStream).point,albersUsa},albersUsa.scale(1070)};var d3_geo_pathAreaSum,d3_geo_pathAreaPolygon,d3_geo_pathBoundsX0,d3_geo_pathBoundsY0,d3_geo_pathBoundsX1,d3_geo_pathBoundsY1,d3_geo_pathArea={point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_pathAreaPolygon=0,d3_geo_pathArea.lineStart=d3_geo_pathAreaRingStart},polygonEnd:function(){d3_geo_pathArea.lineStart=d3_geo_pathArea.lineEnd=d3_geo_pathArea.point=d3_noop,d3_geo_pathAreaSum+=abs(d3_geo_pathAreaPolygon/2)}},d3_geo_pathBounds={point:d3_geo_pathBoundsPoint,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop},d3_geo_pathCentroid={point:d3_geo_pathCentroidPoint,lineStart:d3_geo_pathCentroidLineStart,lineEnd:d3_geo_pathCentroidLineEnd,polygonStart:function(){d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidRingStart},polygonEnd:function(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint,d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidLineStart,d3_geo_pathCentroid.lineEnd=d3_geo_pathCentroidLineEnd}};d3.geo.path=function(){function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),cacheStream&&cacheStream.valid||(cacheStream=projectStream(contextStream)),d3.geo.stream(object,cacheStream)),contextStream.result()}function reset(){return cacheStream=null,path}var projection,context,projectStream,contextStream,cacheStream,pointRadius=4.5;return path.area=function(object){return d3_geo_pathAreaSum=0,d3.geo.stream(object,projectStream(d3_geo_pathArea)),d3_geo_pathAreaSum},path.centroid=function(object){return d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0,d3.geo.stream(object,projectStream(d3_geo_pathCentroid)),d3_geo_centroidZ2?[d3_geo_centroidX2/d3_geo_centroidZ2,d3_geo_centroidY2/d3_geo_centroidZ2]:d3_geo_centroidZ1?[d3_geo_centroidX1/d3_geo_centroidZ1,d3_geo_centroidY1/d3_geo_centroidZ1]:d3_geo_centroidZ0?[d3_geo_centroidX0/d3_geo_centroidZ0,d3_geo_centroidY0/d3_geo_centroidZ0]:[NaN,NaN]},path.bounds=function(object){return d3_geo_pathBoundsX1=d3_geo_pathBoundsY1=-(d3_geo_pathBoundsX0=d3_geo_pathBoundsY0=1/0),d3.geo.stream(object,projectStream(d3_geo_pathBounds)),[[d3_geo_pathBoundsX0,d3_geo_pathBoundsY0],[d3_geo_pathBoundsX1,d3_geo_pathBoundsY1]]},path.projection=function(_){return arguments.length?(projectStream=(projection=_)?_.stream||d3_geo_pathProjectStream(_):d3_identity,reset()):projection},path.context=function(_){return arguments.length?(contextStream=null==(context=_)?new d3_geo_pathBuffer:new d3_geo_pathContext(_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),reset()):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.projection(d3.geo.albersUsa()).context(null)},d3.geo.transform=function(methods){return{stream:function(stream){var transform=new d3_geo_transform(stream);for(var k in methods)transform[k]=methods[k];return transform}}},d3_geo_transform.prototype={point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},d3.geo.projection=d3_geo_projection,d3.geo.projectionMutator=d3_geo_projectionMutator,(d3.geo.equirectangular=function(){return d3_geo_projection(d3_geo_equirectangular)}).raw=d3_geo_equirectangular.invert=d3_geo_equirectangular,d3.geo.rotation=function(rotate){function forward(coordinates){return coordinates=rotate(coordinates[0]*d3_radians,coordinates[1]*d3_radians),coordinates[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates}return rotate=d3_geo_rotation(rotate[0]%360*d3_radians,rotate[1]*d3_radians,rotate.length>2?rotate[2]*d3_radians:0),forward.invert=function(coordinates){return coordinates=rotate.invert(coordinates[0]*d3_radians,coordinates[1]*d3_radians),coordinates[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates},forward},d3_geo_identityRotation.invert=d3_geo_equirectangular,d3.geo.circle=function(){function circle(){var center="function"==typeof origin?origin.apply(this,arguments):origin,rotate=d3_geo_rotation(-center[0]*d3_radians,-center[1]*d3_radians,0).invert,ring=[];return interpolate(null,null,1,{point:function(x,y){ring.push(x=rotate(x,y)),x[0]*=d3_degrees,x[1]*=d3_degrees}}),{type:"Polygon",coordinates:[ring]}}var angle,interpolate,origin=[0,0],precision=6;return circle.origin=function(x){return arguments.length?(origin=x,circle):origin},circle.angle=function(x){return arguments.length?(interpolate=d3_geo_circleInterpolate((angle=+x)*d3_radians,precision*d3_radians),circle):angle},circle.precision=function(_){return arguments.length?(interpolate=d3_geo_circleInterpolate(angle*d3_radians,(precision=+_)*d3_radians),circle):precision},circle.angle(90)},d3.geo.distance=function(a,b){var t,Δλ=(b[0]-a[0])*d3_radians,φ0=a[1]*d3_radians,φ1=b[1]*d3_radians,sinΔλ=Math.sin(Δλ),cosΔλ=Math.cos(Δλ),sinφ0=Math.sin(φ0),cosφ0=Math.cos(φ0),sinφ1=Math.sin(φ1),cosφ1=Math.cos(φ1);return Math.atan2(Math.sqrt((t=cosφ1*sinΔλ)*t+(t=cosφ0*sinφ1-sinφ0*cosφ1*cosΔλ)*t),sinφ0*sinφ1+cosφ0*cosφ1*cosΔλ)},d3.geo.graticule=function(){function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return d3.range(Math.ceil(X0/DX)*DX,X1,DX).map(X).concat(d3.range(Math.ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(d3.range(Math.ceil(x0/dx)*dx,x1,dx).filter(function(x){return abs(x%DX)>ε}).map(x)).concat(d3.range(Math.ceil(y0/dy)*dy,y1,dy).filter(function(y){return abs(y%DY)>ε}).map(y))}var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;return graticule.lines=function(){return lines().map(function(coordinates){return{type:"LineString",coordinates:coordinates}})},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.majorExtent(_).minorExtent(_):graticule.minorExtent()},graticule.majorExtent=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.minorExtent=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.majorStep(_).minorStep(_):graticule.minorStep()},graticule.majorStep=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.minorStep=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=d3_geo_graticuleX(y0,y1,90),y=d3_geo_graticuleY(x0,x1,precision),X=d3_geo_graticuleX(Y0,Y1,90),Y=d3_geo_graticuleY(X0,X1,precision),graticule):precision},graticule.majorExtent([[-180,-90+ε],[180,90-ε]]).minorExtent([[-180,-80-ε],[180,80+ε]])},d3.geo.greatArc=function(){function greatArc(){return{type:"LineString",coordinates:[source_||source.apply(this,arguments),target_||target.apply(this,arguments)]}}var source_,target_,source=d3_source,target=d3_target;return greatArc.distance=function(){return d3.geo.distance(source_||source.apply(this,arguments),target_||target.apply(this,arguments))},greatArc.source=function(_){return arguments.length?(source=_,source_="function"==typeof _?null:_,greatArc):source},greatArc.target=function(_){return arguments.length?(target=_,target_="function"==typeof _?null:_,greatArc):target},greatArc.precision=function(){return arguments.length?greatArc:0},greatArc},d3.geo.interpolate=function(source,target){return d3_geo_interpolate(source[0]*d3_radians,source[1]*d3_radians,target[0]*d3_radians,target[1]*d3_radians)},d3.geo.length=function(object){return d3_geo_lengthSum=0,d3.geo.stream(object,d3_geo_length),d3_geo_lengthSum};var d3_geo_lengthSum,d3_geo_length={sphere:d3_noop,point:d3_noop,lineStart:d3_geo_lengthLineStart,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop},d3_geo_azimuthalEqualArea=d3_geo_azimuthal(function(cosλcosφ){return Math.sqrt(2/(1+cosλcosφ))},function(ρ){return 2*Math.asin(ρ/2)});(d3.geo.azimuthalEqualArea=function(){return d3_geo_projection(d3_geo_azimuthalEqualArea)}).raw=d3_geo_azimuthalEqualArea;var d3_geo_azimuthalEquidistant=d3_geo_azimuthal(function(cosλcosφ){var c=Math.acos(cosλcosφ);return c&&c/Math.sin(c)},d3_identity);(d3.geo.azimuthalEquidistant=function(){return d3_geo_projection(d3_geo_azimuthalEquidistant)}).raw=d3_geo_azimuthalEquidistant,(d3.geo.conicConformal=function(){return d3_geo_conic(d3_geo_conicConformal)}).raw=d3_geo_conicConformal,(d3.geo.conicEquidistant=function(){return d3_geo_conic(d3_geo_conicEquidistant)}).raw=d3_geo_conicEquidistant;var d3_geo_gnomonic=d3_geo_azimuthal(function(cosλcosφ){return 1/cosλcosφ},Math.atan);(d3.geo.gnomonic=function(){return d3_geo_projection(d3_geo_gnomonic)}).raw=d3_geo_gnomonic,d3_geo_mercator.invert=function(x,y){return[x,2*Math.atan(Math.exp(y))-halfπ]},(d3.geo.mercator=function(){return d3_geo_mercatorProjection(d3_geo_mercator)}).raw=d3_geo_mercator;var d3_geo_orthographic=d3_geo_azimuthal(function(){return 1},Math.asin);(d3.geo.orthographic=function(){return d3_geo_projection(d3_geo_orthographic)}).raw=d3_geo_orthographic;var d3_geo_stereographic=d3_geo_azimuthal(function(cosλcosφ){return 1/(1+cosλcosφ)},function(ρ){return 2*Math.atan(ρ)});(d3.geo.stereographic=function(){return d3_geo_projection(d3_geo_stereographic)}).raw=d3_geo_stereographic,d3_geo_transverseMercator.invert=function(x,y){return[-y,2*Math.atan(Math.exp(x))-halfπ]},(d3.geo.transverseMercator=function(){var projection=d3_geo_mercatorProjection(d3_geo_transverseMercator),center=projection.center,rotate=projection.rotate;return projection.center=function(_){return _?center([-_[1],_[0]]):(_=center(),[_[1],-_[0]])},projection.rotate=function(_){return _?rotate([_[0],_[1],_.length>2?_[2]+90:90]):(_=rotate(),[_[0],_[1],_[2]-90])},rotate([0,0,90])}).raw=d3_geo_transverseMercator,d3.geom={},d3.geom.hull=function(vertices){function hull(data){if(data.length<3)return[];var i,fx=d3_functor(x),fy=d3_functor(y),n=data.length,points=[],flippedPoints=[];for(i=0;n>i;i++)points.push([+fx.call(this,data[i],i),+fy.call(this,data[i],i),i]);for(points.sort(d3_geom_hullOrder),i=0;n>i;i++)flippedPoints.push([points[i][0],-points[i][1]]);var upper=d3_geom_hullUpper(points),lower=d3_geom_hullUpper(flippedPoints),skipLeft=lower[0]===upper[0],skipRight=lower[lower.length-1]===upper[upper.length-1],polygon=[];for(i=upper.length-1;i>=0;--i)polygon.push(data[points[upper[i]][2]]);for(i=+skipLeft;i<lower.length-skipRight;++i)polygon.push(data[points[lower[i]][2]]);return polygon}var x=d3_geom_pointX,y=d3_geom_pointY;return arguments.length?hull(vertices):(hull.x=function(_){return arguments.length?(x=_,hull):x},hull.y=function(_){return arguments.length?(y=_,hull):y},hull)},d3.geom.polygon=function(coordinates){return d3_subclass(coordinates,d3_geom_polygonPrototype),coordinates};var d3_geom_polygonPrototype=d3.geom.polygon.prototype=[];d3_geom_polygonPrototype.area=function(){for(var a,i=-1,n=this.length,b=this[n-1],area=0;++i<n;)a=b,b=this[i],area+=a[1]*b[0]-a[0]*b[1];return.5*area},d3_geom_polygonPrototype.centroid=function(k){var a,c,i=-1,n=this.length,x=0,y=0,b=this[n-1];for(arguments.length||(k=-1/(6*this.area()));++i<n;)a=b,b=this[i],c=a[0]*b[1]-b[0]*a[1],x+=(a[0]+b[0])*c,y+=(a[1]+b[1])*c;return[x*k,y*k]},d3_geom_polygonPrototype.clip=function(subject){for(var input,j,m,b,c,d,closed=d3_geom_polygonClosed(subject),i=-1,n=this.length-d3_geom_polygonClosed(this),a=this[n-1];++i<n;){for(input=subject.slice(),subject.length=0,b=this[i],c=input[(m=input.length-closed)-1],j=-1;++j<m;)d=input[j],d3_geom_polygonInside(d,a,b)?(d3_geom_polygonInside(c,a,b)||subject.push(d3_geom_polygonIntersect(c,d,a,b)),subject.push(d)):d3_geom_polygonInside(c,a,b)&&subject.push(d3_geom_polygonIntersect(c,d,a,b)),c=d;closed&&subject.push(subject[0]),a=b}return subject};var d3_geom_voronoiEdges,d3_geom_voronoiCells,d3_geom_voronoiBeaches,d3_geom_voronoiFirstCircle,d3_geom_voronoiCircles,d3_geom_voronoiBeachPool=[],d3_geom_voronoiCirclePool=[];d3_geom_voronoiCell.prototype.prepare=function(){for(var edge,halfEdges=this.edges,iHalfEdge=halfEdges.length;iHalfEdge--;)edge=halfEdges[iHalfEdge].edge,edge.b&&edge.a||halfEdges.splice(iHalfEdge,1);return halfEdges.sort(d3_geom_voronoiHalfEdgeOrder),halfEdges.length},d3_geom_voronoiHalfEdge.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},d3_geom_voronoiRedBlackTree.prototype={insert:function(after,node){var parent,grandpa,uncle;if(after){if(node.P=after,node.N=after.N,after.N&&(after.N.P=node),after.N=node,after.R){for(after=after.R;after.L;)after=after.L;after.L=node}else after.R=node;parent=after}else this._?(after=d3_geom_voronoiRedBlackFirst(this._),node.P=null,node.N=after,after.P=after.L=node,parent=after):(node.P=node.N=null,this._=node,parent=null);for(node.L=node.R=null,node.U=parent,node.C=!0,after=node;parent&&parent.C;)grandpa=parent.U,parent===grandpa.L?(uncle=grandpa.R,uncle&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.R&&(d3_geom_voronoiRedBlackRotateLeft(this,parent),after=parent,parent=after.U),parent.C=!1,grandpa.C=!0,d3_geom_voronoiRedBlackRotateRight(this,grandpa))):(uncle=grandpa.L,uncle&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.L&&(d3_geom_voronoiRedBlackRotateRight(this,parent),after=parent,parent=after.U),parent.C=!1,grandpa.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,grandpa))),parent=after.U;this._.C=!1},remove:function(node){node.N&&(node.N.P=node.P),node.P&&(node.P.N=node.N),node.N=node.P=null;var sibling,next,red,parent=node.U,left=node.L,right=node.R;if(next=left?right?d3_geom_voronoiRedBlackFirst(right):left:right,parent?parent.L===node?parent.L=next:parent.R=next:this._=next,left&&right?(red=next.C,next.C=node.C,next.L=left,left.U=next,next!==right?(parent=next.U,next.U=node.U,node=next.R,parent.L=node,next.R=right,right.U=next):(next.U=parent,parent=next,node=next.R)):(red=node.C,node=next),node&&(node.U=parent),!red){if(node&&node.C)return void(node.C=!1);do{if(node===this._)break;if(node===parent.L){if(sibling=parent.R,sibling.C&&(sibling.C=!1,parent.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,parent),sibling=parent.R),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.R&&sibling.R.C||(sibling.L.C=!1,sibling.C=!0,d3_geom_voronoiRedBlackRotateRight(this,sibling),sibling=parent.R),sibling.C=parent.C,parent.C=sibling.R.C=!1,d3_geom_voronoiRedBlackRotateLeft(this,parent),node=this._;break}}else if(sibling=parent.L,sibling.C&&(sibling.C=!1,parent.C=!0,d3_geom_voronoiRedBlackRotateRight(this,parent),sibling=parent.L),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.L&&sibling.L.C||(sibling.R.C=!1,sibling.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,sibling),sibling=parent.L),sibling.C=parent.C,parent.C=sibling.L.C=!1,d3_geom_voronoiRedBlackRotateRight(this,parent),node=this._;break}sibling.C=!0,node=parent,parent=parent.U}while(!node.C);node&&(node.C=!1)}}},d3.geom.voronoi=function(points){function voronoi(data){var polygons=new Array(data.length),x0=clipExtent[0][0],y0=clipExtent[0][1],x1=clipExtent[1][0],y1=clipExtent[1][1];return d3_geom_voronoi(sites(data),clipExtent).cells.forEach(function(cell,i){var edges=cell.edges,site=cell.site,polygon=polygons[i]=edges.length?edges.map(function(e){var s=e.start();return[s.x,s.y]}):site.x>=x0&&site.x<=x1&&site.y>=y0&&site.y<=y1?[[x0,y1],[x1,y1],[x1,y0],[x0,y0]]:[];polygon.point=data[i]}),polygons}function sites(data){return data.map(function(d,i){return{x:Math.round(fx(d,i)/ε)*ε,y:Math.round(fy(d,i)/ε)*ε,i:i}})}var x=d3_geom_pointX,y=d3_geom_pointY,fx=x,fy=y,clipExtent=d3_geom_voronoiClipExtent;return points?voronoi(points):(voronoi.links=function(data){return d3_geom_voronoi(sites(data)).edges.filter(function(edge){return edge.l&&edge.r}).map(function(edge){return{source:data[edge.l.i],target:data[edge.r.i]}})},voronoi.triangles=function(data){var triangles=[];return d3_geom_voronoi(sites(data)).cells.forEach(function(cell,i){for(var e0,s0,site=cell.site,edges=cell.edges.sort(d3_geom_voronoiHalfEdgeOrder),j=-1,m=edges.length,e1=edges[m-1].edge,s1=e1.l===site?e1.r:e1.l;++j<m;)e0=e1,s0=s1,e1=edges[j].edge,s1=e1.l===site?e1.r:e1.l,i<s0.i&&i<s1.i&&d3_geom_voronoiTriangleArea(site,s0,s1)<0&&triangles.push([data[i],data[s0.i],data[s1.i]])}),triangles},voronoi.x=function(_){return arguments.length?(fx=d3_functor(x=_),voronoi):x},voronoi.y=function(_){return arguments.length?(fy=d3_functor(y=_),voronoi):y},voronoi.clipExtent=function(_){return arguments.length?(clipExtent=null==_?d3_geom_voronoiClipExtent:_,voronoi):clipExtent===d3_geom_voronoiClipExtent?null:clipExtent},voronoi.size=function(_){return arguments.length?voronoi.clipExtent(_&&[[0,0],_]):clipExtent===d3_geom_voronoiClipExtent?null:clipExtent&&clipExtent[1]},voronoi)};var d3_geom_voronoiClipExtent=[[-1e6,-1e6],[1e6,1e6]];d3.geom.delaunay=function(vertices){return d3.geom.voronoi().triangles(vertices)},d3.geom.quadtree=function(points,x1,y1,x2,y2){function quadtree(data){function insert(n,d,x,y,x1,y1,x2,y2){if(!isNaN(x)&&!isNaN(y))if(n.leaf){var nx=n.x,ny=n.y;if(null!=nx)if(abs(nx-x)+abs(ny-y)<.01)insertChild(n,d,x,y,x1,y1,x2,y2);else{var nPoint=n.point;n.x=n.y=n.point=null,insertChild(n,nPoint,nx,ny,x1,y1,x2,y2),insertChild(n,d,x,y,x1,y1,x2,y2)}else n.x=x,n.y=y,n.point=d}else insertChild(n,d,x,y,x1,y1,x2,y2)}function insertChild(n,d,x,y,x1,y1,x2,y2){var xm=.5*(x1+x2),ym=.5*(y1+y2),right=x>=xm,below=y>=ym,i=below<<1|right;n.leaf=!1,n=n.nodes[i]||(n.nodes[i]=d3_geom_quadtreeNode()),right?x1=xm:x2=xm,below?y1=ym:y2=ym,insert(n,d,x,y,x1,y1,x2,y2)}var d,xs,ys,i,n,x1_,y1_,x2_,y2_,fx=d3_functor(x),fy=d3_functor(y);if(null!=x1)x1_=x1,y1_=y1,x2_=x2,y2_=y2;else if(x2_=y2_=-(x1_=y1_=1/0),xs=[],ys=[],n=data.length,compat)for(i=0;n>i;++i)d=data[i],d.x<x1_&&(x1_=d.x),d.y<y1_&&(y1_=d.y),d.x>x2_&&(x2_=d.x),d.y>y2_&&(y2_=d.y),xs.push(d.x),ys.push(d.y);else for(i=0;n>i;++i){var x_=+fx(d=data[i],i),y_=+fy(d,i);x1_>x_&&(x1_=x_),y1_>y_&&(y1_=y_),x_>x2_&&(x2_=x_),y_>y2_&&(y2_=y_),xs.push(x_),ys.push(y_)}var dx=x2_-x1_,dy=y2_-y1_;dx>dy?y2_=y1_+dx:x2_=x1_+dy;var root=d3_geom_quadtreeNode();if(root.add=function(d){insert(root,d,+fx(d,++i),+fy(d,i),x1_,y1_,x2_,y2_)},root.visit=function(f){d3_geom_quadtreeVisit(f,root,x1_,y1_,x2_,y2_)},root.find=function(point){return d3_geom_quadtreeFind(root,point[0],point[1],x1_,y1_,x2_,y2_)},i=-1,null==x1){for(;++i<n;)insert(root,data[i],xs[i],ys[i],x1_,y1_,x2_,y2_);--i}else data.forEach(root.add);return xs=ys=data=d=null,root}var compat,x=d3_geom_pointX,y=d3_geom_pointY;return(compat=arguments.length)?(x=d3_geom_quadtreeCompatX,y=d3_geom_quadtreeCompatY,3===compat&&(y2=y1,x2=x1,y1=x1=0),quadtree(points)):(quadtree.x=function(_){return arguments.length?(x=_,quadtree):x},quadtree.y=function(_){return arguments.length?(y=_,quadtree):y},quadtree.extent=function(_){return arguments.length?(null==_?x1=y1=x2=y2=null:(x1=+_[0][0],y1=+_[0][1],x2=+_[1][0],y2=+_[1][1]),quadtree):null==x1?null:[[x1,y1],[x2,y2]]},quadtree.size=function(_){return arguments.length?(null==_?x1=y1=x2=y2=null:(x1=y1=0,x2=+_[0],y2=+_[1]),quadtree):null==x1?null:[x2-x1,y2-y1]},quadtree);
},d3.interpolateRgb=d3_interpolateRgb,d3.interpolateObject=d3_interpolateObject,d3.interpolateNumber=d3_interpolateNumber,d3.interpolateString=d3_interpolateString;var d3_interpolate_numberA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d3_interpolate_numberB=new RegExp(d3_interpolate_numberA.source,"g");d3.interpolate=d3_interpolate,d3.interpolators=[function(a,b){var t=typeof b;return("string"===t?d3_rgb_names.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?d3_interpolateRgb:d3_interpolateString:b instanceof d3_color?d3_interpolateRgb:Array.isArray(b)?d3_interpolateArray:"object"===t&&isNaN(b)?d3_interpolateObject:d3_interpolateNumber)(a,b)}],d3.interpolateArray=d3_interpolateArray;var d3_ease_default=function(){return d3_identity},d3_ease=d3.map({linear:d3_ease_default,poly:d3_ease_poly,quad:function(){return d3_ease_quad},cubic:function(){return d3_ease_cubic},sin:function(){return d3_ease_sin},exp:function(){return d3_ease_exp},circle:function(){return d3_ease_circle},elastic:d3_ease_elastic,back:d3_ease_back,bounce:function(){return d3_ease_bounce}}),d3_ease_mode=d3.map({in:d3_identity,out:d3_ease_reverse,"in-out":d3_ease_reflect,"out-in":function(f){return d3_ease_reflect(d3_ease_reverse(f))}});d3.ease=function(name){var i=name.indexOf("-"),t=i>=0?name.slice(0,i):name,m=i>=0?name.slice(i+1):"in";return t=d3_ease.get(t)||d3_ease_default,m=d3_ease_mode.get(m)||d3_identity,d3_ease_clamp(m(t.apply(null,d3_arraySlice.call(arguments,1))))},d3.interpolateHcl=d3_interpolateHcl,d3.interpolateHsl=d3_interpolateHsl,d3.interpolateLab=d3_interpolateLab,d3.interpolateRound=d3_interpolateRound,d3.transform=function(string){var g=d3_document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(string){if(null!=string){g.setAttribute("transform",string);var t=g.transform.baseVal.consolidate()}return new d3_transform(t?t.matrix:d3_transformIdentity)})(string)},d3_transform.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var d3_transformIdentity={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolateTransform=d3_interpolateTransform,d3.layout={},d3.layout.bundle=function(){return function(links){for(var paths=[],i=-1,n=links.length;++i<n;)paths.push(d3_layout_bundlePath(links[i]));return paths}},d3.layout.chord=function(){function relayout(){var k,x,x0,i,j,subgroups={},groupSums=[],groupIndex=d3.range(n),subgroupIndex=[];for(chords=[],groups=[],k=0,i=-1;++i<n;){for(x=0,j=-1;++j<n;)x+=matrix[i][j];groupSums.push(x),subgroupIndex.push(d3.range(n)),k+=x}for(sortGroups&&groupIndex.sort(function(a,b){return sortGroups(groupSums[a],groupSums[b])}),sortSubgroups&&subgroupIndex.forEach(function(d,i){d.sort(function(a,b){return sortSubgroups(matrix[i][a],matrix[i][b])})}),k=(τ-padding*n)/k,x=0,i=-1;++i<n;){for(x0=x,j=-1;++j<n;){var di=groupIndex[i],dj=subgroupIndex[di][j],v=matrix[di][dj],a0=x,a1=x+=v*k;subgroups[di+"-"+dj]={index:di,subindex:dj,startAngle:a0,endAngle:a1,value:v}}groups[di]={index:di,startAngle:x0,endAngle:x,value:(x-x0)/k},x+=padding}for(i=-1;++i<n;)for(j=i-1;++j<n;){var source=subgroups[i+"-"+j],target=subgroups[j+"-"+i];(source.value||target.value)&&chords.push(source.value<target.value?{source:target,target:source}:{source:source,target:target})}sortChords&&resort()}function resort(){chords.sort(function(a,b){return sortChords((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var chords,groups,matrix,n,sortGroups,sortSubgroups,sortChords,chord={},padding=0;return chord.matrix=function(x){return arguments.length?(n=(matrix=x)&&matrix.length,chords=groups=null,chord):matrix},chord.padding=function(x){return arguments.length?(padding=x,chords=groups=null,chord):padding},chord.sortGroups=function(x){return arguments.length?(sortGroups=x,chords=groups=null,chord):sortGroups},chord.sortSubgroups=function(x){return arguments.length?(sortSubgroups=x,chords=null,chord):sortSubgroups},chord.sortChords=function(x){return arguments.length?(sortChords=x,chords&&resort(),chord):sortChords},chord.chords=function(){return chords||relayout(),chords},chord.groups=function(){return groups||relayout(),groups},chord},d3.layout.force=function(){function repulse(node){return function(quad,x1,_,x2){if(quad.point!==node){var dx=quad.cx-node.x,dy=quad.cy-node.y,dw=x2-x1,dn=dx*dx+dy*dy;if(dn>dw*dw/theta2){if(chargeDistance2>dn){var k=quad.charge/dn;node.px-=dx*k,node.py-=dy*k}return!0}if(quad.point&&dn&&chargeDistance2>dn){var k=quad.pointCharge/dn;node.px-=dx*k,node.py-=dy*k}}return!quad.charge}}function dragmove(d){d.px=d3.event.x,d.py=d3.event.y,force.resume()}var drag,alpha,distances,strengths,charges,force={},event=d3.dispatch("start","tick","end"),size=[1,1],friction=.9,linkDistance=d3_layout_forceLinkDistance,linkStrength=d3_layout_forceLinkStrength,charge=-30,chargeDistance2=d3_layout_forceChargeDistance2,gravity=.1,theta2=.64,nodes=[],links=[];return force.tick=function(){if((alpha*=.99)<.005)return event.end({type:"end",alpha:alpha=0}),!0;var q,i,o,s,t,l,k,x,y,n=nodes.length,m=links.length;for(i=0;m>i;++i)o=links[i],s=o.source,t=o.target,x=t.x-s.x,y=t.y-s.y,(l=x*x+y*y)&&(l=alpha*strengths[i]*((l=Math.sqrt(l))-distances[i])/l,x*=l,y*=l,t.x-=x*(k=s.weight/(t.weight+s.weight)),t.y-=y*k,s.x+=x*(k=1-k),s.y+=y*k);if((k=alpha*gravity)&&(x=size[0]/2,y=size[1]/2,i=-1,k))for(;++i<n;)o=nodes[i],o.x+=(x-o.x)*k,o.y+=(y-o.y)*k;if(charge)for(d3_layout_forceAccumulate(q=d3.geom.quadtree(nodes),alpha,charges),i=-1;++i<n;)(o=nodes[i]).fixed||q.visit(repulse(o));for(i=-1;++i<n;)o=nodes[i],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*friction,o.y-=(o.py-(o.py=o.y))*friction);event.tick({type:"tick",alpha:alpha})},force.nodes=function(x){return arguments.length?(nodes=x,force):nodes},force.links=function(x){return arguments.length?(links=x,force):links},force.size=function(x){return arguments.length?(size=x,force):size},force.linkDistance=function(x){return arguments.length?(linkDistance="function"==typeof x?x:+x,force):linkDistance},force.distance=force.linkDistance,force.linkStrength=function(x){return arguments.length?(linkStrength="function"==typeof x?x:+x,force):linkStrength},force.friction=function(x){return arguments.length?(friction=+x,force):friction},force.charge=function(x){return arguments.length?(charge="function"==typeof x?x:+x,force):charge},force.chargeDistance=function(x){return arguments.length?(chargeDistance2=x*x,force):Math.sqrt(chargeDistance2)},force.gravity=function(x){return arguments.length?(gravity=+x,force):gravity},force.theta=function(x){return arguments.length?(theta2=x*x,force):Math.sqrt(theta2)},force.alpha=function(x){return arguments.length?(x=+x,alpha?alpha=x>0?x:0:x>0&&(event.start({type:"start",alpha:alpha=x}),d3.timer(force.tick)),force):alpha},force.start=function(){function position(dimension,size){if(!neighbors){for(neighbors=new Array(n),j=0;n>j;++j)neighbors[j]=[];for(j=0;m>j;++j){var o=links[j];neighbors[o.source.index].push(o.target),neighbors[o.target.index].push(o.source)}}for(var x,candidates=neighbors[i],j=-1,l=candidates.length;++j<l;)if(!isNaN(x=candidates[j][dimension]))return x;return Math.random()*size}var i,neighbors,o,n=nodes.length,m=links.length,w=size[0],h=size[1];for(i=0;n>i;++i)(o=nodes[i]).index=i,o.weight=0;for(i=0;m>i;++i)o=links[i],"number"==typeof o.source&&(o.source=nodes[o.source]),"number"==typeof o.target&&(o.target=nodes[o.target]),++o.source.weight,++o.target.weight;for(i=0;n>i;++i)o=nodes[i],isNaN(o.x)&&(o.x=position("x",w)),isNaN(o.y)&&(o.y=position("y",h)),isNaN(o.px)&&(o.px=o.x),isNaN(o.py)&&(o.py=o.y);if(distances=[],"function"==typeof linkDistance)for(i=0;m>i;++i)distances[i]=+linkDistance.call(this,links[i],i);else for(i=0;m>i;++i)distances[i]=linkDistance;if(strengths=[],"function"==typeof linkStrength)for(i=0;m>i;++i)strengths[i]=+linkStrength.call(this,links[i],i);else for(i=0;m>i;++i)strengths[i]=linkStrength;if(charges=[],"function"==typeof charge)for(i=0;n>i;++i)charges[i]=+charge.call(this,nodes[i],i);else for(i=0;n>i;++i)charges[i]=charge;return force.resume()},force.resume=function(){return force.alpha(.1)},force.stop=function(){return force.alpha(0)},force.drag=function(){return drag||(drag=d3.behavior.drag().origin(d3_identity).on("dragstart.force",d3_layout_forceDragstart).on("drag.force",dragmove).on("dragend.force",d3_layout_forceDragend)),arguments.length?void this.on("mouseover.force",d3_layout_forceMouseover).on("mouseout.force",d3_layout_forceMouseout).call(drag):drag},d3.rebind(force,event,"on")};var d3_layout_forceLinkDistance=20,d3_layout_forceLinkStrength=1,d3_layout_forceChargeDistance2=1/0;d3.layout.hierarchy=function(){function hierarchy(root){var node,stack=[root],nodes=[];for(root.depth=0;null!=(node=stack.pop());)if(nodes.push(node),(childs=children.call(hierarchy,node,node.depth))&&(n=childs.length)){for(var n,childs,child;--n>=0;)stack.push(child=childs[n]),child.parent=node,child.depth=node.depth+1;value&&(node.value=0),node.children=childs}else value&&(node.value=+value.call(hierarchy,node,node.depth)||0),delete node.children;return d3_layout_hierarchyVisitAfter(root,function(node){var childs,parent;sort&&(childs=node.children)&&childs.sort(sort),value&&(parent=node.parent)&&(parent.value+=node.value)}),nodes}var sort=d3_layout_hierarchySort,children=d3_layout_hierarchyChildren,value=d3_layout_hierarchyValue;return hierarchy.sort=function(x){return arguments.length?(sort=x,hierarchy):sort},hierarchy.children=function(x){return arguments.length?(children=x,hierarchy):children},hierarchy.value=function(x){return arguments.length?(value=x,hierarchy):value},hierarchy.revalue=function(root){return value&&(d3_layout_hierarchyVisitBefore(root,function(node){node.children&&(node.value=0)}),d3_layout_hierarchyVisitAfter(root,function(node){var parent;node.children||(node.value=+value.call(hierarchy,node,node.depth)||0),(parent=node.parent)&&(parent.value+=node.value)})),root},hierarchy},d3.layout.partition=function(){function position(node,x,dx,dy){var children=node.children;if(node.x=x,node.y=node.depth*dy,node.dx=dx,node.dy=dy,children&&(n=children.length)){var n,c,d,i=-1;for(dx=node.value?dx/node.value:0;++i<n;)position(c=children[i],x,d=c.value*dx,dy),x+=d}}function depth(node){var children=node.children,d=0;if(children&&(n=children.length))for(var n,i=-1;++i<n;)d=Math.max(d,depth(children[i]));return 1+d}function partition(d,i){var nodes=hierarchy.call(this,d,i);return position(nodes[0],0,size[0],size[1]/depth(nodes[0])),nodes}var hierarchy=d3.layout.hierarchy(),size=[1,1];return partition.size=function(x){return arguments.length?(size=x,partition):size},d3_layout_hierarchyRebind(partition,hierarchy)},d3.layout.pie=function(){function pie(data){var v,n=data.length,values=data.map(function(d,i){return+value.call(pie,d,i)}),a=+("function"==typeof startAngle?startAngle.apply(this,arguments):startAngle),da=("function"==typeof endAngle?endAngle.apply(this,arguments):endAngle)-a,p=Math.min(Math.abs(da)/n,+("function"==typeof padAngle?padAngle.apply(this,arguments):padAngle)),pa=p*(0>da?-1:1),k=(da-n*pa)/d3.sum(values),index=d3.range(n),arcs=[];return null!=sort&&index.sort(sort===d3_layout_pieSortByValue?function(i,j){return values[j]-values[i]}:function(i,j){return sort(data[i],data[j])}),index.forEach(function(i){arcs[i]={data:data[i],value:v=values[i],startAngle:a,endAngle:a+=v*k+pa,padAngle:p}}),arcs}var value=Number,sort=d3_layout_pieSortByValue,startAngle=0,endAngle=τ,padAngle=0;return pie.value=function(_){return arguments.length?(value=_,pie):value},pie.sort=function(_){return arguments.length?(sort=_,pie):sort},pie.startAngle=function(_){return arguments.length?(startAngle=_,pie):startAngle},pie.endAngle=function(_){return arguments.length?(endAngle=_,pie):endAngle},pie.padAngle=function(_){return arguments.length?(padAngle=_,pie):padAngle},pie};var d3_layout_pieSortByValue={};d3.layout.stack=function(){function stack(data,index){if(!(n=data.length))return data;var series=data.map(function(d,i){return values.call(stack,d,i)}),points=series.map(function(d){return d.map(function(v,i){return[x.call(stack,v,i),y.call(stack,v,i)]})}),orders=order.call(stack,points,index);series=d3.permute(series,orders),points=d3.permute(points,orders);var n,i,j,o,offsets=offset.call(stack,points,index),m=series[0].length;for(j=0;m>j;++j)for(out.call(stack,series[0][j],o=offsets[j],points[0][j][1]),i=1;n>i;++i)out.call(stack,series[i][j],o+=points[i-1][j][1],points[i][j][1]);return data}var values=d3_identity,order=d3_layout_stackOrderDefault,offset=d3_layout_stackOffsetZero,out=d3_layout_stackOut,x=d3_layout_stackX,y=d3_layout_stackY;return stack.values=function(x){return arguments.length?(values=x,stack):values},stack.order=function(x){return arguments.length?(order="function"==typeof x?x:d3_layout_stackOrders.get(x)||d3_layout_stackOrderDefault,stack):order},stack.offset=function(x){return arguments.length?(offset="function"==typeof x?x:d3_layout_stackOffsets.get(x)||d3_layout_stackOffsetZero,stack):offset},stack.x=function(z){return arguments.length?(x=z,stack):x},stack.y=function(z){return arguments.length?(y=z,stack):y},stack.out=function(z){return arguments.length?(out=z,stack):out},stack};var d3_layout_stackOrders=d3.map({"inside-out":function(data){var i,j,n=data.length,max=data.map(d3_layout_stackMaxIndex),sums=data.map(d3_layout_stackReduceSum),index=d3.range(n).sort(function(a,b){return max[a]-max[b]}),top=0,bottom=0,tops=[],bottoms=[];for(i=0;n>i;++i)j=index[i],bottom>top?(top+=sums[j],tops.push(j)):(bottom+=sums[j],bottoms.push(j));return bottoms.reverse().concat(tops)},reverse:function(data){return d3.range(data.length).reverse()},default:d3_layout_stackOrderDefault}),d3_layout_stackOffsets=d3.map({silhouette:function(data){var i,j,o,n=data.length,m=data[0].length,sums=[],max=0,y0=[];for(j=0;m>j;++j){for(i=0,o=0;n>i;i++)o+=data[i][j][1];o>max&&(max=o),sums.push(o)}for(j=0;m>j;++j)y0[j]=(max-sums[j])/2;return y0},wiggle:function(data){var i,j,k,s1,s2,s3,dx,o,o0,n=data.length,x=data[0],m=x.length,y0=[];for(y0[0]=o=o0=0,j=1;m>j;++j){for(i=0,s1=0;n>i;++i)s1+=data[i][j][1];for(i=0,s2=0,dx=x[j][0]-x[j-1][0];n>i;++i){for(k=0,s3=(data[i][j][1]-data[i][j-1][1])/(2*dx);i>k;++k)s3+=(data[k][j][1]-data[k][j-1][1])/dx;s2+=s3*data[i][j][1]}y0[j]=o-=s1?s2/s1*dx:0,o0>o&&(o0=o)}for(j=0;m>j;++j)y0[j]-=o0;return y0},expand:function(data){var i,j,o,n=data.length,m=data[0].length,k=1/n,y0=[];for(j=0;m>j;++j){for(i=0,o=0;n>i;i++)o+=data[i][j][1];if(o)for(i=0;n>i;i++)data[i][j][1]/=o;else for(i=0;n>i;i++)data[i][j][1]=k}for(j=0;m>j;++j)y0[j]=0;return y0},zero:d3_layout_stackOffsetZero});d3.layout.histogram=function(){function histogram(data,i){for(var bin,x,bins=[],values=data.map(valuer,this),range=ranger.call(this,values,i),thresholds=binner.call(this,range,values,i),i=-1,n=values.length,m=thresholds.length-1,k=frequency?1:1/n;++i<m;)bin=bins[i]=[],bin.dx=thresholds[i+1]-(bin.x=thresholds[i]),bin.y=0;if(m>0)for(i=-1;++i<n;)x=values[i],x>=range[0]&&x<=range[1]&&(bin=bins[d3.bisect(thresholds,x,1,m)-1],bin.y+=k,bin.push(data[i]));return bins}var frequency=!0,valuer=Number,ranger=d3_layout_histogramRange,binner=d3_layout_histogramBinSturges;return histogram.value=function(x){return arguments.length?(valuer=x,histogram):valuer},histogram.range=function(x){return arguments.length?(ranger=d3_functor(x),histogram):ranger},histogram.bins=function(x){return arguments.length?(binner="number"==typeof x?function(range){return d3_layout_histogramBinFixed(range,x)}:d3_functor(x),histogram):binner},histogram.frequency=function(x){return arguments.length?(frequency=!!x,histogram):frequency},histogram},d3.layout.pack=function(){function pack(d,i){var nodes=hierarchy.call(this,d,i),root=nodes[0],w=size[0],h=size[1],r=null==radius?Math.sqrt:"function"==typeof radius?radius:function(){return radius};if(root.x=root.y=0,d3_layout_hierarchyVisitAfter(root,function(d){d.r=+r(d.value)}),d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings),padding){var dr=padding*(radius?1:Math.max(2*root.r/w,2*root.r/h))/2;d3_layout_hierarchyVisitAfter(root,function(d){d.r+=dr}),d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings),d3_layout_hierarchyVisitAfter(root,function(d){d.r-=dr})}return d3_layout_packTransform(root,w/2,h/2,radius?1:1/Math.max(2*root.r/w,2*root.r/h)),nodes}var radius,hierarchy=d3.layout.hierarchy().sort(d3_layout_packSort),padding=0,size=[1,1];return pack.size=function(_){return arguments.length?(size=_,pack):size},pack.radius=function(_){return arguments.length?(radius=null==_||"function"==typeof _?_:+_,pack):radius},pack.padding=function(_){return arguments.length?(padding=+_,pack):padding},d3_layout_hierarchyRebind(pack,hierarchy)},d3.layout.tree=function(){function tree(d,i){var nodes=hierarchy.call(this,d,i),root0=nodes[0],root1=wrapTree(root0);if(d3_layout_hierarchyVisitAfter(root1,firstWalk),root1.parent.m=-root1.z,d3_layout_hierarchyVisitBefore(root1,secondWalk),nodeSize)d3_layout_hierarchyVisitBefore(root0,sizeNode);else{var left=root0,right=root0,bottom=root0;d3_layout_hierarchyVisitBefore(root0,function(node){node.x<left.x&&(left=node),node.x>right.x&&(right=node),node.depth>bottom.depth&&(bottom=node)});var tx=separation(left,right)/2-left.x,kx=size[0]/(right.x+separation(right,left)/2+tx),ky=size[1]/(bottom.depth||1);d3_layout_hierarchyVisitBefore(root0,function(node){node.x=(node.x+tx)*kx,node.y=node.depth*ky})}return nodes}function wrapTree(root0){for(var node1,root1={A:null,children:[root0]},queue=[root1];null!=(node1=queue.pop());)for(var child,children=node1.children,i=0,n=children.length;n>i;++i)queue.push((children[i]=child={_:children[i],parent:node1,children:(child=children[i].children)&&child.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=child);return root1.children[0]}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children.length){d3_layout_treeShift(v);var midpoint=(children[0].z+children[children.length-1].z)/2;w?(v.z=w.z+separation(v._,w._),v.m=v.z-midpoint):v.z=midpoint}else w&&(v.z=w.z+separation(v._,w._));v.parent.A=apportion(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function apportion(v,w,ancestor){if(w){for(var shift,vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m;vim=d3_layout_treeRight(vim),vip=d3_layout_treeLeft(vip),vim&&vip;)vom=d3_layout_treeLeft(vom),vop=d3_layout_treeRight(vop),vop.a=v,shift=vim.z+sim-vip.z-sip+separation(vim._,vip._),shift>0&&(d3_layout_treeMove(d3_layout_treeAncestor(vim,v,ancestor),v,shift),sip+=shift,sop+=shift),sim+=vim.m,sip+=vip.m,som+=vom.m,sop+=vop.m;vim&&!d3_layout_treeRight(vop)&&(vop.t=vim,vop.m+=sim-sop),vip&&!d3_layout_treeLeft(vom)&&(vom.t=vip,vom.m+=sip-som,ancestor=v)}return ancestor}function sizeNode(node){node.x*=size[0],node.y=node.depth*size[1]}var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=null;return tree.separation=function(x){return arguments.length?(separation=x,tree):separation},tree.size=function(x){return arguments.length?(nodeSize=null==(size=x)?sizeNode:null,tree):nodeSize?null:size},tree.nodeSize=function(x){return arguments.length?(nodeSize=null==(size=x)?null:sizeNode,tree):nodeSize?size:null},d3_layout_hierarchyRebind(tree,hierarchy)},d3.layout.cluster=function(){function cluster(d,i){var previousNode,nodes=hierarchy.call(this,d,i),root=nodes[0],x=0;d3_layout_hierarchyVisitAfter(root,function(node){var children=node.children;children&&children.length?(node.x=d3_layout_clusterX(children),node.y=d3_layout_clusterY(children)):(node.x=previousNode?x+=separation(node,previousNode):0,node.y=0,previousNode=node)});var left=d3_layout_clusterLeft(root),right=d3_layout_clusterRight(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return d3_layout_hierarchyVisitAfter(root,nodeSize?function(node){node.x=(node.x-root.x)*size[0],node.y=(root.y-node.y)*size[1]}:function(node){node.x=(node.x-x0)/(x1-x0)*size[0],node.y=(1-(root.y?node.y/root.y:1))*size[1]}),nodes}var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=!1;return cluster.separation=function(x){return arguments.length?(separation=x,cluster):separation},cluster.size=function(x){return arguments.length?(nodeSize=null==(size=x),cluster):nodeSize?null:size},cluster.nodeSize=function(x){return arguments.length?(nodeSize=null!=(size=x),cluster):nodeSize?size:null},d3_layout_hierarchyRebind(cluster,hierarchy)},d3.layout.treemap=function(){function scale(children,k){for(var child,area,i=-1,n=children.length;++i<n;)area=(child=children[i]).value*(0>k?0:k),child.area=isNaN(area)||0>=area?0:area}function squarify(node){var children=node.children;if(children&&children.length){var child,score,n,rect=pad(node),row=[],remaining=children.slice(),best=1/0,u="slice"===mode?rect.dx:"dice"===mode?rect.dy:"slice-dice"===mode?1&node.depth?rect.dy:rect.dx:Math.min(rect.dx,rect.dy);for(scale(remaining,rect.dx*rect.dy/node.value),row.area=0;(n=remaining.length)>0;)row.push(child=remaining[n-1]),row.area+=child.area,"squarify"!==mode||(score=worst(row,u))<=best?(remaining.pop(),best=score):(row.area-=row.pop().area,position(row,u,rect,!1),u=Math.min(rect.dx,rect.dy),row.length=row.area=0,best=1/0);row.length&&(position(row,u,rect,!0),row.length=row.area=0),children.forEach(squarify)}}function stickify(node){var children=node.children;if(children&&children.length){var child,rect=pad(node),remaining=children.slice(),row=[];for(scale(remaining,rect.dx*rect.dy/node.value),row.area=0;child=remaining.pop();)row.push(child),row.area+=child.area,null!=child.z&&(position(row,child.z?rect.dx:rect.dy,rect,!remaining.length),row.length=row.area=0);children.forEach(stickify)}}function worst(row,u){for(var r,s=row.area,rmax=0,rmin=1/0,i=-1,n=row.length;++i<n;)(r=row[i].area)&&(rmin>r&&(rmin=r),r>rmax&&(rmax=r));return s*=s,u*=u,s?Math.max(u*rmax*ratio/s,s/(u*rmin*ratio)):1/0}function position(row,u,rect,flush){var o,i=-1,n=row.length,x=rect.x,y=rect.y,v=u?round(row.area/u):0;if(u==rect.dx){for((flush||v>rect.dy)&&(v=rect.dy);++i<n;)o=row[i],o.x=x,o.y=y,o.dy=v,x+=o.dx=Math.min(rect.x+rect.dx-x,v?round(o.area/v):0);o.z=!0,o.dx+=rect.x+rect.dx-x,rect.y+=v,rect.dy-=v}else{for((flush||v>rect.dx)&&(v=rect.dx);++i<n;)o=row[i],o.x=x,o.y=y,o.dx=v,y+=o.dy=Math.min(rect.y+rect.dy-y,v?round(o.area/v):0);o.z=!1,o.dy+=rect.y+rect.dy-y,rect.x+=v,rect.dx-=v}}function treemap(d){var nodes=stickies||hierarchy(d),root=nodes[0];return root.x=0,root.y=0,root.dx=size[0],root.dy=size[1],stickies&&hierarchy.revalue(root),scale([root],root.dx*root.dy/root.value),(stickies?stickify:squarify)(root),sticky&&(stickies=nodes),nodes}var stickies,hierarchy=d3.layout.hierarchy(),round=Math.round,size=[1,1],padding=null,pad=d3_layout_treemapPadNull,sticky=!1,mode="squarify",ratio=.5*(1+Math.sqrt(5));return treemap.size=function(x){return arguments.length?(size=x,treemap):size},treemap.padding=function(x){function padFunction(node){var p=x.call(treemap,node,node.depth);return null==p?d3_layout_treemapPadNull(node):d3_layout_treemapPad(node,"number"==typeof p?[p,p,p,p]:p)}function padConstant(node){return d3_layout_treemapPad(node,x)}if(!arguments.length)return padding;var type;return pad=null==(padding=x)?d3_layout_treemapPadNull:"function"==(type=typeof x)?padFunction:"number"===type?(x=[x,x,x,x],padConstant):padConstant,treemap},treemap.round=function(x){return arguments.length?(round=x?Math.round:Number,treemap):round!=Number},treemap.sticky=function(x){return arguments.length?(sticky=x,stickies=null,treemap):sticky},treemap.ratio=function(x){return arguments.length?(ratio=x,treemap):ratio},treemap.mode=function(x){return arguments.length?(mode=x+"",treemap):mode},d3_layout_hierarchyRebind(treemap,hierarchy)},d3.random={normal:function(µ,σ){var n=arguments.length;return 2>n&&(σ=1),1>n&&(µ=0),function(){var x,y,r;do x=2*Math.random()-1,y=2*Math.random()-1,r=x*x+y*y;while(!r||r>1);return µ+σ*x*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var random=d3.random.normal.apply(d3,arguments);return function(){return Math.exp(random())}},bates:function(m){var random=d3.random.irwinHall(m);return function(){return random()/m}},irwinHall:function(m){return function(){for(var s=0,j=0;m>j;j++)s+=Math.random();return s}}},d3.scale={};var d3_scale_niceIdentity={floor:d3_identity,ceil:d3_identity};d3.scale.linear=function(){return d3_scale_linear([0,1],[0,1],d3_interpolate,!1)};var d3_scale_linearFormatSignificant={s:1,g:1,p:1,r:1,e:1};d3.scale.log=function(){return d3_scale_log(d3.scale.linear().domain([0,1]),10,!0,[1,10])};var d3_scale_logFormat=d3.format(".0e"),d3_scale_logNiceNegative={floor:function(x){return-Math.ceil(-x)},ceil:function(x){return-Math.floor(-x)}};d3.scale.pow=function(){return d3_scale_pow(d3.scale.linear(),1,[0,1])},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return d3_scale_ordinal([],{t:"range",a:[[]]})},d3.scale.category10=function(){return d3.scale.ordinal().range(d3_category10)},d3.scale.category20=function(){return d3.scale.ordinal().range(d3_category20)},d3.scale.category20b=function(){return d3.scale.ordinal().range(d3_category20b)},d3.scale.category20c=function(){return d3.scale.ordinal().range(d3_category20c)};var d3_category10=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(d3_rgbString),d3_category20=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(d3_rgbString),d3_category20b=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(d3_rgbString),d3_category20c=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(d3_rgbString);d3.scale.quantile=function(){return d3_scale_quantile([],[])},d3.scale.quantize=function(){return d3_scale_quantize(0,1,[0,1])},d3.scale.threshold=function(){return d3_scale_threshold([.5],[0,1])},d3.scale.identity=function(){return d3_scale_identity([0,1])},d3.svg={},d3.svg.arc=function(){function arc(){var r0=Math.max(0,+innerRadius.apply(this,arguments)),r1=Math.max(0,+outerRadius.apply(this,arguments)),a0=startAngle.apply(this,arguments)-halfπ,a1=endAngle.apply(this,arguments)-halfπ,da=Math.abs(a1-a0),cw=a0>a1?0:1;if(r0>r1&&(rc=r1,r1=r0,r0=rc),da>=τε)return circleSegment(r1,cw)+(r0?circleSegment(r0,1-cw):"")+"Z";var rc,cr,rp,ap,x0,y0,x1,y1,x2,y2,x3,y3,p0=0,p1=0,path=[];if((ap=(+padAngle.apply(this,arguments)||0)/2)&&(rp=padRadius===d3_svg_arcAuto?Math.sqrt(r0*r0+r1*r1):+padRadius.apply(this,arguments),cw||(p1*=-1),r1&&(p1=d3_asin(rp/r1*Math.sin(ap))),r0&&(p0=d3_asin(rp/r0*Math.sin(ap)))),r1){x0=r1*Math.cos(a0+p1),y0=r1*Math.sin(a0+p1),x1=r1*Math.cos(a1-p1),y1=r1*Math.sin(a1-p1);var l1=Math.abs(a1-a0-2*p1)<=π?0:1;if(p1&&d3_svg_arcSweep(x0,y0,x1,y1)===cw^l1){var h1=(a0+a1)/2;x0=r1*Math.cos(h1),y0=r1*Math.sin(h1),x1=y1=null}}else x0=y0=0;if(r0){x2=r0*Math.cos(a1-p0),y2=r0*Math.sin(a1-p0),x3=r0*Math.cos(a0+p0),y3=r0*Math.sin(a0+p0);var l0=Math.abs(a0-a1+2*p0)<=π?0:1;if(p0&&d3_svg_arcSweep(x2,y2,x3,y3)===1-cw^l0){var h0=(a0+a1)/2;x2=r0*Math.cos(h0),y2=r0*Math.sin(h0),x3=y3=null}}else x2=y2=0;if((rc=Math.min(Math.abs(r1-r0)/2,+cornerRadius.apply(this,arguments)))>.001){cr=r1>r0^cw?0:1;var oc=null==x3?[x2,y2]:null==x1?[x0,y0]:d3_geom_polygonIntersect([x0,y0],[x3,y3],[x1,y1],[x2,y2]),ax=x0-oc[0],ay=y0-oc[1],bx=x1-oc[0],by=y1-oc[1],kc=1/Math.sin(Math.acos((ax*bx+ay*by)/(Math.sqrt(ax*ax+ay*ay)*Math.sqrt(bx*bx+by*by)))/2),lc=Math.sqrt(oc[0]*oc[0]+oc[1]*oc[1]);if(null!=x1){var rc1=Math.min(rc,(r1-lc)/(kc+1)),t30=d3_svg_arcCornerTangents(null==x3?[x2,y2]:[x3,y3],[x0,y0],r1,rc1,cw),t12=d3_svg_arcCornerTangents([x1,y1],[x2,y2],r1,rc1,cw);rc===rc1?path.push("M",t30[0],"A",rc1,",",rc1," 0 0,",cr," ",t30[1],"A",r1,",",r1," 0 ",1-cw^d3_svg_arcSweep(t30[1][0],t30[1][1],t12[1][0],t12[1][1]),",",cw," ",t12[1],"A",rc1,",",rc1," 0 0,",cr," ",t12[0]):path.push("M",t30[0],"A",rc1,",",rc1," 0 1,",cr," ",t12[0])}else path.push("M",x0,",",y0);if(null!=x3){var rc0=Math.min(rc,(r0-lc)/(kc-1)),t03=d3_svg_arcCornerTangents([x0,y0],[x3,y3],r0,-rc0,cw),t21=d3_svg_arcCornerTangents([x2,y2],null==x1?[x0,y0]:[x1,y1],r0,-rc0,cw);rc===rc0?path.push("L",t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t21[1],"A",r0,",",r0," 0 ",cw^d3_svg_arcSweep(t21[1][0],t21[1][1],t03[1][0],t03[1][1]),",",1-cw," ",t03[1],"A",rc0,",",rc0," 0 0,",cr," ",t03[0]):path.push("L",t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t03[0])}else path.push("L",x2,",",y2)}else path.push("M",x0,",",y0),null!=x1&&path.push("A",r1,",",r1," 0 ",l1,",",cw," ",x1,",",y1),path.push("L",x2,",",y2),null!=x3&&path.push("A",r0,",",r0," 0 ",l0,",",1-cw," ",x3,",",y3);return path.push("Z"),path.join("")}function circleSegment(r1,cw){return"M0,"+r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+-r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+r1}var innerRadius=d3_svg_arcInnerRadius,outerRadius=d3_svg_arcOuterRadius,cornerRadius=d3_zero,padRadius=d3_svg_arcAuto,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle,padAngle=d3_svg_arcPadAngle;return arc.innerRadius=function(v){return arguments.length?(innerRadius=d3_functor(v),arc):innerRadius},arc.outerRadius=function(v){return arguments.length?(outerRadius=d3_functor(v),arc):outerRadius},arc.cornerRadius=function(v){return arguments.length?(cornerRadius=d3_functor(v),arc):cornerRadius},arc.padRadius=function(v){return arguments.length?(padRadius=v==d3_svg_arcAuto?d3_svg_arcAuto:d3_functor(v),arc):padRadius},arc.startAngle=function(v){return arguments.length?(startAngle=d3_functor(v),arc):startAngle},arc.endAngle=function(v){return arguments.length?(endAngle=d3_functor(v),arc):endAngle},arc.padAngle=function(v){return arguments.length?(padAngle=d3_functor(v),arc):padAngle},arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-halfπ;return[Math.cos(a)*r,Math.sin(a)*r]},arc};var d3_svg_arcAuto="auto";d3.svg.line=function(){return d3_svg_line(d3_identity)};var d3_svg_lineInterpolators=d3.map({linear:d3_svg_lineLinear,"linear-closed":d3_svg_lineLinearClosed,step:d3_svg_lineStep,"step-before":d3_svg_lineStepBefore,"step-after":d3_svg_lineStepAfter,basis:d3_svg_lineBasis,"basis-open":d3_svg_lineBasisOpen,"basis-closed":d3_svg_lineBasisClosed,bundle:d3_svg_lineBundle,cardinal:d3_svg_lineCardinal,"cardinal-open":d3_svg_lineCardinalOpen,"cardinal-closed":d3_svg_lineCardinalClosed,monotone:d3_svg_lineMonotone});d3_svg_lineInterpolators.forEach(function(key,value){value.key=key,value.closed=/-closed$/.test(key)});var d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var line=d3_svg_line(d3_svg_lineRadial);return line.radius=line.x,delete line.x,line.angle=line.y,delete line.y,line},d3_svg_lineStepBefore.reverse=d3_svg_lineStepAfter,d3_svg_lineStepAfter.reverse=d3_svg_lineStepBefore,d3.svg.area=function(){return d3_svg_area(d3_identity)},d3.svg.area.radial=function(){var area=d3_svg_area(d3_svg_lineRadial);return area.radius=area.x,delete area.x,area.innerRadius=area.x0,delete area.x0,area.outerRadius=area.x1,delete area.x1,area.angle=area.y,delete area.y,area.startAngle=area.y0,delete area.y0,area.endAngle=area.y1,delete area.y1,area},d3.svg.chord=function(){function chord(d,i){var s=subgroup(this,source,d,i),t=subgroup(this,target,d,i);return"M"+s.p0+arc(s.r,s.p1,s.a1-s.a0)+(equals(s,t)?curve(s.r,s.p1,s.r,s.p0):curve(s.r,s.p1,t.r,t.p0)+arc(t.r,t.p1,t.a1-t.a0)+curve(t.r,t.p1,s.r,s.p0))+"Z"}function subgroup(self,f,d,i){var subgroup=f.call(self,d,i),r=radius.call(self,subgroup,i),a0=startAngle.call(self,subgroup,i)-halfπ,a1=endAngle.call(self,subgroup,i)-halfπ;
return{r:r,a0:a0,a1:a1,p0:[r*Math.cos(a0),r*Math.sin(a0)],p1:[r*Math.cos(a1),r*Math.sin(a1)]}}function equals(a,b){return a.a0==b.a0&&a.a1==b.a1}function arc(r,p,a){return"A"+r+","+r+" 0 "+ +(a>π)+",1 "+p}function curve(r0,p0,r1,p1){return"Q 0,0 "+p1}var source=d3_source,target=d3_target,radius=d3_svg_chordRadius,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle;return chord.radius=function(v){return arguments.length?(radius=d3_functor(v),chord):radius},chord.source=function(v){return arguments.length?(source=d3_functor(v),chord):source},chord.target=function(v){return arguments.length?(target=d3_functor(v),chord):target},chord.startAngle=function(v){return arguments.length?(startAngle=d3_functor(v),chord):startAngle},chord.endAngle=function(v){return arguments.length?(endAngle=d3_functor(v),chord):endAngle},chord},d3.svg.diagonal=function(){function diagonal(d,i){var p0=source.call(this,d,i),p3=target.call(this,d,i),m=(p0.y+p3.y)/2,p=[p0,{x:p0.x,y:m},{x:p3.x,y:m},p3];return p=p.map(projection),"M"+p[0]+"C"+p[1]+" "+p[2]+" "+p[3]}var source=d3_source,target=d3_target,projection=d3_svg_diagonalProjection;return diagonal.source=function(x){return arguments.length?(source=d3_functor(x),diagonal):source},diagonal.target=function(x){return arguments.length?(target=d3_functor(x),diagonal):target},diagonal.projection=function(x){return arguments.length?(projection=x,diagonal):projection},diagonal},d3.svg.diagonal.radial=function(){var diagonal=d3.svg.diagonal(),projection=d3_svg_diagonalProjection,projection_=diagonal.projection;return diagonal.projection=function(x){return arguments.length?projection_(d3_svg_diagonalRadialProjection(projection=x)):projection},diagonal},d3.svg.symbol=function(){function symbol(d,i){return(d3_svg_symbols.get(type.call(this,d,i))||d3_svg_symbolCircle)(size.call(this,d,i))}var type=d3_svg_symbolType,size=d3_svg_symbolSize;return symbol.type=function(x){return arguments.length?(type=d3_functor(x),symbol):type},symbol.size=function(x){return arguments.length?(size=d3_functor(x),symbol):size},symbol};var d3_svg_symbols=d3.map({circle:d3_svg_symbolCircle,cross:function(size){var r=Math.sqrt(size/5)/2;return"M"+-3*r+","+-r+"H"+-r+"V"+-3*r+"H"+r+"V"+-r+"H"+3*r+"V"+r+"H"+r+"V"+3*r+"H"+-r+"V"+r+"H"+-3*r+"Z"},diamond:function(size){var ry=Math.sqrt(size/(2*d3_svg_symbolTan30)),rx=ry*d3_svg_symbolTan30;return"M0,"+-ry+"L"+rx+",0 0,"+ry+" "+-rx+",0Z"},square:function(size){var r=Math.sqrt(size)/2;return"M"+-r+","+-r+"L"+r+","+-r+" "+r+","+r+" "+-r+","+r+"Z"},"triangle-down":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+ry+"L"+rx+","+-ry+" "+-rx+","+-ry+"Z"},"triangle-up":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+-ry+"L"+rx+","+ry+" "+-rx+","+ry+"Z"}});d3.svg.symbolTypes=d3_svg_symbols.keys();var d3_svg_symbolSqrt3=Math.sqrt(3),d3_svg_symbolTan30=Math.tan(30*d3_radians);d3_selectionPrototype.transition=function(name){for(var subgroup,node,id=d3_transitionInheritId||++d3_transitionId,ns=d3_transitionNamespace(name),subgroups=[],transition=d3_transitionInherit||{time:Date.now(),ease:d3_ease_cubicInOut,delay:0,duration:250},j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&d3_transitionNode(node,i,ns,id,transition),subgroup.push(node)}return d3_transition(subgroups,ns,id)},d3_selectionPrototype.interrupt=function(name){return this.each(null==name?d3_selection_interrupt:d3_selection_interruptNS(d3_transitionNamespace(name)))};var d3_transitionInheritId,d3_transitionInherit,d3_selection_interrupt=d3_selection_interruptNS(d3_transitionNamespace()),d3_transitionPrototype=[],d3_transitionId=0;d3_transitionPrototype.call=d3_selectionPrototype.call,d3_transitionPrototype.empty=d3_selectionPrototype.empty,d3_transitionPrototype.node=d3_selectionPrototype.node,d3_transitionPrototype.size=d3_selectionPrototype.size,d3.transition=function(selection,name){return selection&&selection.transition?d3_transitionInheritId?selection.transition(name):selection:d3.selection().transition(selection)},d3.transition.prototype=d3_transitionPrototype,d3_transitionPrototype.select=function(selector){var subgroup,subnode,node,id=this.id,ns=this.namespace,subgroups=[];selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&(subnode=selector.call(node,node.__data__,i,j))?("__data__"in node&&(subnode.__data__=node.__data__),d3_transitionNode(subnode,i,ns,id,node[ns][id]),subgroup.push(subnode)):subgroup.push(null)}return d3_transition(subgroups,ns,id)},d3_transitionPrototype.selectAll=function(selector){var subgroup,subnodes,node,subnode,transition,id=this.id,ns=this.namespace,subgroups=[];selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;)for(var group=this[j],i=-1,n=group.length;++i<n;)if(node=group[i]){transition=node[ns][id],subnodes=selector.call(node,node.__data__,i,j),subgroups.push(subgroup=[]);for(var k=-1,o=subnodes.length;++k<o;)(subnode=subnodes[k])&&d3_transitionNode(subnode,k,ns,id,transition),subgroup.push(subnode)}return d3_transition(subgroups,ns,id)},d3_transitionPrototype.filter=function(filter){var subgroup,group,node,subgroups=[];"function"!=typeof filter&&(filter=d3_selection_filter(filter));for(var j=0,m=this.length;m>j;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;n>i;i++)(node=group[i])&&filter.call(node,node.__data__,i,j)&&subgroup.push(node)}return d3_transition(subgroups,this.namespace,this.id)},d3_transitionPrototype.tween=function(name,tween){var id=this.id,ns=this.namespace;return arguments.length<2?this.node()[ns][id].tween.get(name):d3_selection_each(this,null==tween?function(node){node[ns][id].tween.remove(name)}:function(node){node[ns][id].tween.set(name,tween)})},d3_transitionPrototype.attr=function(nameNS,value){function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrTween(b){return null==b?attrNull:(b+="",function(){var i,a=this.getAttribute(name);return a!==b&&(i=interpolate(a,b),function(t){this.setAttribute(name,i(t))})})}function attrTweenNS(b){return null==b?attrNullNS:(b+="",function(){var i,a=this.getAttributeNS(name.space,name.local);return a!==b&&(i=interpolate(a,b),function(t){this.setAttributeNS(name.space,name.local,i(t))})})}if(arguments.length<2){for(value in nameNS)this.attr(value,nameNS[value]);return this}var interpolate="transform"==nameNS?d3_interpolateTransform:d3_interpolate,name=d3.ns.qualify(nameNS);return d3_transition_tween(this,"attr."+nameNS,value,name.local?attrTweenNS:attrTween)},d3_transitionPrototype.attrTween=function(nameNS,tween){function attrTween(d,i){var f=tween.call(this,d,i,this.getAttribute(name));return f&&function(t){this.setAttribute(name,f(t))}}function attrTweenNS(d,i){var f=tween.call(this,d,i,this.getAttributeNS(name.space,name.local));return f&&function(t){this.setAttributeNS(name.space,name.local,f(t))}}var name=d3.ns.qualify(nameNS);return this.tween("attr."+nameNS,name.local?attrTweenNS:attrTween)},d3_transitionPrototype.style=function(name,value,priority){function styleNull(){this.style.removeProperty(name)}function styleString(b){return null==b?styleNull:(b+="",function(){var i,a=d3_window(this).getComputedStyle(this,null).getPropertyValue(name);return a!==b&&(i=d3_interpolate(a,b),function(t){this.style.setProperty(name,i(t),priority)})})}var n=arguments.length;if(3>n){if("string"!=typeof name){2>n&&(value="");for(priority in name)this.style(priority,name[priority],value);return this}priority=""}return d3_transition_tween(this,"style."+name,value,styleString)},d3_transitionPrototype.styleTween=function(name,tween,priority){function styleTween(d,i){var f=tween.call(this,d,i,d3_window(this).getComputedStyle(this,null).getPropertyValue(name));return f&&function(t){this.style.setProperty(name,f(t),priority)}}return arguments.length<3&&(priority=""),this.tween("style."+name,styleTween)},d3_transitionPrototype.text=function(value){return d3_transition_tween(this,"text",value,d3_transition_text)},d3_transitionPrototype.remove=function(){var ns=this.namespace;return this.each("end.transition",function(){var p;this[ns].count<2&&(p=this.parentNode)&&p.removeChild(this)})},d3_transitionPrototype.ease=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].ease:("function"!=typeof value&&(value=d3.ease.apply(d3,arguments)),d3_selection_each(this,function(node){node[ns][id].ease=value}))},d3_transitionPrototype.delay=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].delay:d3_selection_each(this,"function"==typeof value?function(node,i,j){node[ns][id].delay=+value.call(node,node.__data__,i,j)}:(value=+value,function(node){node[ns][id].delay=value}))},d3_transitionPrototype.duration=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].duration:d3_selection_each(this,"function"==typeof value?function(node,i,j){node[ns][id].duration=Math.max(1,value.call(node,node.__data__,i,j))}:(value=Math.max(1,value),function(node){node[ns][id].duration=value}))},d3_transitionPrototype.each=function(type,listener){var id=this.id,ns=this.namespace;if(arguments.length<2){var inherit=d3_transitionInherit,inheritId=d3_transitionInheritId;try{d3_transitionInheritId=id,d3_selection_each(this,function(node,i,j){d3_transitionInherit=node[ns][id],type.call(node,node.__data__,i,j)})}finally{d3_transitionInherit=inherit,d3_transitionInheritId=inheritId}}else d3_selection_each(this,function(node){var transition=node[ns][id];(transition.event||(transition.event=d3.dispatch("start","end","interrupt"))).on(type,listener)});return this},d3_transitionPrototype.transition=function(){for(var subgroup,group,node,transition,id0=this.id,id1=++d3_transitionId,ns=this.namespace,subgroups=[],j=0,m=this.length;m>j;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;n>i;i++)(node=group[i])&&(transition=node[ns][id0],d3_transitionNode(node,i,ns,id1,{time:transition.time,ease:transition.ease,delay:transition.delay+transition.duration,duration:transition.duration})),subgroup.push(node)}return d3_transition(subgroups,ns,id1)},d3.svg.axis=function(){function axis(g){g.each(function(){var tickTransform,g=d3.select(this),scale0=this.__chart__||scale,scale1=this.__chart__=scale.copy(),ticks=null==tickValues?scale1.ticks?scale1.ticks.apply(scale1,tickArguments_):scale1.domain():tickValues,tickFormat=null==tickFormat_?scale1.tickFormat?scale1.tickFormat.apply(scale1,tickArguments_):d3_identity:tickFormat_,tick=g.selectAll(".tick").data(ticks,scale1),tickEnter=tick.enter().insert("g",".domain").attr("class","tick").style("opacity",ε),tickExit=d3.transition(tick.exit()).style("opacity",ε).remove(),tickUpdate=d3.transition(tick.order()).style("opacity",1),tickSpacing=Math.max(innerTickSize,0)+tickPadding,range=d3_scaleRange(scale1),path=g.selectAll(".domain").data([0]),pathUpdate=(path.enter().append("path").attr("class","domain"),d3.transition(path));tickEnter.append("line"),tickEnter.append("text");var x1,x2,y1,y2,lineEnter=tickEnter.select("line"),lineUpdate=tickUpdate.select("line"),text=tick.select("text").text(tickFormat),textEnter=tickEnter.select("text"),textUpdate=tickUpdate.select("text"),sign="top"===orient||"left"===orient?-1:1;if("bottom"===orient||"top"===orient?(tickTransform=d3_svg_axisX,x1="x",y1="y",x2="x2",y2="y2",text.attr("dy",0>sign?"0em":".71em").style("text-anchor","middle"),pathUpdate.attr("d","M"+range[0]+","+sign*outerTickSize+"V0H"+range[1]+"V"+sign*outerTickSize)):(tickTransform=d3_svg_axisY,x1="y",y1="x",x2="y2",y2="x2",text.attr("dy",".32em").style("text-anchor",0>sign?"end":"start"),pathUpdate.attr("d","M"+sign*outerTickSize+","+range[0]+"H0V"+range[1]+"H"+sign*outerTickSize)),lineEnter.attr(y2,sign*innerTickSize),textEnter.attr(y1,sign*tickSpacing),lineUpdate.attr(x2,0).attr(y2,sign*innerTickSize),textUpdate.attr(x1,0).attr(y1,sign*tickSpacing),scale1.rangeBand){var x=scale1,dx=x.rangeBand()/2;scale0=scale1=function(d){return x(d)+dx}}else scale0.rangeBand?scale0=scale1:tickExit.call(tickTransform,scale1,scale0);tickEnter.call(tickTransform,scale0,scale1),tickUpdate.call(tickTransform,scale1,scale1)})}var tickFormat_,scale=d3.scale.linear(),orient=d3_svg_axisDefaultOrient,innerTickSize=6,outerTickSize=6,tickPadding=3,tickArguments_=[10],tickValues=null;return axis.scale=function(x){return arguments.length?(scale=x,axis):scale},axis.orient=function(x){return arguments.length?(orient=x in d3_svg_axisOrients?x+"":d3_svg_axisDefaultOrient,axis):orient},axis.ticks=function(){return arguments.length?(tickArguments_=arguments,axis):tickArguments_},axis.tickValues=function(x){return arguments.length?(tickValues=x,axis):tickValues},axis.tickFormat=function(x){return arguments.length?(tickFormat_=x,axis):tickFormat_},axis.tickSize=function(x){var n=arguments.length;return n?(innerTickSize=+x,outerTickSize=+arguments[n-1],axis):innerTickSize},axis.innerTickSize=function(x){return arguments.length?(innerTickSize=+x,axis):innerTickSize},axis.outerTickSize=function(x){return arguments.length?(outerTickSize=+x,axis):outerTickSize},axis.tickPadding=function(x){return arguments.length?(tickPadding=+x,axis):tickPadding},axis.tickSubdivide=function(){return arguments.length&&axis},axis};var d3_svg_axisDefaultOrient="bottom",d3_svg_axisOrients={top:1,right:1,bottom:1,left:1};d3.svg.brush=function(){function brush(g){g.each(function(){var g=d3.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",brushstart).on("touchstart.brush",brushstart),background=g.selectAll(".background").data([0]);background.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var resize=g.selectAll(".resize").data(resizes,d3_identity);resize.exit().remove(),resize.enter().append("g").attr("class",function(d){return"resize "+d}).style("cursor",function(d){return d3_svg_brushCursor[d]}).append("rect").attr("x",function(d){return/[ew]$/.test(d)?-3:null}).attr("y",function(d){return/^[ns]/.test(d)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),resize.style("display",brush.empty()?"none":null);var range,gUpdate=d3.transition(g),backgroundUpdate=d3.transition(background);x&&(range=d3_scaleRange(x),backgroundUpdate.attr("x",range[0]).attr("width",range[1]-range[0]),redrawX(gUpdate)),y&&(range=d3_scaleRange(y),backgroundUpdate.attr("y",range[0]).attr("height",range[1]-range[0]),redrawY(gUpdate)),redraw(gUpdate)})}function redraw(g){g.selectAll(".resize").attr("transform",function(d){return"translate("+xExtent[+/e$/.test(d)]+","+yExtent[+/^s/.test(d)]+")"})}function redrawX(g){g.select(".extent").attr("x",xExtent[0]),g.selectAll(".extent,.n>rect,.s>rect").attr("width",xExtent[1]-xExtent[0])}function redrawY(g){g.select(".extent").attr("y",yExtent[0]),g.selectAll(".extent,.e>rect,.w>rect").attr("height",yExtent[1]-yExtent[0])}function brushstart(){function keydown(){32==d3.event.keyCode&&(dragging||(center=null,origin[0]-=xExtent[1],origin[1]-=yExtent[1],dragging=2),d3_eventPreventDefault())}function keyup(){32==d3.event.keyCode&&2==dragging&&(origin[0]+=xExtent[1],origin[1]+=yExtent[1],dragging=0,d3_eventPreventDefault())}function brushmove(){var point=d3.mouse(target),moved=!1;offset&&(point[0]+=offset[0],point[1]+=offset[1]),dragging||(d3.event.altKey?(center||(center=[(xExtent[0]+xExtent[1])/2,(yExtent[0]+yExtent[1])/2]),origin[0]=xExtent[+(point[0]<center[0])],origin[1]=yExtent[+(point[1]<center[1])]):center=null),resizingX&&move1(point,x,0)&&(redrawX(g),moved=!0),resizingY&&move1(point,y,1)&&(redrawY(g),moved=!0),moved&&(redraw(g),event_({type:"brush",mode:dragging?"move":"resize"}))}function move1(point,scale,i){var min,max,range=d3_scaleRange(scale),r0=range[0],r1=range[1],position=origin[i],extent=i?yExtent:xExtent,size=extent[1]-extent[0];return dragging&&(r0-=position,r1-=size+position),min=(i?yClamp:xClamp)?Math.max(r0,Math.min(r1,point[i])):point[i],dragging?max=(min+=position)+size:(center&&(position=Math.max(r0,Math.min(r1,2*center[i]-min))),min>position?(max=min,min=position):max=position),extent[0]!=min||extent[1]!=max?(i?yExtentDomain=null:xExtentDomain=null,extent[0]=min,extent[1]=max,!0):void 0}function brushend(){brushmove(),g.style("pointer-events","all").selectAll(".resize").style("display",brush.empty()?"none":null),d3.select("body").style("cursor",null),w.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),dragRestore(),event_({type:"brushend"})}var center,offset,target=this,eventTarget=d3.select(d3.event.target),event_=event.of(target,arguments),g=d3.select(target),resizing=eventTarget.datum(),resizingX=!/^(n|s)$/.test(resizing)&&x,resizingY=!/^(e|w)$/.test(resizing)&&y,dragging=eventTarget.classed("extent"),dragRestore=d3_event_dragSuppress(target),origin=d3.mouse(target),w=d3.select(d3_window(target)).on("keydown.brush",keydown).on("keyup.brush",keyup);if(d3.event.changedTouches?w.on("touchmove.brush",brushmove).on("touchend.brush",brushend):w.on("mousemove.brush",brushmove).on("mouseup.brush",brushend),g.interrupt().selectAll("*").interrupt(),dragging)origin[0]=xExtent[0]-origin[0],origin[1]=yExtent[0]-origin[1];else if(resizing){var ex=+/w$/.test(resizing),ey=+/^n/.test(resizing);offset=[xExtent[1-ex]-origin[0],yExtent[1-ey]-origin[1]],origin[0]=xExtent[ex],origin[1]=yExtent[ey]}else d3.event.altKey&&(center=origin.slice());g.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",eventTarget.style("cursor")),event_({type:"brushstart"}),brushmove()}var xExtentDomain,yExtentDomain,event=d3_eventDispatch(brush,"brushstart","brush","brushend"),x=null,y=null,xExtent=[0,0],yExtent=[0,0],xClamp=!0,yClamp=!0,resizes=d3_svg_brushResizes[0];return brush.event=function(g){g.each(function(){var event_=event.of(this,arguments),extent1={x:xExtent,y:yExtent,i:xExtentDomain,j:yExtentDomain},extent0=this.__chart__||extent1;this.__chart__=extent1,d3_transitionInheritId?d3.select(this).transition().each("start.brush",function(){xExtentDomain=extent0.i,yExtentDomain=extent0.j,xExtent=extent0.x,yExtent=extent0.y,event_({type:"brushstart"})}).tween("brush:brush",function(){var xi=d3_interpolateArray(xExtent,extent1.x),yi=d3_interpolateArray(yExtent,extent1.y);return xExtentDomain=yExtentDomain=null,function(t){xExtent=extent1.x=xi(t),yExtent=extent1.y=yi(t),event_({type:"brush",mode:"resize"})}}).each("end.brush",function(){xExtentDomain=extent1.i,yExtentDomain=extent1.j,event_({type:"brush",mode:"resize"}),event_({type:"brushend"})}):(event_({type:"brushstart"}),event_({type:"brush",mode:"resize"}),event_({type:"brushend"}))})},brush.x=function(z){return arguments.length?(x=z,resizes=d3_svg_brushResizes[!x<<1|!y],brush):x},brush.y=function(z){return arguments.length?(y=z,resizes=d3_svg_brushResizes[!x<<1|!y],brush):y},brush.clamp=function(z){return arguments.length?(x&&y?(xClamp=!!z[0],yClamp=!!z[1]):x?xClamp=!!z:y&&(yClamp=!!z),brush):x&&y?[xClamp,yClamp]:x?xClamp:y?yClamp:null},brush.extent=function(z){var x0,x1,y0,y1,t;return arguments.length?(x&&(x0=z[0],x1=z[1],y&&(x0=x0[0],x1=x1[0]),xExtentDomain=[x0,x1],x.invert&&(x0=x(x0),x1=x(x1)),x0>x1&&(t=x0,x0=x1,x1=t),(x0!=xExtent[0]||x1!=xExtent[1])&&(xExtent=[x0,x1])),y&&(y0=z[0],y1=z[1],x&&(y0=y0[1],y1=y1[1]),yExtentDomain=[y0,y1],y.invert&&(y0=y(y0),y1=y(y1)),y0>y1&&(t=y0,y0=y1,y1=t),(y0!=yExtent[0]||y1!=yExtent[1])&&(yExtent=[y0,y1])),brush):(x&&(xExtentDomain?(x0=xExtentDomain[0],x1=xExtentDomain[1]):(x0=xExtent[0],x1=xExtent[1],x.invert&&(x0=x.invert(x0),x1=x.invert(x1)),x0>x1&&(t=x0,x0=x1,x1=t))),y&&(yExtentDomain?(y0=yExtentDomain[0],y1=yExtentDomain[1]):(y0=yExtent[0],y1=yExtent[1],y.invert&&(y0=y.invert(y0),y1=y.invert(y1)),y0>y1&&(t=y0,y0=y1,y1=t))),x&&y?[[x0,y0],[x1,y1]]:x?[x0,x1]:y&&[y0,y1])},brush.clear=function(){return brush.empty()||(xExtent=[0,0],yExtent=[0,0],xExtentDomain=yExtentDomain=null),brush},brush.empty=function(){return!!x&&xExtent[0]==xExtent[1]||!!y&&yExtent[0]==yExtent[1]},d3.rebind(brush,event,"on")};var d3_svg_brushCursor={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},d3_svg_brushResizes=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],d3_time_format=d3_time.format=d3_locale_enUS.timeFormat,d3_time_formatUtc=d3_time_format.utc,d3_time_formatIso=d3_time_formatUtc("%Y-%m-%dT%H:%M:%S.%LZ");d3_time_format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?d3_time_formatIsoNative:d3_time_formatIso,d3_time_formatIsoNative.parse=function(string){var date=new Date(string);return isNaN(date)?null:date},d3_time_formatIsoNative.toString=d3_time_formatIso.toString,d3_time.second=d3_time_interval(function(date){return new d3_date(1e3*Math.floor(date/1e3))},function(date,offset){date.setTime(date.getTime()+1e3*Math.floor(offset))},function(date){return date.getSeconds()}),d3_time.seconds=d3_time.second.range,d3_time.seconds.utc=d3_time.second.utc.range,d3_time.minute=d3_time_interval(function(date){return new d3_date(6e4*Math.floor(date/6e4))},function(date,offset){date.setTime(date.getTime()+6e4*Math.floor(offset))},function(date){return date.getMinutes()}),d3_time.minutes=d3_time.minute.range,d3_time.minutes.utc=d3_time.minute.utc.range,d3_time.hour=d3_time_interval(function(date){var timezone=date.getTimezoneOffset()/60;return new d3_date(36e5*(Math.floor(date/36e5-timezone)+timezone))},function(date,offset){date.setTime(date.getTime()+36e5*Math.floor(offset))},function(date){return date.getHours()}),d3_time.hours=d3_time.hour.range,d3_time.hours.utc=d3_time.hour.utc.range,d3_time.month=d3_time_interval(function(date){return date=d3_time.day(date),date.setDate(1),date},function(date,offset){date.setMonth(date.getMonth()+offset)},function(date){return date.getMonth()}),d3_time.months=d3_time.month.range,d3_time.months.utc=d3_time.month.utc.range;var d3_time_scaleSteps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],d3_time_scaleLocalMethods=[[d3_time.second,1],[d3_time.second,5],[d3_time.second,15],[d3_time.second,30],[d3_time.minute,1],[d3_time.minute,5],[d3_time.minute,15],[d3_time.minute,30],[d3_time.hour,1],[d3_time.hour,3],[d3_time.hour,6],[d3_time.hour,12],[d3_time.day,1],[d3_time.day,2],[d3_time.week,1],[d3_time.month,1],[d3_time.month,3],[d3_time.year,1]],d3_time_scaleLocalFormat=d3_time_format.multi([[".%L",function(d){return d.getMilliseconds()}],[":%S",function(d){return d.getSeconds()}],["%I:%M",function(d){return d.getMinutes()}],["%I %p",function(d){return d.getHours()}],["%a %d",function(d){return d.getDay()&&1!=d.getDate()}],["%b %d",function(d){return 1!=d.getDate()}],["%B",function(d){return d.getMonth()}],["%Y",d3_true]]),d3_time_scaleMilliseconds={range:function(start,stop,step){return d3.range(Math.ceil(start/step)*step,+stop,step).map(d3_time_scaleDate)},floor:d3_identity,ceil:d3_identity};d3_time_scaleLocalMethods.year=d3_time.year,d3_time.scale=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleLocalMethods,d3_time_scaleLocalFormat)};var d3_time_scaleUtcMethods=d3_time_scaleLocalMethods.map(function(m){return[m[0].utc,m[1]]}),d3_time_scaleUtcFormat=d3_time_formatUtc.multi([[".%L",function(d){return d.getUTCMilliseconds()}],[":%S",function(d){return d.getUTCSeconds()}],["%I:%M",function(d){return d.getUTCMinutes()}],["%I %p",function(d){return d.getUTCHours()}],["%a %d",function(d){return d.getUTCDay()&&1!=d.getUTCDate()}],["%b %d",function(d){return 1!=d.getUTCDate()}],["%B",function(d){return d.getUTCMonth()}],["%Y",d3_true]]);d3_time_scaleUtcMethods.year=d3_time.year.utc,d3_time.scale.utc=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleUtcMethods,d3_time_scaleUtcFormat)},d3.text=d3_xhrType(function(request){return request.responseText}),d3.json=function(url,callback){return d3_xhr(url,"application/json",d3_json,callback)},d3.html=function(url,callback){return d3_xhr(url,"text/html",d3_html,callback)},d3.xml=d3_xhrType(function(request){return request.responseXML}),"function"==typeof define&&define.amd?define("d3",d3):"object"==typeof module&&module.exports&&(module.exports=d3),this.d3=d3}(),define("app/destinations/countriesmap",["angular","isoCountries","ionic","d3"],function(angular,isoCountries){return angular.module("mts.countriesmap",["ionic"]).service("mtsCountriesMapDelegate",ionic.DelegateService(["setSelectable","setMapCssClass","selectCountries","toggleCountries","deselectCountries","clearMap","onCountrySelect"])).directive("mtsCountriesMap",function(mtsCountriesMapDelegate){return{restrict:"A",link:function($scope,$element,$attr){function zoomed(){container.shouldIgnoreEvents&&d3.event&&d3.event.sourceEvent&&"mousemove"==d3.event.sourceEvent.type||(d3.event&&d3.event.sourceEvent&&angular.isFunction(d3.event.sourceEvent.stopPropagation)&&(d3.event.returnValue=!1,isIE||isIOS||(d3.event.sourceEvent.stopPropagation(),angular.isFunction(d3.event.sourceEvent.stopImmediatePropagation)&&d3.event.sourceEvent.stopImmediatePropagation())),container.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")"))}$scope.element=angular.element($element),$scope.svgElement=$scope.element.is("svg")?$scope.element:$scope.element.find("svg"),$scope.pathElements=$scope.element.find(".datamaps-subunit");var currentCssClass=null,clickFunction=($scope.svgElement.find("#hoverXlink"),null),width=670,height=270,zoom=d3.behavior.zoom().scaleExtent([1,10]).on("zoom",zoomed),svg=d3.select($scope.svgElement.get(0)).call(zoom),outerHeight=$scope.svgElement.outerHeight();outerHeight&&outerHeight!=height&&(width=Math.round(width*outerHeight/height),height=outerHeight);var container=svg.select(".datamaps-subunits"),translateArray=null;if(window.innerWidth>width)translateArray=[(width-window.innerWidth)/2,0],zoom.translate(translateArray),container.attr("transform","translate("+translateArray+")");else{var scaledHeight=window.innerWidth/width*height;height>scaledHeight&&(translateArray=[0,(height-scaledHeight)/1.8],zoom.translate(translateArray),container.attr("transform","translate("+translateArray+")"))}var isIE=window.navigator.userAgent.indexOf("MSIE ")>0||window.navigator.userAgent.indexOf("Trident/")>0||window.navigator.userAgent.indexOf("Edge/")>0,nua=window.navigator.userAgent,isNativeAndroid=nua.indexOf("Mozilla/5.0")>-1&&nua.indexOf("Android ")>-1&&nua.indexOf("AppleWebKit")>-1&&-1===nua.indexOf("Chrome"),isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;(isIE||isNativeAndroid)&&($scope.svgElement.mousedown(function(){container.shouldIgnoreEvents=!1}),$scope.svgElement.mouseup(function(){container.shouldIgnoreEvents=!0,angular.isFunction(d3.forceEndZoom)&&d3.forceEndZoom()}),$scope.svgElement.mouseleave(function(){container.shouldIgnoreEvents=!0,angular.isFunction(d3.forceEndZoom)&&d3.forceEndZoom()})),$scope.pathElements.attr("data-prevent-scroll","true"),$scope.pathElements.click(function(event){var currentCountry=angular.element(event.currentTarget);currentCountry.attr("id")&&currentCountry.attr("class")&&-1!==currentCountry.attr("class").indexOf("selectable")&&($scope.pathElements.each(function(ind,el){var element=angular.element(el);element.attr("class").indexOf("selected")>-1&&(element.attr("class",element.attr("class").replace("selected","").replace("  ","")),element.isSelected=!1)}),currentCountry.attr("class",currentCountry.attr("class")+" selected"),currentCountry.isSelected=!0,angular.isFunction(clickFunction)&&clickFunction(currentCountry.attr("id")),event.stopPropagation(),angular.isFunction(d3.forceEndZoom)&&d3.forceEndZoom())}),angular.forEach(isoCountries.countries,function(countryData){var countryElement=$scope.pathElements.filter("."+countryData.alpha3);countryElement.length&&(countryElement.attr("id",countryData.alpha2),countryElement.attr("class",countryElement.attr("class")+" selectable"),countryElement.attr("original-class",countryElement.attr("class")),countryElement.html("<title>"+countryData.name+"</title"))});var delegateHandle={setSelectable:function(selectable){$scope.element[selectable?"addClass":"removeClass"]("selectable")},setMapCssClass:function(cssClass){currentCssClass&&$scope.element.removeClass(currentCssClass),$scope.element.addClass(cssClass),currentCssClass=cssClass},selectCountries:function(countryList,className){angular.isArray(countryList)||(countryList=[countryList]),countryList.length&&$scope.pathElements.filter("#"+countryList.join(",#")).each(function(ind,el){var elem=angular.element(el);-1===elem.attr("class").indexOf(className)&&elem.attr("class",elem.attr("class")+" "+className)})},toggleCountries:function(countryList,className){angular.isArray(countryList)||(countryList=[countryList]),countryList.length&&$scope.pathElements.filter("#"+countryList.join(",#")).each(function(ind,el){var elem=angular.element(el);-1===elem.attr("class").indexOf(className)?elem.attr("class",elem.attr("class")+" "+className):elem.attr("class",elem.attr("class").replace(className,"").replace("  "," "))})},deselectCountries:function(countryList,className){angular.isArray(countryList)||(countryList=[countryList]),countryList.length&&$scope.pathElements.filter("#"+countryList.join(",#")).each(function(ind,el){var elem=angular.element(el);-1!==elem.attr("class").indexOf(className)&&elem.attr("class",elem.attr("class").replace(className,"").replace("  "," "))})},clearMap:function(){$scope.pathElements.each(function(index,elem){var countryElem=angular.element(elem);countryElem.attr("class",countryElem.attr("original-class"))})},onCountrySelect:function(callback){return clickFunction=callback,function(){clickFunction==callback&&(clickFunction=null,callback=null)}}},deregisterInstance=null;$attr.mtsCountriesMap&&(deregisterInstance=mtsCountriesMapDelegate._registerInstance(delegateHandle,$attr.mtsCountriesMap)),$scope.$on("$destroy",function(){angular.isFunction(deregisterInstance)&&(deregisterInstance(),deregisterInstance=null),$scope.pathElements=null,$scope.element=null})}}})}),define("app/destinations/destinations",["angular","isoCountries","coreapi","components/loading/loading","app/destinations/visited/visited","app/destinations/bucketlist/bucketlist","app/destinations/countriesmap","youOne/popup/about/about"],function(angular,isoCountries){return angular.module("mts.destinations",["ui.router","ionic-material","tq.coreapi","tq.loading","mts.destinations.visited","mts.destinations.bucketlist","mts.countriesmap","ttc.popup.about"]).config(function($stateProvider){var isIE=window.navigator.userAgent.indexOf("MSIE ")>0||window.navigator.userAgent.indexOf("Trident/")>0||window.navigator.userAgent.indexOf("Edge/")>0,nua=window.navigator.userAgent;nua.indexOf("Mozilla/5.0")>-1&&nua.indexOf("Android ")>-1&&nua.indexOf("AppleWebKit")>-1&&-1===nua.indexOf("Chrome");$stateProvider.state("destinations",{abstract:!0,url:"/destinations",templateUrl:isIE?"apps/mts/destinations/ielayout.tpl.html":"apps/mts/destinations/layout.tpl.html",controller:"MtsDestinationsCtrl",cache:!1,resolve:{visitedCountries:function(mtsDestinations){return mtsDestinations.getVisitedCountriesList()},wishlist:function(mtsDestinations){return mtsDestinations.getWishlist()},visitedlist:function(mtsDestinations){return mtsDestinations.getVisited()}},data:{showLoading:!0,headerView:"apps/mts/destinations/map.tpl.html",parentFunctionality:"destinations",tabs:[{name:"Overview",state:"horizon.overview"},{name:"Destinations",state:"destinations.visited",functionality:"destinations.visited"
}]}})}).service("mtsDestinations",function($q,ttcTripBrowser,tqCoreConnector,$ionicPopup){var self=this;this.getVisitedCountriesList=function(){var visitedDefer=$q.defer();return ttcTripBrowser.getPastAndRunningPassengers(!0).then(function(listOfPassengers){if(angular.isArray(listOfPassengers)&&listOfPassengers.length>0){var tourProductIds=_.unique(_.pluck(listOfPassengers,"rawRecord.Tour_Product__c"));_.isArray(tourProductIds)||visitedDefer.resolve([]),tqCoreConnector.storage.find({objectApiName:"Tour_Product__c",where:{Id:{$in:tourProductIds}}}).then(function(tourProducts){var countriesList=[];angular.isArray(tourProducts)&&angular.forEach(tourProducts,function(tourProduct){var tourCountries=tourProduct.rawRecord.Countries__c;angular.isString(tourCountries)&&""!==tourCountries&&(countriesList=_.union(countriesList,tourCountries.split(",")))}),visitedDefer.resolve(self.getCountriesByCodes(countriesList))},function(error){visitedDefer.reject(error)})}else visitedDefer.resolve([])},function(error){visitedDefer.reject(error)}),visitedDefer.promise},this.getWishlist=function(){return tqCoreConnector.storage.find({objectApiName:"Destination__c",fields:["Id","CountryCode__c","Type__c"],where:{CreatedById:{$eq:tqCoreConnector.user.getId()},IsDeleted:{$eq:!1},Type__c:{$eq:"Wishlist"}}})},this.getVisited=function(){return tqCoreConnector.storage.find({objectApiName:"Destination__c",fields:["Id","CountryCode__c","Type__c"],where:{CreatedById:{$eq:tqCoreConnector.user.getId()},IsDeleted:{$eq:!1},Type__c:{$eq:"Visited"}}})},this.addCountryToDestinations=function(countryCode,type){var destinationObject=tqCoreConnector.record.getTrackedObjectRecordInstance("Destination__c");return destinationObject.rawRecord.CountryCode__c=countryCode,destinationObject.rawRecord.Type__c=type,tqCoreConnector.storage.upsert(destinationObject).then(function(response){return response&&angular.isArray(response.body)&&(destinationObject.rawRecord.Id=response.body[0].responseId),destinationObject})},this.addCountryToWishlist=function(countryCode){return this.addCountryToDestinations(countryCode,"Wishlist")},this.addCountryToVisited=function(countryCode){return this.addCountryToDestinations(countryCode,"Visited")},this.getCountriesByCodes=function(countriesList,include3Chars){var countryList=[];return angular.forEach(countriesList,function(countryCode){var countryData=isoCountries.findCountryByCode(countryCode);countryData&&countryList.push(angular.copy(countryData))}),countryList},this.getCountryContinent=function(countryData){return"Americas"===countryData.region?"South America"===countryData.subregion?"South America":"North America":countryData.region}}).controller("MtsDestinationsCtrl",function($scope,tqCoreConnector,visitedCountries,mtsDestinations,wishlist,visitedlist,ttcPopupAbout){$scope.shouldUseOverflowScroll=!0,$scope.infoDetails={text:"Total number of countries visited",actionText:"100%",onClick:function(){},countrySelectEnabled:!1,onCountrySelect:function(){}},mtsDestinations.infoDetails=$scope.infoDetails,this.showAboutPopup=function(){ttcPopupAbout.show({title:"About Destinations",templateUrl:"apps/mts/destinations/aboutDestinationsPopupContent.tpl.html",moduleName:"destinations"})};var isStringRelatedToCountry=function(textString,countryData,strongMatch){return textString.toUpperCase()===countryData.alpha2||textString.toUpperCase()===countryData.alpha3||!strongMatch&&0===countryData.name.toLowerCase().indexOf(textString.toLowerCase())||textString.length>3&&countryData.name.toLowerCase().indexOf(textString.toLowerCase())>-1},toggleCountrySelection=function(selectEnabled){$scope.infoDetails.countryText=null,$scope.popupCountries=[],$scope.countrySelectEnabled=selectEnabled},maxPopupCountries=5;$scope.popupCountries=[],$scope.actionPress=function(){$scope.infoDetails.countrySelectEnabled&&angular.isFunction($scope.infoDetails.onCountrySelect)?$scope.enableCountrySelection():angular.isFunction($scope.infoDetails.onClick)&&$scope.infoDetails.onClick()},$scope.enableCountrySelection=function(){toggleCountrySelection(!0)},$scope.renderPopupHelp=function($event){if($scope.popupCountries=[],$scope.infoDetails.countryText&&""!==$scope.infoDetails.countryText)for(var code in isoCountries.countries){var countryData=isoCountries.countries[code];if(isStringRelatedToCountry($scope.infoDetails.countryText,countryData)&&($scope.popupCountries.push(countryData),$scope.popupCountries.length>=maxPopupCountries))break}},$scope.selectCountryFromList=function(countryData){angular.isFunction($scope.infoDetails.onCountrySelect)&&$scope.infoDetails.onCountrySelect(countryData.alpha2),toggleCountrySelection(!1)},$scope.selectCountry=function(){if(!$scope.infoDetails.countryText||""===$scope.infoDetails.countryText)return void $ionicPopup.alert({title:"Country name is missing",template:"Please type country you are looking for",cssClass:"you-one-popup"});for(var code in isoCountries.countries){var countryData=isoCountries.countries[code];if(isStringRelatedToCountry($scope.infoDetails.countryText,countryData,!0))return angular.isFunction($scope.infoDetails.onCountrySelect)&&$scope.infoDetails.onCountrySelect(countryData.alpha2),void toggleCountrySelection(!1)}$ionicPopup.alert({title:"Country you are looking for is not found",template:"Please double check requested country name",cssClass:"you-one-popup"})},$scope.elementKeyup=function($event){13===$event.keyCode&&$scope.selectCountry()},$scope.infoActionClick=function(){angular.isFunction($scope.infoDetails.onClick)&&$scope.infoDetails.onClick()},this.showAboutPopup()})}),define("app/translations/translations",["angular","angularTranslate","angularTranslateLoaderStaticFiles","youOne/translations/translations","components/translations/translations"],function(angular){"use strict";return angular.module("mts.translations",["yo.translations","tq.translations","pascalprecht.translate","tq.settings","ionic"]).constant("MTS_TRANSLATION_FILES",[window.getSfdcStaticResourcePathSafe().concat("src/apps/mts/translations/mts.en")]).config(function($translateProvider,ACN_NG_TRANSLATION_FILES,YOU_ONE_TRANSLATION_FILES,MTS_TRANSLATION_FILES){var currentBrandName=window.themeId,translationFileName="mts.".concat(currentBrandName).concat(".en"),translationFilePrefix="src/apps/mts/themes/".concat(currentBrandName).concat("/translations/"),currentBrandsTranslationFiles=[window.getSfdcStaticResourcePathSafe().concat(translationFilePrefix).concat(translationFileName)],languageStack=[];languageStack=languageStack.concat(ACN_NG_TRANSLATION_FILES),languageStack=languageStack.concat(YOU_ONE_TRANSLATION_FILES),languageStack=languageStack.concat(MTS_TRANSLATION_FILES),languageStack=languageStack.concat(currentBrandsTranslationFiles);var topLevelLanguageInStack=languageStack.pop();$translateProvider.fallbackLanguage(languageStack),$translateProvider.preferredLanguage(topLevelLanguageInStack)})}),define("app/layout/sidemenu/triplist/triplist",["angular","coreapi","components/loading/loading","youOne/tripbrowser/tripbrowser","acnCore/rest/provider"],function(angular){return angular.module("mts.triplist",["ttc.tripbrowser","ttc.terms","ttc.find-passenger-service","ionic-material","tq.coreapi","tq.loading","ttc.selectedtrip","mts.trip-list-helper","mts.autoFocusDirective"]).controller("TripListCtrl",function($q,$scope,$state,ttcTripBrowser,$ionicSideMenuDelegate,ttcTermsService,$timeout,FindPassengerRecordsService,tqCoreConnector,ttcSelectedTrip,$ionicLoading,$window,acnPopup,TripListHelperService){var self=this;$scope.isAddAnotherBooking=false;$scope.passengerData={firstName:"",lastName:"",bookingRef:""};$scope.paxRecord={paxNumber:""};$scope.paxNumberHelp=false;$scope.noBookingFoundMessage=false;$scope.multiplePassengersFound=false;$scope.showBookingReferenceHelp=false;$scope.oldPastPaxRecord=null;$scope.oldCurrentPaxRecord=null;console.log("tqCoreConnector.user.userInfo",tqCoreConnector.user.userInfo);var userAccountId=function(){return tqCoreConnector.user.userInfo.getUserFieldValue("AccountId")};this.init=function(){$scope.$on("tqBootstrapFinished",self.fetch)},this.fetch=function(){return $q.all([self.fetchCurrentPassengers(),self.fetchPastPassengers()]).then(self.postFetchInit())},this.postFetchInit=function(){$timeout(function(){$scope.toggleAddMyBooking=!ttcTermsService.termsAndConditionsAreApproved()},1500)},this.fetchCurrentPassengers=function(){$scope.passengerListIndex=0;return ttcTripBrowser.getCurrentPassengers().then(function(currentPassengerData){if(!$scope.oldCurrentPaxRecord||$scope.oldCurrentPaxRecord.length<1){if(currentPassengerData.length>0){currentPassengerData[0].rawRecord.isNewPassenger=true}$scope.currentPassengers=currentPassengerData;$scope.oldCurrentPaxRecord=angular.copy($scope.currentPassengers)}else{$scope.currentPassengers=TripListHelperService.buildPassengersRecord($scope.oldCurrentPaxRecord,currentPassengerData);$scope.oldCurrentPaxRecord=angular.copy($scope.currentPassengers)}})},this.fetchPastPassengers=function(){return $timeout(function(){ttcTripBrowser.getPastPassengers().then(function(pastPassengersData){if(!$scope.oldPastPaxRecord){if($scope.currentPassengers.length==0&&pastPassengersData.length>0){pastPassengersData[0].rawRecord.isNewPassenger=true}$scope.pastPassengers=pastPassengersData;$scope.oldPastPaxRecord=angular.copy($scope.pastPassengers)}else{$scope.pastPassengers=TripListHelperService.buildPassengersRecord($scope.oldPastPaxRecord,pastPassengersData);$scope.oldPastPaxRecord=angular.copy($scope.pastPassengers)}})},1500)},this.setSelectedPassenger=function(thePassenger){$scope.selectedPassenger=thePassenger},this.goToPassengerTripPage=function(thePassenger){$scope.toggleAddMyBooking=false;$state.go("trip.overview",{id:thePassenger.rawRecord.Id})},$scope.onSelectedPassengerImageClicked=function(thePassenger){self.goToPassengerTripPage(thePassenger),$ionicSideMenuDelegate.isOpenRight()&&$ionicSideMenuDelegate.toggleRight()},$scope.onPassengerClicked=function(thePassenger,index){var passengerIndex=0;for(passengerIndex;passengerIndex<$scope.currentPassengers.length;passengerIndex+=1){$scope.currentPassengers[passengerIndex].rawRecord.isNewPassenger=index===passengerIndex}self.setSelectedPassenger(thePassenger)},$scope.onPastPassengerClicked=function(thePassenger,index){var passengerIndex=0;for(passengerIndex;passengerIndex<$scope.pastPassengers.length;passengerIndex+=1){$scope.pastPassengers[passengerIndex].rawRecord.isNewPassenger=index===passengerIndex}self.setSelectedPassenger(thePassenger)},$scope.displayDate=function(thePassenger){var startDate=new Date(thePassenger.rawRecord.Passenger_Start_Date__c).getTime(),endDate=new Date(thePassenger.rawRecord.Passenger_End_Date__c).getTime(),now=(new Date).getTime();return now>startDate?endDate>now?"":moment(endDate).fromNow():moment(startDate).fromNow()},$scope.toggleAddMyBookingSection=function(){$scope.passengerData={};$scope.toggleAddMyBooking=!$scope.toggleAddMyBooking;$scope.multiplePassengersFound=false;$scope.showBookingReferenceHelp=false;$scope.closeAddAnotherBooking();$scope.paxNumberHelp=false},$scope.displayBookingRefHelp=function(){$scope.showBookingReferenceHelp=!$scope.showBookingReferenceHelp},$scope.addBookingToMyTrips=function(){var passengerToUpdate=[{accountId:userAccountId(),passengerId:""}];var passengerData={firstName:$scope.passengerData.firstName,lastName:$scope.passengerData.lastName,bookingRef:$scope.passengerData.bookingRef,accountId:userAccountId(),bookingRegion:$window.themeId.toUpperCase()};var updatePassengerRecord=function(updateRequest){FindPassengerRecordsService.updatePassengerRecord(updateRequest).then(function(){self.fetchCurrentPassengers();self.fetchPastPassengers();$scope.isAddAnotherBooking=false;$scope.multiplePassengersFound=false;$scope.passengerData={}})};$ionicLoading.show();if($scope.multiplePassengersFound){var updateRequest=TripListHelperService.buildUpdatePassengerRequest($scope.paxRecord.paxNumber,userAccountId());updatePassengerRecord(updateRequest)}else{console.log("passengerData",passengerData);FindPassengerRecordsService.findPassengerRecord(passengerData).then(function(passengerRecord){if("000"===passengerRecord.errorCode&&"Success"===passengerRecord.status){if(passengerRecord.passList.length>1){$scope.passengerNumberList=TripListHelperService.getPassengerNumber(passengerRecord.passList);$scope.multiplePassengersFound=$scope.passengerNumberList.length>0}else{passengerToUpdate[0].passengerId=passengerRecord.passList[0].Id;updatePassengerRecord(passengerToUpdate)}}else if("Failure"===passengerRecord.status&&"000"!==passengerRecord.errorCode){$scope.multiplePassengersFound=false;$scope.noBookingFoundMessage=true;$scope.isAddAnotherBooking=false}})}$ionicLoading.hide()},$scope.showAddAnotherBookingDialog=function(){$scope.isAddAnotherBooking=true;$scope.multiplePassengersFound=false},$scope.closeAddAnotherBooking=function(){$scope.passengerData={};$scope.paxNumberHelp=false;$scope.isAddAnotherBooking=false;$scope.multiplePassengersFound=false;$scope.noBookingFoundMessage=false},$scope.showPassengerNumberHelp=function(){$scope.paxNumberHelp=!$scope.paxNumberHelp},$scope.backToMTSTripSearch=function(){$scope.passengerData={};$scope.noBookingFoundMessage=false;$scope.isAddAnotherBooking=true},$scope.getTourProductName=function(tourProductName){var productName="";tourProductName.length>37?productName=tourProductName.substring(0,37)+". . .":productName=tourProductName;return productName},this.init()})}),define("app/layout/sidemenu/triplist/autofocusdirective",["angular"],function(angular){return angular.module("mts.autoFocusDirective",[]).directive("autoFocus",["$timeout",function($timeout){return{restrict:"A",link:function($scope,$element){$timeout(function(){$element[0].focus()})}}}])}),define("app/layout/sidemenu/triplist/trip-list-helper",["angular","coreapi","app/layout/sidemenu/triplist/triplist","app/layout/sidemenu/triplist/autofocusdirective"],function(angular){return angular.module("mts.trip-list-helper",["ttc.find-passenger-service","tq.coreapi"]).factory("TripListHelperService",["$q","FindPassengerRecordsService","tqCoreConnector",function($q,FindPassengerRecordsService,tqCoreConnector){var PassengerDataModel=function(){this.paxList=[];this.passengersRecords=[]};var passengerDataModel=new PassengerDataModel;var getPassengerNumber=function(passList){passengerDataModel.paxList=[];passengerDataModel.passengersRecords=[];passengerDataModel.paxList=passList;angular.forEach(passList,function(passengerRecord){var paxNum=passengerRecord.Passenger_External_Id__c;var paxNumber=paxNum.substring(34,37);if(passengerDataModel.passengersRecords.indexOf(paxNumber)==-1){passengerDataModel.passengersRecords.push(paxNumber)}});return passengerDataModel.passengersRecords};var buildUpdatePassengerRequest=function(passengerNumber,accountId){var updateRequest=[],requestData,paxNum;angular.forEach(passengerDataModel.paxList,function(passenger){requestData={accountId:accountId,passengerId:""};paxNum=passenger.Passenger_External_Id__c.substring(34,37);if(paxNum===passengerNumber){requestData.passengerId=passenger.Id;updateRequest.push(requestData)}});return updateRequest};var buildPassengersRecord=function(oldPassengerList,newPassengerList){var newListPaxCount=0;var oldListPaxCount=0;if(oldPassengerList.length===newPassengerList.length){return newPassengerList}else if(oldPassengerList.length===0&&newPassengerList.length===1){newPassengerList[0].rawRecord.isNewPassenger=true;return newPassengerList}else{for(newListPaxCount;newListPaxCount<newPassengerList.length;newListPaxCount+=1){for(oldListPaxCount;oldListPaxCount<oldPassengerList.length;oldListPaxCount+=1){newPassengerList[newListPaxCount].rawRecord.isNewPassenger=true;if(oldPassengerList[oldListPaxCount].rawRecord.Id===newPassengerList[newListPaxCount].rawRecord.Id){newPassengerList[newListPaxCount].rawRecord.isNewPassenger=false;break}}oldListPaxCount=0}}return newPassengerList};return{getPassengerNumber:getPassengerNumber,buildUpdatePassengerRequest:buildUpdatePassengerRequest,buildPassengersRecord:buildPassengersRecord}}])}),define("src/apps/mts/app.js",["angular","isoCountries","ionic","coreapi","app/config","acnNg/app","acnNg/feedback/feedback","acnNg/components/sticky/sticky","acnNg/components/content/contentfixed","acnNg/components/menu/overlay","youOne/app","youOne/tripbrowser/tripbrowser","youOne/sso/ssoservice","youOne/terms/terms","components/redirector/redirector","components/loading/loading","components/popup/criticalerror/criticalerror","components/analytics/analytics","components/bootstrap/bootstrap","components/circularmenu/circularmenu","components/fadein/fadein","components/sf-src/sf-src","components/gtm/gtm","currentTheme/settings","app/animator/animator","app/functional.config","app/app.settings","app/brand.settings","app/trip/trip","app/profile/profile","app/horizon/horizon","app/destinations/destinations","app/translations/translations","youOne/passengerdetail/find-passenger-service","app/layout/sidemenu/triplist/triplist","app/layout/sidemenu/triplist/trip-list-helper"],function(angular,isoCountries){return window.iso=isoCountries,angular.module("app",["ionic","acnone","youone","mts.functional.config","mts.app.settings","mts.brand.settings","ngTouch","tq.coreapi","tq.redirector","tq.circularmenu","tq.popup.criticalerror","tq.content.fixed","tq.menu.overlay","tq.fadein","tq.bootstrap","tq.analytics","tq.feedback","tq.gtm","ao.sf-src","ao.ion-sticky","ttc.tripbrowser","ttc.ssoservice","ttc.terms","ttc.find-passenger-service","themes.settings","mts.animator","mts.trip","mts.profile","mts.destinations","mts.translations","mts.triplist","mts.horizon"]).config(function(mtsAnimatorProvider,tqBootstrapProvider){tqBootstrapProvider.addTaskOnActivationFinish(function(ttcSsoService){return ttcSsoService.isNotLoggedIn()?void ttcSsoService.logout():!0}),tqBootstrapProvider.addTaskOnActivationFinish(function(ttcTermsService,tqCoreConnector){return tqCoreConnector.user.getUserDataPromise().then(function(){return ttcTermsService.loadTermsObject()})})}).run(function($rootScope,$ionicScrollDelegate,$timeout,tqLoading,$ionicSideMenuDelegate,tqRedirector,$interval,$window,tqGoogleTagManager,tqCoreConnector){ionic.DomUtil.getParentOrSelfWithClass=function(e,className,depth){for(depth=depth||20;e&&depth--;){if(e.classList&&e.classList.contains(className))return e;e=e.parentNode}return null},tqRedirector.setRouteRedirectMethod(function(ttcTripBrowser,$q){var locationDeferred=$q.defer(),redirectPath="/profile/edit";return ttcTripBrowser.getClosestPassenger().then(function(upcomingPassenger){upcomingPassenger&&(redirectPath="/trip/"+upcomingPassenger.rawRecord.Id)})["finally"](function(){locationDeferred.resolve(redirectPath)}),locationDeferred.promise});var ionicLoadingShown=!1;$rootScope.rootTemplate="apps/mts/index.tpl.html";var reloadIntervalPromise,reloadIntervalMinutes=120;$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){(toState.resolve||toState.data&&toState.data.showLoading)&&!event.defaultPrevented&&(tqLoading.show(),ionicLoadingShown=!0)}),$rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){null!=reloadIntervalPromise&&$interval.cancel(reloadIntervalPromise),reloadIntervalPromise=$interval(function(){$window.location.reload()},60*reloadIntervalMinutes*1e3),ionicLoadingShown&&(tqLoading.hide(),ionicLoadingShown=!1),$rootScope.state={name:toState.name,data:toState.data,params:toParams},tqGoogleTagManager.push({event:"page.open",pageUrl:toState.url,pageName:toState.name,userId:tqCoreConnector.user.userInfo.getUserId()}),$timeout(function(){$ionicScrollDelegate.$getByHandle("main-application-scroll").resize()},300),$ionicSideMenuDelegate.isOpenRight()&&$ionicSideMenuDelegate.toggleRight()}),$rootScope.$on("$stateChangeError",function(event,toState,toParams,fromState,fromParams){ionicLoadingShown&&(tqLoading.hide(),ionicLoadingShown=!1)})}).controller("AppCtrl",function($scope,$settings,$ionicSideMenuDelegate,tqCoreConnector,ttcTermsService,$timeout,$window,$translate,$ionicPopup,ttcPopupAbout,ttcSsoService,tqLoading){var self=this;this.init=function(){window.accentureONECore&&window.accentureONECore.sellingCompanyId&&""!==window.accentureONECore.sellingCompanyId?($scope.$on("tqBootstrapFinished",self.showAboutTravelSpaceWelcomePopUp),$scope.$on("tqBootstrapFinished",self.validateTermsAndConditionsAcceptance)):(tqLoading.hide(),$ionicPopup.show({title:"Page not found",template:"Please try to type web address correctly.",scope:$scope,buttons:[{text:"OK",type:"primary",onTap:ionic.debounce(function(){tqLoading.show(),ttcSsoService.logout()},1500,!0)}]}))},this.validateTermsAndConditionsAcceptance=function(){ttcTermsService.termsAndConditionsAreApproved()||ttcTermsService.showTermsAndConditionsPopup()},this.showAboutTravelSpaceWelcomePopUp=function(){$translate(["FIRST_TIME_WELCOME_TITLE"]).then(function(theTranslations){ttcPopupAbout.show({title:theTranslations.FIRST_TIME_WELCOME_TITLE,templateUrl:"apps/mts/aboutMtsPopupContent.tpl.html",moduleName:"myTravelSpace"})})},this.openBrandSiteInNewWindow=function(){var urlToGoTo=$settings.get("brand.homepageUrl","https://thetravelcorporation.com/");$window.open(urlToGoTo,"_blank")},this.openMenuAfterLogin=function(){var displayBurgerMenu=!0;window.localStorage&&(displayBurgerMenu=window.localStorage.getItem("isBurgerMenuDisplayedAfterLogin")),displayBurgerMenu!==!1&&"false"!==displayBurgerMenu&&($ionicSideMenuDelegate.toggleRight(),window.localStorage&&window.localStorage.setItem("isBurgerMenuDisplayedAfterLogin","false"))},$scope.$watch(function(){tqCoreConnector.user.userInfo.getUserAvatar()},function(newValue,oldValue){newValue!=oldValue&&($scope.userAvatar=newValue)}),$scope.$on("tqBootstrapFinished",function(){$scope.userAvatar=tqCoreConnector.user.userInfo.getUserAvatar(),tqCoreConnector.user.getUserAvatarDataPromise().then(function(){$scope.userAvatar=tqCoreConnector.user.userInfo.getUserAvatar()})}),$scope.$on("user-profile-updated",function(event,data){$timeout(function(){$scope.userAvatar=tqCoreConnector.user.userInfo.getUserAvatar()},300)}),$scope.onHomeButtonClicked=function(){self.openBrandSiteInNewWindow()},$scope.toggleMenu=function(){$ionicSideMenuDelegate.toggleRight()},$scope.closeSideMenu=function(){$ionicSideMenuDelegate.isOpenRight()&&$ionicSideMenuDelegate.toggleRight()},$scope.backToSite=function(){var urlToGoTo=$settings.get("brand.homepageUrl","https://thetravelcorporation.com/");window.accentureONECore&&window.accentureONECore.region&&-1===window.accentureONECore.region.indexOf("{!")&&(urlToGoTo+=window.accentureONECore.region),$ionicSideMenuDelegate.toggleRight(),document.location=urlToGoTo},$scope.goToContactUs=function(){var urlToGoTo=$settings.get("brand.contactUrl","https://thetravelcorporation.com/community/"),region="uk";window.accentureONECore&&window.accentureONECore.region&&-1===window.accentureONECore.region.indexOf("{!")&&(region=window.accentureONECore.region),$ionicSideMenuDelegate.toggleRight(),document.location=urlToGoTo.replace("{REGION}",region)},$scope.singleLogout=function(){$ionicPopup.confirm({title:"Are you sure you want to logout?",cancelText:"NO",okText:"YES",cssClass:"you-one-confirmation-popup"}).then(function(affermative){affermative&&ttcSsoService.logout()})},this.init()})}),require("src/apps/mts/app.js")});